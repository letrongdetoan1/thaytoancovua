window.chesscom=window.chesscom||{},window.chesscom.routes=window.chesscom.routes||{},Object.assign(window.chesscom.routes,{web_game_callback_shared:{tokens:[["variable","/","facebook|twitter","type"],["text","/callback/game/shared"]],defaults:{subdomain:"www"},requirements:{type:"facebook|twitter",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_tv_callback_set_watched:{tokens:[["variable","/","[^/]++","url"],["text","/chess-tv/callback/set-watched"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_video_callback_set_watched:{tokens:[["variable","/","[^/]++","video"],["text","/video/callback/setWatched"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_game_get_gif_url:{tokens:[["variable","/","[^/]++","id"],["variable","/","daily|live","type"],["text","/callback/game/gif"]],defaults:{subdomain:"www"},requirements:{type:"daily|live",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["GET"],schemes:["https"]},web_game_callback_create_dyn_gif_url:{tokens:[["text","/callback/game/dyn-gif"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_content_gifs:{tokens:[["text","/gifs"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_content_gifs:{tokens:[["text","/gifs"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_tinymce_get_chessdiagram:{tokens:[["text","/tinymce/api/get_diagram"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|admin"},hosttokens:[["text",".chess.com"],["variable","","www|admin","subdomain"]],methods:[],schemes:["https"]},web_analysis_game_callback_view:{tokens:[["variable","/","[^/]++","uuid"],["text","/callback/analysis"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["GET"],schemes:["https"]},web_friend_accept_request_callback:{tokens:[["variable","/","[^/]++","user"],["text","/callback/friend/accept"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["PUT"],schemes:["https"]},web_friend_cancel_request_callback:{tokens:[["variable","/","[^/]++","user"],["text","/callback/friend/cancel/request"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_callback_username_search:{tokens:[["variable","/","[^/]++","username"],["text","/callback/user/search"]],defaults:{username:null,subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_friend_callback_friends_search:{tokens:[["text","/search"],["variable","/","[^/]++","user"],["text","/callback/friends"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_user_callback_custom_criteria_search:{tokens:[["text","/callback/user/custom-criteria-search"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_friend_decline_request_callback:{tokens:[["variable","/","[^/]++","user"],["text","/callback/friend/decline/request"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["DELETE"],schemes:["https"]},web_friend_registration_invite_link_callback:{tokens:[["text","/callback/friend/registration-invite-link"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_play_app_view:{tokens:[["variable","/","ios|iphone|android|huawei","type"],["text","/play/apps"]],defaults:{subdomain:"www"},requirements:{type:"ios|iphone|android|huawei",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_play_app_view:{tokens:[["variable","/","ios|iphone|android|huawei","type"],["text","/play/apps"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{type:"ios|iphone|android|huawei",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_index:{tokens:[["text","/"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_index:{tokens:[["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_security_register:{tokens:[["text","/register"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["GET"],schemes:["https"]},i18n_web_security_register:{tokens:[["text","/register"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["GET"],schemes:["https"]},web_friend_request_callback:{tokens:[["variable","/","[^/]++","user"],["text","/callback/friend/request"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_member_callback_block_member:{tokens:[["variable","/","[^/]++","username"],["text","/callback/member/block"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_callback_valid_username:{tokens:[["text","/callback/user/valid"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_user_callback_valid_username:{tokens:[["text","/callback/user/valid"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_friend_delete_callback:{tokens:[["variable","/","[^/]++","user"],["text","/callback/friend/delete"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["DELETE"],schemes:["https"]},web_user_callback_dismiss_follow_suggestion:{tokens:[["variable","/","[^/]++","username"],["text","/callback/user/dismiss_follow"]],defaults:{subdomain:"www"},requirements:{id:"\\d+",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_callback_report_reasons:{tokens:[["text","/callback/report-user"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_member_view:{tokens:[["variable","/","[^/]++","username"],["text","/member"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_member_view:{tokens:[["variable","/","[^/]++","username"],["text","/member"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},pubapi_player_profile:{tokens:[["variable","/","[^/]++","username"],["text","/pub/player"]],defaults:[],requirements:[],hosttokens:[["text","api.chess.com"]],methods:[],schemes:["https"]},web_user_callback_follow_suggestions:{tokens:[["text","/callback/user/follow_suggestions"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_user_callback_recent_opponents:{tokens:[["text","/callback/recent/opponents"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_security_callback_user_roles:{tokens:[["text","/callback/security/user/roles"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_user_callback_popup:{tokens:[["variable","/","[^/]++","username"],["text","/callback/user/popup"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_guest_update_skill_level:{tokens:[["text","/guest/update-skill-level"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_callback_set_archive_view:{tokens:[["text","/callback/user/archive-view"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_callback_set_fair_play_agree:{tokens:[["variable","/","1|0","fairPlayAgree"],["text","/callback/user/set-fair-play-agree"]],defaults:{subdomain:"www"},requirements:{fairPlayAgree:"1|0",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_callback_set_home_recent_content_type:{tokens:[["text","/callback/user/home-recent-content-type"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_member_callback_track_member:{tokens:[["variable","/","[^/]++","username"],["text","/callback/member/track"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_member_callback_unblock_member:{tokens:[["variable","/","[^/]++","username"],["text","/callback/member/unblock"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_member_callback_untrack_member:{tokens:[["variable","/","[^/]++","username"],["text","/callback/member/untrack"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_callback_get_board_settings:{tokens:[["text","/callback/board-settings"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_themes_data_callback:{tokens:[["text","/callback/themes/data"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["GET"],schemes:["https"]},web_security_login_and_go:{tokens:[["text","/login_and_go"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_security_login_and_go:{tokens:[["text","/login_and_go"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_game_daily:{tokens:[["variable","/","[^/]++","id"],["text","/game/daily"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_game_daily:{tokens:[["variable","/","[^/]++","id"],["text","/game/daily"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_search_redirect:{tokens:[["text","/search/redirect"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_search_redirect:{tokens:[["text","/search/redirect"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_user_home:{tokens:[["text","/home"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_live:{tokens:[["text","/live"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_live:{tokens:[["text","/live"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_security_logout:{tokens:[["text","/logout"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_membership:{tokens:[["text","/membership"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_membership:{tokens:[["text","/membership"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_message_index:{tokens:[["text","/messages"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["GET"],schemes:["https"]},web_member_play:{tokens:[["variable","/","[^/]++","opponent"],["text","/play"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_member_play:{tokens:[["variable","/","[^/]++","opponent"],["text","/play"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_stats:{tokens:[["variable","/","[^/]++","username"],["text","/stats"]],defaults:{username:null,subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_stats:{tokens:[["variable","/","[^/]++","username"],["text","/stats"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{username:null,subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_user_settings_themes:{tokens:[["text","/settings/themes"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_user_settings_edit:{tokens:[["text","/settings"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_play:{tokens:[["text","/play/online"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_play:{tokens:[["text","/play/online"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_tv:{tokens:[["text","/tv"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_tv:{tokens:[["text","/tv"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_user_game_settings_email_callback_animation_type:{tokens:[["text","/callback/settings/user/email/animationType"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_game_settings_email_callback_board_color:{tokens:[["text","/callback/settings/user/email/boardColor"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_game_settings_email_callback_coordinates:{tokens:[["text","/callback/settings/user/email/coordinates"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_game_settings_callback_dark_mode_toggle:{tokens:[["text","/callback/settings/user/darkModeToggle"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_game_settings_email_callback_show_legal_moves_toggle:{tokens:[["text","/callback/settings/user/email/showLegalMovesToggle"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_game_settings_email_callback_highlight_last_move_toggle:{tokens:[["text","/callback/settings/user/email/highlightLastMoveToggle"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_game_settings_email_callback_is_white_on_bottom_toggle:{tokens:[["text","/callback/settings/user/email/isWhiteOnBottom"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_game_settings_email_callback_move_list_display_type:{tokens:[["text","/callback/settings/user/email/moveListDisplayType"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_game_settings_email_callback_move_method:{tokens:[["text","/callback/settings/user/email/moveMethod"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_game_settings_email_callback_piece:{tokens:[["text","/callback/settings/user/email/pieceStyle"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_game_settings_email_callback_sound_toggle:{tokens:[["text","/callback/settings/user/email/soundToggle"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_game_settings_email_callback_show_timestamps:{tokens:[["text","/callback/settings/user/email/showTimestamps"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_game_settings_email_callback_sound_theme:{tokens:[["text","/callback/settings/user/email/soundTheme"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_2fa_login:{tokens:[["text","/2fa"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_2fa_login:{tokens:[["text","/2fa"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_article_callback_list_authors:{tokens:[["text","/callback/articles/authors"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_blog_callback_authors:{tokens:[["text","/callback/blogs/authors"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_content_callback_load_more:{tokens:[["variable","/","[1-9]+[0-9]*","page"],["variable","/","article|news|blog","contentType"],["text","/callback/content/list"]],defaults:{subdomain:"www"},requirements:{page:"[1-9]+[0-9]*",contentType:"article|news|blog",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_content_callback_load_more:{tokens:[["variable","/","[1-9]+[0-9]*","page"],["variable","/","article|news|blog","contentType"],["text","/callback/content/list"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{page:"[1-9]+[0-9]*",contentType:"article|news|blog",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_news_callback_list_authors:{tokens:[["text","/callback/news/authors"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_content_callback_feature_article:{tokens:[["variable","/","[^/]++","id"],["text","/callback/content/feature/article"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_blog_callback_feature:{tokens:[["text","/headline"],["variable","/","[^/]++","id"],["text","/callback/blog"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_content_callback_feature_lesson_course:{tokens:[["variable","/","[^/]++","id"],["text","/callback/content/feature/lesson_course"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_content_callback_feature_news:{tokens:[["variable","/","[^/]++","id"],["text","/callback/content/feature/news"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_content_callback_feature_chess_video:{tokens:[["variable","/","[^/]++","id"],["text","/callback/content/feature/chess_video"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_callback_set_content_language:{tokens:[["text","/callback/user/content-language/set"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_article_view:{tokens:[["variable","/","[^/]++","url"],["text","/article/view"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_article_view:{tokens:[["variable","/","[^/]++","url"],["text","/article/view"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_survey_callback_vote:{tokens:[["variable","/","\\d+","optionId"],["text","/vote"],["variable","/","\\d+","id"],["text","/callback/survey"]],defaults:{subdomain:"www"},requirements:{id:"\\d+",optionId:"\\d+",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_team_match_view:{tokens:[["variable","/","\\d+","match"],["text","/club/matches"]],defaults:{subdomain:"www"},requirements:{match:"\\d+",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_team_match_view:{tokens:[["variable","/","\\d+","match"],["text","/club/matches"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{match:"\\d+",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_tournament_view:{tokens:[["variable","/","[^/]++","url"],["text","/tournament"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_tournament_view:{tokens:[["variable","/","[^/]++","url"],["text","/tournament"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_analysis_board_editor:{tokens:[["text","/analysis"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_analysis_board_editor:{tokens:[["text","/analysis"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_votechess_game:{tokens:[["variable","/","[^/]++","id"],["text","/votechess/game"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_votechess_game:{tokens:[["variable","/","[^/]++","id"],["text","/votechess/game"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_user_callback_report_user:{tokens:[["text","/callback/report-user"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_tv_callback_report:{tokens:[["variable","/","[^/]++","video"],["variable","/","[^/]++","reason"],["text","/chess-tv/callback/report"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_about:{tokens:[["text","/about"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_league_division:{tokens:[["variable","/","[\\w]{6,}","division"],["variable","/","\\w+","league"],["text","/leagues"]],defaults:{subdomain:"www"},requirements:{league:"\\w+",division:"[\\w]{6,}",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_league_division:{tokens:[["variable","/","[\\w]{6,}","division"],["variable","/","\\w+","league"],["text","/leagues"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{league:"\\w+",division:"[\\w]{6,}",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_membership_cancel:{tokens:[["text","/membership/downgrade"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_membership_cancel_great_choice:{tokens:[["text","/membership/downgrade/great_choice"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_membership_gift:{tokens:[["variable","/","[^/]++","username"],["text","/membership/gift"]],defaults:{username:null,subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_membership_gift:{tokens:[["variable","/","[^/]++","username"],["text","/membership/gift"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{username:null,subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_payment_index:{tokens:[["text","/payment"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_policies_agreement:{tokens:[["text","/legal/user-agreement"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_policies_agreement:{tokens:[["text","/legal/user-agreement"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_tactics_battle_callback_battle_abort:{tokens:[["text","/abort"],["variable","/","[^/]++","id"],["text","/callback/tactics/battles"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_tactics_battle_callback_challenge_accept:{tokens:[["text","/accept"],["variable","/","[0-9A-Fa-f]{8}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{12}","id"],["text","/callback/tactics/battle-challenges"]],defaults:{subdomain:"www"},requirements:{id:"[0-9A-Fa-f]{8}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{12}",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_tactics_battle_callback_challenge_cancel:{tokens:[["variable","/","[0-9A-Fa-f]{8}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{12}","id"],["text","/callback/tactics/battle-challenges"]],defaults:{subdomain:"www"},requirements:{id:"[0-9A-Fa-f]{8}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{12}",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["DELETE"],schemes:["https"]},web_tactics_battle_callback_challenge_create:{tokens:[["text","/callback/tactics/battle-challenges"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_tactics_battle_callback_challenge_deny:{tokens:[["text","/deny"],["variable","/","[0-9A-Fa-f]{8}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{12}","id"],["text","/callback/tactics/battle-challenges"]],defaults:{subdomain:"www"},requirements:{id:"[0-9A-Fa-f]{8}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{12}",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_tactics_battle_callback_create_match:{tokens:[["text","/callback/tactics/battle/match"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_tactics_battle_callback_seek_create:{tokens:[["text","/callback/tactics/battle-seeks"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_tactics_battle_callback_seek_cancel:{tokens:[["text","/callback/tactics/battle-seeks/cancel"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_tactics_battle_callback_battle_view:{tokens:[["variable","/","[0-9A-Fa-f]{8}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{12}","id"],["text","/callback/tactics/battles"]],defaults:{subdomain:"www"},requirements:{id:"[0-9A-Fa-f]{8}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{12}",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["GET"],schemes:["https"]},web_tactics_battle_callback_leaderboard_friends:{tokens:[["text","/callback/tactics/battle/leaderboard/friends"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_tactics_battle_callback_leaderboard:{tokens:[["text","/callback/tactics/battle/leaderboard"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_tactics_battle_callback_observe_list:{tokens:[["text","/callback/tactics/battle/observe"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_tactics_battle_callback_stats_user:{tokens:[["text","/callback/tactics/battle/stats/user"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_tactic_theme_training:{tokens:[["text","/callback/tactics/learning/next"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_tactic_callback_theme_training_submit_moves:{tokens:[["text","/callback/tactics/themeTraining/submitMoves"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_tactic_practice:{tokens:[["text","/practice"],["variable","/","\\d+","id"],["text","/puzzles/problem"]],defaults:{subdomain:"www"},requirements:{id:"\\d+",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_tactic_practice:{tokens:[["text","/practice"],["variable","/","\\d+","id"],["text","/puzzles/problem"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{id:"\\d+",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_stats_tactics_chart_data_callback:{tokens:[["text","/chart"],["variable","/","[^/]++","username"],["text","/callback/tactics/stats"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["GET"],schemes:["https"]},web_tactics_callback_rated_next:{tokens:[["text","/callback/tactics/rated/next"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_tactic_callback_submit_moves:{tokens:[["text","/callback/tactics/submitMoves"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_tactic_callback_submit_moves_unrated:{tokens:[["text","/callback/tactics/submitMovesUnrated"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_stats_tactics:{tokens:[["variable","/","0|7|30|90|365","days"],["variable","/","[^/]++","username"],["text","/stats/puzzles"]],defaults:{username:null,days:90,subdomain:"www"},requirements:{days:"0|7|30|90|365",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_stats_tactics:{tokens:[["variable","/","0|7|30|90|365","days"],["variable","/","[^/]++","username"],["text","/stats/puzzles"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{username:null,days:90,subdomain:"www",_locale:""},requirements:{days:"0|7|30|90|365",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_puzzles_mode_view:{tokens:[["variable","/","[^/]++","shortUuid"],["variable","/","[^/]++","username"],["variable","/","[^/]++","mode"],["text","/puzzles"]],defaults:{mode:"rated",subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_puzzles_mode_view:{tokens:[["variable","/","[^/]++","shortUuid"],["variable","/","[^/]++","username"],["variable","/","[^/]++","mode"],["text","/puzzles"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{mode:"rated",subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_tactics_callback_challenge_leaderboard_friends:{tokens:[["text","/callback/tactics/challenge/leaderboard/friends"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_tactics_callback_challenge_leaderboard:{tokens:[["text","/callback/tactics/challenge/leaderboard"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_tactics_callback_challenge_leaderboard_personal:{tokens:[["text","/callback/tactics/challenge/leaderboard/personal"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_dynboard_puzzle_rush:{tokens:[["variable","/","[^/]++","id"],["text","/social/board/puzzle-rush"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},share_puzzle_rush_image:{tokens:[["variable","/","[^/]++","shortUuid"],["variable","/","[^/]++","username"],["text","/share/puzzle/rush"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_tactic_view:{tokens:[["variable","/","\\d+","id"],["text","/puzzles/problem"]],defaults:{subdomain:"www"},requirements:{id:"\\d+",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_tactic_view:{tokens:[["variable","/","\\d+","id"],["text","/puzzles/problem"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{id:"\\d+",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_tactic_challenge_archive:{tokens:[["text","/puzzles/rush/archive"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_tactic_challenge_archive:{tokens:[["text","/puzzles/rush/archive"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_tactics_callback_challenge_stats_user:{tokens:[["text","/callback/tactics/challenge/stats/user"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_tactics_callback_challenge_view:{tokens:[["text","/callback/tactics/challenge/view"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_tactics_callback_challenge_begin:{tokens:[["text","/callback/tactics/challenge/begin"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_tactics_callback_challenge_puzzles:{tokens:[["text","/callback/tactics/challenge/puzzles"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_tactics_callback_challenge_end:{tokens:[["text","/callback/tactics/challenge/end"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_tactic_callback_tags:{tokens:[["text","/callback/tactics/tags"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_leaderboard_tactics:{tokens:[["text","/leaderboard/tactics"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_leaderboard_tactics:{tokens:[["text","/leaderboard/tactics"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_lesson_view:{tokens:[["variable","/","[^/]++","url"],["variable","/","[^/]++","course"],["text","/lessons"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_lesson_view:{tokens:[["variable","/","[^/]++","url"],["variable","/","[^/]++","course"],["text","/lessons"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_tactic_problems:{tokens:[["text","/puzzles/problems"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_tactic_problems:{tokens:[["text","/puzzles/problems"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_tactic_callback_get_tags:{tokens:[["text","/tags"],["variable","/","[^/]++","id"],["text","/callback/tactics"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_tactic_callback_vote_tag:{tokens:[["variable","/","[^/]++","upOrDown"],["text","/vote"],["variable","/","[^/]++","tagId"],["text","/tag"],["variable","/","[^/]++","id"],["text","/callback/tactics"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_tactic_callback_vote:{tokens:[["variable","/","[^/]++","upOrDown"],["text","/vote"],["variable","/","[^/]++","id"],["text","/callback/tactics"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_tactic_callback_show_details_change:{tokens:[["text","/callback/tactics/showDetailsChange"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_tactic_callback_show_time_change:{tokens:[["text","/callback/tactics/show-timer-change"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_tactics_callback_stats_user:{tokens:[["text","/callback/tactics/stats/user"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_articles_authors:{tokens:[["text","/articles/authors"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_articles_authors:{tokens:[["text","/articles/authors"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_article_search:{tokens:[["text","/article/search"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_article_search:{tokens:[["text","/article/search"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_article_category:{tokens:[["variable","/",".+","url"],["text","/articles"]],defaults:{subdomain:"www"},requirements:{url:".+",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_article_category:{tokens:[["variable","/",".+","url"],["text","/articles"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{url:".+",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_article_post:{tokens:[["variable","/","[^/]++","id"],["text","/article/post"]],defaults:{id:null,subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_article_post:{tokens:[["variable","/","[^/]++","id"],["text","/article/post"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{id:null,subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_article_delete:{tokens:[["variable","/","\\d+","id"],["text","/article/delete"]],defaults:{subdomain:"www"},requirements:{id:"\\d+",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_article_member:{tokens:[["variable","/","[^/]++","username"],["text","/article/member"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_article_member:{tokens:[["variable","/","[^/]++","username"],["text","/article/member"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_article_toggle_lock_comments:{tokens:[["variable","/","\\d+","id"],["text","/article/lock-comments"]],defaults:{subdomain:"www"},requirements:{id:"\\d+",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_article_index:{tokens:[["text","/articles"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_article_index:{tokens:[["text","/articles"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_blog_all:{tokens:[["text","/blogs/all"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_blog_all:{tokens:[["text","/blogs/all"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_blog_view:{tokens:[["variable","/",".+","url"],["text","/blog"]],defaults:{subdomain:"www"},requirements:{url:".+",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_blog_view:{tokens:[["variable","/",".+","url"],["text","/blog"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{url:".+",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_blog_go_live:{tokens:[["variable","/","\\d+","id"],["text","/blog/go-live"]],defaults:{subdomain:"www"},requirements:{id:"\\d+",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_blog_post:{tokens:[["text","/blog/post"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["GET","POST"],schemes:["https"]},web_blog_index:{tokens:[["text","/blogs"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_blog_index:{tokens:[["text","/blogs"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_blog_search:{tokens:[["text","/blog/search"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_blog_search:{tokens:[["text","/blog/search"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_blog_settings_edit:{tokens:[["text","/settings/blog"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_content_set_buried:{tokens:[["variable","/","bury|unbury","bury"],["text","/content_set_buried"]],defaults:{subdomain:"www"},requirements:{bury:"bury|unbury",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_blog_delete:{tokens:[["variable","/","\\d+","id"],["text","/blog/delete"]],defaults:{subdomain:"www"},requirements:{id:"\\d+",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_blog_member:{tokens:[["variable","/","[^/]++","url"],["text","/blog"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_blog_member:{tokens:[["variable","/","[^/]++","url"],["text","/blog"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_blog_report_spam:{tokens:[["variable","/","\\d+","id"],["text","/blog/report_spam"]],defaults:{subdomain:"www"},requirements:{id:"\\d+",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_blog_authors:{tokens:[["text","/blog/authors"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_blog_authors:{tokens:[["text","/blog/authors"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_leaderboard_callback_bughouse_action:{tokens:[["text","/callback/leaderboard/live/bughouse"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_leaderboard_callback_crazyhouse_action:{tokens:[["text","/callback/leaderboard/live/crazyhouse"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_leaderboard_callback_daily_action:{tokens:[["variable","/","[^/]++","type"],["text","/callback/leaderboard/daily"]],defaults:{type:"chess",subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_leaderboard_callback_kingofthehill_action:{tokens:[["text","/callback/leaderboard/live/kingofthehill"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_leaderboard_callback_lessons:{tokens:[["text","/callback/leaderboard/lessons"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_leaderboard_callback_live_action:{tokens:[["variable","/","[^/]++","chessType"],["variable","/","[^/]++","type"],["text","/callback/leaderboard/live"]],defaults:{type:"blitz",chessType:"chess",subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_leaderboard_callback_tactics_action:{tokens:[["text","/callback/leaderboard/tactics"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_tactics_callback_challenge_leaderboard_club:{tokens:[["text","/callback/tactics/challenge/leaderboard/club"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_leaderboard_callback_threecheck_action:{tokens:[["text","/callback/leaderboard/live/threecheck"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_tactic_callback_remove_leaderboard_user:{tokens:[["variable","/","[^/]++","username"],["text","/callback/tactics/leaderboard/remove"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_leaderboard_callback_bughouse_sidebar_stats:{tokens:[["text","/callback/leaderboard/bughouse/sidebar/stats"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_leaderboard_callback_crazyhouse_sidebar_stats:{tokens:[["text","/callback/leaderboard/crazyhouse/sidebar/stats"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_leaderboard_callback_daily_sidebar_stats:{tokens:[["text","/stats"],["variable","/","[^/]++","type"],["text","/callback/leaderboard/daily/sidebar"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_leaderboard_callback_kingofthehill_sidebar_stats:{tokens:[["text","/callback/leaderboard/kingofthehill/sidebar/stats"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_leaderboard_callback_lessons_sidebar_stats:{tokens:[["text","/callback/leaderboard/lessons/sidebar/stats"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_leaderboard_callback_live_sidebar_stats:{tokens:[["variable","/","[^/]++","chessType"],["text","/stats"],["variable","/","[^/]++","type"],["text","/callback/leaderboard/live/sidebar"]],defaults:{chessType:"chess",subdomain:"www"},requirements:{filter:"chess|chess960",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_leaderboard_callback_live_team_match:{tokens:[["text","/callback/leaderboard/live/live_team_match"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_leaderboard_callback_tactics_sidebar_stats:{tokens:[["text","/callback/leaderboard/tactics/sidebar/stats"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_leaderboard_callback_tactics_challenge_sidebar_stats:{tokens:[["text","/callback/leaderboard/tactics-challenge/sidebar/stats"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_leaderboard_callback_threecheck_sidebar_stats:{tokens:[["text","/callback/leaderboard/threecheck/sidebar/stats"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_leaderboard_daily:{tokens:[["variable","/","[^/]++","type"],["text","/leaderboard/daily"]],defaults:{type:"chess",subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_leaderboard_daily:{tokens:[["variable","/","[^/]++","type"],["text","/leaderboard/daily"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{type:"chess",subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_leaderboard_live:{tokens:[["variable","/","[^/]++","chessType"],["variable","/","[^/]++","type"],["text","/leaderboard/live"]],defaults:{type:"blitz",chessType:"chess",subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_leaderboard_live:{tokens:[["variable","/","[^/]++","chessType"],["variable","/","[^/]++","type"],["text","/leaderboard/live"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{type:"blitz",chessType:"chess",subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_stats_bughouse:{tokens:[["variable","/","[^/]++","username"],["text","/stats/live/bughouse"]],defaults:{username:null,subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_stats_bughouse:{tokens:[["variable","/","[^/]++","username"],["text","/stats/live/bughouse"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{username:null,subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_stats_daily:{tokens:[["variable","/","0|7|30|90|365","days"],["variable","/","[^/]++","username"],["variable","/","chess|chess960","type"],["text","/stats/daily"]],defaults:{username:null,type:"chess",days:90,subdomain:"www"},requirements:{type:"chess|chess960",days:"0|7|30|90|365",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_stats_daily:{tokens:[["variable","/","0|7|30|90|365","days"],["variable","/","[^/]++","username"],["variable","/","chess|chess960","type"],["text","/stats/daily"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{username:null,type:"chess",days:90,subdomain:"www",_locale:""},requirements:{type:"chess|chess960",days:"0|7|30|90|365",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_stats_live:{tokens:[["variable","/","[^/]++","days"],["variable","/","[^/]++","username"],["variable","/","blitz|bullet|rapid","type"],["text","/stats/live"]],defaults:{username:null,days:90,subdomain:"www"},requirements:{type:"blitz|bullet|rapid",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_stats_live:{tokens:[["variable","/","[^/]++","days"],["variable","/","[^/]++","username"],["variable","/","blitz|bullet|rapid","type"],["text","/stats/live"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{username:null,days:90,subdomain:"www",_locale:""},requirements:{type:"blitz|bullet|rapid",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_stats_tournaments:{tokens:[["variable","/","[^/]++","username"],["text","/stats/tournaments"]],defaults:{username:null,subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_stats_tournaments:{tokens:[["variable","/","[^/]++","username"],["text","/stats/tournaments"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{username:null,subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_leaderboard_home:{tokens:[["text","/leaderboard"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_leaderboard_home:{tokens:[["text","/leaderboard"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_leaderboard_tactics_challenge:{tokens:[["variable","/","[^/]++","rushType"],["text","/leaderboard/rush"]],defaults:{rushType:"five_minutes",subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_leaderboard_tactics_challenge:{tokens:[["variable","/","[^/]++","rushType"],["text","/leaderboard/rush"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{rushType:"five_minutes",subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_tournaments_leaderboard:{tokens:[["variable","/","[^/]++","viewType"],["text","/tournaments/leaderboard"]],defaults:{viewType:"current",subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_tournaments_leaderboard:{tokens:[["variable","/","[^/]++","viewType"],["text","/tournaments/leaderboard"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{viewType:"current",subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_leaderboard_votechess:{tokens:[["text","/leaderboard/clubs/votechess"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_leaderboard_votechess:{tokens:[["text","/leaderboard/clubs/votechess"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_leaderboard_club_matches:{tokens:[["text","/leaderboard/clubs/matches"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_leaderboard_club_matches:{tokens:[["text","/leaderboard/clubs/matches"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_leaderboard_live_team_matches:{tokens:[["text","/leaderboard/clubs/live-matches"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_leaderboard_live_team_matches:{tokens:[["text","/leaderboard/clubs/live-matches"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_leaderboard_lessons:{tokens:[["text","/leaderboard/lessons"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_leaderboard_lessons:{tokens:[["text","/leaderboard/lessons"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_leaderboard_bughouse:{tokens:[["text","/leaderboard/live/bughouse"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_leaderboard_bughouse:{tokens:[["text","/leaderboard/live/bughouse"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_leaderboard_threecheck:{tokens:[["text","/leaderboard/live/threecheck"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_leaderboard_threecheck:{tokens:[["text","/leaderboard/live/threecheck"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_leaderboard_crazyhouse:{tokens:[["text","/leaderboard/live/crazyhouse"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_leaderboard_crazyhouse:{tokens:[["text","/leaderboard/live/crazyhouse"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_leaderboard_kingofthehill:{tokens:[["text","/leaderboard/live/kingofthehill"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_leaderboard_kingofthehill:{tokens:[["text","/leaderboard/live/kingofthehill"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_help:{tokens:[["text","/help"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_help:{tokens:[["text","/help"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_user_settings_change_email:{tokens:[["text","/settings/change-email"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_user_callback_report_content:{tokens:[["variable","/","[^/]++","uuid"],["text","/callback/report-forum-topic"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_comment_callback_list:{tokens:[["text","/callback/comments"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["GET"],schemes:["https"]},web_comment_callback_body:{tokens:[["text","/body"],["variable","/","[^/]++","id"],["text","/callback/comments"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["GET"],schemes:["https"]},web_comment_callback_quote:{tokens:[["text","/quote"],["variable","/","[^/]++","id"],["text","/callback/comments"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["GET"],schemes:["https"]},web_comment_callback_create:{tokens:[["text","/callback/comments"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_forum_callback_comment:{tokens:[["text","/callback/forum/comment"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_comment_callback_update:{tokens:[["variable","/","[^/]++","id"],["text","/callback/comments"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_comment_callback_delete:{tokens:[["text","/delete"],["variable","/","[^/]++","id"],["text","/callback/comments"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_track_content_callback_comment:{tokens:[["variable","/","[^/]++","track"],["variable","/",".+","parentId"],["variable","/","[^/]++","forumTopicTypeCode"],["text","/callback/track-content/comment"]],defaults:{subdomain:"www"},requirements:{parentId:".+",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_comment_callback_list_for_reactions:{tokens:[["text","/callback/commentsByRelevance"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["GET"],schemes:["https"]},web_game_live:{tokens:[["variable","/","[^/]++","id"],["text","/game/live"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_game_live:{tokens:[["variable","/","[^/]++","id"],["text","/game/live"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_game_rcn:{tokens:[["variable","/","[^/]++","id"],["text","/game/rcn"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_game_rcn:{tokens:[["variable","/","[^/]++","id"],["text","/game/rcn"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_puzzles_mode_battle_view:{tokens:[["variable","/","[^/]++","shortUuid"],["text","/puzzles/battle"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_puzzles_mode_battle_view:{tokens:[["variable","/","[^/]++","shortUuid"],["text","/puzzles/battle"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_user_callback_lifetime_score:{tokens:[["variable","/","[^/]++","opponent"],["variable","/","[^/]++","user"],["text","/callback/user/lifetime-score"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_user_callback_delete_comment:{tokens:[["variable","/","\\d+","id"],["text","/callback/comment"]],defaults:{subdomain:"www"},requirements:{id:"\\d+",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["DELETE"],schemes:["https"]},web_user_callback_get_available_flair:{tokens:[["variable","/","[^/]++","username"],["text","/callback/user/get-available-flair"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_user_callback_load_notes:{tokens:[["text","/callback/user/notes"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["GET"],schemes:["https"]},web_member_callback_mute_account:{tokens:[["variable","/","[^/]++","user"],["text","/callback/member/mute-account"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_callback_post_note:{tokens:[["text","/callback/user/note"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_callback_set_flair:{tokens:[["text","/callback/user/set-flair"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_user_callback_set_status:{tokens:[["text","/callback/user/set-status"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_policies_community:{tokens:[["text","/legal/community"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_policies_community:{tokens:[["text","/legal/community"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_member_callback_disable:{tokens:[["variable","/","\\d+","id"],["text","/callback/members/disable"]],defaults:{subdomain:"www"},requirements:{id:"\\d+",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["DELETE"],schemes:["https"]},web_member_enable:{tokens:[["variable","/","\\d+","id"],["text","/members/enable"]],defaults:{subdomain:"www"},requirements:{id:"\\d+",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_master_player_view:{tokens:[["variable","/",".+","url"],["text","/players"]],defaults:{subdomain:"www"},requirements:{url:".+",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["GET"],schemes:["https"]},i18n_web_master_player_view:{tokens:[["variable","/",".+","url"],["text","/players"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{url:".+",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["GET"],schemes:["https"]},web_member_mute:{tokens:[["variable","/","[^/]++","username"],["text","/member/mute"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_member_callback_remove_avatar:{tokens:[["variable","/","[^/]++","username"],["text","/callback/member/remove_avatar"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["DELETE"],schemes:["https"]},web_user_callback_remove_user_custom_background:{tokens:[["variable","/","[^/]++","user"],["text","/callback/remove/user_custom_background"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_member_reset_flair:{tokens:[["variable","/","[^/]++","username"],["text","/member/reset_flair"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_member_unmute:{tokens:[["variable","/","[^/]++","username"],["text","/member/unmute"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_archive_index:{tokens:[["variable","/","[^/]++","username"],["text","/games/archive"]],defaults:{username:null,subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_archive_index:{tokens:[["variable","/","[^/]++","username"],["text","/games/archive"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{username:null,subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_play_new:{tokens:[["text","/play/online/new"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_play_new:{tokens:[["text","/play/online/new"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_verification_index:{tokens:[["text","/verified"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_verification_index:{tokens:[["text","/verified"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_member_callback_trophy_list:{tokens:[["variable","/","[^/]++","trophyType"],["variable","/","[^/]++","username"],["text","/callback/member/trophy"]],defaults:{trophyType:null,subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_callback_get_trophies:{tokens:[["text","/callback/trophies"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_user_trophy_showcase_callback:{tokens:[["text","/showcase"],["variable","/","[^/]++","username"],["text","/callback/user/trophy"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_callback_count_user_trophies:{tokens:[["variable","/","[^/]++","username"],["text","/callback/count/user_trophy"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_feature_trophy_callback:{tokens:[["variable","/","0|1","featured"],["variable","/","\\d+","id"],["text","/callback/feature/trophy"]],defaults:{subdomain:"www"},requirements:{id:"\\d+",featured:"0|1",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_award_trophy_callback:{tokens:[["variable","/","\\d+","trophyId"],["variable","/","[^/]++","username"],["text","/callback/award/trophy"]],defaults:{subdomain:"www"},requirements:{trophyId:"\\d+",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_member_comments:{tokens:[["text","/comments"],["variable","/","[^/]++","username"],["text","/member"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_member_comments:{tokens:[["text","/comments"],["variable","/","[^/]++","username"],["text","/member"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_moderation_reveal:{tokens:[["variable","/","[^/]++","uuid"],["variable","/","[^/]++","type"],["text","/moderation/reveal"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_forum_category:{tokens:[["variable","/","[^/]++","url"],["text","/forum/category"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_forum_category:{tokens:[["variable","/","[^/]++","url"],["text","/forum/category"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_club_forum_view:{tokens:[["variable","/",".+","url"],["text","/clubs/forum/view"]],defaults:{subdomain:"www"},requirements:{url:".+",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_club_forum_view:{tokens:[["variable","/",".+","url"],["text","/clubs/forum/view"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{url:".+",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_track_content_callback_forum_topic:{tokens:[["variable","/","[^/]++","track"],["variable","/","\\d+","forumTopicId"],["text","/callback/track-content/forum"]],defaults:{subdomain:"www"},requirements:{forumTopicId:"\\d+",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_forum_hot_topics:{tokens:[["text","/forum/hot-topics"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_forum_hot_topics:{tokens:[["text","/forum/hot-topics"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_forum_index:{tokens:[["text","/forum"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_forum_index:{tokens:[["text","/forum"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_forum_mark_all_read_callback:{tokens:[["text","/callback/forum/mark-all-read"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_forum_my_posted_in_topics:{tokens:[["text","/forum/my_posted_in_topics"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_forum_my_topics:{tokens:[["text","/forum/my_topics"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_forum_my_tracked_topics:{tokens:[["text","/forum/my_tracked_topics"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_forum_new_posts:{tokens:[["text","/forum/new_posts"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_forum_new_posts:{tokens:[["text","/forum/new_posts"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_forum_search:{tokens:[["text","/forum/search"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_forum_search:{tokens:[["text","/forum/search"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_forum_unanswered_posts:{tokens:[["text","/forum/unanswered_posts"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_forum_unanswered_posts:{tokens:[["text","/forum/unanswered_posts"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_forum_view:{tokens:[["variable","/",".+","url"],["text","/forum/view"]],defaults:{subdomain:"www"},requirements:{url:".+",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_forum_view:{tokens:[["variable","/",".+","url"],["text","/forum/view"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{url:".+",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_callback_rewarded_ad_create:{tokens:[["variable","/","[^/]++","premiumFeatureCode"],["text","/rewardedAd/createReward"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_callback_rewarded_ad_claim:{tokens:[["variable","/","[^/]++","rewardToken"],["text","/rewardedAd/claim"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["POST"],schemes:["https"]},web_practice_custom:{tokens:[["text","/practice/custom"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_user_settings_board:{tokens:[["text","/settings/board"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_coaches:{tokens:[["text","/coaches"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_coaches:{tokens:[["text","/coaches"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_member_search:{tokens:[["text","/members/search"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_member_search:{tokens:[["text","/members/search"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_streamers:{tokens:[["text","/streamers"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_streamers:{tokens:[["text","/streamers"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_member_titled_players_category:{tokens:[["variable","/","grandmasters|woman-grandmasters|international-masters|woman-international-masters|fide-masters|woman-fide-masters|national-masters|candidate-masters|woman-candidate-masters|woman-national-masters","chessTitle"],["text","/members/titled-players"]],defaults:{subdomain:"www"},requirements:{chessTitle:"grandmasters|woman-grandmasters|international-masters|woman-international-masters|fide-masters|woman-fide-masters|national-masters|candidate-masters|woman-candidate-masters|woman-national-masters",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_member_titled_players_category:{tokens:[["variable","/","grandmasters|woman-grandmasters|international-masters|woman-international-masters|fide-masters|woman-fide-masters|national-masters|candidate-masters|woman-candidate-masters|woman-national-masters","chessTitle"],["text","/members/titled-players"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{chessTitle:"grandmasters|woman-grandmasters|international-masters|woman-international-masters|fide-masters|woman-fide-masters|national-masters|candidate-masters|woman-candidate-masters|woman-national-masters",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_member_titled_players:{tokens:[["text","/members/titled-players"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_member_titled_players:{tokens:[["text","/members/titled-players"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_puzzles_mode:{tokens:[["variable","/","[^/]++","mode"],["text","/puzzles"]],defaults:{mode:"",subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_puzzles_mode:{tokens:[["variable","/","[^/]++","mode"],["text","/puzzles"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{mode:"",subdomain:"www",_locale:""},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},web_tactics_battle_callback_challenge_list:{tokens:[["text","/callback/tactics/battle-challenges"]],defaults:{subdomain:"www"},requirements:{subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:["GET"],schemes:["https"]},web_analysis_ceac:{tokens:[["variable","/","[^/]++","gameId"],["variable","/","daily|live|master|pgn|computer","type"],["text","/analysis/game"]],defaults:{subdomain:"www"},requirements:{type:"daily|live|master|pgn|computer",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]},i18n_web_analysis_ceac:{tokens:[["variable","/","[^/]++","gameId"],["variable","/","daily|live|master|pgn|computer","type"],["text","/analysis/game"],["variable","/","es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--","_locale"]],defaults:{subdomain:"www",_locale:""},requirements:{type:"daily|live|master|pgn|computer",subdomain:"www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy",_locale:"es|fr|de|pl|ru|sv|el|pt|it|zh|ja|ko|nl|hy|bg|hr|cs|da|fi|hu|lt|no|ro|sk|sl|tr|uk|af|ar|az|be|bs|et|fa|gl|he|hi|id|is|ka|lv|ms|pt-BR|sq|sr|vi|zh-HK|zh-TW|fil|nl-BE|bn|tk|uz|ca|ur|--locale--"},hosttokens:[["text",".chess.com"],["variable","","www|schach|ru|uk|ajedrez|fr|scacchi|sakk|schaken|szachy","subdomain"]],methods:[],schemes:["https"]}}),function(){var i,s,_,T,S,C,P,O,M,R,D={71095:function(i,s,_){"use strict";_.d(s,{I:function(){return getPgnDownloadName}});const getPgnDownloadName=i=>{let s="pgn_data.pgn";return i&&i.White&&i.Black&&(s=`${i.White}_vs_${i.Black}.pgn`,i.Date&&(s=`${i.White}_vs_${i.Black}_${i.Date}.pgn`)),s}},28510:function(i,s,_){"use strict";_.d(s,{o:function(){return addBlinkingSquare}});var T=_(73863),S=Object.defineProperty,C=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,__defNormalProp=(i,s,_)=>s in i?S(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_;const addBlinkingSquare=(i,s,_,S)=>{const M=T.c.getId(),R=((i,s)=>{for(var _ in s||(s={}))P.call(s,_)&&__defNormalProp(i,_,s[_]);if(C)for(var _ of C(s))O.call(s,_)&&__defNormalProp(i,_,s[_]);return i})({id:M,interval:s,times:_},S);return i.markings.blinkingSquares.push(R),setTimeout((()=>{const s=i.markings.blinkingSquares.findIndex((i=>i.id===M));i.markings.blinkingSquares.splice(s,1)}),0),i}},63143:function(i,s,_){"use strict";_.d(s,{s:function(){return addVariant}});var T=_(8210),S=_(90891);const addVariant=(i,s)=>{if(!s)return i;(0,S.U)(i,{line:0,move:0});return s.match(/.{2}/g).forEach((s=>(0,T.Z6)(i,{tcn:s},!0))),i}},72783:function(i,s,_){"use strict";_.d(s,{R:function(){return canMoveBackward}});var T=_(43037);const canMoveBackward=(i,s=1)=>{if(0===i.tree.selected.line&&i.tree.selected.move-s<-1)return!1;const S=i.tree.lines||_(93189).Z.state.lines;return null!==T.x.findNode(S,i.tree.selected,-1*s,!1)}},10094:function(i,s,_){"use strict";_.d(s,{p:function(){return canMoveForward}});var T=_(43037);const canMoveForward=(i,s=1)=>{const S=i.tree.lines||_(93189).Z.state.lines;return null!==T.x.findNode(S,i.tree.selected,s,!1)}},37826:function(i,s,_){"use strict";_.d(s,{D:function(){return changeSettings}});var T=_(52382),S=_(4498),C=_(8204);const changeSettings=(i,s)=>{const _=Object.prototype.hasOwnProperty.call(s,"premoves")&&i.settings.premoves!==s.premoves;return i.settings=Object.assign(i.settings,s),i.settings.premoves||(0,S.o2)(i),T.A.add(i.history,T.z.SETTINGS_CHANGE),_&&C.Z.updateState(i),i}},80718:function(i,s,_){"use strict";_.d(s,{l:function(){return clearAnalysis}});var T=_(16974),S=_(43037),C=_(8204),P=_(52382);const clearAnalysis=i=>{const s=T.j.resetToMainLine(i),_=S.x.clearAnalysis(s.jce._lines());return s.jce.saveLines(_),P.A.add(s.history,P.z.TREE_CHANGE),C.Z.updateState(i)}},73815:function(i,s,_){"use strict";_.d(s,{G:function(){return clearArrow}});var T=_(52382),S=_(43037),C=_(87934),P=_(8204);const clearArrow=(i,s,_)=>{const O=S.x.getNode(i.jce._lines(),_)||S.x.getNode(i.jce._lines(),C.l.getSelectedIds(i))||i.tree.initialMarkings;O.arrows||(O.arrows=[]);const M=O.arrows.findIndex((i=>C.l.isFileRankEqual(i.fromFileRank,s.fromFileRank)&&C.l.isFileRankEqual(i.toFileRank,s.toFileRank)));return-1!==M&&(O.arrows.splice(M,1),P.Z.updateState(i),T.A.add(i.history,T.z.TREE_CHANGE)),i}},32112:function(i,s,_){"use strict";_.d(s,{J:function(){return clearBlinkingSquare}});const clearBlinkingSquare=(i,s)=>(i.markings.blinkingSquares[s]&&delete i.markings.blinkingSquares[s],i)},24097:function(i,s,_){"use strict";_.d(s,{Y:function(){return clearBoard}});_(87934);var T=_(52382),S=_(8204),C=_(37826),P=_(85309);const clearBoard=i=>((0,C.D)(i,{rules:!1}),(0,P.f)(i,"8/8/8/8/8/8/8/8 w - - 0 1"),T.A.add(i.history,T.z.LOAD),S.Z.updateState(i))},73387:function(i,s,_){"use strict";_.d(s,{U:function(){return clearEffect}});var T=_(52382),S=_(43037),C=_(87934),P=_(8204);const clearEffect=(i,s,_)=>{const O=S.x.getNode(i.jce._lines(),_)||S.x.getNode(i.jce._lines(),C.l.getSelectedIds(i))||i.tree.initialMarkings;O.effects||(O.effects=[]);const M=O.effects.findIndex((i=>C.l.isFileRankEqual(i.square,s.square)));return-1!==M&&(O.effects.splice(M,1),P.Z.updateState(i),T.A.add(i.history,T.z.TREE_CHANGE)),i}},2323:function(i,s,_){"use strict";_.d(s,{o:function(){return clearMarkedSquare}});var T=_(52382),S=_(43037),C=_(87934),P=_(8204);const clearMarkedSquare=(i,s,_)=>{const O=S.x.getNode(i.jce._lines(),_)||S.x.getNode(i.jce._lines(),C.l.getSelectedIds(i))||i.tree.initialMarkings;O.squares||(O.squares=[]);const M=O.squares.findIndex((i=>C.l.isFileRankEqual(i,s)));return-1!==M&&(O.squares.splice(M,1),P.Z.updateState(i),T.A.add(i.history,T.z.TREE_CHANGE)),i}},72194:function(i,s,_){"use strict";_.d(s,{q:function(){return clearMarkings}});var T=_(52382),S=_(43037),C=_(87934),P=_(8204);const clearMarkings=(i,s,_=!0)=>{const O=S.x.getNode(i.jce._lines(),s)||S.x.getNode(i.jce._lines(),C.l.getSelectedIds(i))||i.tree.initialMarkings;return(O.arrows&&O.arrows.length||O.squares&&O.squares.length||O.effects&&O.effects.length)&&(O.arrows=[],O.squares=[],O.effects=[],_&&(P.Z.updateState(i),T.A.add(i.history,T.z.TREE_CHANGE))),i}},48881:function(i,s,_){"use strict";_.d(s,{T:function(){return clearNodes}});var T=_(43037),S=_(52382);const clearNodes=(i,s={})=>{const _=i.jce._lines();if(!_)return i;if(void 0===s.line&&void 0===s.move)return _.forEach((i=>{i.forEach(((i,s)=>T.x.clearNode(_,{line:i.ids.line,move:s})))})),S.A.add(i.history,S.z.TREE_CHANGE),i;if(void 0===s.move){const C=T.x.getLine(i.jce._lines(),s.line);return C?(C.forEach(((i,s)=>T.x.clearNode(_,{line:C.id,move:s}))),S.A.add(i.history,S.z.TREE_CHANGE),i):i}return T.x.getNode(_,s)?(T.x.clearNode(_,s),S.A.add(i.history,S.z.TREE_CHANGE),i):i}},99926:function(i,s,_){"use strict";_.d(s,{k:function(){return convertLanToFileRanks}});const convertFileToInteger=(i="")=>i.charCodeAt(0)-97+1,convertLanToFileRanks=(i=[])=>({fromFileRank:{file:convertFileToInteger(i[0]),rank:Number(i[1])},toFileRank:{file:convertFileToInteger(i[2]),rank:Number(i[3])}})},84156:function(i,s,_){"use strict";_.d(s,{d:function(){return createGame}});var T=_(73863),S=_(8204),C=_(87934),P=_(52382),O=_(23601);const createGame=(i={})=>{const s={id:T.c.getId(),variant:i.variant||"chess",settings:Object.assign(S.Z.getInitialSettings(),i.settings),setup:Object.assign(S.Z.getInitialSetup(),i.setup),tree:Object.assign(S.Z.getInitialTree(),i.tree),history:P.A.getInitialHistory(),markings:Object.assign(S.Z.getInitialMarkings(),i.markings),premoves:[]};return(0,O.K)(s,i.player||1),Object.defineProperty(s,"jce",{writable:!1,enumerable:!1,configurable:!1,value:C.l.createJce(i)}),C.l.updateIdsFromJce(s),P.A.add(s.history,P.z.INIT),s.jce.siblingGame&&!s.sibling&&(s.sibling={id:T.c.getId(),variant:s.variant||"chess",sibling:s,settings:s.settings,setup:S.Z.getInitialSetup(),tree:S.Z.getInitialTree(),history:P.A.getInitialHistory(),markings:Object.assign(S.Z.getInitialMarkings(),i.markings),premoves:[]},Object.defineProperty(s.sibling,"jce",{writable:!1,enumerable:!1,configurable:!1,value:C.l.createJce({game:s.jce.siblingGame})}),C.l.updateIdsFromJce(s.sibling)),S.Z.updateState(s),s}},9056:function(i,s,_){"use strict";_.d(s,{Y:function(){return createVariation}});var T=_(87934),S=_(43037),C=_(52382),P=_(8204),O=Object.defineProperty,M=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,__defNormalProp=(i,s,_)=>s in i?O(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_;const createVariation=(i,s,_={})=>{const O=((i,s)=>{for(var _ in s||(s={}))R.call(s,_)&&__defNormalProp(i,_,s[_]);if(M)for(var _ of M(s))D.call(s,_)&&__defNormalProp(i,_,s[_]);return i})({},i.tree.selected);if(!i.settings.variations)return null;void 0!==_.line&&void 0!==_.move?T.l.selectNode(i,_):_=i.tree.selected;const j=S.x.getNode(i.jce._lines(),{line:_.line,move:_.move}).san;return T.l.createVariation(i),s&&T.l.move(i,j),C.A.add(i.history,C.z.JUMP_TO_POSITION,{from:O,to:_}),P.Z.updateState(i)}},34783:function(i,s,_){"use strict";_.d(s,{Y:function(){return deleteLine}});_(16974);var T=_(52382),S=(_(43037),_(8204));const deleteLine=(i,s)=>i.jce.deletePosition(-1,s)?(T.A.add(i.history,T.z.TREE_CHANGE),S.Z.updateState(i),i):null},50754:function(i,s,_){"use strict";_.d(s,{I:function(){return deleteNode}});_(70020);var T=_(43037),S=_(52382),C=_(8204);_(73530),_(90891);const deleteNode=(i,s={})=>{const _=Object.assign(i.tree.selected,s);return _.line>0&&(_.move<=0||T.x.isFirstVisibleNode(i.jce._lines(),_))&&(_.move=-1),i.jce.deletePosition(_.move,_.line),S.A.add(i.history,S.z.TREE_CHANGE),C.Z.updateState(i),i}},61596:function(i,s,_){"use strict";_.d(s,{M:function(){return deleteRemainingNodes}});var T=_(50754);_(52382),_(8204);const deleteRemainingNodes=(i,s={})=>{const _=Object.assign(i.tree.selected,s);return(0,T.I)(i,{move:_.move+1,line:_.line})}},85268:function(i,s,_){"use strict";_.d(s,{O:function(){return fixTcn}});var T=_(84156),S=_(62081),C=_(63041),P=_(73863);const fixTcn=(i,s)=>{const _=(0,T.d)({variant:i.variant,fen:P.c.getFirstFen(i)});return(0,C.C)(_,s,_.setup.fen),(0,S.W)(_)}},80631:function(i,s,_){"use strict";_.d(s,{I:function(){return getCurrentFullLine}});const getCurrentFullLine=i=>{const s=i.jce._history().length-i.jce.ids().move-1,_=i.jce.history(!0);return 0===s?_:_.slice(0,-s)}},2812:function(i,s,_){"use strict";_.d(s,{J:function(){return getPgnHeaders}});var T=_(87934);const getPgnHeaders=i=>T.l.getHeaders(i)},8276:function(i,s,_){"use strict";_.d(s,{G:function(){return getPgn}});var T=_(87934);const getPgn=(i,s)=>T.l.getPgn(i,s)},34919:function(i,s,_){"use strict";_.d(s,{P:function(){return getSelectedNode}});var T=_(43037);const getSelectedNode=i=>T.x.getSelectedNode(i)},62081:function(i,s,_){"use strict";_.d(s,{W:function(){return getTcn}});var T=_(22766),S=_(43037);const getTcn=(i,s)=>{const C=i.jce&&i.jce._lines()||_(93189).Z.state.lines;return T.Z.encodeTCN(S.x.getLine(C,s)||C[0])}},85309:function(i,s,_){"use strict";_.d(s,{f:function(){return loadFromFen}});var T=_(87934),S=_(43037),C=_(52382),P=_(8204);const loadFromFen=(i,s)=>s?(S.x.clearAllMarkings(i.jce._lines()),T.l.load(i,s),C.A.add(i.history,C.z.LOAD),P.Z.updateState(i)):null},66742:function(i,s,_){"use strict";_.d(s,{D:function(){return loadFromLan}});var T=_(16974),S=_(22766);const loadFromLan=(i,s,_,C)=>{const P=s.map((i=>S.Z.encodeTCN({from:i.slice(0,2),to:i.slice(2,4),promotion:i.slice(4,5)||void 0}))).join("");return T.j.loadFromTcn(i,P,_,C)}},69693:function(i,s,_){"use strict";_.d(s,{t:function(){return loadFromPgn}});var T=_(87934),S=_(52382),C=_(8204),P=_(90891),O=_(75185);const loadFromPgn=(i,s,_,M=!1)=>{if(!s)return i;const R=(0,O.Uy)(s);return M&&!i.jce.loadPgn(R)?T.l.loadPgnSoft(i,R):T.l.loadPgn(i,R),C.Z.updateState(i),_?(0,P.U)(i,i.tree.selected,_):(S.A.add(i.history,S.z.LOAD),i)}},23077:function(i,s,_){"use strict";_.d(s,{e:function(){return loadFromSanMoves}});var T=_(87934),S=_(8210),C=_(90891),P=_(52382),O=_(8204);const loadFromSanMoves=(i,s,_,M)=>s&&s.length?(_&&T.l.load(i,_),s.forEach((s=>(0,S.Z6)(i,{san:s},!0))),O.Z.updateState(i),M?(0,C.U)(i,i.tree.selected,-1):(P.A.add(i.history,P.z.LOAD),i)):null},63041:function(i,s,_){"use strict";_.d(s,{C:function(){return loadFromTcn}});var T=_(52382),S=_(8204),C=_(73863),P=_(22766),O=_(85309),M=_(8210),R=_(90891),D=_(91130);const loadFromTcn=(i,s,_=C.c.getInitialFen(),j)=>{(0,O.f)(i,_);const $=P.Z.decodeTCN(s);return $?($.forEach((s=>{"Crazyhouse"!==i.variant&&"Bughouse"!==i.variant||!s.drop||(0,D.I)(i,i.setup.sideToMove,s.drop),(0,M.Z6)(i,s,!0)})),S.Z.updateState(i),j?(0,R.U)(i,i.tree.selected,-1):(T.A.add(i.history,T.z.LOAD),i)):null}},8210:function(i,s,_){"use strict";_.d(s,{Z6:function(){return T.Z},Px:function(){return S.P},jz:function(){return C.j}});var T=_(75710),S=_(54342),C=_(7287)},7287:function(i,s,_){"use strict";_.d(s,{j:function(){return isMoveLegal}});const isMoveLegal=(i,s)=>{let _=!1;if(!i.settings.rules)return!0;for(let T=0;T<i.setup.legalMoves.length;T++){const S=i.setup.legalMoves[T];if(S.from===s.from&&S.to===s.to){_=!0;break}}return _}},75710:function(i,s,_){"use strict";_.d(s,{Z:function(){return makeMove}});var T=_(87934),S=_(90891),C=_(52382),P=_(8204),O=_(22766),M=_(43037),R=_(9056);const shouldNotMutateLine=i=>-1!==i.tree.selected.move&&i.settings.mainLineIsImmutable&&M.x.isMainLine(i.tree.selected.line),isValidMove=(i,s)=>null!==O.Z.getPositionDetails({fen:T.l.getFen(i),variant:T.l.getHeaders(i).Variant||"Chess"},s),makeMove=(i,s,_=!1)=>{const O=T.l.getJCEMove(i,s);if(null===O)return C.A.add(i.history,C.z.ILLEGAL_MOVE),i;const D=i.settings.analysis||_;if(!M.x.isHead(i.jce._lines(),i.tree.selected)){if(!D)return(0,S.U)(i,M.x.getHeadIds(i.jce._lines(),i.tree.selected.line));const s=M.x.getNextMatchingNode(i.jce._lines(),i.tree.selected,O);if(s)return(0,S.U)(i,s.ids);if(isValidMove(i,O)){if(C.A.add(i.history,C.z.TREE_AMENDED),i.settings.variations)return T.l.selectNode(i,{line:i.tree.selected.line,move:i.tree.selected.move+1}),T.l.createVariation(i),P.Z.updateState(i),makeMove(i,O);if(!i.settings.mainLineIsImmutable)return M.x.prune(i.jce._lines(),i.tree.selected),makeMove(i,O)}return C.A.add(i.history,C.z.ILLEGAL_MOVE),i}if(!D&&!T.l.isUserTurn(i))return C.A.add(i.history,C.z.ILLEGAL_MOVE),i;if(D&&i.settings.variations&&shouldNotMutateLine(i)&&isValidMove(i,O)){const s=M.x.getNextMatchingNode(i.jce._lines(),i.tree.selected,O);return s?(0,S.U)(i,s.ids):((0,R.Y)(i,!0),P.Z.updateState(i),makeMove(i,O))}return!shouldNotMutateLine(i)&&T.l.move(i,O,i.settings.rules)?(C.A.add(i.history,C.z.MAKE_MOVE,O),P.Z.updateState(i)):(C.A.add(i.history,C.z.ILLEGAL_MOVE),i)}},54342:function(i,s,_){"use strict";_.d(s,{P:function(){return makeOpponentMove}});var T=_(75710),S=_(23601),C=_(8204);const makeOpponentMove=(i,s)=>((0,S.K)(i,3-i.setup.playingAs),(0,T.Z)(i,s),(0,S.K)(i,3-i.setup.playingAs),C.Z.updateState(i))},44310:function(i,s,_){"use strict";_.d(s,{c:function(){return markArrow}});var T=_(52382),S=_(43037),C=_(87934),P=_(8204);const markArrow=(i,s,_,O=!0)=>{const M=S.x.getNode(i.jce._lines(),_)||S.x.getNode(i.jce._lines(),C.l.getSelectedIds(i))||i.tree.initialMarkings;return M.arrows||(M.arrows=[]),M.arrows.find((i=>C.l.isFileRankEqual(i.fromFileRank,s.fromFileRank)&&C.l.isFileRankEqual(i.toFileRank,s.toFileRank)))||(M.arrows.push(s),O&&(P.Z.updateState(i),T.A.add(i.history,T.z.TREE_CHANGE))),i}},19823:function(i,s,_){"use strict";_.d(s,{o:function(){return markEffect}});var T=_(52382),S=_(43037),C=_(87934),P=_(8204);const markEffect=({game:i,effect:s,ids:_,persist:O,updateState:M=!0})=>{if(O)return i.setup.effects=s?[s]:null,P.Z.updateState(i),i;const R=S.x.getNode(i.jce._lines(),_)||S.x.getNode(i.jce._lines(),C.l.getSelectedIds(i))||i.tree.initialMarkings;return R.effects||(R.effects=[]),R.effects.find((i=>C.l.isFileRankEqual(i.square,s.square)))||(R.effects.push(s),M&&(P.Z.updateState(i),T.A.add(i.history,T.z.TREE_CHANGE))),i}},98041:function(i,s,_){"use strict";_.d(s,{e:function(){return markSquare}});var T=_(52382),S=_(43037),C=_(87934),P=_(8204);const markSquare=(i,s,_,O=!0)=>{const M=S.x.getNode(i.jce._lines(),_)||S.x.getNode(i.jce._lines(),C.l.getSelectedIds(i))||i.tree.initialMarkings;return M.squares||(M.squares=[]),M.squares.find((i=>C.l.isFileRankEqual(i,s)))||(M.squares.push(s),O&&(P.Z.updateState(i),T.A.add(i.history,T.z.TREE_CHANGE))),i}},39989:function(i,s,_){"use strict";_.d(s,{u:function(){return mergeTcn}});var T=_(22766),S=_(52382),C=_(43037),P=_(8210),O=_(90891),M=_(91130),R=_(85268),D=_(62081),j=_(61596),$=_(63041),U=_(24790),V=Object.defineProperty,Z=Object.getOwnPropertySymbols,Y=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable,__defNormalProp=(i,s,_)=>s in i?V(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_;const mergeTcn=(i,s,_)=>{if("string"!=typeof s||i.settings.mainLineIsImmutable)return null;if(""===s)return(0,U.T)(i),(0,$.C)(i,"",i.setup.fen);const V=((i,s)=>{for(var _ in s||(s={}))Y.call(s,_)&&__defNormalProp(i,_,s[_]);if(Z)for(var _ of Z(s))X.call(s,_)&&__defNormalProp(i,_,s[_]);return i})({},i.tree.selected);let Q=(0,D.W)(i),ee=s;const te=i.history.length-1;if(!(Q.includes(ee)||ee.includes(Q)||(Q=(0,R.O)(i,Q),ee=(0,R.O)(i,ee),Q.includes(ee)||ee.includes(Q))))return(0,$.C)(i,ee);if(ee.length<Q.length)(0,O.U)(i,{line:0,move:ee.length/2-1}),(0,j.M)(i);else{if(!(ee.length>Q.length))return i;{let s;if((0,O.U)(i,{line:0,move:Q.length/2-1}),ee.slice(Q.length).match(/.{2}/g).forEach((_=>{s=T.Z.decodeTCN(_)[0],"Crazyhouse"!==i.variant&&"Bughouse"!==i.variant||!s.drop||(0,M.I)(i,i.setup.sideToMove,s.drop),(0,P.Z6)(i,s,!0)})),i.history.slice(te+1).some((i=>i&&i.type===S.z.ILLEGAL_MOVE)))return(0,O.U)(i,V),(0,j.M)(i),i.history=i.history.slice(0,te),mergeTcn(i,(0,R.O)(i,ee))}}if(_)return(0,O.U)(i,i.tree.selected,-1);if(V.line!==i.tree.selected.line||V.move!==i.tree.selected.move){const s=C.x.getNode(i.jce._lines(),V)?V:i.tree.selected;return(0,O.U)(i,s)}return i}},40271:function(i,s,_){"use strict";_.d(s,{S:function(){return moveBackward}});var T=_(90891);const moveBackward=(i,s=1)=>(0,T.U)(i,i.tree.selected,-1*s,!1)},61014:function(i,s,_){"use strict";_.d(s,{c:function(){return moveForward}});var T=_(90891);const moveForward=(i,s=1)=>(0,T.U)(i,i.tree.selected,s,!1)},17551:function(i,s,_){"use strict";_.d(s,{A:function(){return moveToEnd}});var T=_(87934),S=_(43037),C=_(60074),P=_(8204);const moveToEnd=i=>(S.x.isMainLine(i.tree.selected.line)||T.l.selectLine(i,0),(0,C.p)(i),P.Z.updateState(i))},73530:function(i,s,_){"use strict";_.d(s,{E:function(){return moveToStart}});var T=_(87934),S=_(43037),C=_(24790),P=_(8204);const moveToStart=i=>(S.x.isMainLine(i.tree.selected.line)||T.l.selectLine(i,0),(0,C.T)(i),P.Z.updateState(i))},92635:function(i,s,_){"use strict";_.d(s,{U:function(){return moveVariation}});var T=_(52382),S=_(43037);const moveVariation=(i,s,_=!0)=>{const C=S.x.getLine(i.jce._lines(),s);if(C&&void 0!==C.parentId){const P=S.x.getLine(i.jce._lines(),C.parentId)[C.atMoveNode];let O=-1;if(P.lines.forEach(((i,_)=>{s===i&&(O=_)})),O>-1){let i=null;_&&O>0?(i=P.lines[O-1],P.lines[O-1]=s,P.lines[O]=i):!_&&O<P.lines.length-1&&(i=P.lines[O+1],P.lines[O+1]=s,P.lines[O]=i)}T.A.add(i.history,T.z.TREE_CHANGE)}return i}},14153:function(i,s,_){"use strict";_.d(s,{o:function(){return cancelPremoves}});var T=_(52382),S=_(9014),C=_(8204);const cancelPremoves=i=>(S.B.cancelPremoves(i)&&(T.A.add(i.history,T.z.CANCEL_PREMOVES),C.Z.updateState(i)),i)},39514:function(i,s,_){"use strict";_(52382),_(9014),_(14153),_(8204)},4498:function(i,s,_){"use strict";_.d(s,{o2:function(){return T.o}});_(83735);var T=_(14153);_(39514)},83735:function(i,s,_){"use strict";_(52382),_(87934),_(9014),_(8204),_(90891),_(43037)},22509:function(i,s,_){"use strict";_.d(s,{g:function(){return promoteVariation}});var T=_(87934),S=_(43037),C=_(8204),P=_(52382);const promoteVariation=(i,s)=>{let _=s;void 0===_&&(_=i.tree.selected);let O=S.x.getLine(i.jce._lines(),_.line);if(O&&void 0!==O.parentId){let s=_.move;for(;!(void 0===O.parentId||i.settings.mainLineIsImmutable&&S.x.isMainLine(O.parentId));){const _=S.x.getLine(i.jce._lines(),O.parentId),C=S.x.isContinuation(i.jce._lines(),O.id)?1:0,P=O[C]&&O[C].commentBefore,M=O.atMoveNode,R=O.slice(0);O.length=0,P&&_[M-1]&&(_[M-1].comment?(" "!==_[M-1].comment.substr(-1)&&(_[M-1].comment+=" "),_[M-1].comment+=P):_[M-1].comment=P,delete R[C].commentBefore,delete O.initComment);const D=_.slice(M),j=D[0].lines.map((i=>i));delete D[0].lines,D.forEach(((s,_)=>{s.lines&&s.lines.length&&s.lines.forEach((s=>{const T=S.x.getLine(i.jce._lines(),s);T.parentId=O.id,T.atMoveNode=_}))})),_.length=M,R.forEach((s=>{s.ids={line:_.id,move:_.length},s.lines&&s.lines.length&&s.lines.forEach((s=>{const T=S.x.getLine(i.jce._lines(),s);T.parentId=_.id,T.atMoveNode=_.length})),_.push(s)})),D.forEach(((i,s)=>{i.ids={line:O.id,move:s},O.push(i)})),_[M].lines=j,_[M].lines.forEach((s=>{S.x.getLine(i.jce._lines(),s).parentId=_.id})),T.l.selectNode(i,{line:_.id,move:M+s}),O=S.x.getLine(i.jce._lines(),O.parentId),s=M+s}}return i.jce.saveLines(i.tree.lines),P.A.add(i.history,P.z.TREE_CHANGE),C.Z.updateState(i)}},30502:function(i,s,_){"use strict";_.d(s,{o:function(){return resetToMainLine}});var T=_(87934),S=_(43037),C=_(52382),P=_(8204),O=_(60074),M=Object.defineProperty,R=Object.getOwnPropertySymbols,D=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable,__defNormalProp=(i,s,_)=>s in i?M(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_;const resetToMainLine=i=>{const s=((i,s)=>{for(var _ in s||(s={}))D.call(s,_)&&__defNormalProp(i,_,s[_]);if(R)for(var _ of R(s))j.call(s,_)&&__defNormalProp(i,_,s[_]);return i})({},i.tree.selected);S.x.isMainLine(i.tree.selected.line)||T.l.selectLine(i,0),(0,O.p)(i);const _=i.tree.selected;return i.tree.lines.length=1,i.tree.lines=S.x.rebuildIds(i.tree.lines),i.jce.saveLines(i.tree.lines),C.A.add(i.history,C.z.JUMP_TO_POSITION,{from:s,to:_}),P.Z.updateState(i)}},60074:function(i,s,_){"use strict";_.d(s,{p:function(){return selectLineEnd}});var T=_(87934),S=_(43037),C=_(52382),P=_(8204),O=Object.defineProperty,M=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,__defNormalProp=(i,s,_)=>s in i?O(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_;const selectLineEnd=(i,s=i.tree.selected.line)=>{const _=S.x.getLine(i.jce._lines(),s).length-1,O=((i,s)=>{for(var _ in s||(s={}))R.call(s,_)&&__defNormalProp(i,_,s[_]);if(M)for(var _ of M(s))D.call(s,_)&&__defNormalProp(i,_,s[_]);return i})({},i.tree.selected);if(i.tree.selected.move!==_||s!==i.tree.selected.line){const S={line:s,move:_};return T.l.selectNode(i,S),C.A.add(i.history,C.z.JUMP_TO_POSITION,{from:O,to:S}),P.Z.updateState(i)}return i}},24790:function(i,s,_){"use strict";_.d(s,{T:function(){return selectLineStart}});var T=_(87934),S=_(43037),C=_(52382),P=_(8204),O=Object.defineProperty,M=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,__defNormalProp=(i,s,_)=>s in i?O(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_;const selectLineStart=i=>{let s=S.x.getSelectedLine(i),_=0;const O=((i,s)=>{for(var _ in s||(s={}))R.call(s,_)&&__defNormalProp(i,_,s[_]);if(M)for(var _ of M(s))D.call(s,_)&&__defNormalProp(i,_,s[_]);return i})({},i.tree.selected);0===i.tree.selected.move&&void 0!==s.parentId?(T.l.selectLine(i,s.parentId),s=S.x.getSelectedLine(i)):S.x.isMainLine(s.id)&&(_=-1);const j={line:s.id,move:_};return T.l.selectNode(i,j),C.A.add(i.history,C.z.JUMP_TO_POSITION,{from:O,to:j}),P.Z.updateState(i)}},90891:function(i,s,_){"use strict";_.d(s,{U:function(){return selectNode}});var T=_(87934),S=_(43037),C=_(52382),P=_(8204),O=Object.defineProperty,M=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,__defNormalProp=(i,s,_)=>s in i?O(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_;const selectNode=(i,s={},_=0,O=!0)=>{const j=S.x.findNode(i.jce._lines(),s,_,O),{line:$,move:U}=((i,s)=>{for(var _ in s||(s={}))R.call(s,_)&&__defNormalProp(i,_,s[_]);if(M)for(var _ of M(s))D.call(s,_)&&__defNormalProp(i,_,s[_]);return i})({},i.tree.selected);if(!j)return i;let V={};return V=s.move+_<0&&s.line===j.ids.line?{line:0,move:-1}:j.ids,T.l.selectNode(i,V),C.A.add(i.history,C.z.JUMP_TO_POSITION,{from:{line:$,move:U},to:V}),P.Z.updateState(i)}},91130:function(i,s,_){"use strict";_.d(s,{I:function(){return setHand}});_(8204);const T={p:1,n:32,b:256,r:2048,q:16384},setHand=(i,s,_)=>(i.jce._hand[s]=_.split("").reduce(((i,s)=>i+T[s]),0),i.setup.hand=i.jce.hand(),i)},23601:function(i,s,_){"use strict";_.d(s,{K:function(){return setPlayingAs}});const setPlayingAs=(i,s)=>([1,2].indexOf(s)>=0&&(i.setup.playingAs=s),i)},75055:function(i,s,_){"use strict";_.d(s,{S:function(){return updateMarkings}});var T=_(72194),S=(_(87934),_(52382)),C=(_(43037),_(44310)),P=_(19823),O=_(98041),M=_(8204);const updateMarkings=({arrow:i,effect:s,game:_,ids:R,square:D,resetFirst:j=!0})=>{const $=!1;return j&&(0,T.q)(_,R,$),i&&(0,C.c)(_,i,R,$),s&&(0,P.o)({game:_,effect:s,ids:R,updateState:$}),D&&(0,O.e)(_,D,R,$),M.Z.updateState(_),S.A.add(_.history,S.z.TREE_CHANGE),_}},77514:function(i,s,_){"use strict";_.d(s,{t:function(){return updateNode}});var T=_(43037),S=_(52382),C=_(8204),P=_(70020);const updateNode=(i,s={},_)=>{const O=i.jce._lines(),M=T.x.findNode(O,s);if(!M||!_||_.commentBefore&&!T.x.isFirstVisibleNode(O,s))return null;const R=T.x.getLine(O,s.line);if(void 0===_.commentBefore&&T.x.isFirstVisibleNode(O,s)?delete R.initComment:_.commentBefore&&(R.initComment=_.commentBefore),_.insertCommentAfterLastNode&&R.length){const i=R[R.length-1];i&&(i.comment=_.insertCommentAfterLastNode,delete _.insertCommentAfterLastNode)}if(_.annotation&&(_.annotation=(0,P.JX)(M,_.annotation)?"":(0,P.TW)(_.annotation)),_.additionalAnnotation){if(!(0,P.ie)(_.additionalAnnotation))return null;(0,P.lz)(M,_.additionalAnnotation)&&(_.additionalAnnotation=[]),_.additionalAnnotation=[].concat((0,P.TW)(_.additionalAnnotation))}return Object.assign(M,_),S.A.add(i.history,S.z.UPDATE_NODE,{line:s.line,move:s.move}),C.Z.updateState(i)}},23757:function(i,s,_){"use strict";_.d(s,{t:function(){return updatePgnHeaders}});var T=_(87934),S=_(52382),C=_(8204),P=_(73863);const updatePgnHeaders=(i,s)=>{if(!s)return null;const _=Object.keys(s).reduce(((i,_)=>("Date"===_&&"number"==typeof s[_]&&(s[_]=P.c.formatJSTimestampForPgn(s[_])),i.push(_),i.push(s[_]),i)),[]);return T.l.updateHeaders(i,_),S.A.add(i.history,S.z.PGN_HEADERS_UPDATED),i.setup.result=C.Z.getResult(i),i}},18721:function(i,s){"use strict";
/*!
 * Chess.com (c) 2019 | all rights reserved
 */
/*!
 * A distant fork of chess.js - BSD (c) 2014, Jeff Hlywa (jhlywa@gmail.com)
 */var _,T,S,C=(_=function(){var i=[[2637767806,863464769],[720845184,95069639],[1155203408,610415943],[2618685246,1655139042],[1971536997,1218186377],[848342074,540017087],[263957791,1627660921],[3896152207,4076560586],[226391645,1484086288],[436746274,3467632685],[2516964848,3797861296],[3491888988,3510251221],[1086189917,1248276018],[18044180,1876255637],[1572111136,1190386149],[597658413,2146900428],[97624494,2243205793],[1738507407,1854916977],[1950989311,2149575947],[2098318769,3283594736],[2194108574,2015279052],[4079062812,2500884588],[856979699,2941369318],[1270058469,3877737539],[2858720366,3170717948],[2378012835,1387254795],[2278688587,2178388503],[435406673,3555273441],[3031118064,1655806655],[2063925420,1107589828],[3376753832,436852829],[615148625,1302492416],[1285502018,1963045959],[346460119,1016137793],[2803604355,1176288659],[55085973,2968618255],[1669016372,4287873088],[164740250,1037634196],[896886403,883023163],[1935551383,2764331555],[410153072,4055711755],[533441746,1505690343],[3541084098,3466290517],[3214426080,4267541060],[2675233103,1951705124],[1374411850,3115986997],[1552073989,3684348154],[4244110986,875606593],[844343081,3115990494],[2356462440,135999605],[3116133511,377238503],[2129956651,2197966368],[299173332,3276914047],[1701379241,745972291],[1306570996,254977976],[2530644806,214138461],[1122123979,1667800879],[1831591130,3801192033],[1116211970,920967505],[1594837592,2551651254],[972591349,2046373768],[2479207924,1935030411],[1675376029,2367888248],[3960916618,3935874422],[1398143232,3265801671],[133930885,1520005442],[1351827834,2829577566],[2076951437,2723839804],[435980918,2364847828],[1668970368,3738157273],[2185864314,3993911799],[2041407829,31969768],[346864372,2004703094],[4047877822,3437142421],[3669961416,538399484],[616810829,4190688246],[3144558884,4030272234],[216165387,2513010905],[2761740594,3216997572],[3919406634,4096014649],[669429112,2434161727],[2234904640,3111407601],[1421079802,1598085235],[1924213810,310373675],[4002762044,2067865415],[2592451728,2586110625],[1890340057,4031717877],[4189625662,2577429954],[2276713138,3049850801],[2741429688,3310307512],[2924122950,3426712818],[421576781,1193704381],[2277442246,3030264553],[153237420,595540057],[4278711886,4176286928],[2380848297,4030514510],[2618700582,1303682185],[3018992701,185284845],[957243316,1291916363],[1543415220,1898408169],[504378001,531073412],[2591337657,1692896435],[1333852064,903543556],[1661259930,188168388],[561112646,2197961224],[1536910315,2632972300],[1349168372,2307429186],[411152329,2745631190],[1694697476,1081411140],[3755185459,2631660711],[4019355068,4027326706],[2066937809,3761668332],[3120395808,3878773315],[94890149,2109283191],[3045629038,358812277],[1249184265,3465901047],[3477490924,2308583306],[4114113436,3875911716],[1014604031,1434513279],[3991324799,2222416029],[2040431088,1539915569],[2253613964,4081224332],[2547464012,1611168627],[2722521980,4281500978],[71289574,213969824],[2450408597,903689630],[1894451515,364024012],[1939968537,374938813],[1447259295,3785468557],[4021046128,1664847745],[3139524504,3562928047],[1173487682,4065269608],[2467266804,3907744866],[4284945151,3486998177],[2925674454,1953016432],[3710671816,1271453948],[2129465869,1422863833],[587093076,18243356],[3373793513,2411305257],[2156648078,1791034213],[3737413652,1534461430],[468575139,2935304962],[1129551363,3603256834],[2861996892,1763494778],[2826449619,2465197654],[1704209531,1014895022],[3738359347,3402630390],[569410928,4095796581],[3021312909,2108247612],[2444777957,2664129360],[282063667,3773661258],[682545472,3188439005],[3318488457,1917822038],[1447622272,4045023041],[757420137,4038580915],[2613420942,4146703316],[4012836163,150381244],[2938127093,3428591704],[1208226490,3086335530],[2935205706,1446903363],[430957978,3830532479],[1381578755,3757172800],[4109399782,1596778224],[288855589,1954372339],[3169178148,2256716053],[2644780093,3895892303],[107966643,1071681559],[1304747544,2607225372],[1359190711,1898207171],[3229237120,3273634996],[3027167685,3863637628],[3011615298,2883984519],[564135827,978463264],[770797430,362326607],[1983662611,1907583229],[4153656423,48268960],[3609759233,720080177],[3727911466,1270989899],[200708787,2366086947],[744508026,393422515],[1213261630,65757284],[3485747185,3845951003],[2958861301,1680248217],[2598470344,3163845864],[2767997908,4233451722],[3881113485,1492930166],[1773764017,2764062206],[4189435844,2898689174],[4234838742,1267095035],[2624081078,3302114327],[2395569449,390426320],[1728307101,690284926],[3309827454,1118258254],[2028172868,3888829086],[4271523049,909051386],[146617804,942892565],[2467685867,974297806],[2483428231,503635829],[3743260573,2018222096],[1002067894,2289153437],[3535252974,3738302271],[4154611160,1002664952],[3623154244,2349656961],[3646679180,3524329383],[862933752,4282853607],[2806008282,3272780913],[2734037942,3828874677],[1328176304,2137666995],[2278785213,2780788825],[381286368,1816476193],[2074232908,2316293454],[4087773386,3651330956],[967884669,3728964514],[4239349185,3213509668],[419231360,1463788948],[1275421624,2672384707],[1088456595,436245261],[2365565249,783696577],[1758083333,845223583],[2048846183,3530914274],[2635948261,124738415],[940630937,3069598626],[839474029,1253439921],[902477345,165479306],[2836079689,2681188273],[2007115168,2093139645],[1363041891,1282466609],[1130479818,1063857938],[3644959908,1260430427],[1385135238,46497915],[1386975934,3110156681],[2635987502,4233461619],[1915744629,4117939016],[487743653,285736599],[2049219159,3960249250],[69242857,3908563670],[1511066720,1488527520],[215590039,1703564952],[1459430344,4184955468],[676103291,2642967214],[83799035,3182827979],[1949179493,476101251],[2593534694,1493478716],[2283504289,995211746],[1349412676,3449243940],[2954378677,1878813305],[249149717,3329151870],[1578231917,1483986052],[4135085182,890874990],[461755528,3505523909],[3669622373,634949665],[219487622,2914465301],[2825233742,3703631897],[2479105382,2935590907],[2582097898,3187672881],[1221328648,1843341402],[2140891889,3958868911],[1482849818,345750049],[751922730,3178831411],[3546542069,4036458902],[216179596,877293293],[444615341,3117393729],[2424254530,494454238],[1344234989,3003337991],[929188581,2760877801],[2507911009,1879899982],[980166547,1311840394],[3566535507,1790747461],[143525013,2311336672],[4181962471,4273938872],[1815842366,862009811],[911175674,1179575598],[3591335374,3694215714],[1452686093,3393294272],[385158879,2447709103],[4011414929,1264623507],[1448477120,911094312],[3971299641,2289992053],[3133647265,2234591563],[3007628400,964409938],[1708345684,3673411261],[3031964479,2843021794],[3022128657,2480338599],[118850112,473449293],[2048127371,3202109429],[3158349745,382018770],[1505327237,3807570472],[2568424029,3272693060],[1866609495,3888556537],[844703982,1852802964],[3504617058,682636099],[1448882679,3733580327],[821387540,2215744532],[3631471417,311618895],[2077838877,2383929020],[3352949096,1688694420],[2491080787,3998672444],[3368630402,4182204255],[983299419,2837414346],[3651215291,1033373924],[265429091,3988955082],[3019003608,2896212153],[2955948456,3025235588],[903690197,2266253487],[3925215275,89402958],[3959093811,3609545561],[2455088053,223552128],[3115011301,2133669107],[1765081558,673805649],[3324795129,2111392191],[3443871631,432345706],[3152559950,3425427147],[3699649406,672784944],[3129545774,7668664],[2747044893,173040075],[3925243406,852328481],[164095314,3161868591],[2234471571,1302682825],[2164784335,105893718],[159995093,536831360],[599199451,425051327],[3274759746,1680930461],[1192619331,3903085578],[2832721114,3078660237],[91404660,4030521531],[3044880024,1578375623],[3906596030,754177855],[803516785,1894094672],[288455592,2030430096],[2143232492,2317305324],[388352703,3406060288],[2521731420,3588403719],[1043041227,4028028525],[3195290851,2468913324],[4166724431,3168683191],[1228226538,968516529],[500177583,3444787306],[533367442,4252082053],[4236023256,657816314],[413575568,3367198397],[3435884549,3334062733],[1004255532,1135705894],[2859513268,4170618274],[3914086821,1251487871],[3080761716,3489067886],[3571165255,699353261],[773372954,3648014952],[769693293,2939128604],[3116440923,507748478],[1687629160,3739431776],[2489486648,3502376324],[3686847158,2878383449],[3530767427,902211375],[2121652637,2493976397],[1827477891,930064171],[2549918411,4029725732],[2071415163,844118802],[2236083679,3088894868],[2040110303,4144562891],[3489536313,1133419300],[2190878435,2301466071],[2465915458,2448602097],[1675766804,2073834499],[3329799896,1613253148],[1483966600,1348836071],[159505618,2527621997],[2674227354,1695130688],[2683539437,1927873839],[3833196123,2570082188],[3891433165,759819981],[1455453349,2179602430],[1430583255,1957776111],[2067726741,4235143439],[303380021,2998980439],[2136024795,3126725799],[2054591852,1051702291],[1029141665,489794361],[2317027384,569642164],[2068461795,624418658],[2499875684,1830645251],[1302894490,4319401],[1002663431,2406815191],[1560941298,2060652753],[2141002286,515773223],[3661248027,475092913],[3705503008,2419919909],[914567990,3496539911],[3462935583,2039034761],[2878378006,2379243316],[1133857586,1390159333],[3023618742,2140726761],[282908558,944874642],[3686955701,1148723903],[2604456805,4163675010],[3061545110,377179268],[3218002352,76459088],[2836503392,916455101],[536836808,151306053],[2886925079,404221671],[2936593041,2011015485],[453815187,1852163908],[3042568989,82176306],[3279635891,4174836410],[3282689058,2360003049],[4088968807,1516570623],[2680453086,1322680794],[1731693966,3438253771],[1842894553,1294307894],[2736377365,2964642609],[121205621,521330014],[2324595870,3005710757],[3784465521,676493813],[1958759409,2030833406],[1306150933,1016370058],[2636541290,482366508],[1950415745,1695073534],[322077955,3746046623],[3602873262,3829181504],[1211684447,1861645455],[504701736,4080111082],[2407799203,1223857855],[1925743434,1498920209],[3617596327,845198428],[2498480299,3484773806],[2680229135,2560201696],[3731399221,1536412390],[2756509305,2924710846],[2635957500,3459716133],[1372762539,769635894],[802677945,3878474636],[1707760534,3075809808],[3714687192,2872792173],[1615679922,1606381794],[1940556374,1337437342],[445390489,731124040],[2864974375,64601760],[1984806574,2141516710],[513390958,1890172555],[744398315,1475299139],[982749166,852662657],[652663695,4260736510],[1184061125,82616221],[3363191899,147951756],[1064069880,1507328085],[2138882964,547595589],[2616926846,3186935246],[2298715513,3606862940],[2414381911,811477686],[2694745228,900437726],[4202576185,2201114451],[3602305260,3323446937],[3756663274,2658490339],[3061587876,2171079416],[3390977925,2850497765],[486312941,224925241],[3515712841,3510684394],[1322319486,2647200565],[3839619171,1148450258],[392296762,1154854654],[1401523788,957405781],[1934485528,527352730],[645968162,3131215255],[696971825,3361451947],[2038689491,1946699733],[1723966113,2785859721],[2652365974,1118037185],[3988018407,3134982149],[1354171594,3053634345],[1287854075,2631782435],[1723106141,2662328866],[563845090,1878819261],[639520332,171129501],[534957223,1696062352],[3612364282,2283204027],[3109494688,1304463816],[500957989,630925278],[3477030536,2149497258],[4109750364,281719363],[951472732,564407054],[922095147,2767874048],[3946156928,829677774],[2622281253,2086286851],[2936811901,850242186],[630086272,3340782667],[2340986210,1296336989],[4107355543,3865114709],[3560210278,3968418243],[3868847493,2967450637],[611513888,2083325060],[3265390517,3025776309],[2874106961,3424470508],[1668707698,2923258228],[2778598353,24320552],[292356118,3415510793],[754567370,86994591],[185141877,1621715171],[2884558258,3722473457],[1492107531,111281805],[3336927864,4225337056],[782994598,1021838039],[346133860,18281270],[2080909533,1649329040],[3612065399,3859901127],[2151962287,284556115],[3957975594,3745718727],[52533817,3998775856],[1232633839,397383972],[2716413964,3629253960],[1531307298,3836851439],[3030137657,2500401718],[3561556693,653345841],[313061910,2945718466],[2065276,3342140708],[410498334,1470588117],[2726640512,4051654894],[2570984935,758567696],[3008987264,3462702678],[623860175,228525243],[3527183895,1829844480],[467272850,3890501742],[568376656,650516927],[990477018,4035508558],[2366955227,817792110],[4183621538,989198068],[946958343,1639184195],[3395758993,3924097558],[1690887473,3220519765],[605184237,1255270525],[275515833,1926424610],[2142902612,283494960],[2021972412,1823828440],[105373677,3448326697],[1666662384,1042433908],[1338566998,261206307],[498685668,1344755577],[3101233780,3119109371],[2733370951,3808165089],[3656512268,3449289481],[4025308119,1607880299],[778896067,1612183167],[2846510368,3674754715],[3058428120,2991822529],[1892379383,3268787440],[2565895844,4154602030],[3213117192,98999135],[2495816991,116985075],[1040203361,1785041385],[3106252493,69316595],[1639829808,2087117568],[3213709576,3799911752],[604681594,2340981536],[4236730699,2938666503],[4009938384,1878897714],[2701667332,1725918218],[2182473079,1258184],[3550198211,2760750799],[657991062,875584532],[1640976276,3380476221],[460041378,2924352091],[1972323596,2287414795],[2510248061,1350206297],[2959337826,3762681165],[1625877874,3235902929],[2070189957,1429368735],[4245163299,1839731898],[2358312347,138364248],[275739390,2179122576],[2037777210,972544338],[2766930226,1984733259],[1933485829,4209310327],[3034118011,3286589799],[2653025529,62078937],[2641780289,2679545709],[3540781195,2787026415],[1569993599,3215949659],[441337890,3947723353],[1878946792,459505587],[3724105660,920173002],[1691411102,3934795955],[148741087,3647709027],[142506469,2776440083],[3811107376,3823285243],[472209891,252266174],[1913386482,1867329194],[2960608550,482740699],[1145005292,1513558421],[1091751784,1687823886],[3625186042,3086337482],[1712140887,940065262],[1504455800,1945702563],[3896940088,2003245591],[2478191531,4197739e3],[3233871270,250924495],[3404865229,1131917964],[1462204167,429621621],[1349259705,3641608989],[3627860584,2048468319],[1244251718,1513180369],[3979211282,371413143],[3043187861,4285699810],[581894202,3060983825],[1390895705,1811317301],[2599134010,3337406128],[2488233440,2436161462],[1816641224,2208816697],[1792034756,815866116],[2779893723,2695577703],[2084952115,2951772258],[1351806869,169269771],[2469979804,86740603],[1163545420,4264616949],[1795352113,2511146232],[1796715044,3134635815],[3521170642,1538900329],[3725363621,1455009392],[1342594643,1512127734],[2618386938,662157428],[2028859350,2494504685],[1841905045,648351336],[4002935891,4033319405],[850071259,1768358867],[979915719,3876018087],[830889197,1629549437],[1744763229,2455795856],[522919199,368499868],[3063822504,2522639205],[2861636095,407686388],[4097602344,1945259027],[4215946617,1251639506],[894485042,534122652],[924809191,1807237502],[1811585710,1589663609],[3439653887,1722232],[3810997538,105152714],[2677100683,4291805514],[77233985,102407776],[4239834691,2851274395],[148802076,2006440603],[2409138150,126301601],[3048474397,3217504870],[588133437,4221603123],[1139638106,263087485],[982032635,3165674595],[562514827,1294842959],[467575086,905357513],[1405117894,3370530088],[3813285157,242912619],[3601878331,1985076606],[1586505598,2092146221],[738488098,103663229],[2970334297,321718822],[1068097019,1742926233],[235518094,420804527],[283685722,4092504887],[2666392744,3799169331],[3569817788,1256762975],[2169728352,292617248],[2444571896,2239859206],[3967907832,1066404216],[420376911,2913277294],[3046293305,2956347747],[2311278792,2477686209],[2885955184,4172514290],[3030078181,2275536480],[4212469731,4280736393],[1046900335,1773022229],[995380926,1414273529],[3892683234,2429494358],[615726237,2127712535],[3880203074,2071130305],[176180504,3070850165],[1474506861,2283723599],[1256707747,1857412043],[764236850,359687368],[3521530334,511649419],[2318567964,3992868140],[128167623,2518992858],[2220129756,1042300052],[2567608573,1349636707],[441446694,384760969],[4143447316,829506048],[817912603,2738025500],[2368091832,357934982],[1187643061,1561463042],[3438021235,3030161697],[1318922279,895468690],[434876457,1130220303],[1180291767,1132759596],[2520707785,1798553137],[1962430872,2958700157],[1510954061,3534879512],[57831539,3269538993],[3354831405,3852135009],[891783098,2698494511],[2555636406,996018997],[2881342935,3982231648],[3473267445,2894952368],[1238029452,3958679326],[2051805420,559465638],[3655936674,1186951582],[330209165,167662935],[1929681327,2450868735],[1313566811,2458925988],[4283920930,3243182650],[1438004300,4185567150],[3093439067,89876832],[3401620219,3721579956],[3673745794,2682874719],[3053321309,825410712],[822915968,3681514755],[3900685126,561657358],[553823814,1857753416],[4166295066,983949325],[128359165,3426887194],[3300989119,3884968622],[4193552686,3647722552],[452189154,1569670618],[4122259632,3537825460],[2519387887,2821594244],[74333898,2940550377],[4032631446,2173999692],[2521268686,1934310532],[2620314688,2177785789],[1378755571,2455646622],[394133753,4231198609],[734399075,2800989170],[573292462,1634883078],[1214417373,3426576256],[2110224475,2399009920],[2331215665,3224086912],[531326186,698539511],[3839443603,583861850],[2644531398,2017784332],[616620850,3070237104],[590349237,2798642861],[3582377217,3317831670],[1582708616,1596570667],[2126148205,2358511947],[173450736,3219362418],[3616831144,1323437318],[2655785577,3131359031],[401600069,2967397952],[496349349,4244179910],[2479612086,2579650653],[1710903074,2049666425],[3589924952,690291925],[3266682943,1900485231],[1496318498,3025542656],[3459221058,3389461212],[2091479615,3140389256],[663040899,1207089672],[3323704225,1105530508],[353318429,2879253542],[2674540957,941987316],[1688550857,620657353],[338551967,4286217277],[204689992,2239736295],[178008789,3940832005],[3871613304,3300636974],[1911672356,2429684487],[4055679954,1974461722],[3878217928,1009991796],[2533095482,310920740],[2174833823,3596041637],[1604814460,2939543881],[1452830254,4092397851],[2441027029,4169690209],[3524103304,3372213855]],s=[[836181454,1689436944],[2776523577,3710710688],[4049974663,3750330768],[519497435,2979405513]],_=[[1892447193,197291556],[3793382197,3742120663],[3838936,2994760034],[479846099,1018728609],[3476112862,182272649],[3504620154,1427438450],[2009473484,2679350403],[1738755500,1129731339]],T=[4174784170,2938602761],S={p:0,P:1,n:2,N:3,b:4,B:5,r:6,R:7,q:8,Q:9,k:10,K:11},C=[];C[5]=1,C[6]=0,C[9]=3,C[10]=2,C[17]=5,C[18]=4,C[33]=7,C[34]=6,C[65]=9,C[66]=8,C[129]=11,C[130]=10;var P,O=[2,5,10,20,40,80,160,64],M=["","0000000","000000","00000","0000","000","00","0",""];function to32BitHex(i){var s=i.toString(16);return M[s.length]+s}function to64BitHex(i){return to32BitHex(i[0])+to32BitHex(i[1])}function hash(C,P){var M,R,D,j,$,U,V,Z,Y,X,Q,ee,te=C.split(" "),ne=te[0].split("/"),re="w"===te[1],ie=0,ae=Number(re),se=ae?3:4;for(D=7;D>=0;D-=1)for(j=0,V=($=ne[D]).length,U=0;U<V;U+=1)Z=$[U],(Q=S[Z])>=0&&(M=(M^(Y=i[64*Q+8*(7-D)+j])[0])>>>0,R=(R^Y[1])>>>0,Q===ae&&D===se&&(ie|=1<<j)),j+=Number(Z)||1;return"-"!==te[2]&&((X=te[2]).indexOf("K")>-1&&(M=(M^(Y=s[0])[0])>>>0,R=(R^Y[1])>>>0),X.indexOf("Q")>-1&&(M=(M^(Y=s[2])[0])>>>0,R=(R^Y[1])>>>0),X.indexOf("k")>-1&&(M=(M^(Y=s[1])[0])>>>0,R=(R^Y[1])>>>0),X.indexOf("q")>-1&&(M=(M^(Y=s[3])[0])>>>0,R=(R^Y[1])>>>0)),te[3]&&"-"!==te[3]&&(ee=te[3].charCodeAt(0)-97,O[ee]&ie&&(M=(M^(Y=_[ee])[0])>>>0,R=(R^Y[1])>>>0)),re&&(M=(M^T[0])>>>0,R=(R^T[1])>>>0),P&&"hex"===P?to64BitHex([M,R]):[M,R]}function wrap(i){var s,_,T,S,C={};function parseBook(i,s){var T,S,C,P,O,M,R=_.getUint16(i+8),D=_.getUint16(i+10);return S=R>>9&7,P=R>>3&7,O=7&R,M=R>>12&7,4==(C=R>>6&7)&&s&&S===P&&"-"!==s&&(7===O&&(0===S&&s.indexOf("K")>-1||7===S&&s.indexOf("k")>-1)?O-=1:0===O&&(0===S&&s.indexOf("Q")>-1||7===S&&s.indexOf("q")>-1)&&(O+=2)),T=String.fromCharCode(C+97)+(S+1)+String.fromCharCode(O+97)+(P+1),M&&(T+="nbrq"[M-1]),{move:T,weight:D}}function query(i){return"string"==typeof i&&(i={fen:i}),s(i)}if(C={query:query,pick:function pick(i){var s,_,T,S,C,P=0;if(function sortMoves(i){i.sort((function sorter(i,s){return s.weight-i.weight}))}(s=(i=i||{}).moves||query(i)),T=s.length){if(i.type&&1!==T&&"best"!==i.type){if("random"===i.type){for(S=Math.floor(Math.random()*s.sum)+1,C=0;C<T-1&&!(S<=(P+=s[C].weight));C+=1);return s[C].move}return"randomDisregardWeight"===i.type?s[Math.floor(Math.random()*T)].move:"worst"===i.type?s[T-1].move:((_=parseInt(i.type)||1)<0&&(_=T+_+1),_<1?_=1:_>T&&(_=T),s[_-1].move)}return s[0].move}}},i.getUint32)s=function bufferBookFind(i){var s,T,S,C,P,O=_.length||_.byteLength||0,M=i.offset||0,R=i.fen,D=i.chess960,j=i.checkAll,$=[],U=0;for(i.hash?"string"==typeof(s=i.hash)&&(s=function hex64ToDec(i){return[parseInt(i.substr(0,8),16),parseInt(i.substr(8),16)]}(s)):s=hash(R),!D&&R&&(P=R.split(" ")[2]),M=0;M<O;M+=16)if(_.getUint32(M)===s[0]&&_.getUint32(M+4)===s[1])S=parseBook(M,P),$[$.length]=S,U+=S.weight,T=!0;else if(T&&!j)break;if($.sum=U,i.relative)for(C=$.length-1;C>=0;C-=1)$[C].relative=Math.round($[C].weight/U*1e4);return $},_=i,C.buffer=_;else for(S in s=function jsonBookFind(i){var s,_,S,P,O,M,R=0,D=i.fen;if(C.useFen)S=D.replace(/ \d+ \d+$/,""),(s=T[S])||(P=S.replace(/[a-h][1-8]$/,"-"))!==S&&(s=T[P]);else if(i.hash||(i.hash=hash(D,"hex")),s=T[i.hash]){if(s[0]&&s[0].n&&(s=s[0]),s.n&&!s.b)return[];if(s.b)s=function decompressMoves(i){var s,_=[],T=i.b.length;for(s=0;s<T;++s)_.push({move:i.b[s],weight:i.w[s]});return _}(s);else if(!i.chess960&&D)for(M=D.split(" ")[2],_=s.length-1;_>=0;_-=1)(O=s[_].move.match(/e([18])([ah])\1/))&&("h"===O[2]&&("1"===O[1]&&M.indexOf("K")>-1||"8"===O[1]&&M.indexOf("k")>-1)?s[_]={move:"e"+O[1]+"g"+O[1],weight:s[_].weight}:"a"===O[2]&&("1"===O[1]&&M.indexOf("Q")>-1||"8"===O[1]&&M.indexOf("q")>-1)&&(s[_]={move:"e"+O[1]+"c"+O[1],weight:s[_].weight}))}if(s)for(_=s.length-1;_>=0;_-=1)R+=Number(s[_].weight);else s=[];return s.sum=R,s},T=i,C.json=T,T){C.useFen=S.indexOf(" ")>-1;break}return C}function getBook(i,s){!function ajaxLoad(i,s){var _=new XMLHttpRequest,T=i.toLowerCase().indexOf(".json")>-1;function onload(){var i;if(_.status>=200&&_.status<300||304===_.status||0===_.status||1223===_.status)if(T)try{s(null,JSON.parse(_.response))}catch(S){s(S)}else i=new DataView(_.response),s(null,i);else s(new Error("Error code: "+_.status))}_.open("GET",i,!0),T||(_.responseType="arraybuffer"),_.onload=onload,_.onerror=onload,_.send()}(i,(function onload(i,_){var T;if(_&&(T=wrap(_)),s)return s(i,T);if(i)throw i;return T}))}return{hash:hash,loadBook:(P={},function loadBook2(i,s){P[i]?P[i].book?setTimeout((function(){s(null,P[i].book)}),0):P[i].cbs.push(s):(P[i]={cbs:[s]},getBook(i,(function onload(s,_){var T=P[i].cbs;s?delete P[i]:(P[i].book=_,P[i].cbs=void 0),T.forEach((function(i){setTimeout((function(){i(s,_)}),0)}))})))}),to64BitHex:to64BitHex,zobristPiece:i,zobristCastle:s,zobristEnPassant:_,zobristTurn:T,zobristPieceValue:S,zobristPieceValueNumbers:C}}(),T=function init(){var i,s,T,S,C={Chess:0,Chess960:1,Crazyhouse:2,"3-check":3,"King of the Hill":4,Bughouse:5,chess960:1,Fischerandom:1,fischerandom:1,crazyhouse:2,"three-check":3,kingofthehill:4,koth:4,bughouse:5},P=["Chess","Chess960","Crazyhouse","3-check","King of the Hill","Bughouse"],O={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],D=0,j=0,$=0,U=-1,V=32,Z=128,Y=252,X=255,Q=512,ee=112,te=14,ne=21,re=127,ie="pnbrqkPNBRQK",ae="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",se=[];se[5]=[-16,-17,-15],se[6]=[16,17,15],se[8]=[-18,-33,-31,-14,18,33,31,14],se[16]=[-17,-15,17,15],se[32]=[-16,1,16,-1],se[64]=[-17,-16,-15,1,17,16,15,-1],se[128]=[-17,-16,-15,1,17,16,15,-1];var oe={P:5,p:6,N:9,n:10,B:17,b:18,R:33,r:34,Q:65,q:66,K:129,k:130},le={P:4,p:4,N:8,n:8,B:16,b:16,R:32,r:32,Q:64,q:64,K:128,k:128},ce={5:"P",6:"p",9:"N",10:"n",17:"B",18:"b",33:"R",34:"r",65:"Q",66:"q",129:"K",130:"k"},ue={9:"N",10:"N",17:"B",18:"B",33:"R",34:"R",65:"Q",66:"Q",129:"K",130:"K"},de=[80,0,0,0,0,0,0,96,0,0,0,0,0,0,80,0,0,80,0,0,0,0,0,96,0,0,0,0,0,80,0,0,0,0,80,0,0,0,0,96,0,0,0,0,80,0,0,0,0,0,0,80,0,0,0,96,0,0,0,80,0,0,0,0,0,0,0,0,80,0,0,96,0,0,80,0,0,0,0,0,0,0,0,0,0,80,8,96,8,80,0,0,0,0,0,0,0,0,0,0,0,8,212,224,212,8,0,0,0,0,0,0,96,96,96,96,96,96,224,0,224,96,96,96,96,96,96,0,0,0,0,0,0,8,212,224,212,8,0,0,0,0,0,0,0,0,0,0,0,80,8,96,8,80,0,0,0,0,0,0,0,0,0,0,80,0,0,96,0,0,80,0,0,0,0,0,0,0,0,80,0,0,0,96,0,0,0,80,0,0,0,0,0,0,80,0,0,0,0,96,0,0,0,0,80,0,0,0,0,80,0,0,0,0,0,96,0,0,0,0,0,80,0,0,80,0,0,0,0,0,0,96,0,0,0,0,0,0,80],he=[336,80,80,0,0,0,96,352,96,0,0,0,80,80,336,0,80,336,80,80,0,0,96,352,96,0,0,80,80,336,80,0,80,80,336,80,80,0,96,352,96,0,80,80,336,80,80,0,0,80,80,336,80,80,96,352,96,80,80,336,80,80,0,0,0,0,80,80,336,88,120,360,120,88,336,80,80,0,0,0,0,0,0,80,88,476,252,508,252,476,88,80,0,0,0,0,96,96,96,96,120,252,252,252,252,252,120,96,96,96,96,0,352,352,352,352,360,508,252,0,252,508,360,352,352,352,352,0,96,96,96,96,120,252,252,252,252,252,120,96,96,96,96,0,0,0,0,80,88,476,252,508,252,476,88,80,0,0,0,0,0,0,80,80,336,88,120,360,120,88,336,80,80,0,0,0,0,80,80,336,80,80,96,352,96,80,80,336,80,80,0,0,80,80,336,80,80,0,96,352,96,0,80,80,336,80,80,0,80,336,80,80,0,0,96,352,96,0,0,80,80,336,80,0,336,80,80,0,0,0,96,352,96,0,0,0,80,80,336],pe=[336,80,80,0,0,0,96,352,96,96,0,0,80,80,336,0,80,336,80,80,0,0,96,352,96,96,0,80,80,336,80,0,80,80,336,80,80,0,96,352,96,96,80,80,336,80,80,0,0,80,80,336,80,80,96,352,96,112,80,336,80,80,0,0,0,0,80,80,336,88,120,360,120,120,336,80,80,0,0,0,0,0,0,80,88,476,252,508,252,508,88,80,0,0,0,0,96,96,96,96,120,252,252,252,252,252,252,104,96,96,96,0,352,352,352,352,360,508,252,0,252,508,488,352,352,352,352,0,96,96,96,96,120,252,252,252,252,252,252,104,96,96,96,0,0,0,0,80,88,476,252,508,252,508,88,80,0,0,0,0,0,0,80,80,336,88,120,360,120,120,336,80,80,0,0,0,0,80,80,336,80,80,96,352,96,112,80,336,80,80,0,0,80,80,336,80,80,0,96,352,96,96,80,80,336,80,80,0,80,336,80,80,0,0,96,352,96,96,0,80,80,336,80,0,336,80,80,0,0,0,96,352,96,96,0,0,80,80,336],me=[336,80,80,0,0,96,96,352,96,0,0,0,80,80,336,0,80,336,80,80,0,96,96,352,96,0,0,80,80,336,80,0,80,80,336,80,80,96,96,352,96,0,80,80,336,80,80,0,0,80,80,336,80,112,96,352,96,80,80,336,80,80,0,0,0,0,80,80,336,120,120,360,120,88,336,80,80,0,0,0,0,0,0,80,88,508,252,508,252,476,88,80,0,0,0,0,96,96,96,104,252,252,252,252,252,252,120,96,96,96,96,0,352,352,352,352,488,508,252,0,252,508,360,352,352,352,352,0,96,96,96,104,252,252,252,252,252,252,120,96,96,96,96,0,0,0,0,80,88,508,252,508,252,476,88,80,0,0,0,0,0,0,80,80,336,120,120,360,120,88,336,80,80,0,0,0,0,80,80,336,80,112,96,352,96,80,80,336,80,80,0,0,80,80,336,80,80,96,96,352,96,0,80,80,336,80,80,0,80,336,80,80,0,96,96,352,96,0,0,80,80,336,80,0,336,80,80,0,0,96,96,352,96,0,0,0,80,80,336],fe=[336,80,80,0,0,96,96,352,96,96,0,0,80,80,336,0,80,336,80,80,0,96,96,352,96,96,0,80,80,336,80,0,80,80,336,80,80,96,96,352,96,96,80,80,336,80,80,0,0,80,80,336,80,112,96,352,96,112,80,336,80,80,0,0,0,0,80,80,336,120,120,360,120,120,336,80,80,0,0,0,0,0,0,80,88,508,252,508,252,508,88,80,0,0,0,0,96,96,96,104,252,252,252,252,252,252,252,104,96,96,96,0,352,352,352,352,488,508,252,0,252,508,488,352,352,352,352,0,96,96,96,104,252,252,252,252,252,252,252,104,96,96,96,0,0,0,0,80,88,508,252,508,252,508,88,80,0,0,0,0,0,0,80,80,336,120,120,360,120,120,336,80,80,0,0,0,0,80,80,336,80,112,96,352,96,112,80,336,80,80,0,0,80,80,336,80,80,96,96,352,96,96,80,80,336,80,80,0,80,336,80,80,0,96,96,352,96,96,0,80,80,336,80,0,336,80,80,0,0,96,96,352,96,96,0,0,80,80,336],ge=[336,80,80,112,112,112,96,352,96,96,112,112,112,80,336,0,80,336,80,112,112,112,112,352,96,112,112,112,112,336,80,0,80,80,336,112,112,112,112,368,112,112,112,112,368,80,80,0,80,80,80,368,112,112,112,368,112,112,112,368,112,80,80,0,80,80,80,112,368,120,120,376,120,120,368,112,112,80,80,0,0,80,88,120,120,508,252,508,252,508,120,120,120,88,80,0,96,104,252,252,252,252,252,252,252,252,252,252,252,252,104,0,352,352,480,480,488,508,252,0,252,508,488,480,480,480,352,0,96,104,252,252,252,252,252,252,252,252,252,252,252,252,104,0,0,80,88,120,120,508,252,508,252,508,120,120,120,88,80,0,80,80,80,112,368,120,120,376,120,120,368,112,112,80,80,0,80,80,80,368,112,112,112,368,112,112,112,368,112,80,80,0,80,80,336,112,112,112,112,368,112,112,112,112,368,80,80,0,80,336,80,112,112,112,112,352,96,112,112,112,112,336,80,0,336,80,80,112,112,112,96,352,96,96,112,112,112,80,336],ve=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,33,16,31,15,0,0,0,0,0,0,0,0,0,0,0,18,17,16,15,14,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,-14,-15,-16,-17,-18,0,0,0,0,0,0,0,0,0,0,0,-15,-31,-16,-33,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],be=[0,5,8,11,14],ye=[31,7,7,7,63],_e={P:0,p:0,N:5,n:5,B:8,b:8,R:11,r:11,Q:14,q:14},we=[4,8,16,V,64],ke=["","N","B","R","Q"],Te={CAPTURE:1,BIG_PAWN:2,EP_CAPTURE:4,ANY_CAPTURE:5,PROMOTION:8,KSIDE_CASTLE:16,QSIDE_CASTLE:32,KQSIDE_CASTLE:48,DROP:64,DROP_OR_PROMOTE:72},Se=[0,6,1],Ce={K:119,Q:112,k:7,q:0,A:112,B:113,C:114,D:115,E:116,F:117,G:118,H:119,a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7},xe=["Event","Site","Date","Round","White","Black","Result"],Ee=["Event","Site","Date","Round","White","Black","Result","Variant","SetUp","FEN","WhiteA","WhiteB","BlackA","BlackB"];function rank(i){return i>>4}function file(i){return 7&i}function algebraic(i){return String.fromCharCode(file(i)+97)+(8-rank(i))}function swapColor(i){return 3-i}function hashNum(i,s){i[0]=(i[0]^s[0])>>>0,i[1]=(i[1]^s[1])>>>0}function completeFen(i){var s,_;return(s=[""," w - - 0 1"," - - 0 1"," - 0 1"," 0 1"," 1"][(_=(i=i.trim()).split(" ")).length])&&i?i+=s:"0"===_[5]&&(_[5]=1,i=_.join(" ")),i}function createVariantZobristNumbers(){_.zobristCheck=[[441249556,340005552],[1040760204,311043682],[1621584863,1749286446],[1006868636,1625552915],[1953853171,24921145],[161251506,1935545265]]}function validateFen(i,s){var _,T,S,P,O,M,R,D,j,$,U,V,Z,Y,X,Q,ee,te,ne,re,ae=/^(?:[A-H]{1,2}[a-h]{0,2}|[A-H]{0,2}[a-h]{1,2}|KQ?k?q?|Qk?q?|kq?|q|-)$/,se=1*s===C.Crazyhouse||C[s]===C.Crazyhouse||1*s===C.Bughouse||C[s]===C.Bughouse,oe=0,le=0,ce=!0,ue="",de={0:0,7:0},he={0:0,7:0},pe={0:"k",7:"K"},me={0:"r",7:"R"},fe=1*s===C.Chess960||C[s]===C.Chess960;if(!i)return 1;if((1*s===C.Bughouse||C[s]===C.Bughouse)&&2===(O=i.split(" | ")).length)return 0===(M=validateFen(O[0],s))&&(M=validateFen(O[1],s)),M;if(O=i.split(/\s+/),(1*s===C["3-check"]||C[s]===C["3-check"])&&7===O.length&&(P=O.pop(),!/^\+[0-3]\+[0-3]$/.test(P)||"+3+3"===P))return 14;if(6!==O.length)return 1;if(/\D|.{7,}|^0|^$/.test(O[5]))return 2;if(/\D|.{7,}|^0.|^$/.test(O[4]))return 3;if(!/^(?:-|[abcdefgh][36])$/.test(O[3]))return 4;if($=O[2],fe){if(!ae.test($))return 12}else if(!/^(?:KQ?k?q?|Qk?q?|kq?|q|-)$/.test($)){if(void 0!==s||!ae.test($))return 5;fe=!0}if("w"!==O[1]&&"b"!==O[1])return 6;if(se&&(O[0]=O[0].replace(/~(?=.*\/)/g,"")),T=O[0].split("/"),se&&9===T.length&&(P=T.pop(),!/^[pnbrq]{0,63}$/i.test(P)))return 13;if(8!==T.length)return 7;if("3"===O[3][1]&&"w"===O[1]||"6"===O[3][1]&&"b"===O[1])return 11;for("-"!==O[3]&&(R=4==(le="3"===O[3][1]?4:3)?5:2,oe=O[3].charCodeAt(0)-97,ce=!1,ue=4===le?"P":"p"),_=0;_<T.length;++_){for(te=0,ne=!1,re=0;re<T[_].length;re++)if(+(S=T[_][re])==+S){if(ne)return 8;te+=1*S,ne=!0}else{if(-1===ie.indexOf(S))return 9;if(ce||le!==_||oe!==te||ue!==S||(ce=!0),R===_&&oe===te)return 11;_%7==0&&(S===pe[_]?he[_]=1<<te:S===me[_]&&(de[_]|=1<<te)),++te,ne=!1}if(8!==te)return 10}if(!ce)return 11;if("-"!==$)if(fe)for(V={0:0,1:0,2:252,4:248,8:240,16:224,32:192,64:128,128:0},U={0:0,1:0,2:1,4:3,8:7,16:15,32:31,64:63,128:0},ee={0:[0,0],7:[0,0]},_=$.length-1;_>=0;--_){if(X=$.charCodeAt(_),Q&&Q>X&&Q-X<8)return 15;if(75===X?Z=de[Y=7]&V[he[Y]]:81===X?Z=de[Y=7]&U[he[Y]]:107===X?Z=de[Y=0]&V[he[Y]]:113===X?Z=de[Y=0]&U[he[Y]]:(Z=1<<X-((Y=X>=97?0:7)?65:97),Q=X),!Z||0!=(Z&Z-1))return 15;if(he[Y]<2||he[Y]>64||(Z&de[Y])!==Z)return 15;if(++ee[Y][1*(he[Y]<Z)]>1)return 15}else{if((D=($.indexOf("K")>-1?128:0)|($.indexOf("Q")>-1?1:0))&&(16!==he[7]||(D&de[7])!==D))return 15;if((j=($.indexOf("k")>-1?128:0)|($.indexOf("q")>-1?1:0))&&(16!==he[0]||(j&de[0])!==j))return 15}return 0}function handToString(i,s){var _,T,S="",C=0,P=s?6:0;if(i)for(;C<5;){for(_=i>>be[C]&ye[C],T=0;T<_;++T)S+=ie[C+P];++C}return S}function hashEP(i,s,T,S){i[T+1]!==S&&i[T-1]!==S||hashNum(s,_.zobristEnPassant[file(T)])}function addPawnMove(i,_,T){var S;(0===s||2&M[_])&&(rank(_)%7==0?(S=T|Te.PROMOTION|i<<7|_<<te,R[j++]=8388608|S,R[j++]=6291456|S,R[j++]=4194304|S,R[j++]=2097152|S):R[j++]=T|i<<7|_<<te)}function kingOfTheHillWin(i){switch(i){case 67:case 68:case 51:case 52:return!0}return!1}function canCastle960(i,s,_,T){var S,C,P,O=s+(_-s%8),R=_>s%8?1:-1;for(P=s+R;P!==O;P+=R)if(i[P])return!1;if(C=(S=1===T?1===R?118:114:1===R?6:2)-R,M[S]||i[S]&&S!==s&&S!==O||i[C]&&C!==s&&C!==O)return!1;if(S!==s)for(P=s+(R=S>s?1:-1);P!==S;P+=R)if(P!==O&&i[P]||M[P])return!1;return!0}var Pe=function(){function createLine(i,s,_,T,S,P){var O,M,R,D,j,$,U,V,Z,Y,X,Q,ee=[],te="",ne=!0,re=s[_],ie=re.length,ae="";if(re.commands&&!P)for(j in re.commands)ae+="[%"+j+" "+re.commands[j]+"]";for(re.initComment&&(ae=(ae+" "+re.initComment.replace(/(\"|\}|\%|\\)/g,"\\$1")).trim()),ae&&ee.push("{"+ae+"}"),R=0;R<ie;++R){if(U=1===(M=re[R]).color,te="",ae="",O=M.commands,T!==C.Bughouse?(ne&&!U?te=i+"...":U&&(te=i+"."),S&&(U||ne)&&(te+=" ")):(ee.bughouseOrder||(ee.bughouseOrder=[]),ee.bughouseOrder.push(M.bughouseOrder),R||(ee.blackCountOffset=2===re[0].color?1:0)),te+=M.san,M.annotation&&(te+=M.annotation),M.additionalAnnotation&&(te+=" "+M.additionalAnnotation.join(" ")),ne=!1,void 0===M.time||O||(O={clk:(Y=M.time,X=void 0,Q=void 0,X=Math.floor(Y%36e3/600),Q=Math.floor(Y%36e3%600)/10,Math.floor(Y/36e3)+":"+(X<10?"0":"")+X+":"+(Q<10?"0":"")+Q)}),O&&!P)for(j in O)ae+="[%"+j+" "+O[j]+"]";if(M.comment&&(ae=(ae+" "+M.comment.replace(/(\"|\}|\%|\\)/g,"\\$1")).trim()),ae&&(te+=" {"+ae+"}",ne=!0),ee.push(te),M.lines)for(V=M.lines.length,D=0;D<V;++D)s[Z=M.lines[D]].length&&(($=createLine(i,s,Z,T,S,P))[0]="("+$[0],$[$.length-1]+=")",ee=ee.concat($),ne=!0);U||i++}return ee}function createHeader(i,s){return"["+i+' "'+String(s).replace(/(\"|\\)/g,"\\$1")+'"]'}return function generatePgn2(i,s,_,T,S,P){var O,M,R="string"==typeof i.newline?i.newline:"\n",D=void 0===i.spaceAfterPeriods||i.spaceAfterPeriods,j="";for(O in j+=createHeader("Event",s.Event)+R,j+=createHeader("Site",s.Site)+R,j+=createHeader("Date",s.Date)+R,j+=createHeader("Round",s.Round)+R,S===C.Bughouse?(j+=createHeader("WhiteA",s.WhiteA||"?")+R,j+=createHeader("BlackA",s.BlackA||"?")+R,j+=createHeader("WhiteB",s.WhiteB||"?")+R,j+=createHeader("BlackB",s.BlackB||"?")+R):(j+=createHeader("White",s.White)+R,j+=createHeader("Black",s.Black)+R),j+=createHeader("Result",s.Result)+R,S&&(j+=createHeader("Variant",s.Variant)+R),s.FEN&&s.FEN!==ae&&(j+=createHeader("SetUp","1")+R,j+=createHeader("FEN",s.FEN)+R),s)-1===Ee.indexOf(O)&&(j+=createHeader(O,s[O])+R);if(j+=R,M=createLine(T,_,0,S,D,i.hideCommands),S===C.Bughouse){if(P.isDependent)return M;M=function makeBugHousePgn(i,s,_){var T=s,S=i.siblingGame.pgn(),C=0,P=0,O=[];for(s.bughouseOrder=s.bughouseOrder||[],S.bughouseOrder=S.bughouseOrder||[];s.bughouseOrder.length||S.bughouseOrder.length;)!s.bughouseOrder.length||S.bughouseOrder.length&&s.bughouseOrder[0]>S.bughouseOrder[0]?(S.bughouseOrder.shift(),O.push("B")):(s.bughouseOrder.shift(),O.push("A"));return s=[],O.forEach((function(O){var M,R,D,j="";"A"===O?(M=T,R=++C,D=i.startingMoveNumber()):(M=S,R=++P,D=i.siblingGame.startingMoveNumber()),j=String(Math.floor((R+1)/2)+D-1),(M.blackCountOffset+R)%2?j+=O:j+=O.toLowerCase(),j+="."+(_?" ":"")+M.shift(),s.push(j)})),s}(P,M,D)}return M.push(s.Result),j+function wordWrap(i,s,_){return s<1?i:(s="number"==typeof s?s:80,i.replace(new RegExp("(.{1,"+s+"})(?: |$|\r?\n)","g"),"$1"+_).slice(0,-_.length))}(M.join(" "),i.maxWidth,R)}}(),Ae=function(){var i="!?~",s=/\[%(\S+)\s([^\]]+)\]/,_=/^(?:[+=~\/\-\u2212]+|T?N|RR|D)$/;function extractCommands(i){var _,T,S={};do{(_=s.exec(i.value))&&(T=!0,i.value=i.value.replace(_[0],"").trim(),S[_[1]]=_[2])}while(_);T&&(i.commands=S)}function isSplitGame(i,s,_){for(var T;++s<_;)if(T=i[s].match(/^\s*(\S+)/))return/^(?:\[|1(?:\.|$))/.test(T[1])}return function tokenize(s,T){var S,C,P,O,M,R,D,j="tags",$=[],U={type:j,value:""},V=0,Z=[],Y=!0;for(T=T||{},O=(S=s.split(/\r?\n/)).length,C=0;C<O;++C)if("%"!==(P=S[C].trim())[0])if(P){if(R=(P=" "+P+" ").length,M=0,Y)for(;M<R;++M)if(D=P[M],"tags"===j){if("["===D)U={type:j="tagName",value:""};else if(D.trim()){U={type:j="san",value:""},Y=!1;break}}else if("tagName"===j)U.value&&""===D.trim()?($.push(U),j="tagValueStart"):" "!==D&&(U.value+=D);else if("tagValueStart"===j){if('"'===D||""===D)U={type:j="tagValue",value:""};else if(D.trim())return!1}else if("tagValue"===j)'"'===D||""===D?($.push(U),"]"===P[M+1]?(U={type:j="tags",value:""},++M):j="tagEnd"):("\\"===D&&M+2<R&&(D=P[++M]),M>0&&(U.value+=D));else if("]"===D)U={type:j="tags",value:""};else if(D.trim())return!1;for(;M<R;++M)if(D=P[M],"san"===j)if(i.indexOf(D)>-1)"!"===D||"?"===D||i.indexOf(D)<6&&(D=["!!","??","!?","?!"][i.indexOf(D)-2])?(U.value&&$.push(U),U={type:"a",value:D},"!"!==P[M+1]&&"?"!==P[M+1]||(U.value+=P[++M]),$.push(U),U={type:"san",value:""}):(""===D&&"=/"===U.value?(U.type="aa",U.value+=D):(U.value&&(_.test(U.value)&&("--"!==U.value||T.rejectNullMoves)&&(U.type="aa"),$.push(U)),U={type:"aa",value:D},""===D&&""===P[M+1]&&(U.value="",++M)),$.push(U),U={type:"san",value:""});else if(" "===D||"\t"===D||"\n"===D||"\r"===D||"{"===D||"("===D||")"===D){if(U.value){if("$"===U.value[0])U.type="nag";else if("*"===U.value||"1-0"===U.value||"0-1"===U.value||"1/2-1/2"===U.value||"-"===U.value){if(M+1<R)return!1;U.type="result","-"===U.value&&(U.value="1/2-1/2")}_.test(U.value)&&("--"!==U.value||T.rejectNullMoves)&&(U.type="aa"),$.push(U),U={type:j,value:""}}if(" "===D||"\t"===D||"\n"===D||"\r"===D)j="san";else if("{"===D)j="comment";else if("("===D)j="san",$.push({type:"variationStart",value:++V});else if($.push({type:"variationEnd",value:V}),j="san",!V--)return!1;U.type=j}else if("."===D||!U.value&&+D==+D&&"-"!==P[M+1]&&"/"!==P[M+1]){if(+D==+D)switch(U.number||(U.number=""),U.number+=D,P[M+1]){case"A":case"a":case"B":case"b":U.number+=P[++M],$.push({type:"number",value:U.number}),delete U.number}}else U.value+=D;else 0===M&&(U.value=U.value.trim()),"}"!==D?("\\"===D&&M+2<R&&(D=P[++M]),U.value+=D):(U.value=U.value.trim(),U.value.indexOf("[")>-1&&extractCommands(U),$.push(U),U={type:j="san",value:""})}else"tags"===j?(j="san",Y=!1):"comment"!==j&&"tagValueStart"!==j&&!V&&$.length&&isSplitGame(S,C,O)&&("tagValue"!==$[$.length-1].type&&(Z.push($),$=[]),j="tags",Y=!0);return Z.push($),Z}}();function Chess2(Ee,Oe){var Me,ze,Ie=0,Le=!0,Re=[],Ne=1,De=[],je=U,Be=0,$e=1,Ue=1,Fe=[],He=[Fe],qe=0;Fe.id=qe;var Ve={},Ge=[],Ze=!1,We=!1,Ke=makeMoveChess;function hashPosition(){var i,s,T,S=1===Ne?[4174784170,2938602761]:[0,0];for(T=0;T<120;++T)136&T&&(T+=8),(i=ze[T])&&hashNum(S,_.zobristPiece[64*_.zobristPieceValueNumbers[i&X]+8*(7-rank(T))+file(T)]);if(We)for(s=1;s<3;++s)De[s]&&(0!=(De[s]&De[s]-1)?(hashNum(S,_.zobristCastle[s-1]),hashNum(S,_.zobristCastle[s+1])):De[s]>1<<file(Re[s])?hashNum(S,_.zobristCastle[s-1]):hashNum(S,_.zobristCastle[s+1]));else{for(s=1;s<3;++s)De[s]&&(De[s]&Te.KSIDE_CASTLE&&hashNum(S,_.zobristCastle[s-1]),De[s]&Te.QSIDE_CASTLE&&hashNum(S,_.zobristCastle[s+1]));Ze?function hashHand(i,s){var T,S,C,P,O,M,R,D=0;for(T=1;T<3;++T){if(S=s[T])for(C=0;C<5;){for(O=D+63*C,P=S>>be[C]&ye[C],M=0;M<P;++M)hashNum(i,[31*(R=_.zobristPiece[O++])[0]>>>0,17*R[1]>>>0]);++C}D=315}}(S,Me._hand):Ie===C["3-check"]&&function hash3Check(i,s){s[1]&&hashNum(i,_.zobristCheck[s[1]-1]),s[2]&&hashNum(i,_.zobristCheck[s[2]+2])}(S,Ge)}return je!==U&&hashEP(ze,S,je+(1===Ne?16:-16),4|Ne),S}function getCurrentHash(){var i;return Fe.length?i=Fe[Fe.length-1].hash:(Fe.hash||(Fe.hash=hashPosition()),i=Fe.hash),[i[0],i[1]]}function setVariant(i,s){Ie!==(Ie=i?C[i]||1*i||C[String(i).replace(/ /g,"").toLowerCase()]||C.Chess:0)&&(Ie===C.Bughouse?(Ze=!0,Me.isDependent||(Me.siblingGame=Chess2(),Me.siblingGame.hashing(Le),Me.siblingGame.isDependent=!0,Me.siblingGame.siblingGame=Me,Me.siblingGame.header({Variant:"Bughouse"})),createVariantZobristNumbers(),Ke=makeMoveVariant):(delete Me.siblingGame,Ze=Ie===C.Crazyhouse,We=Ie===C.Chess960,Ie?(createVariantZobristNumbers(),Ke=makeMoveVariant):Ke=makeMoveChess),s||updateSetup(generateFen()))}function disambiguate960Rook(i,s){for(var _,T,S=i>7?1:2;!(136&i);){if((_=ze[i])&S)if(_&V){if(T)return;T=i%8+(1===S?65:97)}else if(_&Z)return T;i+=s}}function clear(i,s,_){ze=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ne=1,Re[1]=U,Re[2]=U,De[1]=0,De[2]=0,Me._hand[1]=0,Me._hand[2]=0,Ge[1]=0,Ge[2]=0,je=U,Be=0,$e=1,s||(He=[Fe=[]],qe=0,Fe.id=qe,Ve={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},i?setHeader(["Variant",i]):setVariant(!1,_),_||updateSetup(generateFen()))}function reset(){clear(0,!1,!0),Fe.hash=[1178310168,378666140],ze=[34,10,18,66,130,18,10,34,0,0,0,0,0,0,0,0,6,6,6,6,6,6,6,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,5,5,5,5,5,5,5,0,0,0,0,0,0,0,0,33,9,17,65,129,17,9,33],Ue=1,Re[1]=116,Re[2]=4,De[1]=48,De[2]=48}function load(i,s,_,T){var S,M,R,D,j,$,Y,X,ee,te,ne,re,ie=0;if(T?(re=(S=i.split(" "))[3],ne=S[2]):(re=(S=i.trim().split(/\s+/))[3]||"-",ne=S[2]||"-"),void 0===s?(31&ne.charCodeAt(0))<9&&setVariant(C.Chess960,!0):setVariant(s,!0),M=S[0],!T&&!(M=function fixFenPieces(i,s){var _,T,S=i.length,P=0,O=0,M=s&&(s===C.Crazyhouse||s===C.Bughouse);for(_=0;_<S;++_)if(+(T=i[_])!=+T)if("/"===T){if(8!==O&&(i=i.substr(0,_)+(8-O)+i.substr(_),++_,++S),O=0,++P>7){if(!M&&_<S-1||!/^[pnbrq]{0,63}$/i.test(i.substr(_+1)))return!1;break}}else if(oe[T]){if(++O>8)return!1}else{if("~"!==T)return!1;M&&_&&/[nbrq]/i.test(i[_-1])||(i=i.substr(0,_)+i.substr(_+1),--_,--S)}else(O+=1*T)>8&&(i=i.substr(0,_)+(T-(O-8))+i.substr(_+1),O=8);return i}(M,Ie)))return!1;if(D=M.length,clear(P[Ie],_,!0),Ze){if(Ie===C.Bughouse&&!Me.isDependent&&($=i.split(" | "),!Me.siblingGame.load(1===$.length?i:$[1],s,_,T)))return reset(),!1;for(j=0;j<D;++j)if(+(Y=M[j])!=+Y)if("/"===Y){if(ie>111){for(++j;j<D;++j)Y=M[j],Me._hand[Y<"a"?1:2]+=1<<_e[Y]>>>0;break}ie+=8}else ze[ie]=oe[Y],"~"===M[j+1]&&(++j,ze[ie]|=Q),ze[ie]&Z&&(Re[3&ze[ie]]=ie),++ie;else ie+=1*Y}else for(j=0;j<D;++j)+(Y=M[j])!=+Y?"/"===Y?ie+=8:(ze[ie]=oe[Y],ze[ie]&Z&&(Re[3&ze[ie]]=ie),++ie):ie+=1*Y;if(Ne="b"===S[1]?2:1,"-"!==ne)if(We){for(ee={1:[0,0],2:[0,0]},j=ne.length-1;j>=0;--j)75===(R=ne.charCodeAt(j))?R=disambiguate960Rook(119,-1):81===R?R=disambiguate960Rook(112,1):107===R?R=disambiguate960Rook(7,-1):113===R&&(R=disambiguate960Rook(0,1)),X=R<97?1:2,te=Ce[String.fromCharCode(R)],(Y=ze[te])===(V|X)&&(R>=97?Re[X]>=1&&Re[X]<=6&&(De[X]|=1<<R-97):Re[X]>=113&&Re[X]<=118&&(De[X]|=1<<R-65),++ee[X][1*(Re[X]<te)]);(ee[1][0]>1||ee[1][1]>1)&&(De[1]=0),(ee[2][0]>1||ee[2][1]>1)&&(De[2]=0)}else{if(!T)for(j=ne.length-1;j>=0;--j)Y=ze[Ce[ne[j]]],X=ne.charCodeAt(j)<97?1:2,Y===(V|X)&&Re[X]===(1===X?116:4)||(ne=ne.substr(0,j)+ne.substr(j+1)||"-");for(j=ne.length-1;j>=0;--j)switch(ne[j]){case"K":De[1]|=Te.KSIDE_CASTLE;break;case"Q":De[1]|=Te.QSIDE_CASTLE;break;case"k":De[2]|=Te.KSIDE_CASTLE;break;case"q":De[2]|=Te.QSIDE_CASTLE}}return!T&&(2!==re.length||1===Ne&&"6"!==re[1]||2===Ne&&"3"!==re[1]||ze[re.charCodeAt(0)-97+16*(8-("3"===re[1]?4:5))]!==(4|swapColor(Ne))||ze[O[re]])&&(re="-"),je="-"===re?U:O[re],Be=1*S[4]||0,$e=1*S[5]||1,Ie===C["3-check"]&&(S[6]&&"+3+3"!==S[6]&&($=S[6].match(/^\+([0-3])\+([0-3])$/)),$=$||[0,0,0],Ge[1]=1*$[1],Ge[2]=1*$[2]),_||(Ue=$e,updateSetup(generateFen())),!0}function generateFen(){return Ie?function generateVariantFen(){var i,s,_,T=0,S="",P="";for(i=0;i<120;++i)136&i&&(T&&(S+=T),S+="/",T=0,i+=8),(_=ze[i])?(T&&(S+=T,T=0),S+=ce[_&X],Ze&&_&Q&&(S+="~")):++T;if(T&&(S+=T),Ze&&(S+="/"+handToString(Me._hand[1],!0)+handToString(Me._hand[2])),We){for(s=De[2],i=0;s;)1&s&&(P=String.fromCharCode(i+97)+P),s>>=1,++i;for(s=De[1],i=0;s;)1&s&&(P=String.fromCharCode(i+65)+P),s>>=1,++i}else De[1]&Te.KSIDE_CASTLE&&(P+="K"),De[1]&Te.QSIDE_CASTLE&&(P+="Q"),De[2]&Te.KSIDE_CASTLE&&(P+="k"),De[2]&Te.QSIDE_CASTLE&&(P+="q");return S+=" "+(1===Ne?"w":"b")+" "+(P||"-")+" "+(je===U?"-":algebraic(je))+" "+Be+" "+$e,Ie===C["3-check"]?S+=" +"+Ge[1]+"+"+Ge[2]:Ie!==C.Bughouse||Me.isDependent||(S+=" | "+Me.siblingGame.fen()),S}():function generateStandardFen(){var i,s,_=0,T="",S="";for(i=0;i<120;++i)136&i&&(_&&(T+=_),T+="/",_=0,i+=8),(s=ze[i])?(_&&(T+=_,_=0),T+=ce[s&X]):++_;return _&&(T+=_),De[1]&Te.KSIDE_CASTLE&&(S+="K"),De[1]&Te.QSIDE_CASTLE&&(S+="Q"),De[2]&Te.KSIDE_CASTLE&&(S+="k"),De[2]&Te.QSIDE_CASTLE&&(S+="q"),T+" "+(1===Ne?"w":"b")+" "+(S||"-")+" "+(je===U?"-":algebraic(je))+" "+Be+" "+$e}()}function setHeader(i){var s,_,T;for(s=0;s<i.length;s+=2)_=i[s],T=i[s+1],_&&("Variant"===_&&(setVariant(T),T=Ie?P[Ie]:void 0),"Result"===_&&"*"!==T&&"1-0"!==T&&"0-1"!==T&&"1/2-1/2"!==T&&(T="*"),void 0!==T?Ve[_]=String(T):xe.indexOf(_)>-1?Ve[_]="Date"===_?"????.??.??":"?":delete Ve[_]);return Ve}function updateSetup(i){Fe.length>0||qe||(i!==ae?(Ve.SetUp="1",Ve.FEN=i,Fe.hash=null):(delete Ve.SetUp,delete Ve.FEN,Fe.hash=[1178310168,378666140]))}function get(i){var s=ze[O[i]];return s?{type:ce[s&Y|2],color:3&s,promoted:0!=(s&Q)}:null}function calculateLegalMoveInfo(_,C){var P,O,R,D,j,$,V,X,Q,te,ne,re,ie,ae,oe=Ne,le=Z|oe,ce=M;if(i=[],s=0,T=0,S=0,ce[0]=ce[1]=ce[2]=ce[3]=ce[4]=ce[5]=ce[6]=ce[7]=ce[16]=ce[17]=ce[18]=ce[19]=ce[20]=ce[21]=ce[22]=ce[23]=ce[32]=ce[33]=ce[34]=ce[35]=ce[36]=ce[37]=ce[38]=ce[39]=ce[48]=ce[49]=ce[50]=ce[51]=ce[52]=ce[53]=ce[54]=ce[55]=ce[64]=ce[65]=ce[66]=ce[67]=ce[68]=ce[69]=ce[70]=ce[71]=ce[80]=ce[81]=ce[82]=ce[83]=ce[84]=ce[85]=ce[86]=ce[87]=ce[96]=ce[97]=ce[98]=ce[99]=ce[100]=ce[101]=ce[102]=ce[103]=ce[112]=ce[113]=ce[114]=ce[115]=ce[116]=ce[117]=ce[118]=ce[119]=0,C!==U){for(ie=function chooseKingThreats(i,s){return We&&De[i]?ge:De[i]&Te.KSIDE_CASTLE&&!ze[s+1]&&!ze[s+2]?De[i]&Te.QSIDE_CASTLE&&!ze[s-1]&&!ze[s-2]&&!ze[s-3]?(S=Te.KQSIDE_CASTLE,fe):(S=Te.KSIDE_CASTLE,pe):De[i]&Te.QSIDE_CASTLE&&!ze[s-1]&&!ze[s-2]&&!ze[s-3]?(S=Te.QSIDE_CASTLE,me):he}(oe,C),P=0;P<120;++P)if(136&P&&(P+=8),D=ze[P])if(D&oe)(!_||(0|D)&_)&&i.push(P);else if(0!=((ae=ie[P-C+119])&D))if(4&D)for(te=se[D],O=1;O<3;++O)136&(X=P+te[O])||(ce[X]|=1,X===C&&(++s,ce[P]|=2));else for(Q=(te=se[D&Y]).length,re=D&ee,O=0;O<Q;++O)if(ne=te[O],!(C>(X=P)&&ne<0&&C-X>16||C<X&&ne>0&&X-C>16))for(;!(136&(X+=ne));){if(ce[X]|=1,j=ze[X]){if(j&oe)if(X===C){for(R=X-ne;R!==P;R-=ne)ce[R]|=2;ce[P]|=2,++s,re&&0==(136&(X+=ne))&&(ce[X]|=1)}else if(re&&256&ae&&s<2)for(V=X+ne;0==(136&V);){if($=ze[V]){$===le&&(ce[X]|=4+(Math.abs(ne)<<3),++T);break}V+=ne}break}if(!re)break}s>1&&(i=[C])}else i=function getPieces(i,s){var _,T,S=[];for(_=0;_<120;++_)136&_&&(_+=8),(T=i[_])&&(T&s)===s&&S.push(_);return S}(ze,oe|_)}function validateEnPassant(i,_){var T,S,C,P=_+16*(1===Ne?1:-1);return(1!==s||0!=(2&M[_])||0!=(2&M[P]))&&(T=ze[i],ze[_]=T,ze[i]=0,S=ze[P],ze[P]=0,C=inCheck(),ze[i]=T,ze[_]=0,ze[P]=S,!C)}function addCastlingMoves(i){var s,_,T;if(We){if(De[i])for(_=(s=Re[i])%8,T=0;T<8;++T)De[i]&1<<T&&canCastle960(ze,s,T,i)&&(R[j++]=(T>_?Te.KSIDE_CASTLE:Te.QSIDE_CASTLE)+(s<<7)+(s+(T-_)<<te),++T)}else S&Te.KSIDE_CASTLE&&(_=(s=Re[i])+2,0===M[s+1]&&0===M[s+2]&&(R[j++]=Te.KSIDE_CASTLE+(s<<7)+(_<<te))),S&Te.QSIDE_CASTLE&&(_=(s=Re[i])-2,0===M[s-1]&&0===M[s-2]&&(R[j++]=Te.QSIDE_CASTLE+(s<<7)+(_<<te)))}function generateMoves(_,S){var C,P,O,U,V,Z,X,Q,re,ie,ae=Ne,oe=swapColor(ae),le=Re[ae];for(calculateLegalMoveInfo(_,le),$=i.length,j=D,re=0;re<$;++re)if(C=i[re],U=ze[C],!(s&&T&&4&M[C]))if(4&U)for(Z=se[U],0!==T&&0!=(4&M[C])&&M[C]>>3!=16||(V=C+Z[0],0===ze[V]&&(addPawnMove(C,V,0),Se[ae]===rank(C)&&(V+=Z[0],ze[V]||addPawnMove(C,V,Te.BIG_PAWN)))),P=1;P<3;++P)136&(V=C+(X=Z[P]))||T&&4&M[C]&&M[C]>>3!==Math.abs(X)||(ze[V]&oe?addPawnMove(C,V,Te.CAPTURE):V===je&&validateEnPassant(C,V)&&(R[j++]=Te.EP_CAPTURE|C<<7|V<<te));else{if(T&&4&M[C]){if(8&U)continue;if(!(de[C-Re[ae]+119]&U))continue;Z=[X=M[C]>>3,-X]}else Z=se[U&Y];if(ie=C<<7,C===le){for(P=0;P<8;++P)0==(136&(V=C+(X=Z[P])))&&(ze[V]?ze[V]&oe&&0==(1&M[V])&&(R[j++]=Te.CAPTURE|ie|V<<te):0==(1&M[V])&&(R[j++]=ie|V<<te));0===s&&addCastlingMoves(ae)}else for(O=Z.length,Q=U&ee,P=0;P<O;++P)for(X=Z[P],V=C;!(136&(V+=X));){if(ze[V]){ze[V]&oe&&(0===s||2&M[V])&&(R[j++]=Te.CAPTURE|ie|V<<te);break}if((0===s||2&M[V])&&(R[j++]=ie|V<<te),!Q)break}}return Ze&&function drop(i,_,T){var S,C,P,O,D;if(!i)for(_&&(_>>=26),O=0;O<5;++O)if((!_||(0|_)==1<<O)&&Me._hand[T]&ye[O]<<be[O]){for(0===O?(S=16,C=103,P=Te.DROP):(S=0,C=119,P=Te.DROP|O<<ne),D=S;D<=C;++D)136&D&&(D+=8),ze[D]||(0===s||1===s&&2&M[D])&&(R[j++]=P|D<<te);if(_)return}}(S,_,ae),j}function inCheckAfterMove(i,s,_,T){var S,P,O,M,R,D,j,$;if(Ie===C["King of the Hill"]&&i&Z&&kingOfTheHillWin(_))return!0;if(T&Te.KQSIDE_CASTLE&&(_=1===Ne?T&Te.KSIDE_CASTLE?117:115:T&Te.KSIDE_CASTLE?5:3,i=V,$=!0),(S=Re[swapColor(Ne)])===U)return!1;if(0==(i&Z)&&de[_-S+119]&i)for(R=i&ee,M=_+(O=ve[_-S+119]);0==(136&M);){if(M===S){if(4&i){if(1==(3&i)?S-_<0:S-_>0)return!0;break}return!0}if(M!==s&&ze[M]||!R)break;M+=O}if(!$){if((P=de[s-S+119])&ee&&(O=ve[s-S+119])!==ve[_-S+119])for(M=S-O;0==(136&M);){if(M!==s&&(D=ze[M])){if(D&Ne&&P&D&&D&ee)return!0;break}M-=O}if(T&Te.EP_CAPTURE&&(P=de[(j=_+16*(1===Ne?1:-1))-S+119])&ee)for(M=S-(O=ve[j-S+119]);0==(136&M);){if(M!==s&&M!==j){if(M===_)break;if(D=ze[M]){if(D&Ne&&P&D&&D&ee)return!0;break}}M-=O}}return!1}function moveToSan(i,s){var _,T,S,P,O,M,U="";return i&Te.KQSIDE_CASTLE?U=i&Te.KSIDE_CASTLE?"O-O":"O-O-O":i&Te.DROP?((_=i>>ne)&&(U+=ke[_]),U+="@"+algebraic(S=i>>te&re)):(S=i>>te&re,4&(P=ze[T=i>>7&re])?(i&Te.ANY_CAPTURE&&(U+=String.fromCharCode(file(T)+97)+"x"),U+=algebraic(S),i&Te.PROMOTION&&(U+="="+ke[_=i>>ne])):(U+=ue[P&X],$>1&&(U+=function getDisambiguator(i,s,_){var T,S,C,P,O,M;if(j<2)return"";for(i&=Y,M=0;M<j;++M)if(_===(T=R[M])>>te&&(C=T>>7&re)!==s&&ze[C]&i){if(S=!0,rank(s)===rank(C)){if(P)return algebraic(s);O=!0}if(file(s)===file(C)){if(O)return algebraic(s);P=!0}}return S?P?String(8-rank(s)):String.fromCharCode(file(s)+97):""}(P,T,S)),i&Te.ANY_CAPTURE&&(U+="x"),U+=algebraic(S))),s||(i&Te.KQSIDE_CASTLE?(T=i>>7&re,S=i>>te&re):i&Te.DROP_OR_PROMOTE&&(P=we[_]+Ne),inCheckAfterMove(P,T,S,i)&&(Ke(i,T,S,_),O=D,D=j,M=$,Ie!==C.Chess&&isVariantWin()?U+="#":generateMoves()-D?U+="+":U+="#",j=D,D=O,$=M,reverseMove(Fe.pop()))),U}function kingAttacked(i){return Re[i]!==U&&function attacked(i,s){var _,T,S,C,P=se[8],O=8|i;for(_=0;_<8;++_)if(0==(136&(S=s+P[_]))&&((T=ze[S])&O)===O)return!0;for(P=se[128],_=0;_<8;++_)for(S=s+(C=P[_]);0==(136&S);){if(T=ze[S]){if(T&i&&de[s-S+119]&T){if(!(4&T))return!0;if(1===i?s-S<0:s-S>0)return!0}break}S+=C}return!1}(swapColor(i),Re[i])}function inCheck(){return kingAttacked(Ne)}function inCheckmate(){return inCheck()&&0===generateMoves()}function inStalemate(){var i=!inCheck()&&0===generateMoves();return i&&Ie===C.Bughouse&&!Me.isDependent&&(i=Me.siblingGame.inStalemate()),i}function insufficientMaterial(i){var s,_,T=0,S=0,C=0;for(_=0;_<120;++_)if(136&_&&(_+=8),s=ze[_]){if(i&&0==(s&i))continue;if(100&s)return!1;if(8&s){if(S||T++)return!1}else if(16&s){if(T)return!1;if(++S,(rank(_)+_)%2&&++C,C&&S!==C)return!1}}return!0}function inThreefoldRepetition(){if(Be<8)return!1;for(var i,s=getCurrentHash(),_=!1,T=Be,S=!1,C=Fe,P=C.length-1;;){if((P-=2)<0){if(C.id){P=C.atMoveNode+P+2,C=He[C.parentId];continue}if(-2===P)return!1;i=C.hash,S=!0}else i=C[P].hash,C[P].halfMoves>T||T<2?S=!0:T=C[P].halfMoves;if(i[0]===s[0]&&i[1]===s[1]){if(_)return!0;_=!0}if(S)return!1}}function modifyHand(i){var s,T,S,P,O,M,R,D,j,$=i.move;if(Ie===C.Crazyhouse||$&Te.DROP?(T=Me._hand,O=i.hash,j=i.color):(T=Me.siblingGame._hand,i.handSibling=!0,Le&&((M=Me.siblingGame._history()).length?O=M[M.length-1].hash:(M.hash||(M.hash=Me.siblingGame._hashPosition()),O=M.hash)),j=swapColor(i.color)),i.captured){switch((i.captured&Q?4:i.captured&Y)&Y){case 4:R=0;break;case 8:R=1;break;case 16:R=2;break;case V:R=3;break;default:R=4}s=1<<be[R],Le&&(P=T[j]>>be[R]&ye[R],D=_.zobristPiece[P+63*R+(1===j?0:315)])}else s=-1<<be[S=$>>ne],Le&&(P=T[j]>>be[S]&ye[S],D=_.zobristPiece[P-1+63*S+(1===j?0:315)]);T[j]+=s,i.handChange=s,Le&&hashNum(O,[31*D[0]>>>0,17*D[1]>>>0])}function makeMoveChess(i,s,T,S){var C,P,O,M,R,D,j,$,Y=Ne,ee=swapColor(Y),te={move:i,epSquare:je,halfMoves:Be,castlingW:De[1],castlingB:De[2],color:Y},ne=1===Y;Le&&(M=getCurrentHash(),te.hash=M,hashNum(M,_.zobristTurn),je!==U&&hashEP(ze,M,je+(ne?16:-16),4|Y)),0==(i&Te.KQSIDE_CASTLE)?Ze&&i&Te.DROP?(ze[T]=we[S]|Y,Le&&hashNum(M,_.zobristPiece[64*_.zobristPieceValueNumbers[ze[T]]+8*(7-rank(T))+file(T)]),modifyHand(te),j=0):(j=ze[s],($=ze[T])&&(te.captured=$,Le&&hashNum(M,_.zobristPiece[64*_.zobristPieceValueNumbers[ze[T]&X]+8*(7-rank(T))+file(T)]),$&V&&De[ee]&&(We?rank(T)===(ne?0:7)&&(O=1<<file(T),De[ee]&O&&(De[ee]^=O,Le&&(O>1<<file(Re[Y])?hashNum(M,_.zobristCastle[ee-1]):hashNum(M,_.zobristCastle[ee+1])))):T===(ne?7:119)?De[ee]&Te.KSIDE_CASTLE&&(De[ee]^=Te.KSIDE_CASTLE,Le&&hashNum(M,_.zobristCastle[ee-1])):T===(ne?0:112)&&De[ee]&Te.QSIDE_CASTLE&&(De[ee]^=Te.QSIDE_CASTLE,Le&&hashNum(M,_.zobristCastle[ee+1])))),ze[T]=i&Te.PROMOTION?we[S]|Y|Q:ze[s],ze[s]=0,Le&&(hashNum(M,_.zobristPiece[64*_.zobristPieceValueNumbers[j&X]+8*(7-rank(s))+file(s)]),hashNum(M,_.zobristPiece[64*_.zobristPieceValueNumbers[ze[T]&X]+8*(7-rank(T))+file(T)]))):j=Z,i&Te.EP_CAPTURE?(ne?(D=T+16,R=6):(D=T-16,R=8),te.captured=4|ee,ze[D]=0,Le&&hashNum(M,_.zobristPiece[64*_.zobristPieceValueNumbers[4|ee]+8*(R-rank(T))+file(T)])):j&Z?(We?(i&Te.KQSIDE_CASTLE&&(ze[T]=0,ze[s]=0,i&Te.KSIDE_CASTLE?ne?(C=118,P=117):(C=6,P=5):ne?(C=114,P=115):(C=2,P=3),ze[C]=Y|Z,ze[P]=Y|V,Le&&(hashNum(M,_.zobristPiece[64*_.zobristPieceValueNumbers[Z|Y]+8*(7-rank(s))+file(s)]),hashNum(M,_.zobristPiece[64*_.zobristPieceValueNumbers[V|Y]+8*(7-rank(T))+file(T)]),hashNum(M,_.zobristPiece[64*_.zobristPieceValueNumbers[Z|Y]+8*(7-rank(C))+file(C)]),hashNum(M,_.zobristPiece[64*_.zobristPieceValueNumbers[V|Y]+8*(7-rank(P))+file(P)]))),Le&&(0!=(De[Y]&De[Y]-1)?(hashNum(M,_.zobristCastle[Y-1]),hashNum(M,_.zobristCastle[Y+1])):De[Y]>1<<file(Re[Y])?hashNum(M,_.zobristCastle[Y-1]):hashNum(M,_.zobristCastle[Y+1])),Re[Y]=C||T):(i&Te.KQSIDE_CASTLE&&(ze[T]=ze[s],ze[s]=0,i&Te.KSIDE_CASTLE?(C=T-1,P=T+1):(C=T+1,P=T-2),ze[C]=ze[P],ze[P]=0,Le&&(hashNum(M,_.zobristPiece[64*_.zobristPieceValueNumbers[Z|Y]+8*(7-rank(s))+file(s)]),hashNum(M,_.zobristPiece[64*_.zobristPieceValueNumbers[V|Y]+8*(7-rank(P))+file(P)]),hashNum(M,_.zobristPiece[64*_.zobristPieceValueNumbers[Z|Y]+8*(7-rank(T))+file(T)]),hashNum(M,_.zobristPiece[64*_.zobristPieceValueNumbers[V|Y]+8*(7-rank(C))+file(C)]))),Le&&(De[Y]&Te.KSIDE_CASTLE&&hashNum(M,_.zobristCastle[Y-1]),De[Y]&Te.QSIDE_CASTLE&&hashNum(M,_.zobristCastle[Y+1])),Re[Y]=T),De[Y]=0):j&V&&De[Y]&&(We?rank(s)===(ne?7:0)&&(O=1<<file(s),De[Y]&O&&(De[Y]^=O,Le&&(O>1<<file(Re[Y])?hashNum(M,_.zobristCastle[Y-1]):hashNum(M,_.zobristCastle[Y+1])))):s===(ne?119:7)?De[Y]&Te.KSIDE_CASTLE&&(De[Y]^=Te.KSIDE_CASTLE,Le&&hashNum(M,_.zobristCastle[Y-1])):s===(ne?112:0)&&De[Y]&Te.QSIDE_CASTLE&&(De[Y]^=Te.QSIDE_CASTLE,Le&&hashNum(M,_.zobristCastle[Y+1]))),i&Te.BIG_PAWN?(je=ne?T+16:T-16,Le&&hashEP(ze,M,T,4|ee)):je=U,4&j||i&Te.ANY_CAPTURE?Be=0:Be++,Ne=ee,Fe.push(te)}function makeMoveVariant(i,s,T,S){var P,O=Ne;makeMoveChess(i,s,T,S),P=Fe[Fe.length-1],Ze?(Be=P.halfMoves+1,P.captured&&modifyHand(P),Ie===C.Bughouse&&(P.bughouseOrder=Me.moveCount()-1+Me.siblingGame.moveCount())):Ie===C["3-check"]&&kingAttacked(Ne)&&(P.checked=!0,Le&&Ge[O]&&hashNum(P.hash,_.zobristCheck[Ge[O]+(1===O?-1:2)]),++Ge[O],Le&&hashNum(P.hash,_.zobristCheck[Ge[O]+(1===O?-1:2)]))}function reverseMove(i){var s,_,T=Ne,S=swapColor(T),P=i.move,O=P>>te&re,M=P>>7&re;if(Ne=S,De[2]=i.castlingB,De[1]=i.castlingW,je=i.epSquare,Be=i.halfMoves,Ie){if(We&&P&Te.KQSIDE_CASTLE)return P&Te.KSIDE_CASTLE?1===S?(_=118,s=117):(_=6,s=5):1===S?(_=114,s=115):(_=2,s=3),ze[_]=0,ze[s]=0,ze[M]=S|Z,ze[O]=S|V,void(Re[S]=M);if(i.handChange&&(Ie!==C.Crazyhouse&&i.handSibling?Me.siblingGame._hand[swapColor(S)]-=i.handChange:Me._hand[S]-=i.handChange),P&Te.DROP)return void(ze[O]=0);i.checked&&--Ge[S]}P&Te.PROMOTION?(ze[M]=4|S,ze[O]=P&Te.CAPTURE?i.captured:0):(ze[M]=ze[O],P&Te.KQSIDE_CASTLE?(ze[O]=0,P&Te.KSIDE_CASTLE?(s=O+1,_=O-1):(s=O-2,_=O+1),ze[s]=S|V,ze[_]=0,Re[S]=M):(O===Re[S]&&(Re[S]=M),P&Te.CAPTURE?ze[O]=i.captured:(ze[O]=0,P&Te.EP_CAPTURE&&(ze[O-(1===S?-16:16)]=4|T))))}function beautifyMove(i,s,_){var T,S,C=i>>te&re,P={color:Ne,to:algebraic(C),flags:i&re};return Ze&&0!=(i&Te.DROP)?(S=i>>ne,P.drop=S,P.piece=we[S]+Ne):(T=i>>7&re,P.from=algebraic(T),P.piece=ze[T],i&Te.PROMOTION&&(S=i>>ne,P.promotion=we[S]+Ne),i&Te.CAPTURE?P.captured=ze[C]:i&Te.EP_CAPTURE&&(P.captured=4|swapColor(Ne))),P.san=s||moveToSan(i,_),P}function isVariantWin(){return Ie===C["3-check"]?3===Ge[swapColor(Ne)]:Ie===C["King of the Hill"]?kingOfTheHillWin(Re[swapColor(Ne)]):void 0}function isBughouseWin(){if(Ie===C.Bughouse)return Me.siblingGame.inCheckmate()}function createVariation(){var i=[],s=generateFen(),_=Fe.length-1,T=Fe[_];return!!T&&(i.parentId=qe,i.id=He.length,Fe.curFen=s,T.lines||(T.lines=[]),T.lines.push(i.id),T.move?reverseMove(T):(je=T.epSquare,--Be,Ne=swapColor(Ne)),2===Ne&&--$e,i.atMoveNode=_,i.hash=_?Fe[_-1].hash:Fe.hash,qe=i.id,He.push(i),Fe=i,!0)}function selectLine(i){var s=generateFen();Fe.curFen=s,Fe=He[i],qe=i,load(Fe.curFen,Ie,!0,!0)}return Me={WHITE:1,BLACK:2,PAWN:4,KNIGHT:8,BISHOP:16,ROOK:V,QUEEN:64,KING:Z,FLAGS:Te,load:load,reset:reset,moves:function(i){var s,_,T,S=[],C=moveToSan;for(i&&(i.verbose&&(C=beautifyMove),i.type&&(_=i.type|i.type<<24),T=i.noDrop),generateMoves(_,T),s=0;s<j;++s)S.push(C(R[s]));return S},inCheck:inCheck,inCheckmate:inCheckmate,inStalemate:inStalemate,isBughouseWin:isBughouseWin,in50MoveRule:function(){return Be>=100},inDraw:function(){return Be>=100||inStalemate()||insufficientMaterial()||inThreefoldRepetition()||Boolean(function isBughouseDraw(){if(Ie===C.Bughouse)return Me.siblingGame.in50MoveRule()||Me.siblingGame.inThreefoldRepetition()}())},insufficientMaterial:insufficientMaterial,inThreefoldRepetition:inThreefoldRepetition,isVariantWin:isVariantWin,gameOver:function(){return Me.inDraw()||inCheckmate()||Boolean(isVariantWin())||Boolean(isBughouseWin())},isPositionValid:function(i){var s,_,T,S=0;if(!1!==(i=i||{}).pawns)for(s=0;s<=119;){if(4&(T=ze[s]))return!1;8==++s&&(s=112)}if(!1!==i.kings){for(s=0;s<=119;++s)if(136&s&&(s+=8),(T=ze[s])&Z){if(++S>2)return!1;if(_&&_&T)return!1;_=3&T}if(2!==S)return!1}return!1===i.check||!1===i.kings&&Re[swapColor(Ne)]===U||!kingAttacked(swapColor(Ne))},validateFen:validateFen,fen:generateFen,pgn:function(i){return(i=i||{}).useResultHeader||qe||(isVariantWin()||inCheckmate()?Ve.Result=2===Ne?"1-0":"0-1":Me.inStalemate()?Ve.Result="1/2-1/2":isBughouseWin()&&(Ve.Result=1===Me.siblingGame.turn()?"1-0":"0-1")),Pe(i,Ve,He,Ue,Ie,Me)},loadPgn:function(i,s,_){var T,S,P,O,M,R,D,j,$,U={},V=0;if("number"!=typeof s&&(_=_||s,s=0),_=_||{},"string"==typeof i&&(_.singleGame&&(i=i.replace(/(?:\r?\n\s*){2,}/g,"\n")),i=Me.tokenizePgn(i,_)),s<0&&(s=i.length+s),!(O=i[s]))return!1;for(reset(),S=O.length,T=0;T<S&&"tagName"===(P=O[T]).type;++T){if(!O[T+1]||"tagValue"!==O[T+1].type)return!1;++T,"FEN"===P.value?D=completeFen(O[T].value):U[P.value]=O[T].value}if(_.variant&&(U.Variant=_.variant),U.Variant&&!D&&(D=ae),D||"1"===U.SetUp)if("0"===U.SetUp)U.FEN=D;else if(!D||!load(D,U.Variant))return!1;for(Me.header(U),R=(M=Me)._history();T<S;++T)if("san"===(P=O[T]).type&&0===V){if(!M.move(P.value)){if(!_.skipBadLines||!(0!==qe||Fe.length&&_.allowBadMainLine))return reset(),!1;V=1}}else if("result"===P.type&&"*"===Ve.Result)setHeader(["Result",P.value]);else if("a"===P.type&&0===V&&R[R.length-1])R[R.length-1].annotation=P.value;else if("nag"!==P.type&&"aa"!==P.type||0!==V||!R[R.length-1]){if("comment"===P.type&&0===V)R.length?(P.value.trim()&&(R[R.length-1].comment=P.value),P.commands&&(R[R.length-1].commands=P.commands,P.commands.clk&&(R[R.length-1].time=(j=P.commands.clk,$=void 0,10*(3600*($=j.split(":"))[0]+60*$[1]+1*$[2]))))):(R.initComment=String(P.value),P.commands&&(R.commands=P.commands));else if("variationStart"===P.type){if(V>0)++V;else if(!createVariation())return reset(),!1;R=M._history()}else if("variationEnd"===P.type)V>0&&--V,0===V&&(selectLine(R.parentId),R=M._history());else if("number"===P.type&&Ie===C.Bughouse){if(!(M=/b/i.test(P.value.slice(-1))?Me.siblingGame:Me))return!1;R=M._history()}}else R[R.length-1].additionalAnnotation||(R[R.length-1].additionalAnnotation=[]),-1===R[R.length-1].additionalAnnotation.indexOf(P.value)&&R[R.length-1].additionalAnnotation.push(P.value);return!0},header:function(i){return Array.isArray(i)?setHeader(i):"object"==typeof i?(Object.keys(i).forEach((function(s){setHeader([s,i[s]])})),Ve):Ve},turn:function(i){return 1!==i&&2!==i||(Ne=i),Ne},move:function playMove(i){var s,T,S,P,M,D,$,V,X,ee,ae,se,oe;if("string"==typeof i){switch(i[P=i.length-1]){case"+":case"#":i=i.substr(0,P)}for(X=ie.indexOf(i[0])>6?le[i[0]]:"O"===i[0]?Z:4,Ze&&(-1===i.indexOf("@")?ee=!0:(ee=!1,X<<=24)),generateMoves(X,ee),P=0;P<j;++P)if(i===(D=moveToSan(R[P],!0))){T=R[P];break}if(!T)return"--"===i?function makeNullMove(){var i,s={color:Ne,san:"--",epSquare:je},T={color:Ne,san:"--"};return Le&&(i=getCurrentHash(),s.hash=i,hashNum(i,_.zobristTurn),je!==U&&hashEP(ze,i,je+(1===Ne?16:-16),4|Ne)),je=U,Be++,1===(Ne=swapColor(Ne))&&++$e,Fe.push(s),T}():(i=Chess2.fixSanMove(i,ze,Ne))?playMove(i):null;$=T>>7&re,V=T>>te&re,S=T>>ne}else{if(i.drop){switch(i.drop){case"p":S=0;break;case"n":S=1;break;case"b":S=2;break;case"r":S=3;break;case"q":S=4;break;default:return null}X=1<<26+S}else{if(i.promotion)switch(i.promotion){case"q":S=4;break;case"n":S=1;break;case"r":S=3;break;case"b":S=2;break;default:return null}$=O[i.from],ee=!0,X=ze[$]&Y}for(V=O[i.to],s=((S?S<<ne:0)|V<<te)>>7|$,generateMoves(X,ee),P=0;P<j;++P)if(R[P]>>7===s){T=R[P];break}if(!T)return(i=Chess2.fixObjMove(i,ze,Ne))?playMove(i):null}return oe=T&Te.DROP_OR_PROMOTE?we[S]+Ne:ze[$],M=beautifyMove(T,D,!0),ae=inCheckAfterMove(oe,$,V,T),Ke(T,$,V,S),ae&&(Ie!==C.Chess&&isVariantWin()||0===generateMoves()?M.san+="#":M.san+="+"),(se=Fe[Fe.length-1]).san=M.san,M.piece&Q&&(se.promoted=!0),1===Ne&&++$e,M},undo:function(i){var s=Fe.pop();return s?(1===Ne&&--$e,s.move?(reverseMove(s),!!i||beautifyMove(s.move,s.san)):(je=s.epSquare,--Be,Ne=swapColor(Ne),!!i||{san:"--",color:s.color})):null},clear:function(i){clear(i)},put:function(i,s,_){var T,S=O[s],C=!1,P=ze[S],M=3&P,R=i.color;if(isNaN(S)||!i.type||!R||-1===ie.indexOf(i.type))return!1;if(ze[S]=le[i.type]|R|(i.promoted?Q:0),ze[S]&Z&&(Re[R]=S),P&&ze[Re[M]]&&ze[Re[M]]!==(Z|M)){for(T=0;T<120;++T)136&T&&(T+=8),ze[T]===(Z|M)&&(Re[M]=T,C=!0);C||(Re[M]=U)}return _||load(generateFen(),Ie,!0,!1),!0},get:get,remove:function(i,s){var _,T=ze[O[i]],S=get(i),C=3&T;if(ze[O[i]]=0,T&Z)for(Re[C]=U,De[C]=0,_=0;_<120;++_)if(136&_&&(_+=8),ze[_]===(Z|C)){Re[T.color]=_;break}return s||load(generateFen(),Ie,!0,!1),S},history:function(i,s){for(var _,T=[],S=Fe,C=S.length;;){if(-1==--C){if(S.id&&!s){C=S.atMoveNode,S=He[S.parentId];continue}break}i?((_=beautifyMove(S[C].move,S[C].san)).color=S[C].color,!C&&S.initComment&&(_.firstComment=S.initComment),void 0!==S[C].comment&&(_.comment=S[C].comment),void 0!==S[C].time&&(_.time=S[C].time),void 0!==S[C].annotation&&(_.annotation=S[C].annotation),void 0!==S[C].additionalAnnotation&&(_.additionalAnnotation=S[C].additionalAnnotation),void 0!==S[C].commands&&(_.commands=S[C].commands),void 0!==S[C].captured&&(_.captured=S[C].captured),void 0!==S[C].promoted&&(_.promoted=S[C].promoted),void 0!==S[C].lines&&(_.lines=S[C].lines),void 0!==S[C].bughouseOrder&&(_.bughouseOrder=S[C].bughouseOrder),ie.indexOf(S[C].san[0])>6?_.piece=le[S[C].san[0]]:"O"===S[C].san[0]?_.piece=Z:_.piece=4,_.piece|=_.color,T.unshift(_)):T.unshift(S[C].san)}return T},hashes:function(){for(var i=[],s=Fe,_=s.length;;){if(-1==--_){if(s.id){_=s.atMoveNode,s=He[s.parentId];continue}s.hash||getCurrentHash(),i.unshift(s.hash);break}i.unshift(s[_].hash)}return i},moveCount:function(){return Fe.length},startingMoveNumber:function(){return Ue},completeFen:completeFen,createVariation:createVariation,selectLine:selectLine,hash:function(){var i=getCurrentHash();return Ie!==C.Bughouse||Me.isDependent?i:[i,Me.siblingGame.hash()]},hashing:function(i){Le=i,Ie!==C.Bughouse||Me.isDependent||Me.siblingGame.hashing(Le)},hand:function(){if(Ze)return handToString(Me._hand[1],!0)+handToString(Me._hand[2])},checks:function(){if(Ie===C["3-check"])return[Ge[1],Ge[2]]},tokenizePgn:Ae,_hand:[],_history:function(i){return i&&(qe=(Fe=i).id),Fe},_lines:function(){return He},_hashPosition:hashPosition,_board:function(){return ze}},Ee&&load(Ee,Oe)||reset(),Me}return Chess2.fixSanMove=function(i,s,_){var T,S,C;if(/0|[?!+#]$|[18][QNRB]$|^P/.test(i))return i.replace(/[?!+#]+$/,"").replace(/0/g,"O").replace(/([18])([QNRB])$/,"$1=$2").replace(/^P/,"");if(S=i.indexOf("=")>0?-4:-2,T=i.substr(S,2),_=swapColor(_),s[O[T]]&_||/^[a-h]x?[a-h]/.test(i)){if(-1===i.indexOf("x"))return i.slice(0,S)+"x"+i.substr(S)}else if(i.indexOf("x")>-1)return i.replace("x","");return(C=i.match(/^([KQNRB]?)([a-h][1-8]?|[1-8])(x?[a-h][1-8])=?(.?)$/))?s[O[C[2]]]?{from:C[2],to:T,promotion:C[4].toLowerCase()}:C[1]+C[3]+C[4]:void 0},Chess2.fixObjMove=function(i,s,_){if(s[O[i.from]]===(Z|_)&&i.to&&i.from[1]===i.to[1]){if(i.from<i.to)return"O-O";if(i.from>i.to)return"O-O-O"}},Chess2.variants=P,Chess2}(),S=function(i){var s=["bench","d","eval","flip","isready","perft","ponderhit","stop","uci","ucinewgame"],T=[{cmd:"position",args:["fen","startpos","moves","continuation"]},{cmd:"go",args:["binc","btime","confidence","depth","infinite","mate","mindepth","mintime","maxdepth","maxtime","movestogo","movetime","ponder","searchmoves","shallow","winc","wtime"]}],S=["moves","searchmoves"],C=["ponder","infinite","startpos"],P=/Total Evaluation[\s\S]+\n$/i;function createWebWorker(i,s,_){var T=new Worker(i||"stockfish.js"),S={terminate:function terminate(){T.terminate()},postMessage:postMessage,addEventListener:function addEventListener(i,s){S["on"+i]=s}};function postMessage(i){T.postMessage(i)}return T.onmessage=function(i){S.onmessage(i)},T.onerror=function(C){if(s.pathToNonWasmEngine&&s.pathToNonWasmEngine!==i){C.preventDefault&&C.preventDefault();try{T.terminate()}catch(P){}return(T=createWebWorker(s.pathToNonWasmEngine,s,_)).onmessage=function(i){S.onmessage(i)},function requeue(i){i.length&&i.forEach((function(i){i.message="",postMessage(i.cmd)}))}(_._activeCommands()),!1}if(s.onError)return s.onError(C)},S}function parseSearchLine(i){var s,_,T,S,C,P={},O=["lowerbound","upperbound","score"],M=["depth","seldepth","time","nodes","multipv","cp","mate","currmovenumber","hashfull","nps","tbhits","sbhits","cpuload"],R=["depth","seldepth","time","nodes","pv","multipv","score","cp","mate","lowerbound","upperbound","currmove","currmovenumber","hashfull","nps","tbhits","sbhits","cpuload","string","refutation","currline","bestmove","ponder","baseTurn","pvSan","bestmoveSan","ponderSan","bmc"],D=["pv","pvSan","string","refutation","currline"];for(_=(s=i.split(" ")).length,T="info"===s[0]?1:0,P.mtype=s[0];T<_;T+=1)s[T]&&(!C||S&&R.indexOf(s[T])>-1?(C=s[T],O.indexOf(C)>-1?(P[C]=!0,C=null):S=D.indexOf(C)>-1||-1===R.indexOf(C)):(M.indexOf(C)>-1&&(s[T]=Number(s[T])),S?(void 0===P[C]&&(P[C]=[]),P[C].push(s[T])):(P[C]=s[T],C=null)));return"(none)"!==P.bestmove&&"0000"!==P.bestmove||(P.bestmove=void 0,P.bestmoveSan=void 0),"(none)"!==P.ponder&&"0000"!==P.ponder||(P.ponder=void 0,P.ponderSan=void 0),P}function getFirstWord(i){var s=i.indexOf(" ");return-1===s?i:i.substr(0,s)}return function loadEngine(O,M){var R,D,j={},$=function createWorker(i,s){var _=i.pathToNonWasmEngine&&"undefined"==typeof WebAssembly?i.pathToNonWasmEngine:i.enginePath||i.pathToEngineWorker;if(i.pathToWasmEngine&&(_+="#"+i.pathToWasmEngine),"undefined"!=typeof Worker)return createWebWorker(_,i,s)}(O,j),U=[],V=[];function onmessage(s){var _,T,S,C,O,M,R="string"==typeof s?s:s.data;if(j)if((null==(_=R.indexOf)?void 0:_.call(R,"\n"))>-1)for(O=R.split("\n"),M=0;M<O.length;M+=1)onmessage(O[M]);else if(i.log&&console.log("debug (onmessage): "+R),j.stream&&j.stream(R),U.length&&0!==R.indexOf("No such option")&&0!==R.indexOf("id ")&&0!==R.indexOf("Stockfish")&&0!==R.indexOf("info string variant")&&(S=function determineQueueNum(i,s){var _,T,S,C,P=getFirstWord(i);if("bench"!==s[0].cmd&&"perft"!==s[0].cmd)for(_="uciok"===P||"option"===P?"uci":"readyok"===P||"ready"===P?"isready":"json"===P?"fetch":"bestmove"===P||"info"===P?"go":"other",C=s.length,S=0;S<C;S+=1)if((T=getFirstWord(s[S].cmd))===_||"other"===_&&("d"===T||"eval"===T))return S;return 0}(R,U),C=U[S])){if(C.stream&&!C.discard&&C.stream(R),void 0===C.message?C.message="":""!==C.message&&(C.message+="\n"),C.message+=R,"uciok"===getFirstWord(R))T=!0;else if("readyok"===getFirstWord(R)||"ready"===getFirstWord(R))T=!0,j.ready=!0;else if(0!==R.indexOf("bestmove")&&"bestmove"!==getFirstWord(R)||"bench"===C.cmd)if("d"===C.cmd)0!==R.indexOf("Legal uci moves")&&0!==R.indexOf("Key is")||(C.done=!0,T=!0);else if("fetch json"===C.cmd)try{C.message=JSON.parse(C.message.replace(/^json /gm,"").replace(/\n/g,"")),T=!0}catch(D){}else"eval"===C.cmd?P.test(C.message)&&(T=!0):(0===R.indexOf("pawn key")||0===R.indexOf("Nodes/second")||0===R.indexOf("Unknown command"))&&(T=!0);else T=!0,C.message=R;T&&(U.splice(S,1),C.cb&&!C.discard?C.cb(C.message):C.ondiscard&&C.ondiscard())}}function bestMoveSearch(){var s,_,T,S,C,P=1,O=[],M=[],D=null,$=V[0].args,U=V[0].cb,Z=V[0].stream,Y=$.timeout,X=1;function convertpv(i){var s=[],_=M[i]||createSanPv(O[i]);return O[i].forEach((function oneach(i,T){s.push({moveSan:_[T],moveLan:i})})),s}function getpv(i,s,_,T){var S;for(S=O.length-1;S>=0;S-=1)if(O[S][0]===i)return convertpv(S);return _?[{moveSan:s,moveLan:i},{moveSan:T,moveLan:_}]:s?[{moveSan:s,moveLan:i}]:[]}function convertScore(i){0===i.mate?(i.mateIn=0,i.cp=-31800*X):(i.mateIn=Number(i.mate*X)||null,"number"!=typeof i.mateIn||isNaN(i.mateIn)||"number"==typeof i.cp?(i.cp*=X,9===Math.abs(i.cp)&&(i.cp=0),$.normalize&&i.depth<=14&&"number"==typeof loadEngine._previousCP&&1===i.multipv&&function normalize(i){var s=.03*Math.pow(32,i.depth/14);i.cp=loadEngine._previousCP+(i.cp-loadEngine._previousCP)*s}(i)):i.cp=31800*X*(i.mate/Math.abs(i.mate))),i.score=i.cp/100}function addBestMoveProps(C){var O;if(C.baseTurn=T,C.cp=s,C.score=s/100,C.mate=_,C.mateIn=D,C.depth=P,C.moveLan=C.bestmove,C.moveLan){if(C.move=i.uciToObj(C.moveLan)[0],!(O=S.move(C.move)))throw j.forceStop(),new Error("Bad moveLan in line: "+C.moveLan+" at "+S.fen()+"\ndata: "+JSON.stringify(C)+"\nargs: "+JSON.stringify($));if(C.moveSan=C.bestmoveSan=O.san,C.ponder&&("(none)"!==C.ponder||"0000"!==C.ponder)){if(!(O=S.move(i.uciToObj(C.ponder)[0])))throw j.forceStop(),new Error("Bad ponder in line: "+C.ponder+" at "+S.fen()+"\ndata: "+JSON.stringify(C)+"\nargs: "+JSON.stringify($));C.ponderSan=O.san,S.undo(!0)}S.undo(!0)}}function createSanPv(s){var _,T,C=s.length,P=[];for(_=0;_<C;++_){if(!(T=S.move(i.uciToObj(s[_])[0])))throw j.forceStop(),new Error("Bad pv in line: "+s[_]+" ("+_+") at "+S.fen()+"\npv: "+JSON.stringify(s)+"\nargs: "+JSON.stringify($));P.push(T.san)}for(_=0;_<C;++_)S.undo(!0);return P}function createTimeout(){Y&&(clearTimeout(R),R=setTimeout((function(){j.stop(),U&&(U(),U=void 0)}),Y))}$.timeout=void 0,V[0].started=!0,$.difficulty>=0&&$.difficulty<20?(j.setoption("Skill Level",$.difficulty),$.maximumError>=0&&$.maximumError<=4999&&j.setoption("Skill Level Maximum Error",$.maximumError),$.errorProbability>=1&&$.errorProbability<=128&&j.setoption("Skill Level Probability",$.errorProbability)):j.setoption("Skill Level",20),void 0!==$.contempt?j.setoption("Contempt",$.contempt):j.setoption("Contempt","0"),$.multiPv>1?j.setoption("MultiPV",$.multiPv):j.setoption("MultiPV",1),$.movetime||$.wtime&&$.btime||$.depth||($.btime=$.btime||72e3,$.wtime=$.wtime||72e3),!$.startpos&&$.fen||$.moves||$.variant?(S=i.createGame({fen:$.fen?(C=$.fen,(C+"").replace(/\[([qrbnp]*)\]/i,"/$1").replace(/([0-3])\+([0-3]) (\d+ \d+)/,(function(i,s,_,T){return T+" +"+(3-s)+"+"+(3-_)}))):"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",moves:$.moves,variant:$.variant,disableHashing:!0})).turn()===S.WHITE?T="w":(T="b",X=-1):(T="w",S=i.createGame({disableHashing:!0})),j.setVariant($.variant),j.position($),j.go($,(function returnBestMove(i){var _=parseSearchLine(i);if(addBestMoveProps(_),P>14&&s<5e3&&s>-5e3&&(loadEngine._previousCP=s),_.pv=getpv(_.moveLan,_.moveSan),1===_.pv.length&&_.ponder&&(_.pv=getpv(_.moveLan,_.moveSan,_.ponder,_.ponderSan)),U)try{U(_)}catch(T){console.error(T)}V.shift(),V.length>0&&bestMoveSearch(),clearTimeout(R)}),(function streamInfo(i){var S=parseSearchLine(i);S.score&&(S.baseTurn=T,convertScore(S),!S.multipv&&S.depth&&(S.multipv=1),1!==S.multipv&&0!==S.depth||(s=S.cp,_=S.mate,D=S.mateIn)),S.pv&&Z&&(S.pvSan=createSanPv(S.pv)),!S.pv||S.lowerbound||S.upperbound||(O.push(S.pv),Z&&M.push(S.pvSan)),S.depth>P?P=S.depth:"bestmove"===S.mtype&&addBestMoveProps(S),!Z||0===S.mateIn&&S.pv||Z(S),createTimeout()})),createTimeout()}function startUp(){j.isready((function onstart(){O.settings?j.uci((function onuci(){Object.keys(O.settings).forEach((function oneach(i){j.setoption(i,O.settings[i])})),M&&M(j)})):M&&M(j)}))}return j.send=function(s,_,T){var S;s=String(s).trim(),i.log&&console.log("debug (send): "+s),"ucinewgame"!==s&&"flip"!==s&&"stop"!==s&&"ponderhit"!==s&&0!==s.indexOf("position")&&0!==s.indexOf("setoption")?U[U.length]={cmd:s,cb:_,stream:T}:S=!0,$&&($.postMessage(s),S&&_&&setTimeout(_,0))},j._activeCommands=function(){return U},j.quit=function(){$&&$.terminate&&($.terminate(),$=null,j.ready=void 0),clearTimeout(R)},s.forEach((function oneach(i){j[i]=function makeSCmd(s,_){j.send(i,s,_)}})),T.forEach((function oneach(i){j[i.cmd]=function makeCCmd(s,_,T){var P=[i.cmd];D&&s.fen&&(s.fen=function convertStockfishVariantFen(i){return(i+"").replace(/^([^/]+)((?:\/[^/]+){7})\/([qrbnp]*)/i,"$1$2[$3]").replace(/( \d+ \d+) \+([0-3])\+([0-3])/,(function(i,s,_,T){return" "+(3-_)+"+"+(3-T)+s}))}(s.fen)),i.args.forEach((function oneach2(i){if(s[i]||0===s[i]){if(S.indexOf(i)>-1){if(!s[i]||!s[i].length)return;Array.isArray(s[i])&&(s[i]=s[i].join(" "))}P.push(i),-1===C.indexOf(i)&&P.push(s[i])}})),j.send(P.join(" "),_,T)}})),j.setoption=function(i,s){j.send("setoption name "+i+" value "+s)},j.setVariant=function(i){var s;i!==D&&(s=String(i).toLowerCase().replace(/ |-/g,""),i&&"chess"!==s?"chess960"===s?(j.setoption("UCI_Variant","chess"),j.setoption("UCI_Chess960","true")):("threecheck"===s&&(s="3check"),j.setoption("UCI_Variant",s),j.setoption("UCI_Chess960","false")):(s=void 0,j.setoption("UCI_Variant","chess"),j.setoption("UCI_Chess960","false")),D=s)},j.loadBook=function(i,s){_.loadBook(i,(function onload(_,T){j.book=T,j.pathToBook=i,j.bookLoaded=!0,_&&(console.error("Error loading opening book."),console.error(_),j.pathToBook=null,j.bookLoaded=!1),s()}))},j.getBestMove=function(s,_,T){var S;if((s=s||{}).fen=s.fen||s.baseFen,s.is960&&(s.variant="Chess960"),j.bookLoaded&&s.useBook&&(S=function getBookMove(s){var _,T,S;if(S=s.moves&&s.moves.length?i.getFenFromMoves(s.fen,s.moves,s.variant):s.fen,(_=j.book.pick({fen:S,type:void 0!==s.bookPick?s.bookPick:"random",chess960:"Chess960"===s.variant}))&&(i.getLegalMoves(S,s.variant).some((function(i){if(i.from+i.to+(i.promotion||"")===_)return T=i,!0})),T))return{moveSan:T.san,moveLan:_,move:{from:T.from,to:T.to,promotion:T.promotion||null},baseTurn:S.split(" ")[1],pv:[{moveSan:T.san,moveLan:_}],depth:null,score:null,mateIn:null,isBookMove:!0}}(s),S))return setTimeout((function(){S.mtype="bestmove",_(S)}),0);!function queueBestMoveSearch(i,s,_){V.push({args:i,cb:s,stream:_}),1===V.length&&bestMoveSearch()}(s,_,T)},j.stopAll=function(s){var _,T=U.length,S=0;function ondiscard(){0==(S-=1)&&s()}for(V=[],_=0;_<T;_+=1)i.log&&console.log("debug (stop_moves): "+_,getFirstWord(U[_].cmd)),"go"!==getFirstWord(U[_].cmd)||U[_].discard||(j.stop(),U[_].discard=!0,s&&(S+=1,U[_].ondiscard=ondiscard));s&&!S&&j.isready(s)},j.restartEngine=function(i){return j.stopAll(),j.quit(),U=[],V=[],j.bookLoaded&&!O.book&&((O=JSON.parse(JSON.stringify(O))).book=j.book),loadEngine(O,i)},j.forceStop=function(){j.stopAll((function(){}))},j.stopFast=function(i,s){var _;j.stopAll((function(){clearTimeout(_),i(j)})),_=setTimeout((function(){j.restartEngine(i)}),s||5e3)},"undefined"!=typeof Worker&&(function addListener(){$.addEventListener("message",onmessage,!1)}(),O.book&&(j.book=O.book,j.bookLoaded=!0,j.pathToBook=O.pathToBook),!j.book&&O.pathToBook?j.loadBook(O.pathToBook,startUp):setTimeout(startUp,0),j.getFenFromMoves=i.getFenFromMoves,j.getLegalMoves=i.getLegalMoves,j.getPositionInfo=i.getPositionInfo,j.isFenValid=i.isFenValid,j.ready=!1,j)}},function(){var i,s=T(),C="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",P=252,O={4:"p",5:"P",6:"p",8:"n",9:"N",10:"n",16:"b",17:"B",18:"b",32:"r",33:"R",34:"r",64:"q",65:"Q",66:"q",128:"k",129:"K",130:"k"},M="pnbrq",R=512,D="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!?{~}(^)[_]@#$,./&-*++=",j="qnrbkp";function decodeTCN(i){var s,_,T,S,C=i.length,P=[];for(s=0;s<C;s+=2)S={},_=D.indexOf(i[s]),(T=D.indexOf(i[s+1]))>63&&(S.promotion=j[Math.floor((T-64)/3)],T=_+(_<16?-8:8)+(T-1)%3-1),_>75?S.drop=j[_-79]:S.from=D[_%8]+(Math.floor(_/8)+1),S.to=D[T%8]+(Math.floor(T/8)+1),P.push(S);return P}function uciToObj(i){var s,_,T=i.split(" "),S=T.length,C=[];if(i)for(s=0;s<S;++s)4===(_=T[s]).length?"@"===_[1]?C.push({drop:_[0].toLowerCase(),to:_.substr(2,2)}):C.push({from:_.substr(0,2),to:_.substr(2,2)}):C.push({from:_.substr(0,2),to:_.substr(2,2),promotion:_[4]});return C}function isSameMove(i,s){return i.san===s.san||i.from==s.from&&i.to==s.to&&i.promotion==s.promotion&&i.drop==s.drop}function makePremove(i,_,S){var C,P,O,M,R,D=i.header().Variant,j=getPremoves(i.fen(),_,D);if(j){for(C=j.length-1;C>=0;--C)if(isSameMove(P=j[C],S)){O=!0;break}if(O)return P.drop?i.put({type:P.drop,color:_},P.to,!0):(M=i.remove(P.from,!0),P.flags===s.FLAGS.KSIDE_CASTLE?(R=i.remove("Chess960"===D?P.to:"h"+P.from[1],!0),i.put(M,"g"+P.from[1],!0),i.put(R,"f"+P.from[1],!0)):P.flags===s.FLAGS.QSIDE_CASTLE?(R=i.remove("Chess960"===D?P.to:"a"+P.from[1],!0),i.put(M,"c"+P.from[1],!0),i.put(R,"d"+P.from[1],!0)):(P.promotion&&(M.type=P.promotion,M.promoted=!0),i.put(M,P.to,!0))),P}if(S.from&&(S=T.fixObjMove(S,i._board(),_)))return makePremove(i,_,{san:S})}function getPieces(i,s){var _,T,S,C=s?{}:[],M=i._board();if(s)for(_=112;_>=0;++_)136&_&&(_-=24),(T=M[_])&&(C[S=D[7&_]+(8-(_>>4))]={type:O[T&P],color:3&T,promoted:0!=(T&R),square:S});else for(_=112;_>=0;++_)136&_&&(_-=24),(T=M[_])&&C.push({type:O[T&P],color:3&T,promoted:0!=(T&R),rank:8-(_>>4),file:1+(7&_)});return C}function makeMoves(i,s,_,T){var S,C,P,O,M,R,D,j,$,U;for(_=_||{},"string"==typeof s&&(s=s.trim().split(" ")),P=s.length,S=0;S<P;S+=1){if(M="b"===s[S].board||"B"===s[S].board?i.siblingGame:i,R="string"==typeof s[S]?uciToObj(s[S])[0]:s[S].san?s[S].san:s[S],!M.move(R)){if(!_.autoPromote){if(_.skipBadLines)break;return!1}if(!0===_.autoPromote?R.promotion="q":R.promotion=_.autoPromote,!M.move(R)){if(_.skipBadLines)break;return!1}}if(j=(D=M._history())[D.length-1],T&&($=parseInt(T[S],10)),("number"!=typeof $||isNaN($))&&($=parseInt(s[S].time,10)),"number"!=typeof $||isNaN($)||(j.time=$,$=void 0),s[S].firstComment&&(D.initComment=s[S].firstComment),s[S].comment&&(j.comment=s[S].comment),s[S].annotation&&(j.annotation=s[S].annotation),s[S].additionalAnnotation&&(j.additionalAnnotation=s[S].additionalAnnotation),s[S].commands&&(j.commands=s[S].commands),s[S].lines)for(O=s[S].lines.length,C=0;C<O;++C){if(U=i._history().id,i.createVariation(),!makeMoves(i,s[S].lines[C],_)&&!_.skipBadLines)return!1;i.selectLine(U)}}return!0}function extendChess(i){var s,_,S=-1,P=0;function fixContComment(s){var _=i._lines()[s.ids.line];return _.initComment&&(s.comment=(_.initComment+" "+(s.comment||"")).trim(),_.initComment=""),!0}i.extended||(i.extended=!0,s={header:i.header,load:i.load,loadPgn:i.loadPgn,createVariation:i.createVariation,undo:i.undo,pgn:i.pgn},i._move=i.move,i.premoves=[],i.undo=function(){return i.deletePosition(S,P)},i.isLegalMove=function(_){return!!i._move(_)&&s.undo(!0)},i.premove=function(s,_){var S,C=i.premoves.length,P=T();return C?P.load(i.premoves[C-1].fen,i.header().Variant):P.load(i.fen(),i.header().Variant),(S=makePremove(P,_,s))?(i.premoves.push({move:S,pieces:getPieces(P),fen:P.fen()}),S):null},i.getPieces=function(s){return getPieces(i,s)},i.origHistory=i.history,i.history=function(s,_){var T,S,C,P=[],O=i._history(),M=O.length,R=i._lines();for("boolean"==typeof s&&(s={verbose:s}),s=s||{},_&&(s.noParentLines=_),s.toCurrent&&(M=i.ids().move+1);;){if(-1==--M){if(O.id&&!s.noParentLines){M=O.atMoveNode,O=R[O.parentId];continue}break}if(s.verbose){for(S in T={},O[M])if(O[M][S]&&"object"==typeof O[M][S])for(C in T[S]=O[M][S].constructor===Array?[]:{},O[M][S])T[S][C]=O[M][S][C];else T[S]=O[M][S];P.unshift(T)}else P.unshift(O[M].san)}return P},i._getPos=function(_,T){var O,M;return"number"!=typeof _&&(_=S),"number"!=typeof T&&(T=P),O=(M=i._lines())[T],_>=0?O[_]:O.id?O.atMoveNode?M[O.parentId][O.atMoveNode-1]:i._getPos(O.atMoveNode-1,O.parentId):{fen:s.header().FEN||C,hash:O.hash,initial:!0}},i.move=function(s,_){var T,C,O,M,R=i._history();if(s&&("string"==typeof s||s.to&&(s.from||s.drop))){if(P===R.id&&S<R.length-1||_){if(i.moveForward(_,s))return!0;S<R.length-1&&(i.selectPosition(S+1),i.createVariation(),R=i._history())}i.siblingGame&&(O=i.isDependent?i.siblingGame.fen():i.fen()),(T=i._move(s))&&(normalizeMoveObj(T),P=R.id,C=R[S=R.length-1],M=i._getPos(S-1),i.siblingGame?(i.isDependent?C.fen=i.siblingGame.fen():C.fen=i.fen(),C.beforeFen=O):(C.fen=i.fen(),C.beforeFen=M.fen),M.initial?(C.moveNumber=0,C.previous=null):(C.moveNumber=M.moveNumber+1,C.previous=M.ids,M.isContinuation&&fixContComment(M)),P&&0===S&&i._lines()[R.parentId][R.atMoveNode].move===C.move&&(C.isContinuation=!0),C.flags=T.flags,C.to=T.to,C.from=T.from,C.drop=T.drop,C.capturedStr=T.captured,C.promotion=T.promotion,C.piece=T.piece,T.promoted&&(C.promoted=!0),T.capturedPromotedPawn&&(C.capturedPromotedPawn=!0),C.ids={move:S,line:P})}return T},i.header=i.headers=function(_){var T=s.header(_);return i.siblingGame&&extendChess(i.siblingGame),T},i.load=function(_,T,C,O){var M=s.load(_,T,C,O);return i.siblingGame&&extendChess(i.siblingGame),M&&!C&&(S=-1,P=0),M},i.removeEmptyLines=function(){var s,_,T=i._lines();for(s=T.length-1;s>0;--s)T[s].length||(T[s]=void 0,_=!0);_&&i.reorderLines()},i.loadPgn=function(_,T,C){var O=s.loadPgn(_,T,C),M=i._history();return i.removeEmptyLines(),S=M.length-1,P=M.id,O},i.ids=function(){return{move:S,line:P}},i.selectLine=function(s){i.selectPosition(null,s)},i.moveBackward=function(){var s;if(S<=1)if(0===P){if(-1===S)return!1;i.selectPosition(S-1)}else(s=i._getPos(S-1,P)).isContinuation?i.selectPosition(i._history().atMoveNode,i._history().parentId):s.initial?i.selectPosition(-1,0):i.selectPosition(s.ids.move,s.ids.line);else i.selectPosition(S-1);return!0},i.moveForward=function(s,_){var C,O,M,R,D,j,$=i._lines();if("string"==typeof _&&(_={san:_}),!(C=$[P][S+1])||_&&!isSameMove(_,C)){if(_&&C&&C.lines)for(D=C.lines.length,R=0;R<D;++R)if((M=$[C.lines[R]][0])&&isSameMove(_,M)){C=M,j=!0;break}if(!j&&s&&(O=$[P][S])&&O.lines)for(D=O.lines.length,R=0;R<D;++R)if((M=$[O.lines[R]][0])&&M.isContinuation&&(M=$[O.lines[R]][1])&&(!_||isSameMove(_,M))){C=M,j=!0;break}if(!j)return!!(_&&_.san&&(_=T.fixSanMove(_.san,i._board(),i.turn()))||_&&_.to&&_.from&&Math.abs(_.to.charCodeAt(0)-_.from.charCodeAt(0))>1&&(_=T.fixObjMove(_,i._board(),i.turn())))&&i.moveForward(s,_)}return i.selectPosition(C.ids.move,C.ids.line)},i.moveVariation=function(s,_){var T,S,C,P=i._lines(),O=P[s];if(O&&O.id)for(S=(T=P[O.parentId][O.atMoveNode].lines).length-1;S>=0;--S)if(T[S]===s&&T[C=S-(_?1:-1)])return T[S]=T[C],T[C]=s,i.reorderLines(),!0;return!1},i.promoteVariation=function(s,_){for(var T,C,O,M,R,D,j=i._lines(),$=j[s];$&&$[0]&&$.id&&(-1!==_||$.parentId);){for(T=j[O=$.parentId],M=$.atMoveNode,$[0].lines=T[M].lines.concat($[0].lines||[]),T[M].lines=void 0,D=T.length-M,C=T.splice(M,D),R=0;R<D;++R)C[R].ids.line=s,C[R].ids.move=R;for(C.id=s,C.parentId=O,C.atMoveNode=M,C.hash=$.hash,0===M?(C.initComment=T.initComment,T.initComment=$.initComment):$.initComment&&(T[M-1].comment=((T[M-1].comment||"")+" "+$.initComment).trim()),j[s]=C,D=$.length,R=0;R<D;++R)$[R].ids.line=O,$[R].ids.move=R+M,T.push($[R]);for(C[0].isContinuation=!!$[0].isContinuation&&fixContComment(C[0]),T[M].isContinuation=!M&&"number"==typeof T.parentId&&j[T.parentId][T.atMoveNode].move===T[0].move&&fixContComment(T[M]),D=T[M].lines.length,R=0;R<D;++R)j[T[M].lines[R]].atMoveNode=M,j[T[M].lines[R]][0]&&(j[T[M].lines[R]][0].isContinuation=j[T[M].lines[R]][0].move===T[M].move&&fixContComment(j[T[M].lines[R]][0]));if(P===s?(P=O,S+=M):P===O&&S>=M&&(P=s,S-=M),1===_)break;$=j[s=O]}return void 0!==T&&(i._history(j[P]),i.reorderLines(),!S&&j[P][0].isContinuation&&i.selectPosition(j[P].atMoveNode,j[P].parentId),!0)},i.reorderLines=function(s,T){var S,C,O,M,R,D,j,$,U,V,Z=i._lines();for(s?U=T.length-1:(s=0,T=[Z[0]],U=0,_=!1),O=(S=Z[s]).length,C=0;C<O;++C)if((M=S[C]).ids.line=U,M.lines)for(R=M.lines.length,D=0;D<R;++D)($=Z[j=M.lines[D]])?($.atMoveNode=C,V=T.length,M.lines[D]=V,$.parentId=U,_||j!==P||(_=!0,P=V),T.push($),i.reorderLines(j,T)):(1===M.lines.length?delete M.lines:M.lines.splice(D,1),--D,--R);s||i.saveLines(T,!0)},i.createVariation=function(){var _,T,C,O,M=i._history(),R=i._lines();return S===M.length-1?(_=s.createVariation(),M=i._history(),S=M.length-1,P=M.id,_):-1!==S&&(T=[],C=M[S],T.parentId=M.id,T.id=R.length,C.lines||(C.lines=[]),C.lines.push(T.id),O=i._getPos(S-1),T.hash=O.hash,T.atMoveNode=S,R.push(T),i.selectPosition(-1,T.id))},i.selectLineEnd=function(s){return"number"!=typeof s&&(s=P),(s!==P||S<i._history().length-1)&&i.selectPosition(null,s,!0)},i.selectLineStart=function(){var s,_;return P?(S>1||1===S&&!i._getPos(0).isContinuation?s=i._history():(_=i._getPos(-1),s=i._lines()[_.ids?_.ids.line:0]),i.selectPosition(s.id?s[1]&&s[0].isContinuation?1:0:-1,s.id)):-1!==S&&i.selectPosition(-1,0)},i.selectPosition=function(_,T,C){var O=i._lines(),M=i._history();if("number"==typeof T&&(T!==P||C)){if(T<0||T>=O.length)return!1;if(M=O[T],"number"!=typeof _)_=M.length-1;else if(_<-1||_>=M.length)return!1;P=T,i._history(M),C=!0}if("number"==typeof _&&(_!==S||C)){if(_<-1||_>=M.length)return!1;s.load(i._getPos(_).fen,s.header().Variant,!0,!0),S=_}return!0},i.resetToMainLine=function(){var s=i._lines();i.selectLineEnd(0),s.length>1&&(s.length=1,i.reorderLines())},i.saveLines=function(s,_){var T,S,C,P=i._lines(),O=s.length;for(s!==P&&(P.length=0),S=0;S<O;++S){if(T=s[S],S&&"number"!=typeof T.parentId)return!1;s!==P&&P.push(T),T.id=S}return _||(C=i.ids(),i.selectPosition(-1,0,!0),i.selectPosition(C.move,C.line)),!0},i.deletePosition=function(s,_){var T,C,O=i._lines();return!(!O[_]||!(O[_][s]||-1===s&&0!==_))&&(_&&(0===s||1===s&&O[_][0].isContinuation)&&(s=-1),P>0&&_!==P?(T=function descendsFromMove(i,s,_){for(var T,S=i[s];"number"==typeof(T=S.parentId);){if(T===_)return S.atMoveNode;S=i[T]}return!1}(O,P,_),C=!1!==T&&T>=s):_===P&&s<=S&&(C=!0),C&&(s>1?i.selectPosition(s-1,_):(i.selectPosition(O[_][0].isContinuation||1===s?1:0,_),i.moveBackward())),s>0?O[_].length=s:_?O[_]=null:O[0].length=0,i.reorderLines(),i.ids())},i.mark=function(s,_){var T=S<0?i._lines()[P]:i._lines()[P][S],C=s.type,O=1;s.color&&("arrow"===C?i.mark({key:s.color+s.key,type:"cal"},_):"square"===C&&i.mark({key:s.color+s.key,type:"csl"},_)),"cal"!==C&&"csl"!==C&&(C="c_"+C,O=0),T.commands&&T.commands[C]&&(T.commands[C]=T.commands[C].split(",").filter((function rm(i){return i.slice(O).split(";")[0]!==s.key.slice(O)})).join(","),T.commands[C]||delete T.commands[C]),_||(T.commands||(T.commands={}),T.commands[C]=(T.commands[C]?T.commands[C]+",":"")+s.key+(s.data?";"+s.data.join(";"):""))},i.markings=function(){var s,_,T,C,O,M,R,D,j={},$=S<0?i._lines()[P]:i._lines()[P][S],U={cal:"arrow",csl:"square"};for(_ in $.commands){if(T=$.commands[_],U[_])_=U[_],C=0;else{if("c_"!==_.substr(0,2))continue;_=_.slice(2),C=1}for(j[_]=j[_]||{},M=(O=T.split(",")).length,s=0;s<M;++s)C?(D=(R=O[s].split(";")).shift(),j[_][D]=j[_][D]||{type:_,key:D},j[_][D].data=R):(D=O[s].slice(1),j[_][D]=j[_][D]||{type:_,key:D},j[_][D].color=O[s][0])}return j},i.clearMarkings=function(){var s,_=S<0?i._lines()[P]:i._lines()[P][S];for(s in _.commands)/^c[sa]l$|^c_/.test(s)&&delete _.commands[s]},i.pgn=function(_){var T,S=i.ids();return i.selectLineEnd(0),T=s.pgn(_),i.selectPosition(S.move,S.line),T},i.loadMoves=function(s,_){var T,C,O;if(_=_||{},"string"==typeof s&&(s=decodeTCN(s)),s){for(_.atCurrent||i.selectPosition(-1,0),O=P,C=s.length,T=0;T<C;++T){if(!i.move(s[T],!0)&&(s[T].promotion=!0===_.autoPromote?"q":_.autoPromote,!i.move(s[T],!0)))return!1;P!==O&&"merge"!==_.method&&(i.promoteVariation(P,1),"promote"!==_.method&&(i._history()[S].lines=void 0,i.reorderLines()),O=P)}"merge"!==_.method&&"promote"!==_.method&&i.deletePosition(S+1,P)}return!0})}function createGame(i){var s,_;if((i=i||{}).game)return i.game;if(s=T(),i.analysis&&extendChess(s),i.disableHashing&&s.hashing(!1),i.pgn){if(!(s.loadPgn(i.pgn,i.index,i.options)||"detect"===i.variant&&T.variants.some((function(_){return i.options=i.options||{},i.options.variant=_,s.loadPgn(i.pgn,i.index,i.options)}))))return!1}else{if(i.headers&&(i.variant=i.headers.Variant||i.variant,i.fen||(i.fen=i.headers.FEN)),"detect"===i.variant&&i.fen&&(i.fen.indexOf("|")>-1?i.variant="Bughouse":9===i.fen.split("/").length?i.variant="Crazyhouse":i.fen.indexOf("+")>-1?i.variant="3-check":i.variant=void 0),(i.fen||i.variant)&&!s.load(i.fen||C,i.variant))return!1;i.headers&&"object"==typeof i.headers&&!Array.isArray(i.headers)&&s.header(i.headers)}if(i.tcn)if("object"==typeof i.tcn){if(!function playBughouseTCN(i,s,_){var T,S,C,P=[decodeTCN(s[0]),decodeTCN(s[1])],O=[0,0],M=[0,0],R=P[0].length+P[1].length,D=Math.max(0|_[0][0],0|_[0][1],0|_[1][0],0|_[1][1]),j=[0,0],$=[0,0];for(T=[[D+=600-D%600,D],[D,D]];R--;){if($[0]=j[0]+T[0][M[0]]-_[0][O[0]]||0,$[1]=j[1]+T[1][M[1]]-_[1][O[1]]||0,P[S=$[0]<=$[1]?0:1][O[S]]||(S^=1),(!(C=S?i.siblingGame:i).move(P[S][O[S]])||R&&C.inCheckmate()&&C.undo(!0))&&!(C=(S^=1)?i.siblingGame:i).move(P[S][O[S]]))return!1;C._history()[O[S]].time=_[S][O[S]],T[S][M[S]]=_[S][O[S]],j[S]=$[S],M[S]^=1,++O[S]}return!0}(s,i.tcn,i.timestamps||[[],[]]))return!1}else _=decodeTCN(i.tcn);else _=i.moves;return!(_&&!makeMoves(s,_,i,i.timestamps))&&s}function normalizeMoveObj(i){return i&&(i.piece&R&&(i.promoted=!0),i.piece=O[i.piece&P],i.captured&&(i.captured&R&&(i.capturedPromotedPawn=!0),i.captured=O[255&i.captured]),i.promotion&&(i.promotion=O[i.promotion&P]),void 0!==i.drop&&(i.drop=M[i.drop])),i}function normalizeHistory(i){var s,_,T,S,C,P,O,M=i.history(!0,!0);if(i.siblingGame){for(s=i.siblingGame.history(!0,!0),T=M.length+s.length,_=[],S=0;S<T;++S)!M.length||s.length&&s[0].bughouseOrder<M[0].bughouseOrder?(C=s.shift()).board="b":(C=M.shift()).board="a",_.push(C);M=_}for(T=M.length,S=0;S<T;++S)if((P=M[S]).fen||normalizeMoveObj(P),P.lines)for(O=P.lines.length-1;O>=0;--O)i.selectLine(P.lines[O]),P.lines[O]=normalizeHistory(i).moves;return{moves:M}}function getPremoves(i,_,S){var C,P,O,R,D,j,$,U,V=[];function pawnCapture(i){var T,S=D[0]+"x"+i;if(1===_&&7===C||2===_&&2===C)for(T=4;T>0;--T)V.push({color:_,to:i,flags:s.FLAGS.CAPTURE|s.FLAGS.PROMOTION,from:D,promotion:1<<T+2,piece:4,san:S+"="+M[T].toUpperCase()});else 1===C&&2===_||8===C&&1===_||V.push({color:_,to:i,flags:s.FLAGS.CAPTURE,from:D,piece:4,san:S})}if(1!==_&&2!==_||!s.load(i,S||"chess"))return null;for(i=s.fen(),(R=T()).clear(),S&&R.header({Variant:S}),s.turn(_),R.turn(_),C=1;C<9;++C)for(P=1;P<9;++P)D=String.fromCharCode(P+96)+C,(O=s.get(D))&&(s.remove(D,!0),O.color===_&&("p"===O.type?(P>1&&pawnCapture(String.fromCharCode(P-1+96)+(C+(1===_?1:-1))),P<8&&pawnCapture(String.fromCharCode(P+1+96)+(C+(1===_?1:-1)))):"k"===O.type&&($=D[0],U=C),R.put(O,D,!0),V=V.concat(R.moves({verbose:!0})),R.remove(D,!0)));return"-"!==(j=i.split(" ")[2])&&j.split("").forEach((function(i){(1===_&&i<"a"||2===_&&i>="a")&&("k"===(i=i.toLowerCase())?V.push({color:_,to:"g"+U,flags:s.FLAGS.KSIDE_CASTLE,from:"e"+U,piece:128,san:"O-O"}):"q"===i?V.push({color:_,to:"c"+U,flags:s.FLAGS.QSIDE_CASTLE,from:"e"+U,piece:128,san:"O-O-O"}):i>$?V.push({color:_,to:i+U,flags:s.FLAGS.KSIDE_CASTLE,from:$+U,piece:128,san:"O-O"}):V.push({color:_,to:i+U,flags:s.FLAGS.QSIDE_CASTLE,from:$+U,piece:128,san:"O-O-O"}))})),(V=V.concat(s.moves({verbose:!0}))).forEach((function(i){normalizeMoveObj(i)})),V}function getLegalMoves(i,_){var T,S,C,P;if("string"==typeof i){if(!(S=s).load(i,_))return null}else S=createGame(i);for(P=(T=S.moves({verbose:!0})).length,C=0;C<P;++C)normalizeMoveObj(T[C]);return T}function jce(s,_){return(i=i||S(jce))(s,_)}return jce.gameFingerprints=function gameFingerprints(i){var s,T,S,P,O,M,R,D,j,$=createGame(i),U=[""],V=[];if(!$)return!1;for(j=(D=$.header()).Variant||"",M=$.hashes(),s="function"==typeof $.origHistory?$.origHistory(!0):$.history(!0),O=M.length,T=[M[0][0],M[0][1]],V.push(_.to64BitHex(T)+j),M[0]=_.to64BitHex(M[0]),S=1;S<O;++S)T[0]=(T[0]^M[S][0]*(S+58465))>>>0,T[1]=(T[1]^M[S][1]*(S+984))>>>0,M[S]=_.to64BitHex(M[S]),V.push(_.to64BitHex(T)+j),normalizeMoveObj(s[P=S-1]),R=(s[P].from?s[P].from:s[P].drop.toUpperCase()+"@")+s[P].to+(s[P].promotion||""),P&&(R=U[P]+" "+R),U.push(R);return{startingFen:D.FEN||C,hashes:M,fingerprints:V,moves:U,variant:D.Variant}},jce.getFenFromMoves=function getFenFromMoves(i,_,T){return s.reset(),s.load(i,T),!(_&&!makeMoves(s,_))&&s.fen()},jce.getLegalMoves=getLegalMoves,jce.getPremoves=getPremoves,jce.getPositionInfo=function getPositionInfo(i,_,T){var S,C,P,O={gameOver:!1,check:!1,checkmate:!1,draw:!1,stalemate:!1,threefold:!1,insufficient:!1};if(Array.isArray(_)||(T=_,_=null),"boolean"==typeof T?(S=T,T={}):S=(T=T||{}).variant,"string"==typeof i){if(0!==(P=s).validateFen(i,S)||!P.load(i,S))return!1}else P=createGame(i);return!(_&&!makeMoves(P,_))&&(T.getLegalMoves?(C=getLegalMoves({game:P}),O.legalMoves=C):C=P.moves(),P.inCheck()?(O.check=!0,O.checkmate=0===C.length):O.stalemate=0===C.length,T.premove&&(T.check=!1,T.kings=!1),O.threefold=P.inThreefoldRepetition(),O.insufficient=P.insufficientMaterial(T.color),O.fiftyMoveRule=P.in50MoveRule(),O.draw=O.stalemate||O.threefold||O.insufficient||O.fiftyMoveRule||P.inDraw(),T.skipValidation||(O.isValid=P.isPositionValid(T)),S&&(O.variantWin=P.isVariantWin(),void 0===O.variantWin&&(O.variantWin=P.isBughouseWin())),O.gameOver=O.checkmate||O.draw||Boolean(O.variantWin),O)},jce.isFenValid=function isFenValid(i,_){return 0===s.validateFen(i,_)},jce.encodeTCN=function encodeTCN(i){var s,_,T,S,C,P,O,M,R,$,U,V="";for(Array.isArray(i)||(i=[i]),R=i.length,M=0;M<R;M+=1)$=(null==(s=i[M])?void 0:s.drop)?79+j.indexOf(i[M].drop):D.indexOf(null==(_=i[M])?void 0:_.from[0])+8*((null==(T=i[M])?void 0:T.from[1])-1),U=D.indexOf(null==(S=i[M])?void 0:S.to[0])+8*((null==(C=i[M])?void 0:C.to[1])-1),(null==(P=i[M])?void 0:P.promotion)&&(U=3*j.indexOf(null==(O=i[M])?void 0:O.promotion)+64+(U<$?9+U-$:U-$-7)),V+=D[$]+D[U];return V},jce.decodeTCN=decodeTCN,jce.uciToObj=uciToObj,jce.generatePgn=function generatePgn(i){var s;return(i=i||{}).disableHashing=!0,!!(s=createGame(i))&&s.pgn(i)},jce.pgnToFen=function pgnToFen(i,_){var T,S,C=[];if(s.reset(),!s.loadPgn(i))return!1;if(T=s.moveCount(),"number"==typeof _){for(_<0&&(_=T+_+1),S=T-1;S>=_&&S>=0;S-=1)s.undo();return s.fen()}for(S=0;S<=T;S+=1)C.unshift(s.fen()),s.undo();return C},jce.pgnToJson=function pgnToJson(i,_,T){var S,C=[],P=s;return"number"!=typeof _&&(T=_,_=void 0),S=P.tokenizePgn(i,T),_<0&&(_=S.length+_),!!S&&(T&&T.includeFen&&(P=createGame({analysis:!0})),S.forEach((function(i,s){var S,O;s===_||void 0===_?P.loadPgn([i],0,T)?(O=normalizeHistory(P),S=P.header(),C.push({headers:S,moves:O.moves})):C.push(!1):C.push(void 0)})),"number"==typeof _?C[_]:C)},jce.sanToObj=function sanToObj(i,_,T){return s.reset(),!!s.load(_,T)&&normalizeMoveObj(s.move(i))},jce.completeFen=s.completeFen,jce.shortenFen=function shortenFen(i,_){return s.completeFen(i).split(" ").slice(0,_||4).join(" ")},jce.createGame=createGame,jce.getPositionDetails=function getPositionDetails(i,s){var _,T,S,C;if((i=i||{}).disableHashing=!0,!(_=createGame(i)))return null;if(s)if(i.premove){if(!(S=makePremove(_,i.color,s)))return null}else{if(!(S=_.move(s)))return null;_.extended||normalizeMoveObj(S)}return C=_.fen(),i.premove&&(i.check=!1,i.kings=!1),i.skipValidation||_.isPositionValid(i)?(T=C.split(" "),{fen:C,pieces:getPieces(_),sideToMove:_.turn(),castling:T[2],epSquare:"-"===T[3]?null:T[3],halfMoves:+T[4],moveNumber:+T[5],move:S,hand:_.hand(),checks:_.checks()}):null},jce.predict=function predict(i,s){var _=Math.min(Math.max(.20773843*Math.atan(2.49085889*i/100-2.47841945*s/100)+.02262979*i/100-.02256839*s/100+.52239679,0),1),T=Math.min(Math.max(-.20720905*Math.atan(2.49626837*i/100-2.48220286*s/100)+-.02352551*i/100+.02172627*s/100+.49443923,0),1),S=Math.min(Math.max(Math.exp(.037043456*i/100+.178106427*s/100-8.069742932)+.004823544*Math.exp(-1.364136591*Math.pow(i/100-s/100,2))+-.001625539,0),1),C=_+T+S;return{w:_/C,b:T/C,d:S/C}},jce.FLAGS=s.FLAGS,jce.loadECO=function loadECO(i,s){_.loadBook(i,(function onload(i,T){if(!T||!T.json)return s(i||new Error("Invalid book"));s(i,(function queryECO(i){var s,S,C,P,O,M,R,D,j;if(i.hash)S="string"==typeof i.hash?[_.hex64ToDec(i.hash)]:[i.hash],P=1;else{if(!(s=createGame(i)))return!1;P=(S=s.hashes()).length}for(C=0;C<P;++C)if(O=T.json[_.to64BitHex(S[C])]){if(O.constructor===Array)if(M&&-1===O[0].m.indexOf(M.m)){for(D=O.length-1;D>=0;--D)if(!D||-1!==O[D].m.indexOf(M.m)){(j=O[D]).e=O[0].e,j.s=O[0].s,j.mate=O[0].mate,j.v=O[0].v,j.h=O[0].h,j.n=j.n||O[0].n,j.u=j.u||O[0].u,j.c=j.c||O[0].c;break}}else j=O[0];else j=O;(j.n||i.allowNameless)&&(M=j)}else i.mustEndInBook&&(M=void 0);if(M)return R={name:M.n},M.m&&(R.moves=M.m),void 0!==M.d&&(R.sdiff=M.d/100),M.c&&(R.code=M.c,R.url=M.u||M.n.replace(/[\u00e1-\u00e5]/g,"a").replace(/[\u0107\u010d]/g,"c").replace(/[\u00e9\u00e8\u0117\u0113]/g,"e").replace(/[\u00f3\u00f6\u00f8]/g,"o").replace(/[\u016f\u00fc]/g,"u").replace(/['+,]/g,"").replace(/[^a-z0-9.]+/gi,"-").replace(/(with-\d|St)\.+-?/,"$1-")),M.e?(R.eval=M.e,R.depth=M.h,R.score=M.e[0].cp/100,void 0!==M.e[0].mate&&(R.mate=M.e[0].mate)):(R.score=M.s/100,void 0!==M.mate&&(R.mate=M.mate)),M.v&&(R.bad=!0),R}),T.json)}))},jce}());s.Z=C},22766:function(i,s,_){"use strict";var T=_(10942),S=_(18721),C=_(3527),P=_.n(C);const O=(0,T.F)("consolidate_jce")?P():S.Z;s.Z=O},87934:function(i,s,_){"use strict";_.d(s,{l:function(){return D}});var T=_(22766),S=_(43037),C=_(17541),P=_(4751),O=_(62912),M=_(73863),R=_(91353);const D={createJce:i=>{const s=Object.assign({},i,{analysis:!0});return T.Z.createGame(s)||null},updateIdsFromJce:i=>i&&i.jce?(i.tree.selected=i.jce.ids(),i):null,getSelectedIds:i=>i.jce.ids(),getPositionInfo:i=>{const s=T.Z.getPositionInfo({game:i.jce},{skipValidation:!0,getLegalMoves:!0});return i.settings.premoves?s.legalPremoves=D.getLegalPremoves(i):s.legalPremoves=[],s},getPositionDetails:i=>Object.assign(T.Z.getPositionDetails({game:i.jce,kings:!1,skipValidation:!0}),{hand:D.getHand(i)}),addExtraCastlingMoves:i=>{i.setup.legalMoves.forEach((s=>{16!==s.flags&&32!==s.flags||("chess960"===i.variant?D.addCastlingMoves960(i,s):D.addCastlingMoves(i,s))}))},addCastlingMoves:(i,s)=>{const _=1===s.color?1:8;(16===s.flags?[8]:[1,2]).forEach((T=>{i.setup.legalMoves.push({color:s.color,flags:s.flags,piece:"k",from:s.from,san:16===s.flags?"O-O":"O-O-O",to:M.c.getSanFromFileRank({file:T,rank:_})})}))},addCastlingMoves960:(i,s)=>{const _=M.c.getFileRankFromSan(s.from).rank;let T=1,S=0;for(;S<2;){const C=M.c.getPieceAt(i,{file:T,rank:_});void 0!==C&&"r"===C.type&&S++,(1===S&&32===s.flags||2===S&&16===s.flags)&&i.setup.legalMoves.push({color:s.color,flags:s.flags,piece:"k",from:s.from,san:16===s.flags?"O-O":"O-O-O",to:M.c.getSanFromFileRank({file:T,rank:_})})}T++},getHeaders:i=>i.jce.header(),getFen:i=>i.jce.fen(),getPgn:(i,s)=>i.jce.pgn(s),getPremoves:i=>(0,R.FR)("consolidate_jce")?i.jce.premove.queue.map((s=>({move:s,pieces:i.jce.premove.getPieces()}))):i.jce.premoves,getHand:i=>i.jce.hand(),getChecks:i=>i.jce.checks(),getLegalPremoves:i=>(0,R.FR)("consolidate_jce")?i.jce.premove.moves():T.Z.getPremoves(i.jce.premoves&&i.jce.premoves.length>0?i.jce.premoves[i.jce.premoves.length-1].fen:i.jce.fen(),i.setup.playingAs,i.variant),load:(i,s)=>(i.jce.load(s)&&D.updateIdsFromJce(i),i),loadPgn:(i,s)=>(i.jce.loadPgn(s)&&D.updateIdsFromJce(i),i),loadPgnSoft(i,s){if(!i.jce.loadPgn(s)){const i=T.Z.createGame({variant:"detect",pgn:s});i&&(s=i.pgn())}return i.jce.loadPgn(s)||D.updateIdsFromJce(i),i},createVariation:i=>(i.jce.createVariation()&&(i.jce.reorderLines(),D.updateIdsFromJce(i)),i),getJCEMove:(i,s)=>{let _=s;return D.isValidMoveObject(s)?(_.san?_=T.Z.sanToObj(_.san,D.getFen(i),i.variant):_.tcn&&(_=T.Z.decodeTCN(_.tcn)[0]),_):null},move:(i,s,_=!0)=>{if(!s)return null;let T=!1;if(!1===_){const _=s.from?i.jce.get(s.from):null,S=s.to?i.jce.get(s.to):null;if(_&&S&&"k"===S.type)return null;i.jce.remove(s.to),i.jce.remove(s.from);const C=s.drop||s.put;T=i.jce.put(_||{type:C.toLowerCase(),color:C&&C.toUpperCase()===C?1:2},s.to),s.from&&_&&null===s.to&&(T=!0)}else s.drop&&(s.drop=s.drop.toLowerCase()),T=i.jce.move(s);return T&&D.updateIdsFromJce(i),T},selectLine:(i,s)=>{const _=S.x.getLine(i.tree.lines,s);return _&&(i.jce.selectLine(s),i.tree.selected={line:s,move:_.length-1}),i},selectNode:(i,s={line:0,move:0})=>(i.jce.selectPosition(s.move,s.line),i),updateHeaders:(i,s)=>i.jce.header(s),clear:i=>i.jce.clear(i.variant),isFileRankEqual:(i,s)=>i.file&&s.file&&i.rank&&s.rank&&i.file===s.file&&i.rank===s.rank,isValidMoveObject:i=>"string"==typeof i.from&&"string"==typeof i.to||"string"==typeof i.san||"string"==typeof i.tcn||!i.from&&"string"==typeof i.to&&"string"==typeof i.drop||null===i.to&&"string"==typeof i.from||!i.from&&"string"==typeof i.to&&"string"==typeof i.put,movesMatch:(i,s)=>!(i.from!==s.from||i.to!==s.to||i.promotion&&i.promotion!==s.promotion||i.drop&&i.drop!==s.drop),getMoveNumber:(i,s)=>1===i?Math.ceil(s/2+1):Math.floor(s/2+1),isUserTurn:i=>i.setup.playingAs===i.setup.sideToMove,getFens:P.b,getLastTcn:O.q,getSanMoves:C._}},9014:function(i,s,_){"use strict";_.d(s,{B:function(){return C}});var T=_(87934),S=_(91353);const C={premove:(i,s)=>{let _=!1;return i.settings.premoves&&!i.settings.analysis&&((0,S.FR)("consolidate_jce")?i.jce.premove.queue.length:i.jce.premoves.length)<8&&(_=(0,S.FR)("consolidate_jce")?i.jce.premove.move(s):i.jce.premove(s,i.setup.playingAs)),_},cancelPremoves:i=>(0,S.FR)("consolidate_jce")?!!i.jce.premove.queue.length&&(i.jce.premove.cancel(),!0):!!i.jce.premoves.length&&(i.jce.premoves.length=0,!0),consumePremove:i=>{if((0,S.FR)("consolidate_jce"))return i.jce.premove.consume(),!0;if(i.jce.premoves.length){const s=i.jce.premoves.shift();if(T.l.move(i,s.move)){const s=i.jce.premoves.map((i=>i));i.jce.premoves.length=0;for(let _=0;_<s.length;_+=1){const T=s[_];if(delete T.move.san,!C.premove(i,T.move))break}return!0}}return!1}}},4751:function(i,s,_){"use strict";_.d(s,{b:function(){return getFens}});const getFens=i=>{const s=[i.setup.fen];return(i.tree.lines||_(93189).Z.state.lines)[0].forEach((i=>{s.push(i.fen)})),s}},62912:function(i,s,_){"use strict";_.d(s,{q:function(){return getLastTcn}});var T=_(16974);const getLastTcn=i=>{const s=T.j.getTcn(i);return s.substr(s.length-2)}},17541:function(i,s,_){"use strict";_.d(s,{_:function(){return getSanMoves}});const getSanMoves=(i,s)=>{const T=[];return(i.tree.lines||_(93189).Z.state.lines)[0].some(((i,_)=>"number"==typeof s&&_>=s||(T.push(i.san),!1))),T}},52382:function(i,s,_){"use strict";_.d(s,{z:function(){return T},A:function(){return S}});const T={ADD_BLINKING_SQUARE:"ADD_BLINKING_SQUARE",CLEAR_ARROW:"CLEAR_ARROW",CLEAR_BLINKING_SQUARE:"CLEAR_BLINKING_SQUARE",CLEAR_EFFECT:"CLEAR_EFFECT",CLEAR_MARKED_SQUARE:"CLEAR_MARKED_SQUARE",INIT:"INIT",LOAD:"LOAD",MAKE_MOVE:"MAKE_MOVE",ILLEGAL_MOVE:"ILLEGAL_MOVE",JUMP_TO_POSITION:"JUMP_TO_POSITION",TREE_CHANGE:"TREE_CHANGE",TREE_AMENDED:"TREE_AMENDED",SETTINGS_CHANGE:"SETTINGS_CHANGE",PGN_HEADERS_UPDATED:"PGN_HEADERS_UPDATED",CANCEL_PREMOVES:"CANCEL_PREMOVES",PREMOVE:"PREMOVE",GUESS_THE_MOVE:"GUESS_THE_MOVE",CANCEL_GUESS_THE_MOVE:"CANCEL_GUESS_THE_MOVE",UPDATE_NODE:"UPDATE_NODE"},S={MAX_HISTORY_LIMIT:200,getInitialHistory:()=>[],add(i,s,_={}){if(i.length>S.MAX_HISTORY_LIMIT-1){const s=i.findIndex((i=>null!==i));i[s]=null}i.push({type:s,payload:_})},getLastItem:i=>i[i.length-1]}},16974:function(i,s,_){"use strict";_.d(s,{j:function(){return ze}});var T=_(28510),S=_(63143),C=_(72783),P=_(10094),O=_(37826),M=_(80718),R=_(73815),D=_(32112),j=_(24097),$=_(73387),U=_(2323),V=_(72194),Z=_(48881),Y=_(99926),X=_(84156),Q=_(9056),ee=_(34783),te=_(50754),ne=_(61596),re=_(80631),ie=_(8276),ae=_(2812),se=_(34919),oe=_(62081),le=_(85309),ce=_(66742),ue=_(69693),de=_(23077),he=_(63041),pe=_(8210),me=_(44310),fe=_(19823),ge=_(98041),ve=_(39989),be=_(40271),ye=_(61014),_e=_(17551),we=_(73530),ke=_(92635),Te=_(22509),Se=_(30502),Ce=_(60074),xe=_(24790),Ee=_(90891),Pe=_(23601),Ae=_(75055),Oe=_(77514),Me=_(23757);const ze={addBlinkingSquare:T.o,addVariant:S.s,canMoveBackward:C.R,canMoveForward:P.p,changeSettings:O.D,clearAnalysis:M.l,clearArrow:R.G,clearBlinkingSquare:D.J,clearBoard:j.Y,clearEffect:$.U,clearMarkedSquare:U.o,clearMarkings:V.q,clearNodes:Z.T,convertLanToFileRanks:Y.k,createGame:X.d,createVariation:Q.Y,deleteLine:ee.Y,deleteNode:te.I,deleteRemainingNodes:ne.M,getCurrentFullLine:re.I,getPgn:ie.G,getPgnHeaders:ae.J,getSelectedNode:se.P,getTcn:oe.W,isMoveLegal:pe.jz,loadFromFen:le.f,loadFromLan:ce.D,loadFromPgn:ue.t,loadFromSanMoves:de.e,loadFromTcn:he.C,makeMove:pe.Z6,makeOpponentMove:pe.Px,markArrow:me.c,markEffect:fe.o,markSquare:ge.e,mergeTcn:ve.u,moveBackward:be.S,moveForward:ye.c,moveToEnd:_e.A,moveToStart:we.E,moveVariation:ke.U,promoteVariation:Te.g,resetToMainLine:Se.o,selectLineEnd:Ce.p,selectLineStart:xe.T,selectNode:Ee.U,setPlayingAs:Pe.K,updateMarkings:Ae.S,updateNode:Oe.t,updatePgnHeaders:Me.t}},75185:function(i,s,_){"use strict";_.d(s,{Uy:function(){return normalizePgnAnnotation}});var T=_(26211),S=_(70020);const normalizePgnAnnotation=i=>(Object.keys(T.v).forEach((function(s){i=i.replace(new RegExp(`\\${s}\\b`,"gm"),(0,S.TW)(s))})),i)},70020:function(i,s,_){"use strict";_.d(s,{TW:function(){return normalizeAnnotation},lz:function(){return additionalAnnotationExists},JX:function(){return annotationExists},ie:function(){return isNagFormat},S1:function(){return displayNumber}});_(43037);var T=_(26211);_(18026);const normalizeAnnotation=i=>Object.prototype.hasOwnProperty.call(T.v,i)||Object.prototype.hasOwnProperty.call(T.f9,i)?isNagFormat(i)?T.v[i]:normalizeAnnotation(T.f9[i]):i||"",additionalAnnotationExists=(i,s)=>i.additionalAnnotation&&Array.isArray(i.additionalAnnotation)&&normalizeAnnotation(i.additionalAnnotation[0])===normalizeAnnotation(s),annotationExists=(i,s)=>normalizeAnnotation(i.annotation)===normalizeAnnotation(s),isNagFormat=i=>i&&"$"===i.charAt(0);function displayNumber(i,s){let _="";return(i=>Boolean(i.isWhite||i.isFirstNodeOnLine||i.previousHasComment||i.previousHasLines))(i)&&(_+=`${i.nodeMoveNumber+(s-1)}.`,(i=>Boolean(!i.isWhite&&(i.previousHasComment||i.previousHasLines||i.isFirstNodeOnLine)))(i)&&(_+=".."),_+="&nbsp;"),_}},72310:function(i,s,_){"use strict";_.d(s,{b:function(){return cleanCommentString}});const cleanCommentString=i=>{let s;return s=i.replace(/<\/?[^>]+(>|$)/g,""),s=s.replace(/&nbsp;/g," ")," "===s&&(s=""),s}},8204:function(i,s,_){"use strict";_.d(s,{Z:function(){return j}});var T=_(43037),S=_(87934),C=Object.defineProperty,P=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,__defNormalProp=(i,s,_)=>s in i?C(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,__spreadValues=(i,s)=>{for(var _ in s||(s={}))O.call(s,_)&&__defNormalProp(i,_,s[_]);if(P)for(var _ of P(s))M.call(s,_)&&__defNormalProp(i,_,s[_]);return i};let R={};const D={q:9,r:5,b:3,n:3,p:1,k:0},j={getInitialSettings:()=>({variations:!1,analysis:!1,mainLineIsImmutable:!1,rules:!0,premoves:!1,GTM:!1}),getInitialSetup:()=>({ranks:8,files:8}),getInitialTree:()=>({initialMarkings:{arrows:[],effects:[],squares:[]}}),getInitialMarkings:()=>({arrows:[],blinkingSquares:[],effects:[],squares:[]}),clearState:i=>(i.setup=j.getInitialSetup(),i),updateState:i=>{i.setup=Object.assign({},i.setup,S.l.getPositionInfo(i),S.l.getPositionDetails(i)),S.l.addExtraCastlingMoves(i),i.tree.lines=T.x.getLinesFromJce(i),i.tree.selected=i.jce.ids(),i.tree.selectedNode=T.x.getSelectedNode(i),i.setup.capturedPieces=j.getCapturedPieces(i.setup),i.setup.capturedScores=j.getCapturedScores(i.setup),i.setup.result=j.getResult(i),i.premoves=S.l.getPremoves(i),i.variant=S.l.getHeaders(i).Variant||i.variant,i.startingMoveNumber=i.setup.moveNumber;const s=T.x.getNode(i.tree.lines,S.l.getSelectedIds(i))||i.tree.initialMarkings;return s&&(i.markings.squares=s.squares?s.squares.map((i=>__spreadValues({},i))):[],i.markings.arrows=s.arrows?s.arrows.map((i=>__spreadValues({},i))):[],i.setup.effects?i.markings.effects=i.setup.effects:s.effects?i.markings.effects=s.effects.map((i=>__spreadValues({},i))):i.markings.effects=[]),R[i.id]=!0,i.sibling&&!R[i.sibling.id]&&(i.sibling=j.updateState(i.sibling)),R={},i},getCapturedPieces:i=>i.pieces.reduce(((i,s)=>{if("k"===s.type)return i;const _=s.promoted?"p":s.type;return i[s.color-1][_]-=1,i}),[{p:8,n:2,b:2,r:2,q:1},{p:8,n:2,b:2,r:2,q:1}]),getCapturedScores:i=>i.pieces.reduce(((i,s)=>(i[s.color-1]+=D[s.type],i)),[0,0]),getResult:i=>{const s=S.l.getHeaders(i).Result;return"*"!==s?s:i.setup.insufficient||i.setup.stalemate?"1/2-1/2":i.setup.gameOver&&!i.setup.draw?1===i.setup.sideToMove?"0-1":"1-0":"*"}}},74959:function(i,s,_){"use strict";var T=_(97032);const getValue=(i,s)=>T.Z.isString(s)&&T.Z.isObject(i)?i[s]:T.Z.isFunction(s)?s(i):void 0,compareValues=(i,s,_,T)=>{const S=getValue(i,_),C=getValue(s,_);return null==S?1:null==C?-1:S>C?"desc"===T?-1:1:S<C?"desc"===T?1:-1:0};s.Z={remove(i,s){const _=T.Z.isFunction(s)?i.findIndex(s):i.indexOf(s);-1!==_&&i.splice(_,1)},range(i,s){const _=[];for(let T=i;T<s;T++)_.push(T);return _},uniq:(i,s)=>T.Z.isFunction(s)?i.filter(((_,T)=>i.findIndex((i=>s(i)===s(_)))===T)):s?i.filter(((_,T)=>i.findIndex((i=>i[s]===_[s]))===T)):i.filter(((s,_)=>i.indexOf(s)===_)),sortBy(i,s,_){const S=T.Z.isArray(s)?s:[s],C=T.Z.isArray(_)?_:[_],P=i.slice(0);return P.sort(((i,s)=>{let _=0;for(let T=0;T<S.length&&0===_;T++)_=compareValues(i,s,S[T],C[T]);return _})),P}}},53502:function(i,s,_){"use strict";let T;_.d(s,{Z:function(){return P}}),T="undefined"!=typeof window?window:void 0!==_.g?_.g:"undefined"!=typeof self?self:{};var S=T;const C={};["setTimeout","setInterval","clearTimeout","clearInterval"].forEach((i=>{C[i]=S[i].bind(S)}));var P=C},97032:function(i,s){"use strict";function isNull(i){return null===i}function isUndefined(i){return void 0===i}function isObject(i){return!isNull(i)&&"object"==typeof i}s.Z={isString:i=>"string"==typeof i,isFunction:i=>"function"==typeof i,isNumber:i=>"number"==typeof i,isNil:i=>isNull(i)||isUndefined(i),isObject:isObject,isPlainObject:i=>!!isObject(i)&&(i.constructor&&"Object"===i.constructor.name),isArray:i=>Array.isArray(i),isError(i){if(!isObject(i))return!1;const s=Object.prototype.toString.call(i);return"[object Error]"===s||"[object DOMException]"===s},isUndefined:isUndefined}},62704:function(i,s){"use strict";s.Z={name:"BoardTabItem",props:{isActive:{type:Boolean,default:!1},label:{type:String,required:!0}}}},64688:function(i,s,_){"use strict";var T=_(86437),S=_(66447),C=_(84960);s.Z={name:"ShareLink",components:{IconFont:C.Z,V5Input:T.V5Input},props:{shareUrl:{type:String,required:!0}},data:()=>({showCopiedMessage:!1}),methods:{copyLink(){(0,S.o)(this.shareUrl),this.showCopiedMessage=!0,setTimeout((()=>{this.showCopiedMessage=!1}),1500)}}}},1252:function(i,s,_){"use strict";var T=_(28681);s.Z={name:"TabSelector",components:{TabItem:T.Z},props:{activeTab:{type:String,required:!0},tabs:{type:Array,required:!0}},emits:["tab-selected"],methods:{tabIsActive(i){return i===this.activeTab}}}},24137:function(i,s,_){"use strict";var T=_(86437),S=_(36577),C=_(44829),P=_(65528),O=_(43898),M=_(74200),R=_(48486),D=_(38096),j=_(90632),$=_(76855),U=_(93819),V=_(26208),Z=_(25332),Y=_(71122),X=_(14527),Q=_(28669),ee=_(7789),te=_(68033),ne=Object.defineProperty,re=Object.defineProperties,ie=Object.getOwnPropertyDescriptors,ae=Object.getOwnPropertySymbols,se=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable,__defNormalProp=(i,s,_)=>s in i?ne(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,__spreadValues=(i,s)=>{for(var _ in s||(s={}))se.call(s,_)&&__defNormalProp(i,_,s[_]);if(ae)for(var _ of ae(s))oe.call(s,_)&&__defNormalProp(i,_,s[_]);return i};s.Z={name:"ShareMenu",components:{Modal:T.Modal,OutsideClose:T.OutsideClose,ShareLink:$.Z,SocialShare:ee.Z,TabEmbed:V.Z,TabEvent:Z.Z,TabGif:Y.Z,TabImage:X.Z,TabPgn:Q.Z,TabSelector:U.Z},props:{analyzedPgn:{type:String},boardOptions:{type:Object,default:()=>({})},boardSettings:{type:Object,default:()=>({})},eventFilename:{type:String},eventUrl:{type:String},initialDiagramOptions:{type:Object,default:()=>({})},includedTabs:{type:Array,default:()=>O.pe},excludedTabs:{type:Array,default:()=>[]},imageSize:{type:Object},imageUrl:{type:String,required:!1},isLoggedIn:{type:Boolean,default:!1},initialActiveTab:{type:String,default:O.eA.PGN.key},hasTimestamps:{type:Boolean,default:!1},variant:{type:String,default:""},tcn:{type:String},fen:{type:String},pgn:{type:String},pgnHeaders:{type:Object},shareUrl:{type:String},tacticsId:{type:Number}},emits:["hide","mounted"],data(){return{activeTab:this.initialActiveTab,animatedGifUrl:null,diagramEditor:{boardColors:null,coordinates:null,currentBoardStyle:null,currentPieceStyle:null,diagramId:null,diagramImage:null,isMultiGame:!1,isPuzzle:null,numberOfGames:1,pieceStyles:null},savedEmbedProps:{currentBoardStyle:"",currentPieceStyle:"",pgn:""},isLoadingGif:!1}},computed:{diagramOptions(){return{boardOptions:(i=__spreadValues({},this.boardOptions),s={boardStyle:this.diagramEditor.currentBoardStyle,coordinates:this.diagramEditor.coordinates,pieceStyle:this.diagramEditor.currentPieceStyle},re(i,ie(s))),diagramId:this.diagramEditor.diagramId,hasMoves:Boolean(this.tcn.length),isPuzzle:this.diagramEditor.isPuzzle,nodeLimit:this.initialDiagramOptions.nodeLimit||{}};var i,s},displayableTabs(){let i=this.includedTabs;return(0,D.jl)()||(i=i.filter((i=>i!==j.z.Embed))),i.map((i=>O.eA[i.toUpperCase()])).filter((i=>!this.excludedTabs.includes(i.key)&&i.isVisible({showGif:this.showGif})))},gamePgn(){return this.initialDiagramOptions&&this.initialDiagramOptions.games&&this.diagramEditor.isMultiGame?this.initialDiagramOptions.games.map((({setup:i})=>i.pgnBody)).join(""):this.pgn},generatedShareUrl(){return this.shareUrl||(0,C.O)(this.tacticsId)},isUpdatedDiagram(){return!["coordinates","currentPieceStyle","currentBoardStyle","isPuzzle","pgn"].every((i=>this.diagramEditor[i]===this.savedEmbedProps[i]))},needsDiagramUpdate(){return this.activeTab===O.eA.EMBED.key&&this.isUpdatedDiagram},normalizedFen(){return(0,P.H)(this.fen)},showGif(){return this.isLoggedIn&&this.tcn.length>1&&["chess","chess960"].includes(this.variant.toLowerCase())}},watch:{boardSettings:"buildInitialDiagram","diagramEditor.coordinates":"postDiagram","diagramEditor.currentBoardStyle":"postDiagram","diagramEditor.currentPieceStyle":"postDiagram","diagramEditor.isPuzzle":"postDiagram","diagramEditor.isMultiGame":"postDiagram"},created(){this.getAnimatedGifUrl(),this.buildInitialDiagram()},mounted(){this.$emit("mounted",this.show)},methods:{buildInitialDiagram(){const{boardColors:i=[],pieceStyles:s=[]}=this.boardSettings||{};this.diagramEditor.boardColors=i,this.diagramEditor.coordinates=this.boardOptions.coordinates,this.diagramEditor.currentBoardStyle=this.boardOptions.boardStyle,this.diagramEditor.currentPieceStyle=(0,M.FM)(this.boardOptions.pieceStyle),this.diagramEditor.isPuzzle=this.initialDiagramOptions.isPuzzle,this.diagramEditor.isMultiGame=this.initialDiagramOptions.games&&this.initialDiagramOptions.games.length>1,this.diagramEditor.numberOfGames=this.initialDiagramOptions.games?this.initialDiagramOptions.games.length:1,this.diagramEditor.pieceStyles=(0,M.$O)(s)},getAnimatedGifUrl(){var i;if(this.showGif&&!this.animatedGifUrl&&this.activeTab===O.eA.GIF.key){this.isLoadingGif=!0;const s={tcn:this.tcn,flip:this.boardOptions.flipBoard,isChess960:"chess960"===this.variant.toLowerCase(),initialPosition:(null==(i=this.initialDiagramOptions)?void 0:i.initialPosition)||this.pgnHeaders.FEN||null};(0,S.t)(s).then((i=>{this.animatedGifUrl=i,this.isLoadingGif=!1}))}},getTabComponent:i=>`tab-${i}`,getDiagramInfo(){const i=(0,M.jI)(this.diagramOptions),s=(0,M.U7)(this.gamePgn,i),_=this.diagramEditor.diagramId;return(0,R.Ck)(_,s).then((i=>i.data)).catch(te.Z)},postDiagram(){if(!this.needsDiagramUpdate)return;const{currentBoardStyle:i,currentPieceStyle:s}=this.diagramEditor;this.getDiagramInfo().then((_=>{_&&_>0&&(this.diagramEditor.diagramId=_,this.diagramEditor.diagramImage=(0,M.ON)(_)),this.savedEmbedProps={pgn:this.gamePgn,currentBoardStyle:i,currentPieceStyle:s}}))},hide(){this.$refs.modalContainer&&this.$refs.modalContainer.hide(),this.animatedGifUrl=null},selectTab(i){this.activeTab=i,this.postDiagram(),this.getAnimatedGifUrl()},show(){this.fen&&this.pgn&&this.$refs.modalContainer.show()},updateDiagramOption({key:i,val:s}){this.diagramEditor[i]=s}}}},67258:function(i,s,_){"use strict";var T=_(86437);s.Z={name:"DownloadButton",components:{V5Button:T.V5Button},props:{href:{type:String,default:""},download:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["download"],computed:{emitsClick(){return this.href?null:"click"}},methods:{onClick(){return this.$emit("download")}}}},11412:function(i,s,_){"use strict";var T=_(86437),S=_(88146);s.Z={name:"TabEmbed",components:{TinyMce:S.Z,V5Input:T.V5Input,V5Select:T.V5Select},props:{diagramOptions:{type:Object,required:!0},loading:{default:!0,type:Boolean}},emits:["update-diagram-option"],data:()=>({editorOptions:Object.freeze({height:210,resize:!1,toolbar:!1,toolbar1:!1})}),computed:{controls(){return[{action:i=>this.$emit("update-diagram-option",{key:"currentBoardStyle",val:i}),id:"board",label:this.$trans("Board"),options:this.diagramOptions.boardColors,value:this.diagramOptions.currentBoardStyle},{action:i=>this.$emit("update-diagram-option",{key:"currentPieceStyle",val:i}),id:"pieces",label:this.$trans("Pieces"),options:this.diagramOptions.pieceStyles,value:this.diagramOptions.currentPieceStyle}]},diagramCode(){return`[gid=${this.diagramOptions.diagramId}]`},diagramEmbed(){const{host:i}=window.location,s=`//${i}/emboard?id=${this.diagramOptions.diagramId}`,_=`<script>window.addEventListener("message",e=>{e['data']&&"${this.diagramOptions.diagramId}"===e['data']['id']&&document.getElementById(\`\${e['data']['id']}\`)&&(document.getElementById(\`\${e['data']['id']}\`).style.height=\`\${e['data']['frameHeight']+30}px\`)});<\/script>`;return`<iframe id="${this.diagramOptions.diagramId}" allowtransparency="true" frameborder="0" style="width:100%;border:none;" src="${s}"></iframe>${_}`},toggles(){return[{action:i=>this.$emit("update-diagram-option",{key:"coordinates",val:i.target.checked}),checked:Boolean(this.diagramOptions.coordinates),key:"coordinates",label:this.$trans("Coordinates"),show:!0},{action:i=>this.$emit("update-diagram-option",{key:"isPuzzle",val:i.target.checked}),checked:this.diagramOptions.isPuzzle,key:"puzzle",label:this.$trans("Puzzle"),show:!0},{action:i=>this.$emit("update-diagram-option",{key:"isMultiGame",val:i.target.checked}),checked:this.diagramOptions.isMultiGame,key:"isMultiGame",label:this.$trans("Multi PGN viewer"),show:this.diagramOptions.numberOfGames>1}]}}}},73078:function(i,s,_){"use strict";var T=_(86437),S=_(36222),C=_(82402),P=_(38075);s.Z={name:"TabEvent",components:{DownloadButton:S.Z,V5Input:T.V5Input},props:{eventFilename:{type:String},eventUrl:{type:String}},methods:{downloadEvent(){this.eventUrl&&P.Z.get(this.eventUrl).then((i=>{this.download(i.data,this.eventFilename)})).catch((i=>{this.download(i,this.eventFilename)}))},download(i,s){(0,C.K)(i,s)}}}},16823:function(i,s,_){"use strict";var T=_(43898),S=_(93162),C=_(36222),P=_(87879);s.Z={name:"TabGif",components:{LoaderThreeBounce:P.Z,DownloadButton:C.Z},props:{gifUrl:{type:String,default:null},isLoadingGif:{type:Boolean,default:!1}},computed:{gifPageLinkText:()=>T._G.gifPageLinkText},methods:{download(){(0,S.saveAs)(this.gifUrl,"board.gif")}}}},49253:function(i,s,_){"use strict";var T=_(42805),S=_(36222);s.Z={name:"TabImage",components:{DownloadButton:S.Z},props:{boardOptions:{type:Object,default:()=>({})},fen:{type:String,required:!0},imageSize:{type:Object,default:()=>({width:248,height:248})},imageUrl:{type:String,required:!1}},data(){const i=(0,T.jw)();return{boardStyle:this.boardOptions.boardStyle||i.boardStyle,flipped:this.boardOptions.flipBoard||i.flipped,pieceStyle:this.boardOptions.pieceStyle||i.pieceStyle}},computed:{dynamicBoardUrl(){const i=this.flipped?"&flip=true":"",s=`/dynboard?fen=${this.fen}&board=${this.boardStyle}&piece=${this.pieceStyle}&size=3${i}`;return this.imageUrl||s}}}},24844:function(i,s,_){"use strict";var T=_(42805),S=_(86437),C=_(71095),P=_(72310),O=_(36222),M=_(55622),R=_(82402),D=_(2101);s.Z={name:"TabPgn",directives:{tooltip:M.Z},components:{DownloadButton:O.Z,V5Input:S.V5Input,V5Textarea:S.V5Textarea},props:{analyzedPgn:{type:String},fen:{type:String,required:!0},hasTimestamps:{type:Boolean},pgn:{type:String,required:!0},pgnHeaders:{type:Object,default:()=>({})}},setup:()=>({checkboxModel:D._$,checkboxUi:D.kN,setCheckboxModel:D.Ux,setCheckboxUi:D.sY}),computed:{displayedPgn(){const i=this.analyzedPgn&&this.checkboxModel.isAnalyzedPgnEnabled?this.analyzedPgn:this.pgn;return"function"==typeof T.ZD?(0,T.ZD)(i):i},filename(){return(0,C.I)(this.pgnHeaders)},sanitizedPgn(){return(0,P.b)(this.pgn)},hasTimestampsInUserPgn(){return this.hasTimestamps&&!this.checkboxModel.isAnalyzedPgnEnabled}},mounted(){this.showAnalyzedPgnCheckbox(this.analyzedPgn)},methods:{download(){(0,R.K)(this.displayedPgn,this.filename)},onAnalyzedPgnEnabledChange(i){this.setCheckboxModel({isAnalyzedPgnEnabled:i})},onCommentsEnabledChange(i){this.setCheckboxModel({isCommentsEnabled:i.target.checked})},onHighlightsEnabledChange(i){this.setCheckboxModel({isHighlightsEnabled:i.target.checked})},onTimestampsEnabledChange(i){this.setCheckboxModel({isTimestampsEnabled:i.target.checked})},showAnalyzedPgnCheckbox(i){this.setCheckboxUi({isAnalyzedPgnCheckboxVisible:Boolean(i)})}},wach:{analyzedPgn:"showAnalyzedPgnCheckbox"}}},53792:function(i,s,_){"use strict";var T=_(81086),S=_(17431),C=_(94246),P=_(32793),O=_(19801);s.Z={name:"SocialShare",props:{url:{type:String,required:!1},userId:{type:String,required:!1},username:{type:String,required:!1}},data:()=>({isExpanded:!1,translations:S.Iz,share:S.BN,web:S.xw}),methods:{bookmarkPage:P.sJ,printWindow:P.kY,sendInvitation:C.X,shareWindow(i){"facebook"!==i&&"twitter"!==i||(0,T.Yw)(i),"function"==typeof S.BN[i]&&(0,O.x)(S.BN[i](this.url||window.location.href))},toggleExpanded(){this.isExpanded=!this.isExpanded}}}},4593:function(i,s,_){"use strict";_.d(s,{Z:function(){return O}});var T=_(86673);let S=null;var C=new class VisibilityObserver{constructor(){return null==S&&(S=this,this.observer=new IntersectionObserver((i=>{i.forEach((i=>{i.intersectionRatio>0&&(T.Z.emit("visibility-observer-change",i.target),this.observer.unobserve(i.target))}))}),{rootMargin:"200px 0px",threshold:.01})),S}observe(i){this.observer.observe(i)}unobserve(i){this.observer.unobserve(i)}},P=_(97203);const cacheBinding=(i,s)=>{i.dataset.chessSrc=s.value.src,i.dataset.chessSrcset=s.value.srcset},setAttributes=i=>{const s=i.dataset.chessSrc,_="false"!==i.dataset.chessSrcset?`${(0,P.q)(s)} 2x`:void 0;s&&i.setAttribute("src",s),_&&i.setAttribute("srcset",_)};var O={bind:(i,s)=>{cacheBinding(i,s),T.Z.on("visibility-observer-change",(s=>{s===i&&(setAttributes(i),i.dataset.visible=!0,C.unobserve(i))})),C.observe(i)},componentUpdated(i,s){cacheBinding(i,s),void 0!==i.dataset.visible&&setAttributes(i)}}},18165:function(i,s,_){"use strict";var T=_(7597),S=_(45236),C=_(91353),P=_(17493);s.Z=class{constructor(i=null){i&&(this.editor=i)}getEditor(){return!this.editor&&window.tinymce&&(this.editor=window.tinymce),this.editor?Promise.resolve(this.editor):(0,P.i)().then((()=>(this.editor=window.tinymce,this.editor)))}init(i){const s=(0,S.KZ)()?T._G.DARK_MODE:"",_=Object.assign(i,{body_class:s});return this.getEditor().then((i=>i.init(_)))}execCommand(...i){this.getEditor().then((s=>s.activeEditor.execCommand(...i)))}fire(i){this.getEditor().then((s=>s.activeEditor.fire(i)))}getContent(){if(!this.editor)throw new Error("TinyMCE not initialized");return this.editor.activeEditor.getContent()}getParams(){return this.getEditor().then((i=>{if(i.activeEditor)return(0,C.FR)("tinymce_editor_beta")?window.top.tinymceDialogParameters:i.activeEditor.windowManager.getParams()}))}insertContent(i){this.getEditor().then((s=>s.activeEditor.insertContent(i)))}setContent(i){this.getEditor().then((s=>s.activeEditor.setContent(i)))}destroy(){this.editor&&this.editor.activeEditor.destroy()}closePopup(){this.getEditor().then((i=>i.activeEditor.windowManager.close(window)))}openPopup(){this.getEditor().then((i=>i.activeEditor.windowManager.open()))}}},68033:function(i,s,_){"use strict";var T=_(49790),S=_(26670),C=_(14164);s.Z=i=>{const s=(0,C.i)(i);return s&&(0,S.el)({type:T.V5.error,message:s}),Promise.reject(i)}},98576:function(i,s,_){"use strict";_.d(s,{G:function(){return KeyBindings}});class KeyBindings{constructor(){this.listener=this.handleKeyBindingEvent.bind(this)}handleKeyBindingEvent(i){if(this.keys[i.key]){if(this.excludeInputs){const i=document.activeElement;if(!i||i.isContentEditable||["INPUT","TEXTAREA"].includes(i.tagName))return}this.keys[i.key](i),this.once&&this.unregister()}}register({event:i="keydown",excludeInputs:s=!1,keys:_,once:T=!1,target:S=window}){this.event=i,this.once=T,this.keys=_,this.target=S,this.excludeInputs=s,this.target.addEventListener(this.event,this.listener)}unregister(){var i;null==(i=this.target)||i.removeEventListener(this.event,this.listener)}}s.Z=new KeyBindings},69947:function(i,s){"use strict";s.Z={props:{darkMode:{type:Boolean,default:!1},lightMode:{type:Boolean,default:!1}},computed:{themeClasses(){return{"light-mode":this.lightMode,"dark-mode":this.darkMode}}}}},84606:function(i,s){var _,T,S,C;C=function(){"use strict";var i=Object.assign||function(i){for(var s=1;s<arguments.length;s++){var _=arguments[s];for(var T in _)Object.prototype.hasOwnProperty.call(_,T)&&(i[T]=_[T])}return i},s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_=function(){function defineProperties(i,s){for(var _=0;_<s.length;_++){var T=s[_];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(i,T.key,T)}}return function(i,s,_){return s&&defineProperties(i.prototype,s),_&&defineProperties(i,_),i}}();function _classCallCheck(i,s){if(!(i instanceof s))throw new TypeError("Cannot call a class as a function")}var T=function(){function Router2(i,s){_classCallCheck(this,Router2),this.context_=i||{base_url:"",prefix:"",host:"",port:"",scheme:"",locale:""},this.setRoutes(s||{})}return _(Router2,[{key:"setRoutingData",value:function setRoutingData(i){this.setBaseUrl(i.base_url),this.setRoutes(i.routes),"prefix"in i&&this.setPrefix(i.prefix),"port"in i&&this.setPort(i.port),"locale"in i&&this.setLocale(i.locale),this.setHost(i.host),this.setScheme(i.scheme)}},{key:"setRoutes",value:function setRoutes(i){this.routes_=Object.freeze(i)}},{key:"getRoutes",value:function getRoutes(){return this.routes_}},{key:"setBaseUrl",value:function setBaseUrl(i){this.context_.base_url=i}},{key:"getBaseUrl",value:function getBaseUrl(){return this.context_.base_url}},{key:"setPrefix",value:function setPrefix(i){this.context_.prefix=i}},{key:"setScheme",value:function setScheme(i){this.context_.scheme=i}},{key:"getScheme",value:function getScheme(){return this.context_.scheme}},{key:"setHost",value:function setHost(i){this.context_.host=i}},{key:"getHost",value:function getHost(){return this.context_.host}},{key:"setPort",value:function setPort(i){this.context_.port=i}},{key:"getPort",value:function getPort(){return this.context_.port}},{key:"setLocale",value:function setLocale(i){this.context_.locale=i}},{key:"getLocale",value:function getLocale(){return this.context_.locale}},{key:"buildQueryParams",value:function buildQueryParams(i,_,T){var S=this,C=void 0,P=new RegExp(/\[\]$/);if(_ instanceof Array)_.forEach((function(_,C){P.test(i)?T(i,_):S.buildQueryParams(i+"["+("object"===(void 0===_?"undefined":s(_))?C:"")+"]",_,T)}));else if("object"===(void 0===_?"undefined":s(_)))for(C in _)this.buildQueryParams(i+"["+C+"]",_[C],T);else T(i,_)}},{key:"getRoute",value:function getRoute(i){var s=[this.context_.prefix+i,i+"."+this.context_.locale,this.context_.prefix+i+"."+this.context_.locale,i];for(var _ in s)if(s[_]in this.routes_)return this.routes_[s[_]];throw new Error('The route "'+i+'" does not exist.')}},{key:"generate",value:function generate(s,_){var T=arguments.length>2&&void 0!==arguments[2]&&arguments[2],S=this.getRoute(s),C=_||{},P=i({},C),O="",M=!0,R="",D=void 0===this.getPort()||null===this.getPort()?"":this.getPort();if(S.tokens.forEach((function(i){if("text"===i[0])return O=Router2.encodePathComponent(i[1])+O,void(M=!1);if("variable"!==i[0])throw new Error('The token type "'+i[0]+'" is not supported.');var _=S.defaults&&i[3]in S.defaults;if(!1===M||!_||i[3]in C&&C[i[3]]!=S.defaults[i[3]]){var T=void 0;if(i[3]in C)T=C[i[3]],delete P[i[3]];else{if(!_){if(M)return;throw new Error('The route "'+s+'" requires the parameter "'+i[3]+'".')}T=S.defaults[i[3]]}if(!0!==T&&!1!==T&&""!==T||!M){var R=Router2.encodePathComponent(T);"null"===R&&null===T&&(R=""),O=i[1]+R+O}M=!1}else _&&i[3]in P&&delete P[i[3]]})),""===O&&(O="/"),S.hosttokens.forEach((function(i){var s=void 0;"text"!==i[0]?"variable"===i[0]&&(i[3]in C?(s=C[i[3]],delete P[i[3]]):S.defaults&&i[3]in S.defaults&&(s=S.defaults[i[3]]),R=i[1]+s+R):R=i[1]+R})),O=this.context_.base_url+O,S.requirements&&"_scheme"in S.requirements&&this.getScheme()!=S.requirements._scheme){var j=R||this.getHost();O=S.requirements._scheme+"://"+j+(j.indexOf(":"+D)>-1||""===D?"":":"+D)+O}else if(void 0!==S.schemes&&void 0!==S.schemes[0]&&this.getScheme()!==S.schemes[0]){var $=R||this.getHost();O=S.schemes[0]+"://"+$+($.indexOf(":"+D)>-1||""===D?"":":"+D)+O}else R&&this.getHost()!==R+(R.indexOf(":"+D)>-1||""===D?"":":"+D)?O=this.getScheme()+"://"+R+(R.indexOf(":"+D)>-1||""===D?"":":"+D)+O:!0===T&&(O=this.getScheme()+"://"+this.getHost()+(this.getHost().indexOf(":"+D)>-1||""===D?"":":"+D)+O);if(Object.keys(P).length>0){var U=void 0,V=[],Z=function add2(i,s){s=null===(s="function"==typeof s?s():s)?"":s,V.push(Router2.encodeQueryComponent(i)+"="+Router2.encodeQueryComponent(s))};for(U in P)this.buildQueryParams(U,P[U],Z);O=O+"?"+V.join("&")}return O}}],[{key:"getInstance",value:function getInstance(){return S}},{key:"setData",value:function setData(i){Router2.getInstance().setRoutingData(i)}},{key:"customEncodeURIComponent",value:function customEncodeURIComponent(i){return encodeURIComponent(i).replace(/%2F/g,"/").replace(/%40/g,"@").replace(/%3A/g,":").replace(/%21/g,"!").replace(/%3B/g,";").replace(/%2C/g,",").replace(/%2A/g,"*").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/'/g,"%27")}},{key:"encodePathComponent",value:function encodePathComponent(i){return Router2.customEncodeURIComponent(i).replace(/%3D/g,"=").replace(/%2B/g,"+").replace(/%21/g,"!").replace(/%7C/g,"|")}},{key:"encodeQueryComponent",value:function encodeQueryComponent(i){return Router2.customEncodeURIComponent(i).replace(/%3F/g,"?")}}]),Router2}();T.Route,T.Context;var S=new T;return{Router:T,Routing:S}}(),T=[],_=C.Routing,void 0===(S="function"==typeof _?_.apply(s,T):_)||(i.exports=S)},81086:function(i,s,_){"use strict";_.d(s,{Yw:function(){return trackSharedGame}});var T=_(38075),S=_(25014);const trackSharedGame=i=>T.Z.post(S.Z.generate("web_game_callback_shared",{type:i}))},36577:function(i,s,_){"use strict";_.d(s,{t:function(){return getCustomAnimatedGif}});var T=_(38075),S=_(25014);const seekGifUntilReady=(i,s)=>{T.Z.get(i).then((_=>{202===_.status?setTimeout(seekGifUntilReady.bind(null,i,s),2e3):200===_.status&&s(i)})).catch((()=>{s(i)}))},getCustomAnimatedGif=({tcn:i,flip:s,isChess960:_,initialPosition:C})=>{const P=S.Z.generate("web_game_callback_create_dyn_gif_url"),O={tcn:i,flip:s,isChess960:_,initialSetup:C};return T.Z.post(P,O).then((i=>new Promise((s=>{seekGifUntilReady(i.data,s)}))))}},44829:function(i,s,_){"use strict";_.d(s,{O:function(){return getShareUrl}});const getShareUrl=()=>{let i;const s=window.document.documentElement.lang,_=window.location,T=s.split("-")[0];return i=_.pathname.split("/")[1]===T||"en"===T?_.href:`${_.protocol}//${_.hostname}/${T}${_.pathname}`,i}},33468:function(i,s,_){"use strict";_.d(s,{Bw:function(){return animationChangeRequiresRefresh},Zn:function(){return buildEffect},FK:function(){return pieceChangeRequiresRefresh}});var T=_(36523);const animationChangeRequiresRefresh=(i,s)=>T.Yi.animations.indexOf(i)>-1||T.Yi.animations.indexOf(s)>-1;var S=_(16974);const makeSvg=({path:i="",size:s=24,viewBox:_="0 0 18 19"})=>`\n  <svg width="${s}" height="${s}" viewBox="${_}">\n    ${i}\n  </svg>\n`,buildEffect=({icon:i,node:s,square:_})=>({position:{x:"right",y:"top"},square:_||S.j.convertLanToFileRanks(`${s.from}${s.to}`).toFileRank,template:makeSvg({path:i,size:"100%"})});_(36577),_(50332);const pieceChangeRequiresRefresh=(i,s)=>{const _=i===s,S=T.Yi.pieces.indexOf(i)>-1||T.Yi.pieces.indexOf(s)>-1;return!_&&S}},65528:function(i,s,_){"use strict";_.d(s,{H:function(){return normalizeFen}});const normalizeFen=i=>{let s=i;-1!==s.indexOf("|")&&(s=s.split("|")[0].trim());const _=s.split(" "),T=_[0].split("/");return T.length>8&&(T.pop(),_[0]=T.join("/"),s=_.join(" ")),s}},43898:function(i,s,_){"use strict";_.d(s,{eA:function(){return P},pe:function(){return O},_G:function(){return R}});var T=_(90632),S=_(25014),C=_(18160);const P={PGN:{key:T.z.Pgn,isVisible:()=>!0,label:"PGN"},IMAGE:{key:T.z.Image,isVisible:()=>!0,label:"Image"},GIF:{key:T.z.Gif,isVisible:({showGif:i})=>i,label:"Animated Gif"},EMBED:{key:T.z.Embed,isVisible:()=>!0,label:"Embed"},EVENT:{key:T.z.Event,isVisible:()=>!0,label:"Event"}},O=[P.PGN.key,P.IMAGE.key,P.GIF.key,P.EMBED.key],M={gifPageUrl:S.Z.generate("web_content_gifs")},R={gifPageLinkText:C.Z.trans('Customize chess gifs at <a href="%link%">%url%</a>',{"%link%":M.gifPageUrl,"%url%":"chess.com/gifs"})}},67193:function(i,s,_){"use strict";_.d(s,{Mx:function(){return C},_j:function(){return P}});var T=_(25014),S=_(18160);const C={CHESS_GAME:"chessGame",CHESS_PROBLEM:"chessProblem",SIMPLE_DIAGRAM:"simpleDiagram"},P=(S.Z.trans("We cannot find an analysis with that URL."),S.Z.trans("We cannot find the game in that URL."),S.Z.trans("Something wrong with loaded PGN, we load it in soft mode"),S.Z.trans("No Result (*)"),S.Z.trans("White Won (1-0)"),S.Z.trans("Black Won (0-1)"),S.Z.trans("Draw (1/2-1/2)"),{getChessDiagram:i=>T.Z.generate("web_tinymce_get_chessdiagram",{id:i||"new"}),getSavedAnalysisFromUrl:i=>T.Z.generate("web_analysis_game_callback_view",{uuid:i})});S.Z.trans("White to move"),S.Z.trans("Black to move")},74200:function(i,s,_){"use strict";_.d(s,{ON:function(){return generateImage},FM:function(){return getDiagramPieceStyle},$O:function(){return stripDisabledPieceStyles},U7:function(){return createTextSetup},jI:function(){return getDiagramConfig}});var T=_(42805),S=_(59526),C=_(67193),P=(_(48486),_(18165),_(68033),_(44614));const generateImage=i=>`<div style="text-align: center;"><img id="chess_com_diagram_0_${i}" class="chessDiagramEditorImg mceItemNonEditable" src="/bundles/web/images/diagram-placeholder.png" name="mce_chessDiagramEditorImg" /></div><br>`,getDiagramPieceStyle=i=>S.Y.pieces.includes(i)?(0,T.jw)().pieceStyle:i,getDiagramType=(i,s=!1)=>i?s?C.Mx.CHESS_PROBLEM:C.Mx.CHESS_GAME:C.Mx.SIMPLE_DIAGRAM,stripDisabledPieceStyles=i=>i.filter((i=>!S.Y.pieces.includes(i.code)));function createTextSetup(i,s){const _=function splitPotentiallyMultiPgn(i){return-1!==i.indexOf('[Event "')?function splitMultiPgn(i){const s='[Event "';return i.split(s).slice(1).map((i=>`[Event "${i}`))}(i):[i]}(i),T=s;return _.map((i=>{return T.pgn=i.replace(/\\/g,""),`&-diagramtype:\n    ${(s=T).diagramType}\n    &-colorscheme:\n    ${s.boardStyle}\n    &-piecestyle:\n    ${s.pieceStyle}\n    &-float:\n    left\n    &-flip:\n    ${s.isBoardFlipped}\n    &-prompt:\n    false\n    &-coords:\n    ${s.coords}\n    &-size:\n    45\n    &-lastmove:\n\n    &-focusnode:\n    ${s.focusNode}\n    &-beginnode:\n    ${s.beginNode}\n    &-endnode:\n    ${s.endNode}\n    &-hideglobalbuttons:\n    false\n    &-pgnbody:\n    ${s.pgn}`.replace(/^[^\S\r\n]+/gm,"");var s})).join("")}const getLimitMove=i=>(0,P.u)(i)?i.ids.move+1:"",getDiagramConfig=({boardOptions:i,hasMoves:s,isPuzzle:_,nodeLimit:T})=>({beginNode:getLimitMove(T.begin),boardStyle:i.boardStyle,coords:Boolean(i.coordinates),diagramType:getDiagramType(s,_),endNode:getLimitMove(T.end),focusNode:getLimitMove(T.focus),isBoardFlipped:i.flipBoard,pgn:"",pieceStyle:getDiagramPieceStyle(i.pieceStyle)})},48486:function(i,s,_){"use strict";_.d(s,{Ck:function(){return getChessDiagram}});var T=_(67193),S=_(38075);function getChessDiagram(i,s=""){return S.Z.post(T._j.getChessDiagram(i),{textSetup:s})}},6786:function(i,s,_){"use strict";_(38075),_(25014)},18026:function(i,s,_){"use strict";var T=_(26211),S=_(18160);const C="after",P="before",O="addAnnotation",M="addEvalNotation",R="clearAnalysis",D="createContinuation",j="createVariation",$="deleteComment",U="deleteLine",V="deleteMove",Z="insertComment",Y="moveVariationDown",X="moveVariation",Q="promoteVariation",ee="removeAnnotation",te="removeBegin",ne="removeEnd",re="removeEvalAnnotation",ie="removeFocus",ae="setBegin",se="setEnd",oe="setFocus",le=[{code:"$1",display:T.v.$1,meaning:S.Z.trans("Good move"),action:O},{code:"$2",display:T.v.$2,meaning:S.Z.trans("Bad move"),action:O},{code:"$3",display:T.v.$3,meaning:S.Z.trans("Excellent move"),action:O},{code:"$4",display:T.v.$4,meaning:S.Z.trans("Blunder"),action:O},{code:"$5",display:T.v.$5,meaning:S.Z.trans("Speculative move"),action:O},{code:"$6",display:T.v.$6,meaning:S.Z.trans("Dubious move"),action:O},{code:"$10",display:T.v.$10,meaning:S.Z.trans("Drawish"),action:M},{code:"$13",display:T.v.$13,meaning:S.Z.trans("Unclear"),action:M},{code:"$14",display:T.v.$14,meaning:S.Z.trans("White has a slight advantage"),action:M},{code:"$15",display:T.v.$15,meaning:S.Z.trans("Black has a slight advantage"),action:M},{code:"$16",display:T.v.$16,meaning:S.Z.trans("White has a moderate advantage"),action:M},{code:"$17",display:T.v.$17,meaning:S.Z.trans("Black has a moderate advantage"),action:M},{code:"$18",display:T.v.$18,meaning:S.Z.trans("White has a decisive advantage"),action:M},{code:"$19",display:T.v.$19,meaning:S.Z.trans("Black has a decisive advantage"),action:M},{code:"$22",display:T.v.$22,meaning:S.Z.trans("The position is in zugzwang"),action:M},{code:"$146",display:T.v.$146,meaning:S.Z.trans("Novelty"),action:M}];S.Z.trans("Clear All Analysis"),S.Z.trans("Insert Continuation"),S.Z.trans("Insert Alternate Line"),S.Z.trans("Delete Comment After"),S.Z.trans("Delete Comment Before"),S.Z.trans("Delete Entire Variation"),S.Z.trans("Delete Move"),S.Z.trans("Comment After"),S.Z.trans("Comment Before"),S.Z.trans("Move Variation Down"),S.Z.trans("Move Variation Up"),S.Z.trans("Promote"),S.Z.trans("Remove Annotation"),S.Z.trans("Remove Begin"),S.Z.trans("Remove End"),S.Z.trans("Remove Evaluation Annotation"),S.Z.trans("Remove Focus"),S.Z.trans("Set Begin"),S.Z.trans("Set End"),S.Z.trans("Set Focus"),(()=>{const i=[];le.forEach((s=>{const _=i[i.length-1]||null;_&&4!==_.length?_.push(s):i.push([s])}))})()},93189:function(i,s,_){"use strict";var T=_(43037);const S=["additionalAnnotation","annotation","arrows","color","comment","commentBefore","fen","flags","from","ids","lines","moveNumber","piece","previous","promotion","san","time","to"];s.Z=(()=>{let i;const s={lines:[]};return{state:s,updateLines:_=>{s.lines=[..._],(_||[]).forEach(((C,P)=>{i=T.x.isContinuation(_,C.id),s.lines[P]=C.map((s=>{const _={};return S.forEach((i=>{void 0!==s[i]&&(_[i]=s[i])})),i&&0===s.ids.move&&(_.commentBefore=C.initComment),_})),s.lines[P].atMoveNode=C.atMoveNode,s.lines[P].id=C.id,s.lines[P].parentId=C.parentId}))}}})()},24452:function(i,s,_){"use strict";_.d(s,{MD:function(){return getUserPopoverPosition},bt:function(){return getPosition},_O:function(){return positionTooltip},fs:function(){return removePositionStyle}});var T=_(93644);const S="top",C="right",P="bottom",O="left",M="bottom-left",getUserPopoverPosition=(i,s=220,_=320)=>{const T={top:null,left:null,right:null,x:null,y:null},M=i.width/2,R=window,D=i.bottom+s<R.innerHeight,j=_-28-12,$=_-j,U=i.left+M+j<R.innerWidth;return D?(T.top=i.bottom,T.y=P):(T.top=i.top-s,T.y=S),U?(T.left=i.left+M-$,T.right=window.innerWidth-i.right,T.x=C):(T.left=i.left+M-j,T.right=window.innerWidth-i.right,T.x=O),T.top=Math.round(T.top),T.left=Math.round(T.left),T.right=Math.round(T.right),T},getPosition=(i,s,_,T=0)=>{if(!i||!s)return null;const R=i.getBoundingClientRect(),D={},j=window.innerWidth-R.x,canFitTop=()=>R.top-(s.clientHeight+T)>0,canFitLeft=()=>R.left-(s.clientWidth+T)>0;return _===S&&canFitTop()||_===P&&!(R.bottom+s.clientHeight+T<window.innerHeight)?(D.left=R.left-(s.clientWidth-R.width)/2,D.rtlLeft=j-s.clientWidth/2-R.width/2,D.top=R.top-s.clientHeight-T,D.placement=S):_===P||_===S&&!canFitTop()?(D.left=R.left-(s.clientWidth-R.width)/2,D.rtlLeft=j-s.clientWidth/2-R.width/2,D.top=R.bottom+T,D.placement=P):_===O&&canFitLeft()||_===C&&!(R.right+s.clientWidth+T<window.innerWidth)?(D.left=R.left-s.clientWidth-T,D.rtlLeft=R.rtlLeft-s.clientWidth-T,D.top=R.top-(s.clientHeight-R.height)/2,D.placement=O):_===C||_===O&&!canFitLeft()?(D.left=R.right+T,D.rtlLeft=R.rtlLeft+T,D.top=R.top-(s.clientHeight-R.height)/2,D.placement=C):_===M&&(D.left=R.right-R.width/2-s.clientWidth-T,D.rtlLeft=R.rtlLeft-s.clientWidth-T,D.top=R.bottom+T,D.placement=M),{left:Math.round(D.left),placement:D.placement,rtlLeft:Math.round(D.rtlLeft),top:Math.round(D.top)}},positionTooltip=(i,s,_,S=0)=>{if(!i||!s)return null;const C=getPosition(i,s,_,S);return(0,T.t)()?s.style.transform=`translate(-${C.rtlLeft}px, ${C.top}px)`:s.style.transform=`translate(${C.left}px, ${C.top}px)`,s.classList.add(C.placement),s},removePositionStyle=i=>i?(i.style.transform="translate(-100%, -100%)",i.classList.remove(O,C,P,S),i):null},17431:function(i,s,_){"use strict";_.d(s,{_j:function(){return O},BN:function(){return M},Iz:function(){return R},xw:function(){return D}});var T=_(32793),S=_(25014),C=_(18160);const P=(0,T.j7)().slice(0,-13),O={android:()=>S.Z.generate("web_play_app_view",{type:"android"},!0),ios:()=>S.Z.generate("web_play_app_view",{type:"ios"},!0),index:()=>S.Z.generate("web_index",{},!0),register:()=>S.Z.generate("web_security_register",{},!0),windows:()=>S.Z.generate("web_play_app_view",{type:"windows-phone"},!0)},M={discord:()=>"https://go.chess.com/Discord",facebook:i=>{var s;return`http://www.facebook.com/sharer.php?u=${null!=(s=encodeURIComponent(i))?s:(0,T.bM)()}`},linkedin:i=>{var s;return`https://www.linkedin.com/shareArticle?mini=true&url=${null!=(s=encodeURIComponent(i))?s:(0,T.bM)()}&title=${(0,T.j7)()}&summary=${(0,T.j7)()}&source=Chess.com`},mix:i=>{var s;return`http://www.mix.com/submit?url=${null!=(s=encodeURIComponent(i))?s:(0,T.bM)()}&title=${(0,T.j7)()}`},reddit:i=>{var s;return`http://reddit.com/r/Chesscom/submit?url=${null!=(s=encodeURIComponent(i))?s:(0,T.bM)()}&title=${(0,T.j7)()}`},tumblr:i=>{var s;return`http://www.tumblr.com/share/link?url=${null!=(s=encodeURIComponent(i))?s:(0,T.bM)()}&name=${(0,T.j7)()}&description=${(0,T.j7)()}`},twitch:()=>"https://www.chess.com/twitch",twitter:i=>{var s;return`https://twitter.com/intent/tweet?text=${P}&url=${null!=(s=encodeURIComponent(i))?s:(0,T.bM)()}`}},R={addFavorites:C.Z.trans("Add to Favorites"),android:C.Z.trans("Android App"),discord:C.Z.trans("Discord"),facebook:C.Z.trans("Facebook"),gamesToday:C.Z.trans("Games Today"),google:C.Z.trans("Google+"),instagram:C.Z.trans("Instagram"),ios:C.Z.trans("iOS App"),members:C.Z.trans("Members"),playersOnline:C.Z.trans("Players Online"),print:C.Z.trans("Print"),report:C.Z.trans("Report"),sendEmail:C.Z.trans("Send by Mail"),titledOnline:C.Z.trans("Titled Online"),twitch:C.Z.trans("Twitch"),twitter:C.Z.trans("Twitter"),windows:C.Z.trans("Windows App"),youtube:C.Z.trans("Youtube"),shareFacebook:C.Z.trans("Share on Facebook"),shareGplus:C.Z.trans("Share on Google Plus"),shareLinkedIn:C.Z.trans("Share on LinkedIn"),shareMix:C.Z.trans("Share on Mix"),shareReddit:C.Z.trans("Share on Reddit"),shareTumblr:C.Z.trans("Post to Tumblr"),shareTwitter:C.Z.trans("Share on Twitter"),showMore:C.Z.trans("More")},D={facebook:"https://www.facebook.com/chess",instagram:"https://www.instagram.com/wwwchesscom/",twitch:"https://www.twitch.tv/chess",twitter:"https://twitter.com/chesscom",youtube:"https://www.youtube.com/user/wwwChesscom"}},94246:function(i,s,_){"use strict";_.d(s,{X:function(){return sendInvitation}});_(6786);var T=_(17431),S=_(32793);_(18160),_(19801);const sendInvitation=(i,s)=>{const _=i?`?friend=${i}`:"";let C=`body=${"/settings"===S.k_?"":`${S.qD} ${S.e0} %0D%0A%0D%0A`}I play at Chess.com! Download their free app:%0D%0A%0D%0A\n       for Android - ${T._j.android()}\n       for iPhone %26 iPad - ${T._j.ios()} %0D%0A\n       or sign up online at ${T._j.register()}${_}\n      %0D%0A%0D%0A ... %0D%0A%0D%0A`;s&&(C+=`Then challenge me! %22${s}%22 is my username! %0D%0A\n            http://www.chess.com/members/view/${s}`),(0,S.Cz)("subject=Check out Chess.com",C)}},31352:function(i,s,_){"use strict";_.d(s,{J:function(){return createUserService}});var T=_(35174),S=_(73167),C=_(92591),P=_(4744);function getDefaultBoardOptions(){return{animationType:"default",boardSize:"auto",boardStyle:"green",coordinates:"inside",darkMode:!0,highlightLegalMoves:!0,highlightMoves:!0,isWhiteOnBottom:!1,moveListDisplayType:"text",moveMethod:"drag",pieceStyle:"neo",playSounds:!0,soundTheme:"default"}}function createAddFriend(i){return function addFriend(s,_=!1){const{actionQueue:T,http:S,Router:C}=i,P={user:s};return _&&(P.recommendation=1),T.add(S.post,C.generate("web_friend_request_callback",P))}}function createApproveFriendRequest(i){return function approveFriendRequest(s){const{actionQueue:_,http:T,Router:S}=i;return _.add(T.put,S.generate("web_friend_accept_request_callback",{user:s}))}}function createBlockUser(i){return function blockUser(s){const{actionQueue:_,CSRFToken:T,http:S,Router:C}=i;return _.add(S.post,C.generate("web_member_callback_block_member",{username:s}),{_token:T})}}function createCancelFriendRequest(i){return function cancelFriendRequest(s){const{actionQueue:_,http:T,Router:S}=i;return _.add(T.post,S.generate("web_friend_cancel_request_callback",{user:s}))}}function createCheckMembershipStatus(i){return function checkMembershipStatus(s){const{membership:_,service:T,user:S}=i;if(!T.isLoggedIn())return!1;let C=!1;switch(s){case"isActivated":C=S.isActivated;break;case"isStaff":C=S.membershipLevel>=_.staff;break;case"isStaffOnly":C=S.membershipLevel===_.staff;break;case"isModerator":C=S.membershipLevel>=_.moderator;break;case"isModeratorOnly":C=S.membershipLevel===_.moderator;break;case"isDiamond":C=S.membershipLevel>=_.diamond;break;case"isDiamondOnly":C=S.membershipLevel===_.diamond;break;case"isPlatinum":C=S.membershipLevel>=_.platinum;break;case"isPlatinumOnly":C=S.membershipLevel===_.platinum;break;case"isSilver":case"isPremium":C=S.membershipLevel>=_.silver;break;case"isSilverOnly":C=S.membershipLevel===_.silver;break;case"isGold":C=S.membershipLevel>=_.gold;break;case"isGoldOnly":C=S.membershipLevel===_.gold;break;case"isBasic":C=S.membershipLevel===_.basic;break;default:C=!1}return C}}function createCheckValidUsername(i){return function checkValidUsername(s){const{http:_,Router:T}=i;return _.get(T.generate("web_user_callback_valid_username",{username:s}))}}function createDeclineFriendRequest(i){return function declineFriendRequest(s){const{actionQueue:_,http:T,Router:S}=i;return _.add(T.post,S.generate("web_friend_decline_request_callback",{user:s}))}}function createDeleteFriend(i){return function deleteFriend(s){const{actionQueue:_,http:T,Router:S}=i;return _.add(T.delete,S.generate("web_friend_delete_callback",{user:s}))}}function createDismissFollowSuggestion(i){return function dismissFollowSuggestion(s){const{actionQueue:_,http:T,Router:S}=i;return _.add(T.post,S.generate("web_user_callback_dismiss_follow_suggestion",{username:s}))}}function createEligibleFirstTrial(i){return function EligibleFirstTrial(){const{service:s,user:_}=i;return s.isLoggedIn()&&_.eligibleFirstTrial}}var O=_(98480),M=_(82220);function createFetchReportReasonsData(i){return function fetchReportReasonsData(){const{http:s,Router:_}=i;return s.get(_.generate("web_user_callback_report_reasons"))}}function createGenerateProfileLink(i){return function generateProfileLink(s){const{Router:_}=i;return s?`<a href="${_.generate("web_member_view",{username:s})}" target="_self">${s}</a>`:""}}function createGet(i){return function get(s){const{user:_}=i;return _?s?_[s]:_:null}}function createGetAvatar(i){return function getAvatar(s){const{http:_,Router:T}=i;return _.get(T.generate("pubapi_player_profile",{username:s}))}}function createGetFollowSuggestions(i){return function getFollowSuggestions(){const{http:s,Router:_}=i;return s.get(_.generate("web_user_callback_follow_suggestions"))}}function createGetFriends(i){return function getFriends(s){const{http:_,Router:T}=i;return _.get(T.generate("web_friend_callback_friends_search",s))}}function createGetOpponents(i){return function getOpponents(){const{http:s,Router:_}=i;return s.get(_.generate("web_user_callback_recent_opponents"))}}var R=_(38096);function getPromises(){return window.chesscom.promises||(window.chesscom.promises={}),window.chesscom.promises}function createGetRoles(i){return function getRoles(){const{http:s,Router:_}=i;return(0,R.jl)()?function execAndCache({id:i,promise:s}){const _=getPromises();return _[i]||(_[i]=new Promise(((i,_)=>{s().then(i).catch(_)}))),_[i]}({id:P.Zj.FETCH_ROLES,promise:()=>s.get(_.generate("web_security_callback_user_roles"))}):[]}}function createGetUser(i){return function getUser(s){const{http:_,Router:T}=i;return _.get(T.generate("web_user_callback_popup",{username:s}))}}function createGuestUpdateSkillLevel(i){return function guestUpdateSkillLevel(s){const{http:_,Router:T}=i;return _.post(T.generate("web_guest_update_skill_level"),{skill_level:Number(s)})}}function createIsEnabled(i){return function isEnabled(){const{service:s,user:_}=i;return s.isLoggedIn()&&_.isEnabled}}function createIsImpersonating(i){return function isImpersonating(){const{service:s,user:_}=i;return s.isLoggedIn()&&_.isImpersonating}}function createIsLoggedIn(i){return function isLoggedIn(){const{is2FARoute:s,user:_}=i;return _&&_.id&&!s()}}function createReportUser(i){return function reportUser(s){const{callbacks:_,http:T,Router:S}=i;return T.post(S.generate(_.REPORT_USER),{abuser_username:s.username,reason_id:s.picked,other_reason:s.otherReason,block_user:s.blockUser,reporter_url:window.location.href})}}var D=_(94952),j=_(20517),$=_(3510),U=_(6159),V=_(11721),Z=Object.defineProperty,Y=Object.defineProperties,X=Object.getOwnPropertyDescriptors,Q=Object.getOwnPropertySymbols,ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable,__defNormalProp=(i,s,_)=>s in i?Z(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_;function createSaveBoardSetting(i){return async function saveBoardSetting(s,_){const T=function createUndoAction(s,_){const{service:T,update:S}=i,{boardOptions:C}=T.get();return S("boardOptions",(P=((i,s)=>{for(var _ in s||(s={}))ee.call(s,_)&&__defNormalProp(i,_,s[_]);if(Q)for(var _ of Q(s))te.call(s,_)&&__defNormalProp(i,_,s[_]);return i})({},C),O={[s]:_},Y(P,X(O))));var P,O}(s,_);return function toggleUiClasses(i,s){"coordinates"===i&&(0,D.a)("outside"===s)}(s,_),Promise.all([createSavePromise(s,_),createSettingsServiceSavePromise(s,_)]).then(i.emitUser).catch((()=>{T(),i.emitUser()}))};function createSavePromise(s,_){const{actionQueue:T,http:S,Router:C}=i,[P,O]=(0,U.M)(s,_);return T.add(S.post,C.generate(j.f[P]),{action:O})}function createSettingsServiceSavePromise(i,s){if(!window.chesscom.features.includes("settings_service_data_sync"))return Promise.resolve();const _=(0,V.R)({[i]:s});return(0,$.z)(_)}}var ne=Object.defineProperty,re=Object.getOwnPropertySymbols,ie=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable,search_username_defNormalProp=(i,s,_)=>s in i?ne(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_;function createSearchUsername(i){return function searchUsername(s,_={}){const{http:T,routes:S}=i;return T.get(S.usernameSearch(((i,s)=>{for(var _ in s||(s={}))ie.call(s,_)&&search_username_defNormalProp(i,_,s[_]);if(re)for(var _ of re(s))ae.call(s,_)&&search_username_defNormalProp(i,_,s[_]);return i})({query:s},_)))}}function createSet(i){return function set(s,_){const{user:T}=i;return T?(T[s]=_,T):null}}function createSetArchiveView(i){return function setArchiveView(s){const{emitUser:_,http:T,Router:S,update:C}=i,P=C("archiveView",s);return T.post(S.generate("web_user_callback_set_archive_view"),{archiveView:s}).then(_).catch((()=>{P(),_()}))}}function createSetFairPlayAgree(i){return function setFairPlayAgree(s){const{emitUser:_,http:T,Router:S,update:C}=i,P=C("fairPlayAgree",s);return T.post(S.generate("web_user_callback_set_fair_play_agree",{fairPlayAgree:s?1:0})).then(_).catch((()=>{P(),_()}))}}function createSetHomeContentType(i){return function setHomeContentType(s){const{emitUser:_,http:T,Router:S,update:C}=i,P=C("homeContentType",s);return T.post(S.generate("web_user_callback_set_home_recent_content_type"),{recentContentType:s}).then(_).catch((()=>{P(),_()}))}}function createTrackUser(i){return function trackUser(s){const{actionQueue:_,CSRFToken:T,http:S,Router:C}=i;return _.add(S.post,C.generate("web_member_callback_track_member",{username:s}),{_token:T})}}function createUnblockUser(i){return function unblockUser(s){const{actionQueue:_,CSRFToken:T,http:S,Router:C}=i;return _.add(S.post,C.generate("web_member_callback_unblock_member",{username:s}),{_token:T})}}function createUntrackUser(i){return function untrackUser(s){const{actionQueue:_,CSRFToken:T,http:S,Router:C}=i;return _.add(S.post,C.generate("web_member_callback_untrack_member",{username:s}),{_token:T})}}var se=Object.defineProperty,oe=Object.getOwnPropertySymbols,le=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable,service_defNormalProp=(i,s,_)=>s in i?se(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_;function createUserService({cache:i,callbacks:s,CSRF:_,getCurrentUser:R,http:D,includeBoardOptions:j=!1,Router:$,routes:U}){const V=(0,C.j)(!0),Z=(0,T.I)(),Y=function getInitialUser(){const s=R(),_=function getDefaultUser(){var i;return{avatarUrl:null==(i=null==window?void 0:window.Config)?void 0:i.noAvatar,archiveView:"grid",boardOptions:{animationType:"default",boardSize:"auto",boardStyle:"green",coordinates:"inside",darkMode:!0,highlightLegalMoves:!0,highlightMoves:!0,isWhiteOnBottom:!1,moveListDisplayType:"text",moveMethod:"drag",pieceStyle:"neo",playSounds:!0,soundTheme:"default"},country:null,features:{},flag:null,friends:[],homeContentType:"following",isLoggedIn:!1,loading:{friends:!1,opponents:!1},membership:null,opponents:[],rating:null,roles:[],username:""}}();if(!s)return _;const T=Object.assign({},_,s);if(!s.isImpersonating){const s=i.getBoardOptions();Object.keys(s).length&&Object.assign(T.boardOptions,(0,S.ei)(s,["animationType","boardSize","boardStyle","coordinates","darkMode","highlightLegalMoves","highlightMoves","isWhiteOnBottom","moveListDisplayType","moveMethod","pieceStyle","playSounds","soundTheme"]))}return T}(),X={actionQueue:V,callbacks:s,CSRFToken:_.getToken(),emitUser:emitUser,http:D,is2FARoute:M.Z,membership:P.p0,Router:$,routes:U,update:function update(s,_){const T=Y[s];return Y[s]=_,i.setBoardOptions(_),function undo(){Y[s]=T,i.setBoardOptions(T)}},user:Y},Q=((i,s)=>{for(var _ in s||(s={}))le.call(s,_)&&service_defNormalProp(i,_,s[_]);if(oe)for(var _ of oe(s))ce.call(s,_)&&service_defNormalProp(i,_,s[_]);return i})({addFriend:createAddFriend(X),approveFriendRequest:createApproveFriendRequest(X),blockUser:createBlockUser(X),cancelFriendRequest:createCancelFriendRequest(X),checkMembershipStatus:createCheckMembershipStatus(X),checkValidUsername:createCheckValidUsername(X),declineFriendRequest:createDeclineFriendRequest(X),deleteFriend:createDeleteFriend(X),dismissFollowSuggestion:createDismissFollowSuggestion(X),eligibleFirstTrial:createEligibleFirstTrial(X),fetchBoardOptions:j?function fetchBoardOptions(){return(0,M.Z)()?Promise.resolve():(0,O.R)().catch(getDefaultBoardOptions)}:void 0,fetchReportReasonsData:createFetchReportReasonsData(X),generateProfileLine:createGenerateProfileLink(X),get:createGet(X),getAvatar:createGetAvatar(X),getFollowSuggestions:createGetFollowSuggestions(X),getFriends:createGetFriends(X),getOpponents:createGetOpponents(X),getRoles:createGetRoles(X),getUser:createGetUser(X),guestUpdateSkillLevel:createGuestUpdateSkillLevel(X),isEnabled:createIsEnabled(X),isImpersonating:createIsImpersonating(X),isLoggedIn:createIsLoggedIn(X),reportUser:createReportUser(X),saveBoardSetting:createSaveBoardSetting(X),searchUsername:createSearchUsername(X),set:createSet(X),setArchiveView:createSetArchiveView(X),setFairPlayAgree:createSetFairPlayAgree(X),setHomeContentType:createSetHomeContentType(X),trackUser:createTrackUser(X),unblockUser:createUnblockUser(X),untrackUser:createUntrackUser(X)},Z);return async function fetchAndApplyBoardOptions(){if(Q.fetchBoardOptions)try{const s=await Q.fetchBoardOptions();Q.set("boardOptions",s),i.setBoardOptions(s),emitUser()}catch(s){}}(),Q.acceptFollowSuggestion=Q.trackUser,X.service=Q,Q;function emitUser(i){Z.emit(i,Y)}}},92957:function(i,s,_){"use strict";_.d(s,{X:function(){return registerModules}});var T=_(89884);const registerModules=i=>{Object.keys(i).forEach((s=>{const _=i[s];T.default.state&&T.default.state[s]||T.default.registerModule(s,_)}))}},28590:function(i,s,_){"use strict";_.d(s,{Z:function(){return Ge}});var T=_(49790),S=_(26670),C=_(36523),P=_(33468),O=_(71340),M=_(99079),R=_(94573),D=_(1849),j=_(74279);var $=new(_.n(j)()),U=_(52085);const V=(0,_(35174).I)();var Z=_(10942),Y=_(27835),X=_(61681),Q=_(3527),ee=_.n(Q),te=_(32305),ne=Object.defineProperty,re=Object.defineProperties,ie=Object.getOwnPropertyDescriptors,ae=Object.getOwnPropertySymbols,se=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable,__defNormalProp=(i,s,_)=>s in i?ne(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,__spreadValues=(i,s)=>{for(var _ in s||(s={}))se.call(s,_)&&__defNormalProp(i,_,s[_]);if(ae)for(var _ of ae(s))oe.call(s,_)&&__defNormalProp(i,_,s[_]);return i},__spreadProps=(i,s)=>re(i,ie(s));const le="KOMODO",ce="STOCKFISH",ue="STOCKFISH (NNUE)",de="OFF",he={name:ee().supportsMultithreading()?"Stockfish 15":"Stockfish 11",description:ee().supportsMultithreading()?(0,te.dW)("faster"):"",paths:{engines:{multiThreaded:{loader:window.Config.threadedEnginePaths.stockfish.multiThreaded.loader,engine:window.Config.threadedEnginePaths.stockfish.multiThreaded.engine},singleThreaded:{loader:window.Config.threadedEnginePaths.stockfish.singleThreaded.loader,engine:window.Config.threadedEnginePaths.stockfish.singleThreaded.engine},asm:window.Config.threadedEnginePaths.stockfish.asm},pathToBook:window.Config.pathToBookSmall}},pe=(__spreadValues({},he),__spreadProps(__spreadValues({},he),{name:"Stockfish 15 NNUE",description:(0,te.dW)("stronger, %filesize%",{"%filesize%":"45MB"}),paths:__spreadProps(__spreadValues({},he.paths),{settings:{EvalFile:window.Config.threadedEnginePaths.stockfish.multiThreaded.nnue,Threads:(navigator.hardwareConcurrency/2).toString(),"Use NNUE":"true"}}),multithreadingRequired:!0}),window.Config.pathToExplanationEngineWorker,window.Config.pathToWasmExplanationEngine,window.Config.pathToNonWasmKomodo,(0,te.dW)("Engine Off"),window.Config.pathToExplanationEngineWorker,window.Config.pathToWasmExplanationEngine,"STOCKFISH");const me="analysis_engine_settings";var fe=Object.defineProperty,ge=Object.defineProperties,ve=Object.getOwnPropertyDescriptors,be=Object.getOwnPropertySymbols,ye=Object.prototype.hasOwnProperty,_e=Object.prototype.propertyIsEnumerable,settings_defNormalProp=(i,s,_)=>s in i?fe(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_;const we={depth:20,timeLimit:10,linesCount:3,engineName:pe,isWdlBarSupported:!1,hasChosenWdlBar:!1,minDepths:{komodo:10,stockfish:10}};function updateSettings(i){var s;Object.assign(we,i),X.Z.set(me,(s=((i,s)=>{for(var _ in s||(s={}))ye.call(s,_)&&settings_defNormalProp(i,_,s[_]);if(be)for(var _ of be(s))_e.call(s,_)&&settings_defNormalProp(i,_,s[_]);return i})({},we),ge(s,ve({isWdlBarEnabled:void 0})))),V.emit("evaluation.settings-update")}Object.assign(we,X.Z.get(me),{isWdlBarSupported:(0,Z.F)(Y.R.WDL_EVAL_BAR_OPTION)});var ke=Object.defineProperty,Te=Object.defineProperties,Se=Object.getOwnPropertyDescriptors,Ce=Object.getOwnPropertySymbols,xe=Object.prototype.hasOwnProperty,Ee=Object.prototype.propertyIsEnumerable,actions_defNormalProp=(i,s,_)=>s in i?ke(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_;let Pe;var Ae={async loadOptions({commit:i,dispatch:s},_=!1){Pe||(Pe=R.Z.getOptions());try{const T=(C=((i,s)=>{for(var _ in s||(s={}))xe.call(s,_)&&actions_defNormalProp(i,_,s[_]);if(Ce)for(var _ of Ce(s))Ee.call(s,_)&&actions_defNormalProp(i,_,s[_]);return i})({},await Pe),Te(C,Se({fetched:!0})));if(_&&"real3d"===T.pieceStyle&&(T.pieceStyle=R.Z.getDefaultOptions().pieceStyle),"real3d"===T.pieceStyle&&O.Yi.animations.indexOf(T.animationType)>=0){const i=R.Z.getDefaultOptions().animationType;s("updateOption",{option:"animationType",value:i}),T.animationType=i}i("setOptions",T),Pe=null}catch(P){(0,S.el)({type:T.V5.error,message:T.R0.badRequest}),Pe=null}var C},loadStyles:({commit:i})=>R.Z.getStyles().then((s=>i("setStyles",s))).catch((()=>(0,S.el)({type:T.V5.error,message:T.R0.badRequest}))),playSound({state:i},s){const _=new D.Z(i.boardOptions.soundTheme);return i.boardOptions.playSounds&&_.play(s),_},updateBoardEffect({dispatch:i,rootState:s},{classification:_,node:T={},square:S=null,persist:C=!1,gameStore:O="game"}){if(s[O].isNewBoard){if(!T)return;return void i(`${O||"game"}/markEffect`,{effect:{square:T.to,type:_.type},persist:C},{root:!0})}const{icon:M}=_||{};i(`${O||"game"}/markEffect`,{effect:(0,P.Zn)({icon:M,node:T,square:S}),persist:C},{root:!0})},updateOption({commit:i,rootState:s},{option:_,value:P,save:D=!0}){"highlightMoves"===_&&i("setOption",{option:"highlightMovesUI",value:P}),"darkMode"===_&&($.emit(C.U3.DARK_MODE_CHANGE,P),(0,U.y)("dark-mode",P)),"evaluationBarType"===_&&updateSettings({hasChosenWdlBar:Boolean(P)});let j=_,V=P;if("coordinates"===_&&(V=M.Z.getCoordinatePositioning(P)),"colorScheme"===_&&(j="boardStyle"),i("setOption",{option:j,value:V}),s.user&&s.user.isLoggedIn&&O.ZC.updateOption[_]&&D)return R.Z.updateOption(_,P).catch((()=>(0,S.el)({type:T.V5.error,message:T.R0.badRequest})))},flipBoard({commit:i,state:s}){i("setOption",{option:"flipBoard",value:!s.boardOptions.flipBoard})}},Oe=_(58558),Me=_(3775),ze={setOption(i,{option:s,value:_}){i.boardOptions[s]=_},setOptions(i,s){var _;let T=s.animationType||i.boardOptions.animationType;O.Yi.pieces.indexOf(s.pieceStyle)>=0&&O.Yi.animations.indexOf(s.animationType)>=0&&(T="default");const S=null==(_=s.pieceStyle)?void 0:_.startsWith("3d");(0,Me.jn)(S)&&(0,Oe.j)(S),i.boardOptions=Object.assign(i.boardOptions,s,{animationType:T})},setStyle(i,{style:s,value:_}){i.styles[s]=_},setSettings(i,s){i.settings=Object.assign({},i.settings,s)},setStyles(i,s){const _=M.Z.getAnimationTypes(s.animationTypes),T=M.Z.getPieceStyles(s.pieceStyles);i.styles=Object.assign(i.styles,s,{animationTypes:_},{pieceStyles:T})},setDebugMode(i,s){i.debugMode=s}},Ie=_(82e3),Le=_(66524);var Re=Object.defineProperty,Ne=Object.defineProperties,De=Object.getOwnPropertyDescriptors,je=Object.getOwnPropertySymbols,Be=Object.prototype.hasOwnProperty,$e=Object.prototype.propertyIsEnumerable,state_defNormalProp=(i,s,_)=>s in i?Re(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_;const Ue=R.Z.getDefaultOptions(),Fe={boardId:`board${Date.now()}`,boardOptions:(He=((i,s)=>{for(var _ in s||(s={}))Be.call(s,_)&&state_defNormalProp(i,_,s[_]);if(je)for(var _ of je(s))$e.call(s,_)&&state_defNormalProp(i,_,s[_]);return i})({},Ue),qe={highlightMovesUI:!0,maxWidth:0},Ne(He,De(qe))),debugMode:!1,settings:{boardColors:[{code:"8_bit",name:"8-Bit"},{code:"bases",name:"Bases"},{code:"blue",name:"Blue"},{code:"brown",name:"Brown"},{code:"bubblegum",name:"Bubblegum"},{code:"burled_wood",name:"Burled Wood"},{code:"dark_wood",name:"Dark Wood"},{code:"dash",name:"Dash"},{code:"glass",name:"Glass"},{code:"graffiti",name:"Graffiti"},{code:"green",name:"Green"},{code:"icy_sea",name:"Icy Sea"},{code:"light",name:"Light"},{code:"lolz",name:"Lolz"},{code:"marble",name:"Marble"},{code:"metal",name:"Metal"},{code:"neon",name:"Neon"},{code:"newspaper",name:"Newspaper"},{code:"orange",name:"Orange"},{code:"overlay",name:"Overlay"},{code:"parchment",name:"Parchment"},{code:"purple",name:"Purple"},{code:"red",name:"Red"},{code:"sand",name:"Sand"},{code:"sky",name:"Sky"},{code:"stone",name:"Stone"},{code:"tan",name:"Tan"},{code:"tournament",name:"Tournament"},{code:"translucent",name:"Translucent"},{code:"walnut",name:"Walnut"}],pieceStyles:[{code:"8_bit",name:"8-Bit"},{code:"alpha",name:"Alpha"},{code:"bases",name:"Bases"},{code:"blindfold",name:"Blindfold"},{code:"book",name:"Book"},{code:"bubblegum",name:"Bubblegum"},{code:"cases",name:"Cases"},{code:"classic",name:"Classic"},{code:"club",name:"Club"},{code:"condal",name:"Condal"},{code:"dash",name:"Dash"},{code:"game_room",name:"Game Room"},{code:"glass",name:"Glass"},{code:"gothic",name:"Gothic"},{code:"graffiti",name:"Graffiti"},{code:"icy_sea",name:"Icy Sea"},{code:"light",name:"Light"},{code:"lolz",name:"Lolz"},{code:"marble",name:"Marble"},{code:"maya",name:"Maya"},{code:"metal",name:"Metal"},{code:"modern2",name:"Modern"},{code:"nature",name:"Nature"},{code:"neon",name:"Neon"},{code:"neo",name:"Neo"},{code:"neo_wood",name:"Neo-Wood"},{code:"newspaper",name:"Newspaper"},{code:"ocean",name:"Ocean"},{code:"sky",name:"Sky"},{code:"space",name:"Space"},{code:"tigers",name:"Tigers"},{code:"tournament",name:"Tournament"},{code:"vintage",name:"Vintage"},{code:"wood",name:"Wood"},{code:"3dwood",name:"3D - Wood"},{code:"3d_staunton",name:"3D - Staunton"},{code:"3dplastic",name:"3D - Plastic"},{code:"3dchesskid",name:"3D - ChessKid"},{code:"real3d",name:"Real 3D"}],sounds:[{code:"default",name:"Default"},{code:"nature",name:"Nature"},{code:"metal",name:"Metal"},{code:"marble",name:"Marble"},{code:"space",name:"Space"},{code:"beat",name:"Beat"},{code:"silly",name:"Silly"},{code:"lolz",name:"Lolz"},{code:"newspaper",name:"Newspaper"}],moveListDisplayTypes:[{code:"text",name:"Text"},{code:"figurine",name:"Figurine"}],animationTypes:[{code:"default",name:"Default"},{code:"none",name:"None"},{code:"slow",name:"Slow"},{code:"natural",name:"Natural"},{code:"arcade",name:"Arcade"}],coordinates:[{code:null,name:"Off"},{code:"inside",name:"Inside"},{code:"outside",name:"Outside"}],component:"standard",moveMethods:[{code:"click",name:"Click Squares"},{code:"drag",name:"Drag Pieces"}]},styles:{boardColors:[],pieceStyles:[],userSize:null}};var He,qe;const Ve={boardOptions:{allowMarkings:!0,captureKeyStrokes:!0,enabled:!0,fadeSetup:0,fetched:!1,flipBoard:!1,flipped:!1,highlightColor:null,highlightOpacity:Ue.highlightOpacity}};var Ge={namespaced:!0,actions:Ae,mutations:ze,state:(0,Le.Z)(Fe,Ie.Z.board,Ve)}},77403:function(i,s,_){"use strict";_.d(s,{Z:function(){return ae}});var T=_(22766),S=_(73863);var C=_(32349);function is960Fen(i){const s=i.split(" ")[2];return!!s&&!s.toLowerCase().split("").some((i=>["-","k","q"].includes(i)))}var P=_(63930),O=_(17925),M=Object.defineProperty,R=Object.defineProperties,D=Object.getOwnPropertyDescriptors,j=Object.getOwnPropertySymbols,$=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable,__defNormalProp=(i,s,_)=>s in i?M(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,__spreadValues=(i,s)=>{for(var _ in s||(s={}))$.call(s,_)&&__defNormalProp(i,_,s[_]);if(j)for(var _ of j(s))U.call(s,_)&&__defNormalProp(i,_,s[_]);return i},V={changeSettings({commit:i,state:{gameStoreNamespace:s}},_){(0,O.cF)(s).setOptions(_),_.variant&&i("setVariant",_.variant)},clearBoard({state:{gameStoreNamespace:i}}){(0,O.cF)(i).load({fen:"8/8/8/8/8/8/8/8"})},getCurrentFullLine:({state:{gameStoreNamespace:i}})=>(0,O.cF)(i).getCurrentFullLine(),clearMarkings({state:{gameStoreNamespace:i}}){(0,O.cF)(i).clearMarkings()},createContinuation({state:{gameStoreNamespace:i}}){(0,O.cF)(i).createContinuation()},deleteNode({state:{gameStoreNamespace:i}},s){const _=(0,O.cF)(i);let T=s;s||(T=_.getLastMove().ids);const{line:S,move:C}=T;_.deletePosition(C,S)},getPgn({commit:i,state:{gameStoreNamespace:s}},_){i("setPgn",(0,O.cF)(s).getPGN(_))},getPgnHeaders({commit:i,state:{gameStoreNamespace:s}}){i("setPgnHeaders",(0,O.cF)(s).getHeaders())},getPieces:({state:{gameStoreNamespace:i}})=>(0,O.cF)(i).getPieces().getCollection(),goToNode({state:{gameStoreNamespace:i}},{line:s=0,move:_}){(0,O.cF)(i).selectNode(s,_)},init({dispatch:i},s={}){!(0,P.z)(s)&&Object.keys(s).find((i=>s[i]))?("string"!=typeof s.pgn||s.pgn.length||(s.moves=""),s.tcn&&(s.moves=s.tcn),i("load",s)):i("load",{fen:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",moves:""})},load({state:{gameStoreNamespace:i}},s){(0,O.cF)(i).load(s,s.options)},loadFromFen({state:{gameStoreNamespace:i}},s){if(!s)return null;(0,O.cF)(i).load({fen:s,variant:is960Fen(s)?"chess960":"chess"})},loadFromPgn({state:{gameStoreNamespace:i}},{pgn:s}){if(!s)return null;(0,O.cF)(i).load({pgn:s})},loadFromSanMoves({state:{gameStoreNamespace:i}},s){var _;const T=(0,O.cF)(i),{canAddMovesToMainLine:S}=T.getMode().getOptions();!S&&T.isAtEndOfLine()&&0===(null==(_=T.getSelectedNode().ids)?void 0:_.line)&&T.createContinuation(),T.load({moves:s},{atCurrent:!0,method:"merge"})},makeMove({dispatch:i},s){var _;i("move",null!=(_=s.san)?_:s)},makeOpponentMove({state:{gameStoreNamespace:i}},s){(0,O.cF)(i).move(s)},makeOpponentTcnMove({state:{gameStoreNamespace:i}},s){(0,O.cF)(i).move({tcn:s})},makeTcnMove({state:{gameStoreNamespace:i}},s){(0,O.cF)(i).move({tcn:s})},mark({state:{gameStoreNamespace:i}},s){var _;(0,O.cF)(i).mark(s,null==(_=s.isNodeMarking)||_)},markArrow({state:{gameStoreNamespace:i}},s){var _,T;(0,O.cF)(i).mark({arrow:(_=__spreadValues({},s),T={from:s.fromMove,to:s.toMove},R(_,D(T)))},!0)},markEffect({dispatch:i},{effect:s,persist:_}){i("updateMarkings",{effect:s,isNodeMarking:!_})},markSquare({state:{gameStoreNamespace:i}},s){(0,O.cF)(i).mark({square:s},!0)},moveBackward({state:{gameStoreNamespace:i}}){(0,O.cF)(i).moveBackward()},moveForward({state:{gameStoreNamespace:i}}){(0,O.cF)(i).moveForward()},move({state:{gameStoreNamespace:i}},s){var _;let T=s;(null==(_=s.to)?void 0:_.file)&&(T={from:S.c.getSanFromFileRank(s.from),to:S.c.getSanFromFileRank(s.to)});(0,O.cF)(i).move(T)},moveListContextMenuAction(){},moveToStart({state:{gameStoreNamespace:i}}){(0,O.cF)(i).selectLineStart()},moveToEnd({state:{gameStoreNamespace:i}}){(0,O.cF)(i).selectLineEnd()},onNodeChange({commit:i,state:{gameStoreNamespace:s}}){var _;const S=(0,O.cF)(s);i("setSelectedNode",S.getSelectedNode()),i("setIsAtEndOfLine",S.isAtEndOfLine()),i("setMaterial",S.getMaterial()),i("setHistoryFENs",S.getHistoryFENs()),i("setMainLine",(0,C.Z)(S.getLine(0))),i("setLegalMoves",S.getLegalMoves()),i("setPositionDetails",S.getPositionDetails()),i("setLines",(0,C.Z)(S.getRawLines())),i("setPgn",S.getPGN()),i("setResult",S.getResult()),i("setTurn",S.getTurn()),i("setPlayingAs",null==(_=S.getPlayingAs)?void 0:_.call(S)),i("setVariant",S.getVariant()),i("setIsGameOver",S.isGameOver()),i("setTcn",T.Z.encodeTCN(S.getLine(0))),i("setStartingMoveNumber",S.getStartingMoveNumber())},resetGame({state:{gameStoreNamespace:i}}){(0,O.cF)(i).load({fen:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"})},resetToMainLine({state:{gameStoreNamespace:i}}){(0,O.cF)(i).resetToMainLine()},selectLineEnd({state:{gameStoreNamespace:i}},s=0){(0,O.cF)(i).selectLineEnd(s)},selectLineStart({state:{gameStoreNamespace:i}}){(0,O.cF)(i).selectLineStart()},setMode({commit:i},{mode:s}){i("setMode",s)},setPlayingAs({commit:i,state:{gameStoreNamespace:s}},_){var T;const S=(0,O.cF)(s);null==(T=S.setPlayingAs)||T.call(S,_),i("setPlayingAs",_)},setResult({commit:i,state:{gameStoreNamespace:s}},_){(0,O.cF)(s).setResult(_),i("setResult",_)},setTimestamps({commit:i,state:{gameStoreNamespace:s}},_){const T=(0,O.cF)(s);T.timestamps.setMany(_),i("setMainLine",(0,C.Z)(T.getLine(0)))},takeBackMove({state:{gameStoreNamespace:i}}){const s=(0,O.cF)(i),{line:_,move:T}=s.getLastMove().ids;s.deletePosition(T,_)},unmark({state:{gameStoreNamespace:i}},s){(0,O.cF)(i).unmark(s)},updateMarkings({state:{gameStoreNamespace:i}},{effect:s,arrow:_,isNodeMarking:T=!0,resetFirst:S=!0,types:C=[]}){const P=(0,O.cF)(i);S&&P.clearMarkings(C),s&&P.mark({effect:s},T),(null==_?void 0:_.squares)&&P.mark({arrow:{color:_.color,opacity:.95,from:_.squares.substring(0,2),to:_.squares.substring(2,4)}},T)},updateNode({state:{gameStoreNamespace:i}},{ids:s,data:_}){const T=(0,O.cF)(i);if(_.insertCommentAfterLastNode){const i=[...T.getLine(s.line)].pop();T.updateNode(i.ids,{comment:_.insertCommentAfterLastNode})}_.commentBefore&&T.updateLineComment(_.commentBefore,s.line),T.updateNode(s,_)},updatePgnHeaders({commit:i,state:{gameStoreNamespace:s}},_){const T=(0,O.cF)(s);T.setGameDetails(_),i("setPgnHeaders",_),i("setPgn",T.getPGN())}},Z=_(42805);var Y={atFinalMoveNode:i=>i.isAtEndOfLine,canMoveForward:i=>!i.isAtEndOfLine,game:i=>i,gameNodes:i=>i.mainLine,getCurrentFen:i=>i.historyFENs[i.historyFENs.length-1],getMoveList:i=>i.tcn,getMoveText:i=>i.selectedNode.san,getSanMoves:i=>i.mainLine.map((i=>i.san)),isUserTurn:i=>i.playingAs===i.turn,selectedMoveNodeIndex:i=>i.selectedNode.moveNumber,selectedNode:i=>i.selectedNode,selectedPly:i=>function getPlyFromWholeMoveNumber({selectedNode:i,startingMoveNumber:s,turn:_}){if(!(null==i?void 0:i.wholeMoveNumber)){const i=(0,Z.SH)(_);return getPly(i===Z.lA.ColorsAsNumbers.White?s:s-1,i)}return getPly(i.wholeMoveNumber,i.color);function getPly(i,s){return 2*i-(s===Z.lA.ColorsAsNumbers.White?1:0)}}({selectedNode:i.selectedNode,startingMoveNumber:i.startingMoveNumber,turn:i.turn}),variant:i=>i.variant},X=Object.defineProperty,Q=Object.defineProperties,ee=Object.getOwnPropertyDescriptors,te=Object.getOwnPropertySymbols,ne=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable,mutations_defNormalProp=(i,s,_)=>s in i?X(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,ie={setGameStoreNamespace(i,s){i.gameStoreNamespace=s},setHistoryFENs(i,s){i.historyFENs=s},setIsGameOver(i,s){i.isGameOver=s},setLegalMoves(i,s){i.legalMoves=s},setMaterial(i,s){i.material=s},setPlayingAs(i,s){i.playingAs=s},setPositionDetails(i,s){if(s){const{castling:T}=s;i.positionDetails=(_=((i,s)=>{for(var _ in s||(s={}))ne.call(s,_)&&mutations_defNormalProp(i,_,s[_]);if(te)for(var _ of te(s))re.call(s,_)&&mutations_defNormalProp(i,_,s[_]);return i})({},i.positionDetails),Q(_,ee({castling:T})))}else i.positionDetails=null;var _},setIsAtEndOfLine(i,s){i.isAtEndOfLine=s},setMode(i,s){i.mode=s},setResult(i,s){i.result=s},setSelectedNode(i,s){i.selectedNode=(0,C.Z)(s)},setStartingMoveNumber(i,s){i.startingMoveNumber=s},setTurn(i,s){i.turn=s},setMainLine(i,s){i.mainLine=s},setLines(i,s){i.lines=s},setPgn(i,s){i.pgn=s},setPgnHeaders(i,s){i.pgnHeaders=s},setTcn(i,s){i.tcn=s},setVariant(i,s){i.variant=s}},ae={namespaced:!0,actions:V,getters:Y,mutations:ie,state:O.ZP}},5771:function(i,s,_){"use strict";_.d(s,{y:function(){return unsavedChangesConfirmConfig}});var T=_(18160);function showConfirm(i){const s=T.Z.trans("Are you sure you want to leave? You have unsaved changes");return i.returnValue=s,s}function disableConfirm(){window.removeEventListener("beforeunload",showConfirm)}function unsavedChangesConfirmConfig(i=[]){return{init_instance_callback(s){s.on("input",(()=>function createEventListeners(i=[]){window.addEventListener("beforeunload",showConfirm),i.forEach((i=>i&&i.addEventListener("click",disableConfirm,!0)))}(i)),{once:!0})}}}},71340:function(i,s,_){"use strict";_.d(s,{ZC:function(){return T},kj:function(){return S},mx:function(){return C},Yi:function(){return P}});const T={getOptions:"web_user_callback_get_board_settings",getStyles:"web_themes_data_callback",updateOption:_(20517).f},S=[{key:"0",value:null},{key:"1",value:"inside"},{key:"2",value:"outside"}],C=.3,P={pieces:["real3d"],animations:["arcade","natural"]}},99079:function(i,s,_){"use strict";var T=_(71340),S=_(32793);s.Z=class BoardHelper{static getAnimationType(i){return"battle"===i?"default":i}static getAnimationTypes(i,s){if(!Array.isArray(i))return i;const _=[...i];let S=["battle"];return T.Yi.pieces.indexOf(s)>=0&&(S=S.concat(T.Yi.animations)),S.forEach((i=>{const s=_.findIndex((s=>s.code===i));s>-1&&_.splice(s,1)})),_}static getPieceStyles(i){if(!Array.isArray(i)||"IE"!==(0,S.qs)().name)return i;const s=i.findIndex((i=>"real3d"===i.code));return s>-1&&i.splice(s,1),i}static getCoordinatePositioning(i){const s=T.kj.find((s=>[s.key,s.value].includes(i)));return s?s.value:null}static pieceChangeRequiresRefresh(i,s){const _=i===s,S=T.Yi.pieces.indexOf(i)>-1||T.Yi.pieces.indexOf(s)>-1;return!_&&S}static animationChangeRequiresRefresh(i,s){return T.Yi.animations.indexOf(i)>-1||T.Yi.animations.indexOf(s)>-1}static validateSize(i,s,_,T){let S=Math.min(i,s);return S=Math.max(S,_),S=Math.floor(S/T)*T,S=S>=_?S:S+T,S}}},94573:function(i,s,_){"use strict";_.d(s,{Z:function(){return Z}});var T=_(11721),S=_(9669),C=_.n(S),P=_(98480),O=_(20517),M=_(6159),R=_(38075),D=_(25014);var j=_(3510),$=_(45236),U=_(71340),V=_(42805),Z={getDefaultOptions:()=>({allowMarkings:!0,animationType:V.$l.Animation.Types.Default,autoPromote:!1,boardStyle:"green",captureKeyStrokes:!0,coordinates:V.$l.CoordinatesPositions.Inside,darkMode:$.Yc,diagramStyle:!0,enabled:!0,highlightColor:"#f8f893",highlightLegalMoves:!1,highlightMoves:!0,highlightOpacity:.5,isWhiteOnBottom:!1,legalPositionCheck:"full",moveMethod:V.$l.MoveMethods.Drag,overlayInAnalysisMode:!0,pieceStyle:"neo",playSounds:!0,premoveHighlightColor:"#f42a32",premoveHighlightOpacity:.5,real3D:!1,rounded:!0,soundTheme:"default",showTimestamps:!1}),getOptions:()=>(0,P.R)(),getStyles:()=>C().get(D.Z.generate(U.ZC.getStyles)).then((i=>i.data)),updateOption:(i,s)=>(window.chesscom.features.includes("settings_service_data_sync")&&(0,j.z)((0,T.R)({[i]:s})),async function updateBoardOption(i,s){if(!O.f[i])throw new Error(`${i} is not a valid board option`);const[_,T]=(0,M.M)(i,s);await R.Z.post(D.Z.generate(O.f[_]),{action:T})}(i,s))}},1849:function(i,s,_){"use strict";_.d(s,{Z:function(){return ChessSounds}});const T=window.AudioContext||window.webkitAudioContext;let S=Boolean(T);function isSuspended(){return S}function resumeAudio(i){if(T){if(window.chessComAudioContext||(window.chessComAudioContext=function newAudioContext(){try{return new T}catch(i){return null}}()),!window.chessComAudioContext||!window.chessComAudioContext.resume)return S=!1,void i();window.chessComAudioContext.resume().then((()=>{S=!1,i()}))}}const C="sound-suspended",P="sound-enabled",O=["webm","ogg","mp3","wav"],M=["move-check","premove","capture","castle","game-end","game-start","promote","move-opponent","move-self"],R=M.concat(["click","correct","drawoffer","illegal","incorrect","notify","tenseconds"]);function getThemeUrl(i,s,_="default"){return`//images.chesscomfiles.com/chess-themes/sounds/_${s.toUpperCase()}_/${_}/${i}.${s}`}class Sound{constructor(i,s){this.code=i,this.theme=s,this.tags=[]}load(){this.unload(),this.addTag()}addTag(){const i=document.createElement("audio");i.setAttribute("preload","auto"),function getUrls(i,s){return M.includes(i)?O.map((_=>getThemeUrl(i,_,s))):R.includes(i)?O.map((s=>getThemeUrl(i,s))):[`/bundles/web/sounds/${i}.mp3`]}(this.code,this.theme).forEach((s=>{const _=s.split(".").pop(),T="mp3"===_?"audio/mpeg":`audio/${_}`,S=document.createElement("source");S.setAttribute("src",s),S.setAttribute("type",T),i.appendChild(S)})),document.body.appendChild(i),i.pause&&i.pause(),this.tags.push(i)}unload(){for(;this.tags.length;){const i=this.tags.shift();(null==i?void 0:i.parentNode)&&i.parentNode.removeChild(i)}}play(){const i=this.tags.find((i=>i.paused||i.ended));if(!i){if(this.tags.length>=5)return;return this.addTag(),void this.play()}const s=i.play();s&&s.catch((()=>{}))}}var D=_(74672);let j=0,$=!1;function enableSound(){isSuspended()&&resumeAudio((()=>{j=0,$=!1,(0,D.o)({key:P}),window.$unbindSound&&window.$unbindSound()}))}function whenEnabled(i){const listener=s=>{s&&s.data&&s.data.key===P&&(i(),window.removeEventListener("message",listener))};window.addEventListener("message",listener)}function waitUserInteraction(){window.$unbindSound||function addDirectiveEventListeners(i,s,_,T){const S=`$unbind${i}`;s[S]&&s[S](),Object.keys(_).forEach((i=>{s.addEventListener(i,_[i],T)})),s[S]=()=>{Object.keys(_).forEach((i=>{s.removeEventListener(i,_[i]),delete _[i]})),delete s[S]}}("Sound",window,{mousedown:enableSound,keydown:enableSound,touchstart:enableSound,touchend:enableSound})}function unloadSound(i){i.unload()}const U=["game-start","game-end","capture","castle","premove","move-self","move-check","move-opponent","promote","notify","tenseconds","illegal"];class ChessSounds{constructor(i,s){this.sounds={},this.load(i,s)}load(i,s){let _=s;s||(_=U),_.forEach((s=>{this.sounds[s]=function loadSound(i,s){const _=new Sound(i,s);return isSuspended()?(waitUserInteraction(),whenEnabled((()=>_.load()))):_.load(),_}(s,i)}))}play(i){!function playSound(i){isSuspended()?!$&&j>3?(j=0,$=!0,(0,D.o)({key:C})):$||(j++,enableSound(),whenEnabled((()=>i.play()))):i.play()}(this.sounds[i])}removeAll(){Object.values(this.sounds).forEach(unloadSound),this.sounds={}}}},43037:function(i,s,_){"use strict";_.d(s,{x:function(){return T}});const T={getLine:(i,s)=>i[s]||null,getNode:(i,s,_)=>{if("number"==typeof s){if(void 0!==_){const S=T.getLine(i,Math.max(0,s));return S?S[_]:null}return null}if(!s)return null;const S=T.getLine(i,Math.max(0,s.line));return S?S[s.move]:null},getSelectedLine:i=>T.getLine(i.jce._lines(),i.tree.selected.line),getSelectedNode:i=>T.getNode(i.jce._lines(),i.tree.selected),nodeIsSelected:(i,s)=>!!(s||s.line||s.move)&&(i.selected.line===s.line&&i.selected.move===s.move),getLinesFromJce:i=>T.formatLinesFromJce(i.jce._lines()),getJceSelectedLine:i=>i._lines()[i._history().id],formatLinesFromJce:i=>T.consolidateComments(i),consolidateComments:i=>i.map((s=>{const _=T.isContinuation(i,s.id)?T.getNode(i,s.id,1):T.getNode(i,s.id,0);return _?(s.initComment&&(_.commentBefore=s.initComment),s):s})),isContinuation:(i,s)=>{const _=T.getLine(i,s);if(!_)return!1;if(void 0!==_.parentId&&void 0!==_[0]){const s=T.getNode(i,_.parentId,_.atMoveNode);return!(!s||!s.move)&&s.move===_[0].move}return!1},isMainLine:i=>0===i,getNextNodeIds:(i,s)=>!i||i.move+s<0?null:{line:i.line,move:i.move+s},getNextContinuationLineId:(i,s)=>{const _=T.getNode(i,s);if(!_||!_.lines)return null;const S=_.lines.find((s=>T.isContinuation(i,s)));return-1!==S?S:null},getParentNode:(i,s)=>{const _={line:i[s.line].parentId,move:i[s.line].atMoveNode};return T.findNode(i,_)},getParentNodeIds:(i,s)=>{const _=T.getLine(i,s.line);return _&&void 0!==_.parentId?{line:_.parentId,move:_.atMoveNode}:null},deleteRemainingNodes:(i,s)=>i?(i.length=s+1,i):null,deleteNode:(i,s)=>T.prune(i,{line:s.line,move:s.move-1}),deleteLine:(i,s)=>{const _=T.getLine(i,s);if(void 0!==_.parentId){const S=T.getNode(i,{line:_.parentId,move:_.atMoveNode});S.lines=S.lines.filter((i=>i!==s)),0===S.lines.length&&delete S.lines}const S=i.filter((i=>T.isMainLine(i.id)||i.id!==s));return T.rebuildIds(S)},rebuildIds:i=>{const s=[];return i.forEach(((i,_)=>{i.id!==_&&(s[i.id]=_)})),i.map((_=>(_.id=void 0!==s[_.id]?s[_.id]:_.id,void 0!==s[_.parentId]&&(_.parentId=s[_.parentId]),_.forEach((_=>{_.ids.line=void 0!==s[_.ids.line]?s[_.ids.line]:_.ids.line,_.lines&&_.lines.length>0&&(_.lines=_.lines.map((i=>void 0!==s[i]?s[i]:i)).filter((s=>void 0!==i[s])),0===_.lines.length&&delete _.lines)})),_)))},prune:(i,s)=>T.getNode(i,{line:s.line,move:s.move+1})?(i[s.line]=T.deleteRemainingNodes(i[s.line],s.move),!T.isMainLine(s.line)&&T.isFirstVisibleNode(i,s)&&i.splice(i.findIndex((i=>i.id===s.line)),1),i.sort(((i,s)=>i.id-s.id)).reduce(((i,s)=>{const _=T.getNode(i,{line:s.parentId,move:s.atMoveNode});return(T.isMainLine(s.id)||_)&&i.push(s),i}),[])):i,isFirstNodeInTree:i=>0===i.line&&-1===i.move,isFirstVisibleNode:(i,s)=>T.isContinuation(i,s.line)?1===s.move:0===s.move,isFirstNodeInLine:(i,s)=>s&&i&&i[s.line]&&i[s.line][0]&&i[s.line][0].ids&&i[s.line][0].ids.line===s.line&&i[s.line][0].ids.move===s.move,isHead:(i,s)=>s&&i[s.line].length-1===s.move||!1,getHeadIds:(i,s)=>({line:s,move:i[s].length-1}),nodeMatchesMove:(i,s,_)=>{const S=T.getNode(i,s);return!!S&&(S.from===_.from&&S.to===_.to&&(S.promotion||null)===(_.promotion||null))},shouldMatchMove:(i,s,_)=>i&&1===s&&0===_,getNextMatchingNode:(i,s={},_)=>{const S=T.getNode(i,s),C=T.getNode(i,s.line,s.move+1);return i.reduce(((i,s)=>i.concat(s)),[]).filter((i=>S&&i.moveNumber===S.moveNumber+1||C&&i.moveNumber===C.moveNumber)).filter((s=>!!(S&&s.ids.line===S.ids.line||C&&s.ids.line===C.ids.line)||(!!(S&&S.lines&&-1!==S.lines.indexOf(s.ids.line)&&T.isContinuation(i,s.ids.line))||!(!C||!C.lines||-1===C.lines.indexOf(s.ids.line)||T.isContinuation(i,s.ids.line))))).filter((s=>T.nodeMatchesMove(i,s.ids,_))).sort(((i,s)=>i.ids.line-s.ids.line))[0]||null},clearNode:(i,s)=>{const _=T.getNode(i,s);return _?(delete _.comment,delete _.annotation,_):null},findNode:(i,s={},_,S=!0)=>{if(!i||void 0===s.line)return null;if("string"==typeof _)switch(s.move){case"begin":s.move=0;break;case"end":s.move=i[0].length-1}else if(void 0===s.move)return i[s.line];let C;return _&&0!==Math.abs(_)&&(s=new Array(Math.abs(_)).fill(_/Math.abs(_)).reduce(((s,_)=>{if(null===s)return null;const P=T.isContinuation(i,s.line);let O=T.getNextNodeIds(s,_);if(T.getNode(i,O)&&(-1!==_||!P||0!==O.move))return O;switch(_){case 1:return S?s:(C=T.getNextContinuationLineId(i,s),null!==C?{line:C,move:1}:null);case-1:return O=P?T.getParentNodeIds(i,s):T.getNextNodeIds(T.getParentNodeIds(i,s),-1),T.getNode(i,O)?O:s;default:return null}}),s)),T.getNode(i,s)||null},clearNodeMarkings:(i,s)=>{const _=T.getNode(i,s);return _?(delete _.squares,delete _.arrows,delete _.effects,_):null},clearNodeAnalysis:(i,s)=>{const _=T.getNode(i,s);return _?(delete _.comment,delete _.annotation,delete _.additionalAnnotation,_):null},clearAllMarkings:i=>i?(i.forEach((s=>{s.length>0&&s.forEach((s=>T.clearNodeMarkings(i,{line:s.ids.line,move:s.ids.move})))})),i):null,clearAnalysis:i=>i?(i.forEach((s=>{s.length>0&&s.forEach((s=>T.clearNodeAnalysis(i,{line:s.ids.line,move:s.ids.move})))})),i):null}},73863:function(i,s,_){"use strict";_.d(s,{c:function(){return D}});var T=_(70125),S=Object.defineProperty,C=Object.defineProperties,P=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,__defNormalProp=(i,s,_)=>s in i?S(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,__spreadValues=(i,s)=>{for(var _ in s||(s={}))M.call(s,_)&&__defNormalProp(i,_,s[_]);if(O)for(var _ of O(s))R.call(s,_)&&__defNormalProp(i,_,s[_]);return i},__spreadProps=(i,s)=>C(i,P(s));const D={getId:i=>{const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";return Array(i||20).fill(void 0).reduce((i=>i+s.charAt(Math.floor(Math.random()*s.length))),"")},getInitialFen:()=>"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",formatJSTimestampForPgn:i=>{const s=new Date(i),_=`0${s.getUTCDate()}`.slice(-2),T=`0${s.getUTCMonth()+1}`.slice(-2);return`${s.getFullYear()}-${T}-${_}`},getSanFromFileRank:i=>i&&i.file&&i.rank?String.fromCharCode(96+i.file)+i.rank.toString():null,getFileRankFromSan:i=>i?{file:i.toLowerCase().charCodeAt(0)-96,rank:Number(i.charAt(1))}:null,getPieceAt:(i,s)=>i.setup.pieces.find((i=>i.file===s.file&&i.rank===s.rank)),cloneGame:i=>({id:i.id,variant:i.variant,jce:i.jce,tree:D.cloneTree(i.tree),setup:(0,T.Q)((0,T.P)(i.setup)),markings:__spreadValues({},i.markings),settings:__spreadValues({},i.settings),history:[...i.history],premoves:i.premoves.map((i=>(0,T.Q)((0,T.P)(i))))}),cloneTree:i=>__spreadProps(__spreadValues({},i),{initialMarkings:JSON.parse(JSON.stringify(i.initialMarkings)),selected:__spreadValues({},i.selected),selectedNode:i.selectedNode?__spreadProps(__spreadValues({},i.selectedNode),{ids:__spreadValues({},i.selectedNode.ids),hash:[...i.selectedNode.hash],lines:i.selectedNode.lines&&[...i.selectedNode.lines],arrows:i.selectedNode.arrows&&[...i.selectedNode.arrows]}):null}),getFirstFen:i=>i.tree.lines[0].length?i.tree.lines[0][0].beforeFen:i.setup.fen}},86540:function(i,s,_){"use strict";_.d(s,{j:function(){return S}});var T=_(42805);const S=[T.QY.APIEvents.CreateGame,T.QY.APIEvents.DeletePosition,T.QY.APIEvents.Load,T.QY.APIEvents.Move,T.QY.APIEvents.MoveBackward,T.QY.APIEvents.MoveForward,T.QY.APIEvents.MoveVariation,T.QY.APIEvents.PromoteVariation,T.QY.APIEvents.SelectLineEnd,T.QY.APIEvents.SelectLineStart,T.QY.APIEvents.SelectNode,T.QY.APIEvents.ResetToMainLine]},52085:function(i,s,_){"use strict";_.d(s,{y:function(){return toggleBodyClass}});var T=_(3775);function toggleBodyClass(i,s){!function toggleClass(i,s,_){const S=i.classList,C=S.contains(s),P=(0,T.jn)(_)?_:!C;P!==C&&(P?S.add(s):S.remove(s))}(document.body,i,s)}},94952:function(i,s,_){"use strict";_.d(s,{a:function(){return toggleOutsideCoords}});var T=_(52085),S=_(17686);function toggleOutsideCoords(i){(0,T.y)(S.I.BodyClass.OutsideCoords,i)}},58558:function(i,s,_){"use strict";_.d(s,{j:function(){return togglePseudo3d}});var T=_(52085),S=_(17686);function togglePseudo3d(i){(0,T.y)(S.I.BodyClass.Pseudo3d,i)}},17686:function(i,s,_){"use strict";var T;_.d(s,{I:function(){return T}}),(i=>{let s;var _;(_=s=i.BodyClass||(i.BodyClass={})).Ad="with-und",_.Analysis="with-analysis",_.AnalysisCollapsed="with-analysis-collapsed",_.Comments="with-comments",_.DoubleBoard="double-board",_.Evaluation="with-evaluation",_.Pseudo3d="pseudo-3d",_.FocusMode="focus-mode",_.HandPieces="with-pieces",_.HideBoardIcons="hide-board-icons",_.MobileBoardHidden="mobile-board-hidden",_.OutsideCoords="outside-coords",_.Players="with-players",_.Real3d="real-3d",_.Tabs="with-tabs",_.TheatreMode="theatre-mode",_.Videos="with-videos"})(T||(T={}))},64694:function(i,s,_){"use strict";_.d(s,{Y4:function(){return S},U3:function(){return C},kg:function(){return P},_j:function(){return O},wl:function(){return M}});var T=_(25014);const S={amplitudeProps:"data-amplitude-props",speedChessChampionshipUrl:"data-speed-chess-championship-url",challengeUser:"data-challenge-user",loginAndGoRoute:"data-route-login-and-go",registerRoute:"data-route-register",routes:"data-routes"},C={CLUB_CHAT_MODERATOR_ACTION:"club-chat-moderator-action",CLOSE_SHAREABLE_URL_MODAL:"CLOSE_SHAREABLE_URL_MODAL",HIDE_FRIEND_REQUEST:"hide-friend-request",MODAL_DID_HIDE:"MODAL_DID_HIDE",OPEN_SHAREABLE_URL_MODAL:"OPEN_SHAREABLE_URL_MODAL",OPEN_SHAREABLE_URL_MODAL_FAILED:"OPEN_SHAREABLE_URL_MODAL_FAILED",SEND_NEW_GAME_SEEK:"SEND_NEW_GAME_SEEK",SEND_NEW_GAME_SEEK_SUCCESS:"SEND_NEW_GAME_SEEK_SUCCESS",SHOW_ONBOARD_MODAL:"SHOW_ONBOARD_MODAL",SHOW_UPGRADE_MODAL:"SHOW_UPGRADE_MODAL",START_DIRECT_CHAT:"START_DIRECT_CHAT"},P={MOBILE_WIDTH:960,TOOLTIP_OFFSET:8},O={registerRoute:i=>T.Z.generate("web_security_register",{redirectUrl:i}),loginAndGoRoute:i=>T.Z.generate("web_security_login_and_go",{redirectUrl:i})},M={AMPLITUDE_NAV_SELECTION:"[data-amplitude-nav-selection]",FRIEND_RESULTS:".svelte-friend-result",LESSONS_CONTAINER:".lessons-container",LOGOUT_FORM:".form.logout",LOGOUT_TRIGGER:"#sb .logout",MAIN_NAV:"#sb",MAIN_NAV_SOCIAL_LINK:"#sb .link.social",MAIN_NAV_HOME_LINK:"#sb .link.home",MAIN_NAV_LINKS:"#sb .menu > .link",MAIN_NAV_LOGIN_LINK:"#sb .login",MAIN_NAV_PLAY_LINK:"#sb .link.play",MAIN_NAV_REGISTER_LINK:".signup.register",MAIN_TOP_NAV:"#sb .menu.top",MAIN_TOP_NAV_LINKS:"#sb .menu.top > .link",SEARCH_INPUT:'input[name="q"]',SIGN_UP:".signup",TOOLTIP:".svelte-tooltip",TOOLTIP_TRIGGER:"[data-tooltip-content]"}},5986:function(i,s,_){"use strict";_.d(s,{pv:function(){return joinUrl},x4:function(){return loginUrl}});var T=_(64694);var S={GAME_ILLEGAL_MOVE:100,RATING_MAX:3500,RATING_MIN:0,ACTIVE_DAY_CUTOFF:365,TIME_WARNING_SECONDS:28800,MAX_DAY_PER_MOVE:14,TIME_MULTIPLIER:10,DEFAULT_NAME:"Let's Play!",WELCOME_NAME:"Welcome to Chess.com!",MIN_CHEAT_POLICY_RATING:2e3,MIN_SUSPICIOUS_PLAY_RATING:2e3,MIN_SUSPICIOUS_PLAY_TOGGLE_PERC:75,MIN_SUSPICIOUS_PLAY_PLY_COUNT:40,MIN_PLY_COUNT_RATED:6,SPAM_CHECK_GAMES_MIN_LIMIT:5,SPAM_CHECK_NEW_PLAYERS_GAMES_MIN_LIMIT:10,DEFAULT_FEN_SHORT:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq",DEFAULT_FEN:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",ACCESS_LEVEL_SUPER_ADMIN:"super_admin",ACCESS_LEVEL_ADMIN:"admin",ACCESS_LEVEL_MEMBER:"member",ACTIVITY_TYPE_NEWS:"news",ACTIVITY_TYPE_EVENT:"event",ACTIVITY_TYPE_FORUM:"forum",ACTIVITY_TYPE_NOTES:"notes",POINT_VALUE:1,LAST_ACTIVITY_DATE_EXPIRATION_IN_MINUTES:10,MAX_PROBLEMS_PER_DAY_DEFAULT:3,AVERAGE_TIME_PER_MOVE:30,MIN_ATTEMPT_COUNT:20,MIN_SCORE_TO_BE_QUEUED:5,BEST_SCORE:0,DEAD_SCORE:10,MIN_RATING:400,MAX_ATTEMPT_LOGGED_OUT:10,USER_FEED_MAX_PAGES:4,USER_FEED_ITEMS_FIRST_PAGE:5,USER_FEED_ITEMS_PER_PAGE:20,STD_PROP_LIST:1,ARRAY_AS_PROPS:2,DEFAULT_LOCALE:"en_US",DEFAULT_LANGUAGE_CODE:"en",DEFAULT_LANGUAGE_DIRECTION:"ltr",DEFAULT_MAX_YEAR_INCREASE:5,CONTENT_ITEMS_PER_PAGE:25,LEADERBOARD_ITEMS_PER_PAGE:50,I18N_DEFAULT_LOCALE:"en_US"},C=_(25014);const P=window.context&&window.context.locale?window.context.locale:S.I18N_DEFAULT_LOCALE;C.Z.generate("web_user_home"),C.Z.generate("web_live"),C.Z.generate("web_security_logout"),C.Z.generate("web_membership",{c:"navbar"}),C.Z.generate("web_message_index"),C.Z.generate("web_stats"),C.Z.generate("web_user_settings_themes"),C.Z.generate("web_user_settings_edit"),["en_US","en"].includes(P)?C.Z.generate("web_tv"):C.Z.generate("i18n_web_tv",{_locale:P.substr(0,2)}),"ontouchstart"in window||window.navigator.maxTouchPoints>0||/firefox/i.test(window.navigator.userAgent)&&window;_(32793),_(19801),Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;let O=document.querySelector(T.wl.MAIN_NAV);const getMainNav=()=>(null==O&&(O=document.querySelector(T.wl.MAIN_NAV)),O),joinUrl=i=>{const s=i||window.location.href,_=getMainNav();return _?`${_.getAttribute(T.Y4.registerRoute)}?redirectUrl=${encodeURI(s)}`:T._j.registerRoute(i)},loginUrl=i=>{const s=i||window.location.href,_=getMainNav();return _?`${_.getAttribute(T.Y4.loginAndGoRoute)}?redirectUrl=${encodeURI(s)}`:T._j.loginAndGoRoute(i)}},20169:function(i,s,_){"use strict";_.d(s,{GO:function(){return T}});const T={PUZZLE_BATTLE_CHALLENGE_TOASTER:"puzzle-battle-challenge-toaster",PUZZLE_BATTLE_CHALLENGE_USER:"puzzle-battle-challenge-user",HOME_NOTIFICATIONS:"home-sb-notifications",LOGIN_REGISTER_MODAL:"login-register-modal",OFFLINE_CHALLENGE_TOASTER:"offline-challenge-toaster",NAV_ROOT:"sb",NOTIFICATION_TOASTERS:"notification-toasters",SHAREABLE_GAME_URL_MODAL:"shareable-game-url-modal",SHAREABLE_GAME_SHORT_UUID:"shareable-game-short-uuid"}},27427:function(i,s,_){"use strict";_.d(s,{z:function(){return T}});const T={CONNECT:"connect",DISCONNECT:"disconnect",FAILURE:"failure",MESSAGE:"message",RECONNECT:"reconnect",SUBSCRIBE:"subscribe",SUBSCRIBE_FAIL:"subscribe_fail",UNSUBSCRIBE:"unsubscribe",ERROR:"error"}},12002:function(i,s,_){"use strict";_.d(s,{fz:function(){return S},AM:function(){return T},pS:function(){return C}});_(27427);var T=(i=>(i.Base="base",i.Chat="chat",i.Classroom="classroom",i.Matcher="matcher",i.Play="play",i.Presence="presence",i.Insights="insights",i.TopPlayers="topplayers",i.Users="users",i.Invitations="invitations",i.Settings="settings",i))(T||{}),S=(i=>(i.Users="users",i))(S||{});const C=window.PubSub},70528:function(i,s){"use strict";let _=100;function delayedAction(i,s){setTimeout((()=>{i in window.toaster?(_=0,window.toaster[i](s)):(_*=2,delayedAction(i,s))}),_)}s.Z=window.toaster||{add(i){delayedAction("add",i)},remove(i){delayedAction("remove",i)}}},66447:function(i,s,_){"use strict";_.d(s,{o:function(){return copyCustomValueToClipboard}});const copyCustomValueToClipboard=i=>{const s=document.createElement("textarea");s.value=i,document.body.appendChild(s),function copyInputValueToBuffer(i){i&&(i.focus({preventScroll:!0}),i.select(),document.execCommand("copy"))}(s),document.body.removeChild(s)}},27835:function(i,s,_){"use strict";_.d(s,{R:function(){return T}});const T={CHESSBOARD_BETA:"chessboard_beta",CHESSBOARD_EFFECTS_SYNC:"chessboard_annotations_effects_sync",CHESSBOARD_RECORDER_PLUGIN:"chessboard_recorder_plugin",CHESSBOARD_WEBGL_RENDER_ERROR:"chessboard_webgl_render_error",FRIENDS_PAGE_PRODUCT:"friends_page_product",HOME_COACH_TOOLTIPS:"home_coach_tooltips",HOME_SETTINGS_ADD_LEAGUES:"home_settings_add_leagues",HOME_SETTINGS_POPULAR_FEATURES:"home_settings_popular_features",HOME_RE_ADD_OLD_FEATURES:"home_re_add_old_features",IS_LIVE:"isLive",LEADERBOARD_TREND:"client_leaderboard_trend",LEAGUES_PRODUCT:"leagues_product",UPGRADE_MODAL_COURSE_COMPLETION:"lessons_upgrade_modal_course_completion",WDL_EVAL_BAR_OPTION:"wdl_eval_bar_option"}},10942:function(i,s,_){"use strict";_.d(s,{F:function(){return hasFeatureAccess}});var T=_(20169);const S={},C=document.getElementById(T.GO.NAV_ROOT),hasFeatureAccess=(i,s)=>{var _,T;if(null==(T=null==(_=window.chesscom)?void 0:_.features)?void 0:T.includes(i))return!0;const P=s||C;return S[i]||(S[i]=Boolean(P&&P.getAttribute(i))),S[i]}},53291:function(i,s,_){"use strict";var T;_.d(s,{_:function(){return T}}),(i=>{let s;var _;let T;var S;let C;var P;(_=s=i.ObservedAttributes||(i.ObservedAttributes={})).BoardId="board-id",_.ColorsEnabled="colors-enabled",_.Direction="direction",_.DisableContextMenu="disable-context-menu",_.DisplayType="display-type",_.EngineName="engine-name",_.GameId="game-id",_.IsActive="is-active",_.Lines="lines",_.LinkToExplorer="link-to-explorer",_.MoveListId="move-list-id",_.OpeningIsClickable="opening-is-clickable",_.ExplorerIsClickable="explorer-is-clickable",_.ResultNodeIsSelectable="result-node-is-selectable",_.ScrollContainerId="scroll-container-id",_.TimestampMethod="timestamp-method",_.ToggleTimestamps="toggle-timestamps",_.Color="color",_.UpdateManually="update-manually",_.VerticalLayout="vertical-layout",(S=T=i.Events||(i.Events={})).BoardInitialized="board-initialized",S.BoardAttached="board-attached",S.BoardDetached="board-detached",(P=C=i.Elements||(i.Elements={})).ChessBoard="chess-board",P.HorizontalMoveList="horizontal-move-list",P.VerticalMoveList="vertical-move-list",P.CapturedPieces="captured-pieces",P.EcoOpening="eco-opening",P.MoveList="move-list"})(T||(T={}))},37722:function(i,s,_){"use strict";_.d(s,{A:function(){return S}});var T=_(90436);const S=`\n  <path class="${T.A.SHADOW}" d="M9 .5a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" opacity=".3"/>\n  <path class="${T.A.BACKGROUND}" d="M9 0a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" fill="#95bb4a"/>\n  <path d="M9 3.72a.48.48 0 0 0-.44.3L7.24 7.46l-3.68.19a.48.48 0 0 0-.27.84l2.86 2.32-1 3.56a.47.47 0 0 0 .18.5.46.46 0 0 0 .27.09.5.5 0 0 0 .26-.08l3.09-2 3.09 2a.5.5 0 0 0 .26.08.46.46 0 0 0 .27-.09.47.47 0 0 0 .18-.5l-1-3.56 2.86-2.32a.48.48 0 0 0-.27-.84l-3.68-.19L9.44 4A.48.48 0 0 0 9 3.72z" opacity=".1"/>\n  <path d="M9 3.22a.48.48 0 0 0-.44.3L7.24 7l-3.68.19a.48.48 0 0 0-.27.81l2.86 2.32-1 3.56a.47.47 0 0 0 .18.5.46.46 0 0 0 .27.09.5.5 0 0 0 .26-.08l3.09-2 3.09 2a.5.5 0 0 0 .26.08.46.46 0 0 0 .27-.09.47.47 0 0 0 .18-.5l-1-3.56L14.71 8a.48.48 0 0 0-.27-.84L10.76 7 9.44 3.52a.48.48 0 0 0-.44-.3z" fill="#fff"/>\n`},20216:function(i,s,_){"use strict";_.d(s,{g:function(){return S}});var T=_(90436);const S=`\n  <path class="${T.A.SHADOW}" d="M9 .5a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" opacity=".3"/>\n  <path class="${T.A.BACKGROUND}" d="M9 0a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" fill="#c93430"/>\n  <g class="${T.A.COMPONENT_SHADOW}" opacity=".2">\n    <path d="M14.68 5.48a2.77 2.77 0 0 0-.77-.92 3.81 3.81 0 0 0-1.1-.56 3.86 3.86 0 0 0-1.2-.19 3.68 3.68 0 0 0-1.19.19 5.72 5.72 0 0 0-.9.37l-.33.2a3.5 3.5 0 0 1 .43.63A3.26 3.26 0 0 1 10 6.66a.45.45 0 0 0 .19 0l.11-.09a1.13 1.13 0 0 1 .28-.18 2.54 2.54 0 0 1 .42-.23 1.61 1.61 0 0 1 .49-.07 1.13 1.13 0 0 1 .73.24.74.74 0 0 1 .3.6 1 1 0 0 1-.25.68c-.17.19-.39.4-.65.64s-.33.27-.49.42a3.08 3.08 0 0 0-.45.55 2.55 2.55 0 0 0-.33.66 2.43 2.43 0 0 0-.13.84v.35a.34.34 0 0 0 .32.32h1.72a.27.27 0 0 0 .22-.1.29.29 0 0 0 .09-.22v-.21a.93.93 0 0 1 .27-.7 6.62 6.62 0 0 1 .65-.64A4.62 4.62 0 0 0 14 9a5.58 5.58 0 0 0 .49-.6 2.92 2.92 0 0 0 .36-.73 3.08 3.08 0 0 0 .14-1 2.76 2.76 0 0 0-.31-1.19zM12.3 12.72h-1.89a.29.29 0 0 0-.22.09.33.33 0 0 0-.09.22v1.84a.31.31 0 0 0 .09.22.26.26 0 0 0 .22.1h1.89a.33.33 0 0 0 .23-.09.34.34 0 0 0 .1-.23V13a.34.34 0 0 0-.1-.22.33.33 0 0 0-.23-.06zM6.68 12.72H4.79a.29.29 0 0 0-.22.09.33.33 0 0 0-.09.22v1.84a.35.35 0 0 0 .08.22.28.28 0 0 0 .23.1h1.89a.35.35 0 0 0 .23-.09.34.34 0 0 0 .1-.23V13a.34.34 0 0 0-.1-.22.35.35 0 0 0-.23-.06zM8.28 4.56A3.63 3.63 0 0 0 7.19 4 3.86 3.86 0 0 0 6 3.81 3.78 3.78 0 0 0 4.79 4a6.65 6.65 0 0 0-.9.37 2.84 2.84 0 0 0-.55.38l-.21.19a.31.31 0 0 0 0 .41l1 1.21a.31.31 0 0 0 .21.13.54.54 0 0 0 .25-.06l.1-.09a1.46 1.46 0 0 1 .29-.18 2.2 2.2 0 0 1 .41-.18 1.57 1.57 0 0 1 .49-.07 1.13 1.13 0 0 1 .73.24.74.74 0 0 1 .3.6 1 1 0 0 1-.26.68c-.17.19-.38.4-.64.64a6.4 6.4 0 0 0-.49.42 2.7 2.7 0 0 0-.52.53 2.94 2.94 0 0 0-.34.66 2.7 2.7 0 0 0-.12.84v.35a.29.29 0 0 0 .09.22.28.28 0 0 0 .22.1h1.76a.26.26 0 0 0 .21-.1.29.29 0 0 0 .09-.22v-.21a1 1 0 0 1 .27-.7 8.22 8.22 0 0 1 .66-.64A5.68 5.68 0 0 0 8.36 9a7 7 0 0 0 .48-.6 3 3 0 0 0 .37-.73 3.1 3.1 0 0 0 .13-1 2.67 2.67 0 0 0-1.06-2.11z"/>\n  </g>\n  <path class="${T.A.COMPONENT}" fill="#fff" d="M14.68 5a2.77 2.77 0 0 0-.77-.92 3.81 3.81 0 0 0-1.1-.56 3.86 3.86 0 0 0-1.2-.19 3.68 3.68 0 0 0-1.19.17 5.72 5.72 0 0 0-.9.37l-.33.2a3.5 3.5 0 0 1 .43.63A3.26 3.26 0 0 1 10 6.16a.45.45 0 0 0 .19 0l.09-.16a1.13 1.13 0 0 1 .28-.18 2.54 2.54 0 0 1 .44-.16 1.61 1.61 0 0 1 .49-.07 1.13 1.13 0 0 1 .73.24.74.74 0 0 1 .3.6 1 1 0 0 1-.25.68c-.17.19-.39.4-.65.64s-.33.27-.49.42a3.08 3.08 0 0 0-.45.55 2.55 2.55 0 0 0-.33.66 2.43 2.43 0 0 0-.13.84v.35a.34.34 0 0 0 .32.32h1.72a.27.27 0 0 0 .22-.1.29.29 0 0 0 .09-.22v-.21a.93.93 0 0 1 .27-.7 6.62 6.62 0 0 1 .62-.66 4.62 4.62 0 0 0 .54-.46 5.58 5.58 0 0 0 .49-.6 2.92 2.92 0 0 0 .36-.73 3.08 3.08 0 0 0 .14-1A2.76 2.76 0 0 0 14.68 5zM12.3 12.22h-1.89a.29.29 0 0 0-.22.09.33.33 0 0 0-.09.22v1.84a.31.31 0 0 0 .09.22.26.26 0 0 0 .22.1h1.89a.33.33 0 0 0 .23-.09.34.34 0 0 0 .1-.23v-1.84a.34.34 0 0 0-.1-.22.33.33 0 0 0-.23-.09zM6.68 12.22H4.79a.29.29 0 0 0-.22.09.33.33 0 0 0-.09.22v1.84a.35.35 0 0 0 .08.22.28.28 0 0 0 .23.1h1.89a.35.35 0 0 0 .23-.09.34.34 0 0 0 .1-.23v-1.84a.34.34 0 0 0-.1-.22.35.35 0 0 0-.23-.09zM8.28 4.06a3.63 3.63 0 0 0-1.09-.56A3.86 3.86 0 0 0 6 3.31a3.78 3.78 0 0 0-1.2.17 6.65 6.65 0 0 0-.9.37 2.84 2.84 0 0 0-.55.38l-.21.19a.31.31 0 0 0 0 .41L4.09 6a.31.31 0 0 0 .21.13.54.54 0 0 0 .25-.06l.1-.07a1.46 1.46 0 0 1 .29-.18 2.2 2.2 0 0 1 .41-.18 1.57 1.57 0 0 1 .49-.07 1.13 1.13 0 0 1 .73.24.74.74 0 0 1 .3.6 1 1 0 0 1-.26.68c-.17.19-.38.4-.64.64a6.4 6.4 0 0 0-.49.42 2.7 2.7 0 0 0-.48.57 2.94 2.94 0 0 0-.34.66 2.7 2.7 0 0 0-.12.84v.35a.29.29 0 0 0 .09.22.28.28 0 0 0 .22.1h1.76a.26.26 0 0 0 .21-.1.29.29 0 0 0 .09-.22v-.21a1 1 0 0 1 .27-.7A8.22 8.22 0 0 1 7.84 9a5.68 5.68 0 0 0 .52-.48 7 7 0 0 0 .48-.6 3 3 0 0 0 .37-.73 3.1 3.1 0 0 0 .13-1 2.67 2.67 0 0 0-1.06-2.13z"/>\n`},84735:function(i,s,_){"use strict";_.d(s,{s:function(){return S}});var T=_(90436);const S=`\n  <path class="${T.A.SHADOW}" opacity=".3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"/>\n  <path class="${T.A.BACKGROUND}" fill="#a88865" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"/>\n  <path class="${T.A.COMPONENT_SHADOW}" opacity=".3" d="M8.4,6c-1-.75-2.52-1.09-4.83-1.09H2.49v8.71H3.57A8.13,8.13,0,0,1,8.4,14.76Z"/>\n  <path class="${T.A.COMPONENT_SHADOW}" opacity=".3" d="M9.49,14.76a8.14,8.14,0,0,1,4.84-1.17h1.08V4.88H14.33C12,4.88,10.52,5.22,9.49,6Z"/>\n  <path class="${T.A.COMPONENT}" fill="#fff" d="M8.4,5.47c-1-.75-2.52-1.09-4.83-1.09H3v8.71h.58A8.13,8.13,0,0,1,8.4,14.26Z"/>\n  <path class="${T.A.COMPONENT}" fill="#fff" d="M9.49,14.26a8.14,8.14,0,0,1,4.84-1.17h.58V4.38h-.58c-2.32,0-3.81.34-4.84,1.09Z"/>\n`},73455:function(i,s,_){"use strict";_.d(s,{Z:function(){return S}});var T=_(90436);const S=`\n  <path class="${T.A.SHADOW}" opacity=".3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"/>\n  <path class="${T.A.BACKGROUND}" fill="#1baca6" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"/>\n  <path class="${T.A.COMPONENT_SHADOW}" opacity=".2" d="M12.57,14.85a.3.3,0,0,1-.1.24.32.32,0,0,1-.23.1h-2a.3.3,0,0,1-.24-.1.41.41,0,0,1-.08-.24V13a.32.32,0,0,1,.09-.23.29.29,0,0,1,.23-.1h2a.32.32,0,0,1,.23.1.29.29,0,0,1,.1.23Zm-.11-3.93a.33.33,0,0,1-.1.23.34.34,0,0,1-.23.08H10.35a.32.32,0,0,1-.34-.31L9.86,4.15A.42.42,0,0,1,10,3.91a.3.3,0,0,1,.24-.1H12.3a.36.36,0,0,1,.25.1.42.42,0,0,1,.09.24Z"/>\n  <path class="${T.A.COMPONENT}" fill="#fff" d="M12.57,14.35a.3.3,0,0,1-.1.24.32.32,0,0,1-.23.1h-2a.3.3,0,0,1-.24-.1.41.41,0,0,1-.08-.24v-1.9a.32.32,0,0,1,.09-.23.29.29,0,0,1,.23-.1h2a.32.32,0,0,1,.23.1.29.29,0,0,1,.1.23Zm-.11-3.93a.33.33,0,0,1-.1.23.34.34,0,0,1-.23.08H10.35a.32.32,0,0,1-.34-.31L9.86,3.65A.42.42,0,0,1,10,3.41a.3.3,0,0,1,.24-.1H12.3a.36.36,0,0,1,.25.1.42.42,0,0,1,.09.24Z"/>\n  <path class="${T.A.COMPONENT_SHADOW}" opacity=".2" d="M8.07,14.85a.3.3,0,0,1-.1.24.32.32,0,0,1-.23.1h-2a.3.3,0,0,1-.24-.1.41.41,0,0,1-.08-.24V13a.32.32,0,0,1,.09-.23.29.29,0,0,1,.23-.1h2a.32.32,0,0,1,.23.1.29.29,0,0,1,.1.23ZM8,10.92a.33.33,0,0,1-.1.23.34.34,0,0,1-.23.08H5.85a.32.32,0,0,1-.34-.31L5.36,4.15a.42.42,0,0,1,.09-.24.3.3,0,0,1,.24-.1H7.8a.36.36,0,0,1,.25.1.42.42,0,0,1,.09.24Z"/>\n  <path class="${T.A.COMPONENT}" fill="#fff" d="M8.07,14.35a.3.3,0,0,1-.1.24.32.32,0,0,1-.23.1h-2a.3.3,0,0,1-.24-.1.41.41,0,0,1-.08-.24v-1.9a.32.32,0,0,1,.09-.23.29.29,0,0,1,.23-.1h2a.32.32,0,0,1,.23.1.29.29,0,0,1,.1.23ZM8,10.42a.33.33,0,0,1-.1.23.34.34,0,0,1-.23.08H5.85a.32.32,0,0,1-.34-.31L5.36,3.65a.42.42,0,0,1,.09-.24.3.3,0,0,1,.24-.1H7.8a.36.36,0,0,1,.25.1.42.42,0,0,1,.09.24Z"/>\n`},90436:function(i,s,_){"use strict";_.d(s,{A:function(){return T}});const T={BACKGROUND:"icon-background",COMPONENT:"icon-component",COMPONENT_SHADOW:"icon-component-shadow",SHADOW:"icon-shadow"}},10381:function(i,s,_){"use strict";_.d(s,{w:function(){return S}});var T=_(90436);const S=`\n  <path class="${T.A.SHADOW}" d="M9 .5a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" opacity=".3"/>\n  <path class="${T.A.BACKGROUND}" d="M9 0a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" fill="#95bb4a"/>\n  <path class="${T.A.COMPONENT_SHADOW}" d="M15.11 6.81l-5.66 5.66-1.66 1.65a.38.38 0 0 1-.55 0L2.89 9.78a.39.39 0 0 1 0-.55l1.39-1.39a.39.39 0 0 1 .55 0l2.69 2.69 5.65-5.65a.38.38 0 0 1 .55 0l1.39 1.38a.39.39 0 0 1 0 .55z" opacity=".2"/>\n  <path class="${T.A.COMPONENT}" d="M15.11 6.31L9.45 12l-1.66 1.62a.38.38 0 0 1-.55 0L2.89 9.28a.39.39 0 0 1 0-.55l1.39-1.39a.39.39 0 0 1 .55 0L7.52 10l5.65-5.65a.38.38 0 0 1 .55 0l1.39 1.38a.39.39 0 0 1 0 .58z" fill="#fff"/>\n`},20114:function(i,s,_){"use strict";_.d(s,{d:function(){return S}});var T=_(90436);const S=`\n  <path class="${T.A.SHADOW}" opacity=".3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"/>\n  <path class="${T.A.BACKGROUND}" fill="#5a9ac0" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"/>\n  <path class="${T.A.COMPONENT_SHADOW}" opacity=".2" d="M15,6.8,7.81,14a.38.38,0,0,1-.55,0L3,9.73a.41.41,0,0,1,0-.55L4.36,7.81a.4.4,0,0,1,.54,0l2.63,2.64L13.1,4.9a.38.38,0,0,1,.55,0L15,6.25A.38.38,0,0,1,15,6.8Z"/>\n  <path class="${T.A.COMPONENT}" fill="#ffffff" d="M15,6.3,7.81,13.49a.38.38,0,0,1-.55,0L3,9.23a.41.41,0,0,1,0-.55L4.36,7.31a.4.4,0,0,1,.54,0L7.53,10,13.1,4.4a.38.38,0,0,1,.55,0L15,5.75A.38.38,0,0,1,15,6.3Z"/>\n`},13015:function(i,s,_){"use strict";_.d(s,{w:function(){return S}});var T=_(90436);const S=`\n  <path class="${T.A.SHADOW}" opacity=".3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z" />\n  <path class="${T.A.BACKGROUND}" fill="#95bb4a" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z" />\n  <path class="${T.A.COMPONENT_SHADOW}" opacity=".1"\n    d="M4.44,5.41v7.68a1,1,0,0,0,1,1h7.68a1,1,0,0,0,1-1V5.41a1,1,0,0,0-1-1H5.41A1,1,0,0,0,4.44,5.41ZM12,12H6.53V6.53H12Z" />\n  <path class="${T.A.COMPONENT}" fill="#ffffff"\n    d="M4.19,5.16v7.68a1,1,0,0,0,1,1h7.68a1,1,0,0,0,1-1V5.16a1,1,0,0,0-1-1H5.16A1,1,0,0,0,4.19,5.16Zm7.53,6.56H6.28V6.28h5.44Z" />\n`},75213:function(i,s,_){"use strict";_.d(s,{R:function(){return S}});var T=_(90436);const S=`\n  <path class="${T.A.SHADOW}" opacity=".3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"/>\n  <path class="${T.A.BACKGROUND}" fill="#a09f9e" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"/>\n  <path class="${T.A.COMPONENT}" fill="#fff" d="M9,2.5A6.5,6.5,0,1,0,15.5,9,6.5,6.5,0,0,0,9,2.5Z"/>\n  <path class="${T.A.BACKGROUND}" fill="#a09f9e" d="M9,5a4,4,0,1,0,4,4A4,4,0,0,0,9,5Z"/>\n  <path class="${T.A.COMPONENT}" fill="#fff" d="M9,7.5A1.5,1.5,0,1,0,10.5,9,1.5,1.5,0,0,0,9,7.5Z"/>\n`},46153:function(i,s,_){"use strict";_.d(s,{G:function(){return S}});var T=_(90436);const S=`\n  <path class="${T.A.SHADOW}" d="M9 .5a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" opacity=".3"/>\n  <path class="${T.A.BACKGROUND}" d="M9 0a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" fill="#f0c15c"/>\n  <path class="${T.A.COMPONENT_SHADOW}" opacity=".3" d="M13.51 14.85a.3.3 0 0 1-.1.24.33.33 0 0 1-.24.1h-2a.29.29 0 0 1-.23-.1.36.36 0 0 1-.09-.24V13a.33.33 0 0 1 .1-.23.27.27 0 0 1 .22-.1h2a.33.33 0 0 1 .24.1.29.29 0 0 1 .1.23zm-.12-3.93a.29.29 0 0 1-.1.23.31.31 0 0 1-.23.08h-1.77a.31.31 0 0 1-.34-.31l-.15-6.77a.49.49 0 0 1 .08-.24.32.32 0 0 1 .25-.1h2.11a.38.38 0 0 1 .25.1.42.42 0 0 1 .09.24z"/>\n  <path class="${T.A.COMPONENT}" fill="#fff" d="M13.51 14.35a.3.3 0 0 1-.1.24.33.33 0 0 1-.24.1h-2a.29.29 0 0 1-.23-.1.36.36 0 0 1-.09-.24v-1.9a.33.33 0 0 1 .1-.23.27.27 0 0 1 .22-.1h2a.33.33 0 0 1 .24.1.29.29 0 0 1 .1.23zm-.12-3.93a.29.29 0 0 1-.1.23.31.31 0 0 1-.23.08h-1.77a.31.31 0 0 1-.34-.31l-.15-6.77a.49.49 0 0 1 .08-.24.32.32 0 0 1 .25-.1h2.11a.38.38 0 0 1 .25.1.42.42 0 0 1 .09.24z"/>\n  <path class="${T.A.COMPONENT_SHADOW}" opacity=".3" d="M7.5 14.87a.33.33 0 0 1-.09.23.35.35 0 0 1-.23.09H5.29a.28.28 0 0 1-.23-.1.35.35 0 0 1-.06-.22V13a.33.33 0 0 1 .09-.22.29.29 0 0 1 .22-.09h1.87a.35.35 0 0 1 .23.09.33.33 0 0 1 .09.22zm2.21-7.16a3 3 0 0 1-.37.73 7 7 0 0 1-.48.6 5.68 5.68 0 0 1-.52.48 8.22 8.22 0 0 0-.66.64 1 1 0 0 0-.27.7v.21a.29.29 0 0 1-.09.22.26.26 0 0 1-.21.1H5.38a.28.28 0 0 1-.22-.1.29.29 0 0 1-.09-.22v-.35a2.7 2.7 0 0 1 .12-.84 3.39 3.39 0 0 1 .33-.66A3.12 3.12 0 0 1 6 8.67a6.4 6.4 0 0 1 .49-.42c.25-.24.47-.45.64-.64a1 1 0 0 0 .26-.68.74.74 0 0 0-.3-.6 1.14 1.14 0 0 0-.73-.24 1.53 1.53 0 0 0-.49.07 2.2 2.2 0 0 0-.41.18 1.46 1.46 0 0 0-.29.18l-.1.09a.54.54 0 0 1-.25.06.31.31 0 0 1-.21-.13l-1-1.21a.31.31 0 0 1 0-.41l.21-.19a2.84 2.84 0 0 1 .55-.38A6.65 6.65 0 0 1 5.29 4a3.74 3.74 0 0 1 1.2-.17 3.86 3.86 0 0 1 1.2.17 3.75 3.75 0 0 1 1.09.56 2.67 2.67 0 0 1 1.06 2.19 3.1 3.1 0 0 1-.13.96z"/>\n  <path class="${T.A.COMPONENT}" fill="#fff" d="M7.5 14.37a.33.33 0 0 1-.09.23.35.35 0 0 1-.23.09H5.29a.28.28 0 0 1-.23-.1.35.35 0 0 1-.06-.22v-1.84a.33.33 0 0 1 .09-.22.29.29 0 0 1 .22-.09h1.87a.35.35 0 0 1 .23.09.33.33 0 0 1 .09.22zm2.21-7.16a3 3 0 0 1-.37.73 7 7 0 0 1-.48.6 5.68 5.68 0 0 1-.52.46 8.22 8.22 0 0 0-.66.64 1 1 0 0 0-.27.7v.21a.29.29 0 0 1-.09.22.26.26 0 0 1-.21.1H5.38a.28.28 0 0 1-.22-.1.29.29 0 0 1-.09-.22v-.35a2.7 2.7 0 0 1 .12-.84 3.39 3.39 0 0 1 .33-.66A3.12 3.12 0 0 1 6 8.17a6.4 6.4 0 0 1 .49-.42c.25-.24.47-.45.64-.64a1 1 0 0 0 .26-.68.74.74 0 0 0-.3-.6 1.14 1.14 0 0 0-.73-.24 1.53 1.53 0 0 0-.49.07 2.2 2.2 0 0 0-.41.18 1.46 1.46 0 0 0-.31.16l-.1.09a.54.54 0 0 1-.25.06.31.31 0 0 1-.21-.15l-1-1.21a.31.31 0 0 1 0-.41l.21-.19a2.84 2.84 0 0 1 .55-.38 6.65 6.65 0 0 1 .9-.37 3.74 3.74 0 0 1 1.2-.17 3.86 3.86 0 0 1 1.2.19 3.75 3.75 0 0 1 1.09.56 2.67 2.67 0 0 1 1.1 2.23 3.1 3.1 0 0 1-.13.96z"/>\n`},64803:function(i,s,_){"use strict";_.d(s,{d:function(){return S}});var T=_(90436);const S=`\n  <path class="${T.A.SHADOW}" d="M9 .5a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" opacity=".3"/>\n  <path class="${T.A.BACKGROUND}" d="M9 0a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" fill="#c93430"/>\n  <path class="${T.A.COMPONENT_SHADOW}" d="M14 12.58a.4.4 0 0 1 0 .56l-1.38 1.38a.4.4 0 0 1-.56 0L9 11.44l-3.08 3.08a.4.4 0 0 1-.56 0L4 13.14a.4.4 0 0 1 0-.56L7.06 9.5 4 6.42a.4.4 0 0 1 0-.56l1.36-1.38a.4.4 0 0 1 .56 0L9 7.56l3.08-3.08a.4.4 0 0 1 .56 0L14 5.86a.4.4 0 0 1 0 .56L10.94 9.5z" opacity=".2"/>\n  <path class="${T.A.COMPONENT}" d="M14 12.08a.4.4 0 0 1 0 .56L12.64 14a.4.4 0 0 1-.56 0L9 10.94 5.92 14a.4.4 0 0 1-.56 0L4 12.64a.4.4 0 0 1 0-.56L7.06 9 4 5.92a.4.4 0 0 1 0-.56L5.36 4a.4.4 0 0 1 .56 0L9 7.06 12.08 4a.4.4 0 0 1 .56 0L14 5.36a.4.4 0 0 1 0 .56L10.94 9z" fill="#f1f2f2"/>\n`},49167:function(i,s,_){"use strict";_.d(s,{Ab:function(){return T.A},s9:function(){return S.s},gt:function(){return C.g},ZE:function(){return P.Z},wC:function(){return O.w},dS:function(){return M.d},wH:function(){return R.w},R3:function(){return D.R},GE:function(){return j.G},ds:function(){return $.d},nZ:function(){return U.n},li:function(){return V.l},ul:function(){return Z.u},Yw:function(){return Y.Y}});var T=_(37722),S=_(84735),C=_(20216),P=_(73455),O=_(10381),M=_(20114),R=_(13015),D=_(75213),j=_(46153),$=_(64803),U=_(33533),V=_(8671),Z=_(52921),Y=_(54264)},33533:function(i,s,_){"use strict";_.d(s,{n:function(){return S}});var T=_(90436);const S=`\n  <path class="${T.A.SHADOW}" d="M9 .5a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" opacity=".3"/>\n  <path class="${T.A.BACKGROUND}" d="M9 0a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" fill="#dd5357"/>\n  <path class="${T.A.COMPONENT_SHADOW}" d="M14 12.58a.4.4 0 0 1 0 .56l-1.38 1.38a.4.4 0 0 1-.56 0L9 11.44l-3.08 3.08a.4.4 0 0 1-.56 0L4 13.14a.4.4 0 0 1 0-.56L7.06 9.5 4 6.42a.4.4 0 0 1 0-.56l1.36-1.38a.4.4 0 0 1 .56 0L9 7.56l3.08-3.08a.4.4 0 0 1 .56 0L14 5.86a.4.4 0 0 1 0 .56L10.94 9.5z" opacity=".2"/>\n  <path class="${T.A.COMPONENT}" d="M14 12.08a.4.4 0 0 1 0 .56L12.64 14a.4.4 0 0 1-.56 0L9 10.94 5.92 14a.4.4 0 0 1-.56 0L4 12.64a.4.4 0 0 1 0-.56L7.06 9 4 5.92a.4.4 0 0 1 0-.56L5.36 4a.4.4 0 0 1 .56 0L9 7.06 12.08 4a.4.4 0 0 1 .56 0L14 5.36a.4.4 0 0 1 0 .56L10.94 9z" fill="#f1f2f2"/>\n`},8671:function(i,s,_){"use strict";_.d(s,{l:function(){return S}});var T=_(90436);const S=`\n  <path class="${T.A.SHADOW}" d="M9 .5a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" opacity=".3"/>\n  <path class="${T.A.BACKGROUND}" d="M9 0a9 9 0 1 0 9 9 9 9 0 0 0-9-9z" fill="#e6912c"/>\n  <path class="${T.A.COMPONENT_SHADOW}" d="M9.82 14.87a.34.34 0 0 1-.1.23.33.33 0 0 1-.23.09H7.6a.26.26 0 0 1-.22-.1.31.31 0 0 1-.09-.22V13a.33.33 0 0 1 .09-.22.29.29 0 0 1 .22-.09h1.89a.33.33 0 0 1 .23.09.34.34 0 0 1 .1.22zM12 7.71a3.31 3.31 0 0 1-.36.73 7.11 7.11 0 0 1-.49.6 4.62 4.62 0 0 1-.52.48 6.62 6.62 0 0 0-.65.64.93.93 0 0 0-.27.7v.21a.29.29 0 0 1-.09.22.28.28 0 0 1-.22.1H7.69a.3.3 0 0 1-.22-.1.29.29 0 0 1-.09-.22v-.35a2.43 2.43 0 0 1 .13-.84 2.55 2.55 0 0 1 .33-.66 3.08 3.08 0 0 1 .45-.55c.16-.15.33-.29.49-.42s.47-.45.64-.64a1 1 0 0 0 .26-.68.74.74 0 0 0-.3-.6 1.13 1.13 0 0 0-.73-.24 1.57 1.57 0 0 0-.49.07 2.54 2.54 0 0 0-.41.18 1.46 1.46 0 0 0-.29.18l-.1.09a.53.53 0 0 1-.24.06c-.12 0-.19-.07-.21-.13l-1-1.21a.3.3 0 0 1 0-.41l.21-.19a2.67 2.67 0 0 1 .56-.38A5.72 5.72 0 0 1 7.61 4a3.68 3.68 0 0 1 1.19-.19A3.86 3.86 0 0 1 10 4a3.63 3.63 0 0 1 1.09.56 2.79 2.79 0 0 1 .78.92 2.76 2.76 0 0 1 .29 1.27 3.08 3.08 0 0 1-.16.96z" opacity=".2"/>\n  <path class="${T.A.COMPONENT}" d="M9.82 14.37a.34.34 0 0 1-.1.23.33.33 0 0 1-.23.09H7.6a.26.26 0 0 1-.22-.1.31.31 0 0 1-.09-.22v-1.84a.33.33 0 0 1 .09-.22.29.29 0 0 1 .22-.09h1.89a.33.33 0 0 1 .23.09.34.34 0 0 1 .1.22zM12 7.21a3.31 3.31 0 0 1-.36.73 7.11 7.11 0 0 1-.49.6 4.62 4.62 0 0 1-.52.48 6.62 6.62 0 0 0-.65.64.93.93 0 0 0-.27.7v.21a.29.29 0 0 1-.09.22.28.28 0 0 1-.22.1H7.69a.3.3 0 0 1-.22-.1.29.29 0 0 1-.09-.22v-.35a2.43 2.43 0 0 1 .13-.84 2.55 2.55 0 0 1 .33-.66 3.08 3.08 0 0 1 .45-.55c.16-.15.33-.29.49-.42s.47-.45.64-.64a1 1 0 0 0 .26-.68.74.74 0 0 0-.3-.6 1.13 1.13 0 0 0-.73-.24 1.57 1.57 0 0 0-.49.07 2.54 2.54 0 0 0-.41.18 1.46 1.46 0 0 0-.29.16l-.1.09a.53.53 0 0 1-.24.06C7 6.14 6.93 6.1 6.91 6l-1-1.21a.3.3 0 0 1 0-.41l.21-.19a2.67 2.67 0 0 1 .56-.38 5.72 5.72 0 0 1 .9-.37 3.68 3.68 0 0 1 1.22-.13 3.86 3.86 0 0 1 1.2.19 3.63 3.63 0 0 1 1.09.56 2.79 2.79 0 0 1 .78.92 2.76 2.76 0 0 1 .29 1.27 3.08 3.08 0 0 1-.16.96z" fill="#fff"/>\n`},52921:function(i,s,_){"use strict";_.d(s,{u:function(){return S}});var T=_(90436);const S=`\n    <path class="${T.A.SHADOW}" d="M6.33,16.85l-6-12A3,3,0,0,1,3,.5H15a3,3,0,0,1,2.67,4.33l-6,12A3,3,0,0,1,6.33,16.85Z" opacity=".3"/>\n    <path class="${T.A.BACKGROUND}" d="M6.33,16.35l-6-12A3,3,0,0,1,3,0H15a3,3,0,0,1,2.67,4.33l-6,12A3,3,0,0,1,6.33,16.35Z" fill="#c93430"/>\n    <path class="${T.A.COMPONENT_SHADOW}" d="M8.92,2,5.9,9.3A.14.14,0,0,0,6,9.48h2.6a.14.14,0,0,1,.14.14l0,5.4c0,.12.18.19.23.08l3.7-7.92A.13.13,0,0,0,12.53,7H9.64a.14.14,0,0,1-.14-.13L9.15,2.05C9.15,1.93,9,1.87,8.92,2Z" opacity=".2"/>\n    <path class="${T.A.COMPONENT}" d="M8.92,1.48,5.9,8.8A.14.14,0,0,0,6,9h2.6a.14.14,0,0,1,.14.14l0,5.4c0,.12.18.19.23.08l3.7-7.92a.13.13,0,0,0-.13-.18H9.64a.14.14,0,0,1-.14-.13L9.15,1.55C9.15,1.43,9,1.37,8.92,1.48Z" fill="#fff"/>\n`},54264:function(i,s,_){"use strict";_.d(s,{Y:function(){return S}});var T=_(90436);const S=`\n  <path\n    class="${T.A.SHADOW}"\n    d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"\n    opacity=".3"></path>\n\n  <path\n    class="${T.A.BACKGROUND}"\n    d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"\n    fill="#8a8886"></path>\n\n  <path\n    d="M3.59,10.23a.25.25,0,0,1,.24-.31l1.08-.15a.49.49,0,0,1,.2.06.25.25,0,0,1,.11.2,3.58,3.58,0,0,0,.42,1.28,3.68,3.68,0,0,0,.84,1.06,3.76,3.76,0,0,0,1.16.69A3.9,3.9,0,0,0,9,13.31,3.58,3.58,0,0,0,10.47,13a3.94,3.94,0,0,0,1.22-.81A4.09,4.09,0,0,0,12.5,11a3.74,3.74,0,0,0,0-3,4.09,4.09,0,0,0-.81-1.2A3.94,3.94,0,0,0,10.47,6,3.65,3.65,0,0,0,9,5.69a3.61,3.61,0,0,0-1.23.21,3.23,3.23,0,0,0-1.09.6L7.77,7.59c.16.15.21.29.16.38s-.18.17-.4.17H4.37a.36.36,0,0,1-.2,0A.76.76,0,0,1,4,8a.52.52,0,0,1-.17-.38V4.45c0-.2.06-.33.17-.38s.25,0,.41.16L5.51,5.34a5.83,5.83,0,0,1,1.64-1A5.19,5.19,0,0,1,9,4.05a5.3,5.3,0,0,1,2.12.44,5,5,0,0,1,1.73,1.16A5.59,5.59,0,0,1,14,7.38a5.23,5.23,0,0,1,.44,2.12A5.16,5.16,0,0,1,14,11.62a5.59,5.59,0,0,1-1.16,1.73,5.32,5.32,0,0,1-1.73,1.18A5.64,5.64,0,0,1,9,15a5.23,5.23,0,0,1-1.94-.37A5.27,5.27,0,0,1,4.21,12.1,5.1,5.1,0,0,1,3.59,10.23Z"\n    class="${T.A.COMPONENT_SHADOW}"\n    opacity=".3"></path>\n\n  <path\n    d="M3.59,9.73a.25.25,0,0,1,.24-.31l1.08-.15a.49.49,0,0,1,.2.06.25.25,0,0,1,.11.2,3.58,3.58,0,0,0,.42,1.28,3.68,3.68,0,0,0,.84,1.06,3.76,3.76,0,0,0,1.16.69A3.9,3.9,0,0,0,9,12.81a3.58,3.58,0,0,0,1.47-.31,3.94,3.94,0,0,0,1.22-.81,4.09,4.09,0,0,0,.81-1.2,3.74,3.74,0,0,0,0-3,4.09,4.09,0,0,0-.81-1.2,3.94,3.94,0,0,0-1.22-.81A3.65,3.65,0,0,0,9,5.19a3.61,3.61,0,0,0-1.23.21A3.23,3.23,0,0,0,6.68,6L7.77,7.09c.16.15.21.29.16.38s-.18.17-.4.17H4.37a.36.36,0,0,1-.2,0A.76.76,0,0,1,4,7.49a.52.52,0,0,1-.17-.38V4c0-.2.06-.33.17-.38s.25,0,.41.16L5.51,4.84a5.83,5.83,0,0,1,1.64-1A5.19,5.19,0,0,1,9,3.55,5.3,5.3,0,0,1,11.12,4a5,5,0,0,1,1.73,1.16A5.59,5.59,0,0,1,14,6.88,5.23,5.23,0,0,1,14.45,9,5.16,5.16,0,0,1,14,11.12a5.59,5.59,0,0,1-1.16,1.73A5.32,5.32,0,0,1,11.12,14,5.64,5.64,0,0,1,9,14.45a5.23,5.23,0,0,1-1.94-.37A5.27,5.27,0,0,1,4.21,11.6,5.1,5.1,0,0,1,3.59,9.73Z"\n    class="${T.A.COMPONENT}"\n    fill="#ffffff"></path>\n`},20517:function(i,s,_){"use strict";_.d(s,{f:function(){return T}});const T={animationType:"web_user_game_settings_email_callback_animation_type",boardStyle:"web_user_game_settings_email_callback_board_color",coordinates:"web_user_game_settings_email_callback_coordinates",darkMode:"web_user_game_settings_callback_dark_mode_toggle",highlightLegalMoves:"web_user_game_settings_email_callback_show_legal_moves_toggle",highlightMoves:"web_user_game_settings_email_callback_highlight_last_move_toggle",isWhiteOnBottom:"web_user_game_settings_email_callback_is_white_on_bottom_toggle",moveListDisplayType:"web_user_game_settings_email_callback_move_list_display_type",moveMethod:"web_user_game_settings_email_callback_move_method",pieceStyle:"web_user_game_settings_email_callback_piece",playSounds:"web_user_game_settings_email_callback_sound_toggle",showTimestamps:"web_user_game_settings_email_callback_show_timestamps",soundTheme:"web_user_game_settings_email_callback_sound_theme"}},98480:function(i,s,_){"use strict";_.d(s,{R:function(){return fetchBoardOptions}});var T=_(12002);var S=_(52180),C=_(34620);const P=["off","inside","outside"];function toCoordinatesValue(i){const s=Number.parseInt(i,10);return Number.isInteger(s)?P[s]:i}var O=_(45236),M=_(38075),R=_(25014);const D={},j={};async function fetchBoardOptions(){const i=(0,O.KZ)();if(window.chesscom.features.includes("settings_service_read")){const s=await async function fetchSettings(i){const{data:s}=await T.pS.fetch({method:"get",path:"users/me",service:T.AM.Settings,params:{include:i.join(",")}});return s}(["board.animation_type","board.board_style","board.coordinates","board.show_legal_moves","board.highlight_moves","board.white_always_on_bottom","board.move_list_style","board.move_method","board.pieces_style","board.play_sounds","board.sound_theme","gameplay.show_timestamps"]);return{animationType:(0,S.E)(s["board.animation_type"]),boardSize:"auto",boardStyle:s["board.board_style"],coordinates:s["board.coordinates"],darkMode:i,highlightLegalMoves:s["board.show_legal_moves"],highlightMoves:s["board.highlight_moves"],isWhiteOnBottom:s["board.white_always_on_bottom"],moveListDisplayType:s["board.move_list_style"],moveMethod:(0,C.z)(s["board.move_method"]),pieceStyle:s["board.pieces_style"],playSounds:s["board.play_sounds"],soundTheme:s["board.sound_theme"],showTimestamps:s["gameplay.show_timestamps"]}}const{data:s}=await async function fetch(i){var s;const _=M.Z.get(R.Z.generate(i)),T=await _;return D[i]=T,null==(s=j[i])||s.forEach((s=>s(D[i]))),T}("web_user_callback_get_board_settings"),{animationType:_,boardCoords:P,boardSize:$,colorScheme:U,highlightLegalMoves:V,highlightMoves:Z,isWhiteOnBottom:Y,moveListDisplayType:X,moveMethod:Q,pieceStyle:ee,playSounds:te,soundTheme:ne,showTimestamps:re}=s;return{animationType:(0,S.E)(_),boardSize:$,boardStyle:U,coordinates:toCoordinatesValue(P),darkMode:i,highlightLegalMoves:"1"===V,highlightMoves:"1"===Z,isWhiteOnBottom:Y,moveListDisplayType:X,moveMethod:Q,pieceStyle:ee,playSounds:"1"===te,soundTheme:ne,showTimestamps:Boolean(re)}}},75696:function(i,s,_){"use strict";_.d(s,{n:function(){return j}});var T=_(70125),S=_(61681),C=Object.defineProperty,P=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,__defNormalProp=(i,s,_)=>s in i?C(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,__spreadValues=(i,s)=>{for(var _ in s||(s={}))O.call(s,_)&&__defNormalProp(i,_,s[_]);if(P)for(var _ of P(s))M.call(s,_)&&__defNormalProp(i,_,s[_]);return i};const R="chessComAppState",D=["id","enabled","allowMarkings","captureKeyStrokes","fadeSetup","fetched","flipBoard","flipped","highlightColor","highlightOpacity","moveListContextMenuEnabled","overlayInAnalysisMode"],j={getBoardOptions(){var i;const s=(0,T.Q)(S.Z.get(R)),_=Object.assign({},null==(i=null==s?void 0:s.board)?void 0:i.boardOptions);return D.forEach((i=>{delete _[i]})),_.highlightColor=void 0,_},setBoardOptions(i){var s;let _=(0,T.Q)(S.Z.get(R));(null==(s=null==_?void 0:_.board)?void 0:s.boardOptions)?Object.assign(_.board.boardOptions,__spreadValues({},i)):_={board:{boardOptions:__spreadValues({},i)}},D.forEach((i=>{delete _.board.boardOptions[i]})),S.Z.set(R,(0,T.P)(_))}}},90632:function(i,s,_){"use strict";_.d(s,{z:function(){return T}});var T=(i=>(i.Embed="embed",i.Event="event",i.Gif="gif",i.Image="image",i.Pgn="pgn",i))(T||{})},18137:function(i,s,_){"use strict";_.d(s,{J:function(){return T}});const T=(0,_(7504).kr)()},3510:function(i,s,_){"use strict";_.d(s,{z:function(){return saveSettings}});var T=_(12002);async function saveSettings(i){window.chesscom.features.includes("settings_service_data_sync")&&Object.keys(i).length>0&&await T.pS.publish({method:"post",service:T.AM.Settings,path:"users/me",data:i})}},70125:function(i,s,_){"use strict";_.d(s,{Q:function(){return parse},P:function(){return stringify}});const parse=(i,...s)=>JSON.parse(i,...s),stringify=(i,...s)=>JSON.stringify(i,...s)},6159:function(i,s,_){"use strict";_.d(s,{M:function(){return formatBoardSetting}});const formatBoardSetting=(i,s)=>[i,transformValue(i,s)],transformValue=(i,s)=>"coordinates"===i?["off","inside","outside"].indexOf(s):s},11721:function(i,s,_){"use strict";_.d(s,{R:function(){return formatBoardOptionsForSettingsService}});var T=_(52180),S=_(34620);const formatBoardOptionsForSettingsService=i=>Object.entries(i).reduce(((i,[s,_])=>{const[T,S]=formatSetting(s,_);return i[T]=S,i}),{}),formatSetting=(i,s)=>{const _=transformKey(i);return[_,transformValue(_,s)]},transformKey=i=>{switch(i){case"animationType":return"board.animation_type";case"boardStyle":return"board.board_style";case"coordinates":return"board.coordinates";case"highlightLegalMoves":return"board.show_legal_moves";case"highlightMoves":return"board.highlight_moves";case"isWhiteOnBottom":return"board.white_always_on_bottom";case"moveListDisplayType":return"board.move_list_style";case"moveMethod":return"board.move_method";case"pieceStyle":return"board.pieces_style";case"playSounds":return"board.play_sounds";case"soundTheme":return"board.sound_theme";case"showTimestamps":return"gameplay.show_timestamps";default:return i}},transformValue=(i,s)=>{switch(i){case"board.pieces_style":return"modern2"===s?"modern":s;case"board.animation_type":return(0,T.C)(s);case"board.move_method":return(0,S.N)(s);default:return s}}},52180:function(i,s,_){"use strict";function fromAnimationType(i){return i&&"default"!==i?i:"medium"}function toAnimationType(i){return i&&"medium"!==i&&"battle"!==i?i:"default"}_.d(s,{C:function(){return fromAnimationType},E:function(){return toAnimationType}})},34620:function(i,s,_){"use strict";function toBoardMoveMethods(i){switch(i){case"drag_only":return"drag-only";case"click":return"click";default:return"drag"}}function fromBoardMoveMethods(i){switch(i){case"click":return"click";case"drag-only":return"drag_only";default:return"drag"}}_.d(s,{z:function(){return toBoardMoveMethods},N:function(){return fromBoardMoveMethods}})},41128:function(i,s,_){"use strict";_.d(s,{U:function(){return getAmplitude}});Object.create,Object.defineProperty,Object.getOwnPropertyDescriptor,Object.getOwnPropertyNames,Object.getPrototypeOf,Object.prototype.hasOwnProperty;let T;function getAmplitude(){var i;return(null==(i=window.chesscom)?void 0:i.amplitude)?window.chesscom.amplitude:(T||(T=_.e(790).then(_.t.bind(_,63790,23)).then((({default:i})=>{const{user:s,amplitudeKey:_}=window.context||{},T=s&&!s.isGuest?s.id:null;return i.getInstance().init(_,null,{includeUtm:!0,includeReferrer:!0,includeGclid:!0,saveParamsReferrerOncePerSession:!1}),i.getInstance().setUserId(T),window.chesscom.amplitude=i,i}))),T)}},22163:function(i,s,_){"use strict";_.d(s,{t:function(){return incrementUserProperties}});var T=_(41128),S=_(50547);async function incrementUserProperties(i){const s=await(0,T.U)();if(null==i)return;const _=new s.Identify;(0,S.Z)(i,((i,s)=>{_.add(s,i)})),s.getInstance().identify(_)}},93989:function(i,s,_){"use strict";_.d(s,{K:function(){return logEvent}});var T=_(41128),S=_(22163),C=_(14300);async function logEvent(i,s,_,P){const O=await(0,T.U)();await(0,C.j)(_),await(0,S.t)(P),O.getInstance().logEvent(i,s||{})}},37101:function(i,s,_){"use strict";_.d(s,{b:function(){return logSocialShare}});var T=_(93989);async function logSocialShare(){await(0,T.K)("Social - SocialShare",null,null,{numSocialShares:1})}},14300:function(i,s,_){"use strict";_.d(s,{j:function(){return logUserProperties}});var T=_(41128);async function logUserProperties(i){const s=await(0,T.U)();null!=i&&s.getInstance().setUserProperties(i)}},57463:function(i,s,_){"use strict";var T=_(41128),S=_(93989);s.Z={init:T.U,logEvent:S.K}},86910:function(i,s,_){"use strict";_.d(s,{n:function(){return generateUrl}});var T={"bundles/web/images/game-preview-loading.png":"bundles/web/images/game-preview-loading.8677fb94.png","bundles/web/images/image-default.svg":"bundles/web/images/image-default.445cb543.svg","bundles/web/images/noavatar_l.gif":"bundles/web/images/noavatar_l.84a92436.gif","bundles/web/images/svg/white-tic.svg":"bundles/web/images/svg/white-tic.18d3027b.svg","bundles/web/images/user-image.svg":"bundles/web/images/user-image.007dad08.svg","bundles/web/images/svg/tic.svg":"bundles/web/images/svg/tic.b039b4f5.svg","bundles/web/images/webgl_data/2d/arcade/active-field-black-glow.png":"bundles/web/images/webgl_data/2d/arcade/active-field-black-glow.7c9242cd.png","bundles/web/images/webgl_data/2d/arcade/active-field-white-glow.png":"bundles/web/images/webgl_data/2d/arcade/active-field-white-glow.e5108d71.png","bundles/web/images/web/tablet.jpg":"bundles/web/images/web/tablet.b306eb58.jpg","bundles/web/images/webgl_data/2d/arcade/capture-lightning-black.json":"bundles/web/images/webgl_data/2d/arcade/capture-lightning-black.f0a77302.json","bundles/web/images/web/learn-to-play.png":"bundles/web/images/web/learn-to-play.0c67b86d.png","bundles/web/images/webgl_data/2d/arcade/capture-lightning-black.png":"bundles/web/images/webgl_data/2d/arcade/capture-lightning-black.c1afe5c5.png","bundles/web/images/webgl_data/2d/arcade/capture-lightning-white.json":"bundles/web/images/webgl_data/2d/arcade/capture-lightning-white.3c3eb885.json","bundles/web/images/webgl_data/2d/arcade/check-lightning-small.json":"bundles/web/images/webgl_data/2d/arcade/check-lightning-small.29ffee8a.json","bundles/web/images/webgl_data/2d/arcade/check-lightning-small.png":"bundles/web/images/webgl_data/2d/arcade/check-lightning-small.cc061aa2.png","bundles/web/images/webgl_data/2d/arcade/capture-lightning-white.png":"bundles/web/images/webgl_data/2d/arcade/capture-lightning-white.0be1a673.png","bundles/web/images/webgl_data/2d/arcade/check-lightning.json":"bundles/web/images/webgl_data/2d/arcade/check-lightning.9818146c.json","bundles/web/images/webgl_data/2d/arcade/check-mate-lightning-black.json":"bundles/web/images/webgl_data/2d/arcade/check-mate-lightning-black.090095b9.json","bundles/web/images/webgl_data/2d/arcade/check-mate-lightning-white.json":"bundles/web/images/webgl_data/2d/arcade/check-mate-lightning-white.8e89a03e.json","bundles/web/images/webgl_data/2d/arcade/legal-move-arcade-black.png":"bundles/web/images/webgl_data/2d/arcade/legal-move-arcade-black.6af38a2b.png","bundles/web/images/webgl_data/2d/arcade/legal-move-arcade-white.png":"bundles/web/images/webgl_data/2d/arcade/legal-move-arcade-white.e89a9a43.png","bundles/web/images/webgl_data/2d/arcade/check-lightning.png":"bundles/web/images/webgl_data/2d/arcade/check-lightning.f218018f.png","bundles/web/images/webgl_data/2d/arcade/lightning-horizontal.png":"bundles/web/images/webgl_data/2d/arcade/lightning-horizontal.36ca9442.png","bundles/web/images/webgl_data/2d/arcade/move-lightning-large-black.json":"bundles/web/images/webgl_data/2d/arcade/move-lightning-large-black.d04ec1d5.json","bundles/web/images/webgl_data/2d/arcade/move-lightning-large-white.json":"bundles/web/images/webgl_data/2d/arcade/move-lightning-large-white.16dcf372.json","bundles/web/images/webgl_data/2d/arcade/check-mate-lightning-black.png":"bundles/web/images/webgl_data/2d/arcade/check-mate-lightning-black.bc7ee14a.png","bundles/web/images/webgl_data/2d/arcade/move-lightning-medium-black.json":"bundles/web/images/webgl_data/2d/arcade/move-lightning-medium-black.2f52761e.json","bundles/web/images/webgl_data/2d/arcade/move-lightning-medium-black.png":"bundles/web/images/webgl_data/2d/arcade/move-lightning-medium-black.a668575c.png","bundles/web/images/webgl_data/2d/arcade/move-lightning-medium-white.json":"bundles/web/images/webgl_data/2d/arcade/move-lightning-medium-white.e1f5d8cf.json","bundles/web/images/webgl_data/2d/arcade/move-lightning-large-black.png":"bundles/web/images/webgl_data/2d/arcade/move-lightning-large-black.4ca4b640.png","bundles/web/images/webgl_data/2d/arcade/move-lightning-regular-black.json":"bundles/web/images/webgl_data/2d/arcade/move-lightning-regular-black.8d776f5a.json","bundles/web/images/webgl_data/2d/arcade/move-lightning-medium-white.png":"bundles/web/images/webgl_data/2d/arcade/move-lightning-medium-white.7092cc85.png","bundles/web/images/webgl_data/2d/arcade/move-lightning-regular-white.json":"bundles/web/images/webgl_data/2d/arcade/move-lightning-regular-white.e4b8d4a8.json","bundles/web/images/webgl_data/2d/arcade/check-mate-lightning-white.png":"bundles/web/images/webgl_data/2d/arcade/check-mate-lightning-white.18832d80.png","bundles/web/images/webgl_data/2d/arcade/move-lightning-small-black.json":"bundles/web/images/webgl_data/2d/arcade/move-lightning-small-black.46ff1e1e.json","bundles/web/images/webgl_data/2d/arcade/move-lightning-large-white.png":"bundles/web/images/webgl_data/2d/arcade/move-lightning-large-white.176b669e.png","bundles/web/images/webgl_data/2d/arcade/move-lightning-small-white.json":"bundles/web/images/webgl_data/2d/arcade/move-lightning-small-white.d2c18ae4.json","bundles/web/images/webgl_data/2d/arcade/move-lightning-small-white.png":"bundles/web/images/webgl_data/2d/arcade/move-lightning-small-white.2ffd0edb.png","bundles/web/images/webgl_data/2d/arcade/select-lightning-black.json":"bundles/web/images/webgl_data/2d/arcade/select-lightning-black.3407e009.json","bundles/web/images/webgl_data/2d/arcade/move-lightning-small-black.png":"bundles/web/images/webgl_data/2d/arcade/move-lightning-small-black.2106320a.png","bundles/web/images/webgl_data/2d/arcade/move-lightning-regular-black.png":"bundles/web/images/webgl_data/2d/arcade/move-lightning-regular-black.1f5242b2.png","bundles/web/images/webgl_data/2d/arcade/select-lightning-white.json":"bundles/web/images/webgl_data/2d/arcade/select-lightning-white.6c02602b.json","bundles/web/images/webgl_data/2d/arcade/select-lightning-black.png":"bundles/web/images/webgl_data/2d/arcade/select-lightning-black.7f512106.png","bundles/web/images/webgl_data/2d/capture-dust.json":"bundles/web/images/webgl_data/2d/capture-dust.221e5b9d.json","bundles/web/images/webgl_data/2d/dust-big.json":"bundles/web/images/webgl_data/2d/dust-big.3978c9b2.json","bundles/web/images/webgl_data/2d/capture-dust.png":"bundles/web/images/webgl_data/2d/capture-dust.f3616e72.png","bundles/web/images/webgl_data/2d/arcade/select-lightning-white.png":"bundles/web/images/webgl_data/2d/arcade/select-lightning-white.52c977e3.png","bundles/web/images/webgl_data/2d/dust-big.png":"bundles/web/images/webgl_data/2d/dust-big.ffc81b67.png","bundles/web/images/webgl_data/2d/dust-regular.json":"bundles/web/images/webgl_data/2d/dust-regular.c277df9e.json","bundles/web/images/webgl_data/2d/arcade/move-lightning-regular-white.png":"bundles/web/images/webgl_data/2d/arcade/move-lightning-regular-white.3ee6b29c.png","bundles/web/images/webgl_data/2d/dust-regular.png":"bundles/web/images/webgl_data/2d/dust-regular.d14f1094.png","bundles/web/images/webgl_data/2d/dust-small.json":"bundles/web/images/webgl_data/2d/dust-small.e988c379.json","bundles/web/images/webgl_data/2d/dust-small.png":"bundles/web/images/webgl_data/2d/dust-small.88f7d20e.png","bundles/web/images/webgl_data/2d/field-shadow.png":"bundles/web/images/webgl_data/2d/field-shadow.12436cf1.png","bundles/web/images/webgl_data/2d/hand.json":"bundles/web/images/webgl_data/2d/hand.a9ba7da1.json","bundles/web/images/webgl_data/2d/hand.png":"bundles/web/images/webgl_data/2d/hand.f56ab65c.png","bundles/web/images/webgl_data/3d/board/board.json":"bundles/web/images/webgl_data/3d/board/board.f425db44.json","bundles/web/images/webgl_data/3d/board/textures/board_8_bit.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_8_bit.a40a4bb3.jpg","bundles/web/images/webgl_data/3d/board/textures/board_8_bit_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_8_bit_notation.a3bf6bb5.png","bundles/web/images/webgl_data/3d/board/textures/board_bases_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_bases_notation.4fa42cab.png","bundles/web/images/webgl_data/3d/board/textures/board_blackwhite_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_blackwhite_notation.e3bdbf81.png","bundles/web/images/webgl_data/3d/board/textures/board_blackwhite.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_blackwhite.7f3f4fa7.jpg","bundles/web/images/webgl_data/3d/board/textures/board_blue_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_blue_notation.76a72805.png","bundles/web/images/webgl_data/3d/board/textures/board_blue.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_blue.11b21efb.jpg","bundles/web/images/webgl_data/3d/board/textures/board_brown_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_brown_notation.24d88929.png","bundles/web/images/webgl_data/3d/board/textures/board_brown.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_brown.c93ac4fc.jpg","bundles/web/images/webgl_data/3d/board/textures/board_bubblegum_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_bubblegum_notation.b8a64cec.png","bundles/web/images/webgl_data/3d/board/textures/board_bubblegum.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_bubblegum.c76cf59d.jpg","bundles/web/images/webgl_data/3d/board/textures/board_bases.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_bases.79a27acd.jpg","bundles/web/images/webgl_data/3d/board/textures/board_burled_wood_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_burled_wood_notation.071f30bd.png","bundles/web/images/webgl_data/3d/board/textures/board_dark_wood_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_dark_wood_notation.7b7a3981.png","bundles/web/images/webgl_data/3d/board/textures/board_dash_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_dash_notation.3913780e.png","bundles/web/images/webgl_data/3d/board/textures/board_dark_wood.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_dark_wood.4448353a.jpg","bundles/web/images/webgl_data/3d/board/textures/board_glass_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_glass_notation.5d17abfd.png","bundles/web/images/webgl_data/3d/board/textures/board_dash.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_dash.91592ef2.jpg","bundles/web/images/webgl_data/3d/board/textures/board_graffiti_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_graffiti_notation.237e1f51.png","bundles/web/images/webgl_data/3d/board/textures/board_green.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_green.b245f458.jpg","bundles/web/images/webgl_data/3d/board/textures/board_green_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_green_notation.e1239e77.png","bundles/web/images/webgl_data/3d/board/textures/board_burled_wood.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_burled_wood.f270813d.jpg","bundles/web/images/webgl_data/3d/board/textures/board_grey_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_grey_notation.14778c8c.png","bundles/web/images/webgl_data/3d/board/textures/board_grey.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_grey.e2b96c1c.jpg","bundles/web/images/webgl_data/3d/board/textures/board_icy_sea_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_icy_sea_notation.8a2dbe83.png","bundles/web/images/webgl_data/3d/board/textures/board_light.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_light.be5733d7.jpg","bundles/web/images/webgl_data/3d/board/textures/board_glass.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_glass.dd597983.jpg","bundles/web/images/webgl_data/3d/board/textures/board_lolz_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_lolz_notation.eefaa48a.png","bundles/web/images/webgl_data/3d/board/textures/board_light_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_light_notation.ca37c558.png","bundles/web/images/webgl_data/3d/board/textures/board_icy_sea.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_icy_sea.638d6526.jpg","bundles/web/images/webgl_data/3d/board/textures/board_marble_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_marble_notation.9aa8f92f.png","bundles/web/images/webgl_data/3d/board/textures/board_marbleblue.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_marbleblue.9556bc69.jpg","bundles/web/images/webgl_data/3d/board/textures/board_marbleblue_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_marbleblue_notation.d626537b.png","bundles/web/images/webgl_data/3d/board/textures/board_marble.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_marble.b09462c0.jpg","bundles/web/images/webgl_data/3d/board/textures/board_marblebrown_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_marblebrown_notation.131bd8fc.png","bundles/web/images/webgl_data/3d/board/textures/board_graffiti.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_graffiti.1418935c.jpg","bundles/web/images/webgl_data/3d/board/textures/board_marblegreen_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_marblegreen_notation.1f01d417.png","bundles/web/images/webgl_data/3d/board/textures/board_marblebrown.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_marblebrown.9ae0f295.jpg","bundles/web/images/webgl_data/3d/board/textures/board_metal_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_metal_notation.36055507.png","bundles/web/images/webgl_data/3d/board/textures/board_lolz.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_lolz.015a977a.jpg","bundles/web/images/webgl_data/3d/board/textures/board_neon_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_neon_notation.88a17bf8.png","bundles/web/images/webgl_data/3d/board/textures/board_neon.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_neon.5f0236a0.jpg","bundles/web/images/webgl_data/3d/board/textures/board_newspaper_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_newspaper_notation.7a8b8d59.png","bundles/web/images/webgl_data/3d/board/textures/board_orange.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_orange.b3c6741b.jpg","bundles/web/images/webgl_data/3d/board/textures/board_orange_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_orange_notation.50c2f2ba.png","bundles/web/images/webgl_data/3d/board/textures/board_marblegreen.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_marblegreen.3c7ff3a7.jpg","bundles/web/images/webgl_data/3d/board/textures/board_overlay.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_overlay.38852d01.jpg","bundles/web/images/webgl_data/3d/board/textures/board_overlay_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_overlay_notation.6ec789e4.png","bundles/web/images/webgl_data/3d/board/textures/board_parchment_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_parchment_notation.3cabbba4.png","bundles/web/images/webgl_data/3d/board/textures/board_pink.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_pink.d1fb1b2d.jpg","bundles/web/images/webgl_data/3d/board/textures/board_pink_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_pink_notation.6fd670e8.png","bundles/web/images/webgl_data/3d/board/textures/board_purple.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_purple.80a4705d.jpg","bundles/web/images/webgl_data/3d/board/textures/board_purple_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_purple_notation.f0ff6785.png","bundles/web/images/webgl_data/3d/board/textures/board_red.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_red.8e069f1e.jpg","bundles/web/images/webgl_data/3d/board/textures/board_red_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_red_notation.74784555.png","bundles/web/images/webgl_data/3d/board/textures/board_newspaper.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_newspaper.c308d776.jpg","bundles/web/images/webgl_data/3d/board/textures/board_sand_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_sand_notation.1c09ddd0.png","bundles/web/images/webgl_data/3d/board/textures/board_shadow.png":"bundles/web/images/webgl_data/3d/board/textures/board_shadow.e9919a3b.png","bundles/web/images/webgl_data/3d/board/textures/board_sky_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_sky_notation.5b781a27.png","bundles/web/images/webgl_data/3d/board/textures/board_metal.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_metal.12c374ae.jpg","bundles/web/images/webgl_data/3d/board/textures/board_sky.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_sky.274da40b.jpg","bundles/web/images/webgl_data/3d/board/textures/board_stone_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_stone_notation.c31e84f2.png","bundles/web/images/webgl_data/3d/board/textures/board_tan.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_tan.82741031.jpg","bundles/web/images/webgl_data/3d/board/textures/board_tan_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_tan_notation.6fe5a0a0.png","bundles/web/images/webgl_data/3d/board/textures/board_tournament.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_tournament.d7746600.jpg","bundles/web/images/webgl_data/3d/board/textures/board_tournament_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_tournament_notation.9fd35fd1.png","bundles/web/images/webgl_data/3d/board/textures/board_parchment.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_parchment.5ff4ab17.jpg","bundles/web/images/webgl_data/3d/board/textures/board_translucent_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_translucent_notation.3ce8dc03.png","bundles/web/images/webgl_data/3d/board/textures/board_translucent.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_translucent.400f363b.jpg","bundles/web/images/webgl_data/3d/board/textures/board_walnut_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_walnut_notation.cfb242b2.png","bundles/web/images/webgl_data/3d/board/textures/board_winboard.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_winboard.b060d48e.jpg","bundles/web/images/webgl_data/3d/board/textures/board_winboard_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_winboard_notation.9fe65525.png","bundles/web/images/webgl_data/3d/board/textures/board_sand.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_sand.b83b5a0e.jpg","bundles/web/images/webgl_data/3d/board/textures/board_wood_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_wood_notation.1bb169b8.png","bundles/web/images/webgl_data/3d/board/textures/board_walnut.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_walnut.58ccd234.jpg","bundles/web/images/webgl_data/3d/board/textures/board_wooddark_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_wooddark_notation.7b7a3981.png","bundles/web/images/webgl_data/3d/board/textures/board_wooddark.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_wooddark.4448353a.jpg","bundles/web/images/webgl_data/3d/board/textures/board_woodlight_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_woodlight_notation.d7654fd8.png","bundles/web/images/webgl_data/3d/board/textures/board_wood.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_wood.0df0259b.jpg","bundles/web/images/webgl_data/3d/board/textures/board_woodmid_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_woodmid_notation.3828ff12.png","bundles/web/images/webgl_data/3d/board/textures/board_woodlight.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_woodlight.63227ad0.jpg","bundles/web/images/webgl_data/3d/marking_arrow_L.json":"bundles/web/images/webgl_data/3d/marking_arrow_L.be09e498.json","bundles/web/images/webgl_data/3d/board/textures/board_woodolive_notation.png":"bundles/web/images/webgl_data/3d/board/textures/board_woodolive_notation.be36a764.png","bundles/web/images/webgl_data/3d/marking_arrow_straight.json":"bundles/web/images/webgl_data/3d/marking_arrow_straight.a6b956b9.json","bundles/web/images/webgl_data/3d/board/textures/board_stone.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_stone.411cdedf.jpg","bundles/web/images/webgl_data/3d/pieces/staunton_executive/bishop_promotion_black.jpg":"bundles/web/images/webgl_data/3d/pieces/staunton_executive/bishop_promotion_black.7b326cb2.jpg","bundles/web/images/webgl_data/3d/pieces/staunton_executive/bishop_promotion_white.jpg":"bundles/web/images/webgl_data/3d/pieces/staunton_executive/bishop_promotion_white.465f396a.jpg","bundles/web/images/webgl_data/3d/board/textures/board_woodmid.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_woodmid.54a8a227.jpg","bundles/web/images/webgl_data/3d/board/textures/board_woodolive.jpg":"bundles/web/images/webgl_data/3d/board/textures/board_woodolive.97141fbf.jpg","bundles/web/images/webgl_data/3d/pieces/staunton_executive/knight_promotion_black.jpg":"bundles/web/images/webgl_data/3d/pieces/staunton_executive/knight_promotion_black.e9190478.jpg","bundles/web/images/webgl_data/3d/pieces/staunton_executive/knight_promotion_white.jpg":"bundles/web/images/webgl_data/3d/pieces/staunton_executive/knight_promotion_white.1c85b3f2.jpg","bundles/web/images/webgl_data/3d/pieces/staunton_executive/bishop.json":"bundles/web/images/webgl_data/3d/pieces/staunton_executive/bishop.7395ab28.json","bundles/web/images/webgl_data/3d/pieces/staunton_executive/knight.json":"bundles/web/images/webgl_data/3d/pieces/staunton_executive/knight.b9912c7a.json","bundles/web/images/webgl_data/3d/pieces/staunton_executive/queen_promotion_black.jpg":"bundles/web/images/webgl_data/3d/pieces/staunton_executive/queen_promotion_black.a4d6db0c.jpg","bundles/web/images/webgl_data/3d/pieces/staunton_executive/queen_promotion_white.jpg":"bundles/web/images/webgl_data/3d/pieces/staunton_executive/queen_promotion_white.e71bfaa9.jpg","bundles/web/images/webgl_data/3d/pieces/staunton_executive/pawn.json":"bundles/web/images/webgl_data/3d/pieces/staunton_executive/pawn.32238b68.json","bundles/web/images/webgl_data/3d/pieces/staunton_executive/rook_promotion_black.jpg":"bundles/web/images/webgl_data/3d/pieces/staunton_executive/rook_promotion_black.e6e65399.jpg","bundles/web/images/webgl_data/3d/pieces/staunton_executive/rook_promotion_white.jpg":"bundles/web/images/webgl_data/3d/pieces/staunton_executive/rook_promotion_white.a0a10f07.jpg","bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/bishop_shadow.png":"bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/bishop_shadow.7aca2e88.png","bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/envmap/negx.jpg":"bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/envmap/negx.81709478.jpg","bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/envmap/negy.jpg":"bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/envmap/negy.163c07c7.jpg","bundles/web/images/webgl_data/3d/pieces/staunton_executive/rook.json":"bundles/web/images/webgl_data/3d/pieces/staunton_executive/rook.76894e32.json","bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/envmap/posx.jpg":"bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/envmap/posx.b034e0f3.jpg","bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/envmap/negz.jpg":"bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/envmap/negz.f7e26d93.jpg","bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/envmap/posy.jpg":"bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/envmap/posy.b97290e6.jpg","bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/king_shadow.png":"bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/king_shadow.d2e689b3.png","bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/knight_shadow.png":"bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/knight_shadow.da573039.png","bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/envmap/posz.jpg":"bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/envmap/posz.dcbe8ca2.jpg","bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/piece_black.jpg":"bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/piece_black.59af0793.jpg","bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/pawn_shadow.png":"bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/pawn_shadow.24e9cbc0.png","bundles/web/images/webgl_data/3d/pieces/staunton_executive/queen.json":"bundles/web/images/webgl_data/3d/pieces/staunton_executive/queen.8793f6ab.json","bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/piece_marble_black.jpg":"bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/piece_marble_black.b047e850.jpg","bundles/web/images/webgl_data/3d/pieces/staunton_executive/king.json":"bundles/web/images/webgl_data/3d/pieces/staunton_executive/king.fc9672f5.json","bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/piece_plastic_black.jpg":"bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/piece_plastic_black.7c7aa93c.jpg","bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/piece_plastic_white.jpg":"bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/piece_plastic_white.47bc0cd0.jpg","bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/piece_metal_white.jpg":"bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/piece_metal_white.8c735a4d.jpg","bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/piece_marble_white.jpg":"bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/piece_marble_white.677392ee.jpg","bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/piece_white.jpg":"bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/piece_white.2d6201c7.jpg","bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/queen_shadow.png":"bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/queen_shadow.32aec9b8.png","bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/rook_shadow.png":"bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/rook_shadow.6f48c570.png","bundles/web/images/webgl_data/README.md":"bundles/web/images/webgl_data/README.ce99e081.md","bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/piece_metal_black.jpg":"bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/piece_metal_black.7a8a7a16.jpg","bundles/web/images/webgl_data/three-d/board/board.glb":"bundles/web/images/webgl_data/three-d/board/board.4d718342.glb","bundles/web/images/webgl_data/three-d/board/board.json":"bundles/web/images/webgl_data/three-d/board/board.f425db44.json","bundles/web/images/webgl_data/three-d/board/textures/board_8_bit_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_8_bit_notation.3b0e5987.png","bundles/web/images/webgl_data/three-d/board/textures/board_bases_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_bases_notation.583cf009.png","bundles/web/images/webgl_data/three-d/board/textures/board_8_bit.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_8_bit.90f44ee3.jpg","bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/piece_wood_white.jpg":"bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/piece_wood_white.a0bb951f.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_blackwhite_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_blackwhite_notation.a16af582.png","bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/piece_wood_black.jpg":"bundles/web/images/webgl_data/3d/pieces/staunton_executive/textures/piece_wood_black.c7c69176.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_blue_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_blue_notation.aede7d52.png","bundles/web/images/webgl_data/three-d/board/textures/board_brown.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_brown.77111896.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_blackwhite.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_blackwhite.223497db.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_blue.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_blue.3d8bf522.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_bubblegum_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_bubblegum_notation.c0566f9d.png","bundles/web/images/webgl_data/three-d/board/textures/board_brown_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_brown_notation.d91c4dfa.png","bundles/web/images/webgl_data/three-d/board/textures/board_burled_wood_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_burled_wood_notation.ab7033dc.png","bundles/web/images/webgl_data/three-d/board/textures/board_bases.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_bases.aa2e4c86.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_dark_wood_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_dark_wood_notation.29e0c91f.png","bundles/web/images/webgl_data/three-d/board/textures/board_bubblegum.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_bubblegum.2abf245c.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_dash_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_dash_notation.c61d909b.png","bundles/web/images/webgl_data/three-d/board/textures/board_dash.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_dash.0c3e4676.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_glass.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_glass.ab30ff7c.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_glass_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_glass_notation.1f0ac1c3.png","bundles/web/images/webgl_data/three-d/board/textures/board_graffiti_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_graffiti_notation.2ad3950b.png","bundles/web/images/webgl_data/three-d/board/textures/board_green.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_green.e84cead6.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_green_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_green_notation.47e1aaef.png","bundles/web/images/webgl_data/three-d/board/textures/board_grey.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_grey.637ff9bf.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_grey_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_grey_notation.4a29af67.png","bundles/web/images/webgl_data/three-d/board/textures/board_dark_wood.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_dark_wood.e34eac17.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_icy_sea_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_icy_sea_notation.a02159fa.png","bundles/web/images/webgl_data/three-d/board/textures/board_light.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_light.30b1a562.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_light_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_light_notation.91439e75.png","bundles/web/images/webgl_data/three-d/board/textures/board_burled_wood.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_burled_wood.39c56017.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_lolz_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_lolz_notation.827bf308.png","bundles/web/images/webgl_data/three-d/board/textures/board_icy_sea.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_icy_sea.7e97a7c5.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_marble_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_marble_notation.44705b60.png","bundles/web/images/webgl_data/three-d/board/textures/board_marble.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_marble.45ef834a.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_marbleblue_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_marbleblue_notation.c399953b.png","bundles/web/images/webgl_data/three-d/board/textures/board_lolz.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_lolz.7916363f.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_marblebrown_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_marblebrown_notation.a181658b.png","bundles/web/images/webgl_data/three-d/board/textures/board_marblebrown.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_marblebrown.9b30f4d0.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_marblegreen_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_marblegreen_notation.7b971c8f.png","bundles/web/images/webgl_data/three-d/board/textures/board_marbleblue.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_marbleblue.21e1edfc.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_metal_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_metal_notation.350f725a.png","bundles/web/images/webgl_data/three-d/board/textures/board_metal.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_metal.a60195b2.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_neon_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_neon_notation.9b0f7f4c.png","bundles/web/images/webgl_data/three-d/board/textures/board_neon.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_neon.79099362.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_newspaper_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_newspaper_notation.1a91be12.png","bundles/web/images/webgl_data/three-d/board/textures/board_orange.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_orange.e48910d8.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_marblegreen.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_marblegreen.f291a625.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_orange_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_orange_notation.dc2fa5a8.png","bundles/web/images/webgl_data/three-d/board/textures/board_overlay_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_overlay_notation.75b3e753.png","bundles/web/images/webgl_data/three-d/board/textures/board_overlay.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_overlay.b76a5834.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_graffiti.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_graffiti.5082fb97.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_parchment_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_parchment_notation.ee873515.png","bundles/web/images/webgl_data/three-d/board/textures/board_pink.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_pink.765cea32.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_pink_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_pink_notation.973fb303.png","bundles/web/images/webgl_data/three-d/board/textures/board_purple_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_purple_notation.507fac47.png","bundles/web/images/webgl_data/three-d/board/textures/board_purple.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_purple.600cc1aa.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_red_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_red_notation.dcb36f85.png","bundles/web/images/webgl_data/three-d/board/textures/board_red.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_red.1a8a520d.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_sand_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_sand_notation.814e444f.png","bundles/web/images/webgl_data/three-d/board/textures/board_shadow.png":"bundles/web/images/webgl_data/three-d/board/textures/board_shadow.735e7124.png","bundles/web/images/webgl_data/three-d/board/textures/board_sky.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_sky.388f5ac1.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_sky_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_sky_notation.ac5ae5f9.png","bundles/web/images/webgl_data/three-d/board/textures/board_stone.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_stone.411cdedf.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_sand.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_sand.e647afaa.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_stone_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_stone_notation.c31e84f2.png","bundles/web/images/webgl_data/three-d/board/textures/board_tan_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_tan_notation.6fe5a0a0.png","bundles/web/images/webgl_data/three-d/board/textures/board_tan.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_tan.82741031.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_tournament_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_tournament_notation.9fd35fd1.png","bundles/web/images/webgl_data/three-d/board/textures/board_translucent.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_translucent.400f363b.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_translucent_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_translucent_notation.3ce8dc03.png","bundles/web/images/webgl_data/three-d/board/textures/board_tournament.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_tournament.d7746600.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_walnut.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_walnut.58ccd234.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_winboard.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_winboard.b060d48e.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_winboard_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_winboard_notation.9fe65525.png","bundles/web/images/webgl_data/three-d/board/textures/board_wood.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_wood.0df0259b.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_walnut_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_walnut_notation.cfb242b2.png","bundles/web/images/webgl_data/three-d/board/textures/board_newspaper.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_newspaper.4646c695.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_wood_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_wood_notation.1bb169b8.png","bundles/web/images/webgl_data/three-d/board/textures/board_woodlight.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_woodlight.63227ad0.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_wooddark.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_wooddark.4448353a.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_woodlight_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_woodlight_notation.d7654fd8.png","bundles/web/images/webgl_data/three-d/board/textures/board_woodmid.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_woodmid.54a8a227.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_woodmid_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_woodmid_notation.3828ff12.png","bundles/web/images/webgl_data/three-d/board/textures/board_woodolive_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_woodolive_notation.be36a764.png","bundles/web/images/webgl_data/three-d/board/textures/board_woodolive.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_woodolive.97141fbf.jpg","bundles/web/images/webgl_data/three-d/marking_arrow_L.json":"bundles/web/images/webgl_data/three-d/marking_arrow_L.be09e498.json","bundles/web/images/webgl_data/three-d/marking_arrow_straight.json":"bundles/web/images/webgl_data/three-d/marking_arrow_straight.a6b956b9.json","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/bishop.glb":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/bishop.daa7525a.glb","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/bishop_promotion_black.jpg":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/bishop_promotion_black.6306a530.jpg","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/bishop_promotion_white.jpg":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/bishop_promotion_white.0bf5df26.jpg","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/bishop.json":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/bishop.7395ab28.json","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/king.glb":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/king.ba7be557.glb","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/knight.glb":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/knight.cc479485.glb","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/king.json":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/king.fc9672f5.json","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/knight_promotion_black.jpg":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/knight_promotion_black.261592a2.jpg","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/knight_promotion_white.jpg":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/knight_promotion_white.b59acd14.jpg","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/knight.json":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/knight.b9912c7a.json","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/pawn.glb":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/pawn.bf3f69fe.glb","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/pawn.json":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/pawn.32238b68.json","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/queen.glb":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/queen.917dc323.glb","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/queen_promotion_black.jpg":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/queen_promotion_black.6a0bd0f7.jpg","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/queen_promotion_white.jpg":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/queen_promotion_white.6188702b.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_parchment.jpg":"bundles/web/images/webgl_data/three-d/board/textures/board_parchment.590f22f2.jpg","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/rook.glb":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/rook.dee6e7fe.glb","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/rook_promotion_black.jpg":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/rook_promotion_black.98a85326.jpg","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/rook_promotion_white.jpg":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/rook_promotion_white.021ec599.jpg","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/bishop_shadow.png":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/bishop_shadow.81034108.png","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/envmap/negx.jpg":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/envmap/negx.a3a0c6c9.jpg","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/rook.json":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/rook.76894e32.json","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/envmap/negy.jpg":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/envmap/negy.1c661a52.jpg","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/envmap/posx.jpg":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/envmap/posx.14520376.jpg","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/envmap/negz.jpg":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/envmap/negz.a00cb4ee.jpg","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/envmap/posy.jpg":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/envmap/posy.3e0a3920.jpg","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/king_shadow.png":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/king_shadow.457e2513.png","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/knight_shadow.png":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/knight_shadow.c316f979.png","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/envmap/posz.jpg":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/envmap/posz.b6b76cab.jpg","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/pawn_shadow.png":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/pawn_shadow.f670cc1c.png","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/piece_black.jpg":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/piece_black.a6baa788.jpg","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/piece_marble_white.jpg":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/piece_marble_white.0913fcd8.jpg","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/piece_metal_black.jpg":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/piece_metal_black.512d416b.jpg","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/piece_metal_white.jpg":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/piece_metal_white.912daa6a.jpg","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/piece_plastic_black.jpg":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/piece_plastic_black.0745ac58.jpg","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/piece_plastic_white.jpg":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/piece_plastic_white.187e6d33.jpg","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/piece_marble_black.jpg":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/piece_marble_black.dd379acf.jpg","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/piece_wood_black.jpg":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/piece_wood_black.dc9f25a5.jpg","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/piece_wood_white.jpg":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/piece_wood_white.b1665db1.jpg","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/queen_shadow.png":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/queen_shadow.85654319.png","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/rook_shadow.png":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/rook_shadow.50084b35.png","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/queen.json":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/queen.8793f6ab.json","bundles/web/images/webgl_data/two-d/arcade/capture-hint-hide.svg":"bundles/web/images/webgl_data/two-d/arcade/capture-hint-hide.cb0a5257.svg","bundles/web/images/webgl_data/two-d/arcade/capture-hint-out.svg":"bundles/web/images/webgl_data/two-d/arcade/capture-hint-out.aa61e3ed.svg","bundles/web/images/webgl_data/two-d/arcade/capture-hint-over.svg":"bundles/web/images/webgl_data/two-d/arcade/capture-hint-over.7a59bf2e.svg","bundles/web/images/webgl_data/two-d/arcade/capture-hint-show.svg":"bundles/web/images/webgl_data/two-d/arcade/capture-hint-show.d7ea418e.svg","bundles/web/images/webgl_data/two-d/arcade/move-hint-hide.svg":"bundles/web/images/webgl_data/two-d/arcade/move-hint-hide.cde15d35.svg","bundles/web/images/webgl_data/two-d/arcade/move-hint-out.svg":"bundles/web/images/webgl_data/two-d/arcade/move-hint-out.042ddeda.svg","bundles/web/images/webgl_data/two-d/arcade/move-hint-over.svg":"bundles/web/images/webgl_data/two-d/arcade/move-hint-over.1b1f1248.svg","bundles/web/images/webgl_data/two-d/arcade/move-hint-show.svg":"bundles/web/images/webgl_data/two-d/arcade/move-hint-show.ff97950b.svg","bundles/web/images/webgl_data/two-d/arcade/king-check.svg":"bundles/web/images/webgl_data/two-d/arcade/king-check.7f0928d1.svg","bundles/web/images/webgl_data/two-d/arcade/piece-capture.svg":"bundles/web/images/webgl_data/two-d/arcade/piece-capture.02f0dfd7.svg","bundles/web/images/webgl_data/two-d/arcade/piece-grab.svg":"bundles/web/images/webgl_data/two-d/arcade/piece-grab.1588c507.svg","bundles/web/images/webgl_data/two-d/arcade/piece-trail.svg":"bundles/web/images/webgl_data/two-d/arcade/piece-trail.6811d769.svg","bundles/web/images/webgl_data/two-d/arcade/piece-release.svg":"bundles/web/images/webgl_data/two-d/arcade/piece-release.06538853.svg","bundles/web/images/webgl_data/two-d/arcade/square-fill.svg":"bundles/web/images/webgl_data/two-d/arcade/square-fill.93f6954f.svg","bundles/web/images/webgl_data/two-d/hover-square.png":"bundles/web/images/webgl_data/two-d/hover-square.949e81d1.png","bundles/web/images/webgl_data/two-d/natural/piece-trail.png":"bundles/web/images/webgl_data/two-d/natural/piece-trail.bb4aaf99.png","bundles/web/images/webgl_data/two-d/natural/piece-trail-long.png":"bundles/web/images/webgl_data/two-d/natural/piece-trail-long.6ba59bc2.png","bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/piece_white.jpg":"bundles/web/images/webgl_data/three-d/pieces/staunton_executive/textures/piece_white.9720cdd6.jpg","bundles/web/images/webgl_data/three-d/board/textures/board_wooddark_notation.png":"bundles/web/images/webgl_data/three-d/board/textures/board_wooddark_notation.7b7a3981.png"};let S;S=window.Config["domain.static"]&&!window.Config.cypress?"https":"http";const generateUrl=(i,s=!0,_=S)=>`${s?`${_}:${window.Config["domain.static"]}`:""}/${null!=T[i]?T[i]:i}`},32793:function(i,s,_){"use strict";_.d(s,{j7:function(){return getWindowTitle},bM:function(){return getWindowLocation},k_:function(){return T},qD:function(){return S},e0:function(){return C},sJ:function(){return bookmarkPage},kY:function(){return O},Cz:function(){return sendEmail},tq:function(){return isMobile},qs:function(){return getBrowser}});const getWindowTitle=()=>encodeURIComponent(window.document.title),getWindowLocation=()=>encodeURIComponent(window.location.href),T=window.location.pathname,S=getWindowTitle(),C=getWindowLocation(),bookmarkPage=()=>{if(window.sidebar&&window.sidebar.addPanel)window.sidebar.addPanel(S,C,"");else if(window.external&&"AddFavorite"in window.external)window.external.AddFavorite(C,S);else{const i=-1!==window.navigator.userAgent.toLowerCase().indexOf("mac")?"Cmd":"Ctrl";alert(`Press ${i}+D to bookmark this page.`)}},P={chrome:"Chrome",edge:"edge",firefox:"Firefox",ie:"IE",safari:"Safari"},O=(Number.POSITIVE_INFINITY,()=>{window.print()}),sendEmail=(i,s)=>{window.location.href=`mailto:?${i}&${s}`},isMobile=(i=window.navigator.userAgent)=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(i),getBrowser=(i=window.navigator.userAgent)=>{let s,_=i.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(((i=window.navigator.userAgent)=>null!==i.match(/Edg/))(i)){const s=i.indexOf("Edg");let _=4;i.match("Edge/")&&(_=5);const T=s+_;return{name:"Edge",version:parseInt(i.substring(T,i.indexOf(".",T)),10)}}return/trident/i.test(_[1])?(s=/\brv[ :]+(\d+)/g.exec(i)||[],{name:"IE",version:parseInt(s[1]||"-1",10)}):_[1]===P.chrome&&(s=i.match(/\bOPR\/(\d+)/),null!=s)?{name:"Opera",version:parseInt(s[1],10)}:(_=_[2]?[_[1],_[2]]:[window.navigator.appName,window.navigator.appVersion,"-?"],_[0]===P.safari&&(s=i.match(/version\/(\d+)/i),null!=s&&_.splice(1,1,s[1])),"MSIE"===_[0]?{name:P.ie,version:parseInt(_[1],10)}:{name:_[0],version:parseInt(_[1],10)})}},82e3:function(i,s,_){"use strict";var T=_(38096),S=_(70125),C=_(3775),P=_(61681);const O=(0,S.Q)(P.Z.get("chessComAppState")),M=O&&O.user&&O.user.isImpersonating||(0,T.sQ)(),R=(0,C.Kn)(O)&&O.board;s.Z=!M&&R?O:{board:{}}},61681:function(i,s,_){"use strict";_.d(s,{Z:function(){return T}});class CacheProvider{constructor(){this.enabled=function localStorageWorks(){const i="test";try{return localStorage.setItem(i,i),localStorage.removeItem(i),!0}catch(s){return!1}}()}get(i){return JSON.parse(localStorage.getItem(i))}set(i,s){localStorage.setItem(i,JSON.stringify(s))}}var T=new class CacheService{constructor(i,s={}){this.cache=new CacheProvider,this.cacheKey=i,this.memory=s}get ready(){return!1!==this.cache.enabled}get(i,s=null){return this.memory[i]?this.memory[i]:this.ready?(this.pull(),void 0!==this.memory[i]?this.memory[i]:s):s}pull(){return this.memory=this.cache.get(this.cacheKey)||{},this}push(){return this.cache.set(this.cacheKey,this.memory),this}remove(i){return this.ready?(this.pull(),void 0===this.memory[i]?this:(delete this.memory[i],this.push())):this}set(i,s){return this.ready?(this.pull(),this.memory[i]=s,this.push()):this}}("json_settings")},90433:function(i,s,_){"use strict";var T=_(90504);s.Z=T.Z},32349:function(i,s,_){"use strict";_.d(s,{Z:function(){return it}});var T=_(36779);var S=function arrayEach(i,s){for(var _=-1,T=null==i?0:i.length;++_<T&&!1!==s(i[_],_,i););return i},C=_(72954),P=_(31899),O=_(17179);var M=function baseAssign(i,s){return i&&(0,P.Z)(s,(0,O.Z)(s),i)},R=_(32957);var D=function baseAssignIn(i,s){return i&&(0,P.Z)(s,(0,R.Z)(s),i)},j=_(91050),$=_(87215);var U=function arrayFilter(i,s){for(var _=-1,T=null==i?0:i.length,S=0,C=[];++_<T;){var P=i[_];s(P,_,i)&&(C[S++]=P)}return C};var V=function stubArray(){return[]},Z=Object.prototype.propertyIsEnumerable,Y=Object.getOwnPropertySymbols,X=Y?function(i){return null==i?[]:(i=Object(i),U(Y(i),(function(s){return Z.call(i,s)})))}:V;var Q=function copySymbols(i,s){return(0,P.Z)(i,X(i),s)};var ee=function arrayPush(i,s){for(var _=-1,T=s.length,S=i.length;++_<T;)i[S+_]=s[_];return i},te=_(12513),ne=Object.getOwnPropertySymbols?function(i){for(var s=[];i;)ee(s,X(i)),i=(0,te.Z)(i);return s}:V;var re=function copySymbolsIn(i,s){return(0,P.Z)(i,ne(i),s)},ie=_(27771);var ae=function baseGetAllKeys(i,s,_){var T=s(i);return(0,ie.Z)(i)?T:ee(T,_(i))};var se=function getAllKeys(i){return ae(i,O.Z,X)};var oe=function getAllKeysIn(i){return ae(i,R.Z,ne)},le=_(62508),ce=_(66092),ue=(0,le.Z)(ce.Z,"DataView"),de=_(86183),he=(0,le.Z)(ce.Z,"Promise"),pe=(0,le.Z)(ce.Z,"Set"),me=(0,le.Z)(ce.Z,"WeakMap"),fe=_(34492),ge=_(90019),ve="[object Map]",be="[object Promise]",ye="[object Set]",_e="[object WeakMap]",we="[object DataView]",ke=(0,ge.Z)(ue),Te=(0,ge.Z)(de.Z),Se=(0,ge.Z)(he),Ce=(0,ge.Z)(pe),xe=(0,ge.Z)(me),Ee=fe.Z;(ue&&Ee(new ue(new ArrayBuffer(1)))!=we||de.Z&&Ee(new de.Z)!=ve||he&&Ee(he.resolve())!=be||pe&&Ee(new pe)!=ye||me&&Ee(new me)!=_e)&&(Ee=function(i){var s=(0,fe.Z)(i),_="[object Object]"==s?i.constructor:void 0,T=_?(0,ge.Z)(_):"";if(T)switch(T){case ke:return we;case Te:return ve;case Se:return be;case Ce:return ye;case xe:return _e}return s});var Pe=Ee,Ae=Object.prototype.hasOwnProperty;var Oe=function initCloneArray(i){var s=i.length,_=new i.constructor(s);return s&&"string"==typeof i[0]&&Ae.call(i,"index")&&(_.index=i.index,_.input=i.input),_},Me=_(33612);var ze=function cloneDataView(i,s){var _=s?(0,Me.Z)(i.buffer):i.buffer;return new i.constructor(_,i.byteOffset,i.byteLength)},Ie=/\w*$/;var Le=function cloneRegExp(i){var s=new i.constructor(i.source,Ie.exec(i));return s.lastIndex=i.lastIndex,s},Re=_(17685),Ne=Re.Z?Re.Z.prototype:void 0,De=Ne?Ne.valueOf:void 0;var je=function cloneSymbol(i){return De?Object(De.call(i)):{}},Be=_(12701);var $e=function initCloneByTag(i,s,_){var T=i.constructor;switch(s){case"[object ArrayBuffer]":return(0,Me.Z)(i);case"[object Boolean]":case"[object Date]":return new T(+i);case"[object DataView]":return ze(i,_);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return(0,Be.Z)(i,_);case"[object Map]":case"[object Set]":return new T;case"[object Number]":case"[object String]":return new T(i);case"[object RegExp]":return Le(i);case"[object Symbol]":return je(i)}},Ue=_(73658),Fe=_(65763),He=_(18533);var qe=function baseIsMap(i){return(0,He.Z)(i)&&"[object Map]"==Pe(i)},Ve=_(21162),Ge=_(98351),Ze=Ge.Z&&Ge.Z.isMap,We=Ze?(0,Ve.Z)(Ze):qe,Ke=_(77226);var Ye=function baseIsSet(i){return(0,He.Z)(i)&&"[object Set]"==Pe(i)},Xe=Ge.Z&&Ge.Z.isSet,Qe=Xe?(0,Ve.Z)(Xe):Ye,Je="[object Arguments]",et="[object Function]",tt="[object Object]",nt={};nt[Je]=nt["[object Array]"]=nt["[object ArrayBuffer]"]=nt["[object DataView]"]=nt["[object Boolean]"]=nt["[object Date]"]=nt["[object Float32Array]"]=nt["[object Float64Array]"]=nt["[object Int8Array]"]=nt["[object Int16Array]"]=nt["[object Int32Array]"]=nt["[object Map]"]=nt["[object Number]"]=nt["[object Object]"]=nt["[object RegExp]"]=nt["[object Set]"]=nt["[object String]"]=nt["[object Symbol]"]=nt["[object Uint8Array]"]=nt["[object Uint8ClampedArray]"]=nt["[object Uint16Array]"]=nt["[object Uint32Array]"]=!0,nt["[object Error]"]=nt[et]=nt["[object WeakMap]"]=!1;var rt=function baseClone(i,s,_,P,U,V){var Z,Y=1&s,X=2&s,ee=4&s;if(_&&(Z=U?_(i,P,U,V):_(i)),void 0!==Z)return Z;if(!(0,Ke.Z)(i))return i;var te=(0,ie.Z)(i);if(te){if(Z=Oe(i),!Y)return(0,$.Z)(i,Z)}else{var ne=Pe(i),ae=ne==et||"[object GeneratorFunction]"==ne;if((0,Fe.Z)(i))return(0,j.Z)(i,Y);if(ne==tt||ne==Je||ae&&!U){if(Z=X||ae?{}:(0,Ue.Z)(i),!Y)return X?re(i,D(Z,i)):Q(i,M(Z,i))}else{if(!nt[ne])return U?i:{};Z=$e(i,ne,Y)}}V||(V=new T.Z);var le=V.get(i);if(le)return le;V.set(i,Z),Qe(i)?i.forEach((function(T){Z.add(baseClone(T,s,_,T,i,V))})):We(i)&&i.forEach((function(T,S){Z.set(S,baseClone(T,s,_,S,i,V))}));var ce=ee?X?oe:se:X?R.Z:O.Z,ue=te?void 0:ce(i);return S(ue||i,(function(T,S){ue&&(T=i[S=T]),(0,C.Z)(Z,S,baseClone(T,s,_,S,i,V))})),Z};var it=function cloneDeep(i){return rt(i,5)}},50547:function(i,s,_){"use strict";var T=_(92414);s.Z=T.Z},66524:function(i,s,_){"use strict";_.d(s,{Z:function(){return Ae}});var T=_(36779),S=_(74752),C=_(79651);var P=function assignMergeValue(i,s,_){(void 0!==_&&!(0,C.Z)(i[s],_)||void 0===_&&!(s in i))&&(0,S.Z)(i,s,_)},O=_(93242),M=_(91050),R=_(12701),D=_(87215),j=_(73658),$=_(91438),U=_(27771),V=_(50585),Z=_(18533);var Y=function isArrayLikeObject(i){return(0,Z.Z)(i)&&(0,V.Z)(i)},X=_(65763),Q=_(73234),ee=_(77226),te=_(34492),ne=_(12513),re=Function.prototype,ie=Object.prototype,ae=re.toString,se=ie.hasOwnProperty,oe=ae.call(Object);var le=function isPlainObject(i){if(!(0,Z.Z)(i)||"[object Object]"!=(0,te.Z)(i))return!1;var s=(0,ne.Z)(i);if(null===s)return!0;var _=se.call(s,"constructor")&&s.constructor;return"function"==typeof _&&_ instanceof _&&ae.call(_)==oe},ce=_(18314);var ue=function safeGet(i,s){if(("constructor"!==s||"function"!=typeof i[s])&&"__proto__"!=s)return i[s]},de=_(31899),he=_(32957);var pe=function toPlainObject(i){return(0,de.Z)(i,(0,he.Z)(i))};var me=function baseMergeDeep(i,s,_,T,S,C,O){var V=ue(i,_),Z=ue(s,_),te=O.get(Z);if(te)P(i,_,te);else{var ne=C?C(V,Z,_+"",i,s,O):void 0,re=void 0===ne;if(re){var ie=(0,U.Z)(Z),ae=!ie&&(0,X.Z)(Z),se=!ie&&!ae&&(0,ce.Z)(Z);ne=Z,ie||ae||se?(0,U.Z)(V)?ne=V:Y(V)?ne=(0,D.Z)(V):ae?(re=!1,ne=(0,M.Z)(Z,!0)):se?(re=!1,ne=(0,R.Z)(Z,!0)):ne=[]:le(Z)||(0,$.Z)(Z)?(ne=V,(0,$.Z)(V)?ne=pe(V):(0,ee.Z)(V)&&!(0,Q.Z)(V)||(ne=(0,j.Z)(Z))):re=!1}re&&(O.set(Z,ne),S(ne,Z,T,C,O),O.delete(Z)),P(i,_,ne)}};var fe=function baseMerge(i,s,_,S,C){i!==s&&(0,O.Z)(s,(function(O,M){if(C||(C=new T.Z),(0,ee.Z)(O))me(i,s,M,_,baseMerge,S,C);else{var R=S?S(ue(i,M),O,M+"",i,s,C):void 0;void 0===R&&(R=O),P(i,M,R)}}),he.Z)},ge=_(69203);var ve=function apply(i,s,_){switch(_.length){case 0:return i.call(s);case 1:return i.call(s,_[0]);case 2:return i.call(s,_[0],_[1]);case 3:return i.call(s,_[0],_[1],_[2])}return i.apply(s,_)},be=Math.max;var ye=function overRest(i,s,_){return s=be(void 0===s?i.length-1:s,0),function(){for(var T=arguments,S=-1,C=be(T.length-s,0),P=Array(C);++S<C;)P[S]=T[s+S];S=-1;for(var O=Array(s+1);++S<s;)O[S]=T[S];return O[s]=_(P),ve(i,this,O)}};var _e=function constant(i){return function(){return i}},we=_(77904),ke=we.Z?function(i,s){return(0,we.Z)(i,"toString",{configurable:!0,enumerable:!1,value:_e(s),writable:!0})}:ge.Z,Te=Date.now;var Se=function shortOut(i){var s=0,_=0;return function(){var T=Te(),S=16-(T-_);if(_=T,S>0){if(++s>=800)return arguments[0]}else s=0;return i.apply(void 0,arguments)}},Ce=Se(ke);var xe=function baseRest(i,s){return Ce(ye(i,s,ge.Z),i+"")},Ee=_(56009);var Pe=function isIterateeCall(i,s,_){if(!(0,ee.Z)(_))return!1;var T=typeof s;return!!("number"==T?(0,V.Z)(_)&&(0,Ee.Z)(s,_.length):"string"==T&&s in _)&&(0,C.Z)(_[s],i)};var Ae=function createAssigner(i){return xe((function(s,_){var T=-1,S=_.length,C=S>1?_[S-1]:void 0,P=S>2?_[2]:void 0;for(C=i.length>3&&"function"==typeof C?(S--,C):void 0,P&&Pe(_[0],_[1],P)&&(C=S<3?void 0:C,S=1),s=Object(s);++T<S;){var O=_[T];O&&i(s,O,T,C)}return s}))}((function(i,s,_){fe(i,s,_)}))},18131:function(i,s,_){"use strict";_.d(s,{N:function(){return createComponentConfig},o:function(){return mergePropsData}});const createComponentConfig=(i,s)=>{const _=document.querySelector(i),T=i.replace(/#|\./g,""),S={[`${T}`]:{}};return null!=_&&(S[T]=Object.assign({el:i},s(_))),S},mergePropsData=(i,s)=>(i.propsData=Object.assign({},i.propsData,s),i)},45236:function(i,s,_){"use strict";_.d(s,{KZ:function(){return getIsDarkMode},Yc:function(){return S}});_(7597);const T="dark-mode",getIsDarkMode=()=>document.body.classList.contains(T),S=getIsDarkMode()},26924:function(i,s,_){"use strict";var T=_(3775);const S={name:"click-outside",bind(i,s){let _,S,C=1,P="click";if((0,T.mf)(s.value)?_=s.value:(0,T.Kn)(s.value)&&(_=s.value.handler,C=s.value.delay,P=s.value.clickEvent||"click"),!(0,T.mf)(_))throw new Error("must pass function to click-outside");const onClickElement=i=>i.stopPropagation(),onClickDocument=s=>i!==s.target&&_(i,s);i.$unbindClickOutside&&i.$unbindClickOutside(),i.$unbindClickOutside=()=>{clearTimeout(S),i.removeEventListener(P,onClickElement),document.removeEventListener(P,onClickDocument),delete i.$unbindClickOutside},S=setTimeout((()=>{i.addEventListener(P,onClickElement),document.addEventListener(P,onClickDocument)}),C)},unbind(i){i.$unbindClickOutside&&i.$unbindClickOutside()}};s.Z=S},55622:function(i,s,_){"use strict";_.d(s,{Z:function(){return U}});var T=_(7597),S=_(24452),C=_(74959),P=_(53502),O=_(97032);const getOptions=i=>O.Z.isString(i.value)?{content:i.value}:i.value,noop=()=>{};var M={name:"Tooltip",created(){this.active=null,this.hideOnDocumentVisibilityChangeHandler=noop,this.hideOnScrollHandler=noop,this.instances=[]},beforeDestroy(){this.instances=null,this.clearTooltip()},methods:{bind(i,s){this.instances.push({element:i,options:getOptions(s||{value:i.getAttribute("title")})}),i.removeAttribute("title"),i.addEventListener("mouseenter",this.showTooltip)},update(i,s){const _=this.instances.find((s=>s.element===i));_&&(_.options=getOptions(s))},unbind(i){const s=this.instances.find((s=>s.element===i));s&&(this.active===s&&this.hideTooltip({target:s.element}),C.Z.remove(this.instances,s),i.removeEventListener("mouseenter",this.showTooltip),i.removeEventListener("mouseleave",this.hideTooltip))},showTooltip({target:i}){const s=this.instances.find((s=>s.element===i));if(!s||!s.options||!s.options.content)return;const _=s.options.delay||400,C=s.options.position||"top",O=s.options.padding||0;this.clearTooltip(),s.element.classList.contains(T.xL.CONFIRM_OPEN)||(this.active=s,s.element.addEventListener("mouseleave",this.hideTooltip),this.showTimeout=P.Z.setTimeout((()=>{this.showFrame=window.requestAnimationFrame((()=>{this.$refs&&this.$refs.content&&s.options&&(this.$refs.content.textContent=s.options.content),this.$el.classList.add(C),(0,S._O)(s.element,this.$el,C,O)}))}),_)),!1!==s.options.closeOnScroll&&this.hideOnScroll(i),this.hideOnDocumentVisibilityChange(i)},hideOnDocumentVisibilityChange(i){this.hideOnDocumentVisibilityChangeHandler=()=>{this.hideTooltip({target:i})},document.addEventListener("visibilitychange",this.hideOnDocumentVisibilityChangeHandler)},hideOnScroll(i){this.hideOnScrollHandler=()=>{this.hideTooltip({target:i})},window.addEventListener("scroll",this.hideOnScrollHandler)},hideTooltip({target:i}){this.instances.find((s=>s.element===i))&&(this.clearTooltip(),this.hideFrame=window.requestAnimationFrame((()=>{this.$refs&&this.$refs.content&&(this.$refs.content.textContent=null),(0,S.fs)(this.$el)})))},clearTooltip(){this.active&&(this.active.element.removeEventListener("mouseleave",this.hideTooltip),this.active=null),P.Z.clearTimeout(this.showTimeout),window.cancelAnimationFrame(this.hideFrame),window.cancelAnimationFrame(this.showFrame),window.removeEventListener("scroll",this.hideOnScrollHandler),document.removeEventListener("visibilitychange",this.hideOnDocumentVisibilityChangeHandler)}}},R=(0,_(51900).Z)(M,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{staticClass:"tooltip tip vue-tooltip"},[_("div",{staticClass:"arrow"}),i._v(" "),_("div",{ref:"content",staticClass:"inner"})])}),[],!1,null,null,null).exports;const D=_(52439).default.extend(R);let j,$=!1;const getTooltip=()=>{if(j||(j=new D),!$){const i=document.createElement("div");document.body.appendChild(i),j.$mount(i),$=!0}return j};var U={bind:(i,s)=>getTooltip().bind(i,s),componentUpdated:(i,s)=>getTooltip().update(i,s),unbind:(i,s)=>getTooltip().unbind(i,s)}},82402:function(i,s,_){"use strict";_.d(s,{K:function(){return downloadAsFile}});var T=_(93162);function downloadAsFile(i,s){const _=new Blob([i],{type:"application/x-chess-pgn;charset=utf-8"});(0,T.saveAs)(_,s||"download")}},86673:function(i,s,_){"use strict";var T=_(74279);const S=new(_.n(T)());s.Z=S},42496:function(i,s,_){"use strict";_.d(s,{q:function(){return expectEvent},m:function(){return waitForEvent}});var T=_(86673);const S={};function expectEvent(i){S[i]||(S[i]=new Promise((s=>{T.Z.on(i,(i=>s(i)))})))}function waitForEvent(i){return expectEvent(i),S[i]}},91353:function(i,s,_){"use strict";_.d(s,{FR:function(){return hasFeatureAccess},zt:function(){return setFeatureFlags}});const T={},hasFeatureAccess=i=>{var s,_;return!!(null==(_=null==(s=window.chesscom)?void 0:s.features)?void 0:_.includes(i))||Boolean(T[i])},setFeatureFlags=i=>{const s=i.dataset,_=Object.keys(s),S="feature";_.forEach((i=>{0===i.indexOf(S)&&(({feature:i,hasAccess:s})=>{T[i]=s})({feature:i.substring(S.length).split(/(?=[A-Z])/).join("_").toLowerCase(),hasAccess:Boolean(s[i])})}))}},2101:function(i,s,_){"use strict";_.d(s,{kN:function(){return S},_$:function(){return C},Ux:function(){return setCheckboxModel},sY:function(){return setCheckboxUi},nj:function(){return getPgnOpts}});var T=_(23992);const S=(0,T.reactive)({isCommentsCheckboxVisible:!1,isHighlightsCheckboxVisible:!1,isAnalyzedPgnCheckboxVisible:!1}),C=(0,T.reactive)({isAnalyzedPgnEnabled:!1,isCommentsEnabled:!0,isHighlightsEnabled:!1,isTimestampsEnabled:!1});function setCheckboxModel(i){Object.keys(i).forEach((s=>{C[s]=i[s]}))}function setCheckboxUi(i){Object.keys(i).forEach((s=>{S[s]=i[s]}))}const getPgnOpts=({isCommentsEnabled:i,isHighlightsEnabled:s,isTimestampsEnabled:_})=>{const T=!i,S=[];return _&&S.push("clk","timestamp"),s&&S.push("c_effect","c_arrow","c_highlight"),{hideComments:T,restrictCommands:S}}},14164:function(i,s,_){"use strict";_.d(s,{i:function(){return getMessageFromError}});var T=_(49790);_(18160);const getMessageFromError=i=>{if(i.response&&401!==i.response.status)return(i.response.data&&i.response.data.message?i.response.data.message:T.R0.badRequest)||i.response.statusText}},38075:function(i,s,_){"use strict";_.d(s,{Z:function(){return R}});var T=_(9669),S=_.n(T)();function isSpecialRequest(i){return function isPlatformRequest(i){return i.startsWith("/service/")||i.includes(".com/service/")}(i)||function isChessbombRequest(i){return i.includes("chessbomb.com")}(i)||function isSubdomainRequest(i){return/https:\/\/(?!www)([\S]+)chess.com/.test(i)}(i)}const C=["delete","patch","post","put"];var P=_(20169);const random=()=>Math.random().toString(36).substring(2,15);const boolToInt=i=>(Object.keys(i).forEach((s=>{const _=i[s];"boolean"==typeof _&&(i[s]=Number(_)),"object"==typeof _&&null!==_&&(i[s]=boolToInt(_))})),i);var O=[function addCsrfToken(i){return i&&!isSpecialRequest(i.url)&&C.includes(i.method)?(i.data instanceof FormData||i.data instanceof URLSearchParams?i.data.append("_token",window.context.csrf.token):i.data=Object.assign({_token:window.context.csrf.token},i.data||{}),i):i},function addRequestId(i){return(()=>{const i=document.getElementById(P.GO.NAV_ROOT);return!!i&&Boolean(i.dataset.featureClientRequestId)})()&&(i.headers.common["X-Chesscom-Request-Id"]=(i=>{let s=random();for(;s.length<i;)s+=random();return s.substring(0,i)})(32)),i},function castBoolsToInts(i){return!i||isSpecialRequest(i.url)||"object"==typeof i.data&&(i.data=boolToInt(i.data)),i}];function responseErrorInterceptor(i){const s=i.config,_=i.response;if("Cancel"===i.toString())return Promise.reject(i);try{s.data=JSON.parse(s.data)}catch(T){return Promise.reject(i)}if(_&&403===_.status&&_.headers["x-chesscom-csrf-token"]&&s&&!s.data.retry){const i=_.headers["x-chesscom-csrf-token"];return s.data._token=i,s.data.retry=!0,window.context.csrf.token=i,S(s)}return Promise.reject(i)}var M=_(57428);function responseInterceptor(i){return i.headers&&i.headers["x-chesscom-request-id-cdn"]&&((0,M.cM)({key:"x-chesscom-request-id-cdn",value:i.headers["x-chesscom-request-id-cdn"]}),(0,M.cM)({key:"x-chesscom-request-id-lb",value:i.headers["x-chesscom-request-id-lb"]})),i}function findExistingInterceptor(i,s){var _;if(!s.name)throw new Error("interceptor must be a named function");return null==(_=i.handlers)?void 0:_.find((i=>{var _;return(null==(_=i.fulfilled)?void 0:_.name)===s.name}))}!function registerInterceptors(i){O.forEach((s=>{findExistingInterceptor(i.interceptors.request,s)||i.interceptors.request.use(s)})),findExistingInterceptor(i.interceptors.response,responseInterceptor)||i.interceptors.response.use(responseInterceptor,responseErrorInterceptor)}(S);var R=S},16272:function(i,s,_){"use strict";_.d(s,{p6:function(){return V},uf:function(){return formatNumber},mr:function(){return formatTime}});var T=_(7597),S=_(18160),C=Object.defineProperty,P=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,__defNormalProp=(i,s,_)=>s in i?C(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,__spreadValues=(i,s)=>{for(var _ in s||(s={}))O.call(s,_)&&__defNormalProp(i,_,s[_]);if(P)for(var _ of P(s))M.call(s,_)&&__defNormalProp(i,_,s[_]);return i};function getLocale(i="",s="-"){return(i||(Object.prototype.hasOwnProperty.call(window,"context")?window.context.i18n.locale:"en-US")).replace("_",s)}const R=31536e6,D=(()=>{const i=864e5;switch((new Date).getMonth()){case 3:case 5:case 8:case 10:return 30*i;case 1:return(new Date).getFullYear()%4==0?29*i:28*i;default:return 31*i}})(),j=864e5,$=36e5,U=6e4,V={mergeOptions:i=>__spreadValues({abbreviateHours:!1,abbreviateMinutes:!0,includeDays:!1},i),getUnitsInInt(i,s={}){let _=0,T=0,S=0,C=i;return!0===V.mergeOptions(s).includeDays&&(_=Math.floor(C/86400),C-=86400*_),T=Math.floor(C/3600),C-=3600*T,S=Math.floor(C/60),{minutes:S,hours:T,days:_}},getDaysHoursMinutesAsString(i,s={}){const _=V.getDaysHoursMinutesAsObject(i,s),{minutes:T,hours:S,days:C}=V.getUnitsInInt(i,s),P=[];return C>0&&P.push(_.days),S>0&&P.push(_.hours),(T>0||0===P.length)&&P.push(_.minutes),P.join(" ")},getDaysHoursMinutesAsObject(i,s={}){const _=V.mergeOptions(s),{minutes:T,hours:C,days:P}=V.getUnitsInInt(i,s),O=S.Z.transChoice("{0} 0 days|{1} 1 day|]1,Inf] %1$s% days",P,{"%1$s%":P});let M=S.Z.transChoice("{0} 0 hours|{1} 1 hour|]1,Inf] %1$s% hours",Math.floor(C),{"%1$s%":C}),R=S.Z.transChoice("{0} 0 min|{1} 1 min|]1,Inf] %1$s% min",T,{"%1$s%":T});return _.abbreviateHours&&(M=S.Z.transChoice("{0} 0 hrs|{1} 1 hr|]1,Inf] %1$s% hrs",Math.floor(C),{"%1$s%":C})),_.abbreviateMinutes||(R=S.Z.transChoice("{1} 1 minute|]1,Inf] %1$s% minutes",T,{"%1$s%":T})),{days:O,hours:M,minutes:R}},long:(i=new Date,s={})=>{const _=i instanceof Date?i:new Date(i);return new Intl.DateTimeFormat(getLocale(),__spreadValues(__spreadValues({},{year:"numeric",month:"short",day:"numeric"}),s)).format(_)},full:(i=new Date,s={})=>{const _=i instanceof Date?i:new Date(i);return new Intl.DateTimeFormat(getLocale(),__spreadValues(__spreadValues({},{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}),s)).format(_)},numeric:(i=new Date,s={})=>{const _=i instanceof Date?i:new Date(i);if(window.Intl){const i=getLocale();return new Intl.DateTimeFormat(i,Object.assign({day:"2-digit",month:"2-digit",year:"numeric"},s)).format(_)}return`${`0${_.getMonth()+1}`.slice(-2)}/${`0${_.getDate()}`.slice(-2)}/${_.getFullYear()}`},relative:(i,s=!0,_=!0,T=!1,C=Date.now())=>{let P,O;const M=(i instanceof Date?i:new Date(i)).getTime(),V=T?M-C:C-M;if(Math.abs(V)>D&&s){const i={year:"numeric",month:"short",day:"numeric"};return new Intl.DateTimeFormat(getLocale(),i).format(M)}if(V>=R)O="year",P=Math.abs(Math.floor(V/R));else if(V>=D)O="month",P=Math.abs(Math.floor(V/D));else if(V>=j)O="day",P=Math.abs(Math.floor(V/j));else if(V>=$)O="hour",P=Math.abs(Math.floor(V/$));else{if(!(V>=U))return T?S.Z.trans("Right now"):S.Z.trans("Just now");O="minute",P=Math.abs(Math.floor(V/U))}return function getTimeAgo(i,s,_){return"year"===i?s?S.Z.transChoice("{1} 1 year ago|]1,Inf] %1$s% years ago",_,{"%1$s%":_}):S.Z.transChoice("{1} 1 year|]1,Inf] %1$s% years",_,{"%1$s%":_}):"month"===i?s?S.Z.transChoice("{1} 1 month ago|]1,Inf] %1$s% months ago",_,{"%1$s%":_}):S.Z.transChoice("{1} 1 month|]1,Inf] %1$s% months",_,{"%1$s%":_}):"day"===i?s?S.Z.transChoice("{1} 1 day ago|]1,Inf] %1$s% days ago",_,{"%1$s%":_}):S.Z.transChoice("{1} 1 day|]1,Inf] %1$s% days",_,{"%1$s%":_}):"hour"===i?s?S.Z.transChoice("{1} 1 hour ago|]1,Inf] %1$s% hours ago",_,{"%1$s%":_}):S.Z.transChoice("{1} 1 hour|]1,Inf] %1$s% hours",_,{"%1$s%":_}):"minute"===i?s?S.Z.transChoice("{1} 1 minute ago|]1,Inf] %1$s% minutes ago",_,{"%1$s%":_}):S.Z.transChoice("{1} 1 minute|]1,Inf] %1$s% minutes",_,{"%1$s%":_}):""}(O,Math.abs(V)===V&&_,P)},customNumericDate:(i=new Date,s="/",_="m/d/y")=>{const T=i instanceof Date?i:new Date(i),S={d:`0${T.getDate()}`.slice(-2),m:`0${T.getMonth()+1}`.slice(-2),y:`${T.getFullYear()}`};if(!["m","d","y"].every((i=>_.split("/").includes(i))))return`${S.m}${s}${S.d}${s}${S.y}`;return _.split("/").reduce(((i,s)=>(i.push(S[s]),i)),[]).join(s)},userDate:i=>{const s=window.context.user?new Date(1e3*i).toLocaleString("en-US",{timeZone:window.context.user.timezone}):new Date(1e3*i),_=new Date(s).setMilliseconds(0),S=new Date(_),C=T.Iz.daysOfWeek[S.getDay()],P=S.getDate(),O=T.Iz.months[S.getMonth()],M=S.toLocaleTimeString(getLocale()),R=M.split(" ").length>1?M.split(" ")[1]:"",D=M.split(" ")[0].split(":");D.pop();return`${C}, ${O} ${P}, ${D.join(":")}${R}`}};function formatNumber(i,s="",_={}){return new Intl.NumberFormat([getLocale(s),"en-US"],_).format(i)}function formatTime(i,s=0){if(i<0||null==i)return"";const _=(i%1e3/1e3).toFixed(s+1).slice(2,s+2),T=Math.floor(i/1e3),S=Math.floor(T/60),C=Math.floor(S/60),P=S%60,O=T%60;let M=`${P<10&&C?`0${P}`:P}:${O<10?`0${O}`:O}`;return C&&(M=`${C}:${M}`),s&&(M=`${M}.${_}`),M}},97203:function(i,s,_){"use strict";_.d(s,{q:function(){return pixelDensity},b:function(){return retinaImageSrcset}});const pixelDensity=(i,s)=>{if(!i)return;let _="@2x";return/\.svg$/.test(i)?i:([1.5,3,4].indexOf(s)>-1&&(_=`@${s}x`),i.replace(/(\.\w+)$/,(i=>_+i)))},retinaImageSrcset=i=>{if(!i)return null;const s=i.substring(i.lastIndexOf("/")+1),_=i.replace(s,"");return`${i}, ${_}${pixelDensity(s)} 2x`}},82220:function(i,s,_){"use strict";var T=_(25014);s.Z=()=>-1!==window.location.href.indexOf(T.Z.generate("web_2fa_login"))},41252:function(i,s,_){"use strict";var T=_(19958),S=_(52439),C=Object.defineProperty,P=Object.defineProperties,O=Object.getOwnPropertyDescriptors,M=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,__defNormalProp=(i,s,_)=>s in i?C(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,__spreadValues=(i,s)=>{for(var _ in s||(s={}))R.call(s,_)&&__defNormalProp(i,_,s[_]);if(M)for(var _ of M(s))D.call(s,_)&&__defNormalProp(i,_,s[_]);return i};S.default.mixin(T.Z);const instantiate=i=>{return new S.default((s=__spreadValues({},i),_={el:i.el,render:s=>s(i.component,{props:i.propsData}),store:i.store},P(s,O(_))));var s,_};s.Z=(i={})=>{const s={},createInstance=(_,T={})=>i[_]&&Object.keys(i[_]).length?(s[_]=s[_]||instantiate(__spreadValues(__spreadValues({},i[_]),T)),s[_]):null;return{createInstance:createInstance,createInstances:i=>{i.forEach((i=>createInstance(i)))},instances:s}}},57428:function(i,s,_){"use strict";_.d(s,{Nu:function(){return addToLog},cM:function(){return log}});var T=_(30869);const checkWindowObject=()=>{(({key:i,value:s})=>{window.chesscom||(window.chesscom={}),window.chesscom[i]||(window.chesscom[i]=s)})({key:"logData",value:{}})},log=({key:i,value:s})=>{checkWindowObject(),window.chesscom.logData[i]=s,(0,T.$)({[i]:s})},addToLog=({key:i,value:s})=>{checkWindowObject();const _=window.chesscom.logData[i]||[];Array.isArray(_)?window.chesscom.logData[i]=[..._,s]:window.chesscom.logData[i]=[_,s]}},63930:function(i,s,_){"use strict";_.d(s,{z:function(){return objectIsEmpty},PT:function(){return objectHasSomeProperties},$n:function(){return objectHasProp},mc:function(){return invertObject},CR:function(){return propsToCamelCase},Od:function(){return hasShallowDiff},Yp:function(){return filterKeys}});var T=_(90433),S=Object.defineProperty,C=Object.defineProperties,P=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,__defNormalProp=(i,s,_)=>s in i?S(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,__spreadValues=(i,s)=>{for(var _ in s||(s={}))M.call(s,_)&&__defNormalProp(i,_,s[_]);if(O)for(var _ of O(s))R.call(s,_)&&__defNormalProp(i,_,s[_]);return i},__spreadProps=(i,s)=>C(i,P(s));const objectIsEmpty=i=>i&&!Object.keys(i).length;function objectHasSomeProperties(i,s){return s.some((s=>i[s]))}const objectHasProp=(i={},s)=>Object.prototype.hasOwnProperty.call(i,s),invertObject=i=>Object.keys(i).reduce(((s,_)=>__spreadProps(__spreadValues({},s),{[i[_]]:_})),{}),propsToCamelCase=i=>{const s={};for(const _ in i)if(objectHasProp(i,_)){const S="object"==typeof i[_]?propsToCamelCase(i[_]):i[_];s[(0,T.Z)(_)]=S}return s};function hasShallowDiff(i={},s={}){if(Object.keys(i).length!==Object.keys(s).length)return!0;for(const _ in i)if(i[_]!==s[_])return!0;return!1}function filterKeys(i,s){return Object.entries(i).reduce(((i,[_,T])=>(s.includes(_)&&(i[_]=T),i)),{})}},44614:function(i,s,_){"use strict";_.d(s,{u:function(){return objectHasData}});const objectHasData=(i={})=>i&&Object.keys(i).length>0},25014:function(i,s,_){"use strict";_.d(s,{Z:function(){return C}});var T=_(84606),S=_.n(T);function getRouting(){return S()}_(84770),_(63207);var C=new class Router{generate(i,s,_){const T=s||{};"string"==typeof T.username&&(T.username=T.username.toLowerCase()),function copyRoute(i){var s,_,T;const S=getRouting();if(!S.routes_[i]){try{Object.assign(S.context_,{base_url:"",prefix:"",host:"www.chess.com",port:"",scheme:"https",locale:""})}catch(C){}if(Object.isFrozen(S.routes_)&&(S.routes_=Object.assign({},S.routes_)),null==(_=null==(s=window.chesscom)?void 0:s.routes)?void 0:_[i]){const s=window.chesscom.routes[i],_=".chess-dev.com",C=window.location.host.replace(/^[^.]+/,"");C&&(null==(T=s.hosttokens)||T.forEach((i=>{i.forEach(((s,T)=>{s.includes(_)&&(i[T]=s.replace(_,C))}))}))),S.routes_[i]=s}}}(i);try{return getRouting().generate(i,T,_)}catch(S){const s=new Error(`Couldn't find missing route '${i}'.`);return console.error(s),"/"}}i18nable(i){return`i18n_${i}`in window.chesscom.routes}i18n(i,s,_){var T,S;let C=i;const P=s||{};if((null==(S=null==(T=window.context)?void 0:T.route)?void 0:S.startsWith("i18n"))&&this.i18nable(i)){P["_locale"]=window.context.locale.slice(0,2),C=`i18n_${i}`}const O=this.generate(C,P,_);return _?O:O.replace(/^.*\/\/[^/]+/,"")}}},9975:function(i,s){"use strict";s.Z=new class ScriptLoader{constructor(){this.insert=this.loadScript(((i,s)=>{const _=document.createElement("script");return _.type="text/javascript",_.src=i,s&&Object.keys(s).forEach((i=>{_.setAttribute(i,s[i])})),document.body.appendChild(_),_}))}loadScript(i){const s={};return(_,T)=>{if(void 0===s[_]){const S=new Promise(((s,S)=>{const C=i(_,T);C.onload=i=>{s(i)},C.onreadystatechange=C.onload,C.onerror=i=>{S(i)}}));s[_]=S}return s[_]}}}},84770:function(i,s,_){"use strict";_.d(s,{m:function(){return getSentryBrowser}});Object.create,Object.defineProperty,Object.getOwnPropertyDescriptor,Object.getOwnPropertyNames,Object.getPrototypeOf,Object.prototype.hasOwnProperty;async function getSentryBrowser(){return _.e(48).then(_.bind(_,26048))}},63207:function(i,s,_){"use strict";_.d(s,{U:function(){return isSentryAvailable}});var T=_(84770);async function isSentryAvailable(){try{const i=await(0,T.m)();return Boolean(i.getCurrentHub().getClient())}catch(i){return!1}}},30869:function(i,s,_){"use strict";_.d(s,{$:function(){return setSentryContext}});var T=_(84770),S=_(63207);async function setSentryContext(i){if(!(await(0,S.U)()))return;(await(0,T.m)()).configureScope((s=>{Object.keys(i).forEach((_=>{s.setExtra(_,i[_])}))}))}},19958:function(i,s,_){"use strict";var T=_(32305);s.Z={methods:{$trans:T.dW,$transChoice:T.jn}}},32305:function(i,s,_){"use strict";_.d(s,{dW:function(){return trans},jn:function(){return transChoice},$H:function(){return M}});var T,S,C=_(72475),P=_.n(C);const O="fr_FR"===(null==(S=null==(T=window.context)?void 0:T.i18n)?void 0:S.locale);P().placeHolderPrefix="",P().placeHolderSuffix="";const escapeParameters=i=>{const s={};return null!=i&&Object.keys(i).forEach((_=>{const T=_.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");null!=T&&T.length>0&&(s[T]=i[_])})),s},getTranslatedPhrase=(i,s="messages",_)=>window.chesscom_translations&&window.chesscom_translations[s]&&window.chesscom_translations[s][i]?window.chesscom_translations[s][i]:window.chesscom_live_translations&&window.chesscom_live_translations[s]&&window.chesscom_live_translations[s][i]?window.chesscom_live_translations[s][i]:"live"===s&&window.i18n_phrases&&window.i18n_phrases[i]?window.i18n_phrases:"countries"===s&&window.Country&&window.Country[i]?window.Country:_?void 0:"javascript"!==s?getTranslatedPhrase(i,"javascript"):i,trans=(i,s,_)=>P().trans(getTranslatedPhrase(i,_),escapeParameters(s),_),transChoice=(i,s,_,T)=>{if(void 0===s)return"";const S=getTranslatedPhrase(i,T),C=escapeParameters(_);return O?function frenchTransChoice(i,s,_,T){const[S,C,O]=i.split("|").map((i=>i.trim()));if(0===s||1===s)return P().trans(S,_,T);if(s%1e6==0)return P().trans(C,_,T);return P().trans(O,_,T)}(S,s,C,T):P().transChoice(S,s,C)};const M={trans:trans,transChoice:transChoice}},18160:function(i,s,_){"use strict";var T=_(32305);s.Z=T.$H},3775:function(i,s,_){"use strict";function isNull(i){return null===i}function isObject(i){return!isNull(i)&&"object"==typeof i}function isFunction(i){return"function"==typeof i}function isBoolean(i){return"boolean"==typeof i}_.d(s,{Kn:function(){return isObject},mf:function(){return isFunction},jn:function(){return isBoolean}})},19801:function(i,s,_){"use strict";_.d(s,{x:function(){return openWindow}});var T=_(37101);const openWindow=i=>{(0,T.b)();const s=`left=${window.screen.width/2-280}, top=${window.screen.height/2-340}`;window.open(i,"_blank",`width=560, height=510,${s},resizable=no, status=no, menubar=no, scrollbars=no`)}},74672:function(i,s,_){"use strict";function postMessage(i){window.postMessage(i,window.location.origin)}_.d(s,{o:function(){return postMessage}})},49790:function(i,s,_){"use strict";_.d(s,{jC:function(){return S},R0:function(){return C},sY:function(){return P},xL:function(){return O},V5:function(){return M}});var T=_(18160);const S=7e3,C={badRequest:T.Z.trans("Oops. Looks like there was an error. Sorry! Please refresh.")},P={avatarUploaded:T.Z.trans("Avatar uploaded"),commentCreated:T.Z.trans("Thank you for your comment."),commentDeleted:T.Z.trans("Comment deleted."),commentEmptyContent:T.Z.trans("You cannot send an empty comment"),commentUpdated:T.Z.trans("Comment updated."),commentLinkCopied:T.Z.trans("Comment link is copied to clipboard"),copied:T.Z.trans("Copied to clipboard"),forumsMarkedAsRead:T.Z.trans("All forum topics have been marked as read"),featureContent:T.Z.trans("Feature Set! It might take a minute or two to appear."),inviteEmpty:T.Z.trans("Please select the players for whom to send the invitation"),inviteSent:T.Z.trans("Your invitations were sent successfully"),pgnCopied:T.Z.trans("PGN copied to buffer")},O={ALERT_FLASH_CONTAINER:"widget-alert-flash",DISMISSING:"alert-banner-dismissing"},M={error:"error",info:"info",success:"success"};M.error,C.badRequest},26670:function(i,s,_){"use strict";_.d(s,{el:function(){return createAlert},OD:function(){return dismissAlert},x2:function(){return showError}});var T=_(49790);function dismissAlert(i){const s=document.getElementById(`alert-${i}`);s&&hideAlertElement(s)}function createAlertElement(i){var s;i.type!==T.V5.success&&function dismissAllButLast(i=2){var s;const _=getContainer();Array.from(null!=(s=null==_?void 0:_.querySelectorAll(`.alerts-alert:not(:nth-last-child(-n + ${i}))`))?s:[]).forEach(hideAlertElement)}(2),function loadLazyStyle(i){const s=document.querySelector(`link[data-href*="/${i}.client"]`);s&&(s.setAttribute("href",s.getAttribute("data-href")),s.removeAttribute("data-href"))}("alerts");const _=document.createElement("div");_.classList.add("alerts-alert"),_.classList.add("alerts-enter"),_.classList.add(`alerts-${i.type}`),_.setAttribute("id",`alert-${i.id}`);const S=document.createElement("span");S.classList.add("alerts-message"),S.innerHTML=i.message;const C=document.createElement("button");C.classList.add("alerts-close"),C.setAttribute("type","button"),C.innerHTML='<span class="icon-font-chess x"></span>',_.appendChild(S),_.appendChild(C),null==(s=getContainer())||s.appendChild(_),C.addEventListener("click",onClickClose),i.type===T.V5.success&&setTimeout(hideAlertElement,T.jC,_)}function getContainer(){return document.getElementById(T.xL.ALERT_FLASH_CONTAINER)}function hideAlertElement(i){i.classList.add("alerts-leave"),setTimeout(removeAlertElement,200,i)}function removeAlertElement(i){var s;try{null==(s=getContainer())||s.removeChild(i)}catch(_){!function clearAlerts(){const i=getContainer();i&&(i.innerHTML="")}()}}function onClickClose(i){var s,_;const T=null==(_=null==(s=i.target)?void 0:s.closest)?void 0:_.call(s,".alerts-alert");T&&hideAlertElement(T)}var S=_(54752),C=_.n(S);function createAlert({message:i,type:s,id:_}){createAlertElement({id:null!=_?_:C()(),type:s,message:i})}function showError(i=T.R0.badRequest){createAlert({type:T.V5.error,message:i})}},28225:function(i,s,_){"use strict";_.d(s,{U:function(){return T}});const T={CHANGE_STEP:"change-step",CLEAR_ERROR:"clear-error",CLOSE_MODAL:"close-modal",HANDLE_INPUT:"handle-input",HANDLE_SELECTED_SUGGESTION:"handle-selected-suggestion",LOGIN_AS_GUEST:"login-as-guest",PLAY_AS_GUEST:"play-as-guest",SHOW_AUTHENTICATION_MODAL:"show-authentication-modal",SHOW_ERROR_MESSAGE:"show-error-message",SHOW_LOGIN_MODAL:"show-login-modal",SKILL_LEVEL_UPDATED:"skill-level-updated"}},62844:function(i,s,_){"use strict";_.d(s,{x:function(){return T}});const T={AUTHENTICATION_MODAL:"authentication-modal",AUTHENTICATION_MODAL_TRIGGER:"authentication-modal-trigger",LOGIN_MODAL:"login-modal",LOGIN_MODAL_TRIGGER:"login-modal-trigger"}},86133:function(i,s,_){"use strict";_.d(s,{t:function(){return T}});const T={AUTHENTICATION_INTRO:"intro",AUTHENTICATION_SIGNUP:"signup"}},36523:function(i,s,_){"use strict";_.d(s,{zI:function(){return M},xt:function(){return R},O9:function(){return D},Tg:function(){return j},U3:function(){return $},lu:function(){return U},Yi:function(){return O.Y},VD:function(){return V},PN:function(){return Z}});var T=_(42805),S=_(49167),C=_(32305),P=_(26211),O=_(59526);const M={ARCADE:T.$l.Animation.Types.Arcade,DEFAULT:T.$l.Animation.Types.Default,FAST:T.$l.Animation.Types.Fast,NATURAL:T.$l.Animation.Types.Natural,NONE:T.$l.Animation.Types.None,SLOW:T.$l.Animation.Types.Slow},R={ALMOST_CORRECT:{color:"#8a8886",icon:S.Yw,type:"Undo"},BEST_MOVE:{color:"#9EBA5A",icon:S.Ab,key:"bestMove",label:(0,C.dW)("Best Move"),phrase:(0,C.dW)("is best"),type:"BestMove"},BLUNDER:{annotation:P.v.$4,color:"#b33430",icon:S.gt,key:"blunder",label:(0,C.dW)("Blunder"),phrase:(0,C.dW)("is a blunder"),type:"Blunder"},BOOK:{icon:S.s9,key:"book",label:(0,C.dW)("Book"),phrase:(0,C.dW)("is a book move"),type:"Book"},BRILLIANT:{color:"#1baca6",icon:S.ZE,key:"brilliant",label:(0,C.dW)("Brilliant"),phrase:(0,C.dW)("is brilliant"),type:"Brilliant"},CORRECT:{color:"#acce59",key:"correct",icon:S.wC,label:(0,C.dW)("Correct"),type:"Correct"},CRITICAL:{key:"critical",label:(0,C.dW)("Critical")},EXCELLENT:{color:"#5a9ac0",icon:S.dS,key:"excellent",label:(0,C.dW)("Excellent"),phrase:(0,C.dW)("is excellent"),type:"Excellent"},FORCED:{icon:S.wH,key:"forced",label:(0,C.dW)("Forced"),phrase:(0,C.dW)("is forced"),type:"Forced"},GOOD:{icon:S.R3,key:"good",label:(0,C.dW)("Good"),phrase:(0,C.dW)("is good"),type:"Good"},INACCURACY:{annotation:P.v.$6,color:"#f0c15c",icon:S.GE,key:"inaccuracy",label:(0,C.dW)("Inaccuracy"),phrase:(0,C.dW)("is an inaccuracy"),type:"Inaccuracy"},INCORRECT:{color:"#c93430",icon:S.ds,key:"incorrect",label:(0,C.dW)("Incorrect"),type:"Incorrect"},MISSED_WIN:{color:"#dd5357",icon:S.nZ,key:"missedWin",label:(0,C.dW)("Missed Win"),phrase:(0,C.dW)("is a missed win"),type:"MissedWin"},MISTAKE:{annotation:P.v.$2,color:"#e6912c",icon:S.li,key:"mistake",label:(0,C.dW)("Mistake"),phrase:(0,C.dW)("is a mistake"),type:"Mistake"},STAR:{color:"#e6912c",icon:S.Ab,key:"star",type:"BestMove"},THREAT:{color:"#c93430",icon:S.ul,key:"threat",label:(0,C.dW)("Threat"),phrase:(0,C.dW)("is threat"),type:"Threat"}},D={RETRY_HINT_COLOR:"rgba(27, 172, 166, 0.5)",RETRY_HINT_COLOR_IN_HEX:"#1baca6"},j={INSIDE:T.$l.CoordinatesPositions.Inside,NONE:null,OUTSIDE:T.$l.CoordinatesPositions.Outside},$={DARK_MODE_CHANGE:"darkModeChange"},U=[{key:0,label:(0,C.dW)("None"),value:j.NONE},{key:1,label:(0,C.dW)("Inside"),value:j.INSIDE},{key:2,label:(0,C.dW)("Outside"),value:j.OUTSIDE}],V={board:".board-board",resize:".board-controls",sidebar:".board-sidebar"},Z={minSidebarWidth:300,boardPaddingLeft:30}},59526:function(i,s,_){"use strict";_.d(s,{Y:function(){return T}});const T={pieces:["real3d"],animations:["arcade","natural"]}},50332:function(i,s,_){"use strict";_.d(s,{f:function(){return getBoardContainerElement},t:function(){return getBoardElement}});var T=_(36523);const getBoardContainerElement=(i=0)=>{const s=T.VD.board.substr(1),_=document.getElementsByClassName(s)[i];return _||null},getBoardElement=()=>{const i=getBoardContainerElement();if(!i)return null;const{childNodes:s}=i;return Array.from(s).find((i=>1===i.nodeType))}},7597:function(i,s,_){"use strict";_.d(s,{Y4:function(){return R},_G:function(){return D},U3:function(){return V},$y:function(){return j},xL:function(){return U},_j:function(){return Z},Iz:function(){return $}});const T="v-board-popover",S="v-tooltip";var C,P,O=_(25014),M=_(18160);const R={ARIA_CONTROLS:"aria-controls",ARIA_LABEL:"aria-label",ARIA_SELECTED:"aria-selected",AVATAR:"data-avatar",ALIGN_DROPDOWN:"data-align-dropdown",BORDER_TOP:"data-border-top",BORDER_TOP_WIDE:"data-border-top-wide",BUTTON_TEXT:"data-button-text",CATEGORIES:"data-categories",CONTROL_LABEL_TEXT:"data-control-label-text",CUSTOM_BTN_CLASS:"data-custom-btn-class",CUSTOM_COLLAPSE_CLASS:"data-custom-collapse-class",DARK_MODE:"data-dark-mode",HIDDEN:"hidden",ICON_BUTTON:"data-icon-button",NEXT_LESSON_HINT:"data-next-lesson-hint",OPTIONS:"data-options",SHOW_ICON:"data-show-icon",SELECTED_LANGUAGES:"data-selected-languages",SELECTED_PAGE:"data-selected-page",SELECTED_VALUE:"data-selected-value",SLOTS:"data-stats-slots",SRC:"src",STATS:"data-stats",SURVEY_DATA:"data-survey",SURVEY_VOTED:"data-voted-survey",TYPE:"data-type",USERNAME:"data-username",USER_LANGUAGE:"data-user-language",VALUE:"data-value",VS_STATS:"data-vs-stats"},D={BLOG:"blog",CSRF_TOKEN:null==(P=null==(C=window.context)?void 0:C.csrf)?void 0:P.token,DARK_MODE:"dark-mode",DEFAULT_LOCALE:"en_US",LESSONS:"lessons",NEWS:"news",VIDEO:"video",GRID_VIEW:"grid",LIST_VIEW:"list",LOCALE:window.context&&window.context.locale||"en_US",LOGGED_IN:window.context&&window.context.user,TIME:{hour:36e5},USERNAME:window.context&&window.context.user?window.context.user.username:null,USER_COLOR_SCHEME:"COLOR_SCHEME"},j={CHESS_960:"chess960"},$={category:i=>M.Z.trans(i,{},"dynamic"),daysOfWeek:[M.Z.trans("Sunday"),M.Z.trans("Monday"),M.Z.trans("Tuesday"),M.Z.trans("Wednesday"),M.Z.trans("Thursday"),M.Z.trans("Friday"),M.Z.trans("Saturday")],loading:M.Z.trans("Loading..."),months:[M.Z.trans("January"),M.Z.trans("February"),M.Z.trans("March"),M.Z.trans("April"),M.Z.trans("May"),M.Z.trans("June"),M.Z.trans("July"),M.Z.trans("August"),M.Z.trans("September"),M.Z.trans("October"),M.Z.trans("November"),M.Z.trans("December")],monthsAbbreviated:[M.Z.trans("Jan"),M.Z.trans("Feb"),M.Z.trans("Mar"),M.Z.trans("Apr"),M.Z.trans("May"),M.Z.trans("Jun"),M.Z.trans("Jul"),M.Z.trans("Aug"),M.Z.trans("Sep"),M.Z.trans("Oct"),M.Z.trans("Nov"),M.Z.trans("Dec")],noResult:M.Z.trans("No results found."),pleaseEnter:i=>M.Z.trans("Please enter %number% or more characters",{"%number%":i}),showMore:M.Z.trans("More"),showLess:M.Z.trans("Less"),lessonsHintMessage:M.Z.trans("Let me help you learn everything you need to know with this guide."),nextLessonHintMessage:M.Z.trans("Your next lesson is ready. Study daily if you really want to improve!"),openingsHintMessage:M.Z.trans("Let me help you improve your openings!")},U={AMPLITUDE_LOGGER:"amplitude-logger",AMPLITUDE_LOG_SELECTION:"[data-log-selection-to-amplitude]",BOARD_POPOVER:T,CAPTCHA:"captcha",COLLAPSE:"v-toggle-collapse",COLLAPSED:"toggle-collapsed",CONTENT_AD:"content-ad",CONTENT_CATEGORY_SELECT:"content-category-select",CONTENT_LANGUAGE_SELECT:"content-language-select",CONFIRM_OPEN:"confirm-open",CONFIRM_POPOVER:"v-confirm-popover",CONFIRM_POPOVER_INLINE:"confirm-popover-inline",DONATE_MODAL:"donate-modal",FEATURE_SIDEBAR_LINK:"post-category-link-feature",FILTERS:"page-filters",FOLLOW_UNFOLLOW_AUTHOR:"follow-unfollow-author",FORM_DATEPICKER:"v-datepicker",FORM_DROPDOWN:"form-dropdown",GAME_PREVIEW:"game-preview",GIFT_MEMBERSHIP_BUTTON:"give-gift-membership",GIFT_MEMBERSHIP_MODAL:"gift-membership-modal",HEADLINE_SIDEBAR_LINK:"post-category-link-headline",HIDDEN:"toggle-hidden",HINT_WRAPPER:"hint-wrapper",LANGUAGE_DROPDOWN:"post-view-languages",MESSAGE_PARENT:"vue-message",NAVIGATION_FOOTER:"navigation-footer",NEW_GAME:"new-game",PAGINATION_BOTTOM:"pagination-bottom",PAGINATION_BUTTON:"ui_pagination-item-component",PAGINATION_TOP:"pagination-top",PAGINATION_SCROLL_TOP:".pagination-scroll-to-top",POST_AUTHOR_FOLLOW:"post-author-follow",POST_CAN_EDIT_URL:"post-can-edit-url",POST_EDIT_URL:"post-edit-url",POST_EDIT_URL_FIELD:"post-edit-url-field",POST_IMAGE_BUTTON:"image-upload-button",POST_IMAGE_THUMBNAIL:"image-upload-thumbnail",SCROLL_TOP_ANCHOR:"scroll-top-anchor",SHORT_SIDEBAR_AD_BOTTOM:"short-sidebar-ad-bottom",SHORT_SIDEBAR_AD_TOP:"short-sidebar-ad-top",SIDEBAR_STATS:"sidebar-stats",SIDEBAR_SURVEY:"sidebar-survey",SIDEBAR_TOGGLE_BUTTON_TEXT:"toggle-content-button-text",SIDEBAR_TOGGLE_ICON:"toggle-content-icon",SIDEBAR_USER_ITEMS:"sidebar-users-grid-toggle-item",SIDEBAR_USERS_TOGGLE_BUTTON:"toggle-content-button",STAT_CHART:"stat-chart",TABS_BUTTON:"v5-tabs-button",TABS_PANEL:"v5-tabs-panel",TIMEZONES:"page-timezones",TOOLTIP:S,TOOLTIP_CLASS:"tooltip",TOOLTIP_TOP:"top",UPGRADE_ACCORDION:"upgrade-accordion",USER_LEAGUE:"user-league",USER_POPOVER:"v-user-popover",USER_POPOVER_TOOLTIP:"v-user-popover-tooltip",USER_TAGLINE:"post-view-meta-user",VERSION_DROPDOWN:"version-dropdown"},V={CONFIRM_POPOVER_YES:"confirm-popover-yes",SHOW_MODAL:"show-confirm-popover",VOTE_COUNTED:"vote-counted",VIEW_CHANGE:"view-change",VIEW_GRID:"view-grid",VIEW_LIST:"view-list"},Z={changeContentLanguage:()=>O.Z.generate("web_user_callback_set_content_language"),enPassant:()=>O.Z.generate("web_article_view",{url:"how-to-capture-en-passant"}),inviteLink:(i,s,_)=>O.Z.generate(i,{url:s,secret:_}),loginPage:O.Z.generate("web_security_login_and_go"),redirectToLoginPage:i=>O.Z.generate("web_security_login_and_go",{redirectUrl:i}),surveyVote:(i,s)=>O.Z.generate("web_survey_callback_vote",{id:i,optionId:s}),teamMatch:i=>O.Z.generate("web_team_match_view",{match:i}),tournament:i=>O.Z.generate("web_tournament_view",{url:i}),userProfile:i=>O.Z.generate("web_member_view",{username:i})}},97122:function(i,s,_){"use strict";_.d(s,{b:function(){return generateRoute}});var T=_(25014);const generateRoute=(i,s,_)=>{let S=i;const C=s;if(_){const i=document.querySelector("[data-url-locale]"),s=null==i?void 0:i.getAttribute("data-url-locale"),T="en"!==(null==s?void 0:s.split("_")[0])&&(null==s?void 0:s.split("_")[0]);T&&C&&(S=_,C._locale=T)}return T.Z.generate(S,C)}},63681:function(i,s,_){"use strict";_.d(s,{LI:function(){return C},_G:function(){return P},kj:function(){return O},V:function(){return M},o7:function(){return R},U3:function(){return D},ci:function(){return j},Do:function(){return $},e7:function(){return U},IK:function(){return V},xL:function(){return Z},_j:function(){return Y},jg:function(){return X},Iz:function(){return Q},dt:function(){return ee},gQ:function(){return te}});var T=_(97122),S=_(18160);const C={FAILED:"Failed",SOLVED:"Solved"},P={ANALYSIS:"analysis",BIG_SCREEN_HEIGHT:567,DESKTOP_WIDTH:768,DIAGRAM_OBSERVED:"data-diagram-observed",MULTI_GAMES_PGN:"multi-games-pgn.pgn",MULTI_PGN_VIEWER:"multi-pgn-viewer",TIMEOUT:500,VARIATION_HEIGHT:25},O={INSIDE:"inside"},M={COMMON:"?",DATE:"????.??.??",DAY:"??",MONTHS:"??",RESULT:"*",YEAR:"????"},R={FORWARD:"forward",BACKWARD:"backward"},D={BOARD_INITIALIZED:"board-initialized",DAILY_PUZZLE:"Daily Puzzle",DIAGRAM_VIEWER_BLUR:"DIAGRAM_VIEWER_BLUR",DIAGRAM_VIEWER_FOCUS:"DIAGRAM_VIEWER_FOCUS",FOCUS_ON_WIDGET:"focus-on-widget"},j={ANALYSIS:"chess-board-search",DOWNLOAD:"download",FLIPBOARD:"repeat",HINT:"lightbulb",LEFT:"chevron-left",NEXT:"chevron-next",PAUSE:"pause",PLAY:"play",PREVIOUS:"chevron-previous",RESET:"redo",RIGHT:"chevron-right",SHARE:"share",SOLUTION:"circle-question"},$={DOWN:40,ENTER:13,LEFT:37,RIGHT:39,UP:38,X:88},U=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],V={BLACK_TO_MOVE:"Black to Move",CORRECT:"Correct!",INCORRECT:"Incorrect",WHITE_TO_MOVE:"White to Move",SOLVED:"Solved!"},Z={CHESS_DIAGRAM:"chessDiagramDiv",CHESS_DAILY_PUZZLE:"dailyPuzzleDiv"},Y={analysis:(0,T.b)("web_analysis_board_editor"),votechess:(0,T.b)("web_votechess_game")},X={BLACK:"black",DATE:"date",ECO:"eco",EVENT:"event",RESULT:"result",ROUND:"round",SITE:"site",WHITE:"white"},Q={analysis:S.Z.trans("Go To Analysis"),download:S.Z.trans("Download all PGNs"),firstMove:S.Z.trans("First Move"),flipBoard:S.Z.trans("Flip Board"),hint:S.Z.trans("Hint"),lastMove:S.Z.trans("Last Move"),nextMove:S.Z.trans("Next Move"),playPause:S.Z.trans("Play / Pause"),previousMove:S.Z.trans("Previous Move"),reset:S.Z.trans("Reset"),share:S.Z.trans("Share"),solution:S.Z.trans("Solution"),unknownPlayer:S.Z.trans("Unknown player")},ee={DIAGRAM:"diagram",DAILY_PUZZLE:"daily-puzzle"},te={p:"pawn",n:"knight",b:"bishop",r:"rook",q:"queen",k:"king"}},5556:function(i,s,_){"use strict";_.d(s,{_G:function(){return O},U3:function(){return C},DL:function(){return getGuestSlides},MR:function(){return getUpgradeSlides},xL:function(){return S},Xw:function(){return M},Iz:function(){return P}});var T=_(32305);const S={AUTHENTICATION_MODAL:"authentication-modal",FIRST_TIME_MODAL:"first-time-modal",GUEST_MODAL:"guest-modal",GUEST_MODAL_TRIGGER:"guest-modal-trigger",UPGRADE_MODAL:"upgrade-modal"},C={HIDE_MODAL:"hide-modal",HIDE_MODAL_BACKGROUND_CLICK:"hide-background",HIDE_MODAL_SOCIAL_SHARE:"hide-modal-social-share",LOGIN_OR_REGISTER_MODAL:"LOGIN_OR_REGISTER_MODAL",MODAL_DID_HIDE:"modal-did-hide",SHOW_GUEST_MODAL:"show-guest-modal",SHOW_MODAL_SOCIAL_SHARE:"show-modal-social-share",SHOW_UPGRADE_MODAL:"show-upgrade-modal"},P={GUEST_MODAL_TITLE:{analysis:(0,T.dW)("Sign up to analyze your games!"),lessons:(0,T.dW)("Sign up to unlock Lessons!"),pawn:(0,T.dW)("Sign up to use this feature."),"puzzles-learning":(0,T.dW)("Sign up to keep solving puzzles!"),stats:(0,T.dW)("Sign up to track your progress!")},GUEST_MODAL_FOOTER_TEXT:(0,T.dW)("Already have an account? Log in")},O={GUEST_MODAL_SLIDES:{analysis:"analysis",lessons:"lessons",pawn:"pawn",puzzles:"puzzles-learning",stats:"stats"}},M=["analysis","lessons","puzzles-learning","puzzles-rush","puzzles-battle"],R=[{title:(0,T.dW)("Play, Learn and Connect"),subtitle:(0,T.dW)("Join millions of chess players."),icon:"pawn"},{title:(0,T.dW)("150k+ Puzzles"),subtitle:(0,T.dW)("Play every day to improve"),icon:"puzzles-learning"},{title:(0,T.dW)("1500+ Lessons"),subtitle:(0,T.dW)("Learn from chess masters!"),icon:"lessons"},{title:(0,T.dW)("Full Game Analysis"),subtitle:(0,T.dW)("Learn from every game!"),icon:"analysis"},{title:(0,T.dW)("Get a Rating"),subtitle:(0,T.dW)("Save your games!"),icon:"stats"},{title:(0,T.dW)("Explore Full Openings"),subtitle:(0,T.dW)("See moves played by masters!"),icon:"explorer"}],D=[{title:(0,T.dW)("Full Analysis"),subtitle:(0,T.dW)("Full Report, Accuracy, Key Moments"),icon:"analysis",generic:!0},{title:(0,T.dW)("Unlimited Puzzles"),subtitle:(0,T.dW)("Solve 8+ Puzzles/day to improve fast"),icon:"puzzles-learning",generic:!0},{title:(0,T.dW)("Unlimited Lessons"),subtitle:(0,T.dW)("Your step-by-step path to mastery"),icon:"lessons",generic:!0},{title:(0,T.dW)("Remove Ads"),subtitle:(0,T.dW)("Get the best Chess.com experience"),icon:"no-ads",generic:!0},{title:(0,T.dW)("Unlimited Puzzle Rush"),subtitle:(0,T.dW)("3 strikes and you're out!"),icon:"puzzles-rush"},{title:(0,T.dW)("Unlimited Puzzle Battles"),subtitle:(0,T.dW)("Rush another player to win!"),icon:"puzzles-battle"},{title:(0,T.dW)("Get Your Own Flair"),subtitle:(0,T.dW)("Share your unique personality"),icon:"flair"},{title:(0,T.dW)("Explore Full Openings"),subtitle:(0,T.dW)("See moves played by masters!"),icon:"explorer"},{title:(0,T.dW)("Master Every Position"),subtitle:(0,T.dW)("Practice means everything!"),icon:"workout"},{title:(0,T.dW)("Unlock All Bots"),subtitle:(0,T.dW)("Play vs various skills and styles."),icon:"computer"},{title:(0,T.dW)("Unlimited Collections"),subtitle:(0,T.dW)("Build and organize your library"),icon:"library",id:12},{title:(0,T.dW)("Unlimited Daily Puzzles"),subtitle:(0,T.dW)("Unlock all daily puzzles."),icon:"daily-puzzle"}],getGuestSlides=i=>{const s=R.find((s=>s.icon===i))||R[0],_=R.filter((i=>i!==s));return _.unshift(s),_},getUpgradeSlides=i=>{const s=D.find((s=>s.icon===i))||D[0],_=D.filter((i=>i.generic&&i!==s));return _.unshift(s),_},j="clubs",$="explorer",U="leagues",V="lessons",Z="library",Y="openings",X="solo",Q="tournaments",ee="vision";(0,T.dW)("Play bots with various strengths and styles"),(0,T.dW)("Use optional coaching features for insights"),(0,T.dW)("Practice at any time - with no pressure"),(0,T.dW)("Start"),(0,T.dW)("Challenge the computer to an online chess game."),(0,T.dW)("Chess Computer"),(0,T.dW)("Search millions of master games"),(0,T.dW)("Choose specific players to explore"),(0,T.dW)("Find winning moves from your games"),(0,T.dW)("See moves chess masters have made and the outcome of the game from any position."),(0,T.dW)("Chess Explorer"),(0,T.dW)("Search more than 3,000 opening lines"),(0,T.dW)("Find the perfect chess opening for you"),(0,T.dW)("Explore variations and master chess games"),(0,T.dW)("Learn and explore chess openings to try in your chess games."),(0,T.dW)("Chess Openings"),(0,T.dW)("Capture a piece with every move until just one remains"),(0,T.dW)("No piece may capture more than 2 times per puzzle"),(0,T.dW)("If there is a King on the board, it must be the final piece"),(0,T.dW)("Try for a perfect run in Challenge Mode!"),(0,T.dW)("Start"),(0,T.dW)("How to Play"),(0,T.dW)("Solo Chess"),(0,T.dW)("Improve vision with coordinate training"),(0,T.dW)("Identify squares or make moves"),(0,T.dW)("Answer as many as you can in 30 seconds"),(0,T.dW)("Start"),(0,T.dW)("Learn to quickly follow and record chess coordinates and annotation."),(0,T.dW)("Vision Trainer"),(0,T.dW)("Watch videos to learn concepts"),(0,T.dW)("Test knowledge with Challenges"),(0,T.dW)("Level up to achieve Mastery"),(0,T.dW)("Learn from interactive lessons created by chess masters."),(0,T.dW)("Chess Lessons"),(0,T.dW)("Represent your club in matches"),(0,T.dW)("Chat in private forums"),(0,T.dW)("Organize your team"),(0,T.dW)("Join an Online Chess Club and connect and compete with your friends in matches."),(0,T.dW)("Chess Clubs"),(0,T.dW)("Join tournaments starting every few minutes"),(0,T.dW)("Compete in Daily, multi-game tournaments"),(0,T.dW)("Win trophies to display on your Profile"),(0,T.dW)("Compete in online chess tournaments or join an online Arena, where anyone can win."),(0,T.dW)("Chess Tournaments"),(0,T.dW)("Create collections from games played online, offline, or uploaded."),(0,T.dW)("Open, analyze, edit, and re-save your games to your collection."),(0,T.dW)("Organize, tag, and share your collections with others."),(0,T.dW)("Compile your very own Collection of personal, master, and all other games."),(0,T.dW)("Library"),(0,T.dW)("Play and win games to earn points"),(0,T.dW)("All major formats supported - bullet, blitz, rapid & arena"),(0,T.dW)("The longer the time control, the more points you earn"),(0,T.dW)("Earn trophies and advance to the Next League by playing games."),(0,T.dW)("Players Leagues")},16374:function(i,s,_){"use strict";_.d(s,{C:function(){return logUpgradeModalToAmplitude}});var T=_(38096),S=_(57463);function logUpgradeModalToAmplitude(i){if(!(0,T.nJ)()){const s="no-ads"===i?"removeAds":"page";S.Z.logEvent("upgradeModal",{trigger:s,source:i})}}},26211:function(i,s,_){"use strict";_.d(s,{v:function(){return S},f9:function(){return C}});var T=_(63930);const S={$1:"!",$2:"?",$3:"!!",$4:"??",$5:"!?",$6:"?!",$10:"=",$11:"=",$12:"=",$13:"",$14:"",$15:"",$16:"",$17:"",$18:"+-",$19:"-+",$22:"",$23:"",$32:"",$33:"",$36:"",$37:"",$40:"",$41:"",$44:"/=",$45:"=/",$132:"",$133:"",$146:"N"},C=(0,T.mc)(S)},19818:function(i,s,_){"use strict";_.d(s,{hV:function(){return S},lB:function(){return C},_l:function(){return P},gQ:function(){return O},FI:function(){return moveNotationTranslations}});var T=_(32305);const S={FIGURINE:"figurine",TEXT:"text"},C={BLACK:2,WHITE:1},P={BLACK:"black",WHITE:"white"},O={B:"bishop",K:"king",N:"knight",R:"rook",Q:"queen"};let M;const moveNotationTranslations=()=>(M||(M={B:T.$H.trans("move_list.algebraic.B",null,"moves")||"B",K:T.$H.trans("move_list.algebraic.K",null,"moves")||"K",N:T.$H.trans("move_list.algebraic.N",null,"moves")||"N",R:T.$H.trans("move_list.algebraic.R",null,"moves")||"R",Q:T.$H.trans("move_list.algebraic.Q",null,"moves")||"Q"}),M)},93644:function(i,s,_){"use strict";_.d(s,{t:function(){return isRtl}});const isRtl=()=>"rtl"===document.querySelector("html").getAttribute("dir")},2468:function(i,s,_){"use strict";_.d(s,{D:function(){return T}}),s.Z={modalStates:{select:"select",send:"send",sent:"sent"},types:{game:"game",social:"social"}};const T={FRIEND:"friends"}},4744:function(i,s,_){"use strict";_.d(s,{yc:function(){return $},Wp:function(){return j},Eq:function(){return U},iq:function(){return V},Fb:function(){return Q},ZC:function(){return D},U3:function(){return ne},rP:function(){return te},p0:function(){return T},Cz:function(){return ee},xL:function(){return Z},Zj:function(){return re},_j:function(){return Y},Iz:function(){return X}});const T={guest:0,cheater:5,abuser:6,voluntarilyClosed:7,unspecifiedClosed:8,basic:10,silver:20,gold:30,platinum:40,diamond:50,moderator:80,staff:90};var S=_(25014),C=_(18160),P=Object.defineProperty,O=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,__defNormalProp=(i,s,_)=>s in i?P(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_;const D={REPORT_USER:"web_user_callback_report_user",REPORT_TV_USER:"web_tv_callback_report",USER_POPUP:"web_user_callback_popup"},j=(C.Z.trans("Membership Icons"),C.Z.trans("Emoji"),C.Z.trans("Chess"),C.Z.trans("Holiday"),C.Z.trans("Hosts"),C.Z.trans("Computer Chess"),C.Z.trans("PRO Chess League"),{category:"membership_icons",code:"nothing",description:C.Z.trans("Nothing"),id:206,imageCode:"nothing",membershipLevelCode:"staff",name:C.Z.trans("Nothing"),status:""}),$=["blocked","clear","clear_light"],U=500,V=200,Z={USER_FLAIR:"user-flair",USER_SEARCH:"user-search",USER_POPOVER_CONTAINER:"user-popover"},Y={about:()=>S.Z.generate("web_about"),membership:(i="icon")=>S.Z.generate("web_membership",{c:i}),usernameSearch:i=>S.Z.generate("web_user_callback_username_search",((i,s)=>{for(var _ in s||(s={}))M.call(s,_)&&__defNormalProp(i,_,s[_]);if(O)for(var _ of O(s))R.call(s,_)&&__defNormalProp(i,_,s[_]);return i})({activeDays:4e3},i)),userDivision:({league:i,division:s})=>S.Z.generate("web_league_division",{league:i,division:s})},X={acceptFriendRequest:C.Z.trans("Accept Friend Request"),addFriend:C.Z.trans("Add Friend"),block:C.Z.trans("Block"),blockConfirm:C.Z.trans("Are you sure you want to block this user?"),cancel:C.Z.trans("Cancel"),cancelFriendRequest:C.Z.trans("Cancel Friend Request"),challenge:C.Z.trans("Challenge"),follow:C.Z.trans("Follow"),gameArchive:C.Z.trans("Game Archive"),giftMembership:C.Z.trans("Gift Membership"),giveTrophy:C.Z.trans("Give Award"),joinedDate:i=>C.Z.trans("Joined %1$s%",{"%1$s%":i}),lastOnline:i=>C.Z.trans("Online %1$s%",{"%1$s%":i}),moderator:C.Z.trans("Moderator"),onlineNow:C.Z.trans("Online Now"),inLiveNow:C.Z.trans("In Live"),removeFriend:C.Z.trans("Remove Friend"),removeFriendConfirm:C.Z.trans("Are you sure you want to remove this friend from your list?"),report:C.Z.trans("Report"),reportUser:i=>C.Z.trans("Report %username%",{"%username%":i}),sendMessage:C.Z.trans("Send Message"),showYourFlair:C.Z.trans("Show your flair!"),staff:C.Z.trans("Staff"),unblock:C.Z.trans("Unblock"),unfollow:C.Z.trans("Unfollow"),userReportError:C.Z.trans("Tell us more...")},Q=225,ee=(T.diamond,T.abuser,T.cheater,T.voluntarilyClosed,T.unspecifiedClosed,T.gold,T.moderator,T.platinum,T.staff,{[T.basic]:C.Z.trans("Basic Membership"),[T.diamond]:C.Z.trans("Diamond Membership"),[T.cheater]:C.Z.trans("Closed: Fair Play"),[T.abuser]:C.Z.trans("Closed: Abuse"),[T.voluntarilyClosed]:C.Z.trans("Closed: Inactive"),[T.unspecifiedClosed]:C.Z.trans("Account Closed"),[T.gold]:C.Z.trans("Gold Membership"),[T.moderator]:C.Z.trans("Moderator Account"),[T.platinum]:C.Z.trans("Platinum Membership"),[T.silver]:C.Z.trans("Silver Membership"),[T.staff]:C.Z.trans("Staff Account")}),te={GM:C.Z.trans("Grandmaster"),WGM:C.Z.trans("Woman Grandmaster"),IM:C.Z.trans("International Master"),WIM:C.Z.trans("Woman International Master"),FM:C.Z.trans("FIDE Master"),WFM:C.Z.trans("Woman FIDE Master"),NM:C.Z.trans("National Master"),CM:C.Z.trans("FIDE Candidate Master"),WCM:C.Z.trans("FIDE Woman Candidate Master"),WNM:C.Z.trans("Woman National Master")},ne={AUTOCOMPLETE_CLEAR_SELECTED:"form-autocomplete-clear-selected"},re={FETCH_ROLES:"fetchRoles"}},44735:function(i,s,_){"use strict";function getUserFromContext(){var i;return null==(i=window.context)?void 0:i.user}_.d(s,{x:function(){return getUserFromContext}})},38096:function(i,s,_){"use strict";_.d(s,{jl:function(){return T.j},sQ:function(){return isImpersonating},nJ:function(){return P.n},S_:function(){return checkUserStatus},gK:function(){return getAdditionalUserInfo},yO:function(){return getMembershipNumber}});var T=_(8739),S=_(45236),C=(_(25014),_(4744)),P=_(52476);const O=window.context,isImpersonating=()=>{var i;return!(!(0,T.j)()||!(null==(i=O.user)?void 0:i.isImpersonating))},checkUserStatus=i=>{if(!(0,T.j)())return!1;let s=!1;switch(i){case"isActivated":s=O.user.isActivated;break;case"isStaff":s=O.user.membershipLevel>=C.p0.staff;break;case"isStaffOnly":s=O.user.membershipLevel===C.p0.staff;break;case"isModerator":s=O.user.membershipLevel>=C.p0.moderator;break;case"isModeratorOnly":s=O.user.membershipLevel===C.p0.moderator;break;case"isDiamond":s=O.user.membershipLevel>=C.p0.diamond;break;case"isDiamondOnly":s=O.user.membershipLevel===C.p0.diamond;break;case"isPlatinum":s=O.user.membershipLevel>=C.p0.platinum;break;case"isPlatinumOnly":s=O.user.membershipLevel===C.p0.platinum;break;case"isSilver":case"isPremium":s=O.user.membershipLevel>=C.p0.silver;break;case"isSilverOnly":s=O.user.membershipLevel===C.p0.silver;break;case"isGold":s=O.user.membershipLevel>=C.p0.gold;break;case"isGoldOnly":s=O.user.membershipLevel===C.p0.gold;break;case"isBasic":s=O.user.membershipLevel===C.p0.basic;break;case"isNewlyRegistered":s=O.user.isNewlyRegistered;break;case"isGuest":s=O.user.isGuest;break;case"chessTitle":s=O.user.chessTitle;break;default:s=!1}return s},getAdditionalUserInfo=i=>{var s,_,C,P,M,R,D,j,$,U,V,Z,Y,X,Q,ee,te,ne,re,ie;let ae=!1;if(!(0,T.j)()){switch(i){case"diagramSettings":ae={};break;case"isDarkMode":ae=(0,S.KZ)();break;default:ae=null}return ae}switch(i){case"cohort":ae=null==(s=O.user)?void 0:s.cohort;break;case"country":ae=null==(_=O.user)?void 0:_.country;break;case"flairCode":ae=null==(C=O.user)?void 0:C.flairCode;break;case"getUserId":ae=null==(P=O.user)?void 0:P.id;break;case"getUsername":ae=null==(M=O.user)?void 0:M.username;break;case"getAvatarUrl":ae=null==(R=O.user)?void 0:R.avatarUrl;break;case"getAvatarLargeUrl":ae=null==(D=O.user)?void 0:D.avatarLargeUrl;break;case"getSettingsAvatarUrl":ae=null==(j=O.user)?void 0:j.settingsAvatarUrl;break;case"getLastLoginDate":ae=null==($=O.user)?void 0:$.lastLoginDate;break;case"registerDate":ae=null==(U=O.user)?void 0:U.registerDate;break;case"getBrowserTimezone":ae=window.jstz.determine().name();break;case"getTimezone":ae=null==(V=O.user)?void 0:V.timezone;break;case"getDiagramSettings":ae=O.diagramSettings;break;case"language":ae=O.i18n.locale;break;case"contentLanguage":ae=O.i18n.contentLanguage;break;case"speaksEnglish":ae="en_US"===O.i18n.locale;break;case"eligibleFirstTrial":ae=null==(Z=O.user)?void 0:Z.eligibleFirstTrial;break;case"fairPlayAgree":ae=null==(Y=O.user)?void 0:Y.fairPlayAgree;break;case"getArchiveView":ae=(null==(X=O.user)?void 0:X.archiveView)?O.user.archiveView:"grid";break;case"homeContentType":ae="following";break;case"getMembershipLevel":ae=null==(Q=O.user)?void 0:Q.membershipLevel;break;case"isClassicTheme":ae=null==(ee=O.user)?void 0:ee.isClassicTheme;break;case"isContentHidden":ae=null==(te=O.user)?void 0:te.isContentHidden;break;case"isDarkMode":ae=(0,S.KZ)();break;case"rating":ae=null==(ne=O.user)?void 0:ne.rating;break;case"safeMode":ae=null==(re=O.user)?void 0:re.safeMode;break;case"uuid":ae=null==(ie=O.user)?void 0:ie.uuid;break;default:ae=!1}return ae},getMembershipNumber=(i,s)=>!s&&i>=C.p0.basic?C.p0.unspecifiedClosed:i},52476:function(i,s,_){"use strict";function isGuest(){var i,s;return Boolean(null==(s=null==(i=window.context)?void 0:i.user)?void 0:s.isGuest)}_.d(s,{n:function(){return isGuest}})},8739:function(i,s,_){"use strict";_.d(s,{j:function(){return isLoggedIn}});var T=_(82220);function isLoggedIn(){var i;return Boolean((null==(i=window.context)?void 0:i.user)&&!(0,T.Z)())}},34904:function(i,s,_){"use strict";_.d(s,{m:function(){return showSignUpModal}});var T=_(28225),S=_(62844),C=_(86133),P=_(74672),O=(Object.create,Object.defineProperty),M=(Object.getOwnPropertyDescriptor,Object.getOwnPropertyNames,Object.getOwnPropertySymbols),R=(Object.getPrototypeOf,Object.prototype.hasOwnProperty),D=Object.prototype.propertyIsEnumerable,__defNormalProp=(i,s,_)=>s in i?O(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_;const j={show:C.t.AUTHENTICATION_SIGNUP,updateForm:!0};function showSignUpModal(i=j){Promise.all([_.e(820),_.e(47)]).then(_.bind(_,91047)).then((({default:s})=>{s.createInstance(S.x.AUTHENTICATION_MODAL),(0,P.o)(((i,s)=>{for(var _ in s||(s={}))R.call(s,_)&&__defNormalProp(i,_,s[_]);if(M)for(var _ of M(s))D.call(s,_)&&__defNormalProp(i,_,s[_]);return i})({key:T.U.SHOW_AUTHENTICATION_MODAL},i))}))}},30722:function(i,s,_){"use strict";_.d(s,{F:function(){return T}});const T=_(75696).n},99644:function(i,s,_){"use strict";var T=_(4744),S=_(30722),C=_(38075),P=_(25014),O=_(44735),M=_(31352),R=_(15788);const D=(0,M.J)({callbacks:T.ZC,cache:S.F,CSRF:R.Z,getCurrentUser:O.x,http:C.Z,Router:P.Z,routes:T._j});s.Z=D},15788:function(i,s,_){"use strict";_.d(s,{Z:function(){return T}});const T={getToken:function getToken(){return window.context&&window.context.csrf&&window.context.csrf.token}}},17925:function(i,s,_){"use strict";_.d(s,{y6:function(){return setGame},cF:function(){return getGame}});var T=_(42805);const S={},setGame=(i,s="game")=>{S[s]=i},getGame=(i="game")=>S[i];s.ZP={gameStoreNamespace:"game",historyFENs:[],isAtEndOfLine:!0,isGameOver:!1,isNewBoard:!0,legalMoves:[],lines:[],mainLine:[],mode:"playing",material:{},pgn:null,pgnHeaders:null,playingAs:0,positionDetails:null,result:T.lA.Results.None,selectedNode:{color:1,moveNumber:0},startingMoveNumber:1,tcn:"",turn:1,variant:"chess"}},57928:function(i,s,_){"use strict";_.d(s,{U3:function(){return C},eo:function(){return O},xD:function(){return U},Iz:function(){return V}});var T=_(25014),S=_(18160);const C={HIDE_MODAL:"hide-modal",SHOW_GIFT_MEMBERSHIP_MODAL:"show-gift-membership-modal",SHOW_DOWNGRADE_MEMBERSHIP_MODAL:"show-downgrade-membership-modal",SHOW_TRIAL_EXTENSION_OFFER:"show-trial-extension-offer"},P=(T.Z.generate("web_membership_cancel",{},!0),T.Z.generate("web_user_home"),T.Z.generate("web_membership_cancel_great_choice"),()=>T.Z.generate("web_policies_agreement")),O={DIAMOND_YEARLY:"diamond_yearly",DIAMOND_YEARLY_20210901:"diamond_yearly_20210901",DIAMOND_YEARLY_032022:"diamond_yearly_032022",DIAMOND_YEARLY_052022:"diamond_yearly_052022",DIAMOND_YEARLY_062022:"diamond_yearly_062022",DIAMOND_YEARLY_Q42021:"diamond_yearly_Q42021",DIAMOND_MONTHLY:"diamond_monthly",DIAMOND_MONTHLY_20210901:"diamond_monthly_20210901",DIAMOND_MONTHLY_032022:"diamond_monthly_032022",DIAMOND_MONTHLY_052022:"diamond_monthly_052022",DIAMOND_MONTHLY_062022:"diamond_monthly_062022",DIAMOND_MONTHLY_Q42021:"diamond_monthly_Q42021",PLATINUM_YEARLY:"platinum_yearly",PLATINUM_YEARLY_20210901:"platinum_yearly_20210901",PLATINUM_YEARLY_032022:"platinum_yearly_032022",PLATINUM_YEARLY_052022:"platinum_yearly_052022",PLATINUM_YEARLY_Q42021:"platinum_yearly_Q42021",PLATINUM_MONTHLY:"platinum_monthly",PLATINUM_MONTHLY_20210901:"platinum_monthly_20210901",PLATINUM_MONTHLY_032022:"platinum_monthly_032022",PLATINUM_MONTHLY_052022:"platinum_monthly_052022",PLATINUM_MONTHLY_Q42021:"platinum_monthly_Q42021",GOLD_YEARLY:"gold_yearly",GOLD_YEARLY_20210901:"gold_yearly_20210901",GOLD_YEARLY_032022:"gold_yearly_032022",GOLD_YEARLY_052022:"gold_yearly_052022",GOLD_YEARLY_062022:"gold_yearly_062022",GOLD_YEARLY_Q42021:"gold_yearly_Q42021",GOLD_MONTHLY:"gold_monthly",GOLD_MONTHLY_20210901:"gold_monthly_20210901",GOLD_MONTHLY_032022:"gold_monthly_032022",GOLD_MONTHLY_052022:"gold_monthly_052022",GOLD_MONTHLY_062022:"gold_monthly_062022",GOLD_MONTHLY_Q42021:"gold_monthly_Q42021",VERIFIED:"verified"},M="diamond",R="platinum",D="gold",j=(S.Z.trans("Gold"),S.Z.trans("Platinum"),S.Z.trans("Diamond"),"yearly"),$="monthly",U=[{sku:O.GOLD_MONTHLY,planLevel:D,planLength:$,description:S.Z.trans("1 Month Gold")},{sku:O.DIAMOND_MONTHLY,planLevel:M,planLength:$,description:S.Z.trans("1 Month Diamond")},{sku:O.DIAMOND_YEARLY,planLevel:M,planLength:j,description:S.Z.trans("1 Year Diamond"),isDefault:!0}],V=(S.Z.trans("<strong>Unlimited</strong> Puzzles"),S.Z.trans("<strong>Unlimited</strong> Lessons"),S.Z.trans("Unlock All Bots"),S.Z.trans("<strong>No Ads</strong>"),S.Z.trans("<strong>Unlimited </strong> Game Review"),S.Z.trans("<strong>Unlimited</strong> Puzzles"),S.Z.trans("<strong>Unlimited</strong> Lessons"),S.Z.trans("Unlock All Bots"),S.Z.trans("<strong>No Ads</strong>"),S.Z.trans("<strong>Unlimited</strong> Game Review"),S.Z.trans("<strong>Unlimited</strong> Coach Explanations"),S.Z.trans("<strong>Unlimited</strong> Insights"),S.Z.trans("<strong>Unlimited</strong> Puzzles"),S.Z.trans("<strong>Unlimited</strong> Lessons"),S.Z.trans("Unlock All Bots"),S.Z.trans("<strong>No Ads</strong>"),S.Z.trans("Yearly"),S.Z.trans("Monthly"),{giftGive:i=>S.Z.trans("Give the gift of chess to %user%!",{"%user%":i}),giftGiven:i=>S.Z.trans("Gift Given to %user%!",{"%user%":i}),donateGive:i=>S.Z.trans("Donate to %user%!",{"%user%":i}),donateGiven:(i,s)=>S.Z.trans("Thank you for supporting %user% with %amount%!",{"%user%":i,"%amount%":s}),donationTo:i=>S.Z.trans("Donation to %user%",{"%user%":i}),paymentTerms:()=>S.Z.trans('I agree to the <a href="%href%" target="_blank">payment terms</a>.',{"%href%":P()}),yearlyMaximumDiscount:i=>S.Z.transChoice("{1} 1 month off|]1,Inf] %number% months off",i,{"%number%":i})}),Z=(S.Z.trans("Not using Premium features"),S.Z.trans("Too expensive"),S.Z.trans("Technical issues"),S.Z.trans("Using another site/app"),S.Z.trans("Less interested in chess right now"),S.Z.trans("Other"),"accepted"),Y="new-offer",X="new-offer-accepted";S.Z.trans("Need More Time to Decide?"),S.Z.trans("Well double your free trial so you can improve your chess with Premium."),S.Z.trans("Double my Free Trial for Free"),S.Z.trans("No Thanks, I still want to cancel and lose access to Game Reports, Lessons, Puzzles, and more."),S.Z.trans("Congrats! Your Free Trial is Doubled."),S.Z.trans("Take advantage of Game Reports, Puzzles, Lessons, and more! See your chess skills improve fast."),S.Z.trans("Return Home"),S.Z.trans("Are You Sure?"),S.Z.trans("You will lose access to the advantages benefiting 1M+ other Premium members."),S.Z.trans("Keep My Premium Plan"),S.Z.trans("No Thanks, I still want to cancel and lose access to Game Reports, Lessons, Puzzles, and more."),S.Z.trans("Great Choice!"),S.Z.trans("Take advantage of Game Reports, Puzzles, Lessons, and more! See your chess skills improve fast."),S.Z.trans("Return Home")},67154:function(i){function _extends(){return i.exports=_extends=Object.assign||function(i){for(var s=1;s<arguments.length;s++){var _=arguments[s];for(var T in _)Object.prototype.hasOwnProperty.call(_,T)&&(i[T]=_[T])}return i},i.exports.__esModule=!0,i.exports.default=i.exports,_extends.apply(this,arguments)}i.exports=_extends,i.exports.__esModule=!0,i.exports.default=i.exports},87757:function(i,s,_){i.exports=_(35666)},42805:function(i,s,_){"use strict";_.d(s,{iB:function(){return T.J},$l:function(){return S.q},QY:function(){return S.J},sH:function(){return S.l},lA:function(){return S.G},nl:function(){return S.bd},th:function(){return S.bo},rK:function(){return S.v},Wc:function(){return S.bp},Kh:function(){return S.bL},YP:function(){return S.bM},dz:function(){return S.b4},Mo:function(){return S.bR},zG:function(){return S.bY},KW:function(){return S.b$},q4:function(){return S.c0},NQ:function(){return S.b1},Xe:function(){return S.c1},h6:function(){return S.c2},C0:function(){return S.br},RS:function(){return S.$},jw:function(){return S.c7},SH:function(){return S.bb},UG:function(){return S.c8},C8:function(){return S.bu},o9:function(){return S.bv},jd:function(){return S.a_},nT:function(){return S.bw},ZD:function(){return getPGNForDownload},n8:function(){return mergePlugins}});var T=_(35746),S=_(2738),C=Object.defineProperty,P=Object.defineProperties,O=Object.getOwnPropertyDescriptors,M=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,__defNormalProp=(i,s,_)=>s in i?C(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,__spreadValues=(i,s)=>{for(var _ in s||(s={}))R.call(s,_)&&__defNormalProp(i,_,s[_]);if(M)for(var _ of M(s))D.call(s,_)&&__defNormalProp(i,_,s[_]);return i},__spreadProps=(i,s)=>P(i,O(s));var j=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",highlights:{"8_bit":"#ffff00",bases:"#f5cc2a",blackwhite:"#5b91b3",blue:"#00a5ff",brown:"#ffff00",bubblegum:"#de5d6f",burled_wood:"#ee9016",dark_wood:"#cc9122",dash:"#eca722",default:"#ffff00",glass:"#5b91b3",graffiti:"#f39011",green:"#ffff00",grey:"#a4b8c4",icy_sea:"#5ed7f1",light:"#a4b8c4",lolz:"#a3becd",marble:"#f0db86",marbleblue:"#65daf7",marblebrown:"#f39011",marblegreen:"#f0db86",metal:"#a3becd",natural:"#f0e464",nature:"#eef396",neon:"#6d90a6",newspaper:"#99976e",orange:"#ffff00",overlay:"#0d9acf",parchment:"#d8cc66",pink:"#de5d6f",purple:"#7dacc9",red:"#f8f893",sand:"#e2bc87",sky:"#65daf7",stone:"#36525f",tan:"#f7d84a",tournament:"#a4c25b",translucent:"#5b91b3",walnut:"#d1a52d",winboard:"#a4c25b",wood:"#cc9122",wooddark:"#ee9016",woodlight:"#d8cc66",woodmid:"#cc9122",woodolive:"#a3becd"}});Symbol.toStringTag,S.aU,S.aV,S.aT,S.aW,S.F;S.b2.Plugin.Name,S.b3.Plugin.Name;var $,U;function getPGNForDownload(i){if(!i)return"";const s=i.lastIndexOf('"]')+2;return`${i.slice(0,s).trim()}\n\n${function revertAnnotationType(i){const s=Object.keys(S.bk).sort(((i,s)=>s.length-i.length)),_=new Set(S.bl);let T=i;return s.forEach((i=>{var s,C;const P="N"===i,O=`[^=]\\${null!=(s=S.bm[i])?s:i}`,M=P?O:`\\${null!=(C=S.bm[i])?C:i}`,R=_.has(i)||P?` ${S.bk[i]}`:S.bk[i];T=T.replace(new RegExp(M,"gm"),R)})),T}(i.slice(s).trim())}`}function mergePlugins(i,s){const _=Object.values(i).map((i=>i.name));return s.reduce(((i,s)=>{const T=_.indexOf(s.name);return T>-1?i.splice(T,1,s):i.push(s),i}),i)}((U=$||($={})).Plugin||(U.Plugin={})).Name="handPieces",(U.Events||(U.Events={})).SetHand="SetHand"},2738:function(i,s,_){"use strict";_.d(s,{$:function(){return getColorAsWord},A:function(){return nn},B:function(){return qo},C:function(){return ChessError},D:function(){return getArrowColor},E:function(){return ji},F:function(){return rgbToHex},G:function(){return wr},H:function(){return rgbaToOpacity},I:function(){return createCoreEvent},J:function(){return C},K:function(){return getXYFromEvent},L:function(){return isTouchEvent},M:function(){return isRightButton},N:function(){return ri},O:function(){return ii},P:function(){return Wo},Q:function(){return setTestData},R:function(){return ul},S:function(){return mn},T:function(){return Vl},U:function(){return gn},V:function(){return $e},W:function(){return yr},X:function(){return easeInOutQuartic},Y:function(){return easeInOutQuadratic},Z:function(){return easeOutQuadratic},_:function(){return os},a:function(){return yl},a0:function(){return gl},a1:function(){return Rs},a2:function(){return removeItems},a3:function(){return wl},a4:function(){return vl},a5:function(){return js},a6:function(){return autoDetectRenderer},a7:function(){return Gl},a8:function(){return Vo},a9:function(){return correctBlendMode},aA:function(){return cu},aB:function(){return sign},aC:function(){return Ko},aD:function(){return Ns},aE:function(){return hex2string},aF:function(){return trimCanvas},aG:function(){return getResolutionOfUrl},aH:function(){return Us},aI:function(){return premultiplyTintToRgba},aJ:function(){return rc},aK:function(){return uid},aL:function(){return Ac},aM:function(){return Dc},aN:function(){return mu},aO:function(){return kl},aP:function(){return Rc},aQ:function(){return Qo},aR:function(){return rgb2hex},aS:function(){return en},aT:function(){return getPieceShortStringFromUrl},aU:function(){return getElementBackgroundImage},aV:function(){return getFileRankFromSan},aW:function(){return getSanFromFileRank$1},a_:function(){return mr},aa:function(){return premultiplyRgba},ab:function(){return premultiplyTint},ac:function(){return lc},ad:function(){return tc},ae:function(){return ao},af:function(){return Yl},ag:function(){return createIndicesForQuads},ah:function(){return Jo},ai:function(){return Mc},aj:function(){return Ic},ak:function(){return Go},al:function(){return $s},am:function(){return deprecation},an:function(){return pl},ao:function(){return Yo},ap:function(){return ml},aq:function(){return dl},ar:function(){return hl},as:function(){return hex2rgb},at:function(){return ac},au:function(){return fl},av:function(){return Xs},aw:function(){return co},ax:function(){return ru},ay:function(){return iu},az:function(){return Js},b:function(){return nu},b$:function(){return createRecorderPlugin},b1:function(){return createStandardPlugins},b2:function(){return he},b3:function(){return kt},b4:function(){return createGame},bL:function(){return createEcoPlugin},bM:function(){return createEffectsPlugin},bR:function(){return createHorizontalMoveListPlugin},bY:function(){return createPremovesPlugin},bb:function(){return getOppositeColor},bd:function(){return va},bk:function(){return Zi},bl:function(){return Gi},bm:function(){return Vi},bo:function(){return $t},bp:function(){return ka},br:function(){return Ra},bu:function(){return Za},bv:function(){return Ha},bw:function(){return Ka},bx:function(){return an},c:function(){return calculateArrowLength},c0:function(){return createSoundsPlugin},c1:function(){return createTimeControlPlugin},c2:function(){return createVerticalMoveListPlugin},c4:function(){return Rr},c5:function(){return Nr},c7:function(){return getDefaultOptions},c8:function(){return isNode},ce:function(){return easeOutSinusoidal},cf:function(){return Dr},cg:function(){return easeOutElastic},ch:function(){return easeLinear},ci:function(){return easeOutCircular},cj:function(){return easeOutCubic},ck:function(){return _s},cl:function(){return bs},cm:function(){return hn},cn:function(){return Lr},co:function(){return createExternallyResolvablePromise},cp:function(){return Je},cq:function(){return isEdgeSquare},cr:function(){return tuckMarking},cs:function(){return setPositionBySquare},ct:function(){return de},cu:function(){return createCollection},cv:function(){return getColorAsNumber},d:function(){return calculateArrowSlope},e:function(){return getKnightArrowRotation},f:function(){return calculateArrowRotation},g:function(){return getFileRankFromSan$1},h:function(){return ys},i:function(){return vs},j:function(){return Ml},k:function(){return kn},l:function(){return sr},m:function(){return makeSvgIcon},n:function(){return getTuckPosition},o:function(){return getSanFromFileRank},p:function(){return getColorAsLetter},q:function(){return Ht},r:function(){return limitNumberWithinRange},s:function(){return string2hex},t:function(){return getBoardURL},u:function(){return getPieceBaseURL},v:function(){return ni},w:function(){return createAnimator},x:function(){return isCastle},y:function(){return isCapture},z:function(){return getUndoMoveDetails}});var T,S,C,P,O,M,R,D,j,$,U,V,Z,Y,X,Q,ee,te,ne,re,ie=_(35746),ae=Object.defineProperty,se=Object.defineProperties,oe=Object.getOwnPropertyDescriptors,le=Object.getOwnPropertySymbols,ce=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable,__defNormalProp=(i,s,_)=>s in i?ae(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,__spreadValues=(i,s)=>{for(var _ in s||(s={}))ce.call(s,_)&&__defNormalProp(i,_,s[_]);if(le)for(var _ of le(s))ue.call(s,_)&&__defNormalProp(i,_,s[_]);return i},__spreadProps=(i,s)=>se(i,oe(s));function is$1(i){return function isType2(s){return i===s.type}}function createAccessibilityPlugin(i=T.DefaultRightClickModifierKey){return{beforeState:[{condition:is$1(C.UserEvents.PointerdownLeft),handler:function convertToPointerdownRightIfModifierKeyPressed(s,_){const{api:T,queue:S,run:P}=_;if(T.keys.isPressed(i))return S.add(P,__spreadProps(__spreadValues({},s),{type:C.UserEvents.PointerdownRight})),!1;return!0}}],name:T.Plugin.Name,requires:["keys"]}}function isOneOf(i){const s=new Set(Array.isArray(i)?i:Object.values(i));return function isType2(i){return s.has(i.type)}}function createAnalysisOverlayPlugin(){let i;return{destroy:function destroy10(){null==i||i.removeAnalysisOverlay()},match:[{condition:isOneOf([C.APIEvents.Load,C.OptionsEvents.Update,C.InstanceEvents.ModeChanged,C.InstanceEvents.RendererSet]),handler:function updateAnalysisOverlay(s,_){const{options:T,renderer:S}=_;!i&&S&&(i=S);T.overlayInAnalysisMode?null==i||i.addAnalysisOverlay():null==i||i.removeAnalysisOverlay()}}],name:V.Plugin.Name}}(S=T||(T={})).DefaultRightClickModifierKey="a",(S.Plugin||(S.Plugin={})).Name="accessibility",P=C||(C={}),(O=P.LogCodes||(P.LogCodes={})).Event="Event",O.State="State",(M=P.State||(P.State={})).DraggingPiece="draggingPiece",M.HideHoverSquare="hideHoverSquare",M.MachineState="machineState",M.PromotionMove="promotionMove",M.SoundPlayed="soundPlayed",M.SelectedPiece="selectedPiece",(R=P.APIEvents||(P.APIEvents={})).AddMove="AddMove",R.BlinkHighlight="BlinkHighlight",R.ClearMarkings="ClearMarkings",R.CreateContinuation="CreateContinuation",R.CreateGame="CreateGame",R.DeletePosition="DeletePosition",R.DrawAgreed="DrawAgreed",R.DrawClaimed="DrawClaimed",R.GameResigned="GameResigned",R.IllegalMove="IllegalMove",R.LineCommentUpdated="LineCommentUpdated",R.LineUpdated="LineUpdated",R.Load="Load",R.Mark="Mark",R.Move="Move",R.MoveBackward="MoveBackward",R.MoveForward="MoveForward",R.MoveVariation="MoveVariation",R.NodeUpdated="NodeUpdated",R.OutOfTime="OutOfTime",R.PromoteVariation="PromoteVariation",R.Reload="Reload",R.ResetGame="ResetGame",R.ResetToMainLine="ResetToMainLine",R.SelectLineEnd="SelectLineEnd",R.SelectNode="SelectNode",R.SelectLineStart="SelectLineStart",R.SetBoardPosition="SetBoardPosition",R.SetPlayingAs="SetPlayingAs",R.TurnSet="TurnSet",R.Undo="Undo",R.Unmark="Unmark",R.UpdatePGNHeaders="UpdatePGNHeaders",(D=P.BoardEvents||(P.BoardEvents={})).PromotionAreaClosePointerdown="PromotionAreaClosePointerdown",D.PromotionPiecePointerdown="PromotionPiecePointerdown",(j=P.InstanceEvents||(P.InstanceEvents={})).Create="Create",j.Destroy="Destroy",j.ModeChanged="ModeChanged",j.RendererSet="RendererSet",j.RendererSetFailed="RendererSetFailed",($=P.OptionsEvents||(P.OptionsEvents={})).Update="UpdateOptions",$.UpdateMode="UpdateModeOptions",(P.SoundEvents||(P.SoundEvents={})).Play="PlaySound",(P.UIEvents||(P.UIEvents={})).Resize="Resize",(U=P.UserEvents||(P.UserEvents={})).MousedownLeft="MousedownLeft",U.MousedownRight="MousedownRight",U.PointerdownLeft="PointerdownLeft",U.PointerdownRight="PointerdownRight",U.Pointermove="Pointermove",U.Pointerup="Pointerup",U.Wheel="Wheel",((Z=V||(V={})).Plugin||(Z.Plugin={})).Name="analysis-overlay",((X=Y||(Y={})).Plugin||(X.Plugin={})).Name="cheatDetection",ee=Q||(Q={}),(te=ee.Units||(ee.Units={})).Milliseconds="Milliseconds",te.Deciseconds="Deciseconds",te.Seconds="Seconds",((re=ne||(ne={})).Plugin||(re.Plugin={})).Name="highlights";const de="highlight";var he,pe,me,fe,ge;((pe=he||(he={})).Plugin||(pe.Plugin={})).Name="arrowKeys",(me=pe.Arrow||(pe.Arrow={})).Left="arrowleft",me.Up="arrowup",me.Right="arrowright",me.Down="arrowdown",((ge=fe||(fe={})).Plugin||(ge.Plugin={})).Name="arrows";const ve="arrow";var be,ye,_e,we,ke,Te,Se,Ce,xe,Ee,Pe,Ae,Oe,Me,ze,Ie,Le,Re,Ne,De,je;((ye=be||(be={})).Plugin||(ye.Plugin={})).Name="assets",((we=_e||(_e={})).Plugin||(we.Plugin={})).Name="blinking-highlight",((Te=ke||(ke={})).Plugin||(Te.Plugin={})).Name="blinking-highlight",((Ce=Se||(Se={})).Plugin||(Ce.Plugin={})).Name="board-size",(Ee=xe||(xe={})).DefaultKeyToOpenWindow="e",(Ee.Plugin||(Ee.Plugin={})).Name="boardImages",((Ae=Pe||(Pe={})).Plugin||(Ae.Plugin={})).Name="bughouse-api",((Me=Oe||(Oe={})).Plugin||(Me.Plugin={})).Name="bughouse-sibling-board",((Ie=ze||(ze={})).Plugin||(Ie.Plugin={})).Name="clocks",(Le=Ie.TimeControlTypes||(Ie.TimeControlTypes={})).Blitz="blitz",Le.Bullet="bullet",Le.Rapid="rapid",((Ne=Re||(Re={})).Plugin||(Ne.Plugin={})).Name="coordinates",((je=De||(De={})).Plugin||(je.Plugin={})).Name="custom-items",(je.Classes||(je.Classes={})).Root="custom-item";const Be="customItem";var $e,Ue,Fe,He,qe,Ve,Ge,Ze,We,Ke,Ye,Xe,Qe;Ue=$e||($e={}),(Fe=Ue.Targets||(Ue.Targets={})).Arrows="arrows",Fe.Effects="effects",Fe.Pieces="pieces",(He=Ue.Positions||(Ue.Positions={})).Above="above",He.Below="below",(Ve=qe||(qe={})).Image="Image",Ve.Star="Star",Ve.TextBox="TextBox",((Ze=Ge||(Ge={})).Plugin||(Ze.Plugin={})).Name="debug",(Ke=We||(We={})).Name="eco",(Ke.Events||(Ke.Events={})).Update="UpdateECO",((Ye=Ke.Config||(Ke.Config={})).Codes||(Ye.Codes={})).StartingPosition="A00",Ye.InitialFen="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",((Qe=Xe||(Xe={})).Plugin||(Qe.Plugin={})).Name="effects";const Je="effect";var et,tt,nt,rt,it,at,st,ot,lt,ct,ut,dt,ht,pt,mt,ft,gt,vt,bt,yt,_t,wt,kt,Tt,St,Ct,xt,Et,Pt,At,Ot,Mt,zt,It,Lt,Rt,Nt,Dt;(tt=et||(et={})).Alternative="Alternative",tt.BestMove="BestMove",tt.Blunder="Blunder",tt.Book="Book",tt.Brilliant="Brilliant",tt.CheckmateBlack="CheckmateBlack",tt.CheckmateWhite="CheckmateWhite",tt.Correct="Correct",tt.Critical="Critical",tt.DrawBlack="DrawBlack",tt.DrawWhite="DrawWhite",tt.Excellent="Excellent",tt.FastWin="FastWin",tt.Forced="Forced",tt.FreePiece="FreePiece",tt.Gamechanger="Gamechanger",tt.Good="Good",tt.GreatFind="GreatFind",tt.Inaccuracy="Inaccuracy",tt.Incorrect="Incorrect",tt.Mate="Mate",tt.MissedWin="MissedWin",tt.Mistake="Mistake",tt.ResignBlack="ResignBlack",tt.ResignWhite="ResignWhite",tt.Sharp="Sharp",tt.Takeback="Takeback",tt.Threat="Threat",tt.TimeoutBlack="TimeoutBlack",tt.TimeoutWhite="TimeoutWhite",tt.Undo="Undo",tt.Winner="Winner",tt.WinnerWhite="WinnerWhite",tt.Interesting="Interesting",tt.Warning="Warning",tt.Equal="Equal",((rt=nt||(nt={})).Plugin||(rt.Plugin={})).Name="fade-setup",((at=it||(it={})).Plugin||(at.Plugin={})).Name="handPieces",(at.Events||(at.Events={})).SetHand="SetHand",((ot=st||(st={})).Plugin||(ot.Plugin={})).Name="hml",((ct=lt||(lt={})).Plugin||(ct.Plugin={})).Name="hover-square",((dt=ut||(ut={})).Plugin||(dt.Plugin={})).Name="move-hints",((pt=ht||(ht={})).Plugin||(pt.Plugin={})).Name="pieces",((ft=mt||(mt={})).Plugin||(ft.Plugin={})).Name="pregame",((vt=gt||(gt={})).Events||(vt.Events={})).Premove="Premove",(vt.Plugin||(vt.Plugin={})).Name="premoves",((yt=bt||(bt={})).Plugin||(yt.Plugin={})).Name="reporting",((wt=_t||(_t={})).Plugin||(wt.Plugin={})).Name="scroll-through-moves",((Tt=kt||(kt={})).Plugin||(Tt.Plugin={})).Name="sounds",(St=Tt.BoardSounds||(Tt.BoardSounds={})).GameStart="game-start",St.GameEnd="game-end",St.Capture="capture",St.Castle="castle",St.Premove="premove",St.MoveSelf="move-self",St.MoveCheck="move-check",St.MoveOpponent="move-opponent",St.Promote="promote",St.Notify="notify",St.TenSeconds="tenseconds",St.Illegal="illegal",Tt.maxTagsPerSound=5,((xt=Ct||(Ct={})).Events||(xt.Events={})).Updated="ThreatsUpdated",(xt.Plugin||(xt.Plugin={})).Name="threats",((Pt=Et||(Et={})).Plugin||(Pt.Plugin={})).Name="timeControl",function(i){i.Blitz="blitz",i.Bullet="bullet",i.Rapid="rapid"}(Pt.Types||(Pt.Types={})),(At=Pt.Header||(Pt.Header={})).Null="-",At.Separator="+",At.TimePerMove="/",At.Unset="?",Mt=Ot||(Ot={}),(zt=Mt.Actions||(Mt.Actions={})).Reset="Reset",zt.Start="Start",zt.Stop="Stop",zt.Tick="Tick",(It=Mt.Events||(Mt.Events={})).End="End",It.Reset="Reset",It.Start="Start",It.Stop="Stop",It.Tick="Tick",It.TimeAdded="TimeAdded",(Lt=Mt.States||(Mt.States={})).Ended="Ended",Lt.Going="Going",Lt.Initial="Initial",Lt.Stopped="Stopped",function(i){let s;(i.Plugin||(i.Plugin={})).Name="validate",(s=i.ErrorCodes||(i.ErrorCodes={})).InvalidPosition="InvalidPosition",i.ErrorMessages={[s.InvalidPosition]:"Board position does not match the FEN from JCE"}}(Rt||(Rt={})),function(i){i.Ready="Ready",i.ResultNodeSelected="ResultNodeSelected",i.Updated="Updated"}((Dt=Nt||(Nt={})).Events||(Dt.Events={})),(Dt.Plugin||(Dt.Plugin={})).Name="vml";var jt,Bt,$t=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",get CheatDetection(){return Y},get CustomTimestamps(){return Q},get Highlights(){return ne},get AnalysisOverlay(){return V},get ArrowKeys(){return he},get Arrows(){return fe},get Assets(){return be},get BlinkingHighlight(){return _e},get BlinkingSquare(){return ke},get BoardSize(){return Se},get BoardImages(){return xe},get BughouseAPI(){return Pe},get BughouseSiblingBoard(){return Oe},get Clocks(){return ze},get Coordinates(){return Re},get CustomItems(){return De},get Debug(){return Ge},get ECO(){return We},get Effects(){return Xe},get FadeSetup(){return nt},get HandPieces(){return it},get HML(){return st},get HoverSquare(){return lt},get MoveHints(){return ut},get Pieces(){return ht},get Pregame(){return mt},get Premoves(){return gt},get Reporting(){return bt},get ScrollThroughMoves(){return _t},get Sounds(){return kt},get Threats(){return Ct},get TimeControl(){return Et},get Timer(){return Ot},get Validate(){return Rt},get VML(){return Nt}});function createArrowKeysPlugin(i){let s;return{api:()=>({setKeys:setKeys,resetKeys:resetKeys}),create:function create3(_){s=_,setKeys(i)},destroy:function destroy10(){s.api.keys.removeOverrides([{key:he.Arrow.Up},{key:he.Arrow.Down},{key:he.Arrow.Left},{key:he.Arrow.Right}])},name:he.Plugin.Name};function setKeys(i){const _=getOverrides(i);s.api.keys.setOverrides(_)}function resetKeys(){const i=getOverrides();s.api.keys.setOverrides(i)}function getOverrides(i={}){return[{key:he.Arrow.Up,callback:s=>{var _;return null!=(_=i[he.Arrow.Up])?_:s.selectLineStart}},{key:he.Arrow.Down,callback:s=>{var _;return null!=(_=i[he.Arrow.Down])?_:s.selectLineEnd}},{key:he.Arrow.Left,callback:s=>{var _;return null!=(_=i[he.Arrow.Left])?_:s.moveBackward}},{key:he.Arrow.Right,callback:s=>{var _;return null!=(_=i[he.Arrow.Right])?_:s.moveForward}}]}}function createKeyedArrow({options:i,rawArrow:s}){var _,T;const{data:{color:S,keyPressed:C,from:P,opacity:O,to:M},key:R,type:D}=s;return{data:{color:null!=(T=null!=(_=getArrowColor$1(C,i))?_:S)?T:i.arrowColors.default,from:P,opacity:null!=O?O:i.analysisHighlightOpacity,to:M},key:R,type:D}}function getArrowColor$1(i,s){const{arrowColors:_}=s;switch(i){case jt.Alt:return _.alt;case jt.Ctrl:return _.ctrl;case jt.Shift:return _.shift;case jt.None:return _.default;default:return}}function isMark(i){return function isMarkingOfType(s){var _,T;return is$1(C.APIEvents.Mark)(s)&&(null==(T=(_=s.data).find)?void 0:T.call(_,(s=>s.type===i)))}}function isType(i){return function markingIsType(s){return s.type===i}}function isUnmark(i){return function isMarkingOfType(s){var _,T;return is$1(C.APIEvents.Unmark)(s)&&(null==(T=(_=s.data).find)?void 0:T.call(_,(s=>s.type===i)))}}function createArrowsPlugin(){return{match:[{condition:isMark(ve),handler:function markArrow(i,s){const{options:_,renderer:T}=s,{data:S}=i,C=S.filter(isType(ve)).map((i=>createKeyedArrow({rawArrow:i,options:_})));null==T||T.addArrows(C,s)}},{condition:isUnmark(ve),handler:function unmarkArrow(i,s){const{options:_,renderer:T}=s,{data:S}=i,C=S.filter(isType(ve)).map((i=>createKeyedArrow({rawArrow:i,options:_})));null==T||T.removeArrows(C,s)}},{condition:is$1(C.InstanceEvents.RendererSet),handler:function init2(i,s){const{api:_,options:T,renderer:S}=s,C=_.markings,P=(T.allowMarkings?C.getAllWhere({types:[ve]}):[]).map((i=>createKeyedArrow({rawArrow:i,options:T})));null==S||S.addArrows(P,s)}}],name:fe.Plugin.Name}}function createAssetsPlugin(){let i,s;return{match:[{condition:isOneOf([C.InstanceEvents.RendererSet,C.OptionsEvents.Update]),handler:function updateAssets(_,T){const{options:S,renderer:C}=T;if(!C)return;S.boardStyle!==i&&(i=S.boardStyle,C.updateBoardImage(T));S.pieceStyle!==s&&(s=S.pieceStyle,C.updatePieceBaseImage(T))}}],name:be.Plugin.Name}}function createBlinkingHighlightPlugin(){return{match:[{condition:is$1(C.APIEvents.BlinkHighlight),handler:function blinkHighlight(i,s){const{renderer:_}=s;null==_||_.blinkHighlights(i.data,s)}}],name:_e.Plugin.Name}}(Bt=jt||(jt={})).Alt="alt",Bt.Ctrl="ctrl",Bt.None="none",Bt.Shift="shift";var Ut,Ft,Ht,qt,Vt,Gt,Zt,Wt,Kt,Yt,Xt,Qt,Jt,en,tn,nn,rn,an,sn;function createBoardDisabledPlugin(){return{create:function create3(i){i.el.classList.toggle(en.Disabled,!i.options.enabled)},match:[{condition:is$1(C.OptionsEvents.Update),handler:function handleEnabledOption(i,s){const{data:_}=i,{el:T,renderer:S}=s;"enabled"in _&&(T.classList.toggle(en.Disabled,!_.enabled),null==S||S.setBoardEnabled(_.enabled))}}],name:Ut.Plugin.Name}}function createBoardSizePlugin(){return{match:[{condition:isOneOf([C.UIEvents.Resize,C.InstanceEvents.RendererSet]),handler:function resize3(i,s){const{renderer:_}=s;null==_||_.resize(s)}}],name:Se.Plugin.Name}}((Ft=Ut||(Ut={})).Plugin||(Ft.Plugin={})).Name="board-disabled",qt=Ht||(Ht={}),function(i){i.Arcade="arcade",i.Default="default",i.Fast="fast",i.Natural="natural",i.None="none",i.Slow="slow"}((Vt=qt.Animation||(qt.Animation={})).Types||(Vt.Types={})),(Gt=Vt.Speeds||(Vt.Speeds={}))[Gt.Default=180]="Default",Gt[Gt.Fast=100]="Fast",Gt[Gt.Slow=500]="Slow",(Zt=qt.HighlightColors||(qt.HighlightColors={})).Selected="#ffff00",Zt.Blue="#52b0dc",Zt.Green="#acce59",Zt.Orange="#ffaa00",Zt.Red="#eb6150",(Wt=qt.HighlightTypes||(qt.HighlightTypes={})).Analysis="analysis",Wt.Move="move",Wt.Selected="selected",(Kt=qt.HighlightedArrowColors||(qt.HighlightedArrowColors={})).Blue="rgba(72, 193, 249, 0.8)",Kt.Green="rgba(159, 207, 63, 0.8)",Kt.Orange="rgba(255, 170, 0, 0.8)",Kt.Red="rgba(248, 85, 63, 0.8)",(Yt=qt.CoordinatesPositions||(qt.CoordinatesPositions={})).Inside="inside",Yt.Off="off",Yt.Outside="outside",(Xt=qt.MoveMethods||(qt.MoveMethods={})).Click="click",Xt.Drag="drag",Xt.DragOnly="drag-only",(Qt=qt.MoveListDisplayTypes||(qt.MoveListDisplayTypes={})).Figurine="figurine",Qt.Text="text",(qt.BooleanOptions||(qt.BooleanOptions={})).HoverSquareOutline="hoverSquareOutline",(Jt=qt.SaveableOptions||(qt.SaveableOptions={})).AnimationType="animationType",Jt.BoardStyle="boardStyle",Jt.Coordinates="coordinates",Jt.DarkMode="darkMode",Jt.EvaluationBarType="evaluationBarType",Jt.HighlightLegalMoves="highlightLegalMoves",Jt.HighlightMoves="highlightMoves",Jt.MoveListDisplayType="moveListDisplayType",Jt.PieceStyle="pieceStyle",Jt.SoundTheme="soundTheme",Jt.PlaySounds="playSounds",(tn=en||(en={})).Pseudo3d="pseudo3d",tn.Disabled="board-disabled",tn.Flipped="flipped",(rn=nn||(nn={})).All="All",rn.Move="Move",function(i){i.Default="default",i.WebGL2D="webgl-2d",i.WebGL3D="webgl-3d"}((sn=an||(an={})).Types||(sn.Types={})),sn.TriggerOptions=[Ht.SaveableOptions.AnimationType,Ht.SaveableOptions.PieceStyle];const ln=(0,ie.c)({data:{chosenPiece:"",didChangePieces:!1,mouseCoords:[],moveHoldTimes:[],tentativeMouseCoords:{x:0,y:0}},initialState:"idle",states:{changedPiece:{load:load,move:()=>({data:{chosenPiece:void 0,didChangePieces:!0,mouseCoords:[...ln.getData().mouseCoords,ln.getData().tentativeMouseCoords],moveHoldTimes:[...ln.getData().moveHoldTimes,Date.now()-ln.getData().moveHoldTimeStart]},nextState:"idle"})},chosenPiece:{choosePiece:({tentativeMouseCoords:i,moveHoldTimeStart:s})=>({data:{moveHoldTimeStart:s,tentativeMouseCoords:i},nextState:"changedPiece"}),load:load,move:()=>({data:{chosenPiece:void 0,mouseCoords:[...ln.getData().mouseCoords,ln.getData().tentativeMouseCoords],moveHoldTimes:[...ln.getData().moveHoldTimes,Date.now()-ln.getData().moveHoldTimeStart]},nextState:"idle"})},idle:{choosePiece:({chosenPiece:i,moveHoldTimeStart:s,tentativeMouseCoords:_})=>({data:{chosenPiece:i,didChangePieces:!1,moveHoldTimeStart:s,tentativeMouseCoords:_},nextState:"chosenPiece"}),load:load}}});function load(){return{data:{chosenPiece:"",didChangePieces:!1,mouseCoords:[],moveHoldTimes:[],tentativeMouseCoords:{x:0,y:0}},nextState:"idle"}}var cn,un,dn;function didUseCheatMouse(i){const s={},_=i.mouseCoords.length/2;return i.mouseCoords.some((i=>{const T=`${i.x}-${i.y}`;return void 0===s[T]?s[T]=0:s[T]+=1,s[T]>=_}),{})}function createCheatDetectionPlugin(){return{api:()=>function createCheatDetectionAPI({machine:i}){return{get:function get2(){const s=i.getData();return{didChangePieces:s.didChangePieces,didUseCheatMouse:didUseCheatMouse(s),moveHoldTimes:s.moveHoldTimes}}}}({machine:ln}),match:[{condition:isOneOf([C.UserEvents.PointerdownLeft,C.UserEvents.Pointerup]),handler:function choosePiece(i,s){const{mode:_,state:T}=s;if(T.get(C.State.MachineState)===cn.States.PromotionAreaShowing||!i.data||!_.isAllowedToMove())return;const S=T.get(C.State.SelectedPiece)||T.get(C.State.DraggingPiece);S&&S!==ln.getData().chosenPiece&&ln.transition("choosePiece",{chosenPiece:S,moveHoldTimeStart:Date.now(),tentativeMouseCoords:i.data.coordsInsideSquare})}},{condition:is$1(C.APIEvents.Load),handler:function handleAPILoad(){ln.transition("load")}},{condition:is$1(C.APIEvents.Move),handler:function handleAPIMove(){ln.transition("move")}}],name:Y.Plugin.Name}}function createCoordinatesPlugin(){let i,s=!1;return{match:[{condition:isOneOf([C.InstanceEvents.RendererSet,C.OptionsEvents.Update]),handler:function updateCoordinates(_,T){const{options:S,renderer:P}=T;if(!P)return;S.coordinates===i&&S.flipped===s&&_.type!==C.InstanceEvents.RendererSet||P.setCoordinates({flipped:S.flipped,position:S.coordinates},T);i=S.coordinates,s=S.flipped}}],name:Re.Plugin.Name}}function createCustomItemsAPI(i){return function createAPI2(){return function createCustomItems(i){return{getDefaultStarColor:function getDefaultStarColor(){return i}}}(i)}}(function(i){i.AddingMarkings="AddingMarkings",i.Idle="Idle",i.PieceDragging="PieceDragging",i.PieceSelected="PieceSelected",i.PromotionAreaShowing="PomotionAreaShowing"})((un=cn||(cn={})).States||(un.States={})),(dn||(dn={})).Name="core";var hn,pn,mn,fn,gn,vn;function easeLinear(i){return i}function easeOutQuadratic(i){return i*(2-i)}function easeInOutQuadratic(i){return(i*=2)<1?.5*i*i:-.5*(--i*(i-2)-1)}function easeOutCubic(i){return--i*i*i+1}function easeInOutQuartic(i){return(i*=2)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2)}function easeOutSinusoidal(i){return Math.sin(i*Math.PI/2)}function easeOutCircular(i){return Math.sqrt(1- --i*i)}function easeOutElastic(i){return 0===i?0:1===i?1:Math.pow(2,-10*i)*Math.sin(5*(i-.1)*Math.PI)+1}function createAnimation(i){const{data:s,keyframes:_,repeat:T,target:S,onEnd:C}=i,P=function getAnimatedProps(i){if(!i)return{};if(!i[0])throw new Error("The animation keyframes must contain values at `0` percentage.");return __spreadValues({},i[0])}(_),O=function getAnimatedPropsKeyframes(i,s){if(!s)return{};const _=Object.keys(i),T={};return _.forEach((i=>T[i]=[])),Object.keys(s).sort(((i,s)=>parseInt(i,10)-parseInt(s,10))).forEach((i=>{_.forEach((_=>{void 0!==s[i][_]&&T[_].push(parseInt(i,10))}))})),T}(P,_),M={animatedProps:P,animatedPropsKeyframes:O,data:__spreadValues({},s),endCallbacks:[],ended:!1,endTime:0,forcedEnd:!1,frameInfo:{deltaTime:0,elapsedInterval:0,elapsedPercentage:0},isTargetHTMLElement:S instanceof HTMLElement,onEnd:i=>M.endCallbacks.push(i),params:i,repeatCount:T||1,started:!1,startTime:0,keptAlive:!1};return C&&M.endCallbacks.push(C),M}function createAnimator(i=!1){const s=[];let _=0,T=0;return{end:end,endAll:function endAll(){[...s].forEach(end)},play:function play(S){const C=createAnimation(S);s.push(C),_||i||function startAnimationLoop(){T=performance.now(),_=requestAnimationFrame(animationLoop)}();return C},playingAnimationsCount:()=>s.length,update:function update5(i){animationLoop(i)}};function animationLoop(S){const C=.001*(S-T);s.forEach((i=>{if(i.startTime>S)return;const s=i.frameInfo;s.deltaTime=C,(i.started||function onAnimationStart(i,s){const{duration:_,delay:T,onStart:S}=i.params;i.startTime||(i.startTime=s+(T||0),_&&_!==1/0&&(i.endTime=i.startTime+_));if(i.startTime>s)return!1;return i.started=!0,null==S||S(i),!0}(i,S))&&(i.endTime&&(s.elapsedInterval=(S-i.startTime)/(i.endTime-i.startTime),s.elapsedInterval>1&&(s.elapsedInterval=1),s.elapsedPercentage=Math.round(100*s.elapsedInterval)),onAnimationUpdate(i),i.endTime&&i.endTime<=S&&onAnimationEnd(i))})),T=S,s.length&&!i&&(_=requestAnimationFrame(animationLoop))}function end(i){i.ended||s.indexOf(i)<0||(i.frameInfo.elapsedInterval=1,i.frameInfo.elapsedPercentage=100,onAnimationUpdate(i),onAnimationEnd(i,!0))}function onAnimationEnd(T,S=!1){const{duration:C,keepAlive:P,repeatDelay:O}=T.params;if(T.repeatCount--,T.forcedEnd=S,!S&&T.repeatCount>0&&C&&C!==1/0)return T.startTime=T.endTime+(O||0),void(T.endTime=T.startTime+C);S||!P?(T.ended=!0,T.endCallbacks.forEach((i=>i(T))),function removeAnimation(T){const S=s.indexOf(T);S>=0&&s.splice(S,1);s.length||i||function stopAnimationLoop(){_&&cancelAnimationFrame(_);_=0}()}(T)):T.keptAlive=!0}function onAnimationUpdate(i){const{onUpdate:s}=i.params;!function updateAnimatedProperties(i){const{animatedProps:s,animatedPropsKeyframes:_,frameInfo:T,isTargetHTMLElement:S,params:C}=i,{keyframes:P,target:O}=C,{elapsedPercentage:M}=T,R=C.easing||easeLinear;if(!P)return;let D,j,$,U,V;Object.keys(s).forEach((i=>{for(let s=1;s<_[i].length;s++)if($=_[i][s-1],U=_[i][s],M>=$&&M<=U){D=P[$][i],j=P[U][i];break}V=(M-$)/(U-$),V=R(V),s[i]=D+(j-D)*V,O&&!S&&(O[i]=s[i])}))}(i),null==s||s(i)}}function createCollection(i={}){const s=i;return{deleteItem:function deleteItem(i){delete s[i]},get:function get2(i){if(void 0===s[i])throw new Error(`Requested object at key ${i} is undefined.`);return s[i]},getCollection:function getCollection(){return s},isDefined:function isDefined(i){return void 0!==s[i]},keys:function keys(){return Object.keys(s)},set:function set3(i,_){s[i]=_}}}function getFileRankFromSan$1(i){return{file:i.toLowerCase().charCodeAt(0)-96,rank:Number(i.charAt(1))}}function setPositionBySquare({square:i,el:s}){const _=getFileRankFromSan$1(i);_&&(s.className=function removeClassNamesStartingWith(i,s){return i.split(" ").filter((i=>!i.startsWith(s))).join(" ").trim()}(s.className,"square-"),s.classList.add(`square-${_.file}${_.rank}`),s.style.transform="")}function setTestData(i,s){return!!i&&(Object.entries(s).forEach((([s,_])=>{const T=`${s.charAt(0).toUpperCase()}${s.slice(1)}`;void 0===_?delete i.dataset[`test${T}`]:i.dataset[`test${T}`]=_})),!0)}(pn=hn||(hn={})).Arrows="arrows",pn.BlinkingHighlights="blinking-highlights",pn.CaptureHints="capture-hints",pn.Coordinates="coordinates",pn.Effects="effects",pn.FadeSetup="fade-setup",pn.HoverSquare="hover-square",pn.MoveHints="move-hints",pn.Pieces="pieces",pn.PromotionWindow="promotion-window",pn.Squares="squares",(fn=mn||(mn={})).Anchor="anchor",fn.Blinking="blinking",fn.Color="color",fn.Dragging="dragging",fn.Editable="editable",fn.Element="element",fn.EnPassant="enPassant",fn.File="file",fn.Figurine="figurine",fn.Flipped="flipped",fn.Inside="inside",fn.Interval="interval",fn.LeadingFigurine="leadingFigurine",fn.Opacity="opacity",fn.Outside="outside",fn.Position="position",fn.Rank="rank",fn.Selected="selected",fn.ShortString="shortstring",fn.Square="square",fn.Star="star",fn.TextColor="textColor",fn.TextValue="textValue",fn.Times="times",fn.TrailingFigurine="trailingFigurine",fn.Type="type",fn.WholeMoveNumber="wholeMoveNumber",fn.X="x",fn.Y="y",(vn=gn||(gn={})).Arrow="arrow",vn.BlinkingHighlight="blinking-highlight",vn.Board="board",vn.CommentLink="comment-link",vn.Coordinates="coordinates",vn.CustomItem="custom-item",vn.Effect="effect",vn.FadeInOverlay="fade-in-overlay",vn.GameResult="game-result",vn.HalfMove="half-move",vn.Highlight="highlight",vn.Hint="hint",vn.HoverSquare="hover-square",vn.Move="move",vn.Piece="piece",vn.PotentialCapture="capture-hint",vn.PromotionCloseButton="promotion-close-button",vn.PromotionPiece="promotion-piece",vn.PromotionWindow="promotion-window",vn.Square="square",vn.SiblingBoard="sibling-board";var bn,yn,_n,wn,kn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Image:'\n<svg viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <image x="7.5" y="7.5" width="25" height="25" />\n</svg>\n',Star:'\n  <svg xmlns="http://www.w3.org/2000/svg" style="fill: #ffa704" viewBox="0 0 40 40">\n    <path\n      d="M23.12,17.84H16.4a1.11,1.11,0,0,1-1.06-1.43L18.7,5.21a1.11,1.11,0,0,1,2.13,0l3.36,11.2A1.11,1.11,0,0,1,23.12,17.84Z" />\n    <path\n      d="M27.21,34.11,4.35,16.88a1.11,1.11,0,0,1,.67-2l17.89,0a1.11,1.11,0,0,1,1.06.8l5,17.19A1.11,1.11,0,0,1,27.21,34.11Z" />\n    <path\n      d="M35.17,16.88,12.31,34.11a1.11,1.11,0,0,1-1.74-1.2l5-17.19a1.11,1.11,0,0,1,1.06-.8l17.89,0A1.11,1.11,0,0,1,35.17,16.88Z" />\n  </svg>\n',TextBox:'\n<svg viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <rect x="5" y="12.5" width="30" height="15" rx="3" fill="inherit" />\n  <text fill="#676767" font-size="0.8rem" x="20.5" y="20.5" dominant-baseline="middle" text-anchor="middle"></text>\n</svg>\n'});function createCustomItemsMethods({board:i,el:s,options:_}){const T=createCollection(),S=createCollection(),C=createAnimator(),P=createCollection(),O=document.createComment("/Custom Items");return i.addToDom({el:O,insertAfter:!0,type:hn.Pieces}),{addCustomItems:function addCustomItems(M){M.forEach((M=>{const{data:{color:R,image:D,opacity:j,text:$,type:U,visualOrder:V,frame:Z,removalClass:Y,square:X}}=M;S.isDefined(X)&&function flushAnimatingCustomItem(i,s="captured"){const _=T.get(i);_&&_.classList.contains(s)&&(removeCustomItemElement(_,i),clearTimeout(S.get(i)),S.deleteItem(i))}(X,Y),P.isDefined(X)&&C.end(P.get(X));const Q=document.createElement("div");if(Q.classList.add(De.Classes.Root),Z){Q.classList.add("custom-item__frame"),Z.imageAnimated&&Q.classList.add("custom-item__frame--animated");const i=function createCustomItemFrame(i){if(!i)return;const s=document.createElement("div"),{imageURL:_,imageAnimated:T,positionRatioX:S,positionRatioY:C,widthRatio:P,heightRatio:O}=i,M=S/P/(1/P-1)*100,R=C/O/(1/O-1)*100,D=T?"auto 100%":`${1/P*100}% ${1/O*100}%`;return s.style.backgroundImage=`url(${_})`,s.style.backgroundSize=D,s.style.backgroundPositionX=`${M}%`,s.style.backgroundPositionY=`${R}%`,s}(Z);i&&Q.appendChild(i)}else Q.innerHTML=kn[U],function assignSVGAttributes(){const i=Q.querySelector("svg");if(!i)return;R&&(i.style.fill=R);j&&(i.style.opacity=String(j));if(D){const s=i.querySelector("image");if(!s)return;if(s.setAttribute("href",D.url),D.percentOfSquare){const{width:_}=i.viewBox.baseVal,T=_*D.percentOfSquare*.01,S=(_-T)/2;Object.assign(s.style,{height:T,width:T,x:S,y:S})}}if($){const s=i.querySelector("text");if(!s)return;s.innerHTML=$.value,$.color&&(s.style.fill=$.color)}}();setPositionBySquare({el:Q,square:X}),_.test&&setTestData(Q,{[mn.Color]:R,[mn.Element]:gn.CustomItem,[mn.Opacity]:j,[mn.Square]:X,[mn.Type]:U});const ee=function getDOMTarget(i){if(!i)return null;const s=i.position===$e.Positions.Below;return i.target===$e.Targets.Arrows?{insertBefore:s,type:hn.Arrows}:i.target===$e.Targets.Effects?{insertBefore:s,type:hn.Effects}:i.target===$e.Targets.Pieces?{insertBefore:!s,type:s?hn.Effects:hn.Pieces}:null}(V);ee?i.addToDom(__spreadValues({el:Q},ee)):s.insertBefore(Q,O),T.set(X,Q)}))},removeCustomItems:function removeCustomItems(i){i.forEach((i=>{const{data:s}=i,{frame:_,removalClass:O="captured",removalTimeout:M=250,square:R}=s,D=T.get(R);D&&((null==_?void 0:_.imageAnimated)?function animateCustomItemImage({customItemElement:i,imageURL:s,square:_,onAnimationEnd:T}){const S=i.querySelector("div");if(!S)return void T();const O=new Image;O.src=s,O.onload=()=>{const s=i.clientHeight,M=Math.ceil(O.naturalWidth/O.naturalHeight),R=1/M,D=C.play({duration:M/24*1e3,data:{currentFrame:1},onUpdate:()=>{const{data:i,frameInfo:_}=D;R*i.currentFrame<_.elapsedInterval&&(S.style.backgroundPositionX=`-${s*i.currentFrame}px`,i.currentFrame++)},onEnd:T});P.set(_,D)}}({customItemElement:D,imageURL:_.imageURL,square:R,onAnimationEnd:()=>{P.isDefined(R)&&P.deleteItem(R),removeCustomItemElement(D,R)}}):(D.classList.add(O),S.set(R,window.setTimeout((()=>{S.isDefined(R)&&S.deleteItem(R),D&&removeCustomItemElement(D,R)}),M))))}))}};function removeCustomItemElement(i,_){s.removeChild(i),T.deleteItem(_)}}function createCustomItemsEventHandlers(){return[{condition:isMark(Be),handler:function markCustomItem(i,s){const{api:_,renderer:T}=s,S=_["custom-items"],C=i.data.filter(isType(Be)).map((i=>i.data.color?i:function withDataProp(i,s,_){const T=__spreadValues({},i);return T.data[s]=_,T}(i,"color",S.getDefaultStarColor())));null==T||T.addCustomItems(C,s)}},{condition:isUnmark(Be),handler:function unmarkCustomItem(i,s){const{api:_,queue:T,renderer:S}=s,C=i.data.filter(isType(Be));C.forEach((i=>{const s=i.data.removalSound;s&&T.add(_.playSound,s)})),null==S||S.removeCustomItems(C,s)}},{condition:is$1(C.InstanceEvents.RendererSet),handler:function init2(i,s){const{api:_,options:T,renderer:S}=s,C=_.markings;null==S||S.extendRenderer(createCustomItemsMethods);const P=T.allowMarkings?C.getAllWhere({types:[Be]}):[];null==S||S.addCustomItems(P,s)}}]}function createCustomItemsPlugin({defaultStarColor:i=bn.DefaultSquareColor}={}){return{api:createCustomItemsAPI(i),match:createCustomItemsEventHandlers(),name:De.Plugin.Name}}function createDebugPlugin(){let i,s;return{create:function create3(i){const{api:{logger:s}}=i;s.on(yn.Events.EntryAdded,logToConsole)},name:Ge.Plugin.Name};function logToConsole(_){void 0===_.code||_.code===C.LogCodes.State&&JSON.stringify(_.data)===i||_.code===C.LogCodes.Event&&_.data.type===C.UserEvents.Pointermove&&s===C.UserEvents.Pointermove||_.code===C.LogCodes.Event&&_.data.type===C.UIEvents.Resize&&s===C.UIEvents.Resize||(_.code===C.LogCodes.State&&(i=JSON.stringify(_.data)),_.code===C.LogCodes.Event&&(s=_.data.type),console.group(_.code),_.level===yn.Levels.Error?console.error(_.data):console.log(_.data),console.groupEnd())}}(bn||(bn={})).DefaultSquareColor="#ffa704",function(i){i.EntryAdded="EntryAdded"}((_n=yn||(yn={})).Events||(_n.Events={})),(wn=_n.Levels||(_n.Levels={})).Debug="Debug",wn.Error="Error",wn.None="None";var Tn;function isEdgeSquare(i){if(!i)return!1;let s=!1;return["a","h","1","8"].forEach((_=>{i.includes(_)&&(s=!0)})),s}!function(i){var s;(s=i.ClassNames||(i.ClassNames={})).Background="icon-background",s.Component="icon-component",s.ComponentShadow="icon-component-shadow",s.Shadow="icon-shadow"}(Tn||(Tn={}));const Sn=`<g id="alternative">\n    <g>\n      <path class="${Tn.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>\n      <path class="${Tn.ClassNames.Background}" fill="#96af8b" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>\n    </g>\n    <g>\n      <g class="${Tn.ClassNames.ComponentShadow}" opacity="0.2">\n        <path d="M14.57,4.71l-4.42.2a.2.2,0,0,0-.11,0A.16.16,0,0,0,10,5a.21.21,0,0,0,0,.11.31.31,0,0,0,0,.1l1.4,1.4L8.92,9.13,6.5,6.71,8,5.24a.19.19,0,0,0,0-.1A.14.14,0,0,0,8,5,.15.15,0,0,0,8,4.94a.21.21,0,0,0-.11,0L3.42,4.71l-.08,0-.06,0a.18.18,0,0,0,0,.07.19.19,0,0,0,0,.08l.19,4.42a.15.15,0,0,0,0,.11.18.18,0,0,0,.08.07.25.25,0,0,0,.12,0,.18.18,0,0,0,.09-.06L5.21,8l2.55,2.56v4.49a.29.29,0,0,0,0,.09l0,.07.08,0,.09,0H9.85l.09,0a.18.18,0,0,0,.07,0l.05-.07a.29.29,0,0,0,0-.09V10.57l2.63-2.63,1.55,1.54a.16.16,0,0,0,.09,0,.17.17,0,0,0,.12,0,.18.18,0,0,0,.08-.07.13.13,0,0,0,0-.1l.19-4.43a.19.19,0,0,0,0-.08.18.18,0,0,0,0-.07l-.07,0Z"></path>\n      </g>\n      <path class="${Tn.ClassNames.Component}" fill="#fff" d="M14.57,4.21l-4.42.2a.2.2,0,0,0-.11,0,.16.16,0,0,0-.07.09.21.21,0,0,0,0,.11.31.31,0,0,0,0,.1l1.4,1.4L8.92,8.63,6.5,6.21,8,4.74a.19.19,0,0,0,0-.1.14.14,0,0,0,0-.11A.15.15,0,0,0,8,4.44a.21.21,0,0,0-.11,0L3.42,4.21l-.08,0-.06,0a.18.18,0,0,0,0,.07.19.19,0,0,0,0,.08l.19,4.42a.15.15,0,0,0,0,.11A.18.18,0,0,0,3.53,9a.25.25,0,0,0,.12,0A.18.18,0,0,0,3.74,9L5.21,7.51l2.55,2.56v4.49a.29.29,0,0,0,0,.09l0,.07.08,0,.09,0H9.85l.09,0a.18.18,0,0,0,.07,0l.05-.07a.29.29,0,0,0,0-.09V10.07l2.63-2.63L14.26,9a.16.16,0,0,0,.09,0,.17.17,0,0,0,.12,0A.18.18,0,0,0,14.55,9a.13.13,0,0,0,0-.1l.19-4.43a.19.19,0,0,0,0-.08.18.18,0,0,0,0-.07l-.07,0Z"></path>\n    </g>\n  </g>`,Cn=`<g id="best">\n    <path class="${Tn.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>\n    <path class="${Tn.ClassNames.Background}" fill="#96bc4b" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>\n    <path class="${Tn.ClassNames.ComponentShadow}" opacity="0.2" d="M9,3.43a.5.5,0,0,0-.27.08.46.46,0,0,0-.17.22L7.24,7.17l-3.68.19a.52.52,0,0,0-.26.1.53.53,0,0,0-.16.23.45.45,0,0,0,0,.28.44.44,0,0,0,.15.23l2.86,2.32-1,3.56a.45.45,0,0,0,0,.28.46.46,0,0,0,.17.22.41.41,0,0,0,.26.09.43.43,0,0,0,.27-.08l3.09-2,3.09,2a.46.46,0,0,0,.53,0,.46.46,0,0,0,.17-.22.53.53,0,0,0,0-.28l-1-3.56L14.71,8.2A.44.44,0,0,0,14.86,8a.45.45,0,0,0,0-.28.53.53,0,0,0-.16-.23.52.52,0,0,0-.26-.1l-3.68-.2L9.44,3.73a.46.46,0,0,0-.17-.22A.5.5,0,0,0,9,3.43Z"></path>\n    <path class="${Tn.ClassNames.Component}" fill="#fff" d="M9,2.93A.5.5,0,0,0,8.73,3a.46.46,0,0,0-.17.22L7.24,6.67l-3.68.19A.52.52,0,0,0,3.3,7a.53.53,0,0,0-.16.23.45.45,0,0,0,0,.28.44.44,0,0,0,.15.23L6.15,10l-1,3.56a.45.45,0,0,0,0,.28.46.46,0,0,0,.17.22.41.41,0,0,0,.26.09.43.43,0,0,0,.27-.08l3.09-2,3.09,2a.46.46,0,0,0,.53,0,.46.46,0,0,0,.17-.22.53.53,0,0,0,0-.28l-1-3.56L14.71,7.7a.44.44,0,0,0,.15-.23.45.45,0,0,0,0-.28A.53.53,0,0,0,14.7,7a.52.52,0,0,0-.26-.1l-3.68-.2L9.44,3.23A.46.46,0,0,0,9.27,3,.5.5,0,0,0,9,2.93Z"></path>\n  </g>`,xn=`<g id="blunder">\n    <path class="${Tn.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>\n    <path class="${Tn.ClassNames.Background}" fill="#ca3431" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>\n    <g class="${Tn.ClassNames.ComponentShadow}" opacity="0.2">\n      <path d="M14.74,5.45A2.58,2.58,0,0,0,14,4.54,3.76,3.76,0,0,0,12.89,4a4.07,4.07,0,0,0-1.2-.19A3.92,3.92,0,0,0,10.51,4a5.87,5.87,0,0,0-.9.37,3,3,0,0,0-.32.2,3.46,3.46,0,0,1,.42.63,3.29,3.29,0,0,1,.36,1.47.31.31,0,0,0,.19-.06l.11-.08a2.9,2.9,0,0,1,.29-.19,3.89,3.89,0,0,1,.41-.17,1.55,1.55,0,0,1,.48-.07,1.1,1.1,0,0,1,.72.24.72.72,0,0,1,.23.26.8.8,0,0,1,.07.34,1,1,0,0,1-.25.67,7.71,7.71,0,0,1-.65.63,6.2,6.2,0,0,0-.48.43,2.93,2.93,0,0,0-.45.54,2.55,2.55,0,0,0-.33.66,2.62,2.62,0,0,0-.13.83V11a.24.24,0,0,0,0,.12.35.35,0,0,0,.17.17l.12,0h1.71l.12,0a.23.23,0,0,0,.1-.07.21.21,0,0,0,.06-.1.27.27,0,0,0,0-.12V10.8a1,1,0,0,1,.26-.7q.27-.28.66-.63A5.79,5.79,0,0,0,14.05,9a4.51,4.51,0,0,0,.48-.6,2.56,2.56,0,0,0,.36-.72,2.81,2.81,0,0,0,.14-1A2.66,2.66,0,0,0,14.74,5.45Z"></path>\n      <path d="M12.38,12.65H10.5l-.12,0a.34.34,0,0,0-.18.29v1.82a.36.36,0,0,0,.08.23.23.23,0,0,0,.1.07l.12,0h1.88a.24.24,0,0,0,.12,0,.26.26,0,0,0,.11-.07.36.36,0,0,0,.07-.1.28.28,0,0,0,0-.13V13a.27.27,0,0,0,0-.12.61.61,0,0,0-.07-.1A.32.32,0,0,0,12.38,12.65Z"></path>\n      <path d="M6.79,12.65H4.91l-.12,0a.34.34,0,0,0-.18.29v1.82a.36.36,0,0,0,.08.23.23.23,0,0,0,.1.07l.12,0H6.79a.24.24,0,0,0,.12,0A.26.26,0,0,0,7,15a.36.36,0,0,0,.07-.1.28.28,0,0,0,0-.13V13a.27.27,0,0,0,0-.12.61.61,0,0,0-.07-.1A.32.32,0,0,0,6.79,12.65Z"></path>\n      <path d="M8.39,4.54A3.76,3.76,0,0,0,7.3,4a4.07,4.07,0,0,0-1.2-.19A3.92,3.92,0,0,0,4.92,4a5.87,5.87,0,0,0-.9.37,3.37,3.37,0,0,0-.55.38l-.21.19a.32.32,0,0,0,0,.41l1,1.2a.26.26,0,0,0,.2.12.48.48,0,0,0,.24-.06l.11-.08a2.9,2.9,0,0,1,.29-.19l.4-.17A1.66,1.66,0,0,1,6,6.06a1.1,1.1,0,0,1,.72.24.72.72,0,0,1,.23.26A.77.77,0,0,1,7,6.9a1,1,0,0,1-.26.67,7.6,7.6,0,0,1-.64.63,6.28,6.28,0,0,0-.49.43,2.93,2.93,0,0,0-.45.54,2.72,2.72,0,0,0-.33.66,2.62,2.62,0,0,0-.13.83V11a.43.43,0,0,0,0,.12.39.39,0,0,0,.08.1.18.18,0,0,0,.1.07.21.21,0,0,0,.12,0H6.72l.12,0a.23.23,0,0,0,.1-.07.36.36,0,0,0,.07-.1A.5.5,0,0,0,7,11V10.8a1,1,0,0,1,.27-.7A8,8,0,0,1,8,9.47c.18-.15.35-.31.52-.48A7,7,0,0,0,9,8.39a3.23,3.23,0,0,0,.36-.72,3.07,3.07,0,0,0,.13-1,2.66,2.66,0,0,0-.29-1.27A2.58,2.58,0,0,0,8.39,4.54Z"></path>\n    </g>\n    <g>\n      <path class="${Tn.ClassNames.Component}" fill="#fff" d="M14.74,5A2.58,2.58,0,0,0,14,4a3.76,3.76,0,0,0-1.09-.56,4.07,4.07,0,0,0-1.2-.19,3.92,3.92,0,0,0-1.18.17,5.87,5.87,0,0,0-.9.37,3,3,0,0,0-.32.2,3.46,3.46,0,0,1,.42.63,3.29,3.29,0,0,1,.36,1.47.31.31,0,0,0,.19-.06L10.37,6a2.9,2.9,0,0,1,.29-.19,3.89,3.89,0,0,1,.41-.17,1.55,1.55,0,0,1,.48-.07,1.1,1.1,0,0,1,.72.24.72.72,0,0,1,.23.26.8.8,0,0,1,.07.34,1,1,0,0,1-.25.67,7.71,7.71,0,0,1-.65.63,6.2,6.2,0,0,0-.48.43,2.93,2.93,0,0,0-.45.54,2.55,2.55,0,0,0-.33.66,2.62,2.62,0,0,0-.13.83v.35a.24.24,0,0,0,0,.12.35.35,0,0,0,.17.17l.12,0h1.71l.12,0a.23.23,0,0,0,.1-.07.21.21,0,0,0,.06-.1.27.27,0,0,0,0-.12V10.3a1,1,0,0,1,.26-.7q.27-.28.66-.63a5.79,5.79,0,0,0,.51-.48,4.51,4.51,0,0,0,.48-.6,2.56,2.56,0,0,0,.36-.72,2.81,2.81,0,0,0,.14-1A2.66,2.66,0,0,0,14.74,5Z"></path>\n      <path class="${Tn.ClassNames.Component}" fill="#fff" d="M12.38,12.15H10.5l-.12,0a.34.34,0,0,0-.18.29v1.82a.36.36,0,0,0,.08.23.23.23,0,0,0,.1.07l.12,0h1.88a.24.24,0,0,0,.12,0,.26.26,0,0,0,.11-.07.36.36,0,0,0,.07-.1.28.28,0,0,0,0-.13V12.46a.27.27,0,0,0,0-.12.61.61,0,0,0-.07-.1A.32.32,0,0,0,12.38,12.15Z"></path>\n      <path class="${Tn.ClassNames.Component}" fill="#fff" d="M6.79,12.15H4.91l-.12,0a.34.34,0,0,0-.18.29v1.82a.36.36,0,0,0,.08.23.23.23,0,0,0,.1.07l.12,0H6.79a.24.24,0,0,0,.12,0A.26.26,0,0,0,7,14.51a.36.36,0,0,0,.07-.1.28.28,0,0,0,0-.13V12.46a.27.27,0,0,0,0-.12.61.61,0,0,0-.07-.1A.32.32,0,0,0,6.79,12.15Z"></path>\n      <path class="${Tn.ClassNames.Component}" fill="#fff" d="M8.39,4A3.76,3.76,0,0,0,7.3,3.48a4.07,4.07,0,0,0-1.2-.19,3.92,3.92,0,0,0-1.18.17,5.87,5.87,0,0,0-.9.37,3.37,3.37,0,0,0-.55.38l-.21.19a.32.32,0,0,0,0,.41l1,1.2a.26.26,0,0,0,.2.12.48.48,0,0,0,.24-.06L4.78,6a2.9,2.9,0,0,1,.29-.19l.4-.17A1.66,1.66,0,0,1,6,5.56a1.1,1.1,0,0,1,.72.24.72.72,0,0,1,.23.26A.77.77,0,0,1,7,6.4a1,1,0,0,1-.26.67,7.6,7.6,0,0,1-.64.63,6.28,6.28,0,0,0-.49.43,2.93,2.93,0,0,0-.45.54,2.72,2.72,0,0,0-.33.66,2.62,2.62,0,0,0-.13.83v.35a.43.43,0,0,0,0,.12.39.39,0,0,0,.08.1.18.18,0,0,0,.1.07.21.21,0,0,0,.12,0H6.72l.12,0a.23.23,0,0,0,.1-.07.36.36,0,0,0,.07-.1.5.5,0,0,0,0-.12V10.3a1,1,0,0,1,.27-.7A8,8,0,0,1,8,9c.18-.15.35-.31.52-.48A7,7,0,0,0,9,7.89a3.23,3.23,0,0,0,.36-.72,3.07,3.07,0,0,0,.13-1A2.66,2.66,0,0,0,9.15,5,2.58,2.58,0,0,0,8.39,4Z"></path>\n    </g>\n  </g>`,En=`<g id="book">\n    <path class="${Tn.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>\n    <path class="${Tn.ClassNames.Background}" fill="#a88865" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>\n    <g>\n      <path class="${Tn.ClassNames.ComponentShadow}" opacity="0.3" isolation="isolate" d="M8.45,5.9c-1-.75-2.51-1.09-4.83-1.09H2.54v8.71H3.62a8.16,8.16,0,0,1,4.83,1.17Z"></path>\n      <path class="${Tn.ClassNames.ComponentShadow}" opacity="0.3" isolation="isolate" d="M9.54,14.69a8.14,8.14,0,0,1,4.84-1.17h1.08V4.81H14.38c-2.31,0-3.81.34-4.84,1.09Z"></path>\n      <path class="${Tn.ClassNames.Component}" fill="#fff" d="M8.45,5.4c-1-.75-2.51-1.09-4.83-1.09H3V13h.58a8.09,8.09,0,0,1,4.83,1.17Z"></path>\n      <path class="${Tn.ClassNames.Component}" fill="#fff" d="M9.54,14.19A8.14,8.14,0,0,1,14.38,13H15V4.31h-.58c-2.31,0-3.81.34-4.84,1.09Z"></path>\n    </g>\n  </g>`,Pn=`<g id="Brilliant">\n    <path class="${Tn.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>\n    <path class="${Tn.ClassNames.Background}" fill="#1bada6" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>\n    <g class="${Tn.ClassNames.ComponentShadow}" opacity="0.2">\n      <path d="M12.57,14.6a.51.51,0,0,1,0,.13.44.44,0,0,1-.08.11l-.11.08-.13,0h-2l-.13,0L10,14.84A.41.41,0,0,1,10,14.6V12.7a.32.32,0,0,1,.09-.23.39.39,0,0,1,.1-.08l.13,0h2a.31.31,0,0,1,.24.1.39.39,0,0,1,.08.1.51.51,0,0,1,0,.13Zm-.12-3.93a.17.17,0,0,1,0,.12.41.41,0,0,1-.07.11.4.4,0,0,1-.23.08H10.35a.31.31,0,0,1-.34-.31L9.86,3.9A.36.36,0,0,1,10,3.66a.23.23,0,0,1,.11-.08.27.27,0,0,1,.13,0H12.3a.32.32,0,0,1,.25.1.36.36,0,0,1,.09.24Z"></path>\n      <path d="M8.07,14.6a.51.51,0,0,1,0,.13.44.44,0,0,1-.08.11l-.11.08-.13,0h-2l-.13,0-.11-.08a.41.41,0,0,1-.08-.24V12.7a.27.27,0,0,1,0-.13.36.36,0,0,1,.07-.1.39.39,0,0,1,.1-.08l.13,0h2a.31.31,0,0,1,.24.1.39.39,0,0,1,.08.1.51.51,0,0,1,0,.13ZM8,10.67a.17.17,0,0,1,0,.12.41.41,0,0,1-.07.11.4.4,0,0,1-.23.08H5.85a.31.31,0,0,1-.34-.31L5.36,3.9a.36.36,0,0,1,.09-.24.23.23,0,0,1,.11-.08.27.27,0,0,1,.13,0H7.8a.35.35,0,0,1,.25.1.36.36,0,0,1,.09.24Z"></path>\n    </g>\n    <g>\n      <path class="${Tn.ClassNames.Component}" fill="#fff" d="M12.57,14.1a.51.51,0,0,1,0,.13.44.44,0,0,1-.08.11l-.11.08-.13,0h-2l-.13,0L10,14.34A.41.41,0,0,1,10,14.1V12.2A.32.32,0,0,1,10,12a.39.39,0,0,1,.1-.08l.13,0h2a.31.31,0,0,1,.24.1.39.39,0,0,1,.08.1.51.51,0,0,1,0,.13Zm-.12-3.93a.17.17,0,0,1,0,.12.41.41,0,0,1-.07.11.4.4,0,0,1-.23.08H10.35a.31.31,0,0,1-.34-.31L9.86,3.4A.36.36,0,0,1,10,3.16a.23.23,0,0,1,.11-.08.27.27,0,0,1,.13,0H12.3a.32.32,0,0,1,.25.1.36.36,0,0,1,.09.24Z"></path>\n      <path class="${Tn.ClassNames.Component}" fill="#fff" d="M8.07,14.1a.51.51,0,0,1,0,.13.44.44,0,0,1-.08.11l-.11.08-.13,0h-2l-.13,0-.11-.08a.41.41,0,0,1-.08-.24V12.2a.27.27,0,0,1,0-.13.36.36,0,0,1,.07-.1.39.39,0,0,1,.1-.08l.13,0h2A.31.31,0,0,1,8,12a.39.39,0,0,1,.08.1.51.51,0,0,1,0,.13ZM8,10.17a.17.17,0,0,1,0,.12.41.41,0,0,1-.07.11.4.4,0,0,1-.23.08H5.85a.31.31,0,0,1-.34-.31L5.36,3.4a.36.36,0,0,1,.09-.24.23.23,0,0,1,.11-.08.27.27,0,0,1,.13,0H7.8a.35.35,0,0,1,.25.1.36.36,0,0,1,.09.24Z"></path>\n    </g>\n  </g>`,An=`<g id="checkmate_black">\n    <path class="${Tn.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>\n    <path class="${Tn.ClassNames.Background}" fill="#312e2b" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>\n    <path d="M11.44,8.41h1.74l.1-1.55H11.54l.18-2.78H10.17L10,6.86H8.31l.18-2.78H6.94L6.76,6.86H5l-.1,1.55H6.66l-.11,1.68H4.82l-.1,1.55H6.46l-.18,2.78H7.83L8,11.64H9.69l-.18,2.78h1.55l.18-2.78H13l.1-1.55H11.34ZM8.11,10.09l.1-1.68H9.89l-.1,1.68Z"></path>\n    <path class="${Tn.ClassNames.ComponentShadow}" fill="#fff" d="M11.44,7.91h1.74l.1-1.55H11.54l.18-2.78H10.17L10,6.36H8.31l.18-2.78H6.94L6.76,6.36H5l-.1,1.55H6.66L6.55,9.59H4.82l-.1,1.55H6.46l-.18,2.78H7.83L8,11.14H9.69l-.18,2.78h1.55l.18-2.78H13l.1-1.55H11.34ZM8.11,9.59l.1-1.68H9.89l-.1,1.68Z"></path>\n  </g>`,On=`<g id="checkmate_white">\n    <path class="${Tn.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>\n    <circle class="${Tn.ClassNames.Background}" fill="#f8f8f8" cx="9" cy="9" r="8.5"></circle>\n    <path class="${Tn.ClassNames.ComponentShadow}" fill="#e8e8e8" d="M9,1A8,8,0,1,1,1,9,8,8,0,0,1,9,1M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>\n    <path d="M11.44,8.11h1.74l.1-1.55H11.54l.18-2.78H10.17L10,6.56H8.31l.18-2.78H6.94L6.76,6.56H5l-.1,1.55H6.66L6.55,9.79H4.82l-.1,1.55H6.46l-.18,2.78H7.83L8,11.34H9.69l-.18,2.78h1.55l.18-2.78H13l.1-1.55H11.34ZM8.11,9.79l.1-1.68H9.89l-.1,1.68Z"></path>\n  </g>`,Mn=`<g id="correct">\n    <g>\n      <path class="${Tn.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>\n      <path class="${Tn.ClassNames.Background}" fill="#96bc4b" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>\n    </g>\n    <g>\n      <path class="${Tn.ClassNames.ComponentShadow}" opacity="0.2" d="M15.11,6.81,9.45,12.47,7.79,14.13a.39.39,0,0,1-.28.11.39.39,0,0,1-.27-.11L2.89,9.78a.39.39,0,0,1-.11-.28.39.39,0,0,1,.11-.27L4.28,7.85a.34.34,0,0,1,.12-.09l.15,0a.37.37,0,0,1,.15,0,.38.38,0,0,1,.13.09l2.69,2.68,5.65-5.65a.38.38,0,0,1,.13-.09.37.37,0,0,1,.15,0,.4.4,0,0,1,.15,0,.34.34,0,0,1,.12.09l1.39,1.38a.41.41,0,0,1,.08.13.33.33,0,0,1,0,.15.4.4,0,0,1,0,.15A.5.5,0,0,1,15.11,6.81Z"></path>\n      <path class="${Tn.ClassNames.Component}" fill="#fff" d="M15.11,6.31,9.45,12,7.79,13.63a.39.39,0,0,1-.28.11.39.39,0,0,1-.27-.11L2.89,9.28A.39.39,0,0,1,2.78,9a.39.39,0,0,1,.11-.27L4.28,7.35a.34.34,0,0,1,.12-.09l.15,0a.37.37,0,0,1,.15,0,.38.38,0,0,1,.13.09L7.52,10l5.65-5.65a.38.38,0,0,1,.13-.09.37.37,0,0,1,.15,0,.4.4,0,0,1,.15,0,.34.34,0,0,1,.12.09l1.39,1.38a.41.41,0,0,1,.08.13.33.33,0,0,1,0,.15.4.4,0,0,1,0,.15A.5.5,0,0,1,15.11,6.31Z"></path>\n    </g>\n  </g>`,zn=`<g id="critical">\n    <g class="${Tn.ClassNames.Shadow}" opacity="0.3">\n      <path d="M17.68,5.2,11.06,16.67a2.37,2.37,0,0,1-4.11,0L.32,5.2A2.38,2.38,0,0,1,2.38,1.64H15.62A2.38,2.38,0,0,1,17.68,5.2Z"></path>\n    </g>\n    <path class="${Tn.ClassNames.Background}" fill="#ad5b8c" d="M17.68,4.7,11.06,16.17a2.37,2.37,0,0,1-4.11,0L.32,4.7A2.38,2.38,0,0,1,2.38,1.14H15.62A2.38,2.38,0,0,1,17.68,4.7Z"></path>\n    <g class="${Tn.ClassNames.ComponentShadow}" opacity="0.2">\n      <path d="M8.67,3.22,5.9,9.92V10a.14.14,0,0,0,0,.06l0,0,0,0H8.4a.1.1,0,0,1,.09,0,.09.09,0,0,1,0,.08l0,5c0,.11.17.17.21.07L12.1,8V7.92a.14.14,0,0,0,0-.06.09.09,0,0,0-.05,0l-.06,0H9.32a.11.11,0,0,1-.08,0,.12.12,0,0,1,0-.09l-.32-4.4C8.87,3.18,8.71,3.12,8.67,3.22Z"></path>\n    </g>\n    <path class="${Tn.ClassNames.Component}" fill="#fff" d="M8.67,2.72,5.9,9.42v.05a.14.14,0,0,0,0,.06l0,0,0,0H8.4a.1.1,0,0,1,.09,0,.09.09,0,0,1,0,.08l0,5c0,.11.17.17.21.07l3.4-7.24V7.42a.14.14,0,0,0,0-.06.09.09,0,0,0-.05,0l-.06,0H9.32a.11.11,0,0,1-.08,0,.12.12,0,0,1,0-.09l-.32-4.4C8.87,2.68,8.71,2.62,8.67,2.72Z"></path>\n  </g>`,In=`<g id="draw_black">\n    <path class="${Tn.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>\n    <path class="${Tn.ClassNames.Background}" fill="#312e2b" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>\n    <path d="M2.92,7V5.84c.81,0,1.75-.28,1.8-1.22H6.14v5.5H4.34V7Zm8.87-2.39L7,13.88H5l4.8-9.26ZM9.85,13.88c-.08-1.54,1.38-2.19,2.57-2.89.33-.17.78-.4.78-.78a.66.66,0,0,0-.68-.7c-.69,0-.94.58-.92,1.16H10a2.17,2.17,0,0,1,.64-1.79,2.74,2.74,0,0,1,1.91-.62C14.1,8.26,15,8.78,15,10c0,1.82-2.66,2.18-2.66,2.5h2.73v1.38Z"></path>\n    <path class="${Tn.ClassNames.ComponentShadow}" fill="#fff" d="M2.92,6.51V5.34c.81,0,1.75-.28,1.8-1.22H6.14v5.5H4.34V6.51Zm8.87-2.39L7,13.38H5l4.8-9.26ZM9.85,13.38c-.08-1.54,1.38-2.19,2.57-2.89.33-.17.78-.4.78-.78a.66.66,0,0,0-.68-.7c-.69,0-.94.58-.92,1.16H10a2.17,2.17,0,0,1,.64-1.79,2.74,2.74,0,0,1,1.91-.62C14.1,7.76,15,8.28,15,9.5c0,1.82-2.66,2.18-2.66,2.5h2.73v1.38Z"></path>\n  </g>`,Ln=`<g id="draw_white">\n    <path class="${Tn.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>\n    <circle class="${Tn.ClassNames.Background}" fill="#f8f8f8" cx="9" cy="9" r="8.5"></circle>\n    <path class="${Tn.ClassNames.ComponentShadow}" fill="#e8e8e8" d="M9,1A8,8,0,1,1,1,9,8,8,0,0,1,9,1M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>\n    <path d="M2.92,6.61V5.44c.81,0,1.75-.28,1.8-1.22H6.14v5.5H4.34V6.61Zm8.87-2.39L7,13.48H5l4.8-9.26ZM9.85,13.48c-.08-1.54,1.38-2.19,2.57-2.89.33-.17.78-.4.78-.78a.66.66,0,0,0-.68-.7c-.69,0-.94.58-.92,1.16H10a2.17,2.17,0,0,1,.64-1.79,2.74,2.74,0,0,1,1.91-.62C14.1,7.86,15,8.38,15,9.6c0,1.82-2.66,2.18-2.66,2.5h2.73v1.38Z"></path>\n  </g>`,Rn=`<g id="excellent">\n    <g>\n      <path class="${Tn.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>\n      <path class="${Tn.ClassNames.Background}" fill="#96bc4b" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>\n    </g>\n    <g class="${Tn.ClassNames.ComponentShadow}" opacity="0.2">\n      <path d="M13.79,11.34c0-.2.4-.53.4-.94S14,9.72,14,9.58a2.06,2.06,0,0,0,.18-.83,1,1,0,0,0-.3-.69,1.13,1.13,0,0,0-.55-.2,10.29,10.29,0,0,1-2.07,0c-.37-.23,0-1.18.18-1.7S11.9,4,10.62,3.7c-.69-.17-.66.37-.78.9-.05.21-.09.43-.13.57A5,5,0,0,1,7.05,8.23a1.57,1.57,0,0,1-.42.18v4.94A7.23,7.23,0,0,1,8,13.53c.52.12.91.25,1.44.33A11.11,11.11,0,0,0,11,14a6.65,6.65,0,0,0,1.18,0,1.09,1.09,0,0,0,1-.59.66.66,0,0,0,.06-.2,1.63,1.63,0,0,1,.07-.3c.13-.28.37-.3.5-.68S13.74,11.53,13.79,11.34Z"></path>\n      <path d="M5.49,8.09H4.31a.5.5,0,0,0-.5.5v4.56a.5.5,0,0,0,.5.5H5.49a.5.5,0,0,0,.5-.5V8.59A.5.5,0,0,0,5.49,8.09Z"></path>\n    </g>\n    <g>\n      <path class="${Tn.ClassNames.Component}" fill="#fff" d="M13.79,10.84c0-.2.4-.53.4-.94S14,9.22,14,9.08a2.06,2.06,0,0,0,.18-.83,1,1,0,0,0-.3-.69,1.13,1.13,0,0,0-.55-.2,10.29,10.29,0,0,1-2.07,0c-.37-.23,0-1.18.18-1.7s.51-2.12-.77-2.43c-.69-.17-.66.37-.78.9-.05.21-.09.43-.13.57A5,5,0,0,1,7.05,7.73a1.57,1.57,0,0,1-.42.18v4.94A7.23,7.23,0,0,1,8,13c.52.12.91.25,1.44.33a11.11,11.11,0,0,0,1.62.16,6.65,6.65,0,0,0,1.18,0,1.09,1.09,0,0,0,1-.59.66.66,0,0,0,.06-.2,1.63,1.63,0,0,1,.07-.3c.13-.28.37-.3.5-.68S13.74,11,13.79,10.84Z"></path>\n      <path class="${Tn.ClassNames.Component}" fill="#fff" d="M5.49,7.59H4.31a.5.5,0,0,0-.5.5v4.56a.5.5,0,0,0,.5.5H5.49a.5.5,0,0,0,.5-.5V8.09A.5.5,0,0,0,5.49,7.59Z"></path>\n    </g>\n  </g>`,Nn=`<g id="fast_win">\n    <g>\n      <path class="${Tn.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>\n      <path class="${Tn.ClassNames.Background}" fill="#96af8b" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>\n    </g>\n    <g class="${Tn.ClassNames.ComponentShadow}" opacity="0.2">\n      <path d="M4.85,4.7,9.67,9.19a.18.18,0,0,1,.05.07.21.21,0,0,1,0,.18l-.05.07L4.85,14a.24.24,0,0,1-.11.06.3.3,0,0,1-.13,0A.23.23,0,0,1,4.52,14a.28.28,0,0,1,0-.12v-9a.28.28,0,0,1,0-.12.23.23,0,0,1,.09-.08.3.3,0,0,1,.13,0A.24.24,0,0,1,4.85,4.7Z"></path>\n      <path d="M10,4.7l4.82,4.49a.18.18,0,0,1,.05.07.21.21,0,0,1,0,.18l-.05.07L10,14a.24.24,0,0,1-.11.06.27.27,0,0,1-.13,0A.18.18,0,0,1,9.7,14a.19.19,0,0,1,0-.12v-9a.19.19,0,0,1,0-.12.18.18,0,0,1,.09-.08.27.27,0,0,1,.13,0A.24.24,0,0,1,10,4.7Z"></path>\n    </g>\n    <g>\n      <path class="${Tn.ClassNames.Component}" fill="#fff" d="M4.85,4.2,9.67,8.69a.18.18,0,0,1,.05.07.21.21,0,0,1,0,.18L9.67,9,4.85,13.5a.24.24,0,0,1-.11.06.3.3,0,0,1-.13,0,.23.23,0,0,1-.09-.08.28.28,0,0,1,0-.12v-9a.28.28,0,0,1,0-.12.23.23,0,0,1,.09-.08.3.3,0,0,1,.13,0A.24.24,0,0,1,4.85,4.2Z"></path>\n      <path class="${Tn.ClassNames.Component}" fill="#fff" d="M10,4.2l4.82,4.49a.18.18,0,0,1,.05.07.21.21,0,0,1,0,.18L14.85,9,10,13.5a.24.24,0,0,1-.11.06.27.27,0,0,1-.13,0,.18.18,0,0,1-.09-.08.19.19,0,0,1,0-.12v-9a.19.19,0,0,1,0-.12.18.18,0,0,1,.09-.08.27.27,0,0,1,.13,0A.24.24,0,0,1,10,4.2Z"></path>\n    </g>\n  </g>`,Dn=`<g id="free_piece">\n    <path class="${Tn.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>\n    <path class="${Tn.ClassNames.Background}" fill="#ec6250" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>\n    <g class="${Tn.ClassNames.ComponentShadow}" opacity="0.2">\n      <path d="M9.76,9.66h3.89v4.19a.68.68,0,0,1-.68.68H9.76Z"></path>\n      <path d="M4.35,9.66H8.24v4.87H5a.58.58,0,0,1-.26-.06.6.6,0,0,1-.36-.36.58.58,0,0,1,0-.26V9.66Z"></path>\n      <path d="M13.39,7H10.13l2-1a.78.78,0,0,0,.29-.25.78.78,0,0,0,.13-.36A.82.82,0,0,0,12.53,5a.87.87,0,0,0-.23-.31l-1.15-1a.76.76,0,0,0-.34-.16.74.74,0,0,0-.39,0,.94.94,0,0,0-.33.2.84.84,0,0,0-.19.33L9.08,7H9l-.83-2.9A.73.73,0,0,0,8,3.81a.79.79,0,0,0-.33-.2.7.7,0,0,0-.38,0,.75.75,0,0,0-.35.16l-1.14,1A.87.87,0,0,0,5.54,5a.71.71,0,0,0,0,.38.78.78,0,0,0,.13.36A.71.71,0,0,0,5.91,6l2,1H4.61a.46.46,0,0,0-.49.44v.87a.47.47,0,0,0,.49.45h8.78a.47.47,0,0,0,.49-.45V7.48A.47.47,0,0,0,13.39,7Z"></path>\n    </g>\n    <g>\n      <path class="${Tn.ClassNames.Component}" fill="#fff" d="M9.76,14H13a.71.71,0,0,0,.48-.19.72.72,0,0,0,.2-.48V9.16H9.76Z"></path>\n      <path class="${Tn.ClassNames.Component}" fill="#fff" d="M4.36,13.35a.58.58,0,0,0,0,.26.6.6,0,0,0,.36.36A.58.58,0,0,0,5,14H8.24V9.16H4.36Z"></path>\n      <path class="${Tn.ClassNames.Component}" fill="#fff" d="M13.39,6.54H10.13l2-1a.78.78,0,0,0,.29-.25.78.78,0,0,0,.13-.36.82.82,0,0,0-.05-.38.87.87,0,0,0-.23-.31l-1.15-1a.76.76,0,0,0-.34-.16.74.74,0,0,0-.39,0,.94.94,0,0,0-.33.2.84.84,0,0,0-.19.33l-.82,2.9H9l-.83-2.9A.73.73,0,0,0,8,3.31a.79.79,0,0,0-.33-.2.7.7,0,0,0-.38,0,.75.75,0,0,0-.35.16l-1.14,1a.87.87,0,0,0-.23.31.71.71,0,0,0,0,.38.78.78,0,0,0,.13.36.71.71,0,0,0,.29.25l2,1H4.61A.46.46,0,0,0,4.12,7v.87a.47.47,0,0,0,.49.45h8.78a.47.47,0,0,0,.49-.45V7A.47.47,0,0,0,13.39,6.54Z"></path>\n    </g>\n  </g>`,jn=`<path class="${Tn.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>\n<path class="${Tn.ClassNames.Background}" fill="#7979a1" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>\n<g class="${Tn.ClassNames.ComponentShadow}" opacity="0.1">\n    <polygon points="11.29 11.34 11.29 8.56 7.79 11.3 7.79 11.34 5.39 11.34 9.54 16.5 13.73 11.34 11.29 11.34"></polygon>\n    <polygon points="7.83 7.51 7.83 10.32 11.33 7.58 11.33 7.5 13.73 7.5 9.58 2.35 5.39 7.51 7.83 7.51"></polygon>\n  </g>\n<g>\n    <polygon class="${Tn.ClassNames.Component}" fill="#fff" points="10.9 10.92 10.9 8.13 7.4 10.87 7.4 10.92 5 10.92 9.15 16.07 13.34 10.92 10.9 10.92"></polygon>\n    <polygon class="${Tn.ClassNames.Component}" fill="#fff" points="7.44 7.08 7.44 9.9 10.94 7.16 10.94 7.08 13.34 7.08 9.19 1.93 5 7.08 7.44 7.08"></polygon>\n  </g>`,Bn=`<g id="great_find">\n    <path class="${Tn.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>\n    <path class="${Tn.ClassNames.Background}" fill="#5c8bb0" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>\n    <g>\n      <g class="${Tn.ClassNames.ComponentShadow}" opacity="0.2">\n        <path d="M10.32,14.6a.27.27,0,0,1,0,.13.44.44,0,0,1-.08.11l-.11.08-.13,0H8l-.13,0-.11-.08a.41.41,0,0,1-.08-.24V12.7a.27.27,0,0,1,0-.13.36.36,0,0,1,.07-.1.39.39,0,0,1,.1-.08l.13,0h2a.31.31,0,0,1,.24.1.39.39,0,0,1,.08.1.51.51,0,0,1,0,.13Zm-.12-3.93a.17.17,0,0,1,0,.12.41.41,0,0,1-.07.11.4.4,0,0,1-.23.08H8.1a.31.31,0,0,1-.34-.31L7.61,3.9a.36.36,0,0,1,.09-.24.23.23,0,0,1,.11-.08.27.27,0,0,1,.13,0h2.11a.32.32,0,0,1,.25.1.36.36,0,0,1,.09.24Z"></path>\n      </g>\n      <path class="${Tn.ClassNames.Component}" fill="#fff" d="M10.32,14.1a.27.27,0,0,1,0,.13.44.44,0,0,1-.08.11l-.11.08-.13,0H8l-.13,0-.11-.08a.41.41,0,0,1-.08-.24V12.2a.27.27,0,0,1,0-.13.36.36,0,0,1,.07-.1.39.39,0,0,1,.1-.08l.13,0h2a.31.31,0,0,1,.24.1.39.39,0,0,1,.08.1.51.51,0,0,1,0,.13Zm-.12-3.93a.17.17,0,0,1,0,.12.41.41,0,0,1-.07.11.4.4,0,0,1-.23.08H8.1a.31.31,0,0,1-.34-.31L7.61,3.4a.36.36,0,0,1,.09-.24.23.23,0,0,1,.11-.08.27.27,0,0,1,.13,0h2.11a.32.32,0,0,1,.25.1.36.36,0,0,1,.09.24Z"></path>\n    </g>\n  </g>`,$n=`<g id="forced">\n    <g id="fast_win">\n      <g>\n        <path class="${Tn.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>\n        <path class="${Tn.ClassNames.Background}" fill="#96af8b" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>\n      </g>\n    </g>\n    <g class="${Tn.ClassNames.ComponentShadow}" opacity="0.2">\n      <path d="M14.39,9.07,9,4.31a.31.31,0,0,0-.3,0,.32.32,0,0,0-.13.1.29.29,0,0,0,0,.16V7.42H3.9a.58.58,0,0,0-.19,0,.5.5,0,0,0-.17.11.91.91,0,0,0-.11.16.63.63,0,0,0,0,.19v3.41a.58.58,0,0,0,0,.19.64.64,0,0,0,.11.16.39.39,0,0,0,.17.11.41.41,0,0,0,.19,0H8.5v2.74a.26.26,0,0,0,.16.26.3.3,0,0,0,.16,0A.34.34,0,0,0,9,14.79L14.39,10a.69.69,0,0,0,.16-.22.7.7,0,0,0,0-.52A.69.69,0,0,0,14.39,9.07Z"></path>\n    </g>\n    <path class="${Tn.ClassNames.Component}" fill="#fff" d="M14.39,8.57,9,3.81a.31.31,0,0,0-.3,0,.32.32,0,0,0-.13.1A.29.29,0,0,0,8.5,4V6.92H3.9a.58.58,0,0,0-.19,0,.5.5,0,0,0-.17.11.91.91,0,0,0-.11.16.63.63,0,0,0,0,.19v3.41a.58.58,0,0,0,0,.19.64.64,0,0,0,.11.16.39.39,0,0,0,.17.11.41.41,0,0,0,.19,0H8.5v2.74a.26.26,0,0,0,.16.26.3.3,0,0,0,.16,0A.34.34,0,0,0,9,14.29l5.42-4.76a.69.69,0,0,0,.16-.22.7.7,0,0,0,0-.52A.69.69,0,0,0,14.39,8.57Z"></path>\n  </g>`,Un=`<g id="good">\n    <g>\n      <path class="${Tn.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>\n      <path class="${Tn.ClassNames.Background}" fill="#96af8b" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>\n    </g>\n    <g>\n      <path class="${Tn.ClassNames.ComponentShadow}" opacity="0.2" d="M15.11,6.81,9.45,12.47,7.79,14.13a.39.39,0,0,1-.28.11.39.39,0,0,1-.27-.11L2.89,9.78a.39.39,0,0,1-.11-.28.39.39,0,0,1,.11-.27L4.28,7.85a.34.34,0,0,1,.12-.09l.15,0a.37.37,0,0,1,.15,0,.38.38,0,0,1,.13.09l2.69,2.68,5.65-5.65a.38.38,0,0,1,.13-.09.37.37,0,0,1,.15,0,.4.4,0,0,1,.15,0,.34.34,0,0,1,.12.09l1.39,1.38a.41.41,0,0,1,.08.13.33.33,0,0,1,0,.15.4.4,0,0,1,0,.15A.5.5,0,0,1,15.11,6.81Z"></path>\n      <path class="${Tn.ClassNames.Component}" fill="#fff" d="M15.11,6.31,9.45,12,7.79,13.63a.39.39,0,0,1-.28.11.39.39,0,0,1-.27-.11L2.89,9.28A.39.39,0,0,1,2.78,9a.39.39,0,0,1,.11-.27L4.28,7.35a.34.34,0,0,1,.12-.09l.15,0a.37.37,0,0,1,.15,0,.38.38,0,0,1,.13.09L7.52,10l5.65-5.65a.38.38,0,0,1,.13-.09.37.37,0,0,1,.15,0,.4.4,0,0,1,.15,0,.34.34,0,0,1,.12.09l1.39,1.38a.41.41,0,0,1,.08.13.33.33,0,0,1,0,.15.4.4,0,0,1,0,.15A.5.5,0,0,1,15.11,6.31Z"></path>\n    </g>\n  </g>`,Fn=`<g id="inaccuracy">\n    <path class="${Tn.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>\n    <path class="${Tn.ClassNames.Background}" fill="#f7c045" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>\n    <g class="${Tn.ClassNames.ComponentShadow}" opacity="0.2">\n      <path d="M13.66,14.8a.28.28,0,0,1,0,.13.23.23,0,0,1-.08.11.28.28,0,0,1-.11.08l-.12,0h-2l-.13,0a.27.27,0,0,1-.1-.08A.36.36,0,0,1,11,14.8V12.9a.59.59,0,0,1,0-.13.36.36,0,0,1,.07-.1l.1-.08.13,0h2a.33.33,0,0,1,.23.1.39.39,0,0,1,.08.1.28.28,0,0,1,0,.13Zm-.12-3.93a.31.31,0,0,1,0,.13.3.3,0,0,1-.07.1.3.3,0,0,1-.23.08H11.43a.31.31,0,0,1-.34-.31L10.94,4.1A.5.5,0,0,1,11,3.86l.11-.08.13,0h2.11a.35.35,0,0,1,.26.1.41.41,0,0,1,.08.24Z"></path>\n      <path d="M7.65,14.82a.27.27,0,0,1,0,.12.26.26,0,0,1-.07.11l-.1.07-.13,0H5.43a.25.25,0,0,1-.12,0,.27.27,0,0,1-.1-.08.31.31,0,0,1-.09-.22V13a.36.36,0,0,1,.09-.23l.1-.07.12,0H7.32a.32.32,0,0,1,.23.09.3.3,0,0,1,.07.1.28.28,0,0,1,0,.13Zm2.2-7.17a3.1,3.1,0,0,1-.36.73A5.58,5.58,0,0,1,9,9a4.85,4.85,0,0,1-.52.49,8,8,0,0,0-.65.63,1,1,0,0,0-.27.7V11a.21.21,0,0,1,0,.12.17.17,0,0,1-.06.1.23.23,0,0,1-.1.07l-.12,0H5.53a.21.21,0,0,1-.12,0,.18.18,0,0,1-.1-.07.2.2,0,0,1-.08-.1.37.37,0,0,1,0-.12v-.35a2.68,2.68,0,0,1,.13-.84,2.91,2.91,0,0,1,.33-.66,3.38,3.38,0,0,1,.45-.55c.16-.15.33-.29.49-.42a7.84,7.84,0,0,0,.65-.64,1,1,0,0,0,.25-.67.77.77,0,0,0-.07-.34.67.67,0,0,0-.23-.27A1.16,1.16,0,0,0,6.49,6,1.61,1.61,0,0,0,6,6.11a3,3,0,0,0-.41.18,1.75,1.75,0,0,0-.29.18l-.11.09A.5.5,0,0,1,5,6.62a.31.31,0,0,1-.21-.13l-1-1.21a.3.3,0,0,1,0-.4A1.36,1.36,0,0,1,4,4.68a3.07,3.07,0,0,1,.56-.38,5.49,5.49,0,0,1,.9-.37,3.69,3.69,0,0,1,1.19-.17,3.92,3.92,0,0,1,2.3.75,2.85,2.85,0,0,1,.77.92A2.82,2.82,0,0,1,10,6.71,3,3,0,0,1,9.85,7.65Z"></path>\n    </g>\n    <g>\n      <path class="${Tn.ClassNames.Component}" fill="#fff" d="M13.66,14.3a.28.28,0,0,1,0,.13.23.23,0,0,1-.08.11.28.28,0,0,1-.11.08l-.12,0h-2l-.13,0a.27.27,0,0,1-.1-.08A.36.36,0,0,1,11,14.3V12.4a.59.59,0,0,1,0-.13.36.36,0,0,1,.07-.1l.1-.08.13,0h2a.33.33,0,0,1,.23.1.39.39,0,0,1,.08.1.28.28,0,0,1,0,.13Zm-.12-3.93a.31.31,0,0,1,0,.13.3.3,0,0,1-.07.1.3.3,0,0,1-.23.08H11.43a.31.31,0,0,1-.34-.31L10.94,3.6A.5.5,0,0,1,11,3.36l.11-.08.13,0h2.11a.35.35,0,0,1,.26.1.41.41,0,0,1,.08.24Z"></path>\n      <path class="${Tn.ClassNames.Component}" fill="#fff" d="M7.65,14.32a.27.27,0,0,1,0,.12.26.26,0,0,1-.07.11l-.1.07-.13,0H5.43a.25.25,0,0,1-.12,0,.27.27,0,0,1-.1-.08.31.31,0,0,1-.09-.22V12.49a.36.36,0,0,1,.09-.23l.1-.07.12,0H7.32a.32.32,0,0,1,.23.09.3.3,0,0,1,.07.1.28.28,0,0,1,0,.13Zm2.2-7.17a3.1,3.1,0,0,1-.36.73,5.58,5.58,0,0,1-.49.6A4.85,4.85,0,0,1,8.48,9a8,8,0,0,0-.65.63,1,1,0,0,0-.27.7v.22a.21.21,0,0,1,0,.12.17.17,0,0,1-.06.1.23.23,0,0,1-.1.07l-.12,0H5.53a.21.21,0,0,1-.12,0,.18.18,0,0,1-.1-.07.2.2,0,0,1-.08-.1.37.37,0,0,1,0-.12v-.35a2.68,2.68,0,0,1,.13-.84,2.91,2.91,0,0,1,.33-.66,3.38,3.38,0,0,1,.45-.55c.16-.15.33-.29.49-.42a7.84,7.84,0,0,0,.65-.64,1,1,0,0,0,.25-.67.77.77,0,0,0-.07-.34.67.67,0,0,0-.23-.27,1.16,1.16,0,0,0-.72-.24A1.61,1.61,0,0,0,6,5.61a3,3,0,0,0-.41.18A1.75,1.75,0,0,0,5.3,6l-.11.09A.5.5,0,0,1,5,6.12.31.31,0,0,1,4.74,6l-1-1.21a.3.3,0,0,1,0-.4A1.36,1.36,0,0,1,4,4.18a3.07,3.07,0,0,1,.56-.38,5.49,5.49,0,0,1,.9-.37,3.69,3.69,0,0,1,1.19-.17A3.92,3.92,0,0,1,8.93,4a2.85,2.85,0,0,1,.77.92A2.82,2.82,0,0,1,10,6.21,3,3,0,0,1,9.85,7.15Z"></path>\n    </g>\n  </g>`,Hn=`<g id="incorrect">\n    <path class="${Tn.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>\n    <path class="${Tn.ClassNames.Background}" fill="#ca3431" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>\n    <g class="${Tn.ClassNames.ComponentShadow}" opacity="0.2">\n      <path d="M14,12.51a.57.57,0,0,1,.08.13.39.39,0,0,1,0,.3.5.5,0,0,1-.08.12l-1.38,1.38a.5.5,0,0,1-.12.08l-.15,0-.15,0a.57.57,0,0,1-.13-.08L9,11.37,5.94,14.44a.57.57,0,0,1-.13.08l-.15,0-.15,0a.36.36,0,0,1-.12-.08L4,13.06a.39.39,0,0,1-.11-.27A.41.41,0,0,1,4,12.51L7.07,9.45,4,6.39a.43.43,0,0,1-.11-.28A.39.39,0,0,1,4,5.84L5.39,4.46a.39.39,0,0,1,.27-.11.43.43,0,0,1,.28.11L9,7.52l3.06-3.06a.41.41,0,0,1,.28-.11.39.39,0,0,1,.27.11L14,5.84a.36.36,0,0,1,.08.12.39.39,0,0,1,0,.3.57.57,0,0,1-.08.13L10.92,9.45Z"></path>\n    </g>\n    <path class="${Tn.ClassNames.Component}" fill="#f1f2f2" d="M14,12a.57.57,0,0,1,.08.13.39.39,0,0,1,0,.3.5.5,0,0,1-.08.12l-1.38,1.38a.5.5,0,0,1-.12.08l-.15,0-.15,0a.57.57,0,0,1-.13-.08L9,10.87,5.94,13.94a.57.57,0,0,1-.13.08l-.15,0-.15,0a.36.36,0,0,1-.12-.08L4,12.56a.39.39,0,0,1-.11-.27A.41.41,0,0,1,4,12L7.07,9,4,5.89a.43.43,0,0,1-.11-.28A.39.39,0,0,1,4,5.34L5.39,4a.39.39,0,0,1,.27-.11A.43.43,0,0,1,5.94,4L9,7,12.06,4a.41.41,0,0,1,.28-.11.39.39,0,0,1,.27.11L14,5.34a.36.36,0,0,1,.08.12.39.39,0,0,1,0,.3.57.57,0,0,1-.08.13L10.92,9Z"></path>\n  </g>`,qn=`<g id="mate">\n    <path class="${Tn.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>\n    <path class="${Tn.ClassNames.Background}" fill="#ec6250" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>\n    <g>\n      <g class="${Tn.ClassNames.ComponentShadow}" opacity="0.2">\n        <path d="M11.44,8.61h1.74l.1-1.55H11.54l.18-2.78H10.17L10,7.06H8.31l.18-2.78H6.94L6.76,7.06H5l-.1,1.55H6.66l-.11,1.68H4.82l-.1,1.55H6.46l-.18,2.78H7.83L8,11.84H9.69l-.18,2.78h1.55l.18-2.78H13l.1-1.55H11.34ZM8.11,10.29l.1-1.68H9.89l-.1,1.68Z"></path>\n      </g>\n      <path class="${Tn.ClassNames.Component}" fill="#fff" d="M11.44,8.11h1.74l.1-1.55H11.54l.18-2.78H10.17L10,6.56H8.31l.18-2.78H6.94L6.76,6.56H5l-.1,1.55H6.66L6.55,9.79H4.82l-.1,1.55H6.46l-.18,2.78H7.83L8,11.34H9.69l-.18,2.78h1.55l.18-2.78H13l.1-1.55H11.34ZM8.11,9.79l.1-1.68H9.89l-.1,1.68Z"></path>\n    </g>\n  </g>`,Vn=`<g id="missed_win">\n    <g>\n      <path class="${Tn.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>\n      <path class="${Tn.ClassNames.Background}" fill="#dbac16" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>\n    </g>\n    <g>\n      <g class="${Tn.ClassNames.ComponentShadow}" opacity="0.2">\n        <rect x="2.74" y="8.1" width="12.51" height="3.11" rx="0.36"></rect>\n      </g>\n      <rect class="${Tn.ClassNames.Component}" fill="#fff" x="2.74" y="7.6" width="12.51" height="3.11" rx="0.36"></rect>\n    </g>\n  </g>`,Gn=`<g id="mistake">\n    <g>\n      <path class="${Tn.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>\n      <path class="${Tn.ClassNames.Background}" fill="#e58f2a" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>\n    </g>\n    <g>\n      <g class="${Tn.ClassNames.ComponentShadow}" opacity="0.2">\n        <path d="M9.92,15a.27.27,0,0,1,0,.12.41.41,0,0,1-.07.11.32.32,0,0,1-.23.09H7.7a.25.25,0,0,1-.12,0,.27.27,0,0,1-.1-.08A.31.31,0,0,1,7.39,15V13.19A.32.32,0,0,1,7.48,13l.1-.07.12,0H9.59a.32.32,0,0,1,.23.09.61.61,0,0,1,.07.1.28.28,0,0,1,0,.13Zm2.2-7.17a3.1,3.1,0,0,1-.36.73,5.58,5.58,0,0,1-.49.6,6,6,0,0,1-.52.49,8,8,0,0,0-.65.63,1,1,0,0,0-.27.7v.22a.24.24,0,0,1,0,.12.17.17,0,0,1-.06.1.3.3,0,0,1-.1.07l-.12,0H7.79l-.12,0a.3.3,0,0,1-.1-.07.26.26,0,0,1-.07-.1.37.37,0,0,1,0-.12v-.35A2.42,2.42,0,0,1,7.61,10a2.55,2.55,0,0,1,.33-.66,3.38,3.38,0,0,1,.45-.55c.16-.15.33-.29.49-.42a7.73,7.73,0,0,0,.64-.64,1,1,0,0,0,.26-.67.77.77,0,0,0-.07-.34.75.75,0,0,0-.23-.27,1.16,1.16,0,0,0-.72-.24,1.61,1.61,0,0,0-.49.07,3,3,0,0,0-.41.18,1.41,1.41,0,0,0-.29.18l-.11.09a.5.5,0,0,1-.24.06A.31.31,0,0,1,7,6.69L6,5.48a.29.29,0,0,1,0-.4,1.36,1.36,0,0,1,.21-.2,3.07,3.07,0,0,1,.56-.38,5.38,5.38,0,0,1,.89-.37A3.75,3.75,0,0,1,8.9,4a4.07,4.07,0,0,1,1.2.19,4,4,0,0,1,1.09.56,2.76,2.76,0,0,1,.78.92,2.82,2.82,0,0,1,.28,1.28A3,3,0,0,1,12.12,7.85Z"></path>\n      </g>\n      <path class="${Tn.ClassNames.Component}" fill="#fff" d="M9.92,14.52a.27.27,0,0,1,0,.12.41.41,0,0,1-.07.11.32.32,0,0,1-.23.09H7.7a.25.25,0,0,1-.12,0,.27.27,0,0,1-.1-.08.31.31,0,0,1-.09-.22V12.69a.32.32,0,0,1,.09-.23l.1-.07.12,0H9.59a.32.32,0,0,1,.23.09.61.61,0,0,1,.07.1.28.28,0,0,1,0,.13Zm2.2-7.17a3.1,3.1,0,0,1-.36.73,5.58,5.58,0,0,1-.49.6,6,6,0,0,1-.52.49,8,8,0,0,0-.65.63,1,1,0,0,0-.27.7v.22a.24.24,0,0,1,0,.12.17.17,0,0,1-.06.1.3.3,0,0,1-.1.07l-.12,0H7.79l-.12,0a.3.3,0,0,1-.1-.07.26.26,0,0,1-.07-.1.37.37,0,0,1,0-.12v-.35a2.42,2.42,0,0,1,.13-.84,2.55,2.55,0,0,1,.33-.66,3.38,3.38,0,0,1,.45-.55c.16-.15.33-.29.49-.42a7.73,7.73,0,0,0,.64-.64,1,1,0,0,0,.26-.67.77.77,0,0,0-.07-.34A.75.75,0,0,0,9.48,6a1.16,1.16,0,0,0-.72-.24,1.61,1.61,0,0,0-.49.07A3,3,0,0,0,7.86,6a1.41,1.41,0,0,0-.29.18l-.11.09a.5.5,0,0,1-.24.06A.31.31,0,0,1,7,6.19L6,5a.29.29,0,0,1,0-.4,1.36,1.36,0,0,1,.21-.2A3.07,3.07,0,0,1,6.81,4a5.38,5.38,0,0,1,.89-.37,3.75,3.75,0,0,1,1.2-.17,4.07,4.07,0,0,1,1.2.19,4,4,0,0,1,1.09.56,2.76,2.76,0,0,1,.78.92,2.82,2.82,0,0,1,.28,1.28A3,3,0,0,1,12.12,7.35Z"></path>\n    </g>\n  </g>`,Zn=`<g id="resign_black">\n    <path class="${Tn.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>\n    <path class="${Tn.ClassNames.Background}" fill="#312e2b" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>\n    <g>\n      <path d="M4.94,6.34H4.89a.63.63,0,0,0-.44.77l2.16,8.09a.63.63,0,0,0,.77.45l0,0a.62.62,0,0,0,.44-.76L5.7,6.78A.62.62,0,0,0,4.94,6.34Z"></path>\n      <path d="M12.33,4.48c-2,2.29-3.83-.41-6,1.52a.54.54,0,0,0-.15.25.48.48,0,0,0,0,.29c.22.89.87,3.3,1.12,4.15a.15.15,0,0,0,.26.07c1.92-2.65,4,.27,6.11-1.69a.46.46,0,0,0,.12-.44c-.21-.78-.8-3-1.1-4.05C12.62,4.44,12.42,4.36,12.33,4.48Z"></path>\n    </g>\n    <g>\n      <path class="${Tn.ClassNames.ComponentShadow}" fill="#fff" d="M4.94,5.74H4.89a.63.63,0,0,0-.44.77l2.16,8.09a.63.63,0,0,0,.77.45l0,0a.62.62,0,0,0,.44-.76L5.7,6.18A.62.62,0,0,0,4.94,5.74Z"></path>\n      <path class="${Tn.ClassNames.ComponentShadow}" fill="#fff" d="M12.33,3.88c-2,2.29-3.83-.41-6,1.52a.54.54,0,0,0-.15.25.48.48,0,0,0,0,.29c.22.89.87,3.3,1.12,4.15a.15.15,0,0,0,.26.07c1.92-2.65,4,.27,6.11-1.69A.46.46,0,0,0,13.76,8c-.21-.78-.8-3-1.1-4C12.62,3.84,12.42,3.76,12.33,3.88Z"></path>\n    </g>\n  </g>`,Wn=`<g id="resign_white">\n    <g>\n      <path class="${Tn.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>\n      <circle class="${Tn.ClassNames.Background}" fill="#f8f8f8" cx="9" cy="9" r="8.5"></circle>\n      <g>\n        <path d="M4.94,5.74H4.89a.63.63,0,0,0-.44.77l2.16,8.09a.63.63,0,0,0,.77.45l0,0a.62.62,0,0,0,.44-.76L5.7,6.18A.62.62,0,0,0,4.94,5.74Z"></path>\n        <path d="M12.33,3.88c-2,2.29-3.83-.41-6,1.52a.54.54,0,0,0-.15.25.48.48,0,0,0,0,.29c.22.89.87,3.3,1.12,4.15a.15.15,0,0,0,.26.07c1.92-2.65,4,.27,6.11-1.69A.46.46,0,0,0,13.76,8c-.21-.78-.8-3-1.1-4C12.62,3.84,12.42,3.76,12.33,3.88Z"></path>\n      </g>\n    </g>\n    <path class="${Tn.ClassNames.ComponentShadow}" fill="#e8e8e8" d="M9,1A8,8,0,1,1,1,9,8,8,0,0,1,9,1M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>\n  </g>`,Kn=`<g id="sharp">\n    <path class="${Tn.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>\n    <path class="${Tn.ClassNames.Background}" fill="#ad5b8c" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>\n    <g class="${Tn.ClassNames.ComponentShadow}" opacity="0.2">\n      <path d="M13.37,11.74,9.25,2.81a.22.22,0,0,0-.1-.11.27.27,0,0,0-.28,0,.18.18,0,0,0-.1.11L4.63,11.74a.26.26,0,0,0,0,.15.25.25,0,0,0,.08.14l2.67,2.29.07.09a.3.3,0,0,1,0,.1v1.08a.25.25,0,0,0,.08.18.24.24,0,0,0,.18.07h2.57a.26.26,0,0,0,.18-.07.25.25,0,0,0,.08-.18V14.51a.16.16,0,0,1,0-.1.47.47,0,0,1,.06-.09L13.31,12a.25.25,0,0,0,.08-.14A.26.26,0,0,0,13.37,11.74ZM9,5v8.73a.24.24,0,0,1-.38.17L5.91,11.76a.3.3,0,0,1-.09-.13.22.22,0,0,1,0-.16L8.84,5a.08.08,0,0,1,0,0h.06A.09.09,0,0,1,9,5S9,5,9,5Z"></path>\n    </g>\n    <path class="${Tn.ClassNames.Component}" fill="#fff" d="M13.37,11.24,9.25,2.31a.22.22,0,0,0-.1-.11.26.26,0,0,0-.28,0,.18.18,0,0,0-.1.11L4.63,11.24a.26.26,0,0,0,0,.15.25.25,0,0,0,.08.14l2.67,2.29.07.09a.3.3,0,0,1,0,.1v1.08a.25.25,0,0,0,.08.18.24.24,0,0,0,.18.07h2.57a.26.26,0,0,0,.18-.07.25.25,0,0,0,.08-.18V14a.16.16,0,0,1,0-.1.47.47,0,0,1,.06-.09l2.67-2.29a.25.25,0,0,0,.08-.14A.26.26,0,0,0,13.37,11.24ZM9,4.51v8.73a.24.24,0,0,1-.38.17L5.91,11.26a.3.3,0,0,1-.09-.13.22.22,0,0,1,0-.16l3-6.49a.08.08,0,0,1,0,0h.06a.09.09,0,0,1,.05,0S9,4.49,9,4.51Z"></path>\n  </g>`,Yn=`<g id="take_back">\n    <g>\n      <path class="${Tn.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>\n      <path class="${Tn.ClassNames.Background}" fill="#96af8b" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>\n    </g>\n    <g class="${Tn.ClassNames.ComponentShadow}" opacity="0.2">\n      <path d="M3.67,10.38a.25.25,0,0,1,.24-.31L5,9.93a.49.49,0,0,1,.2.05.26.26,0,0,1,.1.2,3.77,3.77,0,0,0,1.26,2.34,3.87,3.87,0,0,0,2.52.94,3.53,3.53,0,0,0,1.47-.31,3.72,3.72,0,0,0,1.22-.81,4.13,4.13,0,0,0,.82-1.2,3.74,3.74,0,0,0,0-3A3.94,3.94,0,0,0,11.77,7a3.72,3.72,0,0,0-1.22-.81,3.53,3.53,0,0,0-1.47-.31,3.43,3.43,0,0,0-1.23.22,3.07,3.07,0,0,0-1.09.6L7.85,7.75c.16.14.22.29.16.38s-.18.16-.4.16H4.45a.33.33,0,0,1-.19,0,1,1,0,0,1-.17-.1A.57.57,0,0,1,4,8a.46.46,0,0,1,0-.21V4.6a.4.4,0,0,1,.16-.38c.11,0,.26,0,.42.17L5.6,5.49a5.93,5.93,0,0,1,1.63-1,5.42,5.42,0,0,1,4,.11A5.17,5.17,0,0,1,12.93,5.8a5.48,5.48,0,0,1,1.16,1.73,5.17,5.17,0,0,1,.44,2.12,5,5,0,0,1-.44,2.12,5.54,5.54,0,0,1-2.88,2.91,5.77,5.77,0,0,1-2.13.42,5.39,5.39,0,0,1-1.94-.37,5.36,5.36,0,0,1-2.85-2.48A5.43,5.43,0,0,1,3.67,10.38Z"></path>\n    </g>\n    <path class="${Tn.ClassNames.Component}" fill="#fff" d="M3.67,9.88a.25.25,0,0,1,.24-.31L5,9.43a.49.49,0,0,1,.2.05.26.26,0,0,1,.1.2A3.77,3.77,0,0,0,6.56,12,3.87,3.87,0,0,0,9.08,13a3.53,3.53,0,0,0,1.47-.31,3.72,3.72,0,0,0,1.22-.81,4.13,4.13,0,0,0,.82-1.2,3.74,3.74,0,0,0,0-3,3.94,3.94,0,0,0-.82-1.2,3.72,3.72,0,0,0-1.22-.81,3.53,3.53,0,0,0-1.47-.31,3.43,3.43,0,0,0-1.23.22,3.07,3.07,0,0,0-1.09.6L7.85,7.25c.16.14.22.29.16.38s-.18.16-.4.16H4.45a.33.33,0,0,1-.19,0,1,1,0,0,1-.17-.1A.57.57,0,0,1,4,7.47a.46.46,0,0,1,0-.21V4.1a.4.4,0,0,1,.16-.38c.11-.05.26,0,.42.17L5.6,5A5.93,5.93,0,0,1,7.23,4a5.42,5.42,0,0,1,4,.11A5.17,5.17,0,0,1,12.93,5.3,5.48,5.48,0,0,1,14.09,7a5.17,5.17,0,0,1,.44,2.12,5,5,0,0,1-.44,2.12,5.54,5.54,0,0,1-2.88,2.91,5.77,5.77,0,0,1-2.13.42,5.39,5.39,0,0,1-1.94-.37,5.63,5.63,0,0,1-1.65-1,5.59,5.59,0,0,1-1.2-1.5A5.43,5.43,0,0,1,3.67,9.88Z"></path>\n  </g>`,Xn=`<g id="threat">\n    <path class="${Tn.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>\n    <path class="${Tn.ClassNames.Background}" fill="#ec6250" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>\n    <g class="${Tn.ClassNames.ComponentShadow}" opacity="0.2">\n      <path d="M15.12,9.65a6.14,6.14,0,0,1-3.78,5.65,6.19,6.19,0,0,1-3.53.35A6.15,6.15,0,0,1,3,10.84,6.11,6.11,0,0,1,9,3.53a6.15,6.15,0,0,1,6.12,6.12ZM5,9.65a4,4,0,0,0,.67,2.22,4.09,4.09,0,0,0,1.79,1.47,4,4,0,0,0,5.22-5.22A4,4,0,0,0,5,9.65Z"></path>\n      <path d="M6.75,9.65a2.24,2.24,0,0,0,.38,1.25,2.27,2.27,0,0,0,1,.83,2.22,2.22,0,0,0,1.3.12,2.22,2.22,0,0,0,1.76-1.76,2.22,2.22,0,0,0-.13-1.3,2.25,2.25,0,0,0-4.32.86Z"></path>\n    </g>\n    <g>\n      <path class="${Tn.ClassNames.Component}" fill="#fff" d="M15.12,9.15a6.14,6.14,0,0,1-3.78,5.65,6.19,6.19,0,0,1-3.53.35A6.15,6.15,0,0,1,3,10.34,6.11,6.11,0,0,1,9,3a6.15,6.15,0,0,1,6.12,6.12ZM5,9.15a4,4,0,0,0,.67,2.22,4.09,4.09,0,0,0,1.79,1.47,4,4,0,0,0,5.22-5.22A4,4,0,0,0,5,9.15Z"></path>\n      <path class="${Tn.ClassNames.Component}" fill="#fff" d="M6.75,9.15a2.24,2.24,0,0,0,.38,1.25,2.27,2.27,0,0,0,1,.83,2.22,2.22,0,0,0,1.3.12A2.22,2.22,0,0,0,11.2,9.59a2.22,2.22,0,0,0-.13-1.3,2.25,2.25,0,0,0-4.32.86Z"></path>\n    </g>\n  </g>`,Qn=`<path class="${Tn.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>\n<path class="${Tn.ClassNames.Background}" fill="#312e2b" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>\n<path d="M8.57,7.26,8.11,10l.89.86L9.89,10,9.45,7.26ZM9,12.86A3.35,3.35,0,1,1,12.36,9.5,3.34,3.34,0,0,1,9,12.86Zm.7-8.29V4.12h.82V2.79h-3V4.12H8.3v.45a5,5,0,1,0,1.4,0Z"></path>\n<path class="${Tn.ClassNames.ComponentShadow}" fill="#fff" d="M8.57,6.76,8.11,9.48l.89.86.89-.86L9.45,6.76ZM9,12.36A3.35,3.35,0,1,1,12.36,9,3.34,3.34,0,0,1,9,12.36Zm.7-8.29V3.62h.82V2.29h-3V3.62H8.3v.45a5,5,0,1,0,1.4,0Z"></path>`,Jn=`<path class="${Tn.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>\n<circle class="${Tn.ClassNames.Background}" fill="#f8f8f8" cx="9" cy="9" r="8.5"></circle>\n<path class="${Tn.ClassNames.ComponentShadow}" fill="#e8e8e8" d="M9,1A8,8,0,1,1,1,9,8,8,0,0,1,9,1M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>\n<path d="M8.57,6.76,8.11,9.48l.89.86.89-.86L9.45,6.76ZM9,12.36A3.35,3.35,0,1,1,12.36,9,3.34,3.34,0,0,1,9,12.36Zm.7-8.29V3.62h.82V2.29h-3V3.62H8.3v.45a5,5,0,1,0,1.4,0Z"></path>`,er=`\n  <path\n    class="${Tn.ClassNames.Shadow}"\n    d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"\n    opacity=".3"></path>\n  <path\n    class="${Tn.ClassNames.Background}"\n    d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"\n    fill="#8a8886"></path>\n  <path\n    d="M3.59,10.23a.25.25,0,0,1,.24-.31l1.08-.15a.49.49,0,0,1,.2.06.25.25,0,0,1,.11.2,3.58,3.58,0,0,0,.42,1.28,3.68,3.68,0,0,0,.84,1.06,3.76,3.76,0,0,0,1.16.69A3.9,3.9,0,0,0,9,13.31,3.58,3.58,0,0,0,10.47,13a3.94,3.94,0,0,0,1.22-.81A4.09,4.09,0,0,0,12.5,11a3.74,3.74,0,0,0,0-3,4.09,4.09,0,0,0-.81-1.2A3.94,3.94,0,0,0,10.47,6,3.65,3.65,0,0,0,9,5.69a3.61,3.61,0,0,0-1.23.21,3.23,3.23,0,0,0-1.09.6L7.77,7.59c.16.15.21.29.16.38s-.18.17-.4.17H4.37a.36.36,0,0,1-.2,0A.76.76,0,0,1,4,8a.52.52,0,0,1-.17-.38V4.45c0-.2.06-.33.17-.38s.25,0,.41.16L5.51,5.34a5.83,5.83,0,0,1,1.64-1A5.19,5.19,0,0,1,9,4.05a5.3,5.3,0,0,1,2.12.44,5,5,0,0,1,1.73,1.16A5.59,5.59,0,0,1,14,7.38a5.23,5.23,0,0,1,.44,2.12A5.16,5.16,0,0,1,14,11.62a5.59,5.59,0,0,1-1.16,1.73,5.32,5.32,0,0,1-1.73,1.18A5.64,5.64,0,0,1,9,15a5.23,5.23,0,0,1-1.94-.37A5.27,5.27,0,0,1,4.21,12.1,5.1,5.1,0,0,1,3.59,10.23Z"\n    class="${Tn.ClassNames.ComponentShadow}"\n    opacity=".3"></path>\n  <path\n    d="M3.59,9.73a.25.25,0,0,1,.24-.31l1.08-.15a.49.49,0,0,1,.2.06.25.25,0,0,1,.11.2,3.58,3.58,0,0,0,.42,1.28,3.68,3.68,0,0,0,.84,1.06,3.76,3.76,0,0,0,1.16.69A3.9,3.9,0,0,0,9,12.81a3.58,3.58,0,0,0,1.47-.31,3.94,3.94,0,0,0,1.22-.81,4.09,4.09,0,0,0,.81-1.2,3.74,3.74,0,0,0,0-3,4.09,4.09,0,0,0-.81-1.2,3.94,3.94,0,0,0-1.22-.81A3.65,3.65,0,0,0,9,5.19a3.61,3.61,0,0,0-1.23.21A3.23,3.23,0,0,0,6.68,6L7.77,7.09c.16.15.21.29.16.38s-.18.17-.4.17H4.37a.36.36,0,0,1-.2,0A.76.76,0,0,1,4,7.49a.52.52,0,0,1-.17-.38V4c0-.2.06-.33.17-.38s.25,0,.41.16L5.51,4.84a5.83,5.83,0,0,1,1.64-1A5.19,5.19,0,0,1,9,3.55,5.3,5.3,0,0,1,11.12,4a5,5,0,0,1,1.73,1.16A5.59,5.59,0,0,1,14,6.88,5.23,5.23,0,0,1,14.45,9,5.16,5.16,0,0,1,14,11.12a5.59,5.59,0,0,1-1.16,1.73A5.32,5.32,0,0,1,11.12,14,5.64,5.64,0,0,1,9,14.45a5.23,5.23,0,0,1-1.94-.37A5.27,5.27,0,0,1,4.21,11.6,5.1,5.1,0,0,1,3.59,9.73Z"\n    class="${Tn.ClassNames.Component}"\n    fill="#ffffff"></path>\n`,tr=`<g id="winner">\n    <g>\n      <path class="${Tn.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>\n      <path class="${Tn.ClassNames.Background}" fill="#dbac16" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>\n    </g>\n    <g class="${Tn.ClassNames.ComponentShadow}" opacity="0.2">\n      <path class="cls-4" d="M4.35,12.66,2.86,7.72a.37.37,0,0,1,0-.21A.35.35,0,0,1,3,7.34a.31.31,0,0,1,.2-.07.3.3,0,0,1,.21.05L6.27,9.15l.14,0h.14a.31.31,0,0,0,.13-.06A.48.48,0,0,0,6.77,9L8.69,5.54a.4.4,0,0,1,.13-.13.37.37,0,0,1,.18,0,.36.36,0,0,1,.31.18L11.22,9a.52.52,0,0,0,.1.11.31.31,0,0,0,.13.06h.14l.13,0,2.89-1.83a.3.3,0,0,1,.21-.05.31.31,0,0,1,.2.07.35.35,0,0,1,.12.17.37.37,0,0,1,0,.21l-1.49,4.94a.34.34,0,0,1-.13.18.31.31,0,0,1-.21.07H4.69a.31.31,0,0,1-.21-.07A.34.34,0,0,1,4.35,12.66Z"></path>\n    </g>\n    <path class="undefined" fill-rule="evenodd" d="M4.35,12.06,2.86,7.12a.37.37,0,0,1,0-.21A.35.35,0,0,1,3,6.74a.31.31,0,0,1,.2-.07.3.3,0,0,1,.21,0L6.27,8.55l.14,0h.14a.31.31,0,0,0,.13-.06.48.48,0,0,0,.09-.11L8.69,4.94a.4.4,0,0,1,.13-.13.37.37,0,0,1,.18,0,.36.36,0,0,1,.31.18l1.91,3.48a.52.52,0,0,0,.1.11.31.31,0,0,0,.13.06h.14l.13,0,2.89-1.83a.3.3,0,0,1,.21,0,.31.31,0,0,1,.2.07.35.35,0,0,1,.12.17.38.38,0,0,1,0,.21l-1.49,4.94a.34.34,0,0,1-.13.18.31.31,0,0,1-.21.07H4.69a.31.31,0,0,1-.21-.07A.34.34,0,0,1,4.35,12.06Z"></path>\n  </g>`,nr=`<g id="winner-white" fill="#fff">\n    <g>\n      <path class="${Tn.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>\n      <path class="${Tn.ClassNames.Background}" fill="#dbac16" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>\n    </g>\n    <g class="${Tn.ClassNames.ComponentShadow}" opacity="0.2">\n      <path class="cls-4" d="M4.35,12.66,2.86,7.72a.37.37,0,0,1,0-.21A.35.35,0,0,1,3,7.34a.31.31,0,0,1,.2-.07.3.3,0,0,1,.21.05L6.27,9.15l.14,0h.14a.31.31,0,0,0,.13-.06A.48.48,0,0,0,6.77,9L8.69,5.54a.4.4,0,0,1,.13-.13.37.37,0,0,1,.18,0,.36.36,0,0,1,.31.18L11.22,9a.52.52,0,0,0,.1.11.31.31,0,0,0,.13.06h.14l.13,0,2.89-1.83a.3.3,0,0,1,.21-.05.31.31,0,0,1,.2.07.35.35,0,0,1,.12.17.37.37,0,0,1,0,.21l-1.49,4.94a.34.34,0,0,1-.13.18.31.31,0,0,1-.21.07H4.69a.31.31,0,0,1-.21-.07A.34.34,0,0,1,4.35,12.66Z"></path>\n    </g>\n    <path class="undefined" fill-rule="evenodd" d="M4.35,12.06,2.86,7.12a.37.37,0,0,1,0-.21A.35.35,0,0,1,3,6.74a.31.31,0,0,1,.2-.07.3.3,0,0,1,.21,0L6.27,8.55l.14,0h.14a.31.31,0,0,0,.13-.06.48.48,0,0,0,.09-.11L8.69,4.94a.4.4,0,0,1,.13-.13.37.37,0,0,1,.18,0,.36.36,0,0,1,.31.18l1.91,3.48a.52.52,0,0,0,.1.11.31.31,0,0,0,.13.06h.14l.13,0,2.89-1.83a.3.3,0,0,1,.21,0,.31.31,0,0,1,.2.07.35.35,0,0,1,.12.17.38.38,0,0,1,0,.21l-1.49,4.94a.34.34,0,0,1-.13.18.31.31,0,0,1-.21.07H4.69a.31.31,0,0,1-.21-.07A.34.34,0,0,1,4.35,12.06Z"></path>\n  </g>`,rr=`<g id="interesting">\n    <path class="${Tn.ClassNames.Shadow}" d="m9 .5a9 9 0 1 0 9 9 9 9 0 0 0 -9-9z" opacity="0.3"></path>\n    <path  class="${Tn.ClassNames.Background}" d="m0 9a9 9 0 1 0 9-9 9 9 0 0 0 -9 9z" fill="#7979a1"></path>\n    <g  class="${Tn.ClassNames.Component}" opacity=".2">\n      <path d="m4.75 12.9a.28.28 0 0 1 0-.13.25.25 0 0 1 .08-.1.33.33 0 0 1 .23-.1h2 .12l.11.08a.36.36 0 0 1 .07.1.59.59 0 0 1 0 .13v1.9a.36.36 0 0 1 -.09.24.27.27 0 0 1 -.1.08h-.13-2-.12a.44.44 0 0 1 -.19-.19.28.28 0 0 1 0-.13zm-.06-8.8a.41.41 0 0 1 .08-.24.35.35 0 0 1 .23-.1h2.14.13l.11.08a.5.5 0 0 1 .09.24l-.15 6.77c0 .21-.15.31-.34.31h-1.78a.3.3 0 0 1 -.2-.06.3.3 0 0 1 -.1-.1.31.31 0 0 1 0-.13z"/><path d="m12.39 14.82a.25.25 0 0 1 0 .12.28.28 0 0 1 -.08.11l-.1.07h-.12-1.91a.27.27 0 0 1 -.13 0 .39.39 0 0 1 -.05-.12.35.35 0 0 1 -.08-.22v-1.78a.32.32 0 0 1 .09-.23l.1-.07h.12 1.89a.33.33 0 0 1 .23.09.61.61 0 0 1 .07.1.27.27 0 0 1 0 .13zm2.2-7.17a2.49 2.49 0 0 1 -.36.73 4.51 4.51 0 0 1 -.48.6 6 6 0 0 1 -.52.49q-.39.34-.66.63a1 1 0 0 0 -.27.7v.2a.22.22 0 0 1 0 .12.35.35 0 0 1 -.17.17.2.2 0 0 1 -.11 0h-1.75-.12a.23.23 0 0 1 -.1-.07.26.26 0 0 1 -.07-.1.22.22 0 0 1 .02-.12v-.35a2.41 2.41 0 0 1 .12-.84 2.91 2.91 0 0 1 .33-.66 3.38 3.38 0 0 1 .45-.55l.49-.42a6.55 6.55 0 0 0 .61-.62 1 1 0 0 0 .26-.67.66.66 0 0 0 -.08-.34.64.64 0 0 0 -.18-.27 1.18 1.18 0 0 0 -.77-.28 1.66 1.66 0 0 0 -.49.07 3 3 0 0 0 -.41.18 2.29 2.29 0 0 0 -.29.18l-.1.09a.53.53 0 0 1 -.24.06c-.12 0-.19-.07-.21-.13l-1-1.21a.29.29 0 0 1 0-.4 1.36 1.36 0 0 1 .21-.2 3 3 0 0 1 .55-.38 5.87 5.87 0 0 1 .9-.37 3.75 3.75 0 0 1 1.2-.17 4.12 4.12 0 0 1 1.2.19 4 4 0 0 1 1.09.56 2.73 2.73 0 0 1 .77.92 2.7 2.7 0 0 1 .29 1.28 2.72 2.72 0 0 1 -.11.98z"/></g><g fill="#fff"><path d="m4.75 12.4a.28.28 0 0 1 0-.13.25.25 0 0 1 .08-.1.33.33 0 0 1 .23-.1h2 .12l.11.08a.36.36 0 0 1 .07.1.59.59 0 0 1 0 .13v1.9a.36.36 0 0 1 -.09.24.27.27 0 0 1 -.1.08h-.13-2-.12a.44.44 0 0 1 -.19-.19.28.28 0 0 1 0-.13zm-.06-8.8a.41.41 0 0 1 .08-.24.35.35 0 0 1 .23-.1h2.14.13l.11.08a.5.5 0 0 1 .09.24l-.15 6.77c0 .21-.15.31-.34.31h-1.78a.3.3 0 0 1 -.2-.06.3.3 0 0 1 -.07-.1.31.31 0 0 1 0-.13z"/><path d="m12.39 14.32a.25.25 0 0 1 0 .12.28.28 0 0 1 -.08.11l-.1.07h-.12-1.91a.27.27 0 0 1 -.13 0 .39.39 0 0 1 -.1-.08.35.35 0 0 1 -.08-.22v-1.83a.32.32 0 0 1 .09-.23l.1-.07h.12 1.89a.33.33 0 0 1 .23.09.61.61 0 0 1 .07.1.27.27 0 0 1 0 .13zm2.2-7.17a2.49 2.49 0 0 1 -.36.73 4.51 4.51 0 0 1 -.48.6 6 6 0 0 1 -.52.49q-.39.34-.66.63a1 1 0 0 0 -.27.7v.22a.22.22 0 0 1 0 .12.35.35 0 0 1 -.17.17.2.2 0 0 1 -.11 0h-1.75-.12a.23.23 0 0 1 -.1-.07.26.26 0 0 1 -.07-.1.22.22 0 0 1 0-.12v-.35a2.41 2.41 0 0 1 .12-.84 2.91 2.91 0 0 1 .33-.66 3.38 3.38 0 0 1 .45-.55l.49-.42a6.55 6.55 0 0 0 .63-.64 1 1 0 0 0 .26-.67.66.66 0 0 0 -.08-.34.64.64 0 0 0 -.18-.27 1.18 1.18 0 0 0 -.73-.24 1.66 1.66 0 0 0 -.49.07 3 3 0 0 0 -.41.18 2.29 2.29 0 0 0 -.37.21l-.1.09a.53.53 0 0 1 -.24.06c-.12 0-.19-.07-.21-.13l-1-1.21a.29.29 0 0 1 0-.4 1.36 1.36 0 0 1 .21-.2 3 3 0 0 1 .55-.38 5.87 5.87 0 0 1 .9-.37 3.75 3.75 0 0 1 1.2-.17 4.12 4.12 0 0 1 1.2.19 4 4 0 0 1 1.16.52 2.73 2.73 0 0 1 .77.92 2.7 2.7 0 0 1 .29 1.28 2.72 2.72 0 0 1 -.14.95z"/>\n    </g>\n  </g>`,ir=`<g id="warning">\n    <g>\n      <g class="${Tn.ClassNames.Shadow}" opacity="0.3">\n        <path d="M.32,14.3,6.94,2.83a2.37,2.37,0,0,1,4.11,0L17.68,14.3a2.38,2.38,0,0,1-2.06,3.56H2.38A2.38,2.38,0,0,1,.32,14.3Z"></path>\n      </g>\n      <path class="${Tn.ClassNames.Background}" fill="#ec6250" d="M.32,13.8,6.94,2.33a2.37,2.37,0,0,1,4.11,0L17.68,13.8a2.38,2.38,0,0,1-2.06,3.56H2.38A2.38,2.38,0,0,1,.32,13.8Z"></path>\n    </g>\n    <g>\n      <g class="${Tn.ClassNames.ComponentShadow}" opacity="0.2">\n        <path d="M10.21,15.19a.5.5,0,0,1,0,.12.26.26,0,0,1-.07.1.31.31,0,0,1-.22.09H8.1a.25.25,0,0,1-.12,0,.31.31,0,0,1-.09-.07.35.35,0,0,1-.08-.22V13.45a.29.29,0,0,1,.09-.21A.22.22,0,0,1,8,13.17l.11,0H9.9a.31.31,0,0,1,.22.09.27.27,0,0,1,.09.21ZM10.1,11.6a.22.22,0,0,1,0,.11.23.23,0,0,1-.07.1.27.27,0,0,1-.21.07H8.18a.29.29,0,0,1-.31-.28L7.73,5.41a.35.35,0,0,1,.08-.22.23.23,0,0,1,.1-.07A.25.25,0,0,1,8,5.1H10a.32.32,0,0,1,.23.09.35.35,0,0,1,.08.22Z"></path>\n      </g>\n      <path class="${Tn.ClassNames.Component}" fill="#fff" d="M10.21,14.69a.5.5,0,0,1,0,.12.26.26,0,0,1-.07.1A.31.31,0,0,1,9.9,15H8.1A.25.25,0,0,1,8,15a.31.31,0,0,1-.09-.07.35.35,0,0,1-.08-.22V13a.29.29,0,0,1,.09-.21A.22.22,0,0,1,8,12.67l.11,0H9.9a.31.31,0,0,1,.22.09.27.27,0,0,1,.09.21ZM10.1,11.1a.22.22,0,0,1,0,.11.23.23,0,0,1-.07.1.27.27,0,0,1-.21.07H8.18a.29.29,0,0,1-.31-.28L7.73,4.91a.35.35,0,0,1,.08-.22.23.23,0,0,1,.1-.07A.25.25,0,0,1,8,4.6H10a.32.32,0,0,1,.23.09.35.35,0,0,1,.08.22Z"></path>\n    </g>\n  </g>`,ar=`<g id="equal">\n    <path class="${Tn.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"/>\n    <path class="${Tn.ClassNames.Background}" fill="#a88865" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"/>\n    <g class="${Tn.ClassNames.ComponentShadow}" opacity="0.4">\n      <path d="M5.31,8.36l-.15,0A.57.57,0,0,1,5,8.25.57.57,0,0,1,5,8.12a.4.4,0,0,1,0-.15V6a.38.38,0,0,1,.39-.39h7.38a.38.38,0,0,1,.39.39V8a.4.4,0,0,1,0,.15.57.57,0,0,1-.08.13.57.57,0,0,1-.13.08l-.15,0Z"/>\n      <path d="M5.31,13.36l-.15,0A.57.57,0,0,1,5,13.25.57.57,0,0,1,5,13.12a.4.4,0,0,1,0-.15V11a.38.38,0,0,1,.39-.39h7.38a.38.38,0,0,1,.39.39V13a.4.4,0,0,1,0,.15.33.33,0,0,1-.21.21l-.15,0Z"/>\n    </g>\n    <g>\n      <path class="${Tn.ClassNames.Component}" fill="#f1f2f2" d="M5.31,7.86l-.15,0A.57.57,0,0,1,5,7.75.57.57,0,0,1,5,7.62a.4.4,0,0,1,0-.15V5.53a.38.38,0,0,1,.39-.39h7.38a.38.38,0,0,1,.39.39V7.47a.4.4,0,0,1,0,.15.57.57,0,0,1-.08.13.57.57,0,0,1-.13.08l-.15,0Z"/>\n      <path class="${Tn.ClassNames.Component}" fill="#f1f2f2" d="M5.31,12.86l-.15,0A.57.57,0,0,1,5,12.75.57.57,0,0,1,5,12.62a.4.4,0,0,1,0-.15V10.53a.38.38,0,0,1,.39-.39h7.38a.38.38,0,0,1,.39.39v1.94a.4.4,0,0,1,0,.15.33.33,0,0,1-.21.21l-.15,0Z"/>\n    </g>\n  </g>`,sr={[et.Alternative]:Sn,[et.BestMove]:Cn,[et.Blunder]:xn,[et.Book]:En,[et.Brilliant]:Pn,[et.CheckmateBlack]:An,[et.CheckmateWhite]:On,[et.Correct]:Mn,[et.Critical]:zn,[et.DrawBlack]:In,[et.DrawWhite]:Ln,[et.Excellent]:Rn,[et.FastWin]:Nn,[et.Forced]:$n,[et.FreePiece]:Dn,[et.Gamechanger]:jn,[et.Good]:Un,[et.GreatFind]:Bn,[et.Inaccuracy]:Fn,[et.Incorrect]:Hn,[et.Mate]:qn,[et.MissedWin]:Vn,[et.Mistake]:Gn,[et.ResignBlack]:Zn,[et.ResignWhite]:Wn,[et.Sharp]:Kn,[et.Takeback]:Yn,[et.Threat]:Xn,[et.TimeoutBlack]:Qn,[et.TimeoutWhite]:Jn,[et.Undo]:er,[et.Winner]:tr,[et.WinnerWhite]:nr,[et.Interesting]:rr,[et.Warning]:ir,[et.Equal]:ar};function makeSvgIcon({className:i="",path:s="",size:_="24",viewBox:T="0 0 18 19"}){return`\n    <svg xmlns="http://www.w3.org/2000/svg" class="${i}" width="${_}" height="${_}" viewBox="${T}">\n      ${s}\n    </svg>\n  `}function tuckMarking({square:i,isFlipped:s,effectEl:_}){const T=getTuckPosition(i,s);T.top&&_.classList.add("tuck-top"),T.right&&_.classList.add("tuck-right")}function getTuckPosition(i,s){const _={top:s?"1":"8",right:s?"a":"h"};return{top:i.includes(_.top),right:i.includes(_.right)}}function createEffectsMethods({board:i,el:s,options:_}){const T=document.createComment("/Effects");i.addToDom({el:T,insertAfter:!0,type:hn.HoverSquare});const S=new Map;return{addEffects:function addEffects(C){C.forEach((C=>{const{data:{square:P,type:O},key:M}=C,R=document.createElement("div");R.classList.add("effect"),R.innerHTML=makeSvgIcon({path:sr[O],size:"100%"}),setPositionBySquare({el:R,square:P}),_.test&&setTestData(R,{[mn.Element]:gn.Effect,[mn.Square]:P,[mn.Type]:O}),isEdgeSquare(P)&&tuckMarking({square:P,isFlipped:i.el.classList.contains("flipped"),effectEl:R});const D=S.get(M);D&&i.el.removeChild(D),s.insertBefore(R,T),S.set(M,R)}))},getEffectElements:function getEffectElements(){return S},removeEffects:function removeEffects(s){s.forEach((s=>{const{key:_}=s,T=S.get(_);T&&(i.el.removeChild(T),S.delete(_))}))}}}function createEffectsPlugin(){return{create:i=>function init$1(i){const{api:s,options:_,renderer:T}=i,S=s.markings;null==T||T.extendRenderer(createEffectsMethods);const C=_.allowMarkings?S.getAllWhere({types:[Je]}):[];null==T||T.addEffects(C,i)}(i),match:[{condition:isMark(Je),handler:function markEffect(i,s){const{renderer:_}=s,T=i.data.filter(isType(Je));null==_||_.addEffects(T,s)}},{condition:isUnmark(Je),handler:function unmarkEffect(i,s){const{renderer:_}=s,T=i.data.filter(isType(Je));null==_||_.removeEffects(T,s)}},{condition:is$1(C.InstanceEvents.RendererSet),handler:function init2(i,s){const{api:_,options:T,renderer:S}=s,C=_.markings;null==S||S.extendRenderer(createEffectsMethods);const P=T.allowMarkings?C.getAllWhere({types:[Je]}):[];null==S||S.addEffects(P,s)}}],name:Xe.Plugin.Name}}function createFadeSetupPlugin(){return{match:[{condition:isOneOf([C.InstanceEvents.RendererSet,C.APIEvents.Load]),handler:function fadeSetup(i,s){var _;null==(_=null==s?void 0:s.renderer)||_.fadeSetup(s)}}],name:nt.Plugin.Name}}var lr,cr,ur,dr,hr,pr;function createFlipBoardPlugin(i=lr.FlipBoardModifierKey){let s;return{match:[{condition:isOneOf([C.InstanceEvents.Create,C.InstanceEvents.RendererSet,C.OptionsEvents.Update]),handler:function runFlipBoardPlugin(i,_){const{options:T,renderer:S,state:P}=_;if(!S)return;if(T.flipped!==s){S.flipBoard(T.flipped,_);const i=P.get(C.State.PromotionMove);i&&S.openPromotionWindow(i,_)}s=T.flipped}},{condition:is$1(ur.Events.Keydown),handler:function onKeydown(s,_){const{api:T,options:S,queue:C}=_;if(s.data!==i)return;C.add(T.setOptions,{flipped:!S.flipped})}}],name:lr.Plugin.Name}}function excludeIntersection(i,s,{isDuplicateWhen:_}={}){const T=new Set(i);return s.forEach((s=>{if(function isObject(i){return"[object Object]"===Object.prototype.toString.call(i)}(s)&&_){const S=i.find((i=>_(i,s)));S&&T.delete(S)}else T.delete(s)})),[...T]}function highlightsHaveSameKeyAndColor(i,s){return i.key===s.key&&i.data.color===s.data.color}function createHighlightsAPI(i){return function createAPI2(){return function createHighlights(i){const s=new Set(i),_=new Map;return __spreadProps(__spreadValues({},s),{addModule:function addModule(i){return s.add(i)},getModules:getAllModulesAsArray,removeModule:function removeModule(i){return s.delete(i)},getAll:getAll,update:function update5(...i){const s=getAll();_.clear();const T=Array.from(getAllModulesAsArray().reduce(((s,_)=>(_(...i).forEach((i=>{s.set(i.data.square,i)})),s)),new Map).values());T.forEach((i=>_.set(i.data.square,i)));return{toAdd:excludeIntersection(T,s,{isDuplicateWhen:highlightsHaveSameKeyAndColor}),toRemove:excludeIntersection(s,T,{isDuplicateWhen:highlightsHaveSameKeyAndColor})}}});function getAll(){return Array.from(_.values())}function getAllModulesAsArray(){return Array.from(s)}}(i)}}function isNot(i){return function isType2(s){return i!==s.type}}function createHighlightsPlugin(i){return{api:createHighlightsAPI(i),destroy:function destroy10(i){const{api:s,renderer:_}=i,T=s.highlights;null==_||_.removeHighlights(T.getAll(),i)},match:[{condition:isNot(C.UserEvents.Pointermove),handler:function updateHighlights(i,s){const{api:_,renderer:T}=s;if(!T)return;const S=_.highlights,{toAdd:C,toRemove:P}=S.update(i,s);T.removeHighlights(P,s),T.addHighlights(C,s)}}],name:ne.Plugin.Name}}function isNotOneOf(i){const s=new Set(Array.isArray(i)?i:Object.values(i));return function isType2(i){return!s.has(i.type)}}function pipeConditions(...i){return function checkMultipleConditions(s,_){return i.every((i=>i(s,_)))}}function createHoverSquarePlugin(){const i=(0,ie.c)({data:{square:void 0},initialState:"hidden",states:{hidden:{dragPiece:i=>({data:{square:i},nextState:"showing"})},showing:{dragPiece:i=>({data:{square:i},nextState:"showing"}),dropPiece:()=>({nextState:"hidden"}),setOptionToFalse:()=>({nextState:"hidden"})}}});return{match:[{condition:pipeConditions((s=Ht.BooleanOptions.HoverSquareOutline,function optionValueIsTruthy(i,_){var T,S;return Boolean(null==(S=null==(T=_.api)?void 0:T.getOptions)?void 0:S.call(T)[s])}),isNotOneOf([C.APIEvents.ClearMarkings,Ot.Events.Tick])),handler:function updateHoverSquare(s,_){const{options:T,renderer:S,state:P}=_,O=!0!==P.get(C.State.HideHoverSquare)&&P.get(C.State.MachineState)!==cn.States.PromotionAreaShowing&&P.get(C.State.DraggingPiece),M=s.data&&(s.data.square||s.data.squareInsideBoard||i.getData().square||O);let R=!1;R=T.highlightMoves?O?i.transition("dragPiece",M):i.transition("dropPiece"):i.transition("setOptionToFalse");if(!R||!S)return;"hidden"===i.getCurrentState()?S.hideHoverSquare(_):S.showHoverSquare(i.getData().square,_)}}],name:lt.Plugin.Name};var s}function convertMarkingFromJCE(i){var s;const{color:_,data:T,type:S}=i,C=function stringArrayToObject(i){return i.reduce(((i,s,_,T)=>(_%2==0||(i[T[_-1]]=s),i)),{})}(T);Object.keys(C).forEach((i=>{C[i]=decodeURIComponent(C[i])}));const P=C,{persistent:O}=P,M=((i,s)=>{var _={};for(var T in i)ce.call(i,T)&&s.indexOf(T)<0&&(_[T]=i[T]);if(null!=i&&le)for(var T of le(i))s.indexOf(T)<0&&ue.call(i,T)&&(_[T]=i[T]);return _})(P,["persistent"]),R={key:fromJCEKey(i.key,i.type),node:!0,data:__spreadProps(__spreadValues({},M),{keyPressed:null!=(s=M.keyPressed)?s:fromJCEColor(_)}),type:S};return void 0!==O&&(R.persistent="true"===O),R}function fromJCEKey(i,s){return`${s}|${i}`}function fromJCEColor(i){switch(i){case hr.Alt:return jt.Alt;case hr.Default:return jt.None;case hr.Shift:return jt.Shift;case hr.Ctrl:return jt.Ctrl;default:return}}function convertMarkingToJCE(i){const{data:s,persistent:_}=i,T=void 0!==_?__spreadProps(__spreadValues({},s),{persistent:_}):s,S=function toJCEColor(i){switch(i){case jt.Alt:return hr.Alt;case jt.None:return hr.Default;case jt.Shift:return hr.Shift;case jt.Ctrl:return hr.Ctrl;default:return hr.Custom}}(s.keyPressed),C=S===hr.Custom?T:function omit(i,...s){const _=__spreadValues({},i);return s.forEach((i=>{delete _[i]})),_}(T,"color");return Object.keys(C).forEach((i=>{C[i]=encodeURIComponent(C[i])})),{color:S!==hr.Custom?S:void 0,data:(P=C,Object.entries(P).reduce(((i,[s,_])=>(void 0===_||i.push(s,_.toString()),i)),[])),key:toJCEKey(i),type:i.type};var P}function toJCEKey(i){const{data:{from:s,square:_,to:T},key:S}=i;return _||(s&&T?`${s}${T}`:S)}function getMarkingsFromJCE(i,s){const _=[],T=null!=s?s:i.markings();return Object.values(T).forEach((i=>{Object.values(i).forEach((i=>{_.push(convertMarkingFromJCE(i))}))})),_}function JCENodeHasMarking(i,s,_){const{key:T}=s,S=getMarkingsFromJCE(i,_);return Boolean(S.find((i=>i.key===T)))}(cr=lr||(lr={})).FlipBoardModifierKey="x",function(i){i.Name="flip-board"}(cr.Plugin||(cr.Plugin={})),function(i){i.Name="keys"}((dr=ur||(ur={})).Plugin||(dr.Plugin={})),function(i){i.Keydown="Keydown",i.Keyup="Keyup"}(dr.Events||(dr.Events={})),(pr=hr||(hr={})).Alt="a",pr.Ctrl="l",pr.Custom="c",pr.Default="d",pr.Shift="s";const mr=[C.APIEvents.CreateGame,C.APIEvents.DeletePosition,C.APIEvents.Load,C.APIEvents.Move,C.APIEvents.MoveBackward,C.APIEvents.MoveForward,C.APIEvents.MoveVariation,C.APIEvents.PromoteVariation,C.APIEvents.SelectLineEnd,C.APIEvents.SelectLineStart,C.APIEvents.SelectNode,C.APIEvents.Reload,C.APIEvents.ResetToMainLine,C.APIEvents.Undo];function removeFromJCENode(i,s){const _=convertMarkingToJCE(s);i.mark(_,!0)}function createEventHandlers$3(){return[{condition:isOneOf(mr),handler:function handlePositionChange(i,s){const{api:_,queue:T}=s;if(0===i.data.plyDiff&&0===i.data.lineDiff)return;T.add((function refreshMarkings(){const{game:i}=_.getContext(),s=_.markings,T=getMarkingsFromJCE(i);s.removeAllWhere({node:!0}),T.length&&s.addMany(T)}))}},{condition:is$1(C.APIEvents.Mark),handler:function handleMark(i,s){const{api:_}=s,{data:T}=i,{game:S}=_.getContext();(Array.isArray(T)?T:[T]).forEach((i=>{i.node&&!JCENodeHasMarking(S,i)&&function addToJCENode(i,s){const _=convertMarkingToJCE(s);i.mark(_)}(S,i)}))}},{condition:is$1(C.APIEvents.Unmark),handler:function handleUnmark(i,s){const{api:_}=s,{data:T}=i,{game:S}=_.getContext();(Array.isArray(T)?T:[T]).forEach((i=>{i.node&&JCENodeHasMarking(S,i)&&removeFromJCENode(S,i)}))}}]}function intersection(...i){if(1===i.length)return i[0];const s=new Set;for(const _ of i)for(const T of _)i.every((i=>i.has(T)))&&s.add(T);return s}function createTaggedMap({batchCallbacks:i=!0,onEntryAdded:s,onEntryRemoved:_,primaryKey:T="id"}={primaryKey:"id"}){const S=new Map,C=new Map,{flush:P,isBatching:O,stack:M,startBatching:R}=function createStacks(i){let s=!1;const _=new Map;return Object.entries(i).forEach((([i,s])=>{s&&_.set(i,{callback:s,entries:new Set})})),{flush:function flushEntries(){_.forEach((i=>{var _;const T=Array.from(i.entries.values());T.length&&(null==(_=i.callback)||_.call(i,T),i.entries.clear()),s=!1}))},isBatching:()=>s,stack:function stackEntry(i){return function entryModified(s){var T;null==(T=_.get(i))||T.entries.add(s)}},startBatching:function startBatchingEntries(){s=!0}}}({added:s,removed:_});function entryAddedCallback(_){return i&&O()?M("added")(_):null==s?void 0:s(_)}function entryRemovedCallback(s){return i&&O()?M("removed")(s):null==_?void 0:_(s)}return{addOne:addOne,addMany:batch((function addMany(i,s){return i.map(((i,_)=>addOne(i,null==s?void 0:s[_])))})),batch:batch,getAll:function getAll(){return Array.from(S.values())},getManyByTags:function getManyByTags(i,s={}){return getMatchingKeys(i,s).map((i=>S.get(i))).filter((i=>void 0!==i))},getMatchingKeys:getMatchingKeys,getMap:function getMap(){return S},getMany:function getMany(i){return i.map((i=>S.get(i))).filter((i=>void 0!==i))},getOne:function getOne(i){return S.get(i)},removeAll:batch((function removeAll(){for(const[i,s]of S.entries())null==entryRemovedCallback||entryRemovedCallback(s);return S.clear(),C.clear(),!0})),removeMany:batch((function removeMany(i){return i.every(removeOne)})),removeManyByTags:batch((function removeManyByTags(i,s={}){return getMatchingKeys(i,s).every((i=>removeOne(i)))})),removeOne:removeOne};function batch(i){return(...s)=>{R();const _=i(...s);return P(),_}}function addOne(i,s){const _=i[T],P=S.get(_);return P&&(S.delete(_),null==entryRemovedCallback||entryRemovedCallback(P)),null==s||s.forEach((i=>{var s;C.get(i)||C.set(i,new Set),null==(s=C.get(i))||s.add(_)})),S.set(_,i),null==entryAddedCallback||entryAddedCallback(i),_}function getMatchingKeys(i,s={}){const{matchAll:_}=s,T=i.map((i=>C.get(i))).filter((i=>void 0!==i));let S;return S=_?Array.from(intersection(...T)):Array.from(function union(...i){const s=new Set;for(const _ of i)for(const i of _)s.add(i);return s}(...T)),S}function removeOne(i){var s;const _=S.get(i);_&&(S.delete(i),null==entryRemovedCallback||entryRemovedCallback(_));const T=C.entries();for(const[S,P]of T)P.has(i)&&P.delete(i),0===(null==(s=C.get(S))?void 0:s.size)&&C.delete(S);return!0}}function isBoardSquare(i){return/^([a-h][1-8])$/.test(i)}function toArray(i){return Array.isArray(i)?i:[i]}function createMarkings({generateKey:i=generatePrimaryKey,onMarkingAdded:s,onMarkingRemoved:_}={}){const T=createTaggedMap({batchCallbacks:!0,onEntryAdded:s,onEntryRemoved:_,primaryKey:"key"});return{addOne:addOne,addMany:function addMany(i){return function addManyWithoutBatching(i){return i.map(addOne)}(i)},getMany:T.getMany,getAll:T.getAll,getAllWhere:function getAllWhere(i={}){return getKeysWhere(i).map((i=>T.getMap().get(i))).filter(Boolean)},getOne:T.getOne,removeAll:T.removeAll,removeAllWhere:function removeAllWhere(i={}){var s;0===(null==(s=i.types)?void 0:s.length)&&(i.types=void 0);return T.removeMany(getKeysWhere(i))},removeOne:T.removeOne,removeMany:T.removeMany,toggleMany:function toggleMany(i){return i.map(toggleOne)},toggleOne:toggleOne};function addOne(i){if(!function markingHasValidSquareOrFromTo(i){const{from:s,square:_,to:T}=i.data,S=_?[_]:[s,T];for(const C of S)if(!isBoardSquare(C))return!1;return!0}(i))return null;const s=function getMarkingTags(i){const{node:s,persistent:_,tags:T=[],type:S}=i;return[s?"node":"board",_?"persistent":"temporary",...T,S]}(i);return T.addOne(withKey(i),s)}function getKeysWhere(i={}){const{node:s,persistent:_,tags:S,types:C}=i;let P,O;void 0!==s&&(P=s?"node":"board"),void 0!==_&&(O=_?"persistent":"temporary");const M=[P,O,S,C].filter((i=>void 0!==i));if(!M.length)return Array.from(T.getMap().keys());const R=M.map(toArray).map((i=>new Set(T.getMatchingKeys(i))));return Array.from(intersection(...R))}function toggleOne(i){const s=withKey(i),_=T.getOne(s.key);return _&&function objectsAreShallowEqual(i,s){const _={a:Object.getOwnPropertyNames(i),b:Object.getOwnPropertyNames(s)};return _.a.length===_.b.length&&_.a.every((_=>i[_]===s[_]))}(_.data,s.data)?T.removeOne(s.key):addOne(s)}function withKey(s){return __spreadProps(__spreadValues({},s),{key:s.key||i(s)})}}function generatePrimaryKey(i){const{data:{from:s,square:_,to:T},type:S}=i;if(!(_||s&&T))throw new Error('Markings that do not have a "square" property must provide a "from" and "to"');return`${S}|${_||`${s}${T}`}`}function createMarkingsAPI(i){const{respond:s}=i;return createMarkings({onMarkingAdded:function onMarkingAdded(i){s(C.APIEvents.Mark,toArray(i))},onMarkingRemoved:function onMarkingRemoved(i){s(C.APIEvents.Unmark,toArray(i))}})}var fr,gr,vr,br;function createMarkingsPlugin(){return{api:createMarkingsAPI,match:createEventHandlers$3(),name:fr.Plugin.Name}}function createMoveHintsPlugin(){let i=[];return{match:[{condition:isNotOneOf([C.UserEvents.Pointermove,Ot.Events.Tick]),handler:updateMoveHints},{condition:is$1(C.InstanceEvents.RendererSet),handler:function resetMoveHints(s,_){i=[],updateMoveHints(s,_)}}],name:ut.Plugin.Name};function updateMoveHints(s,_){const{renderer:T}=_;T&&(i=function updateHints({addMoveHints:i,addCaptureHints:s,context:_,currentHints:T,getNextHints:S,removeHints:P}){let O=T;const{api:M,mode:R,options:D,state:j}=_;if(!D||!D.highlightLegalMoves||!R.isAllowedToMove())return P([...T],_),O.length=0,O;const $=j.get(C.State.SelectedPiece)||j.get(C.State.DraggingPiece);if(!$)return O.length&&(P(O,_),O=[]),O;const U=j.get(C.State.MachineState)===cn.States.PromotionAreaShowing?[]:M.getLegalMovesForSquare($),V=O.filter((i=>!U.includes(i)));P(V,_);const Z=S(U),Y=[],X=[],Q=M.getPieces().keys();return Z.forEach((i=>{s&&Q.includes(i)?X.push(i):Y.push(i)})),Y.length&&i(Y,_),X.length&&(null==s||s(X,_)),O.filter((i=>!V.includes(i))).concat(Z)}({addMoveHints:T.addMoveHints,addCaptureHints:T.addCaptureHints,context:_,currentHints:i,getNextHints:s=>s.filter((s=>!i.includes(s))),removeHints:T.removeHints}))}}function createPiecesPlugin(){return{match:[{condition:isOneOf(C.APIEvents),handler:function updatePieces(i,s){const{renderer:_}=s;if(!_)return;if(i.type===C.APIEvents.IllegalMove)return void _.illegalMove(!1,s);const{plyDiff:T,move:S,pieces:P}=i.data;if(P)return void _.loadPieces({pieces:P},s);if(S&&-1===T)return void("--"!==S.san&&_.undoMove(S,s));S&&_.makeMove(S,s)}},{condition:is$1(C.InstanceEvents.RendererSet),handler:function reloadPieces(i,s){const{api:_,renderer:T}=s;null==T||T.loadPieces({pieces:_.getPieces()},s)}}],name:ht.Plugin.Name}}function createRendererErrorCatcherPlugin(){let i={};return{create:create3,destroy:function destroy10(s){const{renderer:_}=s;if(!_)return;Object.keys(i).forEach((s=>{_[s]=i[s]})),i={}},match:[{condition:is$1(C.InstanceEvents.RendererSet),handler:(i,s)=>create3(s)}],name:vr.Plugin.Name};function create3(s){const{options:_,renderer:T}=s;T&&!_.test&&["dragPiece","dropPiece","makeMove","removePiece","undoMove"].forEach((_=>{const S=function reloadOnError({context:i,method:s}){return function wrappedRendererMethod(..._){try{return s(..._)}catch(T){const{api:s,renderer:_}=i;console.error("Board position reloaded due to game and renderer state desynchronisation:\n",T),s.logger.log({code:vr.ErrorCodes.StateDesynchronisation,data:T,level:yn.Levels.Error}),null==_||_.loadPieces({pieces:s.getPieces(),reloadAll:!0},i)}}}({context:s,method:T[_]});i[_]=T[_],T[_]=S}))}}(function(i){i.Name="markings"})((gr=fr||(fr={})).Plugin||(gr.Plugin={})),((br=vr||(vr={})).ErrorCodes||(br.ErrorCodes={})).StateDesynchronisation="StateDesynchronisation",function(i){i.Name="rendererErrorCatcher"}(br.Plugin||(br.Plugin={}));const yr={enPassant:"https://www.chess.com/article/view/how-to-capture-en-passant",soundsDefault:"https://www.chess.com/bundles/web/sounds",soundsTheme:"https://images.chesscomfiles.com/chess-themes/sounds/",webglAssetPaths:"__CHESSCOM_WEBGL_ASSET_PATHS__",webglDataUrl:"https://www.chess.com/bundles/web/images/webgl_data",webglDataUrlDev:"static/webgl_data"};function getThemeUrls(i,s){return["webm","ogg","mp3","wav"].map((_=>function getThemeUrl({theme:i="default",type:s,format:_}){return`${yr.soundsTheme}_${_.toUpperCase()}_/${i}/${s}.${_}`}({format:_,theme:i,type:s})))}const _r=[kt.BoardSounds.GameStart,kt.BoardSounds.GameEnd,kt.BoardSounds.Capture,kt.BoardSounds.Castle,kt.BoardSounds.Premove,kt.BoardSounds.MoveSelf,kt.BoardSounds.MoveCheck,kt.BoardSounds.MoveOpponent,kt.BoardSounds.Promote,kt.BoardSounds.Notify,kt.BoardSounds.TenSeconds,kt.BoardSounds.Illegal];var wr,kr,Tr,Sr;function isCapture(i){return void 0!==i.flags&&(Boolean(1==(1&i.flags))||i.flags===wr.Move.Flags.EPCapture)}function isCastle(i){return i.flags===wr.Move.Flags.AnyCastle||i.flags===wr.Move.Flags.KingsideCastle||i.flags===wr.Move.Flags.QueensideCastle}function isPromotion(i){return i.flags===wr.Move.Flags.Promotion||i.flags===wr.Move.Flags.CapturePromotion}function createSoundsPlugin(i){let s=i;return{api:()=>({getSoundsInstance:()=>s}),match:[{condition:isNot(C.UserEvents.Pointermove),handler:function runPlaySoundPlugin(i,_){var T;if(!s)return;const{api:S,options:P,state:O}=_;if(i.type===C.OptionsEvents.Update&&P.soundTheme!==s.getTheme())return s.destroy(),void s.load({theme:P.soundTheme});if(i.type===C.SoundEvents.Play)return s.play(i.data.sound),void O.set({soundPlayed:i.data.sound});if(!P.playSounds||!(null==(T=i.data)?void 0:T.plyDiff))return;let M=S.getSelectedNode();i.type===C.APIEvents.MoveBackward&&(M=i.data.move);if(!M)return;const R=S.getPlayingAs(),D=Boolean(R&&R!==M.color),j=function getSoundType(i,s){if(!i||!i.san)return null;let _;return _=function isCheck(i){return!(!i||!i.san)&&["+","#"].includes(i.san.slice(-1))}(i)?kt.BoardSounds.MoveCheck:i.isPremove?kt.BoardSounds.Premove:isPromotion(i)?kt.BoardSounds.Promote:isCapture(i)?kt.BoardSounds.Capture:isCastle(i)?kt.BoardSounds.Castle:s?kt.BoardSounds.MoveOpponent:kt.BoardSounds.MoveSelf,_}(M,D);j&&(s.play(j),O.set({soundPlayed:j}))}}],name:kt.Plugin.Name,create:function create3(i){s||(s=function createSounds(i){let s,_=_r,T="default";i&&(_=i.codes,T=i.theme);let S=T;return load3({codes:_,theme:T}),{destroy:function destroy10(){Object.keys(s).forEach((i=>{s[i].unload()}))},getSounds:function getSounds(){return s},getTheme:getTheme2,load:load3,loadExtra:function loadExtra(i){const _=i.codes.reduce(((s,_)=>(s[_]=(0,ie.l)(function getExtraSoundUrls(i,s){return["webm","ogg","mp3","wav"].map((_=>`${i}/${_}/${s}.${_}`))}(i.baseURL,_),void 0,!0),s)),{});Object.keys(_).forEach((i=>{var T;null==(T=s[i])||T.unload(),s[i]=_[i]})),(0,ie.e)()},play:function play(i){const _=s[i],T=getTheme2();if(!_)return T;try{return(0,ie.p)(_),T}catch(S){return T}}};function getTheme2(){return S}function load3(i){S=i.theme,s=(i.codes||_r).reduce(((i,s)=>(i[s]=(0,ie.l)(getThemeUrls(S,s),kt.maxTagsPerSound,!0),i)),{}),(0,ie.e)()}}({theme:i.options.soundTheme}))}}}function createTimeControlPlugin(i){return{create:function create3(s){const{api:_}=s;i&&_.timeControl.set(i)},name:Et.Plugin.Name}}!function(i){var s;let _;var T,S,C,P,O,M,R,D,j,$,U,V,Z,Y,X,Q,ee;(s=i.ColorsAsNumbers||(i.ColorsAsNumbers={}))[s.White=1]="White",s[s.Black=2]="Black",(T=_=i.Variants||(i.Variants={})).Bughouse="bughouse",T.Chess="chess",T.Chess960="chess960",T.Crazyhouse="crazyhouse",T.KingOfTheHill="kingofthehill",T.ThreeCheck="threecheck",i.JCEVariantTypes={[_.Bughouse]:"Bughouse",[_.Chess]:"Chess",[_.Chess960]:"Chess960",[_.Crazyhouse]:"Crazyhouse",[_.ThreeCheck]:"3-check",[_.KingOfTheHill]:"King of the Hill"},(S=i.ColorsAsLetters||(i.ColorsAsLetters={})).White="w",S.Black="b",(C=i.ColorsAsWords||(i.ColorsAsWords={})).White="white",C.Black="black",i.DefaultTimeControl=5,(P=i.EmptyPGNHeaders||(i.EmptyPGNHeaders={})).Black="?",P.Event="?",P.Date="????.??.??",P.Site="?",P.Value="?",P.Result="*",P.Round="?",P.White="?",O=i.Move||(i.Move={}),(M=O.Flags||(O.Flags={}))[M.Capture=1]="Capture",M[M.BigPawn=2]="BigPawn",M[M.EPCapture=4]="EPCapture",M[M.AnyCapture=5]="AnyCapture",M[M.Promotion=8]="Promotion",M[M.CapturePromotion=9]="CapturePromotion",M[M.KingsideCastle=16]="KingsideCastle",M[M.QueensideCastle=32]="QueensideCastle",M[M.AnyCastle=48]="AnyCastle",M[M.Drop=64]="Drop",M[M.DropOrCapture=69]="DropOrCapture",M[M.DropOrPromote=72]="DropOrPromote",function(i){i[i.Capture=0]="Capture",i[i.Castle=1]="Castle",i[i.Check=2]="Check",i[i.Checkmate=3]="Checkmate",i[i.Normal=4]="Normal",i[i.Premove=5]="Premove",i[i.Promotion=6]="Promotion"}(O.Types||(O.Types={})),R=i.Node||(i.Node={}),D=R.Marking||(R.Marking={}),function(i){!function(i){i.Arrows="arrows",i.Effects="effects",i.Pieces="pieces"}(i.Targets||(i.Targets={})),function(i){i.Above="above",i.Below="below"}(i.Positions||(i.Positions={}))}((j=D.CustomItem||(D.CustomItem={})).VisualOrder||(j.VisualOrder={})),($=j.Types||(j.Types={})).Image="Image",$.Star="Star",$.TextBox="TextBox",(U=D.ColorKeys||(D.ColorKeys={})).alt="a",U.custom="c",U.default="d",U.shift="s",U.ctrl="l",(V=D.JCEColorsMap||(D.JCEColorsMap={})).a="alt",V.c="custom",V.d="default",V.s="shift",V.l="ctrl",function(i){i.Arrow="arrow",i.Effect="effect",i.Square="square",i.CustomItem="customItem"}(D.Types||(D.Types={})),Z=i.Piece||(i.Piece={}),(Y=Z.Names||(Z.Names={})).p="pawn",Y.n="knight",Y.b="bishop",Y.r="rook",Y.q="queen",Y.k="king",function(i){i.Pawn="p",i.Knight="n",i.Bishop="b",i.Rook="r",i.Queen="q",i.King="k"}(Z.Types||(Z.Types={})),X=i.Highlight||(i.Highlight={}),(Q=X.Defaults||(X.Defaults={})).Color="#ffff00",Q[Q.Opacity=.5]="Opacity",function(i){i.Analysis="analysis",i.Move="move",i.Premove="premove",i.Selection="selection"}(X.Types||(X.Types={})),function(i){i.Blitz="blitz",i.Bullet="bullet",i.Rapid="rapid"}(i.TimeControlTypes||(i.TimeControlTypes={})),(ee=i.Results||(i.Results={})).Black="0-1",ee.Draw="1/2-1/2",ee.None="*",ee.White="1-0"}(wr||(wr={})),Tr=kr||(kr={}),(Sr=Tr.Modifiers||(Tr.Modifiers={})).Shift="Shift",Sr.Control="Control",Sr.Alt="Alt",Sr.Meta="Meta";const Cr=["Escape","Tab","Backspace","Enter","Backlash","Period","Slash","Comma","Space","Delete","Home","End","PageUp","PageDown","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],xr=[kr.Modifiers.Meta.toLowerCase(),kr.Modifiers.Alt.toLowerCase(),kr.Modifiers.Control.toLowerCase()];function convertCodeToKey(i){let s;if(i)return i.includes("Digit")?s=i.replace("Digit",""):i.includes("Numpad")?s=i.replace("Numpad",""):i.includes("Key")?s=i.replace("Key",""):i.includes(kr.Modifiers.Control)?s=kr.Modifiers.Control:i.includes(kr.Modifiers.Shift)?s=kr.Modifiers.Shift:i.includes(kr.Modifiers.Alt)?s=kr.Modifiers.Alt:i.includes(kr.Modifiers.Meta)?s=kr.Modifiers.Meta:Cr.includes(i)&&(s=i),null==s?void 0:s.toLowerCase()}function createKeysService({onKeydown:i,onKeyup:s}={}){let _=!0;const T=new Set;return document.addEventListener("keydown",onKeydownHandler),document.addEventListener("keyup",onKeyupHandler),window.addEventListener("blur",clearPressedKeys),window.addEventListener("contextmenu",clearPressedKeys),{isPressed:function isPressed(i){return T.has(i.toLowerCase())},getPressedKeys:function getPressedKeys(){return[...T].sort()},disable:function disable(){_=!1,T.clear()},enable:function enable(){_=!0},destroy:function destroy10(){document.removeEventListener("keydown",onKeydownHandler),document.removeEventListener("keyup",onKeyupHandler),window.removeEventListener("blur",clearPressedKeys),window.removeEventListener("contextmenu",clearPressedKeys),T.clear()}};function onKeydownHandler(s){const S=document.activeElement;if(!_||function isElementBlacklisted(i){return Boolean(!i||i.isContentEditable||["INPUT","TEXTAREA"].includes(i.tagName))}(S))return;const C=convertCodeToKey(s.code);C&&(T.add(C),null==i||i(C))}function onKeyupHandler(i){const _=convertCodeToKey(i.code);_&&(xr.includes(_)&&T.clear(),T.delete(_),null==s||s(_))}function clearPressedKeys(){T.clear()}}function createCoreEvent(i,s){return{data:s||{},type:i}}function createKeysPlugin(){let i;const s=createKeysService({onKeydown:createEmitter(ur.Events.Keydown),onKeyup:createEmitter(ur.Events.Keyup)}),_={[ur.Events.Keydown]:{},[ur.Events.Keyup]:{}},T={isPressed:s.isPressed,getPressedKeys:s.getPressedKeys,setOverrides:function setOverrides(i){i.forEach((({key:i,callback:s,trigger:T=ur.Events.Keydown})=>{_[T][i]=s}))},removeOverrides:function removeOverrides(i){i.forEach((({trigger:i=ur.Events.Keydown,key:s})=>{delete _[i][s]}))}};return{api:()=>T,create:function create3({run:s,options:_}){i=s,toggleKeysService(_.enabled)},destroy:function destroy10(){s.destroy()},match:[{condition:is$1(C.OptionsEvents.Update),handler:function updateKeysPlugin(i,s){const{options:_}=s;toggleKeysService(_.captureKeyStrokes&&_.enabled)}},{condition:is$1(ur.Events.Keydown),handler:queueKeyCallback},{condition:is$1(ur.Events.Keyup),handler:queueKeyCallback}],name:ur.Plugin.Name};function createEmitter(s){return function emit(_){null==i||i(createCoreEvent(s,_))}}function queueKeyCallback(i,s){const{type:T,data:S}=i,C=_[T][S];C&&s.queue.add(C(s.api))}function toggleKeysService(i){i?s.enable():s.disable()}}var Er,Pr,Ar,Or,Mr;(Pr=Er||(Er={})).DefaultAcceptableFrequency=1e3,function(i){i.Name="webgl-context-lost"}(Pr.Plugin||(Pr.Plugin={})),function(i){i.Name="recorder"}((Or=Ar||(Ar={})).Plugin||(Or.Plugin={})),(Mr=Or.Mode||(Or.Mode={})).Idle="Idle",Mr.Playing="Playing",Mr.Recording="Recording";const zr=[{name:"addMoveToEndOfLine"},{name:"agreeDraw"},{name:"blinkSquare"},{name:"claimDraw"},{name:"clearMarkings"},{name:"createContinuation"},{name:"createGame"},{name:"setPlayingAs"},{name:"usePlayingAs"},{name:"deletePosition"},{name:"load"},{name:"mark"},{name:"move"},{name:"moveBackward"},{name:"moveForward"},{name:"moveVariation"},{name:"outOfTime"},{name:"promoteVariation"},{name:"reload"},{name:"resetGame"},{name:"resetToMainLine"},{name:"resign"},{name:"selectLineEnd"},{name:"selectLineStart"},{name:"selectNode"},{name:"setGameDetails"},{name:"setResult"},{name:"setTurn"},{name:"toggleMarking"},{name:"undo"},{name:"unmark"},{name:"updateLineComment"},{name:"updateNode"},{name:"setOptions"},{name:"setMode"},{name:"playSound"},{namespace:"arrowKeys",name:"setKeys"},{namespace:"arrowKeys",name:"resetKeys"},{namespace:"boardImages",name:"mark"},{namespace:"boardImages",name:"unmark"},{namespace:"boardImages",name:"showWindow"},{namespace:"boardImages",name:"hideWindow"},{namespace:"clocks",name:"activate"},{namespace:"clocks",name:"deactivate"},{namespace:"clocks",name:"resetClocks"},{namespace:"clocks",name:"stopClocks"},{namespace:"hml",name:"addDiagramActions"},{namespace:"hml",name:"addCommentLink"},{namespace:"hml",name:"setScrollContainer"},{namespace:"hml",name:"updateNodeLimits"},{namespace:"keys",name:"setOverrides"},{namespace:"keys",name:"removeOverrides"},{namespace:"premoves",name:"cancel"},{namespace:"premoves",name:"consumeNext"},{namespace:"premoves",name:"loadQueue"},{namespace:"premoves",name:"move"},{namespace:"premoves",name:"reload"},{namespace:"threats",name:"enable"},{namespace:"threats",name:"onlyShowThreatsCreatedByColor"},{namespace:"vml",name:"activate"},{namespace:"vml",name:"deactivate"},{namespace:"vml",name:"waitForVMLReady"},{namespace:"markings",name:"addMany"},{namespace:"markings",name:"addOne"},{namespace:"markings",name:"removeAll"},{namespace:"markings",name:"removeAllWhere"},{namespace:"markings",name:"removeMany"},{namespace:"markings",name:"removeOne"},{namespace:"markings",name:"toggleMany"},{namespace:"markings",name:"toggleOne"}];const Ir={mode:Ar.Mode.Idle,recordEvents:!1,lastRecordedEventTime:0,verbose:!1,playState:{playCounter:0,initDirty:!1,playedEvents:[]},recording:{events:[],pgn:"",modeName:"",variant:"",modeOptions:{},boardOptions:{},plugins:[],timestamp:""}};function createRecorderPlugin(){return{api:i=>function createRecorderAPI(i,s){const{api:_}=i;return{record:function record(i=!0){clear5(),s.recording={modeName:_.getMode().name,variant:_.getVariant(),modeOptions:_.getMode().getOptions(),boardOptions:_.getOptions(),pgn:_.getPGN(),plugins:_.plugins.get().map((i=>i.name)),timestamp:(new Date).toISOString(),events:[]},s.mode=Ar.Mode.Recording,s.recordEvents=i},play:function play({fixedDelay:i,skipEvents:_=!1,verbose:T=!0}={}){stop2(),s.playState.initDirty&&init2(),s.mode=Ar.Mode.Playing,s.verbose=T,s.verbose&&console.log("Playing",s.recording.events.length-1),playEvent({fixedDelay:i,skipEvents:_,autoContinue:!0})},step:function step({fastForwardEvents:i=!1,skipEvents:_=!1,verbose:T=!0}={}){stop2(),s.mode=Ar.Mode.Playing,s.verbose=T,playEvent({fixedDelay:0,skipEvents:_,fastForwardEvents:i,autoContinue:!1})},forward:function forward({eventNumber:i,skipEvents:_=!1,verbose:T=!0}){stop2(),(!s.playState.playCounter||s.playState.playCounter>=i||s.playState.playCounter===s.recording.events.length)&&init2(),s.mode=Ar.Mode.Playing,s.verbose=T,playEvent({fixedDelay:0,maxEventNumber:i,skipEvents:_,autoContinue:!0})},stop:stop2,init:init2,clear:clear5,get:()=>s,getJSON:function getJSON(){return s.recording?JSON.stringify(s.recording):""},load:function load3(i){const _=JSON.parse(i);return clear5(),s.recording=_,init2()}};function stop2(){return s.mode=Ar.Mode.Idle,s.recording.events.length}function clear5(){s.mode=Ar.Mode.Idle,s.lastRecordedEventTime=0,s.recording={events:[],pgn:"",modeName:"",variant:"",modeOptions:{},boardOptions:{},plugins:[],timestamp:""},s.playState={playCounter:0,initDirty:!1,playedEvents:[]}}function init2(){if(stop2(),!s.recording)return 0;s.playState={playCounter:0,playedEvents:[],initDirty:!1};const{pgn:_,events:T}=s.recording;return i.api.load({pgn:_}),i.api.markings.removeAll(),"localhost"===window.location.hostname&&i.api.boardImages&&!i.api.boardImages.isInitialized()&&i.api.boardImages.initDefault(),s.playState.initDirty=!1,T.length}function playEvent({maxEventNumber:i,fixedDelay:T,skipEvents:S,fastForwardEvents:C,autoContinue:P}){const O=s.recording.events[s.playState.playCounter];if(!O)return void(s.mode=Ar.Mode.Idle);const{name:M,args:R,namespace:D}=O;D?_[D][M](...R):"event"===M?S?(s.playState.playCounter+=1,s.playState.playedEvents.push(`skipped: ${R[0].type}`)):_.emit(R[0].type,R[0]):_[M](...R);const j=s.recording.events[s.playState.playCounter];if(s.mode!==Ar.Mode.Playing||!j||!P&&(!S||!C)||i&&s.playState.playCounter>=i)return s.mode=Ar.Mode.Idle,void(!j&&s.verbose&&console.log("Finished playing"));let $=null!=T?T:j.time;S&&"event"===j.name&&($=0),(P||(S||C)&&"event"===j.name)&&setTimeout((()=>{playEvent({maxEventNumber:i,fixedDelay:T,skipEvents:S,fastForwardEvents:C,autoContinue:P})}),$)}}(i,Ir),create:i=>setTimeout((()=>function create3(i){const{api:s}=i;addProxies(s);const apply=(i,_,T)=>{const S=(Array.isArray(T[0])?T[0]:T).map((i=>i.name)),C=i(...T);return S.forEach((i=>{addProxies(s,i)})),C};i.api.plugins.add=new Proxy(i.api.plugins.add,{apply:apply}),i.api.plugins.addMany=new Proxy(i.api.plugins.addMany,{apply:apply})}(i))),match:[{condition:()=>Ir.mode===Ar.Mode.Recording&&Ir.recordEvents,handler:i=>{Ir.recording.events.push({name:"event",args:[i],time:getElapsedTime()})}},{condition:()=>Ir.mode===Ar.Mode.Playing,handler:i=>{Ir.verbose&&console.log(`${Ir.playState.playCounter} / ${Ir.recording.events.length-1}`,i),Ir.playState.playCounter+=1,Ir.playState.playedEvents.push(i)}}],name:Ar.Plugin.Name}}function addProxies(i,s){(s?zr.filter((i=>i.namespace===s)):zr).forEach((({namespace:s,name:_})=>{if(!s&&!i[_]||s&&!i[s]||s&&i[s]&&!i[s][_])return;const T=function getProxyApply(i,s){return function proxyApply(_,T,S){if(Ir.playState.initDirty=!0,Ir.mode===Ar.Mode.Recording){const _=getElapsedTime(),T=s?{namespace:s}:{};Ir.recording.events.push(__spreadValues({name:i,args:S,time:_},T))}if(Ir.mode===Ar.Mode.Playing){const _=Ir.recording.events[Ir.playState.playCounter];if(_&&_.name===i&&(!_.namespace||_.namespace===s)&&JSON.stringify(_.args).substring(0,50)===JSON.stringify(S).substring(0,50)){if(Ir.verbose){const i=_.namespace?`${_.namespace}.${_.name}`:_.name;console.log(`${Ir.playState.playCounter} / ${Ir.recording.events.length-1}`,`${i}`,..._.args)}Ir.playState.playCounter+=1}const T=s?{namespace:s}:{};Ir.playState.playedEvents.push(__spreadValues({name:i,args:S},T))}return _(...S)}}(_,s);s?i[s][_]=new Proxy(i[s][_],{apply:T}):i[_]=new Proxy(i[_],{apply:T})}))}function getElapsedTime(){const i=Date.now(),s=0===Ir.lastRecordedEventTime?0:i-Ir.lastRecordedEventTime;return Ir.lastRecordedEventTime=i,s}function createKeyedHighlight({color:i,type:s,opacity:_,square:T,turn:S}){return{data:{color:i,opacity:_,square:T,turn:S,type:s},key:`${s}|${T}`,type:"highlight"}}function getHighlightColorFromKeyPressed(i,s){switch(i){case jt.Alt:return s.analysisHighlightColors.alt;case jt.Ctrl:return s.analysisHighlightColors.ctrl;case jt.Shift:return s.analysisHighlightColors.shift;case jt.None:return s.analysisHighlightColors.default;default:return}}function getAnalysisHighlights(i,s){const{api:_,options:T}=s;return T&&T.allowMarkings?_.markings.getAllWhere({types:[de]}).map((({data:{color:i,keyPressed:s,opacity:_,square:S}})=>{var C,P;return createKeyedHighlight({color:null!=(P=null!=(C=getHighlightColorFromKeyPressed(s,T))?C:i)?P:T.analysisHighlightColors.default,opacity:null!=_?_:T.analysisHighlightOpacity,square:S,type:"analysis"})})):[]}function isLine(i){return void 0!==i.id}const Lr=["wp","wn","wb","wr","wq","wk","bp","bn","bb","br","bq","bk"],Rr={"8_bit":["#6a9b41","#f3f3f4","8_bit",".png","#ffff00"],bases:["#c26b38","#efcca1","bases",".jpg","#f5cc2a"],blackwhite:["#667188","#282f3f","translucent",".png","#5b91b3"],blue:["#4D6D92","#ECECD7","blue",".png","#00a5ff"],brown:["#B58863","#F0D9B5","brown",".png","#ffff00"],bubblegum:["#f9cdd3","#fff3f3","bubblegum",".png","#de5d6f"],burled_wood:["#895132","#d9b088","burled_wood",".jpg","#ee9016"],dark_wood:["#8d675e","#e7cdb2","dark_wood",".jpg","#cc9122"],dash:["#6b3a27","#bd9257","dash",".jpg","#eca722"],default:["#779952","#edeed1","green",".png","#ffff00"],glass:["#282f3f","#667188","glass",".png","#5b91b3"],graffiti:["#b96f18","#aeaeae","graffiti",".jpg","#f39011"],green:["#779952","#edeed1","green",".png","#ffff00"],grey:["#aaaaaa","#dcdcdc","light",".png","#a4b8c4"],icy_sea:["#7a9db2","#c5d5dc","icy_sea",".jpg","#5ed7f1"],light:["#aaaaaa","#dcdcdc","light",".png","#a4b8c4"],lolz:["#909898","#e0e9e9","lolz",".jpg","#a3becd"],marble:["#706b66","#c7bdaa","marble",".jpg","#f0db86"],marbleblue:["#c2d7e2","#efefef","marbleblue",".jpg","#65daf7"],marblebrown:["#b96f18","#aeaeae","graffiti",".jpg","#f39011"],marblegreen:["#706b66","#c7bdaa","marblegreen",".jpg","#f0db86"],metal:["#6e6e6e","#c9c9c9","metal",".jpg","#a3becd"],natural:["#D08B18","#FCE4B2","tan",".png","#f0e464"],nature:["#8c976e","#c3d1a4","translucent",".png","#eef396"],neon:["#636363","#b9b9b9","neon",".png","#6d90a6"],newspaper:["#5a5956","#5a5956","newspaper",".jpg","#99976e"],orange:["#D08B18","#FCE4B2","orange",".png","#ffff00"],overlay:["#789ebd","#4878a0","overlay",".png","#0d9acf"],parchment:["#B58863","#F0D9B5","parchment",".jpg","#d8cc66"],pink:["#f9cdd3","#fff3f3","bubblegum",".png","#de5d6f"],purple:["#8877B7","#EFEFEF","purple",".png","#7dacc9"],red:["#BA5546","#F0D8BF","red",".png","#f8f893"],sand:["#b8a590","#e5d3c4","sand",".jpg","#e2bc87"],sky:["#c2d7e2","#efefef","sky",".png","#65daf7"],stone:["#666463","#c8c3bd","stone",".jpg","#36525f"],tan:["#D08B18","#FCE4B2","tan",".png","#f7d84a"],tournament:["#316549","#ebece8","tournament",".jpg","#a4c25b"],translucent:["#667188","#282f3f","translucent",".png","#5b91b3"],walnut:["#835f42","#c0a684","walnut",".jpg","#d1a52d"],winboard:["#316549","#ebece8","tournament",".jpg","#a4c25b"],wood:["#8d675e","#e7cdb2","dark_wood",".jpg","#cc9122"],wooddark:["#895132","#d9b088","burled_wood",".jpg","#ee9016"],woodlight:["#B58863","#F0D9B5","parchment",".jpg","#d8cc66"],woodmid:["#8d675e","#e7cdb2","dark_wood",".jpg","#cc9122"],woodolive:["#6e6e6e","#c9c9c9","woodolive",".jpg","#a3becd"]},Nr={"3d_staunton":{format:"png",isPseudo3d:!0,path:"3d_staunton"},"3dchesskid":{format:"png",isPseudo3d:!0,path:"3d_chesskid"},"3dplastic":{format:"png",isPseudo3d:!0,path:"3d_plastic"},"3dwood":{format:"png",isPseudo3d:!0,path:"3d_wood"},"8_bit":{format:"png",path:"8_bit"},alpha:{format:"png",path:"alpha"},bases:{format:"png",path:"bases"},blindfold:{format:"png",path:"blindfold"},book:{format:"png",path:"book"},bubblegum:{format:"png",path:"bubblegum"},cases:{format:"png",path:"cases"},classic:{format:"png",path:"classic"},club:{format:"png",path:"club"},condal:{format:"png",path:"condal"},dash:{format:"png",path:"dash"},game_room:{format:"png",path:"game_room"},glass:{format:"png",path:"glass"},gothic:{format:"png",path:"gothic"},graffiti:{format:"png",path:"graffiti"},icy_sea:{format:"png",path:"icy_sea"},light:{format:"png",path:"light"},lolz:{format:"png",path:"lolz"},marble:{format:"png",path:"marble"},maya:{format:"png",path:"maya"},metal:{format:"png",path:"metal"},modern2:{format:"png",path:"modern"},nature:{format:"png",path:"nature"},neo:{format:"png",path:"neo"},neo_wood:{format:"png",path:"neo_wood"},neon:{format:"png",path:"neon"},newspaper:{format:"png",path:"newspaper"},ocean:{format:"png",path:"ocean"},real3d:{format:"png",path:"neo"},sky:{format:"png",path:"sky"},space:{format:"png",path:"space"},tigers:{format:"png",path:"tigers"},tournament:{format:"png",path:"tournament"},vintage:{format:"png",path:"vintage"},wood:{format:"png",path:"wood"}};function getTheme(i){const s=Rr[i];if(!s)return null;const[_,T,S,C,P]=s;return{darkSquareColor:_,lightSquareColor:T,path:S,extension:C,highlightColor:P}}const Dr="move";function getMoveHighlights(i,s){const{api:_,options:T}=s,S=[];if(!T||!T.highlightMoves)return S;const C=_.getSelectedNode();return!C||isLine(C)||[C.from,C.to].forEach((i=>{var s,_,P;if(!i)return;const O=createKeyedHighlight({color:null!=(P=null!=(_=T.highlightColor)?_:null==(s=getTheme(T.boardStyle))?void 0:s.highlightColor)?P:Ht.HighlightColors.Selected,opacity:T.highlightOpacity,square:i,turn:C.color,type:Dr});S.push(O)})),S}function getSelectionSquare(i,s){var _,T;const{options:S,state:P}=s;if(!S||!S.highlightMoves)return[];const O=P.get(C.State.SelectedPiece)||P.get(C.State.DraggingPiece);if(!O)return[];return[createKeyedHighlight({color:null!=(T=null==(_=getTheme(S.boardStyle))?void 0:_.highlightColor)?T:Ht.HighlightColors.Selected,opacity:S.highlightOpacity,square:O,type:"SelectionHiglight"})]}let jr;const Br="IS_POPULATED",$r="VERSION";function getDB(){return jr}async function initDB({ecoPath:i,http:s}){const _="e2992d839bbeb7eff7ae6145f8bdcdb3",T=await async function storeIsPopulated(){return(0,ie.g)(Br,jr).then(Boolean)}(),S=await async function getVersion(){return(0,ie.g)($r,jr).then(String)}();if(!T||!S||S!==_)return function setVersion(i){return(0,ie.s)($r,i,jr)}(_),async function populateStore({ecoPath:i,http:s}){return s.get(i).then((i=>{var s,_;!function setMany(i,s){return s._withIDBStore("readwrite",(s=>{i.forEach((i=>{s.put(i,i.f)}))}))}(null!=(_=(null==(s=null==i?void 0:i.data)?void 0:s.positions)?i.data.positions:i.data)?_:i,jr)}))}({ecoPath:i,http:s}).then(setPopulated)}function setPopulated(){return(0,ie.s)(Br,!0,jr)}async function getECO({ecoPath:i,fens:s,http:_}){const T=function formatFENsForECOLookup(i){return i.reverse().map((i=>i.split(" ").slice(0,3).join(" ")))}(s);await initDB({ecoPath:i,http:_});return(await function getECOValuesFromDB(i){return Promise.all(i.map((i=>(0,ie.g)(i,getDB()))))}(T)).find(Boolean)}var Ur,Fr;(Ur||(Ur={})).ECO="chesscom_eco",(Fr||(Fr={})).ECO="eco";const Hr={get:i=>fetch(i,{method:"GET"}).then((i=>i.json()))};function createEcoPlugin({ecoPath:i="",http:s=Hr,storeData:_={name:Ur.ECO,table:Fr.ECO}}={}){if(!("indexedDB"in window))return{name:We.Name};return{api:_=>function createECOAPI(i,s){let _;return{get:()=>_,update:async function update5(){const{api:T,respond:S}=i;_=await getECO(__spreadProps(__spreadValues({},s),{fens:T.getHistoryFENs()})),S(We.Events.Update,_)}}}(_,{ecoPath:i,http:s}),create:function create3(i){getDB()||function createDB({name:i,table:s}){jr=new ie.S(i,s)}(__spreadValues({},_)),updateECO(null,i)},match:[{condition:isOneOf(mr),handler:updateECO}],name:We.Name};function updateECO(i,s){s.api.eco.update()}}function createCancelPremoves(i,s){return function cancelPremoves(..._){i.premoves.cancel(),s(..._)}}function createPremoveAPIOverrides(){return{agreeDraw:({api:i})=>createCancelPremoves(i,i.agreeDraw),deletePosition:({api:i})=>createCancelPremoves(i,i.deletePosition),getLegalMovesForSquare:({api:i})=>function createGetLegalMovesForSquare$2(i){const s=i.getLegalMovesForSquare;return function getLegalMovesForSquare(_){return i.getPlayingAs()!==i.getTurn()?i.premoves.getLegalMovesForSquare(_):s(_)}}(i),getMove:({api:i})=>function createGetMove$4(i){const s=i.getMove;return function getMove(_){return i.getPlayingAs()!==i.getTurn()?i.premoves.getMove(_):s(_)}}(i),getPieces:({api:i})=>function createGetPieces$2(i){const s=i.getPieces;return function getPieces(){return i.premoves.getQueue().length?i.premoves.getPieces():s()}}(i),load:({api:i})=>function createReloadPremoves(i,s){return function reloadPremoves(..._){var T;i.premoves.cancel();const S=null==(T=_[0])?void 0:T.premoves;if(S){const s=i.getContext().game;S.forEach((i=>{s.premove.move(i)})),i.premoves.loadQueue(S),_[0].pieces=i.premoves.getPieces()}s(..._)}}(i,i.load),move:({api:i})=>function createMove$9(i){const s=i.move;return function move(_){const{respond:T}=i.getContext();if(i.getPlayingAs()===i.getTurn())return s(_);if(_.userGenerated)return i.premoves.move(_);const S=i.premoves.getQueue().length>0;S&&i.premoves.reload();const P=s(_);return S&&T(C.APIEvents.SetBoardPosition,{pieces:i.premoves.getPieces(),holdSelectedPiece:!0}),P}}(i),moveBackward:({api:i})=>createCancelPremoves(i,i.moveBackward),moveForward:({api:i})=>createCancelPremoves(i,i.moveForward),outOfTime:({api:i})=>createCancelPremoves(i,i.outOfTime),resign:({api:i})=>createCancelPremoves(i,i.resign),selectLineEnd:({api:i})=>createCancelPremoves(i,i.selectLineEnd),selectLineStart:({api:i})=>createCancelPremoves(i,i.selectLineStart),selectNode:({api:i})=>createCancelPremoves(i,i.selectNode),undo:({api:i})=>createCancelPremoves(i,i.undo)}}function isAllowedToMoveInPlayingMode({api:i,canMoveWhenNotPlayerTurn:s,modeOptions:_}){const{canAddMovesToMainLine:T,canMoveWhenGameIsOver:S,canModifyExistingMovesOnMainLine:C}=_;return Boolean((S||!i.isGameOver())&&(T&&i.isAtEndOfLine()||C)&&(s||i.getPlayingAs()===i.getTurn()))}function createIsAllowedToMove(i,s){return function isAllowedToMove(){return isAllowedToMoveInPlayingMode({api:s,canMoveWhenNotPlayerTurn:!0,modeOptions:i.getOptions()})}}function createCancel(i){return function cancel(){const{api:s,game:_}=i;return s.premoves.getQueue().length?(_.premove.cancel(),s.reload()):null}}function setTimestampOnNode({api:i,node:s,timestamp:_}){var T;const{game:S,respond:P}=i.getContext(),{line:O,move:M}=s.ids;if(null===_)return(null==(T=s.commands)?void 0:T.timestamp)&&delete s.commands.timestamp,P(C.APIEvents.NodeUpdated,{changes:{timestamp:_,node:s}});s.commands||(s.commands={}),S.updateNode({commands:Object.assign(s.commands,{timestamp:`${_}`})},M,O)}function millisecondsToDeciseconds(i){return Math.round(i/100)}function isNode(i){return void 0!==(null==i?void 0:i.ids)}function getPreviousNodeOfSameColor({api:i,node:s}){const _=i.getNodeByIds({move:s.ids.move-2,line:s.ids.line});return isNode(_)?_:null}function addTimeToConsumedPremove({api:i,timeControl:s}){const _=i.getLine(0);if(!_)return null;const T=_[_.length-1],S=getPreviousNodeOfSameColor({api:i,node:T}),{baseTime:C,increment:P}=s,O=function getGameTimeLeft({baseTime:i,increment:s,lastNodeTime:_}){return getStartingTime()-1;function getStartingTime(){return _?_+s:i}}({baseTime:millisecondsToDeciseconds(C),increment:millisecondsToDeciseconds(P),lastNodeTime:null==S?void 0:S.time});return O&&T&&(T.time=O),O}function createConsumeNext(i){return function consumeNext(){const{api:s,game:_,mutateGame:T}=i;if(!s.premoves.getQueue().length)return null;if(s.isGameOver())return s.premoves.cancel();s.premoves.reload();const S=T((function consume(){_.premove.consume()}));if(!S||0===S.plyDiff)return null;if(S.consumedPremove=!0,s.premoves.getQueue().length&&(S.pieces=s.premoves.getPieces()),S.move){const i=s.timeControl.get();i&&(addTimeToConsumedPremove({api:s,timeControl:i}),setTimestampOnNode({api:s,node:S.move,timestamp:1})),Object.assign(S.move,{animate:!1,userGenerated:!0})}return S.result&&s.setResult(S.result),S}}function createGetLegalMovesForSquare$1(i){return function getLegalMovesForSquare(s){const{game:_}=i,T=_.premove.moves(s);return T?T.filter((i=>void 0===s||i.from===s)).map((i=>i.to)).filter(((i,s,_)=>_.indexOf(i)===s)):[]}}function createGetMove$3(i){return function getMove(s){const{game:_}=i,T=_.premove.moves(s.from),S=T?T.find((i=>i.to===s.to)):null;return S?_.moveDetails(__spreadValues({},S)):null}}function createGetPieces$1(i){return function getPieces(){const{game:s}=i;return createCollection(s.premove.getPieces(!0))}}function createGetQueue(i){return function getQueue(){const{game:s}=i;return s.premove.queue}}function createIsLegalMove$1(i){return function isLegalMove(s){const{game:_}=i;return!!_.premove.move(s)&&(_.undo(),!0)}}function createLoadQueue(i){return function loadQueue(s){const{game:_}=i;_.premove.queue.length=0,_.premove.queue.push(...s)}}function createMove$8(i){return function move(s){const{api:_,game:T,respond:S}=i;return T.premove.move(s)?(_.getOptions().playSounds&&S(C.SoundEvents.Play,{sound:kt.BoardSounds.Premove}),S(C.APIEvents.SetBoardPosition,{pieces:_.premoves.getPieces()})):null}}function createReload$1(i){return function reload(){const{api:s}=i;if(s.premoves.getQueue().length){const i=[...s.premoves.getQueue()];s.reload(),s.premoves.loadQueue(i)}else s.reload()}}const qr="premove";function getPremoveHighlights(i,s){var _;const{api:T,options:S}=s,C=null==(_=T.premoves)?void 0:_.getQueue();if(!S||!S.allowMarkings||!C.length)return[];const P=[];return C.forEach((i=>{if(i.from){const s=createKeyedHighlight({color:S.premoveHighlightColor,opacity:S.premoveHighlightOpacity,square:i.from,type:qr});P.push(s)}const s=createKeyedHighlight({color:S.premoveHighlightColor,opacity:S.premoveHighlightOpacity,square:i.kingTo||i.to,type:qr});P.push(s)})),P}function createPremovesPlugin(){return{api:function createPremovesAPI(i){return{cancel:createCancel(i),consumeNext:createConsumeNext(i),getLegalMovesForSquare:createGetLegalMovesForSquare$1(i),getMove:createGetMove$3(i),getPieces:createGetPieces$1(i),getQueue:createGetQueue(i),isLegalMove:createIsLegalMove$1(i),loadQueue:createLoadQueue(i),move:createMove$8(i),reload:createReload$1(i)}},apiOverrides:createPremoveAPIOverrides(),beforeState:[{condition:is$1(C.UserEvents.PointerdownRight),handler:function pointerDownRightBeforeStateHandler(i,s){const{api:_,queue:T}=s;if(_.premoves.getQueue().length>0)return T.add(_.premoves.cancel),!1;return!0}},{condition:is$1(C.APIEvents.Move),handler:function moveBeforeStateHandler(i,s){const{api:_,queue:T}=s;if(!_.premoves.getQueue().length)return!0;if(function eventIsMoveNotMadeByUser(i){return i.type===C.APIEvents.Move&&!i.data.consumedPremove}(i))return T.add((function consumeNext(){const i=_.premoves.consumeNext(),s=null===i?C.APIEvents.IllegalMove:C.APIEvents.Move;_.once(C.APIEvents.Move,(()=>{_.getContext().respond(s,__spreadProps(__spreadValues({},i),{holdSelectedPiece:!0}))}))})),!1;return!0}}],create:function create3(i){const{api:s}=i;s.highlights&&s.highlights.addModule(getPremoveHighlights)},destroy:function destroy10(i){var s;const{api:_}=i;null==(s=_.highlights)||s.removeModule(getPremoveHighlights)},modeOverrides:{isAllowedToMove:createIsAllowedToMove},name:gt.Plugin.Name}}const noop=()=>{};function createQueue(i=!0){const s=[];let _=!1;return{add:function add2(T,...S){let C=noop,P=noop;const O=new Promise(((i,s)=>{P=i,C=s}));s.push({fn:T,params:S,reject:C,resolve:P}),i&&!1===_&&flush2();return O},clear:function clear5(){_=!1,s.length=0},flush:flush2,getEntries:function getEntries(){return s}};async function flush2(){const i=s.shift();if(i){_=!0;try{const s=await i.fn(...i.params);return i.resolve(s),flush2()}catch(T){i.reject(T)}}else _=!1}}function createExternallyResolvablePromise(){let i,s;return{promise:new Promise(((_,T)=>{i=_,s=T})),reject:s,resolve:i}}var Vr,Gr,Zr,Wr,Kr,Yr,Xr,Qr,Jr,ei,ti;function addCustomColor(i,s){Object.values(Vr.CssVariables).forEach((function setVariable(_){!function setCSSVariable({el:i,value:s,variable:_}){if(void 0!==s)return i.style.setProperty(_,s);i.style.removeProperty(_)}({el:i,value:s,variable:_})}))}Gr=Vr||(Vr={}),(Zr=Gr.Classes||(Gr.Classes={})).EnPassant="circle-info",Zr.MoveInfoIcon="move-info-icon",Zr.ThreeFoldIcon="redo",Zr.IconFont="icon-font-chess",Zr.MoveList="move-list",(Gr.Tags||(Gr.Tags={})).EnPassantIcon="span",(Gr.CssVariables||(Gr.CssVariables={})).Color="--nodeCustomColor",Kr=Wr||(Wr={}),function(i){i.ClearAllAnalysis="Clear All Analysis",i.DeleteCommentAfter="Delete Comment After",i.DeleteCommentBefore="Delete Comment Before",i.DeleteLine="Delete Entire Variation",i.DeleteMove="Delete Move",i.InsertCommentAfter="Comment After",i.InsertCommentBefore="Comment Before",i.InsertContinuation="Insert Continuation",i.MoveVariationDown="Move Variation Down",i.MoveVariationUp="Move Variation Up",i.Promote="Promote",i.RemoveAnnotation="Remove Annotation",i.RemoveBegin="Remove Begin",i.RemoveEnd="Remove End",i.RemoveEvaluationAnnotation="Remove Evaluation Annotation",i.RemoveFocus="Remove Focus",i.SetBegin="Set Begin",i.SetEnd="Set End",i.SetFocus="Set Focus"}((Yr=Kr.Translation||(Kr.Translation={})).Actions||(Yr.Actions={})),(Xr=Yr.Annotations||(Yr.Annotations={})).BadMove="Bad move",Xr.BlackHasDecisiveAdvantage="Black has a decisive advantage",Xr.BlackHasModerateAdvantage="Black has a moderate advantage",Xr.BlackHasSlightAdvantage="Black has a slight advantage",Xr.Blunder="Blunder",Xr.Drawish="Drawish",Xr.DubiousMove="Dubious move",Xr.ExcellentMove="Excellent move",Xr.GoodMove="Good move",Xr.Novelty="Novelty",Xr.Unclear="Unclear",Xr.PositionInZuqZwang="The position is in zugzwang",Xr.SpeculativeMove="Speculative move",Xr.WhiteHasSlightAdvantage="White has a slight advantage",Xr.WhiteHasModerateAdvantage="White has a moderate advantage",Xr.WhiteHasDecisiveAdvantage="White has a decisive advantage",Xr.WithInitiative="With initiative",Xr.WithCompensation="With compensation",Xr.WithAttack="With an attack",function(i){i.B="B",i.K="K",i.N="N",i.P="P",i.Q="Q",i.R="R"}(Yr.Pieces||(Yr.Pieces={})),(Qr=Yr.Plural||(Yr.Plural={})).NumberOfDays="numberOfDays",Qr.NumberOfHours="numberOfHours",Qr.NumberOfMinutes="numberOfMinutes",(Yr.Prompt||(Yr.Prompt={})).AddComment="Add Comment...",(Jr=Yr.Tooltips||(Yr.Tooltips={})).EnPassant="En passant is a special pawn move by which a pawn captures another pawn that has advanced two squares.",Jr.ThreeFoldRepetition="This game ended in a draw because the same position was repeated three times.",function(i){i.HML="hml",i.VML="vml"}(Kr.Types||(Kr.Types={})),(ti=ei||(ei={})).Mousedown="mousedown",ti.MouseMove="mousemove",ti.Mouseup="mouseup",ti.PointerDown="pointerdown",ti.PointerMove="pointermove",ti.PointerUp="pointerup",ti.Touchstart="touchstart",ti.Touchmove="touchmove",ti.Touchend="touchend";const{Pointerdown:ni,Pointermove:ri,Pointerup:ii}=function getPointerEvents(){const i="onpointerdown"in window,s="ontouchstart"in window;let _,T,S;i?(_=ei.PointerDown,T=ei.PointerMove,S=ei.PointerUp):s?(_=ei.Touchstart,T=ei.Touchmove,S=ei.Touchend):(_=ei.Mousedown,T=ei.MouseMove,S=ei.Mouseup);return{Pointerdown:_,Pointermove:T,Pointerup:S}}();function toFigurine(i,s){return i.toUpperCase()===i?function getFigurineHTML(i,s){return`<span class="icon-font-chess ${function getPieceName(i){return wr.Piece.Names[i.toLowerCase()]}(i)}-${s}" data-figurine="${i}"></span>`}(i,s):i}function formatText({color:i,moveListDisplayType:s,san:_,translations:T}){return _.split("").map((_=>"NBRQK".includes(_)?s===Ht.MoveListDisplayTypes.Figurine?toFigurine(_,i):T[_]():_)).join("")}function getColorAsWord(i){return i===wr.ColorsAsNumbers.Black?wr.ColorsAsWords.Black:wr.ColorsAsWords.White}function isEPCapture(i){return i===wr.Move.Flags.EPCapture}function toClassString(i){return`.${i}`}var ai;function scrollToNode$1({containerEl:i,moveListEl:s,nodeEl:_}){if(!s||!_)return;const T=i||s,S=T.getBoundingClientRect(),C=_.getBoundingClientRect(),P=(S.bottom-S.top)/2,O=S.top-C.top+P;T.scrollTop-=O}function createVMLDOM(i){const{el:s,resultNodeIsSelectable:_,toggleTimestamps:T}=i,S=[],C=function createState(i={}){const s=__spreadValues({},i);return{get:function get2(){return s},set:function set3(i){Object.assign(s,i)}}}(i);return{addMove:addMove,addNode:function addNode(i){const{color:s,flags:_,ids:T,ply:S,san:C,wholeMoveNumber:P}=i;if(!s||!S||!C||!P||getNodeElement(S))return;let O=getMoveElement2(P);O||(O=addMove(P));const M=createNodeElement({color:getColorAsWord(s),moveId:T.move,isEPCapture:!!_&&isEPCapture(_),ply:S,san:C});if(!M)return;i.ply&&Object.prototype.hasOwnProperty.call(i,"customColor")&&addCustomColor(M,i.customColor);return O.appendChild(M)},addTimestamp:function addTimestamp({baseTime:i,node:s,timestamp:_,title:T,value:S}){const{color:C,ply:P,wholeMoveNumber:O}=s;if(!C||!P||!O)return;const M=getMoveElement2(O);if(!M)return;const R=getTimestampElement(P);R&&M.removeChild(R);const D=function createTimestampElement(i){const s=document.createElement("div");return s.setAttribute(ai.DOM.Attributes.Ply,i.toString()),s.setAttribute(ai.DOM.Attributes.VMLElement,ai.DOM.ElementTypes.Timestamp),s}(P);T&&function setTimestampElementTitle(i,s){s.title=i}(T,D);return setTimestampElementColor(C,D),setTimestampValue({baseTime:i,ply:P,timestamp:_,value:S},D),M.appendChild(D),D},clearList:function clearList(){destroyList(),createList()},createList:createList,deselectNode:function deselectNode(i){const s=i?getNodeElement(i):getSelectedNodeElement();if(!s)return;deselectNodeElement(s)},destroyList:destroyList,enableColors:function enableColors(i){const{colorsEnabled:_}=C.get();if(_===i)return;C.set({colorsEnabled:i}),s.classList[i?"add":"remove"](ai.DOM.ClassNames.ColorsEnabled)},getLastPly:getLastPly,getParams:C.get,getResult:function getResult(){const i=getResultNodeElement();if(!i)return wr.Results.None;return i.innerText},getResultNodeElement:getResultNodeElement,getTimestamp:function getTimestamp2(i){const s=getTimestampElement(i);if(!s)return null;const _=s.getAttribute(ai.DOM.Attributes.Time);if(0===(null==_?void 0:_.length))return null;return parseFloat(_)},hasResultNode:function hasResultNode(){return Boolean(s.querySelector(toClassString(ai.DOM.ClassNames.GameResult)))},addThreeFoldMoveIcons:function addThreeFoldMoveIcons(i){const s=function getThreeFoldElements(i,s){if(!i)return;return function findThreeFoldMoves(i){return i.reduceRight(((i,s,_,T)=>(3===(s===T[T.length-1]?i.push(_):i.length)&&(T.length=0),i)),[])}(i.map((({fen:i})=>i.split(" ").slice(0,2).join(" ")))).map((i=>s[i]))}(i,getNodeElements());if(!s||3!==s.length)return;s.forEach((i=>{i.querySelector(toClassString(Vr.Classes.MoveInfoIcon))||i.appendChild(function createThreeFoldIconElement(){const{translations:i}=C.get(),s=document.createElement("div"),_=document.createElement("span");return s.appendChild(_),s.classList.add(Vr.Classes.MoveInfoIcon),_.classList.add(Vr.Classes.IconFont,Vr.Classes.ThreeFoldIcon),s.dataset.tooltip=i[Wr.Translation.Tooltips.ThreeFoldRepetition](),s.addEventListener("mouseover",positionTooltip),s;function positionTooltip(){const i=s.getBoundingClientRect().y;s.style.setProperty("--tooltip-top",`${i}px`)}}())}))},isResultNodeSelected:function isResultNodeSelected(){var i;return Boolean(null==(i=s.querySelector(toClassString(ai.DOM.ClassNames.GameResult)))?void 0:i.classList.contains(ai.DOM.ClassNames.Selected))},removeTimestamp:function removeTimestamp(i){const s=getTimestampElement(i);if(!s)return;s.parentNode.removeChild(s)},scrollToSelectedNode:function scrollToSelectedNode(){const{scrollContainer:i}=C.get(),_=getSelectedNodeElement(),T=i||s;if(!_)return void(T.scrollTop=0);scrollToNode$1({containerEl:T,moveListEl:s,nodeEl:_})},selectNode:function selectNode2(i){const s=getNodeElement(i);if(!s)return;selectNodeElement(s)},selectNodeElement:selectNodeElement,selectResultNode:function selectResultNode(){const i=getResultNodeElement();i&&(selectNodeElement(i),s.dispatchEvent(new CustomEvent(ai.Events.SelectResultNode)))},setResultNode:function setResultNode(i){const T=getResultNodeElement();if(null!==T){const i=T.parentNode;if(!i)return;i.removeChild(T),0===i.childNodes.length&&i.parentNode.removeChild(i)}if(i===wr.Results.None)return;const S=getNodeElements().slice(-1)[0],C=S&&function getNodeElementColor(i){return i.classList.contains(wr.ColorsAsWords.Black)?wr.ColorsAsNumbers.Black:wr.ColorsAsNumbers.White}(S)!==wr.ColorsAsNumbers.Black?wr.ColorsAsWords.Black:wr.ColorsAsWords.White,P=C===wr.ColorsAsWords.White?addMove():function getMoveElements(){return Array.from(s.querySelectorAll(`${toClassString(ai.DOM.ClassNames.Move)}`))}().slice(-1)[0];let O;if(_){const s=getLastPly()||2;O=createNodeElement({color:C,isEPCapture:!1,moveId:getNodeElements().length-1,ply:s,san:i,isResultNode:!0}),O.classList.add(C,ai.DOM.ClassNames.GameResult)}else O=function createResultNodeElement(i,s){const _=document.createElement("span");return _.innerHTML=i,_.classList.add(s,ai.DOM.ClassNames.GameResult),_}(i,C);P.appendChild(O)},setTimestampValue:setTimestampValue,setParams:C.set,updateNodeColor:function updateNodeColor(i,s){const _=getNodeElement(i);if(!_)return;addCustomColor(_,s)}};function addMove(i){const _=document.createElement("div");return _.classList.add(ai.DOM.ClassNames.Move),i&&(_.setAttribute(ai.DOM.Attributes.WholeMoveNumber,`${i}`),_.innerHTML=`${i}.`),s.appendChild(_),_}function createList(){destroyList(),s.classList.add(ai.DOM.ClassNames.List),T&&s.classList.add(ai.DOM.ClassNames.ToggleTimestamps)}function createNodeElement({color:i,isEPCapture:_,isResultNode:T,moveId:P,ply:O,san:M}){const{EPIconInfoPath:R,moveListDisplayType:D,translations:j}=C.get(),$=document.createElement("div");if($.setAttribute(ai.DOM.Attributes.Ply,O.toString()),$.classList.add(i,ai.DOM.ClassNames.Node),$.innerHTML=formatText({color:i,moveListDisplayType:D,san:M,translations:j}),_){const{el:i,listener:s}=function createEnPassantIcon(i,s){const _=document.createElement("div"),T=document.createElement(Vr.Tags.EnPassantIcon);return _.appendChild(T),_.classList.add(Vr.Classes.MoveInfoIcon),T.classList.add(Vr.Classes.IconFont,Vr.Classes.EnPassant),_.addEventListener(ni,EPIconPointerdownHandler),_.addEventListener("mouseover",(function positionTooltip(){const i=_.getBoundingClientRect().y;_.style.setProperty("--tooltip-top",`${i}px`)})),_.dataset.tooltip=s[Wr.Translation.Tooltips.EnPassant](),{el:_,listener:{el:_,eventName:ni,handler:EPIconPointerdownHandler}};function EPIconPointerdownHandler(s){s.stopPropagation(),window.open(i,"_blank")}}(R,j);$.appendChild(i),S.push({el:i,eventName:ni,handler:s.handler})}return $.addEventListener(ni,halfMovePointerdownHandler),S.push({eventName:ni,handler:halfMovePointerdownHandler}),$;function halfMovePointerdownHandler(){s.dispatchEvent(new CustomEvent(ai.Events.SelectNode,{detail:{ids:{move:P,line:0},ply:O,isResultNode:T}}))}}function deselectNodeElement(i){i.classList.remove(ai.DOM.ClassNames.Selected)}function destroyList(){S.forEach((i=>{s.removeEventListener(i.eventName,i.handler)})),s.classList.remove(ai.DOM.ClassNames.List),s.innerHTML=""}function getLastPly(){const i=getNodeElements();if(!i.length)return;const s=function getNodeElementPly(i){const s=i.getAttribute(ai.DOM.Attributes.Ply);return s?parseInt(s,10):null}(i[i.length-1]);return s||void 0}function getMoveElement2(i){return s.querySelector(`[${ai.DOM.Attributes.WholeMoveNumber}="${i}"]`)}function getNodeElement(i){return s.querySelector(`${toClassString(ai.DOM.ClassNames.Node)}[${ai.DOM.Attributes.Ply}="${i}"]`)}function getNodeElements(){return Array.from(s.querySelectorAll(`${toClassString(ai.DOM.ClassNames.Node)}`))}function getResultNodeElement(){return s.querySelector(toClassString(ai.DOM.ClassNames.GameResult))}function getTimestampElement(i){return s.querySelector(`[${ai.DOM.Attributes.VMLElement}="${ai.DOM.ElementTypes.Timestamp}"][${ai.DOM.Attributes.Ply}="${i}"]`)}function getSelectedNodeElement(){return s.querySelector(toClassString(ai.DOM.ClassNames.Selected))}function selectNodeElement(i){const s=getSelectedNodeElement();i!==s&&(s&&deselectNodeElement(s),i.classList.add(ai.DOM.ClassNames.Selected))}function setMaxMoveTimeTaken(i){null!==i?s.style.setProperty(ai.DOM.CSSVariables.MaxMoveTimeTaken,i.toString()):s.style.removeProperty(ai.DOM.CSSVariables.MaxMoveTimeTaken)}function setTimestampElementColor(i,s){s.classList.add(function getTimestampClass(i){return`time-${i}`}(getColorAsWord(i)))}function setTimestampValue({baseTime:i,ply:_,value:T,timestamp:S},C){const P=C||getTimestampElement(_);if(!P)return;const O=function getTimestampWidth(){const i=s.style.getPropertyValue(ai.DOM.CSSVariables.TimestampWidth);return i.length?parseFloat(i):null}(),M=function getMaxMoveTimeTaken(){const i=s.style.getPropertyValue(ai.DOM.CSSVariables.MaxMoveTimeTaken);return i.length?parseFloat(i):null}();if(P.setAttribute(ai.DOM.Attributes.Time,S.toString()),P.style.setProperty(ai.DOM.CSSVariables.TimeValue,S.toString()),P.innerHTML=T,(!O||7*T.length>O)&&function setTimestampWidth(i){const _=7*i;s.style.setProperty(ai.DOM.CSSVariables.TimestampWidth,`${_}px`)}(T.length),i){const _=function getBarWidth(i,s){const _=i/(s/40);return 130/Math.PI*Math.atan(_/3)}(S,millisecondsToDeciseconds(i));return P.style.setProperty(ai.DOM.CSSVariables.TimeBarWidth,`${_}px`),s.classList.add(ai.DOM.ClassNames.WithBaseTime),void(M&&setMaxMoveTimeTaken(null))}s.classList.remove(ai.DOM.ClassNames.WithBaseTime),(!M||S>M)&&setMaxMoveTimeTaken(S)}}!function(i){var s,_,T,S;s=i.DOM||(i.DOM={}),(_=s.Attributes||(s.Attributes={})).Ply="data-ply",_.Time="data-time",_.WholeMoveNumber="data-whole-move-number",_.VMLElement="data-vml-element",(T=s.CSSVariables||(s.CSSVariables={})).TimeBarWidth="--timeBarWidth",T.TimeValue="--timeValue",T.MaxMoveTimeTaken="--timeMaxValue",T.TimestampWidth="--timestampWidth",(S=s.ClassNames||(s.ClassNames={})).ColorsEnabled="movelist-colored",S.List="vertical-move-list",S.GameResult="game-result",S.Move="move",S.Node="node",S.Selected="selected",S.WithBaseTime="timestamps-with-base-time",S.ToggleTimestamps="toggle-timestamps",(s.ElementTypes||(s.ElementTypes={})).Timestamp="timestamp",function(i){i.SelectNode="SelectNode",i.SelectResultNode="SelectResultNode"}(i.Events||(i.Events={}))}(ai||(ai={}));const si={[Wr.Translation.Prompt.AddComment]:()=>Wr.Translation.Prompt.AddComment,[Wr.Translation.Annotations.BadMove]:()=>Wr.Translation.Annotations.BadMove,[Wr.Translation.Annotations.BlackHasDecisiveAdvantage]:()=>Wr.Translation.Annotations.BlackHasDecisiveAdvantage,[Wr.Translation.Annotations.BlackHasModerateAdvantage]:()=>Wr.Translation.Annotations.BlackHasModerateAdvantage,[Wr.Translation.Annotations.BlackHasSlightAdvantage]:()=>Wr.Translation.Annotations.BlackHasSlightAdvantage,[Wr.Translation.Annotations.Blunder]:()=>Wr.Translation.Annotations.Blunder,[Wr.Translation.Actions.ClearAllAnalysis]:()=>Wr.Translation.Actions.ClearAllAnalysis,[Wr.Translation.Actions.DeleteCommentAfter]:()=>Wr.Translation.Actions.DeleteCommentAfter,[Wr.Translation.Actions.DeleteCommentBefore]:()=>Wr.Translation.Actions.DeleteCommentBefore,[Wr.Translation.Actions.DeleteLine]:()=>Wr.Translation.Actions.DeleteLine,[Wr.Translation.Actions.DeleteMove]:()=>Wr.Translation.Actions.DeleteMove,[Wr.Translation.Annotations.Drawish]:()=>Wr.Translation.Annotations.Drawish,[Wr.Translation.Annotations.DubiousMove]:()=>Wr.Translation.Annotations.DubiousMove,[Wr.Translation.Annotations.ExcellentMove]:()=>Wr.Translation.Annotations.ExcellentMove,[Wr.Translation.Tooltips.EnPassant]:()=>Wr.Translation.Tooltips.EnPassant,[Wr.Translation.Annotations.GoodMove]:()=>Wr.Translation.Annotations.GoodMove,[Wr.Translation.Actions.InsertCommentAfter]:()=>Wr.Translation.Actions.InsertCommentAfter,[Wr.Translation.Actions.InsertCommentBefore]:()=>Wr.Translation.Actions.InsertCommentBefore,[Wr.Translation.Actions.InsertContinuation]:()=>Wr.Translation.Actions.InsertContinuation,[Wr.Translation.Actions.MoveVariationDown]:()=>Wr.Translation.Actions.MoveVariationDown,[Wr.Translation.Actions.MoveVariationUp]:()=>Wr.Translation.Actions.MoveVariationUp,[Wr.Translation.Annotations.Novelty]:()=>Wr.Translation.Annotations.Novelty,[Wr.Translation.Pieces.B]:()=>Wr.Translation.Pieces.B,[Wr.Translation.Pieces.K]:()=>Wr.Translation.Pieces.K,[Wr.Translation.Pieces.N]:()=>Wr.Translation.Pieces.N,[Wr.Translation.Pieces.P]:()=>Wr.Translation.Pieces.P,[Wr.Translation.Pieces.Q]:()=>Wr.Translation.Pieces.Q,[Wr.Translation.Pieces.R]:()=>Wr.Translation.Pieces.R,[Wr.Translation.Actions.Promote]:()=>Wr.Translation.Actions.Promote,[Wr.Translation.Actions.RemoveAnnotation]:()=>Wr.Translation.Actions.RemoveAnnotation,[Wr.Translation.Actions.RemoveBegin]:()=>Wr.Translation.Actions.RemoveBegin,[Wr.Translation.Actions.RemoveEnd]:()=>Wr.Translation.Actions.RemoveEnd,[Wr.Translation.Actions.RemoveEvaluationAnnotation]:()=>Wr.Translation.Actions.RemoveEvaluationAnnotation,[Wr.Translation.Actions.RemoveFocus]:()=>Wr.Translation.Actions.RemoveFocus,[Wr.Translation.Actions.SetBegin]:()=>Wr.Translation.Actions.SetBegin,[Wr.Translation.Actions.SetEnd]:()=>Wr.Translation.Actions.SetEnd,[Wr.Translation.Actions.SetFocus]:()=>Wr.Translation.Actions.SetFocus,[Wr.Translation.Annotations.SpeculativeMove]:()=>Wr.Translation.Annotations.SpeculativeMove,[Wr.Translation.Tooltips.ThreeFoldRepetition]:()=>Wr.Translation.Tooltips.ThreeFoldRepetition,[Wr.Translation.Annotations.PositionInZuqZwang]:()=>Wr.Translation.Annotations.PositionInZuqZwang,[Wr.Translation.Annotations.Unclear]:()=>Wr.Translation.Annotations.Unclear,[Wr.Translation.Annotations.WhiteHasDecisiveAdvantage]:()=>Wr.Translation.Annotations.WhiteHasDecisiveAdvantage,[Wr.Translation.Annotations.WhiteHasModerateAdvantage]:()=>Wr.Translation.Annotations.WhiteHasModerateAdvantage,[Wr.Translation.Annotations.WhiteHasSlightAdvantage]:()=>Wr.Translation.Annotations.WhiteHasSlightAdvantage,[Wr.Translation.Annotations.WithAttack]:()=>Wr.Translation.Annotations.WithAttack,[Wr.Translation.Annotations.WithCompensation]:()=>Wr.Translation.Annotations.WithCompensation,[Wr.Translation.Annotations.WithInitiative]:()=>Wr.Translation.Annotations.WithInitiative,[Wr.Translation.Plural.NumberOfDays]:i=>1===i?`${i} day`:`${i} days`,[Wr.Translation.Plural.NumberOfHours]:i=>1===i?`${i} hr`:`${i} hrs`,[Wr.Translation.Plural.NumberOfMinutes]:i=>1===i?`${i} min`:`${i} mins`};var oi,li,ci,ui,di,hi,pi,mi,fi;function decisecondsToDaysHoursMinutesObject(i){const s=Math.ceil(i/10);let _=Math.floor(s/86400),T=Math.floor(s%86400/3600),S=Math.ceil(s%3600/60);return 60===S&&(S=0,T+=1),24===T&&(T=0,_+=1),{days:_,hours:T,minutes:S}}function decisecondsToDaysHoursMinutesString(i,s){const{days:_,hours:T,minutes:S}=decisecondsToDaysHoursMinutesObject(i),C=T>0||S>0?", ":"",P=S>0?", ":"";return`${_>0?`${s[Wr.Translation.Plural.NumberOfDays](_)}${C}`:""}${T>0?`${s[Wr.Translation.Plural.NumberOfHours](T)}${P}`:""}${S>0?`${s[Wr.Translation.Plural.NumberOfMinutes](S)}`:""}`}function decisecondsToHumanReadableFormat(i,s){const{days:_,hours:T,minutes:S}=decisecondsToDaysHoursMinutesObject(i);return _?_>0?`${s[Wr.Translation.Plural.NumberOfDays](_)}`:"":T?T>0?`${s[Wr.Translation.Plural.NumberOfHours](T)}`:"":S>0?`${s[Wr.Translation.Plural.NumberOfMinutes](S)}`:""}function formatDecisecondsAsClockString(i){const s=Math.floor(i/600),_=((i-600*s)/10).toFixed(1);if(0===s)return _;return`${s}:${`0${_}`.substr(-4)}`}function getTimestampElementParameters({formatTimestampAsHumanReadable:i,timestamp:s,translations:_}){return{title:i?decisecondsToDaysHoursMinutesString(s,_):void 0,value:i?decisecondsToHumanReadableFormat(s,_):formatDecisecondsAsClockString(s)}}function getTimestampFromNode(i){var s;return(null==(s=i.commands)?void 0:s.timestamp)?parseInt(i.commands.timestamp,10):null}function createVMLAPIOverrides({resultNodeIsSelectable:i}){return{moveBackward:({api:i})=>function createMoveBackward$2({api:i}){const s=i.moveBackward;return function moveBackward(){i.vml.getMoveList().isResultNodeSelected()?i.selectLineEnd(0):s()}}({api:i}),moveForward:({api:s})=>function createMoveForward$2({api:i,resultNodeIsSelectable:s}){const _=i.moveForward;return function moveForward(...T){var S;if(!s)return void _(...T);const C=i.vml.getMoveList(),P=i.getFEN(),O=null==(S=i.getLastMove())?void 0:S.fen;C.isResultNodeSelected()||(O===P?C.selectResultNode():_(...T))}}({api:s,resultNodeIsSelectable:i})}}function createVerticalMoveListPlugin({colorsEnabled:i=!1,displayTimeInClockFormat:s=!0,el:_,emitter:T=(0,ie.a)(),formatTimestampAsHumanReadable:S=!s,loadLineOnCreate:P=!0,namespace:O=Nt.Plugin.Name,resultNodeIsSelectable:M=!1,scrollContainer:R,showResultNode:D=!0,showTimestamps:j=!0,toggleTimestamps:$=!1,translations:U=si}){let V,Z=!0;const Y=function createReadyStateManager(){let i=!1;const s=createExternallyResolvablePromise();return{isReady:()=>i,ready:function ready(_){var T;i=!0,null==(T=s.resolve)||T.call(s,_)},waitForReady:()=>s.promise}}(),X=createQueue(!1),Q=function createVML({colorsEnabled:i=!1,el:s,epIconInfoPath:_=yr.enPassant,getTimeControl:T,formatTimestampAsHumanReadable:S=!1,moveListDisplayType:C=Ht.MoveListDisplayTypes.Text,resultNodeIsSelectable:P=!1,scrollContainer:O,showResultNode:M=!0,showTimestamps:R=!0,toggleTimestamps:D=!1,translations:j=si}){let $=T;const U=createVMLDOM({colorsEnabled:i,el:s,EPIconInfoPath:_,moveListDisplayType:C,resultNodeIsSelectable:P,scrollContainer:O,toggleTimestamps:D,translations:j});return U.createList(),{addNode:function addNode(i){const s=U.getResult();s!==wr.Results.None&&U.setResultNode(wr.Results.None),U.addNode(i),addTimestamp(i),s!==wr.Results.None&&U.setResultNode(s)},addThreeFoldIcons:function addThreeFoldIcons(i){U.addThreeFoldMoveIcons(i)},create:U.createList,deselectNode:U.deselectNode,destroy:U.destroyList,enableColors:U.enableColors,handleSelectResultNode:function handleSelectResultNode(i){U.isResultNodeSelected()||!i.isResultNode?U.selectNode(i.ply):selectResultNode()},isResultNodeSelected:U.isResultNodeSelected,loadNodes:function loadNodes(i,s){const _=U.getResult();U.clearList(),i.forEach((i=>{U.addNode(i),addTimestamp(i)})),_!==wr.Results.None&&U.setResultNode(_);const T=null!=s?s:U.getLastPly();void 0!==T&&U.selectNode(T),U.scrollToSelectedNode()},selectNode:function selectNode2(i){void 0===i?U.deselectNode():"number"==typeof i?U.selectNode(i):U.selectNodeElement(i),U.scrollToSelectedNode()},selectResultNode:selectResultNode,setMoveListDisplayType:function setMoveListDisplayType2(i){U.setParams({moveListDisplayType:i})},setResult:function setResult(i){M?U.setResultNode(i):U.getResult()!==wr.Results.None&&U.setResultNode(wr.Results.None)},setGetTimeControl:function setGetTimeControl(i){$=i},updateNodeColor:U.updateNodeColor,updateTimestamp:function updateTimestamp(i){const{ply:s}=i,_=getTimestampFromNode(i);if(!s)return;if(null===_)return U.removeTimestamp(s);const{title:T,value:C}=getTimestampElementParameters({formatTimestampAsHumanReadable:S,timestamp:_,translations:j}),P=U.getTimestamp(s);P?P!==_&&U.setTimestampValue({baseTime:getBaseTime(),ply:s,timestamp:_,value:C}):U.addTimestamp({baseTime:getBaseTime(),node:i,timestamp:_,title:T,value:C})}};function addTimestamp(i){const s=getTimestampFromNode(i);if(!s||!R)return;const{title:_,value:T}=getTimestampElementParameters({formatTimestampAsHumanReadable:S,timestamp:s,translations:j});U.addTimestamp({baseTime:getBaseTime(),node:i,timestamp:s,title:_,value:T})}function getBaseTime(){var i;return null==(i=null==$?void 0:$())?void 0:i.baseTime}function selectResultNode(){P&&U.selectResultNode()}}({el:_,formatTimestampAsHumanReadable:S,resultNodeIsSelectable:M,getTimeControl:()=>null,scrollContainer:R||_,showResultNode:D,showTimestamps:j,toggleTimestamps:$,translations:U}),ee=function createUpdateMoveList(i){return function updateMoveList({context:s,event:_,line:T,selectedNode:S,queue:P}){const{data:O,type:M}=_,R=null==S?void 0:S.ply;return M===C.APIEvents.AddMove&&O.listMove?i.addNode(O.listMove):O&&1===O.plyDiff&&S?(i.addNode(S),i.selectNode(R)):M===C.APIEvents.CreateGame||M===C.APIEvents.Load||M===C.APIEvents.DeletePosition?i.loadNodes(T):M===C.APIEvents.LineUpdated?(i.loadNodes(T),i.selectNode(R)):O.moveListDisplayType?(i.setMoveListDisplayType(O.moveListDisplayType),i.loadNodes(T,R)):M===C.APIEvents.NodeUpdated&&O.changes&&Object.prototype.hasOwnProperty.call(O.changes,"timestamp")?i.updateTimestamp(O.changes.node):M===C.APIEvents.UpdatePGNHeaders&&O.Result?(i.setResult(O.Result),s.game.inThreefoldRepetition()&&P.add(i.addThreeFoldIcons,T),s.api.isAtEndOfLine()&&P.add(i.selectResultNode)):0===R?i.deselectNode():M!==C.OptionsEvents.Update&&i.selectNode(R),O.changes&&Object.prototype.hasOwnProperty.call(O.changes,"customColor")&&i.updateNodeColor(O.ids.move+1,O.changes.customColor),R}}(Q);return{api:i=>__spreadProps(__spreadValues({activate:()=>{setActiveStatus(!0),updateVerticalMoveList(createCoreEvent(C.APIEvents.Load),i.api)},deactivate:()=>setActiveStatus(!1)},T),{getMoveList:()=>Q,isActive:()=>Boolean(Z),isReady:()=>Y.isReady(),waitForVMLReady:Y.waitForReady}),apiOverrides:createVMLAPIOverrides({resultNodeIsSelectable:M}),create:function create3(s){var S;const{api:C}=s;Q.setGetTimeControl(C.timeControl.get),Q.create(),i&&Q.enableColors(i);if(P){const i=C.getLine(0),s=null==(S=C.getSelectedNode())?void 0:S.ply,_=C.getOptions().moveListDisplayType;_===Ht.MoveListDisplayTypes.Figurine&&Q.setMoveListDisplayType(_),(null==i?void 0:i.length)&&Q.loadNodes(i,s),D&&(Q.setResult(C.getResult()),C.getContext().game.inThreefoldRepetition()&&Q.addThreeFoldIcons(i))}V=function createVMLEventListeners(i){_.addEventListener(ai.Events.SelectNode,selectNode2),M&&_.addEventListener(ai.Events.SelectResultNode,selectResultNode);return function destroyListener(){_.removeEventListener(ai.Events.SelectNode,selectNode2),M&&_.removeEventListener(ai.Events.SelectResultNode,selectResultNode)};function selectNode2({detail:s}){if(!Z)return;const{ids:_}=s;i.selectNode(_.line,_.move),M&&i.isAtEndOfLine()&&(X.flush(),Q.handleSelectResultNode(s))}function selectResultNode(){Z&&i.getContext().respond(Nt.Events.ResultNodeSelected)}}(C),Y.ready(Q),T.emit(Nt.Events.Ready,Q),Z=C.getOptions().enabled},destroy:function destroy10(){if(null==V||V(),!Q)return;Q.destroy()},match:[{condition:function shouldUpdateMoveList(i){return Z&&isOneOf([...mr,oi.APIEvents.AddMove,C.APIEvents.LineUpdated,C.APIEvents.NodeUpdated,C.APIEvents.DeletePosition,C.APIEvents.UpdatePGNHeaders,C.InstanceEvents.Create,C.InstanceEvents.ModeChanged,C.OptionsEvents.Update])(i)},handler:(i,s)=>updateVerticalMoveList(i,s.api)},{condition:is$1(C.OptionsEvents.Update),handler:i=>{"enabled"in i.data&&setActiveStatus(i.data.enabled)}}],name:O};function updateVerticalMoveList(i,s){var _;const S=s.getRelativeNode();X.add(ee,{context:s.getContext(),event:i,line:null==(_=s.getLine)?void 0:_.call(s,0),selectedNode:isNode(S)?S:void 0,queue:X}),requestAnimationFrame((()=>{requestAnimationFrame((function flushMoveListQueue(){X.flush(),T.emit(Nt.Events.Updated,Q)}))}))}function setActiveStatus(i){Z=i}}function selectNode({node:i,lines:s}){return function getMachineStateForSelectedNode(i,s){return!i||isLine(i)?fi.StartingPosition:i.ids.move===Object.keys(s[i.ids.line]).length-1?fi.EndOfLineSelected:fi.MiddleOfLineSelected}(i,s)}function createHMLStateMachine(){return(0,ie.c)(function getStateMachine$2(){return{initialState:fi.StartingPosition,states:{[fi.StartingPosition]:{[C.APIEvents.SelectNode]:selectNode,[C.APIEvents.Move]:function makeMove({component:i,event:s}){const{api:_,dom:T}=i;return _.getMoveNode({line:s.ids.line,move:s.ids.move})?(_.selectNode({line:s.ids.line,move:s.ids.move}),fi.MiddleOfLineSelected):0!==s.ids.line?(T.insertVariation({node:s}),fi.EndOfLineSelected):(T.insertNode({node:s}),fi.EndOfLineSelected)}},[fi.EndOfLineSelected]:{[C.APIEvents.SelectNode]:selectNode,[C.APIEvents.Move]:function makeMove({component:i,event:s}){const{api:_,dom:T}=i;return T.insertNode({node:s,nodeToInsertAfter:_.getSelectedNode()}),fi.EndOfLineSelected}},[fi.MiddleOfLineSelected]:{[C.APIEvents.SelectNode]:selectNode,[C.APIEvents.Move]:function makeMove({component:i,event:s}){const{api:_,dom:T}=i;return _.getMoveNode({line:s.ids.line,move:s.ids.move})?(_.selectNode({line:s.ids.line,move:s.ids.move}),fi.MiddleOfLineSelected):(T.insertVariation({node:s}),fi.EndOfLineSelected)}}}}}())}(function(i){i.AddMove="AddMove",i.AnalysisEnd="AnalysisEnd",i.AnalysisStart="AnalysisStart"})((li=oi||(oi={})).APIEvents||(li.APIEvents={})),function(i){i.Name="observing"}(li.Plugin||(li.Plugin={})),ui=ci||(ci={}),(di=ui.Placeholders||(ui.Placeholders={})).GameResult="game-result",di.Moves="moves",(hi=ui.ClassNames||(ui.ClassNames={})).Component="horizontal-move-list",hi.MainLine="main",hi.Variation="variation",ui.ComponentIdentifier="data-id",function(i){i.Copy="copy",i.UpdateNodeLimit="UpdateNodeLimit"}(ui.Events||(ui.Events={})),(pi=ui.VariationParenthesis||(ui.VariationParenthesis={})).Before="(",pi.After=")",(mi=ui.NodeLimitTypes||(ui.NodeLimitTypes={})).Begin="begin",mi.Focus="focus",mi.End="end",function(i){i.EndOfLineSelected="EndOfLineSelected",i.MiddleOfLineSelected="MiddleOfLineSelected",i.StartingPosition="StartingPosition"}(fi||(fi={}));const gi={condition:function condition$a({event:i}){return function match2(){return i.type===C.APIEvents.AddMove}},handler:function handler$a({context:i,event:s}){const{moveList:_}=i,{listMove:T}=s.data;if(!(null==T?void 0:T.ids))return;const S=_.api.getMoveNode({line:0,move:T.ids.move-1});_.dom.insertNode({node:T,nodeToInsertAfter:S})}};const vi={condition:function condition$9({event:i}){return function match2(){return i.type===C.APIEvents.CreateContinuation}},handler:function handler$9({context:i,event:s,selectedNode:_}){const{moveList:T,methods:{selectCurrentPosition:S}}=i;if(T.dom.insertVariation({node:s.data.node}),T.api.getMoveNode(s.data.node.ids))return void T.api.selectNode(s.data.node.ids);S(_)}};const bi={condition:function condition$8({event:i}){return function match2(){return C.APIEvents.UpdatePGNHeaders===i.type&&i.data.Result}},handler:function handler$8({context:i,coreContext:s}){const{moveList:_}=i;_.dom.setResultNode(s.api.getResult())}};var yi,_i;function isEditingComment(i){return Boolean(i.getElement().querySelector((0,ie.t)(yi.Classes.Component)))}(function(i){i.FocusOut="comment-field-focus-out",i.CommentChanged="comment-has-changed"})((_i=yi||(yi={})).Events||(_i.Events={})),function(i){i.Component="editable-comment"}(_i.Classes||(_i.Classes={})),function(i){i[i.CommentUpdateDelay=500]="CommentUpdateDelay"}(_i.Constants||(_i.Constants={}));const wi={condition:function condition$7({event:i}){return function match2(){return i.type===C.APIEvents.LineCommentUpdated}},handler:function handler$7({context:i,event:s}){const{moveList:_}=i,{data:T}=s;if(isEditingComment(_.dom))return;_.dom.updateLineComponent(T.lineId,{initComment:T.comment})}};const ki={condition:function condition$6({event:i}){return function match2(){return[C.APIEvents.CreateGame,C.APIEvents.CreateContinuation,C.APIEvents.DeletePosition,C.APIEvents.Load,C.APIEvents.MoveVariation,C.APIEvents.PromoteVariation,C.APIEvents.ResetToMainLine].includes(i.type)||i.data.linesReordered}},handler:function handler$6({context:i,coreContext:s}){const{moveList:_,methods:{destroyContextMenu:T},queue:S}=i,{api:C}=s;T(),S.flush(),_.dom.load(),_.dom.setResultNode(C.getResult())}};const Ti={condition:function condition$5({event:i}){return function match2(){return i.type===C.APIEvents.Move}},handler:function handler$5({context:i,event:s,selectedNode:_}){const{moveList:T,stateMachine:S,methods:{selectCurrentPosition:P}}=i;if(T.api.getMoveNode(s.data.move.ids))return void T.api.selectNode(s.data.move.ids);S.transition(C.APIEvents.Move,{component:T,event:s.data.move,selectedNode:_}),P(_)}};const Si={condition:function condition$4({event:i}){return function match2(){return i.type===C.APIEvents.NodeUpdated}},handler:function handler$4({context:i,event:s}){const{moveList:_}=i,{data:T}=s;if(isEditingComment(_.dom))return;if(!T.ids)return;_.dom.updateMoveNodeComponent(T.ids,T.changes)}};const Ci={condition:function condition$3({event:i}){return function match2(){return[C.APIEvents.ResetToMainLine].includes(i.type)}},handler:function handler$3({context:i}){const{moveList:s}=i;s.dom.load()}};const xi={condition:function condition$2({event:i}){return function match2(){return i.type===C.OptionsEvents.Update}},handler:function handler$2({coreContext:i,context:s,event:_}){const{el:T,moveList:S,methods:{destroyContextMenu:C}}=s,P=i.api.getOptions();S.api.setOptions(_.data),P.test&&setTestData(T,{[mn.Editable]:_.data.moveListContextMenuEnabled});!1===_.data.moveListContextMenuEnabled&&C()}};const Ei={condition:function condition$1({event:i}){return function match2(){return i.type===C.APIEvents.MoveForward||i.type===C.APIEvents.MoveBackward||i.type===C.APIEvents.SelectLineEnd||i.type===C.APIEvents.SelectLineStart||i.type===C.APIEvents.SelectNode||i.type===C.APIEvents.ResetToMainLine}},handler:function handler$1({context:i,selectedNode:s}){const{methods:{selectCurrentPosition:_}}=i;_(s)}};var Pi,Ai,Oi,Mi,zi,Ii,Li,Ri,Ni,Di,ji,Bi,$i,Ui;(function(i){i.ClearAnalysis="ClearAnalysis",i.DeleteComment="DeleteComment",i.DeleteCommentBefore="DeleteCommentBefore",i.DeleteMove="DeleteMove",i.DeleteVariation="DeleteVariation",i.InsertComment="InsertComment",i.InsertCommentBefore="InsertCommentBefore",i.InsertContinuation="InsertContinuation",i.MoveVariationDown="MoveVariationDown",i.MoveVariationUp="MoveVariationUp",i.PromoteVariation="PromoteVariation",i.RemoveAnnotation="RemoveAnnotation",i.RemoveBegin="RemoveBegin",i.RemoveEnd="RemoveEnd",i.RemoveAdditionalAnnotation="RemoveAdditionalAnnotation",i.RemoveFocus="RemoveFocus",i.SetBegin="SetBegin",i.SetEnd="SetEnd",i.SetFocus="SetFocus"})((Ai=Pi||(Pi={})).Actions||(Ai.Actions={})),(Oi=Ai.AnnotationActions||(Ai.AnnotationActions={})).AddAnnotation="AddAnnotation",Oi.AddAdditionalAnnotation="AddAdditionalAnnotation",function(i){i.Actions="actions",i.Translations="translations"}(Ai.Keys||(Ai.Keys={})),function(i){i.ActionClicked="action-clicked",i.AnnotationClicked="annotation-clicked",i.Close="close-context-menu"}(Ai.Events||(Ai.Events={})),function(i){i.Name="contextMenu"}(Ai.Plugin||(Ai.Plugin={})),function(i){i.ActionName="action-name",i.Annotation="annotation",i.AnnotationsContainer="annotations-container",i.Component="move-node-context-menu",i.Divider="divider"}((zi=Mi||(Mi={})).Classes||(zi.Classes={})),function(i){i.Annotation="annotation",i.CustomColor="customColor",i.id="id",i.MoveNumber="moveNumber",i.San="san",i.Selected="selected"}((Li=Ii||(Ii={})).Keys||(Li.Keys={})),(Ri=Li.TouchableKeys||(Li.TouchableKeys={})).Annotation="annotation",Ri.CustomColor="customColor",Ri.MoveNumber="moveNumber",Ri.San="san",function(i){i.Comment="comment",i.GameResultNode="game-result-node",i.IconFont="icon-font-chess",i.MoveNode="move-node",i.MoveNumber="move-number",i.MoveText="move-text",i.Selected="selected",i.StaticComment="static-comment"}((Di=Ni||(Ni={})).Classes||(Di.Classes={})),function(i){i[i.TouchDelay=500]="TouchDelay"}(Di.Constants||(Di.Constants={})),function(i){i.Click="click",i.OpenContextMenu="contextmenu"}(Di.Events||(Di.Events={}));class ChessError extends Error{constructor({code:i,message:s,data:_}){super(s),this.code=i,this.data=_,this.message=s,this.name="ChessError"}}(Bi=ji||(ji={})).BadData="Bad Data",Bi.BeforeStateHooksConflict="Before State hooks conflict",Bi.DOMDoesNotMatchJCE="DOM Does Not Match JCE",Bi.ElementAlreadyExists="Element Already Exists",Bi.ElementNotFound="Element Not Found",Bi.IllegalJCECall="Illegal JCE Call",Bi.IncorrectMode="Incorrect Mode",Bi.InvalidStateMachine="Invalid State Machine",Bi.MissingPluginDependency="Missing Plugin Dependency",(Ui=$i||($i={}))[Ui.MainLine=0]="MainLine",Ui[Ui.MainLineChild=-1]="MainLineChild",Ui[Ui.Parent=1]="Parent";const Fi={[Pi.Actions.InsertCommentBefore]:function createInsertCommentBeforeAction(){return{action:Pi.Actions.InsertCommentBefore,handler:function handler2(i,{moveList:s,context:_}){const{game:T}=_;let S=i;const C=T.getLine(i.ids.line);S=0===i.ids.move&&C?C:T.getNodeByIds(i.previous);s.dom.insertEditableComment(S)},isVisible:function isVisible({api:i,node:s}){if(0===s.ids.move){const _=i.getLine(s.ids.line);return!_||!_.initComment}const _=i.getNodeByIds(s.previous);return isNode(_)&&!_.comment},name:Wr.Translation.Actions.InsertCommentBefore}}(),[Pi.Actions.InsertComment]:function createInsertCommentAction(){return{action:Pi.Actions.InsertComment,handler:function handler2(i,{moveList:s}){s.dom.insertEditableComment(i)},isVisible:function isVisible({node:i}){return void 0===i.comment},name:Wr.Translation.Actions.InsertCommentAfter}}(),[Pi.Actions.DeleteCommentBefore]:function createDeleteCommentBeforeAction(){return{action:Pi.Actions.DeleteCommentBefore,handler:function handler2(i,{context:{game:s},moveList:_,moveNodeComponent:T}){let S=i;const C=s.getLine(i.ids.line);C&&0===i.ids.move?(S=C,s.updateLineComment(void 0,C.id)):(S=s.getNodeByIds(i.previous),s.updateNode(S.ids,{comment:void 0}),T.touch(Ii.TouchableKeys.MoveNumber));_.dom.removeComment(S)},isVisible:function isVisible({api:i,node:s}){if(0===s.ids.move){const _=i.getLine(s.ids.line);return Boolean(_&&_.initComment)}const _=i.getNodeByIds(s.previous);return isNode(_)&&Boolean(_.comment)},name:Wr.Translation.Actions.DeleteCommentBefore}}(),[Pi.Actions.DeleteComment]:function createDeleteCommentAction(){return{action:Pi.Actions.DeleteComment,handler:function handler2(i,{context:{game:s},moveList:_,moveNodeComponent:T}){s.updateNode(i.ids,{comment:void 0}),_.dom.removeComment(i),T.touchNextNode()},isVisible:function isVisible({node:i}){return"string"==typeof i.comment},name:Wr.Translation.Actions.DeleteCommentAfter}}(),[Pi.Actions.RemoveAnnotation]:function createRemoveAnnotationAction(){return{action:Pi.Actions.RemoveAnnotation,handler:function handler2(i,{context:{game:s},moveNodeComponent:_}){s.updateNode(i.ids,{annotation:void 0}),_.touch(Ii.TouchableKeys.Annotation)},isVisible:function isVisible({node:i}){return Boolean(i.annotation)},name:Wr.Translation.Actions.RemoveAnnotation}}(),[Pi.Actions.RemoveAdditionalAnnotation]:function createRemoveAdditionalAnnotationAction(){return{action:Pi.Actions.RemoveAdditionalAnnotation,handler:function handler2(i,{context:{game:s},moveNodeComponent:_}){s.updateNode(i.ids,{additionalAnnotation:void 0}),_.touch(Ii.TouchableKeys.Annotation)},isVisible:function isVisible({node:i}){return Boolean(i.additionalAnnotation&&i.additionalAnnotation.length>0)},name:Wr.Translation.Actions.RemoveEvaluationAnnotation}}(),[Pi.Actions.DeleteVariation]:function createDeleteVariationAction(){return{action:Pi.Actions.DeleteVariation,handler:function handler2(i,{context:{game:s},moveList:_}){s.deletePosition(-1,i.ids.line),_.dom.load()},isVisible:function isVisible({node:i}){return 0!==i.ids.line},name:Wr.Translation.Actions.DeleteLine}}(),[Pi.Actions.DeleteMove]:function createDeleteMoveAction(){return{action:Pi.Actions.DeleteMove,handler:function handler2(i,{context:{game:s}}){s.deletePosition(i.ids.move,i.ids.line)},isVisible:function isVisible({api:i,node:s}){if(0===s.ids.line)return i.getMode().getOptions().canModifyExistingMovesOnMainLine;return!0},name:Wr.Translation.Actions.DeleteMove}}(),[Pi.Actions.PromoteVariation]:function createPromoteVariationAction(){return{action:Pi.Actions.PromoteVariation,handler:function handler2(i,{context:{game:s}}){s.promoteVariation(i.ids.line,$i.Parent)},isVisible:function isVisible({api:i,node:s}){const _=s.ids.line;if(0===_)return!1;const T=i.getLine(_);if(!T)return!1;if(0===T.parentId){const{canAddMovesToMainLine:s,canModifyExistingMovesOnMainLine:_}=i.getMode().getOptions();return s&&_}return!0},name:Wr.Translation.Actions.Promote}}(),[Pi.Actions.MoveVariationDown]:function createMoveVariationDownAction(){return{action:Pi.Actions.MoveVariationDown,handler:function handler2(i,{context:{game:s}}){s.moveVariation(i.ids.line,!1)},isVisible:function isVisible({api:i,node:s}){if(0===s.ids.line)return!1;const _=i.getLine(s.ids.line);if(!_)return!1;const T=i.getNodeByIds({line:_.parentId,move:_.atMoveNode});if(T.lines&&T.lines.length>1)return!function isOnLastLineOfParentNode(i,s){return!!s.lines&&i.ids.line===s.lines[s.lines.length-1]}(s,T);return!1},name:Wr.Translation.Actions.MoveVariationDown}}(),[Pi.Actions.MoveVariationUp]:function createMoveVariationUpAction(){return{action:Pi.Actions.MoveVariationUp,handler:function handler2(i,{context:{game:s}}){s.moveVariation(i.ids.line,!0)},isVisible:function isVisible({api:i,node:s}){if(0===s.ids.line)return!1;const _=i.getLine(s.ids.line);if(!_)return!1;const T=i.getNodeByIds({line:_.parentId,move:_.atMoveNode});if(T.lines&&T.lines.length>1)return!function isOnFirstLineOfParentNode(i,s){return!!s.lines&&i.ids.line===s.lines[0]}(s,T);return!1},name:Wr.Translation.Actions.MoveVariationUp}}(),[Pi.Actions.InsertContinuation]:function createInsertContinuationAction(){return{action:Pi.Actions.InsertContinuation,handler:function handler2(i,{context:{game:s}}){s.createContinuation()},isVisible:function isVisible({api:i,node:s}){const _=i.getRawLines();return s.ids.move===_[s.ids.line].length-1},name:Wr.Translation.Actions.InsertContinuation}}(),[Pi.Actions.ClearAnalysis]:function createClearAnalysisAction(){return{action:Pi.Actions.ClearAnalysis,handler:function handler2(i,{context:{game:s},event:_,moveList:T}){s.hml.contextMenu.requestConfirmation({action:function onConfirmation(){const _=Object.keys(T.api.getNodes()),S=s.getLine(0);if(!S)return;const C={};if(_.length>1)for(let i=_.length-1;i>0;i--){const _=s.getLine(i);if(!_)return;T.dom.removeLine(_),0===_.parentId&&(C[_.atMoveNode]=!0)}Object.keys(T.api.getComments()).forEach((i=>{T.api.getComments()[i].destroy()})),s.resetToMainLine(),S.forEach((_=>{var S,P;const O=[];let M=!1;if(C[_.ids.move]&&O.push(Ii.TouchableKeys.MoveNumber),(_.annotation||_.additionalAnnotation)&&O.push(Ii.TouchableKeys.Annotation),_.comment&&_.color===wr.ColorsAsNumbers.White&&(M=!0),s.updateNode(_.ids,{additionalAnnotation:void 0,annotation:void 0,comment:void 0}),null==(S=i.commands)||delete S.href,null==(P=i.commands)||delete P.text,Object.keys(O).length>0||M){const s=T.api.getMoveNode(_.ids);if(!s)throw new ChessError({code:ji.ElementNotFound,data:i,message:"No move node found."});O.forEach((i=>{s.touch(i)})),s.touchNextNode()}})),S.initComment&&s.updateLineComment(void 0,S.id)},data:{event:_},text:"Are you sure you want to clear all analysis?",type:Pi.Actions.ClearAnalysis})},isVisible:()=>!0,name:Wr.Translation.Actions.ClearAllAnalysis}}()};function createContextMenuAPI(i){return function createConfirmations(i){const s=new Map;let _=i;return{cancelConfirmation:cancelConfirmation,cancelAllConfirmations:function cancelAllConfirmations(){s.clear()},confirmAction:confirmAction,registerConfirmationCallback:function registerConfirmationCallback(i){_=i},requestConfirmation:async function requestConfirmation(i){const{action:T,data:S,text:C,type:P}=i;return s.set(P,T),_?await _({data:S,text:C,type:P})?confirmAction(P):cancelConfirmation(P):window.confirm(C)?confirmAction(P):void cancelConfirmation(P)}};function cancelConfirmation(i){s.delete(i)}function confirmAction(i){var _;null==(_=s.get(i))||_(),s.delete(i)}}(i)}function createContextMenuPlugin(i){return{api:()=>createContextMenuAPI(i),destroy:function destroy10(i){if(!i)return;i.game.hml.contextMenu.cancelAllConfirmations()},name:Pi.Plugin.Name}}function createGetContextMenuActions(i){return function getContextMenuActions(s){const{contextMenuActions:_,game:T}=i,S=T.getNodeByIds(s);if(!isNode(S))throw new ChessError({code:ji.BadData,data:s,message:"No move node found"});const C=[];return Object.values(_).forEach((s=>{if(!s)return;s.isVisible({api:T,node:S,options:T.getOptions(),state:i.state})&&C.push(s)})),C}}function createGetMoveNodeMethod(i){return function getMoveNode({line:s,move:_}){const{state:T}=i;return T.nodes[s]&&i.state.nodes[s][_]}}function createResetSelectedNode(i){return function resetSelectedNode(){const{state:s}=i;s.selectedNode&&(s.selectedNode.set({[Ii.Keys.Selected]:!1}),s.selectedNode=void 0)}}function createSelectLineStart$1(i){return function selectLineStart(s){const{api:_,stateMachine:T}=i;_.resetSelectedNode(),T.transition(C.APIEvents.SelectNode,{lines:_.getNodes(),node:s})}}function getLineElement(i,s){return s.querySelector(`[${ci.ComponentIdentifier}="line-${i}"]`)}function forceNextFrame(i,s=[]){requestAnimationFrame((()=>{requestAnimationFrame((()=>{i(...s)}))}))}function createSelectNodeMethod(i){return function selectNode2({line:s,move:_}){const{api:T,el:S,scrollContainer:P,state:O,stateMachine:M}=i;if(void 0===s||void 0===_)return;T.resetSelectedNode();const R=T.getMoveNode({line:s,move:_});R&&(R.set({[Ii.Keys.Selected]:!0}),O.selectedNode=R,M.transition(C.APIEvents.SelectNode,{lines:T.getNodes(),node:O.selectedNode.getNodeData()}),forceNextFrame((()=>{S.classList.contains(ci.ClassNames.Component)&&(0===R.ids.line||getLineElement(R.ids.line,S))&&function scrollToNode({containerEl:i,moveNode:s,moveListEl:_}){let T;try{T=s.getElement()}catch(S){}T&&scrollToNode$1({containerEl:i,moveListEl:_,nodeEl:T})}({containerEl:P,moveListEl:S,moveNode:R})})))}}function setMoveListDisplayType(i){!function forEachNode(i,s){Object.keys(i).forEach((_=>{(Object.keys(i[_])||[]).forEach((T=>{s(i[_][T])}))}))}(i.api.getNodes(),(function touchSan2(i){i.touch(Ii.TouchableKeys.San)}))}function setMoveListContextMenuEnabled(i){const s=i.state.comments;Object.keys(s).forEach((_=>{s[_][i.options.moveListContextMenuEnabled?"registerClickListeners":"deregisterClickListeners"]()}))}function createSetOptionsMethod(i){const s={moveListContextMenuEnabled:setMoveListContextMenuEnabled,moveListDisplayType:setMoveListDisplayType};return function setOptions(_){Object.keys(i.options).forEach((T=>{if(!(T in _))return;const S=i.options[T]!==_[T];i.options[T]=_[T],S&&s[T]&&s[T](i)}))}}var Hi;function create_if_block$2(i){let s,_,T;return{c(){s=(0,ie.f)("span"),_=(0,ie.h)(i[2]),(0,ie.j)(s,"class",T=(0,ie.n)(Ni.Classes.MoveNumber)+" svelte-1v5xoi5")},m(i,T){(0,ie.k)(i,s,T),(0,ie.m)(s,_)},p(i,s){4&s&&(0,ie.o)(_,i[2])},d(i){i&&(0,ie.q)(s)}}}function create_fragment$4(i){let s,_,T,S,C,P,O,M,R=(i[4]||"")+"",D=i[2]&&create_if_block$2(i);return{c(){s=(0,ie.f)("span"),D&&D.c(),_=(0,ie.r)(),T=(0,ie.f)("span"),S=new ie.H,C=(0,ie.u)(),P=new ie.H,S.a=C,P.a=null,(0,ie.j)(T,"class",(0,ie.n)(Ni.Classes.MoveText)+" svelte-1v5xoi5"),(0,ie.j)(s,"data-id",i[1]),(0,ie.j)(s,"class",(0,ie.n)(Ni.Classes.MoveNode)+" svelte-1v5xoi5"),(0,ie.v)(s,"customColor",i[0]),(0,ie.v)(s,"selected",i[5])},m(j,$){(0,ie.k)(j,s,$),D&&D.m(s,null),(0,ie.m)(s,_),(0,ie.m)(s,T),S.m(i[3],T),(0,ie.m)(T,C),P.m(R,T),O||(M=[(0,ie.w)(s,"click",i[7]),(0,ie.w)(s,"contextmenu",i[6]),(0,ie.w)(s,"touchstart",i[8]),(0,ie.w)(s,"touchend",i[9],{passive:!0})],O=!0)},p(i,[T]){i[2]?D?D.p(i,T):(D=create_if_block$2(i),D.c(),D.m(s,_)):D&&(D.d(1),D=null),8&T&&S.p(i[3]),16&T&&R!==(R=(i[4]||"")+"")&&P.p(R),2&T&&(0,ie.j)(s,"data-id",i[1]),1&T&&(0,ie.v)(s,"customColor",i[0]),32&T&&(0,ie.v)(s,"selected",i[5])},i:ie.x,o:ie.x,d(i){i&&(0,ie.q)(s),D&&D.d(),O=!1,(0,ie.y)(M)}}}function instance$4(i,s,_){const T=(0,ie.z)();let S,{customColor:C}=s,{id:P}=s,{moveListEl:O}=s,{moveNumber:M}=s,{san:R}=s,{annotation:D}=s,{selected:j}=s;function dispatchContextMenu(i){i.preventDefault(),T(Ni.Events.OpenContextMenu)}function handleNodeClick(i){T(Ni.Events.Click)}return i.$$set=i=>{"customColor"in i&&_(0,C=i.customColor),"id"in i&&_(1,P=i.id),"moveListEl"in i&&_(10,O=i.moveListEl),"moveNumber"in i&&_(2,M=i.moveNumber),"san"in i&&_(3,R=i.san),"annotation"in i&&_(4,D=i.annotation),"selected"in i&&_(5,j=i.selected)},i.$$.update=()=>{1&i.$$.dirty&&function updateNodeColorVariables(i){const s=O.querySelector(`[${ci.ComponentIdentifier}="${P}"]`);s&&addCustomColor(s,i)}(C)},[C,P,M,R,D,j,dispatchContextMenu,handleNodeClick,function handleTouchStart(i){handleNodeClick(),S=setTimeout((()=>{dispatchContextMenu(i),S=null}),Ni.Constants.TouchDelay)},function handleTouchEnd(){S&&clearTimeout(S)},O]}class Move_node extends ie.b{constructor(i){super(),(0,ie.i)(this,i,instance$4,create_fragment$4,ie.d,{customColor:0,id:1,moveListEl:10,moveNumber:2,san:3,annotation:4,selected:5})}}function createSvelteComponent({ComponentType:i,methods:s,options:_,replaceContainer:T=!0}){const S=T?function replaceContainer(i,s){const _=document.createDocumentFragment(),T=new i(Object.assign({},s,{target:_}));return s.target.replaceWith(_),T}(i,_):new i(_),C={destroy:function destroy10(){S.$destroy()},el:_.target,get:function get2(i){if("string"==typeof i)return S.$$.ctx[i];return(0,ie.A)(S.$$.ctx,i)},instance:S,on:function on(i,s){S.$on(i,s)},set:function set3(i){S.$set(i)}};return s&&s.length&&s.forEach((i=>{C[i]=S[i]})),C}function isNagFormat(i){return Boolean(i&&"$"===i.charAt(0))}!function(i){var s,_;(s=i.Nags||(i.Nags={})).$1="$1",s.$2="$2",s.$3="$3",s.$4="$4",s.$5="$5",s.$6="$6",s.$10="$10",s.$11="$11",s.$12="$12",s.$13="$13",s.$14="$14",s.$15="$15",s.$16="$16",s.$17="$17",s.$18="$18",s.$19="$19",s.$22="$22",s.$36="$36",s.$40="$40",s.$146="$146",s.$256="$256",(_=i.Values||(i.Values={})).$1="!",_.$2="?",_.$3="!!",_.$4="??",_.$5="!?",_.$6="?!",_.$10="=",_.$11="=",_.$12="=",_.$13="",_.$14="",_.$15="",_.$16="",_.$17="",_.$18="+-",_.$19="-+",_.$22="",_.$40="",_.$146="N",_.$256="=/"}(Hi||(Hi={}));const qi={$1:"!",$2:"?",$3:"!!",$4:"??",$5:"!?",$6:"?!",$10:"=",$11:"=",$12:"=",$13:"",$14:"",$15:"",$16:"",$17:"",$18:"+-",$19:"-+",$22:"",$23:"",$32:"",$33:"",$36:"",$37:"",$40:"",$41:"",$44:"/=",$45:"=/",$132:"",$133:"",$146:"N",$256:"=/"},Vi={"??":"?\\?","!?":"!\\?","-+":"-\\+","/=":"\\/\\=","=/":"=\\/\\","=":"s=",N:"N\\b"},Gi=["!","?","!!","??","!?","?!","="],Zi=(0,ie.B)(qi),Wi=[{action:Pi.AnnotationActions.AddAnnotation,code:Hi.Nags.$1,display:qi.$1,meaning:Wr.Translation.Annotations.GoodMove},{action:Pi.AnnotationActions.AddAnnotation,code:Hi.Nags.$2,display:qi.$2,meaning:Wr.Translation.Annotations.BadMove},{action:Pi.AnnotationActions.AddAnnotation,code:Hi.Nags.$3,display:qi.$3,meaning:Wr.Translation.Annotations.ExcellentMove},{action:Pi.AnnotationActions.AddAnnotation,code:Hi.Nags.$4,display:qi.$4,meaning:Wr.Translation.Annotations.Blunder},{action:Pi.AnnotationActions.AddAnnotation,code:Hi.Nags.$5,display:qi.$5,meaning:Wr.Translation.Annotations.SpeculativeMove},{action:Pi.AnnotationActions.AddAnnotation,code:Hi.Nags.$6,display:qi.$6,meaning:Wr.Translation.Annotations.DubiousMove},{action:Pi.AnnotationActions.AddAdditionalAnnotation,code:Hi.Nags.$10,display:qi.$10,meaning:Wr.Translation.Annotations.Drawish},{action:Pi.AnnotationActions.AddAdditionalAnnotation,code:Hi.Nags.$13,display:qi.$13,meaning:Wr.Translation.Annotations.Unclear},{action:Pi.AnnotationActions.AddAdditionalAnnotation,code:Hi.Nags.$14,display:qi.$14,meaning:Wr.Translation.Annotations.WhiteHasSlightAdvantage},{action:Pi.AnnotationActions.AddAdditionalAnnotation,code:Hi.Nags.$15,display:qi.$15,meaning:Wr.Translation.Annotations.BlackHasSlightAdvantage},{action:Pi.AnnotationActions.AddAdditionalAnnotation,code:Hi.Nags.$16,display:qi.$16,meaning:Wr.Translation.Annotations.WhiteHasModerateAdvantage},{action:Pi.AnnotationActions.AddAdditionalAnnotation,code:Hi.Nags.$17,display:qi.$17,meaning:Wr.Translation.Annotations.BlackHasModerateAdvantage},{action:Pi.AnnotationActions.AddAdditionalAnnotation,code:Hi.Nags.$18,display:qi.$18,meaning:Wr.Translation.Annotations.WhiteHasDecisiveAdvantage},{action:Pi.AnnotationActions.AddAdditionalAnnotation,code:Hi.Nags.$19,display:qi.$19,meaning:Wr.Translation.Annotations.BlackHasDecisiveAdvantage},{action:Pi.AnnotationActions.AddAdditionalAnnotation,code:Hi.Nags.$22,display:qi.$22,meaning:Wr.Translation.Annotations.PositionInZuqZwang},{action:Pi.AnnotationActions.AddAdditionalAnnotation,code:Hi.Nags.$36,display:qi.$36,meaning:Wr.Translation.Annotations.WithInitiative},{action:Pi.AnnotationActions.AddAdditionalAnnotation,code:Hi.Nags.$40,display:qi.$40,meaning:Wr.Translation.Annotations.WithCompensation},{action:Pi.AnnotationActions.AddAdditionalAnnotation,code:Hi.Nags.$146,display:qi.$146,meaning:Wr.Translation.Annotations.Novelty},{action:Pi.AnnotationActions.AddAdditionalAnnotation,code:Hi.Nags.$256,display:qi.$256,meaning:Wr.Translation.Annotations.WithAttack}];function normalizeAnnotation(i){return i&&(Object.prototype.hasOwnProperty.call(qi,i)||Object.prototype.hasOwnProperty.call(Zi,i))?isNagFormat(i)?qi[i]:normalizeAnnotation(Zi[i]):i||""}function generateAnnotationString(i){let s="";return i.annotation&&(s=`${s}${normalizeAnnotation(i.annotation)}`),i.additionalAnnotation&&i.additionalAnnotation[0]&&(s=`${s}&nbsp;${normalizeAnnotation(i.additionalAnnotation[0])}`),s}function getNodeDisplayNumber({node:i,previous:s,startingMoveNumber:_=1}){let T="";if(!i)return T;const S=function getMoveNumber$1({color:i,ply:s,startingMoveNumber:_=1}){let T;return T=i===wr.ColorsAsNumbers.White?Math.ceil(s/2+1):Math.floor(s/2+1),T+(_-1)}({color:i.color,ply:i.moveNumber,startingMoveNumber:_});return function shouldShowDisplayNumber(i,s){return Boolean(i.color===wr.ColorsAsNumbers.White||i.ids&&0===i.ids.move||s&&"string"==typeof s.comment||s&&s.lines&&s.lines.length)}(i,s)&&(T+=`${S}.`,function shouldShowEllipsisOnBlackMoveNumber(i,s){return Boolean(i.color===wr.ColorsAsNumbers.Black&&(s&&"string"==typeof s.comment||s&&s.lines&&s.lines.length||i.ids&&0===i.ids.move))}(i,s)&&(T+="..")),T}const Ki={[Ii.Keys.MoveNumber]:function touchMoveNumber({game:i,node:s}){return getNodeDisplayNumber({node:s,previous:(null==s?void 0:s.previous)?i.getNodeByIds(s.previous):void 0,startingMoveNumber:i.getStartingMoveNumber()})},[Ii.Keys.Annotation]:function touchAnnotations({node:i}){return generateAnnotationString(i)},[Ii.Keys.CustomColor]:function touchCustomColor({node:i}){return i.customColor},[Ii.Keys.San]:function touchSan({moveList:i,node:s,translations:_}){return formatText({color:getColorAsWord(null==s?void 0:s.color),moveListDisplayType:i.getOptions().moveListDisplayType,san:null==s?void 0:s.san,translations:_})}};function createMoveNode({moveList:i,game:s,node:_,options:T,emitter:S,translations:C}){if(isLine(_))throw new ChessError({code:ji.BadData,data:_,message:"Invalid move ids."});const P=function createMoveNodeComponent(i,{anchor:s,props:_}){return createSvelteComponent({ComponentType:Move_node,options:{anchor:s,props:_,target:i},replaceContainer:!1})}(T.target,{anchor:T.anchor,props:{annotation:generateAnnotationString(_),id:getId(),moveListEl:i.dom.getElement(),moveNumber:Ki[Ii.Keys.MoveNumber](createTouchContext()),san:Ki[Ii.Keys.San](createTouchContext()),selected:!1}}),O={addNodeStyles:function addNodeStyles(i){const s=getElement();i&&Object.assign(s.style,i)},destroy:P.destroy,getElement:getElement,getId:getId,getNodeData:getNodeData,ids:_.ids,insertBeforeNode:function insertBeforeNode(i){const s=getElement();s.parentNode&&s.parentNode.insertBefore(i,s)},insertAfterNode:function insertAfterNode(s){const _=i.dom.getElement(),T=getElement();T.nextElementSibling?_.insertBefore(s,T.nextElementSibling):_.appendChild(s)},removeNodeStyles:function removeNodeStyles(){getElement().removeAttribute("style")},set:P.set,touch:function touch(i){P.set({[i]:Ki[i](createTouchContext())})},touchNextNode:function touchNextNode(s=[Ii.TouchableKeys.MoveNumber]){const T=i.api.getMoveNode({line:_.ids.line,move:_.ids.move+1});T&&s.forEach((i=>T.touch(i)))}};return function registerComponentListeners(){P.on(Ni.Events.Click,(function selectNode2(){i.api.getOptions().enabled&&s.selectNode(_.ids.line,_.ids.move)})),P.on(Ni.Events.OpenContextMenu,(function emitContextMenuOpen(){i.api.getOptions().moveListContextMenuEnabled&&(s.selectNode(_.ids.line,_.ids.move),S.emit(Ni.Events.OpenContextMenu,{node:_}))}))}(),O;function createTouchContext(){return{game:{getNodeByIds:s.getNodeByIds,getStartingMoveNumber:s.getStartingMoveNumber},moveList:{getOptions:i.api.getOptions},node:getNodeData(),translations:C}}function getElement(){var s;const T=i.dom.getElement(),S=`[${ci.ComponentIdentifier}="${getId()}"]`,C=null!=(s=T.querySelector(S))?s:P.el.querySelector(S);if(!C)throw new ChessError({code:ji.ElementNotFound,data:_.ids,message:`Move node element was not found for ${_.ids.line}-${_.ids.move}.`});return C}function getId(){const i=_.ids;return`move-node-${i.line}-${i.move}`}function getNodeData(){return s.getNodeByIds(_.ids)}}function createAddNodeMethod(i){return function addNode(s,_){var T;const{game:S,getComponent:C,state:P,stateMachine:O,translations:M}=i,R=s.ids;return void 0===P.nodes[R.line]&&(P.nodes[R.line]={}),void 0!==P.nodes[R.line][R.move]&&P.nodes[R.line][R.move].destroy(),P.nodes[R.line][R.move]=createMoveNode({emitter:O,game:S,moveList:null!=(T=C())?T:i.el,node:s,options:_,translations:M}),P.nodes[R.line][R.move]}}function disableContextMenu(i){i.preventDefault()}function createDestroyMethod(i){return function destroy10(){const{dom:s,el:_,queue:T}=i;_.classList.remove(ci.ClassNames.Component),_.removeEventListener("contextmenu",disableContextMenu),s.reset(),T.clear()}}function stripHTMLTags(i,s){if(s){const s=["br"],_=s.map((i=>`\\/${i}`)),T=s.concat(_).join("|"),S=new RegExp(`<(?!${T}s*/?)[^>]+>`,"g");return i.replace(S,"")}return i.replace(/<\/?[^>]+(>|$)/g,"")}function cleanCommentString(i){let s;return s=function decodeHTMLEntities(i){const s=document.createElement("textarea");return s.innerHTML=i.replace(/&nbsp;/g," "),s.value}(stripHTMLTags(i))," "===s&&(s=""),s}function create_fragment$3(i){let s,_,T,S,C;return{c(){s=(0,ie.f)("span"),_=(0,ie.h)(i[2]),(0,ie.j)(s,"class",(0,ie.n)(yi.Classes.Component)+" svelte-17mydln"),(0,ie.j)(s,"contenteditable","true"),(0,ie.j)(s,"placeholder",T=i[0]["Add Comment..."]())},m(T,P){(0,ie.k)(T,s,P),(0,ie.m)(s,_),i[7](s),S||(C=[(0,ie.w)(s,"focusin",i[3]),(0,ie.w)(s,"focusout",i[4]),(0,ie.w)(s,"input",i[5])],S=!0)},p(i,[S]){4&S&&(0,ie.o)(_,i[2]),1&S&&T!==(T=i[0]["Add Comment..."]())&&(0,ie.j)(s,"placeholder",T)},i:ie.x,o:ie.x,d(_){_&&(0,ie.q)(s),i[7](null),S=!1,(0,ie.y)(C)}}}function instance$3(i,s,_){let T;const S=(0,ie.z)();let C,{comment:P=""}=s,{translations:O}=s;return(0,ie.C)((()=>{C.focus()})),i.$$set=i=>{"comment"in i&&_(6,P=i.comment),"translations"in i&&_(0,O=i.translations)},i.$$.update=()=>{64&i.$$.dirty&&_(2,T=P||"")},[O,C,T,function selectCommentText(){P&&document.execCommand("selectAll",!1,null)},function handleFocusOut(){S(yi.Events.FocusOut,C.innerHTML)},function handleInput(){S(yi.Events.CommentChanged,C.innerHTML)},P,function span_binding(i){ie.D[i?"unshift":"push"]((()=>{C=i,_(1,C)}))}]}class Editable_comment extends ie.b{constructor(i){super(),(0,ie.i)(this,i,instance$3,create_fragment$3,ie.d,{comment:6,translations:0})}}function getLineEditableCommentConfig(i,{moveList:s,api:_}){let T,S;S=0===i.id?s.dom.getElement():getLineElement(i.id,s.dom.getElement());const C=s.api.getMoveNode({line:i.id,move:0});return C&&(T=C.getElement()),{anchor:T,comment:i.initComment,element:S,handler:function saveComment(T,S){!function updateLineComment(i,{api:s,comment:_,moveList:T,noUIUpdates:S}){s.updateLineComment("string"==typeof _&&_.length>0?_:void 0,i.id),!S&&i.initComment&&(0===i.id?T.dom.getElement():getLineElement(i.id,T.dom.getElement())).prepend(T.dom.addComment(i))}(i,{api:_,comment:T,moveList:s,noUIUpdates:S})}}}function createInsertEditableCommentMethod(i){return function insertEditableComment(s){const{dom:_,game:T,getComponent:S,translations:C}=i;let P,O;if(isNode(s))P=function getNodeEditableCommentConfig(i,{moveList:s,api:_}){const T=s.api.getMoveNode(i.ids);if(!T)throw new ChessError({code:ji.ElementNotFound,data:i,message:"No move node found."});return{comment:i.comment,element:T.getElement(),handler:function saveComment(i,S){!function updateNodeComment(i,{api:s,comment:_,moveList:T,noUIUpdates:S}){s.updateNode(i.ids,{comment:"string"==typeof _&&_.length>0?_:void 0}),S||(i.getNodeData().comment&&i.getElement().appendChild(T.dom.addComment(i.getNodeData())),i.touchNextNode())}(T,{api:_,comment:i,moveList:s,noUIUpdates:S})}}}(s,{api:T,moveList:S()});else{if(!isLine(s))throw new ChessError({code:ji.BadData,data:s,message:"No line or node found"});P=getLineEditableCommentConfig(s,{api:T,moveList:S()})}_.removeEditableComment(),i.editableCommentComponent=function createEditableCommentComponent(i,{anchor:s,props:_}){return createSvelteComponent({ComponentType:Editable_comment,options:{anchor:s,props:_,target:i},replaceContainer:!1})}(P.element,{anchor:P.anchor,props:{comment:P.comment,translations:C}}),i.editableCommentComponent.on(yi.Events.CommentChanged,(function handleCommentChange({detail:i}){clearTimeout(O),O=window.setTimeout((()=>{!function saveComment(i=""){const s=cleanCommentString(i);P.handler(s,!0)}(i)}),yi.Constants.CommentUpdateDelay)})),i.editableCommentComponent.on(yi.Events.FocusOut,(function saveAndDestroy({detail:s}){clearTimeout(O);const _=cleanCommentString(s);P.handler(_),i.dom.removeEditableComment()}))}}var Yi,Xi,Qi,Ji;function getCommentElementId(i){if(isLine(i))return`line-comment-${i.id}`;if(isNode(i))return`move-node-comment-${i.ids.line}-${i.ids.move}`;throw new ChessError({code:ji.BadData,data:i,message:"No line or node found"})}function convertCommentNagsToAnnotation(i){return i.split(" ").map((i=>isNagFormat(i)?normalizeAnnotation(i):i)).join(" ")}function createAddCommentMethod(i){return function addComment(s,_=!0,T){const{dom:S,options:C,state:P,stateMachine:O}=i,M=Boolean("isCommentEnabled"in s?s.isCommentEnabled:_),R=function createCommentComponent({commentLinkData:i,lineOrNode:s,context:_}){const T=getCommentElementId(s);let S,C,P,O=!1;if(isLine(s))S=convertCommentNagsToAnnotation(s.initComment),P={line:s.id,move:0};else{if(!isNode(s))throw new ChessError({code:ji.BadData,data:s,message:"No line or node found"});S=s.comment?convertCommentNagsToAnnotation(s.comment):s.comment,P=s.ids}return function createElement(){var s;const P=i?"a":"span";C=document.createElement(P),C.setAttribute(ci.ComponentIdentifier,T),C.innerHTML=stripHTMLTags((null!=(s=null==i?void 0:i.text)?s:S)||"",!0),C.classList.add(Ni.Classes.Comment,Ni.Classes.StaticComment),i&&(C.setAttribute("href",i.href),C.setAttribute("target","_blank")),_.editingEnabled&&!i&&registerClickListeners()}(),{deregisterClickListeners:deregisterClickListeners,destroy:destroy10,getElement:()=>C,getId:()=>T,registerClickListeners:registerClickListeners};function destroy10(){deregisterClickListeners(),_.removeCommentFromMoveList(T)}function registerClickListeners(){O||(C.addEventListener("click",handleCommentClick,{once:!0}),C.addEventListener("contextmenu",handleContextMenuClick),O=!0)}function deregisterClickListeners(){C.removeEventListener("click",handleCommentClick),C.removeEventListener("contextmenu",handleContextMenuClick),O=!1}function handleCommentClick(){destroy10(),_.emitter.emit(Yi.Events.Click,s)}function handleContextMenuClick(i){i.preventDefault(),_.emitter.emit(Ni.Events.OpenContextMenu,{node:{ids:P}})}}({commentLinkData:null!=T?T:null,lineOrNode:s,context:{editingEnabled:C.moveListContextMenuEnabled&&M,emitter:O,removeCommentFromMoveList(){S.removeComment(s)}}});return P.comments[R.getId()]&&S.removeComment(s),P.comments[R.getId()]=R,R.getElement()}}function isMainLine(i){return 0===i}function createInsertNodeMethod(i){return function insertNode2({node:s,nodeToInsertAfter:_}){const{dom:T,el:S,placeholders:C}=i,P=C[ci.Placeholders.Moves],O=isMainLine(s.ids.line)?P:void 0;let M=S;if(_){const i=_.getElement();if(!i)throw new ChessError({code:ji.ElementNotFound,message:"Node element does not exist."});M=i.parentNode}T.addNode(s,{anchor:O,target:M})}}function createLineElement(i,...s){const _=document.createElement("span");return _.setAttribute(ci.ComponentIdentifier,`line-${i}`),_.classList.add(...s),_}function createInsertVariationMethod(i){return function insertVariation({node:s}){const{api:_,dom:T,el:S,game:C}=i,P=s.ids,O=C.getRawLines()[P.line],M={line:O.parentId,move:O.atMoveNode},R=_.getMoveNode({line:M.line,move:M.move+1}),D=C.getNodeByIds(M);if(!D||isLine(D))throw new ChessError({code:ji.ElementNotFound,message:"Anchor node element for variation not found."});let j=S;const $=createLineElement(O.id,ci.ClassNames.Variation);if(0===D.ids.line&&$.classList.add(ci.ClassNames.MainLine),T.addNode(s,{target:$}),D.lines&&D.lines.length>1)j=getLineElement(D.lines[D.lines.length-2],S);else{const i=_.getMoveNode(D.ids);i&&(j=i.getElement())}j&&j.after($),void 0!==R&&R.touch(Ii.TouchableKeys.MoveNumber)}}function getVariations(i,s){return s.lines?s.lines.reduce(((s,_)=>(s.push(i[_]),s)),[]):[]}function createLineVariationElements({api:i,depth:s,parentLineEl:_,lines:T,line:S}){let C;C=1===s?document.createDocumentFragment():createLineElement(S.id,ci.ClassNames.Variation),S.initComment&&C.appendChild(i.addComment(S)),S.forEach((_=>{const S=i.addNode(_,{target:C});_.comment&&S.getElement().appendChild(i.addComment(_)),_.lines&&getVariations(T,_).forEach((_=>{createLineVariationElements({api:i,depth:s+1,line:_,lines:T,parentLineEl:C})}))})),_.appendChild(C)}function createLoadMethod(i){return function load3(){const{api:s,dom:_,el:T,game:S,placeholders:C}=i,P=C[ci.Placeholders.Moves];_.reset();const O=S.getRawLines();O[0].initComment&&T.insertBefore(_.addComment(O[0]),P),O[0].forEach((i=>{var s,C;const M=_.addNode(i,{anchor:P,target:T});if(i.comment&&M.getElement().appendChild(_.addComment(i)),(null==(s=i.commands)?void 0:s.text)&&(null==(C=i.commands)?void 0:C.href)){const{text:s,href:_}=i.commands;S.hml.addCommentLink({node:i,text:s,href:_})}i.lines&&getVariations(O,i).forEach((i=>{const s=createLineElement(i.id,ci.ClassNames.Variation,ci.ClassNames.MainLine);createLineVariationElements({api:{addComment:_.addComment,addNode:_.addNode},depth:1,line:i,lines:O,parentLineEl:s}),T.insertBefore(s,P)}))}));const M=S.getSelectedNode();M&&s.selectNode(M.ids),function restoreCustomColorsData({dom:i,game:s}){s.getRawLines().forEach((_=>{_.forEach((_=>{const T=s.getNodeByIds(_.ids);if(!isNode(T))return;const S=T.customColor;S&&i.updateMoveNodeComponent(_.ids,{customColor:S})}))}))}(i),i.state.nodeLimit&&i.game.hml.updateNodeLimits(i.state.nodeLimit)}}function createRemoveCommentMethod(i){return function removeComment(s){const{state:_}=i,T=getCommentElementId(s),S=i.el;_.comments[T]&&(!function removeCommentElement(i,s){const _=s.querySelector(`[${ci.ComponentIdentifier}="${getCommentElementId(i)}"`);_&&_.parentNode&&_.parentNode.removeChild(_)}(s,S),delete _.comments[T])}}function createRemoveEditableCommentMethod(i){return function removeEditableComment(){if(void 0!==i.editableCommentComponent){try{i.editableCommentComponent.destroy()}catch(s){}i.editableCommentComponent=void 0}}}function createRemoveLineMethod(i){return function removeLine(s){const{api:_,dom:T,el:S,state:C}=i,P=s.id;if(void 0===C.nodes[P])throw new ChessError({code:ji.BadData,data:s,message:`No line with id ${P} found`});C.nodes[P][0]&&T.removeNode({line:P,move:0});const O=getLineElement(P,S);let M;O&&O.parentNode.removeChild(O),delete C.nodes[P],void 0!==s.atMoveNode&&void 0!==s.parentId&&(M=_.getMoveNode({line:s.parentId,move:s.atMoveNode+1})),M&&M.touch(Ii.TouchableKeys.MoveNumber)}}function createRemoveNodeMethod(i){return function removeNode2({line:s,move:_}){const{api:T,state:S}=i,C=T.getMoveNode({line:s,move:_});if(!C)return;const P=Object.keys(S.nodes[C.ids.line]).length-1;if(S.nodes[C.ids.line][C.ids.move]!==S.nodes[C.ids.line][P])for(let i=P;i>C.ids.move;i--)S.nodes[C.ids.line][i].destroy(),delete S.nodes[C.ids.line][i];C.destroy(),delete S.nodes[C.ids.line][C.ids.move],function removeOrphanedElements({el:i,game:s,state:_}){const T=s.getRawLines();Object.keys(_.nodes).forEach((s=>{var S;T[s]||(Object.values(_.nodes[s]).forEach((i=>i.destroy())),null==(S=getLineElement(Number(s),i))||S.remove(),delete _.nodes[s])}))}(i);const O=T.getMoveNode({line:C.ids.line,move:C.ids.move+1});O&&O.touch(Ii.TouchableKeys.MoveNumber)}}function createResetMethod(i){return function reset2(){const{dom:s,el:_,state:T,placeholders:S}=i;s.removeEditableComment(),_.innerHTML="",T.comments={},T.nodes={},T.selectedNode=void 0,_.appendChild(S[ci.Placeholders.Moves]),_.appendChild(S[ci.Placeholders.GameResult])}}function createSetResultNodeMethod(i){return function setResultNode(s){var _;const{el:T}=i,S=T.querySelector(`.${Ni.Classes.GameResultNode}`),C=i.placeholders[ci.Placeholders.GameResult];if(S&&(null==(_=S.parentElement)||_.removeChild(S)),s===wr.Results.None)return;const P=document.createElement("span");P.classList.add(Ni.Classes.GameResultNode),P.innerText=s,T.insertBefore(P,C)}}function createUpdateLineComponent(i){return function updateLineComponent(s,_){var T;const{dom:S,game:C}=i,P=C.getLine(s);if(!P)return;const{initComment:O}=_;if(void 0!==O){const s=0===P.id?null!=(T=null==S?void 0:S.getElement())?T:i.el:getLineElement(P.id,i.el);null==s||s.prepend(S.addComment(P))}}}function createUpdateMoveNodeComponent(i){return function updateMoveNodeComponent(s,_){const{api:T,dom:S,game:C}=i,P=C.getNodeByIds(s),O=T.getMoveNode(s);if(!P||isLine(P)||!O)return;const M=null==O?void 0:O.getElement(),R=[],{additionalAnnotation:D,annotation:j,comment:$,customColor:U,isCommentEnabled:V}=_;if(void 0===D&&void 0===j||R.push(Ii.TouchableKeys.Annotation),void 0!==$)if(""===$)S.removeComment(P);else{const i=O.getNodeData(),s=S.addComment(i,null==V||V);M.appendChild(s)}void 0!==U&&R.push(Ii.TouchableKeys.CustomColor),R.forEach((i=>O.touch(i)))}}function createPluginsAPI(i=[],s,_=(0,ie.a)()){const T=new Map;let S=s;return addMany(i),__spreadProps(__spreadValues({add:addPlugin,addMany:addMany,destroy:function destroy10(){T.forEach((i=>remove(i.name)))}},_),{getAll:function getAll(){return[...T.values()]},getContext:function getContext(){return S},getOne:function getOne(i){return T.get(i)},has:T.has.bind(T),remove:remove,setContext:function setContext(i){S=i,_.emit(Qi.Events.ContextSet,S)}});function addPlugin(i){var s;return!!i.name&&(T.has(i.name)&&remove(i.name),T.set(i.name,i),null==(s=i.create)||s.call(i,S),_.emit(Qi.Events.PluginAdded,i),!0)}function addMany(i){if(!i||0===i.length)return!1;return(Array.isArray(i)?i:[i]).reduce((function pluginsAddedSuccessfully(i,s){return addPlugin(s)||(i=!1),i}),!0)}function remove(i){var s;const C=T.get(i);return!!C&&(null==(s=C.destroy)||s.call(C,S),T.delete(i),_.emit(Qi.Events.PluginRemoved,C),!0)}}function createHMLPluginsAPI(i,s){return function withAPI(i,s,_){const T=function createExtendAPI$1(i,s){return function extendAPI(_,T){const S=i[_];return i[_]=T(s),function destroyOverride(){var s,T;null==(T=(s=i[_]).destroy)||T.call(s),i[_]=S}}}(s,_),S=new Map;return i.on(Qi.Events.PluginAdded,(function pluginAddedEventHandler(i){if(i.api){const s=T(i.name,i.api);s&&S.set(i.name,s)}})),i.on(Qi.Events.PluginRemoved,(function pluginRemovedEventHandler(i){const s=S.get(i.name);null==s||s(),S.delete(i.name)})),i}(createPluginsAPI([],s),i,s)}function createHorizontalMoveList({el:i,game:s,nodeLimit:_,options:T,plugins:S=[createContextMenuPlugin()],stateMachineListeners:C,stateMachine:P,queue:O,placeholders:M,scrollContainer:R,translations:D=si}){const j={},$={api:j,contextMenuActions:Fi,dom:{getElement:()=>i},editableCommentComponent:void 0,el:i,game:s,getComponent:function getComponent(){return Y},options:T,queue:O,placeholders:M,scrollContainer:R,state:{comments:{},nodes:{},nodeLimit:_,selectedNode:void 0},stateMachine:P,stateMachineListeners:C,translations:D},{dom:U,game:V}=$,Z=createHMLPluginsAPI(V.hml,$);Z.addMany(S),Object.assign(j,__spreadValues({},function createHMLComponentAPI(i){return{getComments:()=>i.state.comments,getContext:()=>i,getContextMenuActions:createGetContextMenuActions(i),getMoveNode:createGetMoveNodeMethod(i),getNodes:()=>i.state.nodes,getOptions:()=>i.options,getSelectedNode:()=>i.state.selectedNode,resetSelectedNode:createResetSelectedNode(i),selectLineStart:createSelectLineStart$1(i),selectNode:createSelectNodeMethod(i),setOptions:createSetOptionsMethod(i)}}($))),Object.assign(U,__spreadValues({},function createHMLDOMService(i){const{el:s,placeholders:_}=i;return s.classList.add(ci.ClassNames.Component),s.addEventListener("contextmenu",disableContextMenu),s.appendChild(_[ci.Placeholders.Moves]),s.appendChild(_[ci.Placeholders.GameResult]),{addComment:createAddCommentMethod(i),addNode:createAddNodeMethod(i),destroy:createDestroyMethod(i),getElement:()=>s,insertEditableComment:createInsertEditableCommentMethod(i),insertNode:createInsertNodeMethod(i),insertVariation:createInsertVariationMethod(i),load:createLoadMethod(i),removeComment:createRemoveCommentMethod(i),removeEditableComment:createRemoveEditableCommentMethod(i),removeLine:createRemoveLineMethod(i),removeNode:createRemoveNodeMethod(i),reset:createResetMethod(i),setResultNode:createSetResultNodeMethod(i),setScrollContainer:s=>i.scrollContainer=s,updateLineComponent:createUpdateLineComponent(i),updateMoveNodeComponent:createUpdateMoveNodeComponent(i)}}($))),V.extendAPI(st.Plugin.Name,{addContextMenuActions:()=>function createAddContextMenuActions(i){return function addContextMenuActions(s){Object.keys(s).forEach((_=>{i.contextMenuActions[_]=s[_]}))}}($)});const Y={api:j,destroy:function destroy10(){Z.destroy()},dom:U,plugins:Z};return Y}function initializeMoveList({context:i,coreContext:s}){var _,T;const{el:S,nodeLimit:C,scrollContainer:P,translations:O}=i,{api:M}=s,R=M.getOptions();null==(T=null==(_=i.moveList)?void 0:_.destroy)||T.call(_),i.methods.destroy(),i.stateMachineListeners.push([Yi.Events.Click,i.methods.handleCommentClick]),i.stateMachine.on(Yi.Events.Click,i.methods.handleCommentClick),i.moveList=createHorizontalMoveList({el:S,game:M,nodeLimit:C,options:{enabled:R.enabled,moveListContextMenuEnabled:R.moveListContextMenuEnabled,moveListDisplayType:R.moveListDisplayType},queue:i.queue,placeholders:i.placeholders,scrollContainer:P,stateMachine:i.stateMachine,stateMachineListeners:i.stateMachineListeners,translations:O}),i.moveList.dom.load(),i.moveList.dom.setResultNode(M.getResult())}(function(i){i.Click="click"})((Xi=Yi||(Yi={})).Events||(Xi.Events={})),function(i){i.PluginAdded="PluginAdded",i.PluginRemoved="PluginRemoved",i.ContextSet="ContextSet"}((Ji=Qi||(Qi={})).Events||(Ji.Events={}));function get_each_context$2(i,s,_){const T=i.slice();return T[9]=s[_],T}function get_each_context_1(i,s,_){const T=i.slice();return T[12]=s[_],T}function create_each_block_1(i){let s,_,T,S,C,P=(i[1][i[12].name]?i[1][i[12].name]():i[12].name)+"";function click_handler(...s){return i[6](i[12],...s)}return{c(){s=(0,ie.f)("span"),_=(0,ie.h)(P),(0,ie.j)(s,"class",T=(0,ie.n)(Mi.Classes.ActionName)+" svelte-1hoe0fe")},m(i,T){(0,ie.k)(i,s,T),(0,ie.m)(s,_),S||(C=(0,ie.w)(s,"click",click_handler),S=!0)},p(s,T){i=s,3&T&&P!==(P=(i[1][i[12].name]?i[1][i[12].name]():i[12].name)+"")&&(0,ie.o)(_,P)},d(i){i&&(0,ie.q)(s),S=!1,C()}}}function create_each_block$2(i){let s,_,T,S,C,P,O,M=i[9].display+"";function click_handler_1(){return i[7](i[9])}return{c(){s=(0,ie.f)("span"),_=(0,ie.h)(M),T=(0,ie.r)(),(0,ie.j)(s,"alt",S=i[1][i[9].meaning]()),(0,ie.j)(s,"class",C=(0,ie.n)(Mi.Classes.Annotation)+" svelte-1hoe0fe")},m(i,S){(0,ie.k)(i,s,S),(0,ie.m)(s,_),(0,ie.m)(s,T),P||(O=(0,ie.w)(s,"click",click_handler_1),P=!0)},p(_,T){i=_,2&T&&S!==(S=i[1][i[9].meaning]())&&(0,ie.j)(s,"alt",S)},d(i){i&&(0,ie.q)(s),P=!1,O()}}}function create_fragment$2(i){let s,_,T,S,C,P,O,M,R=i[0],D=[];for(let U=0;U<R.length;U+=1)D[U]=create_each_block_1(get_each_context_1(i,R,U));let j=Wi,$=[];for(let U=0;U<j.length;U+=1)$[U]=create_each_block$2(get_each_context$2(i,j,U));return{c(){s=(0,ie.f)("div");for(let i=0;i<D.length;i+=1)D[i].c();_=(0,ie.r)(),T=(0,ie.f)("div"),S=(0,ie.r)(),C=(0,ie.f)("div");for(let i=0;i<$.length;i+=1)$[i].c();P=(0,ie.r)(),(0,ie.j)(T,"class",(0,ie.n)(Mi.Classes.Divider)+" svelte-1hoe0fe"),(0,ie.j)(C,"class",(0,ie.n)(Mi.Classes.AnnotationsContainer)+" svelte-1hoe0fe"),(0,ie.j)(s,"class",(0,ie.n)(Mi.Classes.Component)+" svelte-1hoe0fe")},m(R,j){(0,ie.k)(R,s,j);for(let i=0;i<D.length;i+=1)D[i].m(s,null);(0,ie.m)(s,_),(0,ie.m)(s,T),(0,ie.m)(s,S),(0,ie.m)(s,C);for(let i=0;i<$.length;i+=1)$[i].m(C,null);(0,ie.m)(s,P),i[8](s),O||(M=(0,ie.w)(document.body,"click",i[4]),O=!0)},p(i,[T]){if(11&T){let S;for(R=i[0],S=0;S<R.length;S+=1){const C=get_each_context_1(i,R,S);D[S]?D[S].p(C,T):(D[S]=create_each_block_1(C),D[S].c(),D[S].m(s,_))}for(;S<D.length;S+=1)D[S].d(1);D.length=R.length}if(10&T){let s;for(j=Wi,s=0;s<j.length;s+=1){const _=get_each_context$2(i,j,s);$[s]?$[s].p(_,T):($[s]=create_each_block$2(_),$[s].c(),$[s].m(C,null))}for(;s<$.length;s+=1)$[s].d(1);$.length=j.length}},i:ie.x,o:ie.x,d(_){_&&(0,ie.q)(s),(0,ie.E)(D,_),(0,ie.E)($,_),i[8](null),O=!1,M()}}}function instance$2(i,s,_){let{actions:T}=s,{translations:S}=s;const C=(0,ie.z)();let P;return i.$$set=i=>{"actions"in i&&_(0,T=i.actions),"translations"in i&&_(1,S=i.translations)},[T,S,P,C,function handleDocumentClick(i){i.target.classList.contains(Mi.Classes.Component)||C(Pi.Events.Close)},function getElement(){return P},(i,s)=>C(Pi.Events.ActionClicked,{action:i,event:s}),i=>C(Pi.Events.AnnotationClicked,{action:i.action,data:i.code}),function div2_binding(i){ie.D[i?"unshift":"push"]((()=>{P=i,_(2,P)}))}]}class Context_menu extends ie.b{constructor(i){super(),(0,ie.i)(this,i,instance$2,create_fragment$2,ie.d,{actions:0,translations:1,getElement:5})}get getElement(){return this.$$.ctx[5]}}function createContextMenu({actions:i,el:s,moveNode:_,emitter:T,translations:S}){const C=null==_?void 0:_.getElement(),P=function createContextMenuComponent(i,{anchor:s,props:_}){return createSvelteComponent({ComponentType:Context_menu,methods:["getElement"],options:{anchor:s,props:_,target:i},replaceContainer:!1})}((null==C?void 0:C.parentElement)||s,{anchor:C,props:{actions:i,translations:S}});return setPosition(),function registerListeners(){P.on(Pi.Events.ActionClicked,createEventHandler(Pi.Events.ActionClicked)),P.on(Pi.Events.AnnotationClicked,createEventHandler(Pi.Events.AnnotationClicked)),P.on(Pi.Events.Close,(()=>T.emit(Pi.Events.Close))),s.addEventListener("scroll",function debounce(i,s){let _;return function run2(...T){clearTimeout(_),_=setTimeout((()=>{_=null,i(...T)}),s)}}(setPosition,50))}(),{destroy:P.destroy};function createEventHandler(i){return function handleEvent({detail:s}){T.emit(i,{action:s.action,data:s.data,event:s.event,moveNode:_.getNodeData()})}}function setPosition(){const i=null==P?void 0:P.getElement();if(!i)return;const{left:_,top:T}=function getContextMenuPosition({contextMenu:i,moveNode:s,padding:_={x:10,y:20}}){const T=s.y+_.y-window.pageYOffset,S=window.innerHeight-i.height,C={left:0,top:0};return C.top=Math.min(T,S),C.bottom=C.top+i.height,s.x>window.innerWidth-i.width?C.left=s.x+s.width-i.width:(T<S&&(_.x=0),C.left=s.x+_.x),C}({contextMenu:i.getBoundingClientRect(),moveNode:(null==C?void 0:C.getBoundingClientRect())||s.getBoundingClientRect()});i.style.left=`${_}px`,i.style.top=`${T}px`}}function initializeContextMenu(i){const{el:s,moveList:_,stateMachine:T,methods:{destroyContextMenu:S},translations:C}=i;function handleContextMenuAction(i){S();const s=function createContextMenuActionHandler(i,s){return function handleContextMenuAction({action:_,data:T,event:S,moveNode:C}){const P=s.api.getMoveNode(C.ids);if(!P)throw new ChessError({code:ji.BadData,data:C.ids,message:"No move node found."});_.handler(C,{context:i,data:T,moveList:s,moveNodeComponent:P,event:S}),i.queue.flush()}}(_.api.getContext(),_);s(i)}function handleAnnotationAction({action:i,data:s,moveNode:T}){S();const C=_.api.getMoveNode(T.ids);if(!C)throw new ChessError({code:ji.BadData,data:T.ids,message:"No move node found."});const P={data:s,game:_.api.getContext().game,moveNodeComponent:C,node:T};i===Pi.AnnotationActions.AddAnnotation?function addAnnotation({node:i,game:s,data:_,moveNodeComponent:T}){const S=normalizeAnnotation(_),C=T.getNodeData().annotation===S?void 0:S;s.updateNode(i.ids,{annotation:C}),T.touch(Ii.TouchableKeys.Annotation)}(P):i===Pi.AnnotationActions.AddAdditionalAnnotation&&function addAdditionalAnnotation({node:i,game:s,data:_,moveNodeComponent:T}){const S=normalizeAnnotation(_),C=T.getNodeData().additionalAnnotation,P=(null==C?void 0:C[0])===S?void 0:[S];s.updateNode(i.ids,{additionalAnnotation:P}),T.touch(Ii.TouchableKeys.Annotation)}(P)}function createOpenContextMenuHandler(P){var O;_.api.selectNode(P.node.ids);const M=_.api.getContextMenuActions(P.node.ids);S(),i.contextMenu=createContextMenu({actions:M,el:null!=(O=i.scrollContainer)?O:s,emitter:T,moveNode:_.api.getMoveNode(P.node.ids),translations:C})}i.stateMachineListeners.push([Pi.Events.ActionClicked,handleContextMenuAction],[Pi.Events.AnnotationClicked,handleAnnotationAction],[Pi.Events.Close,S],[Ni.Events.OpenContextMenu,createOpenContextMenuHandler]),T.on(Pi.Events.Close,S),T.on(Pi.Events.ActionClicked,handleContextMenuAction),T.on(Pi.Events.AnnotationClicked,handleAnnotationAction),T.on(Ni.Events.OpenContextMenu,createOpenContextMenuHandler)}const ea={condition:function condition({context:i,event:s}){return function match2(){return s.type===C.InstanceEvents.Create||s.type===C.InstanceEvents.ModeChanged||!i.moveList||0===Object.entries(i.moveList).length}},handler:function handler({context:i,coreContext:s}){initializeMoveList({context:i,coreContext:s}),i.enableContextMenu&&initializeContextMenu(i)}};function createQueuedEventHandler(i,s){return function queuedEvent(_){_.selectedNode=__spreadValues({},_.coreContext.api.getRelativeNode()),i.add(s,_)}}const ta=ci.VariationParenthesis.Before,na=ci.VariationParenthesis.After;function copyMoveListContentToClipboard({api:i,el:s,win:_=window}){const T=_.getSelection(),S=null==T?void 0:T.anchorNode,C=null==T?void 0:T.focusNode;if(!S||!C)return null;const P=i.getPGN(),O=getPosition({moveList:s,node:S,pgn:P}),M=getPosition({moveList:s,node:C,pgn:P});if(null===O||null===M)return null;const R=Math.min(O,M),D=Math.max(O,M),j=getMoveText(getMoveElement(O<M?C:S)).length,$=D+j-R;let U=P.substr(R,$);return U=function addClosingParentheses({lastIndex:i,pgn:s,pgnPiece:_}){const T=new RegExp(`\\${ta}`,"g"),S=(_.match(T)||[]).length;let C=_;for(let P=0;P<S&&s[i+P]===na;P++)C+=na;return C}({lastIndex:D+j,pgn:P,pgnPiece:U}),function copyStringToClipboard(i){const s=document.createElement("textarea");document.body.append(s),s.value=i,s.focus(),s.select(),document.execCommand("cut"),s.remove()}(U),U}function getPosition({moveList:i,pgn:s,node:_}){const T=getMoveElement(_),S=getMoveText(T);let C=function getMoveOrder(i,s){const _=Array.from(i.querySelectorAll(`.${Ni.Classes.MoveNode}`));return _.filter((i=>i.textContent===s.textContent)).findIndex((i=>i===s))}(i,T)||0;return s.split("").findIndex(((i,_)=>{if(s.substr(_,S.length)===S){if(0===C)return _;C--}return!1}))}function getMoveElement(i){var s;return!i.parentNode||(null==(s=null==i?void 0:i.classList)?void 0:s.contains(Ni.Classes.MoveNode))?i:getMoveElement(i.parentNode)}function getMoveText(i){const s=i.querySelector(`.${Ni.Classes.MoveNumber}`),_=i.querySelector(`.${Ni.Classes.MoveText}`),T=i.querySelector(`.${Ni.Classes.Comment}`);let S="";return s&&(S+=`${s.textContent} `),_&&(S+=_.textContent),T&&(S+=` {${T.textContent}}`),S}function createDiagramAction({action:i,nodeLimit:s}){const _=i.includes("Set");return{action:Pi.Actions[i],handler:function handler2(i,{moveList:T,moveNodeComponent:S}){diagramActionHandler({limitType:s,isSettingNodeLimits:_,moveList:T,moveNodeComponent:S,node:i})},isVisible:function isVisible({state:i}){var T,S;const C=null==(T=i.nodeLimit)?void 0:T[s],P=Boolean((null==C?void 0:C.move)===(null==(S=i.selectedNode)?void 0:S.getNodeData().move));return _?Boolean(!C||!P):Boolean(C&&P)},name:Wr.Translation.Actions[i]}}const ra={[Pi.Actions.SetBegin]:createDiagramAction({action:Pi.Actions.SetBegin,nodeLimit:ci.NodeLimitTypes.Begin}),[Pi.Actions.SetFocus]:createDiagramAction({action:Pi.Actions.SetFocus,nodeLimit:ci.NodeLimitTypes.Focus}),[Pi.Actions.SetEnd]:createDiagramAction({action:Pi.Actions.SetEnd,nodeLimit:ci.NodeLimitTypes.End}),[Pi.Actions.RemoveBegin]:createDiagramAction({action:Pi.Actions.RemoveBegin,nodeLimit:ci.NodeLimitTypes.Begin}),[Pi.Actions.RemoveFocus]:createDiagramAction({action:Pi.Actions.RemoveFocus,nodeLimit:ci.NodeLimitTypes.Focus}),[Pi.Actions.RemoveEnd]:createDiagramAction({action:Pi.Actions.RemoveEnd,nodeLimit:ci.NodeLimitTypes.End})};function createAddDiagramActions(i,s){const{api:_}=i;return function addDiagramActions(){_.addContextMenuActions(ra),createDestroyDiagramActions(i,s)}}function diagramActionHandler({limitType:i,isSettingNodeLimits:s,moveList:_,moveNodeComponent:T,node:S}){var C,P;const O=_.api.getContext(),M=null==(C=O.state.nodeLimit)?void 0:C[i],{respond:R}=O.game.getContext();let D;M&&(D=_.api.getMoveNode({line:M.ids.line,move:M.ids.move})),s?function setNodeLimits({limitType:i,moveList:s,moveNodeComponent:_,node:T}){const S=s.api.getContext();S.state.nodeLimit&&(S.state.nodeLimit[i]=T);if(i===ci.NodeLimitTypes.Focus)return void _.addNodeStyles({fontStyle:"italic"});const C=document.createElement("span"),P=`diagram-${i}`,O=i===ci.NodeLimitTypes.Begin?"[[":"]]";C.classList.add(P),C.innerHTML=O,i===ci.NodeLimitTypes.Begin?_.insertBeforeNode(C):i===ci.NodeLimitTypes.End&&_.insertAfterNode(C)}({limitType:i,moveList:_,moveNodeComponent:T,node:S}):(null==(P=O.state.nodeLimit)||delete P[i],removeNodeLimits({limitType:i,moveList:_,moveNodeComponent:T})),D&&removeNodeLimits({limitType:i,moveList:_,moveNodeComponent:D}),R(ci.Events.UpdateNodeLimit,{isSettingNodeLimits:s,limitType:i,node:S})}function removeNodeLimits({limitType:i,moveList:s,moveNodeComponent:_}){const T=s.dom.getElement().querySelector(`.diagram-${i}`);T?T.remove():_.removeNodeStyles()}function createUpdateNodeLimits(i,s){return function updateNodeLimits(_){const{moveList:T}=s;i.api.getDiagramNodeLimits||createDestroyDiagramActions(i,s),Object.entries(_).forEach((([i,s])=>{const _=T.api.getMoveNode({line:s.ids.line,move:s.ids.move});diagramActionHandler({limitType:i,isSettingNodeLimits:!0,moveList:T,moveNodeComponent:_,node:s})}))}}function createDestroyDiagramActions(i,s){var _;const T=s.moveList.api.getContext();T.state.nodeLimit=null!=(_=i.api.getDiagramNodeLimits)?_:{},s.methods.destroyDiagramActions=i.api.extendAPI(st.Plugin.Name,{getDiagramNodeLimits(){var i;return null!=(i=null==T?void 0:T.state.nodeLimit)?i:{}}})}function createAddCommentLink(i,s){return function addCommentLink({node:_,text:T,href:S}){var C,P;const O=s.moveList.dom.addComment(_,!1,{text:T,href:S});i.api.getOptions().test&&setTestData(O,{[mn.Element]:gn.CommentLink}),_.commands||(_.commands={}),i.api.updateNode(_.ids,{commands:Object.assign(_.commands,{href:`${S}`,text:`${T}`})}),0===_.ids.line?null==(C=s.moveList.api.getMoveNode(_.ids))||C.getElement().appendChild(O):null==(P=getLineElement(_.ids.line,s.el))||P.append(O)}}function createSetScrollContainer(i){return function setScrollContainer(s){i.scrollContainer=s,i.moveList.dom.setScrollContainer(s)}}function createHorizontalMoveListPlugin({el:i,enableContextMenu:s=!0,nodeLimit:_,scrollContainer:T,translations:S=si}){const P={[ci.Placeholders.GameResult]:document.createComment("/Game Result"),[ci.Placeholders.Moves]:document.createComment("/Moves")},O={contextMenu:void 0,el:i,enableContextMenu:s,methods:{destroy:noop,destroyContextMenu:noop,destroyDiagramActions:noop,handleCommentClick:noop,handleCopy:noop,selectCurrentPosition:noop},moveList:{},nodeLimit:_,queue:createQueue(!1),placeholders:P,scrollContainer:T||i,stateMachine:createHMLStateMachine(),stateMachineListeners:[],translations:S};return{api:i=>function createHMLAPI(i,s){return{addDiagramActions:createAddDiagramActions(i,s),addCommentLink:createAddCommentLink(i,s),setScrollContainer:createSetScrollContainer(s),updateNodeLimits:createUpdateNodeLimits(i,s)}}(i,O),create:function create3(i){destroy10(),registerMethods(i),registerListeners(),runHorizontalMoveListPlugin({data:null,type:C.APIEvents.Load},i)},destroy:destroy10,match:[{condition:isOneOf([C.APIEvents.AddMove,C.APIEvents.CreateContinuation,C.APIEvents.CreateGame,C.APIEvents.DeletePosition,C.APIEvents.LineCommentUpdated,C.APIEvents.Load,C.APIEvents.Move,C.APIEvents.MoveBackward,C.APIEvents.MoveForward,C.APIEvents.MoveVariation,C.APIEvents.NodeUpdated,C.APIEvents.PromoteVariation,C.APIEvents.ResetToMainLine,C.APIEvents.SelectLineEnd,C.APIEvents.SelectLineStart,C.APIEvents.SelectNode,C.APIEvents.Undo,C.APIEvents.UpdatePGNHeaders,C.InstanceEvents.Create,C.OptionsEvents.Update]),handler:runHorizontalMoveListPlugin},{condition:is$1(C.InstanceEvents.ModeChanged),handler:function modeChanged(i,s){destroy10(),registerMethods(s),registerListeners(),runHorizontalMoveListPlugin({data:null,type:C.InstanceEvents.ModeChanged},s)}}],name:st.Plugin.Name};function destroy10(){var s,_;O.queue.clear(),O.methods.destroy(),null==(_=(s=O.methods).destroyDiagramActions)||_.call(s),i.removeEventListener(ci.Events.Copy,O.methods.handleCopy)}function registerListeners(){i.addEventListener(ci.Events.Copy,O.methods.handleCopy)}function registerMethods(s){O.methods.destroy=function createDestroy$2(i){return function destroy10(){var s,_;i.stateMachineListeners.forEach((([s,_])=>{i.stateMachine.off({handler:_,type:s})})),i.stateMachineListeners=[],i.moveList&&(null==(_=null==(s=i.moveList)?void 0:s.dom)?void 0:_.destroy)&&(i.moveList.dom.destroy(),i.moveList.plugins.destroy())}}(O),O.methods.destroyContextMenu=function createDestroyContextMenu(i){return function destroyContextMenu(){i.contextMenu&&(i.contextMenu.destroy(),i.contextMenu=void 0)}}(O),O.methods.handleCommentClick=function createCommentClickHandler(i){return function commentClickHandler(s){i.moveList.dom.insertEditableComment(s)}}(O),O.methods.handleCopy=function createCopyEventHandler({context:i,el:s}){return function copyEventHandler(_){var T;(null==(T=_.target.classList)?void 0:T.contains(yi.Classes.Component))||copyMoveListContentToClipboard({api:i.api,el:s})&&_.preventDefault()}}({context:s,el:i}),O.methods.selectCurrentPosition=function createSelectCurrentPosition(i){return function selectCurrentPosition(s){s&&(isLine(s)?i.moveList.api.selectLineStart(s):isNode(s)&&i.moveList.api.selectNode(s.ids))}}(O)}function runHorizontalMoveListPlugin(i,s){!function runPatternMatcher({conditionParams:i,handlerContext:s}){const{queue:_}=s.context;!function matchPattern(i,s){const _=i.find((i=>i[0](s)));if(_)_[1](s)}([gi,vi,bi,ea,wi,ki,Ti,Si,Ci,Ei,xi].map((({condition:s,handler:T})=>[s(i),createQueuedEventHandler(_,T)])),s),forceNextFrame((function flushHorizontalMoveListQueue(){_.flush()}))}({conditionParams:{context:O,event:i},handlerContext:{context:O,coreContext:s,event:i}})}}function createMarkingShortcutsFromFrame(i){const{id:s,itemsPerRow:_,rows:T,itemsConfiguration:S=[]}=i;return[...Array(_*T)].map(((i,T)=>{const C=S[T],{name:P,animatedImageURL:O,removalSoundBaseURL:M}="object"==typeof C?C:{name:null!=C?C:`${s}-${T}`},R=T%_,D=Math.floor(T/_);return{name:P,frameId:s,xIndex:R,yIndex:D,animatedImageURL:O,removalSoundBaseURL:M}}))}function preloadImage(i){const s=new Image;return s.src=i,s}function createSetFrames({api:i,framesMap:s,shortcuts:_}){return function setFrames(T=[]){s.clear(),_.clear(),T.forEach((i=>{s.set(i.id,i),preloadImage(i.imageURL)})),T.map(createMarkingShortcutsFromFrame).forEach((i=>{i.forEach((i=>{_.set(i),i.animatedImageURL&&preloadImage(i.animatedImageURL)}))})),function loadRemovalSounds(){const s=_.getAsArray().filter((i=>i.removalSoundBaseURL));if(!s.length)return;const T=s.reduce(((i,s)=>{var _;const{name:T,removalSoundBaseURL:S=""}=s,C=null!=(_=i[S])?_:[];return C.push(T),i[S]=C,i}),{}),S=Object.keys(T);if(S.length){const s=i.sounds.getSoundsInstance();S.forEach((i=>{s.loadExtra({baseURL:i,codes:T[i]})}))}}()}}function getShortcutId({xIndex:i,yIndex:s,frameId:_}){return`frameId=${_}, xIndex=${i}, yIndex=${s}`}function getFrameNotFoundError(i,s){return`Frame: '${i}' not found (frames available: ${s.join(", ")})`}function getResultMarkingData({markings:i,framesMap:s,shortcuts:_}){const T=[],S=[];return i.forEach((i=>{const{model:C}=i;(Array.isArray(i.square)?i.square:[i.square]).forEach((P=>{if("string"==typeof C){const s={data:{square:P,type:et[C]},type:"effect",persistent:!0,node:!0};return void T.push({square:P,input:i,marking:s})}const{customMarking:O,itemDisappears:M}=function createCustomMarkingWithFrame({model:i,shortcuts:s,framesMap:_,square:T}){var S;const C=s.find(i);if(!C)throw new Error(function getMarkingShortcutNotFoundError(i){if("xIndex"in i){const{xIndex:s,yIndex:_,frameId:T}=i;return`Marking shortcut: '${getShortcutId({xIndex:s,yIndex:_,frameId:T})}' not found`}return`Marking shortcut: '${i.name}' not found`}(i));const P=_.get(C.frameId);if(!P)throw new Error(getFrameNotFoundError(C.frameId,[..._.keys()]));const{xIndex:O,yIndex:M,animatedImageURL:R,removalSoundBaseURL:D,name:j}=C,{itemsPerRow:$,rows:U,imageURL:V}=P,Z=R?{imageAnimated:!0,imageURL:R,positionRatioX:0,positionRatioY:0,widthRatio:1,heightRatio:1}:{imageURL:V,positionRatioX:O/$,positionRatioY:M/U,widthRatio:1/$,heightRatio:1/U};return{customMarking:{data:{square:T,type:qe.Image,removalTimeout:2e3,removalClass:R?void 0:"custom-item__frame--disappear",removalSound:D?j:void 0,frame:Z},type:"customItem",persistent:!0},itemDisappears:null!=(S=i.autoRemove)&&S}}({model:C,shortcuts:_,framesMap:s,square:P});T.push({square:P,input:i,marking:O}),M&&S.push(P)}))})),{resultMarkings:T,disappearingMarkingSquares:S}}function createMark$1({api:i,markedSquares:s,framesMap:_,shortcuts:T}){return function mark(S){const C=Array.isArray(S)?S:[S],{resultMarkings:P,disappearingMarkingSquares:O}=getResultMarkingData({markings:C,framesMap:_,shortcuts:T});let M;P.length&&(M=function markModels(s){var _;if(!s.length)return[];if(s.length>1){return i.markings.addMany(s).map((i=>null!=i?i:""))}return[null!=(_=i.markings.addOne(s[0]))?_:""]}(P.map((i=>i.marking)))),P.forEach(((i,_)=>{var T;const{input:S,marking:C,square:P}=i,O=null!=(T=null==M?void 0:M[_])?T:"";O.length&&"effect"!==C.type&&s.set(P,{input:S,marking:__spreadProps(__spreadValues({},C),{key:O})})})),O.length&&setTimeout((()=>{i.boardImages.unmark(O)}),1500)}}function createSetWindow$1({boardImagesDOM:i,framesMap:s,windowState:_,hotkeysMap:T,shortcuts:S,showCloseButton:C,api:P}){return function setWindow(s){var T,S;_.window=s,i.clearElement(),s&&(i.setSize(s.widthPercent/(null!=(T=s.boardContainerAspectRatio)?T:1),s.heightPercent),i.setWindow({elements:getDOMWindowElements(null!=(S=s.elements)?S:[]),elementClickedCallback:s.paletteMode?selectOrUnselectMarking:defaultMarkFunction,closeButtonCallback:C?P.boardImages.hideWindow:void 0,addTitleElement:!s.paletteMode,addHoverElement:s.paletteMode}))};function getDOMWindowElements(i){const _=new Map,getTitle=i=>[...i,"left click"].join(" + ");return[...T.values()].forEach((i=>{const{keys:s,model:T}=i;if("string"==typeof T)_.set(T,getTitle(s));else{const i=S.find(T);if(i){const{xIndex:T,yIndex:S,frameId:C}=i;_.set(getShortcutId({xIndex:T,yIndex:S,frameId:C}),getTitle(s))}}})),i.map((i=>{if("frameId"in i)return function mapFrameToDOMFrame(i,_){const T=s.get(i.frameId);if(!T){const _=getFrameNotFoundError(i.frameId,[...s.keys()]);throw new Error(_)}const{frameId:S,emptyItemsPerRow:C,itemsAutoRemove:P}=i,{itemsPerRow:O,rows:M,imageURL:R}=T;return{id:S,emptyItemsPerRow:C,itemsPerRow:O,rows:M,imageURL:R,itemsAutoRemove:P,titles:getTitlesForDOMFrame(T,_)}}(i,_);{const{effects:s,id:T,emptyItemsPerRow:S,itemsPerRow:C}=i;return{id:T,emptyItemsPerRow:S,itemsPerRow:C,effects:s.map((i=>{if("string"==typeof i){const s=_.get(i);return s?{title:s,type:i}:i}return i}))}}}))}function getTitlesForDOMFrame(i,s){const{itemsPerRow:_,rows:T,id:S}=i;return[...Array(_*T)].map(((i,T)=>{var C;const P=getShortcutId({xIndex:T%_,yIndex:Math.floor(T/_),frameId:S});return null!=(C=s.get(P))?C:""}))}function defaultMarkFunction(i){_.windowPosition&&("type"in i?P.boardImages.mark({square:_.windowPosition,model:i.type}):P.boardImages.mark({square:_.windowPosition,model:i}),P.boardImages.hideWindow())}function selectOrUnselectMarking(i){const s=P.boardImages.getSelectedMarking();if("type"in i)i.type===s?P.boardImages.selectMarking():P.boardImages.selectMarking(i.type);else{const _=s;i.frameId===(null==_?void 0:_.frameId)&&i.yIndex===(null==_?void 0:_.yIndex)&&i.xIndex===(null==_?void 0:_.xIndex)?P.boardImages.selectMarking():P.boardImages.selectMarking(i)}}}function limitNumberWithinRange(i,s){return Math.min(Math.max(i,s.min),s.max)}function createShowWindow$1({windowState:i,api:s,boardImagesDOM:_}){return function showWindow(T){var S;const{window:C,windowPosition:P}=i;if(!C)return;if(!T)return void _.showWindow();const{square:O,squareCoords:M,allowWindowOverflow:R=!1}=T;if(P){const i=s.markings.getAllWhere({types:[de]}).find((i=>i.data.square===P));i&&s.markings.removeOne(i.key)}i.windowPosition=O,s.markings.addOne({data:{square:O,color:Ht.HighlightColors.Selected,opacity:.5},persistent:!0,type:de});const{top:D,left:j,overflows:$}=function calculateTopLeftForWindowInSquare({squareCoords:i,heightInPercent:s,widthInPercent:_,allowOverflow:T}){let S=!1,C=i.x,P=i.y;T||(P+s>100&&(P=limitNumberWithinRange(100-s,{min:0,max:100})),C+_>100&&(C=limitNumberWithinRange(C-_-(i.centered?0:12.5),{min:0,max:100}),S=!0));return{top:P,left:C,overflows:S}}({squareCoords:M,heightInPercent:C.heightPercent,widthInPercent:C.widthPercent/(null!=(S=C.boardContainerAspectRatio)?S:1),allowOverflow:R});_.setPosition(D,j,$),_.showWindow()}}function createInitDefault({api:i,boardImagesDOM:s,imagesBaseURL:_,soundsBaseURL:T,paletteContainer:S}){return function initDefault(C={}){var P,O,M,R,D;const j=window.location.href.replace(window.location.search,""),$=Boolean(S),{defaultFrames:U,defaultWindow:V,defaultHotkeys:Z}=function getDefaultValues({imagesBaseURL:i,soundsBaseURL:s,paletteMode:_,boardContainerAspectRatio:T}){const S={heightPercent:_?100:50,widthPercent:_?100:40,boardContainerAspectRatio:T,paletteMode:_,elements:[{id:"effects",itemsPerRow:5,effects:[et.Brilliant,et.GreatFind,et.BestMove,et.Excellent,et.Correct,et.Equal,et.Interesting,et.Inaccuracy,et.Mistake,et.Blunder,et.Incorrect,et.Book,et.Warning,et.WinnerWhite,et.MissedWin]},{frameId:"objective-markers"},{frameId:"emotive-markers",itemsAutoRemove:!0}]},C=`${i}/animated-images`,P=[{id:"objective-markers",imageURL:`${i}/objective-markers.png`,rows:1,itemsPerRow:5,itemsConfiguration:[{name:"star",animatedImageURL:`${C}/star.png`,removalSoundBaseURL:s},{name:"coin",animatedImageURL:`${C}/coin.png`,removalSoundBaseURL:s},{name:"target",animatedImageURL:`${C}/target.png`,removalSoundBaseURL:s},{name:"skull",animatedImageURL:`${C}/skull.png`,removalSoundBaseURL:s},{name:"bomb",animatedImageURL:`${C}/bomb.png`,removalSoundBaseURL:s}]},{id:"emotive-markers",imageURL:`${i}/emotive-markers.png`,rows:17,itemsPerRow:5,itemsConfiguration:["happy","sad","wut","wink","cry","cheeky","meh","bigsmile","cringe","mad","blush","shock","dead","sleepy","tongue","lol","crying","horror","love","nerd","glasses","mustache","kisses","mindblow","stareyes","sick","devil","ghost","scream","facepalm","thumbsup","thumbsdown","worship","wave","clap","knuckles","muscle","donkey","clock","fire","troll","donut","earth","panda","unicorn","shakehands","resign","gameover","bullet","blitz","skewer","fork","pin","fish","trophy","arena","puzzle","computer","scc","tt","tilt","960","doubleexclam","doublequestion","10","1","12","hype","gg","rip","present","gold","stockfish","lc0","komodo","danny","omg","robert","hikaru","anna","alexandra","andrea","levy","eric","aman"]}],O=[{keys:["B"],model:et.Brilliant},{keys:["G"],model:et.GreatFind},{keys:["B","E"],model:et.BestMove},{keys:["G","D"],model:et.Excellent},{keys:["K"],model:et.Correct},{keys:["E","Q"],model:et.Equal},{keys:["I"],model:et.Interesting},{keys:["D"],model:et.Inaccuracy},{keys:["M"],model:et.Mistake},{keys:["L"],model:et.Blunder},{keys:["W"],model:et.Incorrect},{keys:["O"],model:et.Book},{keys:["H"],model:et.Warning},{keys:["shift","8"],model:et.WinnerWhite},{keys:["S"],model:{name:"star"}},{keys:["C"],model:{name:"coin"}},{keys:["T"],model:{name:"target"}},{keys:["S","K"],model:{name:"skull"}},{keys:["F"],model:{name:"bomb"}},{keys:["0"],model:{name:"happy",autoRemove:!0}},{keys:["shift","S"],model:{name:"sad",autoRemove:!0}},{keys:["shift","W"],model:{name:"wut",autoRemove:!0}},{keys:["shift","0"],model:{name:"wink",autoRemove:!0}},{keys:["shift","R"],model:{name:"cry",autoRemove:!0}},{keys:["shift","Q"],model:{name:"cheeky",autoRemove:!0}},{keys:["shift","E"],model:{name:"meh",autoRemove:!0}},{keys:["shift","B"],model:{name:"bigsmile",autoRemove:!0}},{keys:["shift","C"],model:{name:"cringe",autoRemove:!0}},{keys:["shift","1"],model:{name:"mad",autoRemove:!0}},{keys:["shift","U"],model:{name:"blush",autoRemove:!0}},{keys:["shift","O"],model:{name:"shock",autoRemove:!0}},{keys:["shift","D"],model:{name:"dead",autoRemove:!0}},{keys:["S","E"],model:{name:"sleepy",autoRemove:!0}},{keys:["shift","P"],model:{name:"tongue",autoRemove:!0}},{keys:["shift","L"],model:{name:"lol",autoRemove:!0}},{keys:["shift","I"],model:{name:"crying",autoRemove:!0}},{keys:["shift","H"],model:{name:"horror",autoRemove:!0}},{keys:["shift","V"],model:{name:"love",autoRemove:!0}},{keys:["shift","N"],model:{name:"nerd",autoRemove:!0}},{keys:["shift","G"],model:{name:"glasses",autoRemove:!0}},{keys:["shift","T"],model:{name:"mustache",autoRemove:!0}},{keys:["shift","K"],model:{name:"kisses",autoRemove:!0}},{keys:["shift","M"],model:{name:"mindblow",autoRemove:!0}},{keys:["shift","Y"],model:{name:"stareyes",autoRemove:!0}},{keys:["S","I"],model:{name:"sick",autoRemove:!0}},{keys:["D","V"],model:{name:"devil",autoRemove:!0}},{keys:["G","H"],model:{name:"ghost",autoRemove:!0}},{keys:["shift","J"],model:{name:"scream",autoRemove:!0}},{keys:["shift","F"],model:{name:"facepalm",autoRemove:!0}},{keys:["arrowup"],model:{name:"thumbsup",autoRemove:!0}},{keys:["arrowdown"],model:{name:"thumbsdown",autoRemove:!0}},{keys:["I","P"],model:{name:"worship",autoRemove:!0}},{keys:["W","V"],model:{name:"wave",autoRemove:!0}},{keys:["L","P"],model:{name:"clap",autoRemove:!0}},{keys:["K","N"],model:{name:"knuckles",autoRemove:!0}},{keys:["M","U"],model:{name:"muscle",autoRemove:!0}},{keys:["D","K"],model:{name:"donkey",autoRemove:!0}},{keys:["L","K"],model:{name:"clock",autoRemove:!0}},{keys:["F","R"],model:{name:"fire",autoRemove:!0}},{keys:["T","R"],model:{name:"troll",autoRemove:!0}},{keys:["N","T"],model:{name:"donut",autoRemove:!0}},{keys:["E","T"],model:{name:"earth",autoRemove:!0}},{keys:["P","N"],model:{name:"panda",autoRemove:!0}},{keys:["U","I"],model:{name:"unicorn",autoRemove:!0}},{keys:["S","H"],model:{name:"shakehands",autoRemove:!0}},{keys:["R","E"],model:{name:"resign",autoRemove:!0}},{keys:["G","M"],model:{name:"gameover",autoRemove:!0}},{keys:["B","U"],model:{name:"bullet",autoRemove:!0}},{keys:["B","T"],model:{name:"blitz",autoRemove:!0}},{keys:["W","E"],model:{name:"skewer",autoRemove:!0}},{keys:["R","R"],model:{name:"fork",autoRemove:!0}},{keys:["I","N"],model:{name:"pin",autoRemove:!0}},{keys:["H","I"],model:{name:"fish",autoRemove:!0}},{keys:["H","Y"],model:{name:"trophy",autoRemove:!0}},{keys:["A","R"],model:{name:"arena",autoRemove:!0}},{keys:["U","L"],model:{name:"puzzle",autoRemove:!0}},{keys:["M","P"],model:{name:"computer",autoRemove:!0}},{keys:["S","C"],model:{name:"scc",autoRemove:!0}},{keys:["T","Y"],model:{name:"tt",autoRemove:!0}},{keys:["T","L"],model:{name:"tilt",autoRemove:!0}},{keys:["9"],model:{name:"960",autoRemove:!0}},{keys:["2"],model:{name:"doubleexclam",autoRemove:!0}},{keys:["3"],model:{name:"doublequestion",autoRemove:!0}},{keys:["J"],model:{name:"10",autoRemove:!0}},{keys:["Q"],model:{name:"1",autoRemove:!0}},{keys:["V"],model:{name:"12",autoRemove:!0}},{keys:["Y"],model:{name:"hype",autoRemove:!0}},{keys:["G","E"],model:{name:"gg",autoRemove:!0}},{keys:["R","I"],model:{name:"rip",autoRemove:!0}},{keys:["P"],model:{name:"present",autoRemove:!0}},{keys:["G","L"],model:{name:"gold",autoRemove:!0}},{keys:["S","T"],model:{name:"stockfish",autoRemove:!0}},{keys:["L","0"],model:{name:"lc0",autoRemove:!0}},{keys:["K","O"],model:{name:"komodo",autoRemove:!0}},{keys:["D","N"],model:{name:"danny",autoRemove:!0}},{keys:["O","M"],model:{name:"omg",autoRemove:!0}},{keys:["R","B"],model:{name:"robert",autoRemove:!0}},{keys:["H","K"],model:{name:"hikaru",autoRemove:!0}},{keys:["N","R"],model:{name:"anna",autoRemove:!0}},{keys:["D","R"],model:{name:"alexandra",autoRemove:!0}},{keys:["E","A"],model:{name:"andrea",autoRemove:!0}},{keys:["L","Y"],model:{name:"levy",autoRemove:!0}},{keys:["E","C"],model:{name:"eric",autoRemove:!0}},{keys:["M","N"],model:{name:"aman",autoRemove:!0}}];return{defaultFrames:P,defaultWindow:S,defaultHotkeys:_?[]:O}}({imagesBaseURL:null!=(O=null!=(P=C.imagesBaseURL)?P:_)?O:`${j}/static/test`,soundsBaseURL:null!=(R=null!=(M=C.soundsBaseURL)?M:T)?R:`${j}/static/test/sounds`,paletteMode:$,boardContainerAspectRatio:null!=(D=C.boardContainerAspectRatio)?D:1});i.boardImages.reset(),i.boardImages.setFrames(U),i.boardImages.setWindow(V),i.boardImages.setHotkeys(Z),S&&(s.resetBoardElement(S),s.showWindow())}}function getHotkeyId(i){return[...i.map((i=>i.toLowerCase()))].sort().join("-")}function createGetElement(i){return function getElement(){return i}}function initDOMElements({element:i,elements:s,addCloseButton:_,addTitleElement:T,addHoverElement:S}){const C=document.createElement("div");C.className="board-images__window";const P=document.createElement("div");P.className="board-images__window-body";const O=document.createElement("div");O.className="board-images__close-button";const M=document.createElement("div");M.innerHTML='\n<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 19">\n  <defs>\n    <style>\n      .cls-1 {\n        opacity: 0.3;\n      }\n\n      .cls-2 {\n        fill: #f8f8f8;\n      }\n\n      .cls-3 {\n        fill: #8a8886;\n      }\n    </style>\n  </defs>\n  <g>\n    <path class="cls-1" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"/>\n    <circle class="cls-2" cx="9" cy="9" r="8.5"/>\n    <path class="cls-2" d="M9,1A8,8,0,1,1,1,9,8,8,0,0,1,9,1M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"/>\n    <path class="cls-3" d="M13.37,12a.53.53,0,0,1,0,.78l-.59.61a.56.56,0,0,1-.4.17.54.54,0,0,1-.4-.17l-3-3-3,3a.58.58,0,0,1-.4.17.54.54,0,0,1-.39-.17l-.59-.59a.54.54,0,0,1-.17-.4.52.52,0,0,1,.17-.4l3-3-3-3a.52.52,0,0,1-.17-.4.54.54,0,0,1,.17-.4l.59-.59a.56.56,0,0,1,.8,0l3,3,3-3a.58.58,0,0,1,.4-.17.56.56,0,0,1,.4.17l.59.59a.54.54,0,0,1,.17.41.5.5,0,0,1-.17.39l-3,3,3,3Z"/>\n  </g>\n</svg>\n',O.appendChild(M);const R=document.createElement("div");R.className="board-images__title";const D=s.map((i=>"effects"in i?function createElementsForDOMEffects(i){const{id:s,effects:_,itemsPerRow:T,emptyItemsPerRow:S=0}=i,C=T+S,P=document.createElement("div");P.className="board-images__effects-container";const O=_.map(((i,s)=>{const _="string"==typeof i?i:i.type,O=document.createElement("div");if(O.className="board-images__effect","object"==typeof i&&i.title&&O.setAttribute("custom-title",i.title),O.style.width=100/C+"%",O.innerHTML=makeSvgIcon({path:sr[_],size:"100%"}),S>0&&s/T>0&&s%T==0){const i=document.createElement("div");i.className="board-images__break",i.style.width=S/C*100+"%",P.append(i)}return P.append(O),{container:O,type:_}}));return{id:s,container:P,domEffects:O}}(i):function createElementsForDOMFrame(i,s){const{id:_,itemsPerRow:T,rows:S,imageURL:C,emptyItemsPerRow:P=0,itemsAutoRemove:O,titles:M}=i,R=T+P,D=document.createElement("div");D.className="board-images__hover-container",D.style.width=T/R*100+"%";const j=document.createElement("div");j.className="board-images__hover",j.style.width=100/T+"%",j.style.height=100/S+"%",j.style.display="none";const $=document.createElement("img");$.className="board-images__image",$.src=C,$.draggable=!1,D.appendChild($),s&&D.appendChild(j);return{id:_,container:D,imageElement:$,hoverElement:j,itemsPerRow:T,rows:S,itemsAutoRemove:O,titles:M}}(i,S)));return D.forEach((i=>{P.appendChild(i.container)})),C.appendChild(P),i.appendChild(C),T&&i.appendChild(R),_&&i.appendChild(O),{closeButton:_?O:void 0,titleElement:R,domElements:D,windowElement:C}}let ia=-1,aa=-1;function getXYFromEvent({clientX:i,clientY:s,pointer:_,type:T,touches:S}){return(T===ei.Touchmove||T===ei.Touchstart)&&S.length>0&&(ia=S[0].clientX,aa=S[0].clientY),T===ei.Touchend?{x:ia,y:aa}:_?{x:_.x,y:_.y}:S&&S.length>0?{x:S[0].clientX,y:S[0].clientY}:{x:null!=i?i:-1,y:null!=s?s:-1}}function translateEventToIndex({itemsPerRow:i,rows:s,imageElement:_,event:T}){const{width:S,height:C}=_;let P,O;if("offsetX"in T)P=T.offsetX,O=T.offsetY;else{const{x:i,y:s}=getXYFromEvent(T);P=i,O=s}return function translateCoordinatesToIndex({offsetX:i,offsetY:s,itemsPerRow:_,rows:T,width:S,height:C}){const P=S/_,O=C/T,M=limitNumberWithinRange(i,{min:0,max:S}),R=limitNumberWithinRange(s,{min:0,max:C});return{xIndex:limitNumberWithinRange(Math.floor(M/P),{min:0,max:_-1}),yIndex:limitNumberWithinRange(Math.floor(R/O),{min:0,max:T-1})}}({offsetX:P,offsetY:O,itemsPerRow:i,rows:s,width:S,height:C})}function addEventListeners({windowElement:i,titleElement:s,domElements:_,elementClickedCallback:T,allowToggling:S,closeButton:C,closeButtonCallback:P}){var O;let M;i.addEventListener("contextmenu",(i=>(i.stopPropagation(),i.preventDefault(),!1))),null==(O=null==C?void 0:C.firstChild)||O.addEventListener(ni,(i=>{i.stopPropagation(),null==P||P()}));const toggleEmoji=i=>(M=S&&(null==M?void 0:M.xIndex)===i.xIndex&&(null==M?void 0:M.yIndex)===i.yIndex&&(null==M?void 0:M.frameId)===i.frameId?void 0:i,M),clearSelection=()=>{_.filter((i=>"hoverElement"in i)).map((i=>i.hoverElement)).forEach((i=>{i&&(i.style.display="none")})),_.filter((i=>"domEffects"in i)).map((i=>i.domEffects)).forEach((i=>{i.forEach((i=>i.container.classList.remove("selected")))}))},hideTitle=()=>{s.style.display="none",s.innerHTML=""};_.forEach((i=>{"domEffects"in i?function addEventListenersToEffectsDOMElement({domElement:i,titleElement:s,hideTitle:_,clearSelection:T,elementClickedCallback:S,allowToggling:C}){const{domEffects:P,id:O}=i;P.forEach(((i,P)=>{const{container:M,type:R}=i,D=M.getAttribute("custom-title");M.addEventListener(ni,(i=>{if(i.stopPropagation(),C){const i=M.classList.contains("selected");T(),M.classList.toggle("selected",!i)}S({effectsId:O,index:P,type:R})})),D&&(M.addEventListener(ri,(()=>{s.innerHTML=D,s.style.display=""})),M.addEventListener("pointerout",_))}))}({domElement:i,titleElement:s,hideTitle:hideTitle,clearSelection:clearSelection,elementClickedCallback:T,allowToggling:S}):function addEventListenersToFrameDOMElement({domElement:i,titleElement:s,hideTitle:_,clearSelection:T,elementClickedCallback:S,toggleEmoji:C}){const{container:P,imageElement:O,hoverElement:M,id:R,itemsPerRow:D,rows:j,itemsAutoRemove:$,titles:U=[]}=i;P.addEventListener(ni,(i=>{i.stopPropagation();const{xIndex:s,yIndex:_}=translateEventToIndex({itemsPerRow:D,rows:j,imageElement:O,event:i});if(S({frameId:R,xIndex:s,yIndex:_,autoRemove:$}),M){const i=C({xIndex:s,yIndex:_,frameId:R});T(),i&&(M.style.display="block",M.style.left=s/D*100+"%",M.style.top=_/j*100+"%")}})),O.addEventListener(ri,(i=>{var T;_();const{xIndex:S,yIndex:C}=translateEventToIndex({itemsPerRow:D,rows:j,imageElement:O,event:i});s.innerHTML=null!=(T=U[S+C*D])?T:"",s.style.display=""})),O.addEventListener("pointerout",_)}({domElement:i,titleElement:s,hideTitle:hideTitle,clearSelection:clearSelection,elementClickedCallback:T,toggleEmoji:toggleEmoji})}))}function createSetWindow(i){return function setWindow(s){const{elements:_,elementClickedCallback:T,closeButtonCallback:S,addTitleElement:C=!0,addHoverElement:P=!1}=s,{closeButton:O,titleElement:M,domElements:R,windowElement:D}=initDOMElements({element:i,elements:_,addCloseButton:Boolean(S),addTitleElement:C,addHoverElement:P});addEventListeners({windowElement:D,titleElement:M,domElements:R,elementClickedCallback:T,allowToggling:P,closeButton:O,closeButtonCallback:S})}}function createShowWindow(i){return function showWindow(){i.classList.remove("board-images--hidden")}}function createHideWindow(i){return function hideWindow2(){i.classList.add("board-images--hidden")}}function createSetSize(i){return function setSize(s,_){i.style.width=s?`${s}%`:"",i.style.height=_?`${_}%`:""}}function createSetPosition(i){const s="horizontal-overflow";return function setPosition(_,T,S){i.classList.contains(s)&&i.classList.remove(s),i.style.top=_?`${_}%`:"",i.style.left=T?`${T}%`:"",S&&i.classList.add(s)}}function createClearElement(i){return function clearElement(){i.innerHTML=""}}function createResetBoardElement(i){return function resetBoardElement(s){i.remove(),s.appendChild(i)}}function createIsVisible(i){return function isVisible(){return!i.classList.contains("board-images--hidden")}}function createClearSelection(i){return function clearSelection(){i.querySelectorAll(".board-images__hover").forEach((i=>{i.style.display="none"})),i.querySelectorAll(".board-images__effect.selected").forEach((i=>{i.classList.remove("selected")}))}}function createBoardImagesAPI({context:i,imagesBaseURL:s,soundsBaseURL:_,showCloseButton:T,paletteContainer:S}){const C=i.api,P=new Map,O=new Map,M=new Map,R=function createKeyedSet({items:i=[],keys:s=[],createKey:_}={}){if(!_&&!s.length)throw new Error("Need to specify at least one key or createKey function");const T=!s.includes("id")&&_?["id",...s]:s,S=T.map((()=>new Map));function set3(i){T.forEach(((s,T)=>{var C;const P=null!=(C=i[s])?C:null==_?void 0:_(i);P&&S[T].set(P,i)}))}return i.forEach((i=>{set3(i)})),{find:function find(i){let s;const C=S.find((S=>{let C=!1;const P=T.find((s=>{const _=i[s];return _&&(C=!0),_&&S.has(_)}));if(P)return s=i[P],!0;const O=null==_?void 0:_(i);if(!C&&!O)throw new Error("Could not find a key or create a key with passed in parameter");return!(!O||!S.has(O)||(s=O,0))}));return s&&(null==C?void 0:C.get(s))},set:set3,getAsArray:function getAsArray(){var i;return[...null==(i=S[0])?void 0:i.values()]},clear:function clear5(){S.forEach((i=>i.clear()))}}}({keys:["id","name"],createKey:getShortcutId}),D={windowPosition:void 0,window:void 0},j=function createBoardImagesDOMService(i){const s=function createBoardImagesElement(){const s=document.createElement("div");return s.className="board-images",s.classList.add("board-images--hidden"),i&&s.classList.add("board-images--palette"),s.addEventListener("pointerdown",(i=>{i.stopPropagation()})),s.addEventListener("wheel",(i=>{i.stopPropagation()})),s}();return{showWindow:createShowWindow(s),hideWindow:createHideWindow(s),setWindow:createSetWindow(s),setSize:createSetSize(s),setPosition:createSetPosition(s),getElement:createGetElement(s),clearElement:createClearElement(s),resetBoardElement:createResetBoardElement(s),isVisible:createIsVisible(s),clearSelection:createClearSelection(s)}}(Boolean(S)),$={framesMap:P,markedSquares:O,hotkeysMap:M,shortcuts:R,windowState:D};return function createAPIFunctions(i){const U=function createGetHotkey(i){return function getHotkey(s){return i.get(getHotkeyId(s))}}(M),V=function createGetHotkeys(i){return function getHotkeys(){return[...i.values()]}}(M),Z=function createGetFrames(i){return function getFrames(){return[...i.values()]}}(P),Y=createSetFrames({api:C,framesMap:P,shortcuts:R}),X=function createGetAllMarkingShortcuts(i){return function getAllMarkingShortcuts(){return i.getAsArray()}}(R),Q=function createGetMarkingShortcut(i){return function getMarkingShortcut(s){return i.find({name:s})}}(R),ee=function createUnmark$1(i,s){return function unmark(_){const T=Array.isArray(_)?_:[_],S=[];T.forEach((i=>{const _=s.get(i);_&&(S.push(_.marking.key),s.delete(i))})),S.length&&(S.length>1?i.markings.removeMany(S):i.markings.removeOne(S[0]))}}(C,O),te=createMark$1({api:C,markedSquares:O,framesMap:P,shortcuts:R}),ne=function createIsMarked(i){return function isMarked(s){return i.has(s)}}(O),re=function createGetMarkings$1(i){return function getMarkings2(){return[...i.values()].map((i=>i.input))}}(O),ie=function createClearMarkings$1(i,s){return function clearMarkings(){const _=[...i.keys()];_.length&&s.boardImages.unmark(_)}}(O,C),ae=function createGetWindow(i){return function getWindow(){return i.window}}(D),se=function createHideWindow$1({state:i,api:s,boardImagesDOM:_}){return function hideWindow2(){const{window:T,windowPosition:S}=i.windowState;if(T){if(S){const T=s.markings.getAllWhere({types:[de]}).find((i=>i.data.square===S));T&&s.markings.removeOne(T.key),i.windowState.windowPosition=void 0,_.setPosition()}i.selectedMarking&&s.boardImages.selectMarking(),_.hideWindow()}}}({state:$,api:C,boardImagesDOM:i}),oe=function createIsInitialized(i){return function isInitialized(){return i.boardImages.getFrames().length>0}}(C),le=createSetWindow$1({boardImagesDOM:i,framesMap:P,windowState:D,hotkeysMap:M,shortcuts:R,showCloseButton:T,api:C}),ce=function createSetHotkeys({hotkeysMap:i,windowState:s,api:_}){return function setHotkeys(T=[]){i.clear(),T.forEach((s=>{const _=getHotkeyId(s.keys);if(i.has(_))throw new Error(function getHotkeyError(i){return`Hotkey combination already in use: ${i.join(", ")})`}(s.keys));i.set(_,s)})),_.boardImages.setWindow(s.window)}}({windowState:D,hotkeysMap:M,api:C}),ue=createShowWindow$1({windowState:D,api:C,boardImagesDOM:i}),he=function createGetWindowPosition(i){return function getWindowPosition(){const{window:s,windowPosition:_}=i;if(s&&!s.paletteMode)return _}}(D),pe=function createToggleWindow(i,s){return function toggleWindow2(_){const T=s.isVisible();if(!_)return void(T?i.boardImages.hideWindow():i.boardImages.showWindow());const{square:S,squareCoords:C,allowWindowOverflow:P=!1}=_;S===i.boardImages.getWindowPosition()?i.boardImages.hideWindow():i.boardImages.showWindow({square:S,squareCoords:C,allowWindowOverflow:P})}}(C,i),me=function createReset(i){return function reset2(){i.boardImages.setFrames(),i.boardImages.clearMarkings(),i.boardImages.hideWindow(),i.boardImages.setWindow(),i.boardImages.setHotkeys()}}(C),fe=createInitDefault({api:C,boardImagesDOM:j,imagesBaseURL:s,soundsBaseURL:_,paletteContainer:S}),ge=function createDestroy$1(i,s){return function destroy10(){i.boardImages.reset(),s.getElement().remove()}}(C,i),ve=function createSelectMarking(i,s){return function selectMarking(_){i.selectedMarking=_,_||s.clearSelection()}}($,i),be=function createGetSelectedMarking(i){return function getSelectedMarking2(){return i.selectedMarking}}($);return{initDefault:fe,reset:me,destroy:ge,isInitialized:oe,getFrames:Z,setFrames:Y,getAllMarkingShortcuts:X,getMarkingShortcut:Q,setHotkeys:ce,getHotkeys:V,getHotkey:U,mark:te,unmark:ee,isMarked:ne,getMarkings:re,clearMarkings:ie,selectMarking:ve,getSelectedMarking:be,getWindow:ae,setWindow:le,showWindow:ue,hideWindow:se,toggleWindow:pe,getWindowPosition:he,dom:i}}(j)}function or(...i){return function checkConditions(s,_){return Boolean(i.find((i=>i(s,_))))}}function eventIncludes(i){return function eventIncludesData(s,_){return i in s.data&&void 0!==s.data[i]&&null!==s.data[i]}}function keyIsPressed(i){return function checkIfKeyIsPressed(s,_){return _.api.keys.getPressedKeys().includes(i)}}function getMarkings({context:i,squares:s=[],whereOptions:_}){const T=i.api,S=Array.isArray(s)?s:[s],C=_?T.markings.getAllWhere(_):T.markings.getAll();return S.length>0?C.filter((i=>S.includes(i.data.square))):C}function markingsPresent({getSquares:i,whereOptions:s}){return function markingsPresentOnSquare(_,T){return getMarkings({context:T,squares:null==i?void 0:i(_,T),whereOptions:s}).length>0}}function noMarkingsPresent({getSquares:i,whereOptions:s}){return function markingsPresentOnSquare(_,T){return 0===getMarkings({context:T,squares:null==i?void 0:i(_,T),whereOptions:s}).length}}function emojisPresent({getSquares:i}){return function emojisPresentOnSquares(s,_){const T=i(s,_);if(!T)return!1;const S=Array.isArray(T)?T:[T],C=_.api;return Boolean(S.find((i=>C.boardImages.isMarked(i))))}}function anyKeyIsPressed(i,s){return s.api.keys.getPressedKeys().length>0}function noKeysArePressed(i,s){return!anyKeyIsPressed(0,s)}function boardImagesHotkeyIsPressed(i,s){const _=s.api,T=_.keys.getPressedKeys();return Boolean(_.boardImages.getHotkey(T))}function boardImagesWindowPositionPresent(i,s){const _=s.api;return Boolean(_.boardImages.getWindowPosition())}function boardImagesNotInitialized(i,s){return!s.api.boardImages.isInitialized()}function boardImagesInitialized(i,s){return s.api.boardImages.isInitialized()}function boardImagesMarkingSelected(i,s){const _=s.api;return Boolean(_.boardImages.getSelectedMarking())}function valueChanged({getValue:i,ignoreFirstValue:s=!1}){let _,T=!1;return function checkIfValueChanged(S,C){const P=i(S,C);if(s&&!T)return T=!0,_=P,!1;const O=_!==P;return _=P,O}}function hideWindow(i,s){const{queue:_}=s,T=s.api;return _.add(T.boardImages.hideWindow),!1}function getSquareCoordinates({square:i,el:s,renderer:_,boardFlipped:T=!1}){if(!_)return{x:0,y:0};const S=_.getCoordsFromSquare(i,T);return _.name===an.Types.WebGL2D?{x:S.x/s.clientWidth*100+6.25,y:S.y/s.clientHeight*100-6.25}:_.name===an.Types.WebGL3D?{x:S.x/s.clientWidth*100,y:S.y/s.clientHeight*100,centered:!0}:{x:(S.x+100)/800*100,y:S.y/800*100}}function refreshWindowPosition({getContainer:i}){return function refreshPosition(s,_){const T=i(s,_);if(!T)return;const{queue:S,renderer:C,options:P}=_,O=_.api,M=O.boardImages.getWindowPosition();if(!M)return;const R=getSquareCoordinates({square:M,el:T,renderer:C,boardFlipped:P.flipped});S.add(O.boardImages.showWindow,{square:M,squareCoords:R})}}function initializeBoardImages({getContainer:i}){return function initBoardImages(s,_){const T=i(s,_);if(!T)return!0;const{renderer:S}=_,C=_.api;return C.boardImages.initDefault({boardContainerAspectRatio:null==S?void 0:S.getBoardContainerAspectRatio()}),C.boardImages.dom.resetBoardElement(T),!0}}function unmarkEmojis({getSquares:i}){return function unmarkEmojisOnSquares(s,_){const T=null==i?void 0:i(s,_),{queue:S}=_,C=_.api;return T?S.add(C.boardImages.unmark,T):S.add(C.boardImages.clearMarkings),!1}}function addHotkeyMarking({getSquare:i}){return function addHotkeyMarkingOnSquare(s,_){const T=i(s,_);if(!T)return!0;const{queue:S}=_,C=_.api,P=C.keys.getPressedKeys(),O=C.boardImages.getHotkey(P);return!O||(S.add(C.boardImages.mark,{square:T,model:O.model}),!1)}}function removeMarkings({getSquares:i,whereOptions:s}){return function removeMarkingsOnSquare(_,T){const S=null==i?void 0:i(_,T),{queue:C}=T,P=T.api,O=s?P.markings.getAllWhere(s):P.markings.getAll(),M=Array.isArray(S)?S:[S],R=(S?O.filter((i=>M.includes(i.data.square))):O).map((i=>i.key));return!R.length||(1===R.length?C.add(P.markings.removeOne,R[0]):R.length>1&&C.add(P.markings.removeMany,R),!1)}}function toggleWindow({getContainer:i,getSquare:s}){return function toggleEmojiWindow(_,T){const S=i(_,T),C=s(_,T);if(!S||!C)return!0;const{queue:P,renderer:O,options:M}=T,R=T.api,D=getSquareCoordinates({square:C,el:S,renderer:O,boardFlipped:M.flipped});return P.add(R.boardImages.toggleWindow,{square:C,squareCoords:D}),!1}}function boardImagesMark({getSquares:i,getMarking:s}){return function boardImagesMarkOnSquares(_,T){const S=i(_,T),C=s(_,T);if(!S||!C)return!0;const{queue:P}=T,O=T.api,M={model:C,square:S};return P.add(O.boardImages.mark,M),!1}}function removeSelectedMarking(i,s){const{queue:_}=s,T=s.api;return _.add(T.boardImages.selectMarking),!1}function getEventData(i,s){return i.data}function getFromEvent(...i){return function getDataFromEvent(s,_){const T=i.map((i=>i.includes(".")?i.split(".").reduce(((i,s)=>null==i?void 0:i[s]),s.data):i.length>0?s.data[i]:s.data)).filter((i=>void 0!==i));return 0===T.length?void 0:T.length>1?T:T[0]}}function getBoardImagesElement(i){return function getDOMElement(s,_){return null!=i?i:_.el}}const sa="square",oa="move.to",la="move.rookTo";function createWindowEventHandlers(i){return[{condition:pipeConditions(is$1(C.OptionsEvents.Update),eventIncludes("flipped"),boardImagesInitialized,boardImagesWindowPositionPresent),handler:refreshWindowPosition({getContainer:getBoardImagesElement(i)})}]}function createWindowBeforeStateEventHandlers({keyToOpenWindow:i,useLeftClick:s,container:_}){const T=s?C.UserEvents.PointerdownLeft:C.UserEvents.PointerdownRight;return[{condition:pipeConditions(is$1(T),anyKeyIsPressed,eventIncludes(sa),boardImagesNotInitialized),handler:initializeBoardImages({getContainer:getBoardImagesElement(_)})},{condition:pipeConditions(is$1(T),anyKeyIsPressed,eventIncludes(sa),boardImagesInitialized,noMarkingsPresent({getSquares:getFromEvent(sa),whereOptions:{persistent:!0,types:[Je,Be]}}),keyIsPressed(i)),handler:toggleWindow({getContainer:getBoardImagesElement(_),getSquare:getFromEvent(sa)})},{condition:pipeConditions(isOneOf([C.UserEvents.PointerdownLeft,C.UserEvents.PointerdownRight]),noKeysArePressed,boardImagesInitialized,boardImagesWindowPositionPresent),handler:hideWindow}]}function createCommonBeforeStateEventHandlers({keyToOpenWindow:i,useLeftClick:s}){const _=s?C.UserEvents.PointerdownLeft:C.UserEvents.PointerdownRight;return[{condition:pipeConditions(is$1(_),anyKeyIsPressed,eventIncludes(sa),boardImagesInitialized,noMarkingsPresent({getSquares:getFromEvent(sa),whereOptions:{persistent:!0,types:[Je,Be]}}),boardImagesHotkeyIsPressed),handler:addHotkeyMarking({getSquare:getFromEvent(sa)})},{condition:pipeConditions(is$1(_),anyKeyIsPressed,eventIncludes(sa),boardImagesInitialized,emojisPresent({getSquares:getFromEvent(sa)}),or(keyIsPressed(i),boardImagesHotkeyIsPressed)),handler:unmarkEmojis({getSquares:getFromEvent(sa)})},{condition:pipeConditions(is$1(_),anyKeyIsPressed,eventIncludes(sa),boardImagesInitialized,markingsPresent({getSquares:getFromEvent(sa),whereOptions:{persistent:!0,types:[Je]}}),or(keyIsPressed(i),boardImagesHotkeyIsPressed)),handler:removeMarkings({getSquares:getFromEvent(sa),whereOptions:{persistent:!0,types:[Je]}})}]}function createPaletteModeBeforeStateEventHandlers(i){const s=i?C.UserEvents.PointerdownLeft:C.UserEvents.PointerdownRight;return[{condition:pipeConditions(is$1(i?C.UserEvents.PointerdownRight:C.UserEvents.PointerdownLeft),boardImagesInitialized,boardImagesMarkingSelected),handler:removeSelectedMarking},{condition:pipeConditions(is$1(s),eventIncludes(sa),noKeysArePressed,boardImagesInitialized,noMarkingsPresent({getSquares:getFromEvent(sa),whereOptions:{persistent:!0,types:[Je,Be]}}),boardImagesMarkingSelected),handler:boardImagesMark({getSquares:getFromEvent(sa),getMarking:function getBoardImagesSelectedMarking(i,s){return s.api.boardImages.getSelectedMarking()}})},{condition:pipeConditions(is$1(s),eventIncludes(sa),noKeysArePressed,boardImagesInitialized,emojisPresent({getSquares:getFromEvent(sa)}),boardImagesMarkingSelected),handler:unmarkEmojis({getSquares:getFromEvent(sa)})},{condition:pipeConditions(is$1(s),eventIncludes(sa),noKeysArePressed,boardImagesInitialized,markingsPresent({getSquares:getFromEvent(sa),whereOptions:{persistent:!0,types:[Je]}}),boardImagesMarkingSelected),handler:removeMarkings({getSquares:getFromEvent(sa),whereOptions:{persistent:!0,types:[Je]}})}]}function createMinimalPlugins(){return[createAssetsPlugin(),createBoardSizePlugin(),createPiecesPlugin(),createRendererErrorCatcherPlugin()]}function createStandardPlugins({exclude:i}={}){const s={[ur.Plugin.Name]:createKeysPlugin,[T.Plugin.Name]:createAccessibilityPlugin,[he.Plugin.Name]:createArrowKeysPlugin,[fe.Plugin.Name]:createArrowsPlugin,[_e.Plugin.Name]:createBlinkingHighlightPlugin,[Re.Plugin.Name]:createCoordinatesPlugin,[lr.Plugin.Name]:createFlipBoardPlugin,[ne.Plugin.Name]:createHighlightsPlugin,[lt.Plugin.Name]:createHoverSquarePlugin,[fr.Plugin.Name]:createMarkingsPlugin,[Ut.Plugin.Name]:createBoardDisabledPlugin,[ut.Plugin.Name]:createMoveHintsPlugin,[kt.Plugin.Name]:createSoundsPlugin};i&&i.forEach((i=>{delete s[i]}));const _=[getSelectionSquare,getMoveHighlights,getAnalysisHighlights],S=[...createMinimalPlugins()];return Object.keys(s).forEach((i=>i===ne.Plugin.Name?S.push(s[i](_)):S.push(s[i]()))),S}function createPremiumPlugins(){return[...createStandardPlugins(),createFadeSetupPlugin(),createEffectsPlugin(),createCustomItemsPlugin(),createCheatDetectionPlugin()]}Symbol.toStringTag;const ca=/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*((\d|\.)+))?\)$/;function rgbToHex(i){if(-1===i.search("rgb"))return i;const s=i.match(ca);return`#${hexValue(s[1])}${hexValue(s[2])}${hexValue(s[3])}`}function rgbaToOpacity(i){return-1===i.search("rgba")?1:parseFloat(i.match(ca)[4])}function hexValue(i){return`0${parseInt(i,10).toString(16)}`.slice(-2)}function getElementBackgroundImage(i,s){return window.getComputedStyle(i,s).backgroundImage}function getPieceShortStringFromUrl(i){const[s,_]=i.split("/").pop().split(".")[0];return"w"===s?_.toUpperCase():_}function getFileRankFromSan(i){return{file:i.toLowerCase().charCodeAt(0)-96,rank:Number(i.charAt(1))}}function getSanFromFileRank$1(i){if(!(!i||!i.file||!i.rank||i.file>8||i.rank>8))return`${String.fromCharCode(96+i.file)}${i.rank.toString()}`}function buildMode({base:i,initialOptions:s}){return function getBoundMode(_){const T=Object.keys(s).reduce(((i,_)=>(i[_]=s[_].default,i)),{}),S=i({api:_,options:T}),P=function createExtendMode(i,s){return function extendMode(_){const T=Object.entries(_).map((([_,T])=>{var S;if(!T||!(null==(S=i.overridableMethods)?void 0:S.includes(_)))return;const C=i[_];return i[_]=T(i,s),function destroyOverride(){i[_]=C}}));return function destroyOverride(){T.map((i=>null==i?void 0:i()))}}}(S,_);return Object.assign(S,{extendMode:P,getOptions:function getOptions(){return T},setOption:function setOption(i,S){var P;if(!(null==(P=s[i])?void 0:P.editable))return void warnOptionNotEditable(i);T[i]=S,_.emit(C.OptionsEvents.UpdateMode,createCoreEvent(C.OptionsEvents.UpdateMode,{[i]:S}))}})}}function createModeFactory(i,s){return function createMode(_={}){const T=Object.keys(_).reduce(((i,T)=>{var S;return(null==(S=s[T])?void 0:S.editable)?Object.assign(i,{[T]:{default:_[T],editable:!0}}):warnOptionNotEditable(T),i}),s);return buildMode({base:i,initialOptions:T})}}function warnOptionNotEditable(i){console.warn(`${i} is not an editable option in this mode.`)}function canMoveForward({api:i,followAlternateLines:s=!1,mv:_}){const{game:T,mutateGame:S}=i.getContext(),C=S((function callMethod(){T.moveForward(s,_)}));return!!(null==C?void 0:C.plyDiff)&&(T.moveBackward(),!0)}function createMove$7(i){const{api:s}=i,_=s.move;return function move(i){const T=s.isAtEndOfLine(),{canAddMovesToMainLine:S}=s.getMode().getOptions();return canMoveForward({api:s,followAlternateLines:!0,mv:i})?_(i):function shouldAddContinuation({canAddMovesToMainLine:i,isAtEndOfLine:s,node:_}){var T;const S=isNode(_)?null==(T=null==_?void 0:_.ids)?void 0:T.line:null==_?void 0:_.id;return!i&&s&&0===S}({canAddMovesToMainLine:S,isAtEndOfLine:T,node:s.getRelativeNode()})?function addContinuation(){if(s.createContinuation())return _(i);return null}():_(i)}}var ua,da,ha,pa,ma,fa;(function(i){i.Name="analysis"})((da=ua||(ua={})).Plugin||(da.Plugin={})),function(i){i.Name="effectsHMLSync"}((pa=ha||(ha={})).Plugin||(pa.Plugin={})),(fa=ma||(ma={})).GreatFind="!",fa.Mistake="?",fa.Brilliant="!!",fa.Blunder="??",fa.Interesting="!?",fa.Inaccuracy="?!",fa.Drawish="=",fa.Unclear="",fa.WhiteHasModerateAdvantage="",fa.BlackHasModerateAdvantage="",fa.WhiteHasDecisiveAdvantage="+-",fa.BlackHasDecisiveAdvantage="-+",fa.PositionInZugzwang="",fa.WithCompensation="",fa.Novelty="N",fa.WithAttack="=/";const ga=function createGetAnnotationName(){const i=new Map;return Object.keys(ma).forEach((s=>{const _=ma[s];i.set(_,s)})),function getName(s){if(s)return i.get(s)}}();function annotationAdded(i,s){const{data:_}=i;if(_.changes.userGenerated)return!1;const T=ga(_.changes.annotation);return Boolean(T)}function annotationRemoved(i,s){const{data:_}=i;return!_.changes.userGenerated&&("annotation"in _.changes&&!_.changes.annotation)}function selectedNodeUpdated(i,s){const{data:_}=i,{api:T}=s;if(_.changes.userGenerated)return!1;const S=T.getSelectedNode();if(!isNode(S))return!1;const{ids:C}=S,{ids:P}=_;return!(!C||!P)&&(P.move===C.move&&P.line===C.line)}function unselectedNodeUpdated(i,s){var _,T;const{data:S}=i,{api:C}=s;if(S.changes.userGenerated)return!1;const P=C.getSelectedNode(),{ids:O}=S;return!!O&&(O.move!==(null==(_=null==P?void 0:P.ids)?void 0:_.move)||O.line===(null==(T=null==P?void 0:P.ids)?void 0:T.line))}function selectedNodeHasAnnotation(i,s){const{api:_}=s,T=_.getSelectedNode();return!!isNode(T)&&Boolean(T.annotation)}function selectedNodeAnnotationDoesNotMatchEffect(i,s){var _;const{api:T}=s,S=T.markings,C=T.getSelectedNode();if(!isNode(C))return!1;const P=ga(C.annotation);if(!P)return!1;const O=S.getAllWhere({types:[Je]}).find((i=>i.data.square===(null==C?void 0:C.to)&&i.node));return P!==(null==(_=null==O?void 0:O.data)?void 0:_.type)}function addEffect(i,s){const{data:_}=i,{api:T,queue:S}=s,C=T.markings,P=ga(_.node.annotation);S.add((function addMarking(){C.addOne({data:{square:_.node.to,type:P},persistent:!0,node:!0,type:Je})}))}function removeEffect(i,s){const{data:_}=i,{api:T,queue:S}=s,C=T.markings,P=C.getAllWhere({types:[Je]}).find((i=>i.data.square===_.node.to));P&&S.add((function removeMarking(){C.removeOne(P.key)}))}function updateAnnotation(i,s){var _;const{api:T,queue:S}=s,C=T.getSelectedNode();if(!isNode(C))return;const P=i.data.filter(isType(Je)).find((i=>i.data.square===C.to&&i.node));if(!P)return;const O=null!=(_=ma[P.data.type])?_:"";C.annotation&&C.annotation===O||S.add((function refreshAnnotation(){S.add((function refreshAnnotationInNextCycle(){T.updateNode(C.ids,{annotation:O,userGenerated:!0})}))}))}function removeAnnotation(i,s){const{api:_,queue:T}=s,S=_.getSelectedNode();if(!isNode(S))return;const C=i.data.filter(isType(Je)).find((i=>i.data.square===S.to&&i.node));C&&ma[C.data.type]&&T.add((function clearAnnotation(){_.updateNode(S.ids,{annotation:"",userGenerated:!0})}))}function removeEffectFromJCE(i,s){const{data:_}=i,{api:T}=s,{move:S,line:C}=_.ids,{game:P}=T.getContext(),O=P.ids();P.selectPosition(S,C);const M=getMarkingsFromJCE(P).find((i=>i.data.square===_.node.to&&"effect"===i.type));M&&removeFromJCENode(P,M),P.selectPosition(O.move,O.line)}function queueAddEffect(i,s){const{api:_,queue:T}=s,S=_.markings,C=_.getSelectedNode();if(!isNode(C))return;const{annotation:P}=C;T.add((function addEffect2(){T.add((function addEffectInNextCycle(){const i=_.getSelectedNode();if(!isNode(i))return;const{annotation:s}=i,T=ga((null==s?void 0:s.length)?s:P);T&&S.addOne({data:{square:null==C?void 0:C.to,type:T},persistent:!0,node:!0,type:Je})}))}))}var va,ba;(function(i){i.Analysis="analysis",i.CaptureTheStar="capture-the-star",i.Explorer="exploring",i.GuessTheMove="guess-the-move",i.PassiveObserving="passive-observing",i.Observing="observing",i.Playing="playing",i.Setup="setup"})((ba=va||(va={})).Types||(ba.Types={}));const ya=createModeFactory((function base$7({api:i}){return{isAllowedToMove:function isAllowedToMove(){const{canAddMovesToMainLine:s}=i.getMode().getOptions();return s||Boolean(i.getSelectedNode())},name:va.Types.Analysis,plugins:[{apiOverrides:{move:createMove$7},name:ua.Plugin.Name},createAnalysisOverlayPlugin(),{match:[{condition:isMark(Je),handler:updateAnnotation},{condition:pipeConditions(isUnmark(Je),selectedNodeHasAnnotation),handler:removeAnnotation},{condition:pipeConditions(is$1(C.APIEvents.NodeUpdated),selectedNodeUpdated,annotationAdded,selectedNodeAnnotationDoesNotMatchEffect),handler:addEffect},{condition:pipeConditions(is$1(C.APIEvents.NodeUpdated),selectedNodeUpdated,annotationRemoved),handler:removeEffect},{condition:pipeConditions(isOneOf(mr),selectedNodeHasAnnotation),handler:queueAddEffect},{condition:pipeConditions(is$1(C.APIEvents.NodeUpdated),unselectedNodeUpdated),handler:removeEffectFromJCE}],name:ha.Plugin.Name}]}}),{canAddMovesToMainLine:{default:!0,editable:!0},canInteractWithPieces:{default:!0,editable:!0},canMoveWhenGameIsOver:{default:!0,editable:!1},canModifyExistingMovesOnMainLine:{default:!0,editable:!0}});var _a,wa,ka=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",create:ya});function createConfigureitems(i){return function configureItems(s){i.config.set("items",s)}}function createGetCurrentMoveCount(i){return function getCurrentMoveCount(){var s;return(null==(s=i.getHistorySANs())?void 0:s.length)-1||0}}function createGetData(i,s){return function getData(){const _=i.captureTheStar;return{completed:s.status.get("completed")||!1,completedMoveCount:s.status.get("completedMoveCount"),itemsRemaining:_.getNumItemsRemaining(),moveCount:_.getCurrentMoveCount()}}}function createGetItems(i){return function getItems(s={}){const{api:_,game:T}=i,S=_.markings,{previousNode:C}=s;let P=[];if(C){const i=T.ids();T.moveBackward(),P=getItems(),T.selectPosition(i.move,i.line)}else P=S.getAllWhere({types:[Be]});return P}}function createGetItemSquares(i){return function getItemSquares(){return i.captureTheStar.getItems().map((i=>i.data.square))}}(function(i){i.Completed="CTSCompleted"})((wa=_a||(_a={})).Events||(wa.Events={})),function(i){i.Name="captureTheStar"}(wa.Plugin||(wa.Plugin={}));const Ta='Move object has no "from" square.',Sa="Cannot load without any items.",Ca="Cannot load without a piece.",xa="Configuration missing for custom item";function getIntermediateSquares(i,s){const{file:_,rank:T}=getFileRankFromSan$1(i),{file:S,rank:C}=getFileRankFromSan$1(s),P="abcdefgh",O="12345678";if(_===S)return getIntegersBetweenTwoNumbers(T,C).map((i=>`${P.charAt(_-1)}${O.charAt(i-1)}`));if(T===C)return getIntegersBetweenTwoNumbers(_,S).map((i=>`${P.charAt(i-1)}${O.charAt(T-1)}`));if(Math.abs(S-_)!==Math.abs(C-T))throw new Error("Squares are not on same file, rank, or diagonal");const M=getIntegersBetweenTwoNumbers(_,S),R=getIntegersBetweenTwoNumbers(T,C);return M.reduce(((i,s,_)=>(i.push(`${P.charAt(s-1)}${O.charAt(R[_]-1)}`),i)),[])}function getIntegersBetweenTwoNumbers(i,s){const[_,T]=[i,s].sort();return Array(T-_-1).fill(void 0).map(((i,s)=>_+s+1))}function createGetNextItems(i){return function getNextItems(s){const _=i.captureTheStar,{from:T,to:S}=s;if(!T)throw new Error(Ta);let C=[];return C="n"===s.piece.toLowerCase()?[S]:[S,...getIntermediateSquares(T,S)],_.getItems({previousNode:!0}).filter((i=>!C.includes(i.data.square)))}}function createGetNumItemsRemaining(i){return function getNumItemsRemaining(){const s=i.captureTheStar;return Object.keys(s.getItems()).length}}function createIsCompleted(i){return function isCompleted(){return Boolean(i.status.get("completed"))}}function createLoad$2(i,s){return function load3(_){const{items:T,piece:S}=_,{api:P,game:O,respond:M}=i,R=P.captureTheStar,D=P.markings;if(!Object.keys(T).length)throw new Error(Sa);if(!S)throw new Error(Ca);return P.clearMarkings(),O.load("8/8/8/8/8/8/8/8"),O.put(S,S.square),Object.entries(T).forEach((([i,_])=>{const T=function createCTSMarking(i,s,_){const T=null==i?void 0:i[_];if(!qe[_]&&!T)return null;const S={data:{square:s,type:T?qe.Image:qe.Star},node:!0,persistent:!0,type:Be,key:`cts-${s}`};return T&&(S.data.image={url:T}),S}(s.config.get("items"),i,_);if(!T)throw new Error(xa);D.addOne(T)})),P.setPlayingAs(S.color),P.setTurn(S.color),R.resetPuzzleStatus(),M(C.APIEvents.Load,{pieces:P.getPieces()})}}function createUpdatePuzzleStatus(i,s){return function updatePuzzleStatus(){const _=i.captureTheStar;0!==_.getNumItemsRemaining()||_.isCompleted()||(s.status.set("completed",!0),s.status.set("completedMoveCount",_.getCurrentMoveCount()),_.emit(_a.Events.Completed,_.getData()))}}function createCaptureTheStarAPI(i){const{api:s}=i,_=(0,ie.a)(),T=function createInternalAPI(){const i=new Map,s=new Map;return{config:i,status:s}}();T.config.set("items",{});const S=function createResetPuzzleStatus(i){return function resetPuzzleStatus(){i.status.set("completed",!1),i.status.delete("completedMoveCount")}}(T);return S(),__spreadProps(__spreadValues({configureItems:createConfigureitems(T),getCurrentMoveCount:createGetCurrentMoveCount(s),getData:createGetData(s,T),getItems:createGetItems(i),getItemSquares:createGetItemSquares(s),getNextItems:createGetNextItems(s),getNumItemsRemaining:createGetNumItemsRemaining(s)},_),{isCompleted:createIsCompleted(T),load:createLoad$2(i,T),resetPuzzleStatus:S,updatePuzzleStatus:createUpdatePuzzleStatus(s,T)})}function getOppositeColor(i){return i===wr.ColorsAsNumbers.Black?wr.ColorsAsNumbers.White:wr.ColorsAsNumbers.Black}function createGetLegalMoves$1(i){const{api:s,game:_}=i,T=s.getLegalMoves;return function getLegalMoves(){const i=s.captureTheStar;if(!s.getPlayingAs())return[];const S=T(),C=_.getPieces(!1)[0];if(!C||"p"!==C.type)return S;const P=function buildFEN(i,s){const _=getOppositeColor(s.color)===wr.ColorsAsNumbers.Black?"p":"P",T=s.color===wr.ColorsAsNumbers.Black?s.type:s.type.toUpperCase(),S=new Array(8).fill(void 0).map((()=>new Array(8).fill(".")));return S[8-s.rank][s.file-1]=T,i.reduce(((i,s)=>{const{file:T,rank:S}=getFileRankFromSan$1(s);return T&&S?(i[8-S][T-1]=_,i):i}),S).map((i=>i.join("").replace(/(\.+)/g,(i=>i.length.toString())))).join("/")}(i.getItemSquares(),C),O=ie.J.getLegalMoves(P);return function deduplicateByKey(i,s){return[...new Map(i.map((i=>[i[s],i]))).values()]}([...S,...O],"san")}}function createGetMove$2(i){const{api:s}=i,_=s.getMove;return function getMove(i){var T;const S=_(i);return S||(null!=(T=s.getLegalMoves().find((s=>s.to===i.to)))?T:null)}}function createMove$6(i){const{api:s,game:_}=i,T=s.move;return function move(i){if(!s.isAtEndOfLine())return s.selectLineEnd();if(!i.userGenerated||!("flags"in i))return T(i);const S=i;return isCapture(S)&&"p"===S.piece&&_.put({type:"p",color:getOppositeColor(S.color)},i.to),T(i)}}function createMoveBackward$1(i){return function moveBackward(){var s;const{respond:_,game:T,mutateGame:S}=i,P=S((function callMethod(){T.moveBackward()}));return!P||0===P.lineDiff&&0===P.plyDiff?_(C.APIEvents.MoveBackward,null):((null==(s=P.move)?void 0:s.captured)&&(P.move.captured=void 0),_(C.APIEvents.MoveBackward,P))}}function createCaptureTheStarPlugin(i){return{api:createCaptureTheStarAPI,apiOverrides:{getLegalMoves:createGetLegalMoves$1,getMove:createGetMove$2,move:createMove$6,moveBackward:createMoveBackward$1},create:function create3(s){const{api:_}=s,T=_.captureTheStar;i&&T.configureItems(i.items)},match:[{condition:isOneOf(mr),handler:function setTurn(i,s){const{api:_,queue:T}=s,S=_.getPlayingAs();if(!S)return;T.add(_.setTurn,S)}},{condition:is$1(C.APIEvents.Move),handler:function handleMove2(i,s){const{api:_,queue:T}=s,S=_.captureTheStar,C=_.markings,P=_.getContext().game,O=S.getNextItems(i.data.move);T.add((function refreshCTS(){T.add((function refreshInNextCycle(){C.addMany(O),P.turn(_.getPlayingAs()),S.updatePuzzleStatus()}))}))}}],name:_a.Plugin.Name}}function createHandleIllegalMove(i){return function handleIllegalMove(){i.isAtEndOfLine()||i.selectLineEnd()}}const Ea=createModeFactory((function base$6({api:i}){return{isAllowedToMove:function isAllowedToMove(){return!0},handleIllegalMove:createHandleIllegalMove(i),name:va.Types.CaptureTheStar,plugins:[createCaptureTheStarPlugin()],usePlayingAs:!0}}),{canAddMovesToMainLine:{default:!0,editable:!1},canInteractWithPieces:{default:!0,editable:!0},canModifyExistingMovesOnMainLine:{default:!1,editable:!1}});var Pa,Aa,Oa=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",create:Ea});function getIdsToDelete(i){return isNode(i)?{line:i.ids.line,move:i.ids.move+1}:{line:0,move:0}}function createMove$5(i){const{api:s}=i,_=s.move;return function move(i){if(s.isAtEndOfLine())return _(i);const{line:T,move:S}=getIdsToDelete(s.getRelativeNode());return s.deletePosition(S,T),_(i)}}(function(i){i.Name="exploring"})((Aa=Pa||(Pa={})).Plugin||(Aa.Plugin={}));const Ma=createModeFactory((function base$5(){return{isAllowedToMove:function isAllowedToMove(){return!0},name:va.Types.Explorer,plugins:[{apiOverrides:{move:createMove$5},name:Pa.Plugin.Name}]}}),{canAddMovesToMainLine:{default:!0,editable:!1},canInteractWithPieces:{default:!0,editable:!0},canModifyExistingMovesOnMainLine:{default:!0,editable:!1}});var za,Ia,La,Ra=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",create:Ma});function createGuessTheMoveAPI(i){let s=[];return{cancel:function cancel(){const{api:_,respond:T}=i,S=getActiveGuess();if(!S)return;s.pop(),T(C.APIEvents.SetBoardPosition,{pieces:_.getPieces()}),T(za.APIEvents.CancelGuess,S)},confirm:function confirm(s){const{respond:_}=i,T=getLastGuess();if(!T)return;Object.assign(T,{confirmed:!0,correct:s}),_(za.APIEvents.GuessConfirmed,T)},get:function get2(){return s},getActiveGuess:getActiveGuess,guess:function guess(_){var T,S;const{api:C,respond:P}=i,O=__spreadProps(__spreadValues({},_),{confirmed:!1,correct:!1,ids:null!=(S=null==(T=C.getSelectedNode())?void 0:T.ids)?S:{line:0,move:0}});s.push(O),P(za.APIEvents.GuessMade,O)},reset:function reset2(){s=[]}};function getActiveGuess(){const i=getLastGuess();return(null==i?void 0:i.confirmed)?void 0:i}function getLastGuess(){return s[s.length-1]}}function createMove$4(i){const{api:s,game:_,respond:T}=i,S=s.move;return function move(i){return i.userGenerated?function handleGuessAttempt(i){if(s.isLegalMove(i)){const S=_.move(i);if(!S)return T(C.APIEvents.IllegalMove);s.guessTheMove.guess(S);const P=__spreadValues({},s.getPieces());return _.undo(),T(C.APIEvents.SetBoardPosition,{pieces:P})}return T(C.APIEvents.IllegalMove)}(i):function handleGameMoveAndConfirmGuess(i){const _=__spreadValues({},i),T=s.guessTheMove.getActiveGuess(),C=s.getMove(i);if(!C||!T)return s.isAtEndOfLine()?S(i):s.addMoveToEndOfLine(_);const P=C.color===s.getPlayingAs()&&C.san===T.san;return i.animate=!P,s.reload(),S(i),s.guessTheMove.confirm(P)}(i)}}(function(i){i.Name="guessTheMove"})((Ia=za||(za={})).Plugin||(Ia.Plugin={})),function(i){i.CancelGuess="CancelGuess",i.GuessConfirmed="GuessConfirmed",i.GuessMade="GuessMade"}(Ia.APIEvents||(Ia.APIEvents={})),(La=Ia.Colors||(Ia.Colors={})).Correct="#96bc4b",La.Incorrect="#c93430";function getGuessTheMoveHighlights(i,s){var _;const{api:T,options:S}=s,C=null==(_=T.guessTheMove)?void 0:_.getActiveGuess();if(!S||!S.allowMarkings||!C)return[];const P=[];if(C.from){const i=createKeyedHighlight({color:S.premoveHighlightColor,opacity:S.premoveHighlightOpacity,square:C.from,type:"gtm"});P.push(i)}const O=createKeyedHighlight({color:S.premoveHighlightColor,opacity:S.premoveHighlightOpacity,square:C.kingTo||C.to,type:"gtm"});return P.push(O),P}function createGuessTheMoveModePlugin(){let i=!1;return{api:createGuessTheMoveAPI,apiOverrides:{move:createMove$4},beforeState:[{condition:is$1(C.UserEvents.PointerdownRight),handler:function cancelGuess(i,{api:s,queue:_}){if(!s.guessTheMove.getActiveGuess())return!0;return _.add(s.guessTheMove.cancel),!1}}],destroy:function destroy10(i){var s;const{api:_}=i;null==(s=_.highlights)||s.removeModule(getGuessTheMoveHighlights)},match:[{condition:isOneOf(mr),handler:function handler2(i,s){const{api:_,queue:T}=s;i.type===C.APIEvents.Load&&_.guessTheMove.reset();const S=_.getTurn();T.add(_.setPlayingAs,S)}},{condition:isOneOf(za.APIEvents),handler:function addHighlights(s,_){var T,S,C;if(i)return;const{api:P}=_;null==(T=P.highlights)||T.addModule(getGuessTheMoveHighlights),(null!=(C=null==(S=P.highlights)?void 0:S.getModules())?C:[]).find((i=>"getGuessTheMoveHighlights"===i.name))&&(i=!0)}},{condition:is$1(za.APIEvents.GuessConfirmed),handler:function handleGuessConfirmation(i,s){const{api:_}=s,{correct:T,ids:S}=i.data;_.updateNode(S,{customColor:T?za.Colors.Correct:za.Colors.Incorrect})}}],name:za.Plugin.Name}}const Na=createModeFactory((function base$4({api:i}){return{isAllowedToMove:function isAllowedToMove(){return i.guessTheMove&&i.isAtEndOfLine()&&!i.guessTheMove.getActiveGuess()},handleIllegalMove:createHandleIllegalMove(i),name:va.Types.GuessTheMove,plugins:[createGuessTheMoveModePlugin()],usePlayingAs:!0}}),{canAddMovesToMainLine:{default:!0,editable:!1},canInteractWithPieces:{default:!0,editable:!0},canModifyExistingMovesOnMainLine:{default:!1,editable:!1}});var Da=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",create:Na});function createLoad$1(i){const{api:s,respond:_}=i,T=s.load;return function load3(i,S){const C=s.observing;return C.setCachedPGN(""),C.isAnalyzing()&&(C.clearCachedIds(),_(oi.APIEvents.AnalysisEnd)),T(i,S)}}function isNullNode(i){return Boolean(i&&"san"in i&&"--"===i.san)}function createMove$3(i){const{api:s,respond:_,game:T}=i,S=s.move;return function move(i){const P=s.observing.getCachedPGN();return P&&s.load({pgn:P}),i.userGenerated?function userGeneratedMove(i){var P;const O=s.observing,{move:M,line:R}=T.ids(),D=O.isAnalyzing(),j=isMainLine(R);0===(null==(P=s.getLine(0))?void 0:P.length)&&T.move("--");const $=s.getNodeByIds({line:0,move:0});isNullNode($)&&isNullNode(s.getSelectedNode())&&s.selectNode(0,-1);if(isNullNode($)&&"san"in i){const _=ie.J.sanToObj(i.san,s.getFEN());Object.assign(i,_),i.san=""}j&&!canMoveForward({api:s,followAlternateLines:!0,mv:i})&&s.isAtEndOfLine()&&s.createContinuation();const U=S(i);if((null==U?void 0:U.type)!==C.APIEvents.Move)return U;const V=isMainLine(T.ids().line);!j||V||D||(O.setCachedIds(M,R),_(oi.APIEvents.AnalysisStart));return U}(i):function programmaticMove(i){const _=s.observing,C=isNullNode(s.getNodeByIds({line:0,move:0})),P=s.getLine(0);if(C&&1===(null==P?void 0:P.length))return void function replaceNullMove({move:i,api:s,game:_}){const T=s.observing,S=_.ids();_.selectPosition(0,0),_.createVariation(),_.move(i);const C=s.getRawLines().length-1;_.promoteVariation(C,0),_.deletePosition(0,C);const{playSounds:P}=s.getOptions();P&&s.setOptions({playSounds:!1});const O=T.getCachedIds();O&&T.clearCachedIds(),s.load({pgn:s.getPGN()}),P&&s.setOptions({playSounds:!0}),O&&T.setCachedIds(O.move,O.line),s.selectNode(S.line,S.move)}({move:i,api:s,game:T});if(_.isAnalyzing()||!s.isAtEndOfLine())return s.addMoveToEndOfLine(i,0);return S(i,!1)}(i)}}function createMoveForward$1({api:i}){const s=i.moveForward;return function moveForward(_,T){return s(function defaultToFalseWhenNotAnalyzing(){return null!=_?_:!!i.observing.isAnalyzing()&&void 0}(),T)}}function createRestorePosition(i){const{api:s}=i;return function restorePosition2(i,_){const T=s.observing;if(!T.isAnalyzing())return;if(isNullNode(s.getNodeByIds({line:0,move:0}))){const i=s.getPGN();return s.load({pgn:"*"}),void T.setCachedPGN(i)}const S=T.getCachedIds();i?s.load(i,_):s.load({pgn:s.getPGN()}),S&&s.selectNode(S.line,S.move)}}function createObservingModeAPI(i){let s,_="";return{clearCachedIds:function clearCachedIds(){s=void 0},getCachedIds:function getCachedIds(){return s},isAnalyzing:function isAnalyzing2(){return Boolean(s)},restorePosition:createRestorePosition(i),setCachedIds:function setCachedIds(i,_){s={move:i,line:_}},setCachedPGN:function setCachedPGN(i){_=i},getCachedPGN:function getCachedPGN(){return _}}}function lineChanged({data:i}){return void 0!==i.lineDiff&&0!==i.lineDiff}function isNotAnalyzing(i,s){return!isAnalyzing(i,s)}function isAnalyzing(i,{api:s}){return s.observing.isAnalyzing()}function nullMovePresent(i,s){const{api:_}=s;return isNullNode(_.getNodeByIds({line:0,move:0}))}function nullMoveAbsent(i,s){const{api:_}=s;return!isNullNode(_.getNodeByIds({line:0,move:0}))}function nullMoveSelected(i,s){const{api:_}=s;return isNullNode(_.getSelectedNode())}function startingPositionSelected(i,s){var _,T;const{api:S}=s,C=S.getSelectedNode();return 0===(null==(_=null==C?void 0:C.ids)?void 0:_.line)&&-1===(null==(T=null==C?void 0:C.ids)?void 0:T.move)}function variationSelected(i,s){const{api:_}=s,T=_.getSelectedNode();return Boolean(T&&0!==T.ids.line)}function firstVariationEmpty(i,s){const{api:_}=s,T=_.getLine(1);return Boolean(!T||0===T.length)}function firstNodeDeletedFromVariation(i,s){var _;const{data:T}=i;return Boolean(0===(null==(_=T.line)?void 0:_.atMoveNode))}function startAnalysis(i,s){const{api:_,queue:T}=s;_.observing.isAnalyzing()||T.add((function initAnalysis(){const i=function getMainLineAncestorIds(){var i;const s=null==(i=_.getSelectedNode())?void 0:i.ids;if(!s)return;if(0===s.line)return s;let T=_.getLine(s.line);for(;T.parentId&&T.parentId>1;)T=_.getLine(T.parentId);return{line:T.parentId,move:T.atMoveNode}}();i&&(_.observing.setCachedIds(i.move,i.line),_.getContext().respond(oi.APIEvents.AnalysisStart))}))}function selectFirstVariationNode(i,s){const{api:_,queue:T}=s;T.add((function selectNode2(){_.selectNode(1,0)}))}function selectFirstVariationEnd(i,s){const{api:_,queue:T}=s,S=_.getLine(1);if(S){const i=Math.max(...S.map((i=>i.moveNumber)));T.add((function selectNode2(){_.selectNode(1,i)}))}}function removeNullMoveAndRestorePosition(i,s){const{api:_}=s,T=_.observing;_.deletePosition(0,0),T.setCachedPGN(""),T.restorePosition()}function selectStartingPosition(i,s){const{api:_,queue:T}=s;T.add((function selectNode2(){_.selectNode(0,-1)}))}function refreshAnalysisOverlay(i,s){const{api:_}=s,T=_.observing,{overlayInAnalysisMode:S}=_.getOptions(),C=T.isAnalyzing();C!==S&&_.setOptions({overlayInAnalysisMode:C})}function restorePosition(i,s){const{api:_}=s;_.observing.restorePosition()}function selectNullNode(i,s){const{api:_,queue:T}=s;T.add((function selectNode2(){_.selectNode(0,0)}))}function resetCachedIds(i,s){var _,T,S,C,P,O;const{api:M}=s,R=M.observing,D=null==(_=M.getSelectedNode())?void 0:_.ids;if(!D)return;if(0===D.line)return void R.setCachedIds(D.move,D.line);let j=null==(T=M.getLine(D.line))?void 0:T.id;if(!j)return;for(;null==(S=M.getLine(j))?void 0:S.parentId;){const i=null==(C=M.getLine(j))?void 0:C.parentId;if("number"==typeof i&&(j=i),!i)break}const $=(null!=(O=null==(P=M.getLine(j))?void 0:P.atMoveNode)?O:0)-1;R.setCachedIds($,0)}const ja=createModeFactory((function base$3(){return{isAllowedToMove:function isAllowedToMove(){return!0},name:va.Types.Observing,plugins:[createAnalysisOverlayPlugin(),{api:createObservingModeAPI,apiOverrides:{load:createLoad$1,move:createMove$3,moveForward:createMoveForward$1},create:function create3(i){const{api:s}=i;s.setOptions({overlayInAnalysisMode:!1})},match:[{condition:isOneOf([oi.APIEvents.AnalysisStart,oi.APIEvents.AnalysisEnd]),handler:refreshAnalysisOverlay},{condition:pipeConditions(isOneOf(mr),isAnalyzing),handler:resetCachedIds},{condition:pipeConditions(is$1(C.APIEvents.ResetToMainLine),nullMovePresent),handler:removeNullMoveAndRestorePosition},{condition:pipeConditions(is$1(C.APIEvents.ResetToMainLine),nullMoveAbsent),handler:restorePosition},{condition:pipeConditions(is$1(C.APIEvents.DeletePosition),nullMovePresent,firstVariationEmpty),handler:removeNullMoveAndRestorePosition},{condition:pipeConditions(is$1(C.APIEvents.DeletePosition),nullMovePresent,firstNodeDeletedFromVariation),handler:selectNullNode},{condition:pipeConditions(is$1(C.APIEvents.DeletePosition),nullMoveAbsent,firstVariationEmpty),handler:restorePosition},{condition:pipeConditions(is$1(C.APIEvents.SelectNode),nullMoveSelected),handler:selectStartingPosition},{condition:pipeConditions(is$1(C.InstanceEvents.ModeChanged),variationSelected),handler:startAnalysis},{condition:pipeConditions(is$1(C.APIEvents.SelectNode),nullMoveAbsent,variationSelected),handler:startAnalysis},{condition:pipeConditions(is$1(C.APIEvents.MoveForward),isNotAnalyzing,lineChanged),handler:startAnalysis},{condition:pipeConditions(is$1(C.APIEvents.MoveForward),nullMovePresent,or(nullMoveSelected,startingPositionSelected)),handler:selectFirstVariationNode},{condition:pipeConditions(is$1(C.APIEvents.SelectLineEnd),nullMovePresent,or(nullMoveSelected,startingPositionSelected)),handler:selectFirstVariationEnd}],name:oi.Plugin.Name}]}}),{canAddMovesToMainLine:{default:!0,editable:!1},canInteractWithPieces:{default:!0,editable:!0},canModifyExistingMovesOnMainLine:{default:!1,editable:!1}});var Ba,$a,Ua=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",create:ja});function createMove$2(i){const{api:s}=i,_=s.move,T=function handleMoveOnPreviousNodeFactory(i){const{api:s}=i;return function handleMoveOnPreviousNode(){if(!s.isAtEndOfLine())if(s.getMode().getOptions().canModifyExistingMovesOnMainLine){const{line:i,move:_}=getIdsToDelete(s.getRelativeNode());s.deletePosition(_,i)}else s.selectLineEnd()}}(i);return function move(i){return s.isGameOver()&&s.getMode().getOptions().canMoveWhenGameIsOver&&s.setResult(wr.Results.None),T(),_(i)}}(function(i){i.Name="playing"})(($a=Ba||(Ba={})).Plugin||($a.Plugin={}));const Fa=createModeFactory((function base$2({api:i}){return{handleIllegalMove:createHandleIllegalMove(i),isAllowedToMove:function isAllowedToMove(){return isAllowedToMoveInPlayingMode({api:i,canMoveWhenNotPlayerTurn:!1,modeOptions:i.getMode().getOptions()})},name:va.Types.Playing,plugins:[{apiOverrides:{move:createMove$2},name:Ba.Plugin.Name}],overridableMethods:["isAllowedToMove"],usePlayingAs:!0}}),{canAddMovesToMainLine:{default:!0,editable:!0},canMoveWhenGameIsOver:{default:!1,editable:!0},canInteractWithPieces:{default:!0,editable:!0},canModifyExistingMovesOnMainLine:{default:!1,editable:!0}});var Ha=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",create:Fa});const qa=createModeFactory((function base$1(){return{isAllowedToMove:function isAllowedToMove(){return!1},name:va.Types.PassiveObserving}}),{canAddMovesToMainLine:{default:!1,editable:!1},canInteractWithPieces:{default:!1,editable:!1},canModifyExistingMovesOnMainLine:{default:!1,editable:!1}});var Va,Ga,Za=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",create:qa});function createDropPiece(i){return function dropPiece2({piece:s,square:_}){const{api:T,game:S}=i;return S.remove(_),S.put(s,_),T.setGameDetails({FEN:S.fen()}),T.reload()}}function createMovePiece(i){return function movePiece({from:s,piece:_,to:T}){const{api:S,game:C}=i;return C.remove(s),C.remove(T),C.put(_,T),S.setGameDetails({FEN:C.fen()}),S.reload()}}function createRemovePiece(i){return function removePiece(s){const{api:_,game:T}=i;return T.remove(s),_.setGameDetails({FEN:T.fen()}),_.reload()}}function createSetupAPI(i){return{dropPiece:createDropPiece(i),movePiece:createMovePiece(i),removePiece:createRemovePiece(i)}}function createGetMove$1(){return function getMove(i){return i}}function createMove$1(i){const{api:s}=i;return function move(i){const{color:_,drop:T,from:S,to:C}=i,{setup:P}=s,O=_&&T?{color:_,type:T}:s.getPiece(S);O&&(S&&C?P.movePiece({from:S,piece:O,to:C}):C?P.dropPiece({piece:O,square:C}):S&&P.removePiece(S))}}(function(i){i.DropPiece="DropPiece",i.MovePiece="MovePiece",i.RemovePiece="RemovePiece"})((Ga=Va||(Va={})).Events||(Ga.Events={})),function(i){i.Name="setup"}(Ga.Plugin||(Ga.Plugin={}));const Wa=createModeFactory((function base(){return{isAllowedToMove:function isAllowedToMove(){return!0},name:va.Types.Setup,plugins:[{api:createSetupAPI,apiOverrides:{getMove:createGetMove$1,isLegalMove:()=>!0,move:createMove$1},name:Va.Plugin.Name}]}}),{canAddMovesToMainLine:{default:!1,editable:!1},canDropOffBoard:{default:!0,editable:!1},canInteractWithPieces:{default:!0,editable:!0},canModifyExistingMovesOnMainLine:{default:!1,editable:!1},canDropPiecesContinuously:{default:!0,editable:!0}});var Ka=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",create:Wa});function getExtendedNode({move:i,startingMoveNumber:s}){if(!i)return null;const{moveNumber:_}=i,T=_%2==0&&i.color===wr.ColorsAsNumbers.Black||_%2!=0&&i.color===wr.ColorsAsNumbers.White,S=s+Math.floor(_/2)+(T&&i.color===wr.ColorsAsNumbers.White?1:0);return __spreadProps(__spreadValues({},i),{ply:i.ids.move+1,wholeMoveNumber:S})}function getTimestamp({baseTimeDs:i,incrementDs:s,lastTimeDs:_,currentTimeDs:T}){if(!T)return 1;const S=(null!=_?_:i)-(T-s);return Math.max(S,1)}function calculateTimestampValue({api:i,node:s}){const _=i.getLine(0),T=i.timeControl.get();if(!_||!T)return null;const S=s.time,C=getPreviousNodeOfSameColor({api:i,node:s}),P=null==C?void 0:C.time,{baseTime:O,increment:M}=T;return getTimestamp({baseTimeDs:millisecondsToDeciseconds(O),incrementDs:millisecondsToDeciseconds(M),lastTimeDs:P,currentTimeDs:S})}function formatClk(i){const s=Math.floor(i%36e3/600),_=Math.floor(i%36e3%600)/10;return`${Math.floor(i/36e3)}:${s<10?"0":""}${s}:${_<10?"0":""}${_}`}function handleTimestamp({context:i,time:s}){const{api:_,game:T}=i,S=T.moveDetails();S.time=s,function setClkOnNode({api:i,node:s,clk:_}){const{line:T,move:S}=s.ids,C=i.getContext().game;s.commands||(s.commands={}),C.updateNode({commands:Object.assign(s.commands,{clk:null===_?_:formatClk(_)})},S,T)}({api:_,node:S,clk:s});const C=calculateTimestampValue({api:_,node:S});C&&setTimestampOnNode({api:_,node:S,timestamp:C})}function createAddMoveToEndOfLine(i){return function addMoveToEndOfLine(s,_=0){var T;const{api:S,game:P,mutateGame:O,respond:M}=i,{ids:R}=null!=(T=S.getSelectedNode())?T:{ids:{move:-1,line:0}},{move:D,line:j}=R;P.selectLineEnd(_);const $=O((function callMethod(){P.move(s,!1),s.time&&handleTimestamp({context:i,time:s.time})}));return P.selectPosition(D,j),null===$?M(C.APIEvents.IllegalMove,{fen:P.fen(),move:s}):($.move=getExtendedNode({move:$.move,startingMoveNumber:P.startingMoveNumber()})||void 0,M(C.APIEvents.AddMove,{listMove:$.move}))}}function createAgreeDraw(i){return function agreeDraw(){const{api:s,respond:_}=i;return s.isGameOver()?null:(s.setResult(wr.Results.Draw),_(C.APIEvents.DrawAgreed))}}function createBlinkHighlight(i){return function blinkHighlight(s){const{respond:_}=i,T={data:s,type:de};return _(C.APIEvents.BlinkHighlight,[T])}}function tryMovingForward(i){const{move:s,followContinuations:_=!0,steps:T=1,context:S}=i,{mutateGame:C,game:P}=S,O=P.ids(),M=C((function callMethod(){P.moveForward(_,s)}));let R=1===(null==M?void 0:M.plyDiff);if(T>1&&R)for(let j=1;j<T&&(R=P.moveForward(_),R);j++);const D=P.ids();return P.selectPosition(O.move,O.line),{firstStepData:M,startIds:O,endIds:D,success:R}}function createCanMoveForward(i){return function canMoveForward2(s){const{move:_,followContinuations:T,steps:S}=null!=s?s:{},{success:C}=tryMovingForward({context:i,move:_,followContinuations:T,steps:S});return C}}function isClaimableDraw(i){return i.inThreefoldRepetition()||i.in50MoveRule()}function createClaimDraw(i){return function claimDraw(){const{api:s,game:_}=i;return s.isGameOver()?null:isClaimableDraw(_)?(s.setResult(wr.Results.Draw),i.respond(C.APIEvents.DrawClaimed)):null}}const Ya={ClearMarkings:buildMarkingsWarning("clearMarkings","api.markings.removeAll/removeAllWhere/removeMany/removeOne"),Mark:buildMarkingsWarning("mark","api.markings.addOne/addMany"),ToggleMarking:buildMarkingsWarning("toggleMarking","api.markings.toggleOne/toggleMany"),Unmark:buildMarkingsWarning("unmark","api.markings.removeOne/removeMany")};function buildMarkingsWarning(i,s){return`The "${i}" method is deprecated and will be removed in v2.0.0. Please use the ${s} methods instead.`}function createClearMarkings(i){return function clearMarkings(s,_={}){console.warn(Ya.ClearMarkings);const{api:T,respond:S}=i,P=T.markings,O=null==s?void 0:s.map((i=>"square"===i?"highlight":i));return P.removeAllWhere(__spreadProps(__spreadValues({},_),{types:O})),S(C.APIEvents.ClearMarkings)}}function createCreateContinuation(i){return function createContinuation(){const{api:s,game:_,respond:T}=i,S=_._getPos();if("initial"in S)return null;_.createVariation(),_.move(S);const P=s.getRelativeNode();return T(C.APIEvents.CreateContinuation,{node:P})}}function createDeletePosition(i){return function deletePosition(s,_){const{api:T,game:S,respond:P}=i,O=T.getRawLines()[_];return S.deletePosition(s,_),0===_&&T.getResult()!==wr.Results.None&&T.setResult(wr.Results.None),P(C.APIEvents.DeletePosition,{ids:{line:_,move:s},line:O,pieces:T.getPieces()})}}function createExtendAPI(i){const s={};return function extendAPI(_,T){const S=Object.entries(T).map((([T,S])=>{if(S)return s[T]||(s[T]={extensions:{},original:i.api[T]}),i.api[T]=S(i),s[T].extensions[_]=S,function destroyOverride(){delete s[T].extensions[_],i.api[T]=s[T].original,Object.keys(s[T].extensions).map((_=>i.api[T]=s[T].extensions[_](i)))}}));return function destroyOverride(){S.map((i=>i&&i()))}}}function createGetCalculatedResult(i){return function getCalculatedResult(){const{api:s,game:_}=i;let T=wr.Results.None;const S=isClaimableDraw(_);return!function isJCEWin(i){return i.inCheckmate()||Boolean(i.isVariantWin())||Boolean(i.isBughouseWin())}(_)?(S&&s.getOptions().autoClaimDraw||!S&&_.inDraw())&&(T=wr.Results.Draw):T=_.turn()===wr.ColorsAsNumbers.Black?wr.Results.White:wr.Results.Black,T}}function createGetContext(i){return function getContext(){return i}}function createGetCurrentFullLine(i){return function getCurrentFullLine(){const{game:s}=i;return s.history({toCurrent:!0,verbose:!0})}}function createGetFen(i){return function getFEN(){const{game:s}=i;return s.fen()}}function createGetFingerprints(i){return function getFingerprints(){return ie.J.gameFingerprints({game:i.game,analysis:!0})}}function createGetHeaders(i){return function getHeaders(){const{game:s}=i;return s.headers()}}function isFirstNodeInLine(i){return-1===i}function createGetHistoryFENs(i){return function getHistoryFENs(s=!1){const{game:_}=i,T=_._getPos();return T.ids&&0===T.ids.line&&isFirstNodeInLine(T.ids.move)&&T.fen?[T.fen]:_.history({toCurrent:!s,verbose:!0}).map((i=>i.fen))}}function createGetHistorySANs(i){return function getHistorySANs(){const{game:s}=i;return s.history(!1)}}function createGetJCEGameCopy(i){return function getJCEGameCopy(){var s;const{api:_}=i,T=(null==(s=_.premoves)?void 0:s.getQueue())||[],S=ie.J.createGame({pgn:_.getPGN(),analysis:!0,timestamps:_.times.get()||_.timestamps.get()||void 0});return S?(S.premove.queue.push(...T),S):null}}function createGetLastMove(i){return function getLastMove(){const{game:s}=i;return s.history(!0).slice(-1)[0]}}function createGetLegalMoves(i){return function getLegalMoves(){const{game:s}=i;return ie.J.getLegalMoves({game:s})}}function createGetLegalMovesForSquare(i){return function getLegalMovesForSquare(s){return i.api.getLegalMoves().filter((i=>void 0===s||i.from===s)).map((i=>i.to)).filter(((i,s,_)=>_.indexOf(i)===s))}}function createGetLine(i){return function getLine(s){const{game:_}=i,T=_.startingMoveNumber(),S=i.api.getRawLines()[s];if(S)return S.forEach(((i,s)=>{const _=getExtendedNode({move:i,startingMoveNumber:T});S[s]=_})),S}}function createGetMarkings(i){return function getMarkings2(){const{api:s}=i;return function convertMarkingsToCollection(i){const s={[wr.Node.Marking.Types.Arrow]:{},[wr.Node.Marking.Types.CustomItem]:{},[wr.Node.Marking.Types.Effect]:{},[wr.Node.Marking.Types.Square]:{}};return i.map((i=>{var s;return __spreadValues({markingType:"highlight"===i.type?"square":i.type,key:null!=(s=i.data.square)?s:`${i.data.from}${i.data.to}`,color:hr.Default},i.data)})).reduce(((i,s)=>{const{key:_,markingType:T}=s;return i[T][_]=s,i}),s)}(s.markings.getAll())}}function createGetMaterial(i){return function getMaterial(){const{game:s}=i;return s.material()}}function createGetMove(i){return function getMove(s){const{game:_}=i;if(null===s.to)return null;let T=_.getMove(s);return null===T&&(Object.assign(s,{promotion:"q"}),T=_.getMove(s)),T&&(T=_.moveDetails(T)),T}}function createGetNodeByIds(i){return function getNodeByIds(s){const{api:_,game:T}=i,S=_.getRawLines()[s.line];return S?isFirstNodeInLine(s.move)?S:getExtendedNode({move:S[s.move],startingMoveNumber:T.startingMoveNumber()}):null}}function getMoveNumber(i){const{moveNumber:s}=i;return void 0!==s?s:-1}function getEPCapturedSquare(i){if(i.flags===wr.Move.Flags.EPCapture&&i.from)return`${i.to.slice(0,1)}${i.from.slice(-1)}`}function extend(i){const s=__spreadProps(__spreadValues({},i),{EPCapturedSquare:getEPCapturedSquare(i)});return i.rookFrom&&i.rookTo&&(s.rookMove={animate:!0,from:i.rookFrom,to:i.rookTo}),s}function createGetNodeDiffData(i){return function getNodeDiffData(s,_){const{api:T,game:S}=i,C=null!=_?_:S._getPos(),P=null!=s?s:S._getPos(-1,0),O={};return O.plyDiff=function getPlyDiff(i,s){return getMoveNumber(s)-getMoveNumber(i)}(P,C),O.lineDiff=function getLineDiff(i,s){return s.ids.line-i.ids.line}(P,C),-1===O.plyDiff?O.move=extend(__spreadProps(__spreadValues({},s),{animate:!0})):1===O.plyDiff?(O.animate=!0,O.move=extend(__spreadProps(__spreadValues({},C),{animate:!0}))):O.pieces=T.getPieces(),O}}function createGetNodeIds(i){return function getNodeIds(){const{game:s}=i;return s.ids()}}function createGetPieces(i){return function getPieces(){const{game:s}=i;return createCollection(s.getPieces(!0))}}function createGetPGN(i){return function getPGN(s={}){const{game:_}=i;return _.pgn(__spreadProps(__spreadValues({},s),{useResultHeader:!0}))}}function createGetPiece(i){return function getPiece(s){const{game:_}=i;return _.get(s)}}function createGetPosition(i){return function getPosition2(s,_){const{game:T}=i;return T._getPos(s,_)}}function createGetPositionDetails(i){return function getPositionDetails(s){const _=i.api.getPGN();return ie.J.getPositionDetails({pgn:_},s)}}function createGetPositionInfo(i){return function getPositionInfo(s=[]){const{api:_}=i,T=ie.J.getPositionInfo(_.getFEN(),s,{variant:wr.JCEVariantTypes[_.getVariant()]});return"object"==typeof T&&__spreadProps(__spreadValues({},T),{gameOver:_.isGameOver()})}}function createGetRawLines(i){return function getRawLines(){const{game:s}=i;return s._lines()}}function createGetRelativeNode(i){return function getRelativeNode(s=0){const{game:_}=i,T=__spreadValues({},_.ids());T.move+=s;const S=i.api.getRawLines()[T.line];return isFirstNodeInLine(T.move)?S:getExtendedNode({move:S[T.move],startingMoveNumber:_.startingMoveNumber()})}}function createGetResult(i){return function getResult(){const{game:s}=i;return s.headers().Result}}function createGetSelectedNode(i){return function getSelectedNode(){const{api:s,game:_}=i,T=_.ids();if(isFirstNodeInLine(T.move))return null;return getExtendedNode({move:s.getRawLines()[T.line][T.move],startingMoveNumber:_.startingMoveNumber()})}}function createGetTCN(i){return function getTCN(){const{game:s}=i;return ie.J.encodeTCN(s.history(!0))}}function createGetTurn(i){return function getTurn(){const{game:s}=i;return s.turn()}}const Xa={"3-check":wr.Variants.ThreeCheck,Bughouse:wr.Variants.Bughouse,Chess:wr.Variants.Chess,Chess960:wr.Variants.Chess960,Crazyhouse:wr.Variants.Crazyhouse,"King of the Hill":wr.Variants.KingOfTheHill};function createGetVariant(i){return function getVariant(){var s;const{api:_}=i,T=_.getHeaders().Variant;return T&&null!=(s=Xa[T])?s:wr.Variants.Chess}}function createIsAtEndOfLine(i){return function isAtEndOfLine(){const{game:s}=i,_=s.ids();return i.api.getRawLines()[_.line].length-1===_.move}}function createIsCheck(i){return function isCheck2(){const{game:s}=i;if(s.inCheck()){const _=i.api.getPieces();return _.keys().filter((i=>{const T=_.get(i);return"k"===T.type&&T.color===s.turn()}))[0]}return!1}}function createIsGameOver(i){return function isGameOver(){const{api:s}=i;return"*"!==s.getResult()}}function createIsLegalMove(i){return function isLegalMove(s){const{game:_}=i;return null!==_.getMove(s)}}function createLoad(i){return function load3({fen:s,moves:_,pgn:T,times:S,timestamps:P,timeControl:O,variant:M=wr.Variants.Chess,pieces:R},D){const{api:j,game:$,respond:U}=i;let V=!1;if(T){const i=function convertNagsToAnnotations(i){let s=i;return Object.keys(qi).reverse().forEach((i=>{s=s.replace(new RegExp(`\\${i}`,"gm"),qi[i])})),s}(T);V=$.loadPgn(i)}else s&&(V=$.load(s,M));(_||""===_)&&(V=$.loadMoves(_,__spreadValues({autoPromote:!0},D)));const Z=j.getLine(0),Y=S?function convertTimesToTimestamps(i,s){if(s&&i){const _=millisecondsToDeciseconds(i.baseTime),T=millisecondsToDeciseconds(i.increment);return s.map(((i,S)=>"number"!=typeof i?i:getTimestamp({baseTimeDs:_,incrementDs:T,lastTimeDs:S<=1?void 0:s[S-2],currentTimeDs:i})))}return s}(O||j.timeControl.get(),S):P;if(Y&&Z&&Z.forEach(((i,s)=>{const _=Y[s];void 0!==_&&setTimestampOnNode({api:j,node:i,timestamp:_})})),O&&j.timeControl.set(O),!V)throw new ChessError({code:ji.BadData,data:{fen:s,pgn:T},message:"Unable to load with provided data."});const X=j.getResult();return j.setResult(X===wr.Results.None?j.getCalculatedResult():X),U(C.APIEvents.Load,__spreadProps(__spreadValues(__spreadValues({},ie.J.getPositionDetails({game:$,skipValidation:!0})),ie.J.getPositionInfo({analysis:!0,game:$})),{line:Z,pieces:null!=R?R:j.getPieces(),variant:M}))}}function formatForMarkingsAPI(i,s={}){const[_,T]=Object.entries(i)[0],{node:S,persistent:C}=s;return toArray(T).map((i=>{const s={data:i,node:S,persistent:C,type:"square"===_?de:_};return __spreadProps(__spreadValues({},s),{key:generatePrimaryKey(s)})}))}function createMark(i){return function mark(s,_,T){var S,P;console.warn(Ya.Mark);const{api:O}=i,M=O.markings,R=formatForMarkingsAPI(s,{node:null!=(S=null==T?void 0:T.node)?S:_,persistent:null==(P=null==T?void 0:T.persistent)||P});return M.addMany(R),createCoreEvent(C.APIEvents.Mark,R)}}function createMove(i){return function move(s,_=!0){const{api:T,game:S,mutateGame:P,respond:O}=i,{animate:M,san:R,tcn:D,time:j,userGenerated:$,userGeneratedDrop:U}=function getMoveDetails(i,s){const _="string"==typeof i?ie.J.sanToObj(i,s):i,{animate:T=!0,san:S,tcn:C,time:P,userGenerated:O,userGeneratedDrop:M}=_;return{animate:T,san:S,tcn:C,time:P,userGenerated:O,userGeneratedDrop:M}}(s,T.getFEN()),V=P((function makeMove(){if(!(D?S.loadMoves(D.slice(0,2),{atCurrent:!0,method:"merge"}):S.move(R||s,_)))return null;j&&handleTimestamp({context:i,time:j})}));return null===V?O(C.APIEvents.IllegalMove,{fen:S.fen(),move:s}):(V.result&&T.setResult(V.result),V.move&&(Object.assign(V.move,{animate:M,userGenerated:$,userGeneratedDrop:U}),V.move=extend(V.move)),O(C.APIEvents.Move,V))}}function createMoveBackward(i){return function moveBackward(){const{respond:s,game:_,mutateGame:T}=i,S=T((function callMethod(){_.moveBackward()}));return!S||0===S.lineDiff&&0===S.plyDiff?s(C.APIEvents.MoveBackward,null):s(C.APIEvents.MoveBackward,S)}}function createMoveForward(i){return function moveForward(s,_){const{respond:T,api:S,game:P}=i,{move:O,followContinuations:M,steps:R}=function getMoveForwardParameters(i,s){var _;let T,S={};"object"==typeof i?S=i:T=i;const{move:C,followContinuations:P,steps:O}=S;return{move:null!=C?C:s,followContinuations:null==(_=null!=P?P:T)||_,steps:null!=O?O:1}}(s,_);if(R<1)return null;const{firstStepData:D,success:j,endIds:$}=tryMovingForward({context:i,move:O,followContinuations:M,steps:R});return 1===R||1!==(null==D?void 0:D.plyDiff)?(P.selectPosition($.move,$.line),T(C.APIEvents.MoveForward,D)):j?S.selectNode($.line,$.move):T(C.APIEvents.MoveForward,null)}}function createMoveVariation(i){return function moveVariation(s,_){const{game:T,respond:S}=i;return T.moveVariation(s,_)?S(C.APIEvents.MoveVariation):null}}function removeUnsetHeaders(i){return Object.keys(i).reduce(((s,_)=>(i[_]!==wr.EmptyPGNHeaders.Value&&i[_]!==wr.EmptyPGNHeaders.Date&&(s[_]=i[_]),s)),{})}const Qa={trans:function trans(i,s,_){return i},transChoice:function transChoice(i,s,_,T){return`${s}`}};function createOutOfTime(i){return function outOfTime(s){const{api:_,game:T,respond:S}=i,P=getOppositeColor(s),O=(0,ie.F)(getColorAsWord(P)),M=_.getHeaders()[O];_.setResult(P===wr.ColorsAsNumbers.Black?wr.Results.Black:wr.Results.White),T.header({Termination:Qa.trans("%username% won on time",{"%username":M})});const R=__spreadProps(__spreadValues({},removeUnsetHeaders(T.header())),{color:s});return S(C.APIEvents.OutOfTime,R)}}function createReload(i){return function reload(){const{api:s,game:_,respond:T}=i;return T(C.APIEvents.Reload,{holdSelectedPiece:!0,pieces:createCollection(_.getPieces(!0)),variant:s.getVariant()})}}function createPromoteVariation(i){return function promoteVariation(s,_){const{game:T,respond:S}=i;return T.promoteVariation(s,_)?S(C.APIEvents.PromoteVariation):null}}function createResetGame(i){return function resetGame(){const{api:s,respond:_}=i;return s.setResult(wr.Results.None),s.load({fen:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"}),_(C.APIEvents.ResetGame)}}function createResign(i){return function resign(s){const{api:_,respond:T}=i;if(_.isGameOver())return null;const S=s===wr.ColorsAsNumbers.White?wr.Results.Black:wr.Results.White;return _.setResult(S),T(C.APIEvents.GameResigned,S)}}function createResetToMainLine(i){return function resetToMainLine(){const{api:s,game:_,respond:T}=i;return _.resetToMainLine(),T(C.APIEvents.ResetToMainLine,{pieces:s.getPieces()})}}function createSelectLineEnd(i){return function selectLineEnd(s){const{api:_,game:T,mutateGame:S,respond:P}=i,O=S((function callMethod(){T.selectLineEnd(s)}));return O&&(O.pieces=_.getPieces()),P(C.APIEvents.SelectLineEnd,O)}}function createSelectLineStart(i){return function selectLineStart(){const{api:s,game:_,mutateGame:T,respond:S}=i,P=T((function callMethod(){_.selectLineStart()}));return P&&(P.pieces=s.getPieces()),S(C.APIEvents.SelectLineStart,P)}}function createSelectNode(i){return function selectNode2(s,_){const{api:T,game:S,respond:P}=i,O=S.moveDetails();S.selectPosition(_,s);const M=S.moveDetails(),R=T.getNodeDiffData(O,M);return 0===R.plyDiff&&0===R.lineDiff?null:(0!==R.lineDiff&&(R.pieces=T.getPieces()),P(C.APIEvents.SelectNode,R))}}function createSetGameDetails(i){return function setGameDetails(s){const{game:_,respond:T}=i,S=removeUnsetHeaders(_.header(s));return T(C.APIEvents.UpdatePGNHeaders,S)}}function createSetResult(i){return function setResult(s){const{api:_}=i;return _.setGameDetails({Result:s})}}function createSetTurn(i){return function setTurn(s){const{game:_,respond:T}=i;return _.turn()===s?null:(_.turn(s),T(C.APIEvents.TurnSet,s))}}function createToggleMarking(i){return function toggleMarking(s,_,T){var S,P;console.warn(Ya.ToggleMarking);const{api:O}=i,M=O.markings,R=formatForMarkingsAPI(s,{node:null!=(S=null==T?void 0:T.node)?S:_,persistent:null==(P=null==T?void 0:T.persistent)||P});return M.toggleMany(R),createCoreEvent(C.APIEvents.Mark,R)}}function createUndo(i){return function undo2(){const{api:s}=i,_=s.getSelectedNode();return _?s.deletePosition(_.ids.move,_.ids.line):null}}function createUpdateNode(i){return function updateNode(s,_){const{game:T,respond:S}=i;return T.updateNode(_,s.move,s.line),S(C.APIEvents.NodeUpdated,{changes:_,ids:s,node:T._getPos(s.move,s.line)})}}function createUpdateLineComment(i){return function updateLineComment2(s,_){const{game:T,respond:S}=i;return T.updateLineComment(s,_),S(C.APIEvents.LineCommentUpdated,{comment:s,lineId:_})}}function createUnmark(i){return function unmark(s,_,T){var S,P;console.warn(Ya.Unmark);const{api:O}=i,M=O.markings,R=formatForMarkingsAPI(s,{node:null!=(S=null==T?void 0:T.node)?S:_,persistent:null==(P=null==T?void 0:T.persistent)||P});return M.removeMany(R.map((i=>i.key))),createCoreEvent(C.APIEvents.Unmark,R)}}function getBughouseGameTimeValues(i){return Array.isArray(i)&&Array.isArray(i[0])?i[0]:i}function createCreateGame(i){return function createGame2(s){const _=ie.J.createGame(__spreadProps(__spreadValues({timestamps:s.times||s.timestamps||void 0},s),{analysis:!0,autoPromote:!0}));if(!_)return;const{api:T}=i;let{times:S,timestamps:C}=s;return s.variant===wr.Variants.Bughouse&&(S=getBughouseGameTimeValues(S),C=getBughouseGameTimeValues(C)),T.load({pgn:_.pgn({useResultHeader:!0}),variant:s.variant,times:S,timestamps:C,premoves:_.premove.queue&&_.premove.queue.length>0?_.premove.queue:void 0})}}function createGetTimeControl(i){return function getTimeControl(){const s=i.api.getHeaders().TimeControl;if(!s||s===Et.Header.Null||s.includes(Et.Header.Unset)||s.includes(Et.Header.TimePerMove))return null;const[_,T]=s.split(Et.Header.Separator).map((i=>Math.round(1e3*parseFloat(i))));return{baseTime:_,increment:T||0}}}function createGetTimeControlType(i){return function getTimeControlType(){const{api:s}=i,_=s.timeControl.get();if(_){const i=function getExpectedGameDuration(i){const{baseTime:s,increment:_}=i;return(s+40*(_||0))/1e3}(_);if(i<1800)return Et.Types.Bullet;if(i>6e3)return Et.Types.Rapid}return Et.Types.Blitz}}function createSetTimeControl(i){return function setTimeControl(s){const{api:_}=i;if(null===s)return _.setGameDetails({TimeControl:Et.Header.Null});const{baseTime:T,increment:S}=s,C=T/1e3,P=S/1e3;return _.setGameDetails({TimeControl:P?`${C}+${P}`:`${C}`})}}function createTimeControlAPI(i){return{get:createGetTimeControl(i),getType:createGetTimeControlType(i),set:createSetTimeControl(i)}}function toUnit(i,s){if(null===i)return null;let _;switch(s){case Q.Units.Milliseconds:_=100*i;break;case Q.Units.Seconds:_=10*i;break;case Q.Units.Deciseconds:default:_=i}return _}function getValidTimestamp(i,s){return null===i?null:Math.max(1,function toRoundedDeciseconds(i,s){let _;switch(s){case Q.Units.Milliseconds:_=i/100;break;case Q.Units.Seconds:_=10*i;break;case Q.Units.Deciseconds:default:_=i}return Math.round(_)}(i,s))}function createTimestampsAPI(i){return{get:get2,set:function set3(s,_,T=Q.Units.Deciseconds){var S;const{api:P,respond:O}=i,{getLine:M}=P,R=null==(S=M(0))?void 0:S[_];if(!R)return null;const D=getValidTimestamp(s,T);if(void 0===D)return null;return setTimestampOnNode({api:P,node:R,timestamp:D}),O(C.APIEvents.NodeUpdated,{changes:{timestamp:D,node:R}})},setMany:function setMany2(s=[],_=Q.Units.Deciseconds){const{api:T,respond:S}=i,P=0===s.length?function getAll(){return get2(void 0,{filtered:!1})}().map((()=>null)):s;return T.getRawLines()[0].forEach(((i,s)=>{if(void 0===P[s])return;const S=getValidTimestamp(P[s],_);void 0!==S&&setTimestampOnNode({api:T,node:i,timestamp:S})})),S(C.APIEvents.LineUpdated)}};function get2(s,{filtered:_=!0}={},T=Q.Units.Deciseconds){var S;const{api:C}=i,P=null==(S=C.getLine(0))?void 0:S.map(getTimestampFromNode);if(void 0!==s)return P[s]&&toUnit(P[s],T);return(_?P.filter((i=>void 0!==i)):P).map((i=>toUnit(i,T)))}}function createGetTimes(i){return function get2(s){var _;const{api:T}=i,S=T.getLine(0);return void 0!==s?null==(_=S[s])?void 0:_.time:S.map((i=>i.time))}}function createSetManyTimes(i){return function setMany2(s=[]){const{api:_,respond:T}=i;return _.getRawLines()[0].forEach(((i,T)=>{void 0!==s[T]&&(!i.time&&s[T]&&(i.time=s[T]),_.timestamps.set(calculateTimestampValue({api:_,node:i}),T))})),T(C.APIEvents.LineUpdated)}}function createSetTimes(i){return function set3(s,_){var T;const{api:S,respond:P}=i,{getLine:O}=S,M=null==(T=O(0))?void 0:T[_];return M?(M.time||(M.time=s),S.timestamps.set(calculateTimestampValue({api:S,node:M}),_),P(C.APIEvents.NodeUpdated,{changes:{time:s,node:M}})):null}}function createTimesAPI(i){return{get:createGetTimes(i),set:createSetTimes(i),setMany:createSetManyTimes(i)}}function createLoggerAPI(i=100){const s=(0,ie.a)(),_=[];let T=yn.Levels.Debug;const S={[yn.Levels.None]:0,[yn.Levels.Error]:1,[yn.Levels.Debug]:2};return __spreadProps(__spreadValues({},s),{clear:function clear5(){_.length=0},get:function get2(i){return i?_.filter((s=>Object.entries(i).every((([i,_])=>s[i]===_)))):_},log:function log({code:C,data:P,level:O=yn.Levels.Debug,message:M}){if(S[O]>S[T])return;_.length===i&&_.shift();const R={code:C,data:P,level:O,message:M,timestamp:Date.now()};_.push(R),s.emit(yn.Events.EntryAdded,R)},setLogLevel:function setLogLevel(i){T=i}})}function createAPI({game:i,logger:s,options:_,eventEmitter:T}){const S=i||ie.J.createGame(__spreadProps(__spreadValues({},_),{analysis:!0,autoPromote:!0}));if(!S)throw new ChessError({code:ji.BadData,data:_,message:"Error creating game from createAPI"});const P=T||(0,ie.a)(),O=function createMemoryCache(i={}){let s=copy(i);return{add:function add2(i,..._){let T=s;_.forEach((i=>{i in T||(T[i]={}),T=T[i]})),Object.assign(T,i)},clear:function clear5(_){_?s[_]={}:s=copy(i)},get:function get2(){return copy(s)},remove:function remove(...i){let _=s;const T=i.length-1;i.forEach(((i,s)=>{i in _&&s!==T&&(_=_[i])})),delete _[i[T]]}};function copy(i){return JSON.parse(JSON.stringify(i))}}({arrow:{},customItem:{},effect:{},square:{}}),M={},R=function createMutateGame(i,s){return function mutateGame(_){const T=i.moveDetails(),S=s.getCalculatedResult();if(null===_())return null;const C=i.moveDetails(),P=s.getCalculatedResult(),O=s.getNodeDiffData(T,C);S!==P&&isMainLine(null==C?void 0:C.ids.line)&&(O.result=P);const{line:M,move:R}=i.ids();return O.linesReordered=0!==M&&0===R&&i.reorderLines(),O}}(S,M),D=function createRespond(i){return function respond(s,_){const T=createCoreEvent(s,_);return i.emit(s,T),T}}(P),j={api:M,emitter:P,game:S,markingCache:O,mutateGame:R,respond:D};return Object.assign(j.api,function createAPIModel(){return __spreadProps(__spreadValues(__spreadProps(__spreadValues({addMoveToEndOfLine:createAddMoveToEndOfLine(j),agreeDraw:createAgreeDraw(j),blinkSquare:createBlinkHighlight(j),canMoveForward:createCanMoveForward(j),claimDraw:createClaimDraw(j),clearMarkings:createClearMarkings(j),createContinuation:createCreateContinuation(j),createGame:createCreateGame(j)},function createPlayingAsAPI(i){let s=wr.ColorsAsNumbers.White,_=!1;return{getPlayingAs:function getPlayingAs(){return _?s:void 0},setPlayingAs:function setPlayingAs(_){if(_===s)return null;const{respond:T}=i;return s=_,T(C.APIEvents.SetPlayingAs,_)},usePlayingAs:function usePlayingAs(i){_=i||!1}}}(j)),{deletePosition:createDeletePosition(j)}),P),{extendAPI:createExtendAPI(j),getCalculatedResult:createGetCalculatedResult(j),getContext:createGetContext(j),getCurrentFullLine:createGetCurrentFullLine(j),getFEN:createGetFen(j),getFingerprints:createGetFingerprints(j),getHeaders:createGetHeaders(j),getHistoryFENs:createGetHistoryFENs(j),getHistorySANs:createGetHistorySANs(j),getJCEGameCopy:createGetJCEGameCopy(j),getLastMove:createGetLastMove(j),getLegalMoves:createGetLegalMoves(j),getLegalMovesForSquare:createGetLegalMovesForSquare(j),getLine:createGetLine(j),getMarkings:createGetMarkings(j),getMaterial:createGetMaterial(j),getMove:createGetMove(j),getNodeByIds:createGetNodeByIds(j),getNodeDiffData:createGetNodeDiffData(j),getNodeIds:createGetNodeIds(j),getPGN:createGetPGN(j),getPiece:createGetPiece(j),getPieces:createGetPieces(j),getPosition:createGetPosition(j),getPositionDetails:createGetPositionDetails(j),getPositionInfo:createGetPositionInfo(j),getRawLines:createGetRawLines(j),getRelativeNode:createGetRelativeNode(j),getResult:createGetResult(j),getSelectedNode:createGetSelectedNode(j),getStartingMoveNumber:j.game.startingMoveNumber,getTCN:createGetTCN(j),getTurn:createGetTurn(j),getVariant:createGetVariant(j),isAtEndOfLine:createIsAtEndOfLine(j),isCheck:createIsCheck(j),isGameOver:createIsGameOver(j),isLegalMove:createIsLegalMove(j),load:createLoad(j),logger:s||createLoggerAPI(),mark:createMark(j),move:createMove(j),moveBackward:createMoveBackward(j),moveForward:createMoveForward(j),moveVariation:createMoveVariation(j),outOfTime:createOutOfTime(j),promoteVariation:createPromoteVariation(j),reload:createReload(j),resetGame:createResetGame(j),resetToMainLine:createResetToMainLine(j),resign:createResign(j),selectLineEnd:createSelectLineEnd(j),selectLineStart:createSelectLineStart(j),selectNode:createSelectNode(j),setGameDetails:createSetGameDetails(j),setResult:createSetResult(j),setTurn:createSetTurn(j),timeControl:createTimeControlAPI(j),times:createTimesAPI(j),timestamps:createTimestampsAPI(j),toggleMarking:createToggleMarking(j),undo:createUndo(j),unmark:createUnmark(j),updateLineComment:createUpdateLineComment(j),updateNode:createUpdateNode(j)})}()),j.api}function createGetSet(i={}){const s=i;return{get:function get2(i){return i?s[i]:s},set:function set3(i){Object.assign(s,i)}}}const Ja={anyAPIEvent:({UpdateParams:i})=>(i.cancelMarkingStartSquare(),cn.States.Idle),[C.UserEvents.PointerdownLeft]:({UpdateParams:i})=>(i.cancelMarkingStartSquare(),cn.States.Idle),[C.UserEvents.Pointerup]:({context:i,data:{keyPressed:s,square:_},params:{markingStartSquare:T},UpdateParams:S})=>{const{api:{markings:C},options:P,queue:O}=i;return _&&T&&O.add(C.toggleOne,function getMarking({endSquare:i,keyPressed:s,opacity:_,startSquare:T}){if(T===i)return{data:{keyPressed:s,opacity:_,square:T},node:!0,persistent:!1,type:de};return{data:{keyPressed:s,from:T,opacity:_,to:i},node:!0,persistent:!1,type:ve}}({endSquare:_,keyPressed:s,opacity:P.analysisHighlightOpacity,startSquare:T})),S.cancelMarkingStartSquare(),cn.States.Idle}};const es={[C.UserEvents.PointerdownLeft]:({context:i,data:{coords:s,square:_},UpdateParams:T})=>{const{api:{getPieces:S,markings:C},mode:{getOptions:P},options:O,queue:M,renderer:R,state:D}=i;if(_&&M.add(C.removeAllWhere,{node:!0,persistent:!1,types:[ve,Je,de]}),!O.enabled||!P().canInteractWithPieces)return cn.States.Idle;if(!S().isDefined(_))return cn.States.Idle;if(O.moveMethod===Ht.MoveMethods.Click){const s=null==R?void 0:R.getCoordsFromSquare(_,O.flipped);if(void 0===s)throw new ChessError({code:ji.BadData,message:`getCoordsFromSquare returned undefined for ${_}`});return T.dragPiece(s,_),D.set({hideHoverSquare:!0}),null==R||R.dragPiece({coords:s,square:_},i),cn.States.PieceDragging}return T.dragPiece(s,_),null==R||R.dragPiece({coords:s,square:_},i),cn.States.PieceDragging},[C.UserEvents.PointerdownRight]:({context:i,data:{square:s},UpdateParams:_})=>{const{options:T}=i;if(T.enabled)return _.setMarkingStartSquare(s),cn.States.AddingMarkings}};function shouldDropOrDeselectPiece({api:i,move:s,plyDiff:_,pieceSquare:T}){var S;const C=T&&(null==(S=i.getPieces().getCollection()[T])?void 0:S.color);return!s||1!==_||!C||C===s.color&&!s.userGenerated||(s.from===T||s.to===T)}const ns={anyAPIEvent:({context:i,data:{holdSelectedPiece:s,move:_,plyDiff:T},params:{draggingPiece:S},UpdateParams:C})=>{const{renderer:P}=i;return S&&!s&&shouldDropOrDeselectPiece({api:i.api,move:_,pieceSquare:S,plyDiff:T})?(C.resetElevatedState(),null==P||P.dropPiece(S,i),cn.States.Idle):cn.States.PieceDragging},[C.UserEvents.MousedownRight]:({context:i,params:{draggingPiece:s},UpdateParams:_})=>{const{renderer:T}=i;if(!s)throw new ChessError({code:ji.BadData,message:"Attempted to pointerdown on a dragging piece but dragging piece is null or undefined"});return _.dropPiece(),_.deselectPiece(),null==T||T.dropPiece(s,i),cn.States.Idle},[C.UserEvents.Pointermove]:({context:i,data:{coordsInsideBoard:s},params:{draggingPiece:_},UpdateParams:T})=>{const{renderer:S}=i;if(!_)throw new ChessError({code:ji.BadData,message:"Attempted to drag a piece but draggingPiece is null or undefined"});return T.dragPiece(s,_),null==S||S.dragPiece({coords:s,square:_},i),cn.States.PieceDragging},[C.UserEvents.Pointerup]:({context:i,data:{keyPressed:s,square:_},params:{draggingPiece:T,selectedPiece:S},UpdateParams:C})=>{var P;const{api:{getMove:O,getPiece:M,getTurn:R,isCheck:D,move:j,playSound:$},mode:U,options:V,queue:Z,renderer:Y}=i;if(!T)throw new ChessError({code:ji.BadData,message:"Attempted to pointerup on a dragging piece but dragging piece is null or undefined"});if(i.options.test){const s=i.el.querySelector(".dragging");null==s||s.setAttribute("data-test-dragging","false"),null==s||s.removeAttribute("dragging")}if(T===_)return C.dropPiece(),null==Y||Y.dropPiece(T,i),S===_||V.moveMethod===Ht.MoveMethods.DragOnly?(C.deselectPiece(),cn.States.Idle):(C.selectPiece(T),cn.States.PieceSelected);S&&C.deselectPiece();const X={from:T,to:_},Q=O(X),ee=!(!U.isAllowedToMove()||!Q)&&__spreadProps(__spreadValues({},Q),{animate:!1,userGenerated:!0,userGeneratedDrop:!0});if(!ee){C.dropPiece(),U.handleIllegalMove&&Z.add(U.handleIllegalMove,X);const s=D();let _=!1;return(null==(P=M(T))?void 0:P.color)===R()&&s&&(V.playSounds&&Z.add($,kt.BoardSounds.Illegal),_=s),null==Y||Y.illegalMove(_,i),null==Y||Y.dropPiece(T,i),V.moveMethod===Ht.MoveMethods.DragOnly?(C.deselectPiece(),cn.States.Idle):(C.selectPiece(T),cn.States.PieceSelected)}return isPromotion(ee)?V.autoPromote&&"alt"!==s?(C.dropPiece(),null==Y||Y.dropPiece(ee.to,i),Z.add(j,__spreadProps(__spreadValues({},ee),{promotion:wr.Piece.Types.Queen})),cn.States.Idle):(C.dragPiece({},T),C.showPromotionArea(ee),null==Y||Y.dragPiece({square:T,toSquare:ee.to},i),null==Y||Y.openPromotionWindow(ee,i),cn.States.PromotionAreaShowing):(C.dropPiece(),null===_&&U.getOptions().canDropOffBoard?null==Y||Y.removePiece(T,i):null==Y||Y.dropPiece(_,i),Z.add(j,ee),cn.States.Idle)}},rs={anyAPIEvent:({context:i,data:{holdSelectedPiece:s,move:_,plyDiff:T},params:{selectedPiece:S},UpdateParams:C})=>!s&&shouldDropOrDeselectPiece({api:i.api,move:_,pieceSquare:S,plyDiff:T})?(C.resetElevatedState(),cn.States.Idle):cn.States.PieceSelected,[C.UserEvents.PointerdownLeft]:({context:i,data:{coords:s,keyPressed:_,square:T},params:{selectedPiece:S},UpdateParams:C})=>{const{api:{getMove:P,getPieces:O,move:M},mode:{isAllowedToMove:R},options:D,queue:j,renderer:$,state:U}=i;if(!S)throw new ChessError({code:ji.BadData,message:"Attempted to interact with a selectedPiece but selectedPiece is null or undefined"});if(T===S){const _=D.moveMethod===Ht.MoveMethods.Drag||D.moveMethod===Ht.MoveMethods.DragOnly?s:(null==$?void 0:$.getCoordsFromSquare(T,D.flipped))||s;return C.dragPiece(_,S),D.moveMethod===Ht.MoveMethods.Click&&U.set({hideHoverSquare:!0}),null==$||$.dragPiece({coords:_,square:S},i),cn.States.PieceDragging}const V={from:S,to:T},Z=O(),Y=P(V),X=!(!R()||!Y)&&__spreadProps(__spreadValues({},Y),{userGenerated:!0});if(!X){if(C.deselectPiece(),!Z.isDefined(T))return cn.States.Idle;if(D.moveMethod===Ht.MoveMethods.Click){const _=(null==$?void 0:$.getCoordsFromSquare(T,D.flipped))||s;return C.dragPiece(_,T),U.set({hideHoverSquare:!0}),null==$||$.dragPiece({coords:_,square:T},i),cn.States.PieceDragging}return C.dragPiece(s,T),null==$||$.dragPiece({coords:s,square:T},i),cn.States.PieceDragging}return isPromotion(X)?D.autoPromote&&"alt"!==_?(C.deselectPiece(),j.add(M,X,__spreadProps(__spreadValues({},X),{promotion:wr.Piece.Types.Queen})),cn.States.Idle):(C.deselectPiece(),C.dragPiece({},S),C.showPromotionArea(X),null==$||$.dragPiece({square:S,toSquare:X.to},i),null==$||$.openPromotionWindow(X,i),cn.States.PromotionAreaShowing):(C.deselectPiece(),j.add(M,X),cn.States.Idle)},[C.UserEvents.PointerdownRight]:({context:i,data:{square:s},UpdateParams:_})=>{const{options:T}=i;if(T.enabled)return _.deselectPiece(),_.setMarkingStartSquare(s),cn.States.AddingMarkings}};function cancelPromotion({context:i,params:{draggingPiece:s},UpdateParams:_}){const{renderer:T}=i;return _.dropPiece(),_.cancelPromotion(),null==T||T.dropPiece(s,i),null==T||T.closePromotionWindow(i),cn.States.Idle}const is={anyAPIEvent:i=>i.type===C.APIEvents.Move?cn.States.PromotionAreaShowing:cancelPromotion(i),[C.BoardEvents.PromotionPiecePointerdown]:({context:i,data:{piece:s},params:{draggingPiece:_,promotionMove:T},UpdateParams:S})=>{const{api:{move:C},queue:P,renderer:O}=i;return S.dropPiece(),S.cancelPromotion(),null==O||O.dropPiece(_,i),null==O||O.closePromotionWindow(i),T?(P.add(C,{animate:!1,flags:T.flags,from:T.from,piece:wr.Piece.Types.Pawn,promotion:s,to:T.to,userGenerated:!0}),cn.States.Idle):cn.States.Idle},[C.BoardEvents.PromotionAreaClosePointerdown]:cancelPromotion,[C.UserEvents.PointerdownLeft]:cancelPromotion,[C.UserEvents.PointerdownRight]:cancelPromotion},as={createUpdateParams:function createUpdateParams(i){return{cancelMarkingStartSquare:function cancelMarkingStartSquare(){i.markingStartSquare=void 0},cancelPromotion:function cancelPromotion2(){i.promotionMove=void 0},deselectPiece:function deselectPiece(){i.selectedPiece=void 0},dragPiece:function dragPiece(s,_){i.draggingPiece=_,i.draggingCoords=s},dropPiece:function dropPiece2(){i.draggingPiece=void 0,i.draggingCoords=void 0},resetElevatedState:function resetElevatedState(){i.draggingPiece=void 0,i.draggingCoords=void 0,i.promotionMove=void 0,i.selectedPiece=void 0},selectPiece:function selectPiece(s){i.selectedPiece=s},setMarkingStartSquare:function setMarkingStartSquare(s){i.markingStartSquare=s},showPromotionArea:function showPromotionArea(s){i.promotionMove=__spreadValues({},s)}}},getCurrentState:()=>cn.States.Idle,getParams:()=>({draggingCoords:void 0,draggingPiece:void 0,markingStartSquare:void 0,promotionMove:void 0,selectedPiece:void 0}),states:{[cn.States.AddingMarkings]:Ja,[cn.States.PieceDragging]:ns,[cn.States.Idle]:es,[cn.States.PromotionAreaShowing]:is,[cn.States.PieceSelected]:rs}};function createUpdateMachineState(){const i=as.getParams(),s=as.createUpdateParams(i);let _=as.getCurrentState();const T=[Ot.Events.Tick];return function updateMachineState(S,P){if(T.includes(S.type))return;const{state:O}=P;O.set({draggingPiece:i.draggingPiece,machineState:_,promotionMove:i.promotionMove,selectedPiece:i.selectedPiece});const M=function isAPIEvent(i){return Object.values(C.APIEvents).includes(i.type)}(S)&&!function shouldIgnoreEvent(i){return[C.APIEvents.AddMove,C.APIEvents.BlinkHighlight,C.APIEvents.ClearMarkings,C.APIEvents.Mark,C.APIEvents.LineUpdated,C.APIEvents.NodeUpdated,C.APIEvents.Unmark,C.APIEvents.UpdatePGNHeaders].includes(i)}(S.type)?"anyAPIEvent":S.type;if(!as.states[_]||!as.states[_][M])return void O.set({machineState:_});const R=as.states[_][M]({context:P,data:S.data,params:i,UpdateParams:s,type:S.type}),D=_;if(_=R||_,!function machineIsValid(){if(_===cn.States.Idle)return!i.draggingPiece&&!i.selectedPiece;if(_===cn.States.PieceDragging)return Boolean(i.draggingPiece);if(_===cn.States.PieceSelected)return!i.draggingPiece&&Boolean(i.selectedPiece);return!0}())throw{data:{draggingPiece:i.draggingPiece,machineState:_,oldState:D,selectedPiece:i.selectedPiece},error:new ChessError({code:ji.InvalidStateMachine,message:"The machine parameters and state do not match up."})};O.set({draggingPiece:i.draggingPiece,machineState:_,selectedPiece:i.selectedPiece})}}function runPlugin(i,s){i.match&&i.match.forEach((i=>function run2(i,s){if(!i.condition(...s))return;i.handler(...s)}(i,s)))}function createCore({params:i,plugins:s}){const _=function createContext({params:i,run:s}){const _=createQueue(!1),T=__spreadValues({queue:_,reset:function reset2(){T.queue=createQueue(!1),T.state=createGetSet()},run:s,setMode:function setMode(i){T.mode=i},setRenderer:function setRenderer(i){T.renderer=i},state:createGetSet()},i);return T.reset(),T}({params:i,run:run2}),T=createUpdateMachineState();return{getContext:function getContext(){return _},getMode:function getMode2(){return _.mode},run:run2,setMode:function setMode(i){_.setMode(i)},setRenderer:function setRenderer(i){_.setRenderer(i)}};function run2(i){const{api:{logger:S}}=_;S.log({code:C.LogCodes.Event,data:i}),_.reset();const P=s.get(),O=function runBeforeStateHooks(i,s){return s.every((s=>function runBeforeState(i,s){if(!i.beforeState)return!0;let _=!0;return i.beforeState.forEach((i=>{!1===function run(i,s){if(i.condition(...s))return i.handler(...s)}(i,s)&&(_=!1)})),_}(s,[i,_])))}(i,P);O&&T(i,_);const{beforeRender:M,afterRender:R}=function splitPluginsByHookType(i){return i.reduce(((i,s)=>(s.afterRender?i.afterRender.push(s):i.beforeRender.push(s),i)),{beforeRender:[],afterRender:[]})}(P);try{M.forEach((s=>runPlugin(s,[i,_]))),_.queue.flush(),R.forEach((s=>runPlugin(s,[i,_]))),_.queue.flush(),S.log({code:C.LogCodes.State,data:_.state.get()})}catch(D){throw S.log({code:C.LogCodes.State,data:__spreadProps(__spreadValues({},D.data),{event:i,queue:_.queue,state:_.state.get()}),level:yn.Levels.Error}),D}}}function getKeyPressed(i){return i.altKey?jt.Alt:i.ctrlKey?jt.Ctrl:i.shiftKey?jt.Shift:jt.None}function isTouchEvent(i){return void 0!==i.touches}function isRightButton(i){return!isTouchEvent(i)&&3===i.which}function onNextTick(i){setTimeout(i)}function createUserEventHandlers$1({el:i,getPointerPosition:s,options:_,run:T}){const S=function debounceAnimationFrame(i){let s;return function run2(..._){s&&cancelAnimationFrame(s),s=requestAnimationFrame((()=>{s=null,i(..._)}))}}((function runPointerMoveEvent(S){const P=createCoreEvent(C.UserEvents.Pointermove);P.data=__spreadProps(__spreadValues({},s({el:i,event:S,flipped:_.flipped})),{keyPressed:getKeyPressed(S)}),T(P)}));return{handleDocumentPointerdown:function handleDocumentPointerdown(i){const s=createCoreEvent(isRightButton(i)?C.UserEvents.PointerdownRight:C.UserEvents.PointerdownLeft);return s.data={square:null},T(s)},handlePointerdown:function handlePointerdown(P){P.stopPropagation(),document.addEventListener(ri,S),document.addEventListener(ii,handlePointerup);const O=createCoreEvent(isRightButton(P)?C.UserEvents.PointerdownRight:C.UserEvents.PointerdownLeft);return O.data=__spreadProps(__spreadValues({},s({el:i,event:P,flipped:_.flipped})),{keyPressed:getKeyPressed(P)}),onNextTick((function addMouseDownListener(){document.addEventListener(ei.Mousedown,handleMousedown,{once:!0})})),T(O)},handlePointermove:S,handlePointerup:handlePointerup};function handleMousedown(S){const P=createCoreEvent(isRightButton(S)?C.UserEvents.MousedownRight:C.UserEvents.MousedownLeft);return P.data=__spreadProps(__spreadValues({},s({el:i,event:S,flipped:_.flipped})),{keyPressed:getKeyPressed(S)}),T(P)}function handlePointerup(P){document.removeEventListener(ei.Mousedown,handleMousedown),document.removeEventListener(ri,S),document.removeEventListener(ii,handlePointerup);const O=createCoreEvent(C.UserEvents.Pointerup);return O.data=__spreadProps(__spreadValues({},s({el:i,event:P,flipped:_.flipped})),{keyPressed:getKeyPressed(P)}),T(O)}}function generateRandomId(){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";return[0,0,0,0,0,0,0,0,0,0].reduce((s=>s+i.charAt(Math.floor(Math.random()*i.length))),"")}function getDefaultOptions(){return{allowMarkings:!0,analysisHighlightColors:{alt:Ht.HighlightColors.Blue,ctrl:Ht.HighlightColors.Orange,default:Ht.HighlightColors.Red,shift:Ht.HighlightColors.Green},analysisHighlightOpacity:.8,animationType:Ht.Animation.Types.Default,arrowColors:{alt:Ht.HighlightedArrowColors.Blue,ctrl:Ht.HighlightedArrowColors.Red,default:Ht.HighlightedArrowColors.Orange,shift:Ht.HighlightedArrowColors.Green},aspectRatio:1,autoClaimDraw:!0,autoPromote:!1,autoResize:!0,boardStyle:"green",captureKeyStrokes:!0,checkBlinkingSquareColor:"#ff0000",coordinates:Ht.CoordinatesPositions.Inside,darkMode:!1,diagramStyle:!0,enabled:!0,fadeSetup:0,flipped:!1,highlightColor:void 0,highlightLegalMoves:!0,highlightMoves:!0,highlightOpacity:.5,hoverSquareOutline:!0,id:generateRandomId(),moveListContextMenuEnabled:!0,moveListDisplayType:Ht.MoveListDisplayTypes.Text,moveMethod:Ht.MoveMethods.Drag,overlayInAnalysisMode:!1,pieceStyle:"neo",playSounds:!0,premoveDelay:200,premoveHighlightColor:"#f42a32",premoveHighlightOpacity:.5,rounded:!0,soundTheme:"default",threatSquareColor:"#ff0000",threatSquareOpacity:.8,useSharedStyleTag:!1}}var ss,os,ls,cs,us,ds,hs,ps;function buildErrorMsg(i){return(Array.isArray(i)?i:[i]).map((i=>{var s;return`${i.name} (requires: ${null==(s=i.requires)?void 0:s.join(", ")})`})).join(", ")}function getMapOfLoadablePlugins(i,s=new Map){return getLoadablePlugins(i,s,new Map)}function getLoadablePlugins(i,s,_){if(0===i.size)return _;const T=i.size,S=new Map([...s.entries(),..._.entries()]);return i.forEach((s=>{(function requiredPluginsExist(i,s=new Map){return!i||i.every((i=>s.has(i)))})(s.requires,S)&&(_.set(s.name,s),i.delete(s.name))})),T===i.size?(_.clear(),_):getLoadablePlugins(i,s,_)}function createChessboardPluginsAPI(i=[],s){const _=createPluginsAPI();return _.addMany(i),{add:add2,addMany:add2,get:_.getAll,has:_.has,remove:remove,setCreatePluginContext:_.setContext};function add2(i){(function getPluginsOrderedByRequires(i,s){if(0===i.length)return[];const _=getMapOfLoadablePlugins(new Map(i.map((i=>[i.name,i]))),new Map(s.map((i=>[i.name,i]))));if(0===_.size){const s=buildErrorMsg(i);throw new Error(`Required plugins do not exist: ${s}`)}return[..._.values()]})(Array.isArray(i)?i:[i],_.getAll()).forEach((T=>{_.has(T.name)&&_.remove(T.name),function loadPlugin(i){const s=_.getContext();if(!s)return;const{api:T,apiOverrides:S,modeOverrides:C,name:P}=i;T&&(i.destroyAPIMethods=s.api.extendAPI(P,{[P]:T})),S&&(i.destroyAPIOverrides=s.api.extendAPI(P,S)),C&&(i.destroyModeOverrides=s.mode.extendMode(C))}(T);if(!_.add(T)){const{name:S}=T;null==s||s.log({code:ss.LogCodes.CreateFailure,data:{currentPlugins:_.getAll().map((i=>i.name)),data:buildErrorMsg(i),plugin:S},level:yn.Levels.Error,message:`Could not create ${S} plugin`}),remove(T.name)}}))}function remove(i){var s,T,S;if(!_.has(i))return;const C=_.getOne(i);_.remove(i),null==(s=null==C?void 0:C.destroyAPIMethods)||s.call(C),null==(T=null==C?void 0:C.destroyAPIOverrides)||T.call(C),null==(S=null==C?void 0:C.destroyModeOverrides)||S.call(C)}}function getRendererType(i){const{Arcade:s,Natural:_}=Ht.Animation.Types;return i.pieceStyle===os.PieceStyles.Trigger?an.Types.WebGL3D:[s,_].includes(i.animationType)?an.Types.WebGL2D:an.Types.Default}function getRenderer(i){return function fetchRenderer(i){return i===an.Types.WebGL3D?Promise.all([_.e(448),_.e(347)]).then(_.bind(_,79347)):i===an.Types.WebGL2D?Promise.all([_.e(448),_.e(797)]).then(_.bind(_,88797)):_.e(416).then(_.bind(_,70416))}(getRendererType(i))}function shouldSetRenderer(i,s,_,T){const S=getRendererType(_),C=S!==T,P=S===an.Types.WebGL2D,O="animationType"in i,M=i.animationType!==s.animationType,R=P&&O&&M;return Object.keys(i).some((i=>an.TriggerOptions.includes(i)))&&(C||R)}function defaultOptions(i,s=!1){const{pieceStyle:_,animationType:T}=getDefaultOptions();i.animationType=T,s&&(i.pieceStyle=_)}async function getMode(i){return function __variableDynamicImportRuntime0__(i){switch(i){case"../analysis/index.ts":return Promise.resolve().then((function(){return ka}));case"../capture-the-star/index.ts":return Promise.resolve().then((function(){return Oa}));case"../exploring/index.ts":return Promise.resolve().then((function(){return Ra}));case"../guess-the-move/index.ts":return Promise.resolve().then((function(){return Da}));case"../observing/index.ts":return Promise.resolve().then((function(){return Ua}));case"../passive-observing/index.ts":return Promise.resolve().then((function(){return Za}));case"../playing/index.ts":return Promise.resolve().then((function(){return Ha}));case"../setup/index.ts":return Promise.resolve().then((function(){return Ka}));default:return new Promise((function(s,_){("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(_.bind(null,new Error("Unknown variable dynamic import: "+i)))}))}}(`../${i.toLowerCase()}/index.ts`)}function createGame({api:i,apiOptions:s,el:_,emitter:T,init:S,logger:P,mode:O,options:M=getDefaultOptions(),plugins:R=createStandardPlugins(),renderer:D}){const j=i||createAPI({eventEmitter:T,logger:P,options:s||{}}),$=__spreadValues(__spreadValues({},getDefaultOptions()),M);_.id=`board-${$.id}`;const U=createChessboardPluginsAPI(),V=function createSetRenderer(){const i=createQueue();return async function set3(s){i.add(handler2,s)};async function handler2(i){if(destroyRenderer(),i)Z=i;else try{(function checkWebGLSupport(i){const s=getRendererType(i);return s!==an.Types.WebGL2D&&s!==an.Types.WebGL3D||(void 0===window.hasWebGLSupport&&(window.hasWebGLSupport=function isWebGLSupported2(){const i=document.createElement("canvas"),s=i.getContext("webgl")||i.getContext("experimental-webgl");return Boolean(s)&&s instanceof WebGLRenderingContext}()),!!window.hasWebGLSupport||(defaultOptions(i,s===an.Types.WebGL3D),!1))})($)||j.emit(C.InstanceEvents.RendererSetFailed,createCoreEvent(C.InstanceEvents.RendererSetFailed,{message:"WebGL is not supported by the browser. Will fallback to default."})),Z=(await getRenderer($)).createRenderer({el:_,options:$})}catch(s){j.emit(C.InstanceEvents.RendererSetFailed,createCoreEvent(C.InstanceEvents.RendererSetFailed,{message:"Problem creating renderer. Will fallback to default.",error:s})),defaultOptions($,!0),Z=(await getRenderer($)).createRenderer({el:_,options:$})}X.setRenderer(Z),Object.assign(Q,{animationComplete:Z.animationComplete,getPointerPosition:Z.getPointerPosition,isAnimating:Z.isAnimating}),Y=createUserEventHandlers$1({el:_,getPointerPosition:Z.getPointerPosition,options:$,run:runCoreEvent}),_.addEventListener(ni,Y.handlePointerdown),document.addEventListener(ni,Y.handleDocumentPointerdown),Z.onAll(j.logger.log),j.emit(C.InstanceEvents.RendererSet,createCoreEvent(C.InstanceEvents.RendererSet,Z.name))}}();let Z,Y;const X=createCore({params:{api:j,el:_,options:$},plugins:U});U.setCreatePluginContext(X.getContext());const Q=Object.assign(j,{destroy:function destroy10(){destroyRenderer(),j.offAll(runCoreEvent);const i=createCoreEvent(C.InstanceEvents.Destroy);runCoreEvent(i),j.emit(C.InstanceEvents.Destroy,i)},getMode:X.getMode,getOptions:function getOptions(){return __spreadValues({},$)},getRenderer:()=>Z,playSound:function playSound2(i){runCoreEvent(createCoreEvent(C.SoundEvents.Play,{sound:i}))},plugins:U,resize:function resize3(i,s){runCoreEvent(createCoreEvent(C.UIEvents.Resize,{height:s,width:i}))},run:runCoreEvent,setMode:setMode,setOptions:function setOptions(i){const s=__spreadValues({},$);if(Object.assign($||{},i),i&&Z&&shouldSetRenderer(i,s,$,Z.name))return void V();j.emit(C.OptionsEvents.Update,createCoreEvent(C.OptionsEvents.Update,i))},setRenderer:V}),ee=setMode(O);return"name"in ee?finishInit():ee.then(finishInit),Q;function finishInit(){U.add(R),runCoreEvent(createCoreEvent(C.InstanceEvents.Create)),_.addEventListener("contextmenu",(i=>(i.stopPropagation(),i.preventDefault(),!1))),j.onAll(runCoreEvent),j.emit(C.InstanceEvents.Create,createCoreEvent(C.InstanceEvents.Create,X.getMode().name)),V(D).then((()=>{S&&j.load(S)}))}function destroyRenderer(){X.setRenderer(),null==Z||Z.offAll(j.logger.log),null==Z||Z.destroy(),Z=void 0,_.removeEventListener(ni,null==Y?void 0:Y.handlePointerdown),document.removeEventListener(ni,null==Y?void 0:Y.handleDocumentPointerdown),document.removeEventListener(ri,null==Y?void 0:Y.handlePointermove),document.removeEventListener(ii,null==Y?void 0:Y.handlePointerup)}function runCoreEvent(i){return X.run(i),i}function setMode(i){return"modeType"in i?getMode(i.modeType).then((s=>setModeWithBuilder(s.create(i.options)))):setModeWithBuilder(i)}function setModeWithBuilder(i){var s,_;const T=X&&X.getMode();T&&(null==(s=T.plugins)||s.forEach((i=>U.remove(i.name))),U.get().forEach((i=>{var s;return null==(s=i.destroyModeOverrides)?void 0:s.call(i)})),null==(_=T.destroy)||_.call(T));const S=i(j);return j.usePlayingAs(S.usePlayingAs),S.plugins&&U.add(S.plugins),U.get().forEach((i=>i.modeOverrides&&S.extendMode(i.modeOverrides))),X&&(X.setMode(S),runCoreEvent(createCoreEvent(C.InstanceEvents.ModeChanged)),j.emit(C.InstanceEvents.ModeChanged,createCoreEvent(C.InstanceEvents.ModeChanged,X.getMode().name))),S}}function getColorAsNumber(i){return i===wr.ColorsAsLetters.Black||i===wr.ColorsAsWords.Black?wr.ColorsAsNumbers.Black:wr.ColorsAsNumbers.White}function getPieceBaseURL(i,s=150){return`https://images.chesscomfiles.com/chess-themes/pieces/${i}/${s}`}!function(i){!function(i){i.CreateFailure="CreateFailure"}(i.LogCodes||(i.LogCodes={}))}(ss||(ss={})),function(i){var s,_,T,S,C,P,O;(s=i.PieceStyles||(i.PieceStyles={})).Default="staunton_executive",s.Trigger="real3d",(i.CacheKeys||(i.CacheKeys={})).CameraSettings="cameraSettings",(_=i.CssClasses||(i.CssClasses={})).Board="board-webgl-3d",_.PieceDrag="piece-dragging",_.PieceHover="piece-hover",_.PromotionWindow="promotion-window-3d",_.StatisticsPanel="statistics-panel",(T=i.ObjectsRenderOrder||(i.ObjectsRenderOrder={}))[T.AnalysisOverlay=1]="AnalysisOverlay",T[T.NotationPlane=2]="NotationPlane",T[T.OverSquare=3]="OverSquare",T[T.HighligtedSquare=4]="HighligtedSquare",T[T.Hint=5]="Hint",T[T.CustomItem=6]="CustomItem",T[T.PieceShadow=7]="PieceShadow",T[T.Arrow=8]="Arrow",T[T.Effect=9]="Effect",T[T.Highest=10]="Highest",function(i){i[i.PositionY=.005]="PositionY"}(i.Arrow||(i.Arrow={})),(S=i.CustomItem||(i.CustomItem={}))[S.PositionY=.005]="PositionY",(C=i.Effect||(i.Effect={}))[C.PositionY=.005]="PositionY",(P=i.Square||(i.Square={}))[P.Size=10]="Size",P[P.HalfSize=5]="HalfSize",P[P.BorderSize=.5]="BorderSize",P[P.OverBorderSize=.5]="OverBorderSize",P[P.VisibleY=.005]="VisibleY",P[P.InvisibleY=-.2]="InvisibleY",P[P.InsideTolerance=.01]="InsideTolerance",function(i){i[i.MarginSize=4]="MarginSize",i[i.Size=88]="Size"}(i.Board||(i.Board={})),(O=i.Camera||(i.Camera={}))[O.Distance=140]="Distance",O[O.DistanceMin=50]="DistanceMin",O[O.DistanceMax=500]="DistanceMax",O[O.PanAngle=0]="PanAngle",O[O.TiltAngle=100]="TiltAngle",O[O.HorizontalPanning=0]="HorizontalPanning",O[O.VerticalPanning=-12]="VerticalPanning",O[O.ZoomIncrement=5]="ZoomIncrement"}(os||(os={})),function(i){i.BodyDragging="hand-pieces-dragging-body",i.Component="hand-pieces",i.Dragging="dragging",i.Flipped="flipped",i.Horizontal="horizontal",i.Piece="hand-piece",i.Pseudo3d="pseudo3d",i.Vertical="vertical",i.WithKing="with-king"}((cs=ls||(ls={})).Classes||(cs.Classes={})),(us=cs.DataAttributes||(cs.DataAttributes={})).Dragging="data-hand-piece-dragging",us.Selected="data-hand-piece-selected",(ds=cs.DisplayDirections||(cs.DisplayDirections={})).Horizontal="horizontal",ds.Vertical="vertical",function(i){i.Dragging="dragging",i.Idle="idle",i.Selected="selected"}(hs||(hs={})),function(i){i.RESET="RESET",i.PLACE="PLACE",i.SELECT="SELECT",i.DESELECT="DESELECT",i.START_DRAG="START_DRAG",i.MOVE="MOVE"}(ps||(ps={}));var ms;!function(i){!function(i){i.BodyDragging="hand-pieces-dragging-body",i.Component="hand-pieces",i.Dragging="dragging",i.Flipped="flipped",i.Horizontal="horizontal",i.Piece="hand-piece",i.Pseudo3d="pseudo3d",i.Vertical="vertical",i.WithKing="with-king"}(i.Classes||(i.Classes={})),function(i){i.Dragging="data-hand-piece-dragging",i.Selected="data-hand-piece-selected"}(i.DataAttributes||(i.DataAttributes={})),function(i){i.Horizontal="horizontal",i.Vertical="vertical"}(i.DisplayDirections||(i.DisplayDirections={}))}(ms||(ms={}));var fs,gs;function getBoardURL(i,s=150){return`https://images.chesscomfiles.com/chess-themes/boards/${i}/${s}.png`}function getColorAsLetter(i){return i===wr.ColorsAsNumbers.Black?wr.ColorsAsLetters.Black:wr.ColorsAsLetters.White}function getSanFromFileRank(i){return!i||!i.file||!i.rank||i.file>8||i.rank>8||i.file<1||i.rank<1?null:`${String.fromCharCode(96+i.file)}${i.rank.toString()}`}function getUndoMoveDetails(i){const s=[{animate:i.animate,from:i.kingTo||i.to,to:i.from}];i.rookMove&&s.push(__spreadProps(__spreadValues({},i.rookMove),{from:i.rookMove.to,to:i.rookMove.from}));const _=i.captured&&i.capturedStr?{color:getOppositeColor(i.color),promoted:i.capturedPromotedPawn,square:i.EPCapturedSquare||i.to,type:i.capturedStr.toLowerCase()}:void 0;return{movedPieces:s,promotedSquare:i.promotion?i.from:void 0,restoredPiece:_}}function getArrowColor(i,s){var _,T;return null!=(T=null!=(_=i&&s[wr.Node.Marking.JCEColorsMap[i]])?_:i)?T:s.default}!function(i){i.DraggingPiece="DraggingPiece",i.Idle="Idle",i.PieceSelected="PieceSelected"}(fs||(fs={})),(gs||(gs={})).ResetToIdle="ResetToIdle";const vs={HEAD_HEIGHT:4.5,HEAD_WIDTH:6.5,TAIL_PADDING:4.5,WIDTH:2.75},bs=27.95084971874737,ys=[.5,-2],_s=[2,.5,-.5,-2];function calculateArrowLength({from:i,to:s}){return Math.sqrt((i.x-s.x)**2+(i.y-s.y)**2)}function calculateArrowRotation({from:i,to:s}){const _=calculateArrowLength({from:i,to:s}),T=i.x,S=i.y+_,C=i.x-T,P=i.y-S,O=i.x-s.x,M=i.y-s.y,R=Math.acos((C*O+P*M)/_**2),D=Math.floor(R*(180/Math.PI)*100)/100;return i.x<s.x?360-D:D}function calculateArrowSlope({from:i,to:s}){const _=(i.y-s.y)/(i.x-s.x);return Number(_.toFixed(1))}function getKnightArrowRotation({from:i,slope:s,to:_}){switch(s){case 2:return i.x>_.x?180:0;case-2:return i.x>_.x?0:180;case.5:case-.5:return i.x>_.x?90:270;default:return 0}}const ws=/iPhone/i,ks=/iPod/i,Ts=/iPad/i,Ss=/\bAndroid(?:.+)Mobile\b/i,Cs=/Android/i,xs=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Es=/Silk/i,Ps=/Windows Phone/i,As=/\bWindows(?:.+)ARM\b/i,Os=/BlackBerry/i,Ms=/BB10/i,zs=/Opera Mini/i,Is=/\b(CriOS|Chrome)(?:.+)Mobile/i,Ls=/Mobile(?:.+)Firefox\b/i;function match(i,s){return i.test(s)}
/*!
 * @pixi/settings - v5.2.1
 * Compiled Tue, 28 Jan 2020 23:33:11 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Rs=function isMobile$1(i){let s=(i=i||("undefined"!=typeof navigator?navigator.userAgent:"")).split("[FBAN");void 0!==s[1]&&(i=s[0]),s=i.split("Twitter"),void 0!==s[1]&&(i=s[0]);const _={apple:{phone:match(ws,i)&&!match(Ps,i),ipod:match(ks,i),tablet:!match(ws,i)&&match(Ts,i)&&!match(Ps,i),device:(match(ws,i)||match(ks,i)||match(Ts,i))&&!match(Ps,i)},amazon:{phone:match(xs,i),tablet:!match(xs,i)&&match(Es,i),device:match(xs,i)||match(Es,i)},android:{phone:!match(Ps,i)&&match(xs,i)||!match(Ps,i)&&match(Ss,i),tablet:!match(Ps,i)&&!match(xs,i)&&!match(Ss,i)&&(match(Es,i)||match(Cs,i)),device:!match(Ps,i)&&(match(xs,i)||match(Es,i)||match(Ss,i)||match(Cs,i))||match(/\bokhttp\b/i,i)},windows:{phone:match(Ps,i),tablet:match(As,i),device:match(Ps,i)||match(As,i)},other:{blackberry:match(Os,i),blackberry10:match(Ms,i),opera:match(zs,i),firefox:match(Ls,i),chrome:match(Is,i),device:match(Os,i)||match(Ms,i)||match(zs,i)||match(Ls,i)||match(Is,i)},any:!1,phone:!1,tablet:!1};return _.any=_.apple.device||_.android.device||_.windows.device||_.other.device,_.phone=_.apple.phone||_.android.phone||_.windows.phone,_.tablet=_.apple.tablet||_.android.tablet||_.windows.tablet,_}();var Ns={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:function maxRecommendedTextures(i){var s=!0;if(Rs.tablet||Rs.phone){if(s=!1,Rs.apple.device){var _=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(_)parseInt(_[1],10)>=11&&(s=!0)}if(Rs.android.device){var T=navigator.userAgent.match(/Android\s([0-9.]*)/);if(T)parseInt(T[1],10)>=7&&(s=!0)}}return s?i:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:Rs.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:function canUploadSameBuffer(){return!Rs.apple.device}(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},Ds={exports:{}};!function(i){var s=Object.prototype.hasOwnProperty,_="~";function Events(){}function EE(i,s,_){this.fn=i,this.context=s,this.once=_||!1}function addListener(i,s,T,S,C){if("function"!=typeof T)throw new TypeError("The listener must be a function");var P=new EE(T,S||i,C),O=_?_+s:s;return i._events[O]?i._events[O].fn?i._events[O]=[i._events[O],P]:i._events[O].push(P):(i._events[O]=P,i._eventsCount++),i}function clearEvent(i,s){0==--i._eventsCount?i._events=new Events:delete i._events[s]}function EventEmitter2(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(_=!1)),EventEmitter2.prototype.eventNames=function eventNames(){var i,T,S=[];if(0===this._eventsCount)return S;for(T in i=this._events)s.call(i,T)&&S.push(_?T.slice(1):T);return Object.getOwnPropertySymbols?S.concat(Object.getOwnPropertySymbols(i)):S},EventEmitter2.prototype.listeners=function listeners(i){var s=_?_+i:i,T=this._events[s];if(!T)return[];if(T.fn)return[T.fn];for(var S=0,C=T.length,P=new Array(C);S<C;S++)P[S]=T[S].fn;return P},EventEmitter2.prototype.listenerCount=function listenerCount(i){var s=_?_+i:i,T=this._events[s];return T?T.fn?1:T.length:0},EventEmitter2.prototype.emit=function emit(i,s,T,S,C,P){var O=_?_+i:i;if(!this._events[O])return!1;var M,R,D=this._events[O],j=arguments.length;if(D.fn){switch(D.once&&this.removeListener(i,D.fn,void 0,!0),j){case 1:return D.fn.call(D.context),!0;case 2:return D.fn.call(D.context,s),!0;case 3:return D.fn.call(D.context,s,T),!0;case 4:return D.fn.call(D.context,s,T,S),!0;case 5:return D.fn.call(D.context,s,T,S,C),!0;case 6:return D.fn.call(D.context,s,T,S,C,P),!0}for(R=1,M=new Array(j-1);R<j;R++)M[R-1]=arguments[R];D.fn.apply(D.context,M)}else{var $,U=D.length;for(R=0;R<U;R++)switch(D[R].once&&this.removeListener(i,D[R].fn,void 0,!0),j){case 1:D[R].fn.call(D[R].context);break;case 2:D[R].fn.call(D[R].context,s);break;case 3:D[R].fn.call(D[R].context,s,T);break;case 4:D[R].fn.call(D[R].context,s,T,S);break;default:if(!M)for($=1,M=new Array(j-1);$<j;$++)M[$-1]=arguments[$];D[R].fn.apply(D[R].context,M)}}return!0},EventEmitter2.prototype.on=function on(i,s,_){return addListener(this,i,s,_,!1)},EventEmitter2.prototype.once=function once(i,s,_){return addListener(this,i,s,_,!0)},EventEmitter2.prototype.removeListener=function removeListener(i,s,T,S){var C=_?_+i:i;if(!this._events[C])return this;if(!s)return clearEvent(this,C),this;var P=this._events[C];if(P.fn)P.fn!==s||S&&!P.once||T&&P.context!==T||clearEvent(this,C);else{for(var O=0,M=[],R=P.length;O<R;O++)(P[O].fn!==s||S&&!P[O].once||T&&P[O].context!==T)&&M.push(P[O]);M.length?this._events[C]=1===M.length?M[0]:M:clearEvent(this,C)}return this},EventEmitter2.prototype.removeAllListeners=function removeAllListeners(i){var s;return i?(s=_?_+i:i,this._events[s]&&clearEvent(this,s)):(this._events=new Events,this._eventsCount=0),this},EventEmitter2.prototype.off=EventEmitter2.prototype.removeListener,EventEmitter2.prototype.addListener=EventEmitter2.prototype.on,EventEmitter2.prefixed=_,EventEmitter2.EventEmitter=EventEmitter2,i.exports=EventEmitter2}(Ds);var js=Ds.exports,Bs={exports:{}};function earcut(i,s,_){_=_||2;var T,S,C,P,O,M,R,D=s&&s.length,j=D?s[0]*_:i.length,$=linkedList(i,0,j,_,!0),U=[];if(!$||$.next===$.prev)return U;if(D&&($=function eliminateHoles(i,s,_,T){var S,C,P,O=[];for(S=0,C=s.length;S<C;S++)(P=linkedList(i,s[S]*T,S<C-1?s[S+1]*T:i.length,T,!1))===P.next&&(P.steiner=!0),O.push(getLeftmost(P));for(O.sort(compareX),S=0;S<O.length;S++)eliminateHole(O[S],_),_=filterPoints(_,_.next);return _}(i,s,$,_)),i.length>80*_){T=C=i[0],S=P=i[1];for(var V=_;V<j;V+=_)(O=i[V])<T&&(T=O),(M=i[V+1])<S&&(S=M),O>C&&(C=O),M>P&&(P=M);R=0!==(R=Math.max(C-T,P-S))?1/R:0}return earcutLinked($,U,_,T,S,R),U}function linkedList(i,s,_,T,S){var C,P;if(S===signedArea(i,s,_,T)>0)for(C=s;C<_;C+=T)P=insertNode(C,i[C],i[C+1],P);else for(C=_-T;C>=s;C-=T)P=insertNode(C,i[C],i[C+1],P);return P&&equals(P,P.next)&&(removeNode(P),P=P.next),P}function filterPoints(i,s){if(!i)return i;s||(s=i);var _,T=i;do{if(_=!1,T.steiner||!equals(T,T.next)&&0!==area(T.prev,T,T.next))T=T.next;else{if(removeNode(T),(T=s=T.prev)===T.next)break;_=!0}}while(_||T!==s);return s}function earcutLinked(i,s,_,T,S,C,P){if(i){!P&&C&&function indexCurve(i,s,_,T){var S=i;do{null===S.z&&(S.z=zOrder(S.x,S.y,s,_,T)),S.prevZ=S.prev,S.nextZ=S.next,S=S.next}while(S!==i);S.prevZ.nextZ=null,S.prevZ=null,function sortLinked(i){var s,_,T,S,C,P,O,M,R=1;do{for(_=i,i=null,C=null,P=0;_;){for(P++,T=_,O=0,s=0;s<R&&(O++,T=T.nextZ);s++);for(M=R;O>0||M>0&&T;)0!==O&&(0===M||!T||_.z<=T.z)?(S=_,_=_.nextZ,O--):(S=T,T=T.nextZ,M--),C?C.nextZ=S:i=S,S.prevZ=C,C=S;_=T}C.nextZ=null,R*=2}while(P>1);return i}(S)}(i,T,S,C);for(var O,M,R=i;i.prev!==i.next;)if(O=i.prev,M=i.next,C?isEarHashed(i,T,S,C):isEar(i))s.push(O.i/_),s.push(i.i/_),s.push(M.i/_),removeNode(i),i=M.next,R=M.next;else if((i=M)===R){P?1===P?earcutLinked(i=cureLocalIntersections(filterPoints(i),s,_),s,_,T,S,C,2):2===P&&splitEarcut(i,s,_,T,S,C):earcutLinked(filterPoints(i),s,_,T,S,C,1);break}}}function isEar(i){var s=i.prev,_=i,T=i.next;if(area(s,_,T)>=0)return!1;for(var S=i.next.next;S!==i.prev;){if(pointInTriangle(s.x,s.y,_.x,_.y,T.x,T.y,S.x,S.y)&&area(S.prev,S,S.next)>=0)return!1;S=S.next}return!0}function isEarHashed(i,s,_,T){var S=i.prev,C=i,P=i.next;if(area(S,C,P)>=0)return!1;for(var O=S.x<C.x?S.x<P.x?S.x:P.x:C.x<P.x?C.x:P.x,M=S.y<C.y?S.y<P.y?S.y:P.y:C.y<P.y?C.y:P.y,R=S.x>C.x?S.x>P.x?S.x:P.x:C.x>P.x?C.x:P.x,D=S.y>C.y?S.y>P.y?S.y:P.y:C.y>P.y?C.y:P.y,j=zOrder(O,M,s,_,T),$=zOrder(R,D,s,_,T),U=i.prevZ,V=i.nextZ;U&&U.z>=j&&V&&V.z<=$;){if(U!==i.prev&&U!==i.next&&pointInTriangle(S.x,S.y,C.x,C.y,P.x,P.y,U.x,U.y)&&area(U.prev,U,U.next)>=0)return!1;if(U=U.prevZ,V!==i.prev&&V!==i.next&&pointInTriangle(S.x,S.y,C.x,C.y,P.x,P.y,V.x,V.y)&&area(V.prev,V,V.next)>=0)return!1;V=V.nextZ}for(;U&&U.z>=j;){if(U!==i.prev&&U!==i.next&&pointInTriangle(S.x,S.y,C.x,C.y,P.x,P.y,U.x,U.y)&&area(U.prev,U,U.next)>=0)return!1;U=U.prevZ}for(;V&&V.z<=$;){if(V!==i.prev&&V!==i.next&&pointInTriangle(S.x,S.y,C.x,C.y,P.x,P.y,V.x,V.y)&&area(V.prev,V,V.next)>=0)return!1;V=V.nextZ}return!0}function cureLocalIntersections(i,s,_){var T=i;do{var S=T.prev,C=T.next.next;!equals(S,C)&&intersects(S,T,T.next,C)&&locallyInside(S,C)&&locallyInside(C,S)&&(s.push(S.i/_),s.push(T.i/_),s.push(C.i/_),removeNode(T),removeNode(T.next),T=i=C),T=T.next}while(T!==i);return filterPoints(T)}function splitEarcut(i,s,_,T,S,C){var P=i;do{for(var O=P.next.next;O!==P.prev;){if(P.i!==O.i&&isValidDiagonal(P,O)){var M=splitPolygon(P,O);return P=filterPoints(P,P.next),M=filterPoints(M,M.next),earcutLinked(P,s,_,T,S,C),void earcutLinked(M,s,_,T,S,C)}O=O.next}P=P.next}while(P!==i)}function compareX(i,s){return i.x-s.x}function eliminateHole(i,s){if(s=function findHoleBridge(i,s){var _,T=s,S=i.x,C=i.y,P=-1/0;do{if(C<=T.y&&C>=T.next.y&&T.next.y!==T.y){var O=T.x+(C-T.y)*(T.next.x-T.x)/(T.next.y-T.y);if(O<=S&&O>P){if(P=O,O===S){if(C===T.y)return T;if(C===T.next.y)return T.next}_=T.x<T.next.x?T:T.next}}T=T.next}while(T!==s);if(!_)return null;if(S===P)return _;var M,R=_,D=_.x,j=_.y,$=1/0;T=_;do{S>=T.x&&T.x>=D&&S!==T.x&&pointInTriangle(C<j?S:P,C,D,j,C<j?P:S,C,T.x,T.y)&&(M=Math.abs(C-T.y)/(S-T.x),locallyInside(T,i)&&(M<$||M===$&&(T.x>_.x||T.x===_.x&&sectorContainsSector(_,T)))&&(_=T,$=M)),T=T.next}while(T!==R);return _}(i,s),s){var _=splitPolygon(s,i);filterPoints(s,s.next),filterPoints(_,_.next)}}function sectorContainsSector(i,s){return area(i.prev,i,s.prev)<0&&area(s.next,i,i.next)<0}function zOrder(i,s,_,T,S){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-_)*S)|i<<8))|i<<4))|i<<2))|i<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=32767*(s-T)*S)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function getLeftmost(i){var s=i,_=i;do{(s.x<_.x||s.x===_.x&&s.y<_.y)&&(_=s),s=s.next}while(s!==i);return _}function pointInTriangle(i,s,_,T,S,C,P,O){return(S-P)*(s-O)-(i-P)*(C-O)>=0&&(i-P)*(T-O)-(_-P)*(s-O)>=0&&(_-P)*(C-O)-(S-P)*(T-O)>=0}function isValidDiagonal(i,s){return i.next.i!==s.i&&i.prev.i!==s.i&&!function intersectsPolygon(i,s){var _=i;do{if(_.i!==i.i&&_.next.i!==i.i&&_.i!==s.i&&_.next.i!==s.i&&intersects(_,_.next,i,s))return!0;_=_.next}while(_!==i);return!1}(i,s)&&(locallyInside(i,s)&&locallyInside(s,i)&&function middleInside(i,s){var _=i,T=!1,S=(i.x+s.x)/2,C=(i.y+s.y)/2;do{_.y>C!=_.next.y>C&&_.next.y!==_.y&&S<(_.next.x-_.x)*(C-_.y)/(_.next.y-_.y)+_.x&&(T=!T),_=_.next}while(_!==i);return T}(i,s)&&(area(i.prev,i,s.prev)||area(i,s.prev,s))||equals(i,s)&&area(i.prev,i,i.next)>0&&area(s.prev,s,s.next)>0)}function area(i,s,_){return(s.y-i.y)*(_.x-s.x)-(s.x-i.x)*(_.y-s.y)}function equals(i,s){return i.x===s.x&&i.y===s.y}function intersects(i,s,_,T){var S=sign$1(area(i,s,_)),C=sign$1(area(i,s,T)),P=sign$1(area(_,T,i)),O=sign$1(area(_,T,s));return S!==C&&P!==O||(!(0!==S||!onSegment(i,_,s))||(!(0!==C||!onSegment(i,T,s))||(!(0!==P||!onSegment(_,i,T))||!(0!==O||!onSegment(_,s,T)))))}function onSegment(i,s,_){return s.x<=Math.max(i.x,_.x)&&s.x>=Math.min(i.x,_.x)&&s.y<=Math.max(i.y,_.y)&&s.y>=Math.min(i.y,_.y)}function sign$1(i){return i>0?1:i<0?-1:0}function locallyInside(i,s){return area(i.prev,i,i.next)<0?area(i,s,i.next)>=0&&area(i,i.prev,s)>=0:area(i,s,i.prev)<0||area(i,i.next,s)<0}function splitPolygon(i,s){var _=new Node(i.i,i.x,i.y),T=new Node(s.i,s.x,s.y),S=i.next,C=s.prev;return i.next=s,s.prev=i,_.next=S,S.prev=_,T.next=_,_.prev=T,C.next=T,T.prev=C,T}function insertNode(i,s,_,T){var S=new Node(i,s,_);return T?(S.next=T.next,S.prev=T,T.next.prev=S,T.next=S):(S.prev=S,S.next=S),S}function removeNode(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function Node(i,s,_){this.i=i,this.x=s,this.y=_,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(i,s,_,T){for(var S=0,C=s,P=_-T;C<_;C+=T)S+=(i[P]-i[C])*(i[C+1]+i[P+1]),P=C;return S}Bs.exports=earcut,Bs.exports.default=earcut,earcut.deviation=function(i,s,_,T){var S=s&&s.length,C=S?s[0]*_:i.length,P=Math.abs(signedArea(i,0,C,_));if(S)for(var O=0,M=s.length;O<M;O++){var R=s[O]*_,D=O<M-1?s[O+1]*_:i.length;P-=Math.abs(signedArea(i,R,D,_))}var j=0;for(O=0;O<T.length;O+=3){var $=T[O]*_,U=T[O+1]*_,V=T[O+2]*_;j+=Math.abs((i[$]-i[V])*(i[U+1]-i[$+1])-(i[$]-i[U])*(i[V+1]-i[$+1]))}return 0===P&&0===j?0:Math.abs((j-P)/P)},earcut.flatten=function(i){for(var s=i[0][0].length,_={vertices:[],holes:[],dimensions:s},T=0,S=0;S<i.length;S++){for(var C=0;C<i[S].length;C++)for(var P=0;P<s;P++)_.vertices.push(i[S][C][P]);S>0&&(T+=i[S-1].length,_.holes.push(T))}return _};var $s=Bs.exports,Us={},Fs={exports:{}};
/*! https://mths.be/punycode v1.3.2 by @mathias */
!function(i,s){!function(_){var T=s&&!s.nodeType&&s,S=i&&!i.nodeType&&i,C="object"==typeof ie.N&&ie.N;C.global!==C&&C.window!==C&&C.self!==C||(_=C);var P,O,M=2147483647,R=36,D=/^xn--/,j=/[^\x20-\x7E]/,$=/[\x2E\u3002\uFF0E\uFF61]/g,U={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},V=Math.floor,Z=String.fromCharCode;function error(i){throw RangeError(U[i])}function map2(i,s){for(var _=i.length,T=[];_--;)T[_]=s(i[_]);return T}function mapDomain(i,s){var _=i.split("@"),T="";return _.length>1&&(T=_[0]+"@",i=_[1]),T+map2((i=i.replace($,".")).split("."),s).join(".")}function ucs2decode(i){for(var s,_,T=[],S=0,C=i.length;S<C;)(s=i.charCodeAt(S++))>=55296&&s<=56319&&S<C?56320==(64512&(_=i.charCodeAt(S++)))?T.push(((1023&s)<<10)+(1023&_)+65536):(T.push(s),S--):T.push(s);return T}function ucs2encode(i){return map2(i,(function(i){var s="";return i>65535&&(s+=Z((i-=65536)>>>10&1023|55296),i=56320|1023&i),s+=Z(i)})).join("")}function digitToBasic(i,s){return i+22+75*(i<26)-((0!=s)<<5)}function adapt(i,s,_){var T=0;for(i=_?V(i/700):i>>1,i+=V(i/s);i>455;T+=R)i=V(i/35);return V(T+36*i/(i+38))}function decode2(i){var s,_,T,S,C,P,O,D,j,$,U,Z=[],Y=i.length,X=0,Q=128,ee=72;for((_=i.lastIndexOf("-"))<0&&(_=0),T=0;T<_;++T)i.charCodeAt(T)>=128&&error("not-basic"),Z.push(i.charCodeAt(T));for(S=_>0?_+1:0;S<Y;){for(C=X,P=1,O=R;S>=Y&&error("invalid-input"),((D=(U=i.charCodeAt(S++))-48<10?U-22:U-65<26?U-65:U-97<26?U-97:R)>=R||D>V((M-X)/P))&&error("overflow"),X+=D*P,!(D<(j=O<=ee?1:O>=ee+26?26:O-ee));O+=R)P>V(M/($=R-j))&&error("overflow"),P*=$;ee=adapt(X-C,s=Z.length+1,0==C),V(X/s)>M-Q&&error("overflow"),Q+=V(X/s),X%=s,Z.splice(X++,0,Q)}return ucs2encode(Z)}function encode2(i){var s,_,T,S,C,P,O,D,j,$,U,Y,X,Q,ee,te=[];for(Y=(i=ucs2decode(i)).length,s=128,_=0,C=72,P=0;P<Y;++P)(U=i[P])<128&&te.push(Z(U));for(T=S=te.length,S&&te.push("-");T<Y;){for(O=M,P=0;P<Y;++P)(U=i[P])>=s&&U<O&&(O=U);for(O-s>V((M-_)/(X=T+1))&&error("overflow"),_+=(O-s)*X,s=O,P=0;P<Y;++P)if((U=i[P])<s&&++_>M&&error("overflow"),U==s){for(D=_,j=R;!(D<($=j<=C?1:j>=C+26?26:j-C));j+=R)ee=D-$,Q=R-$,te.push(Z(digitToBasic($+ee%Q,0))),D=V(ee/Q);te.push(Z(digitToBasic(D,0))),C=adapt(_,X,T==S),_=0,++T}++_,++s}return te.join("")}if(P={version:"1.3.2",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode2,encode:encode2,toASCII:function toASCII(i){return mapDomain(i,(function(i){return j.test(i)?"xn--"+encode2(i):i}))},toUnicode:function toUnicode(i){return mapDomain(i,(function(i){return D.test(i)?decode2(i.slice(4).toLowerCase()):i}))}},T&&S)if(i.exports==T)S.exports=P;else for(O in P)P.hasOwnProperty(O)&&(T[O]=P[O]);else _.punycode=P}(ie.N)}(Fs,Fs.exports);var Hs={};function hasOwnProperty(i,s){return Object.prototype.hasOwnProperty.call(i,s)}var stringifyPrimitive=function(i){switch(typeof i){case"string":return i;case"boolean":return i?"true":"false";case"number":return isFinite(i)?i:"";default:return""}};Hs.decode=Hs.parse=function(i,s,_,T){s=s||"&",_=_||"=";var S={};if("string"!=typeof i||0===i.length)return S;var C=/\+/g;i=i.split(s);var P=1e3;T&&"number"==typeof T.maxKeys&&(P=T.maxKeys);var O=i.length;P>0&&O>P&&(O=P);for(var M=0;M<O;++M){var R,D,j,$,U=i[M].replace(C,"%20"),V=U.indexOf(_);V>=0?(R=U.substr(0,V),D=U.substr(V+1)):(R=U,D=""),j=decodeURIComponent(R),$=decodeURIComponent(D),hasOwnProperty(S,j)?Array.isArray(S[j])?S[j].push($):S[j]=[S[j],$]:S[j]=$}return S},Hs.encode=Hs.stringify=function(i,s,_,T){return s=s||"&",_=_||"=",null===i&&(i=void 0),"object"==typeof i?Object.keys(i).map((function(T){var S=encodeURIComponent(stringifyPrimitive(T))+_;return Array.isArray(i[T])?i[T].map((function(i){return S+encodeURIComponent(stringifyPrimitive(i))})).join(s):S+encodeURIComponent(stringifyPrimitive(i[T]))})).join(s):T?encodeURIComponent(stringifyPrimitive(T))+_+encodeURIComponent(stringifyPrimitive(i)):""};var qs=Fs.exports,Vs={isString:function(i){return"string"==typeof i},isObject:function(i){return"object"==typeof i&&null!==i},isNull:function(i){return null===i},isNullOrUndefined:function(i){return null==i}},Gs=Us.parse=urlParse;function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}Us.resolve=function urlResolve(i,s){return urlParse(i,!1,!0).resolve(s)},Us.resolveObject=function urlResolveObject(i,s){return i?urlParse(i,!1,!0).resolveObject(s):s},Us.format=function urlFormat(i){Vs.isString(i)&&(i=urlParse(i));return i instanceof Url?i.format():Url.prototype.format.call(i)},Us.Url=Url;var Zs,Ws,Ks,Ys,Xs,Qs,Js,eo,to,no,ro,io,ao,so,oo,lo,co,uo,ho,po,mo,fo,vo,bo,yo,_o,wo,ko,To=/^([a-z0-9.+-]+:)/i,So=/:[0-9]*$/,Co=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,xo=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),Eo=["'"].concat(xo),Po=["%","/","?",";","#"].concat(Eo),Ao=["/","?","#"],Oo=/^[+a-z0-9A-Z_-]{0,63}$/,Mo=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,zo={javascript:!0,"javascript:":!0},Io={javascript:!0,"javascript:":!0},Lo={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Ro=Hs;function urlParse(i,s,_){if(i&&Vs.isObject(i)&&i instanceof Url)return i;var T=new Url;return T.parse(i,s,_),T}Url.prototype.parse=function(i,s,_){if(!Vs.isString(i))throw new TypeError("Parameter 'url' must be a string, not "+typeof i);var T=i.indexOf("?"),S=-1!==T&&T<i.indexOf("#")?"?":"#",C=i.split(S);C[0]=C[0].replace(/\\/g,"/");var P=i=C.join(S);if(P=P.trim(),!_&&1===i.split("#").length){var O=Co.exec(P);if(O)return this.path=P,this.href=P,this.pathname=O[1],O[2]?(this.search=O[2],this.query=s?Ro.parse(this.search.substr(1)):this.search.substr(1)):s&&(this.search="",this.query={}),this}var M=To.exec(P);if(M){var R=(M=M[0]).toLowerCase();this.protocol=R,P=P.substr(M.length)}if(_||M||P.match(/^\/\/[^@\/]+@[^@\/]+/)){var D="//"===P.substr(0,2);!D||M&&Io[M]||(P=P.substr(2),this.slashes=!0)}if(!Io[M]&&(D||M&&!Lo[M])){for(var j,$,U=-1,V=0;V<Ao.length;V++){-1!==(Z=P.indexOf(Ao[V]))&&(-1===U||Z<U)&&(U=Z)}-1!==($=-1===U?P.lastIndexOf("@"):P.lastIndexOf("@",U))&&(j=P.slice(0,$),P=P.slice($+1),this.auth=decodeURIComponent(j)),U=-1;for(V=0;V<Po.length;V++){var Z;-1!==(Z=P.indexOf(Po[V]))&&(-1===U||Z<U)&&(U=Z)}-1===U&&(U=P.length),this.host=P.slice(0,U),P=P.slice(U),this.parseHost(),this.hostname=this.hostname||"";var Y="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!Y)for(var X=this.hostname.split(/\./),Q=(V=0,X.length);V<Q;V++){var ee=X[V];if(ee&&!ee.match(Oo)){for(var te="",ne=0,re=ee.length;ne<re;ne++)ee.charCodeAt(ne)>127?te+="x":te+=ee[ne];if(!te.match(Oo)){var ie=X.slice(0,V),ae=X.slice(V+1),se=ee.match(Mo);se&&(ie.push(se[1]),ae.unshift(se[2])),ae.length&&(P="/"+ae.join(".")+P),this.hostname=ie.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),Y||(this.hostname=qs.toASCII(this.hostname));var oe=this.port?":"+this.port:"",le=this.hostname||"";this.host=le+oe,this.href+=this.host,Y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==P[0]&&(P="/"+P))}if(!zo[R])for(V=0,Q=Eo.length;V<Q;V++){var ce=Eo[V];if(-1!==P.indexOf(ce)){var ue=encodeURIComponent(ce);ue===ce&&(ue=escape(ce)),P=P.split(ce).join(ue)}}var de=P.indexOf("#");-1!==de&&(this.hash=P.substr(de),P=P.slice(0,de));var he=P.indexOf("?");if(-1!==he?(this.search=P.substr(he),this.query=P.substr(he+1),s&&(this.query=Ro.parse(this.query)),P=P.slice(0,he)):s&&(this.search="",this.query={}),P&&(this.pathname=P),Lo[R]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){oe=this.pathname||"";var pe=this.search||"";this.path=oe+pe}return this.href=this.format(),this},Url.prototype.format=function(){var i=this.auth||"";i&&(i=(i=encodeURIComponent(i)).replace(/%3A/i,":"),i+="@");var s=this.protocol||"",_=this.pathname||"",T=this.hash||"",S=!1,C="";this.host?S=i+this.host:this.hostname&&(S=i+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(S+=":"+this.port)),this.query&&Vs.isObject(this.query)&&Object.keys(this.query).length&&(C=Ro.stringify(this.query));var P=this.search||C&&"?"+C||"";return s&&":"!==s.substr(-1)&&(s+=":"),this.slashes||(!s||Lo[s])&&!1!==S?(S="//"+(S||""),_&&"/"!==_.charAt(0)&&(_="/"+_)):S||(S=""),T&&"#"!==T.charAt(0)&&(T="#"+T),P&&"?"!==P.charAt(0)&&(P="?"+P),s+S+(_=_.replace(/[?#]/g,(function(i){return encodeURIComponent(i)})))+(P=P.replace("#","%23"))+T},Url.prototype.resolve=function(i){return this.resolveObject(urlParse(i,!1,!0)).format()},Url.prototype.resolveObject=function(i){if(Vs.isString(i)){var s=new Url;s.parse(i,!1,!0),i=s}for(var _=new Url,T=Object.keys(this),S=0;S<T.length;S++){var C=T[S];_[C]=this[C]}if(_.hash=i.hash,""===i.href)return _.href=_.format(),_;if(i.slashes&&!i.protocol){for(var P=Object.keys(i),O=0;O<P.length;O++){var M=P[O];"protocol"!==M&&(_[M]=i[M])}return Lo[_.protocol]&&_.hostname&&!_.pathname&&(_.path=_.pathname="/"),_.href=_.format(),_}if(i.protocol&&i.protocol!==_.protocol){if(!Lo[i.protocol]){for(var R=Object.keys(i),D=0;D<R.length;D++){var j=R[D];_[j]=i[j]}return _.href=_.format(),_}if(_.protocol=i.protocol,i.host||Io[i.protocol])_.pathname=i.pathname;else{for(var $=(i.pathname||"").split("/");$.length&&!(i.host=$.shift()););i.host||(i.host=""),i.hostname||(i.hostname=""),""!==$[0]&&$.unshift(""),$.length<2&&$.unshift(""),_.pathname=$.join("/")}if(_.search=i.search,_.query=i.query,_.host=i.host||"",_.auth=i.auth,_.hostname=i.hostname||i.host,_.port=i.port,_.pathname||_.search){var U=_.pathname||"",V=_.search||"";_.path=U+V}return _.slashes=_.slashes||i.slashes,_.href=_.format(),_}var Z=_.pathname&&"/"===_.pathname.charAt(0),Y=i.host||i.pathname&&"/"===i.pathname.charAt(0),X=Y||Z||_.host&&i.pathname,Q=X,ee=_.pathname&&_.pathname.split("/")||[],te=($=i.pathname&&i.pathname.split("/")||[],_.protocol&&!Lo[_.protocol]);if(te&&(_.hostname="",_.port=null,_.host&&(""===ee[0]?ee[0]=_.host:ee.unshift(_.host)),_.host="",i.protocol&&(i.hostname=null,i.port=null,i.host&&(""===$[0]?$[0]=i.host:$.unshift(i.host)),i.host=null),X=X&&(""===$[0]||""===ee[0])),Y)_.host=i.host||""===i.host?i.host:_.host,_.hostname=i.hostname||""===i.hostname?i.hostname:_.hostname,_.search=i.search,_.query=i.query,ee=$;else if($.length)ee||(ee=[]),ee.pop(),ee=ee.concat($),_.search=i.search,_.query=i.query;else if(!Vs.isNullOrUndefined(i.search)){if(te)_.hostname=_.host=ee.shift(),(se=!!(_.host&&_.host.indexOf("@")>0)&&_.host.split("@"))&&(_.auth=se.shift(),_.host=_.hostname=se.shift());return _.search=i.search,_.query=i.query,Vs.isNull(_.pathname)&&Vs.isNull(_.search)||(_.path=(_.pathname?_.pathname:"")+(_.search?_.search:"")),_.href=_.format(),_}if(!ee.length)return _.pathname=null,_.search?_.path="/"+_.search:_.path=null,_.href=_.format(),_;for(var ne=ee.slice(-1)[0],re=(_.host||i.host||ee.length>1)&&("."===ne||".."===ne)||""===ne,ie=0,ae=ee.length;ae>=0;ae--)"."===(ne=ee[ae])?ee.splice(ae,1):".."===ne?(ee.splice(ae,1),ie++):ie&&(ee.splice(ae,1),ie--);if(!X&&!Q)for(;ie--;ie)ee.unshift("..");!X||""===ee[0]||ee[0]&&"/"===ee[0].charAt(0)||ee.unshift(""),re&&"/"!==ee.join("/").substr(-1)&&ee.push("");var se,oe=""===ee[0]||ee[0]&&"/"===ee[0].charAt(0);te&&(_.hostname=_.host=oe?"":ee.length?ee.shift():"",(se=!!(_.host&&_.host.indexOf("@")>0)&&_.host.split("@"))&&(_.auth=se.shift(),_.host=_.hostname=se.shift()));return(X=X||_.host&&ee.length)&&!oe&&ee.unshift(""),ee.length?_.pathname=ee.join("/"):(_.pathname=null,_.path=null),Vs.isNull(_.pathname)&&Vs.isNull(_.search)||(_.path=(_.pathname?_.pathname:"")+(_.search?_.search:"")),_.auth=i.auth||_.auth,_.slashes=_.slashes||i.slashes,_.href=_.format(),_},Url.prototype.parseHost=function(){var i=this.host,s=So.exec(i);s&&(":"!==(s=s[0])&&(this.port=s.substr(1)),i=i.substr(0,i.length-s.length)),i&&(this.hostname=i)},(Ws=Zs||(Zs={}))[Ws.WEBGL_LEGACY=0]="WEBGL_LEGACY",Ws[Ws.WEBGL=1]="WEBGL",Ws[Ws.WEBGL2=2]="WEBGL2",(Ys=Ks||(Ks={}))[Ys.UNKNOWN=0]="UNKNOWN",Ys[Ys.WEBGL=1]="WEBGL",Ys[Ys.CANVAS=2]="CANVAS",(Qs=Xs||(Xs={}))[Qs.NORMAL=0]="NORMAL",Qs[Qs.ADD=1]="ADD",Qs[Qs.MULTIPLY=2]="MULTIPLY",Qs[Qs.SCREEN=3]="SCREEN",Qs[Qs.OVERLAY=4]="OVERLAY",Qs[Qs.DARKEN=5]="DARKEN",Qs[Qs.LIGHTEN=6]="LIGHTEN",Qs[Qs.COLOR_DODGE=7]="COLOR_DODGE",Qs[Qs.COLOR_BURN=8]="COLOR_BURN",Qs[Qs.HARD_LIGHT=9]="HARD_LIGHT",Qs[Qs.SOFT_LIGHT=10]="SOFT_LIGHT",Qs[Qs.DIFFERENCE=11]="DIFFERENCE",Qs[Qs.EXCLUSION=12]="EXCLUSION",Qs[Qs.HUE=13]="HUE",Qs[Qs.SATURATION=14]="SATURATION",Qs[Qs.COLOR=15]="COLOR",Qs[Qs.LUMINOSITY=16]="LUMINOSITY",Qs[Qs.NORMAL_NPM=17]="NORMAL_NPM",Qs[Qs.ADD_NPM=18]="ADD_NPM",Qs[Qs.SCREEN_NPM=19]="SCREEN_NPM",Qs[Qs.NONE=20]="NONE",Qs[Qs.SRC_OVER=0]="SRC_OVER",Qs[Qs.SRC_IN=21]="SRC_IN",Qs[Qs.SRC_OUT=22]="SRC_OUT",Qs[Qs.SRC_ATOP=23]="SRC_ATOP",Qs[Qs.DST_OVER=24]="DST_OVER",Qs[Qs.DST_IN=25]="DST_IN",Qs[Qs.DST_OUT=26]="DST_OUT",Qs[Qs.DST_ATOP=27]="DST_ATOP",Qs[Qs.ERASE=26]="ERASE",Qs[Qs.SUBTRACT=28]="SUBTRACT",Qs[Qs.XOR=29]="XOR",(eo=Js||(Js={}))[eo.POINTS=0]="POINTS",eo[eo.LINES=1]="LINES",eo[eo.LINE_LOOP=2]="LINE_LOOP",eo[eo.LINE_STRIP=3]="LINE_STRIP",eo[eo.TRIANGLES=4]="TRIANGLES",eo[eo.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",eo[eo.TRIANGLE_FAN=6]="TRIANGLE_FAN",(no=to||(to={}))[no.RGBA=6408]="RGBA",no[no.RGB=6407]="RGB",no[no.ALPHA=6406]="ALPHA",no[no.LUMINANCE=6409]="LUMINANCE",no[no.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",no[no.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",no[no.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(io=ro||(ro={}))[io.TEXTURE_2D=3553]="TEXTURE_2D",io[io.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",io[io.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",io[io.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",io[io.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",io[io.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",io[io.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",io[io.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",io[io.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(so=ao||(ao={}))[so.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",so[so.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",so[so.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",so[so.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",so[so.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",so[so.FLOAT=5126]="FLOAT",so[so.HALF_FLOAT=36193]="HALF_FLOAT",(lo=oo||(oo={}))[lo.NEAREST=0]="NEAREST",lo[lo.LINEAR=1]="LINEAR",(uo=co||(co={}))[uo.CLAMP=33071]="CLAMP",uo[uo.REPEAT=10497]="REPEAT",uo[uo.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(po=ho||(ho={}))[po.OFF=0]="OFF",po[po.POW2=1]="POW2",po[po.ON=2]="ON",(fo=mo||(mo={}))[fo.NPM=0]="NPM",fo[fo.UNPACK=1]="UNPACK",fo[fo.PMA=2]="PMA",fo[fo.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",fo[fo.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",fo[fo.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(bo=vo||(vo={}))[bo.AUTO=0]="AUTO",bo[bo.MANUAL=1]="MANUAL",(_o=yo||(yo={})).LOW="lowp",_o.MEDIUM="mediump",_o.HIGH="highp",(ko=wo||(wo={}))[ko.NONE=0]="NONE",ko[ko.SCISSOR=1]="SCISSOR",ko[ko.STENCIL=2]="STENCIL",ko[ko.SPRITE=3]="SPRITE",
/*!
 * @pixi/utils - v5.2.1
 * Compiled Tue, 28 Jan 2020 23:33:11 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
Ns.RETINA_PREFIX=/@([0-9\.]+)x/,Ns.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;var No,Do=!1;function hex2rgb(i,s){return(s=s||[])[0]=(i>>16&255)/255,s[1]=(i>>8&255)/255,s[2]=(255&i)/255,s}function hex2string(i){var s=i.toString(16);return"#"+(s="000000".substr(0,6-s.length)+s)}function string2hex(i){return"string"==typeof i&&"#"===i[0]&&(i=i.substr(1)),parseInt(i,16)}function rgb2hex(i){return(255*i[0]<<16)+(255*i[1]<<8)+(255*i[2]|0)}var jo=function mapPremultipliedBlendModes(){for(var i=[],s=[],_=0;_<32;_++)i[_]=_,s[_]=_;i[Xs.NORMAL_NPM]=Xs.NORMAL,i[Xs.ADD_NPM]=Xs.ADD,i[Xs.SCREEN_NPM]=Xs.SCREEN,s[Xs.NORMAL]=Xs.NORMAL_NPM,s[Xs.ADD]=Xs.ADD_NPM,s[Xs.SCREEN]=Xs.SCREEN_NPM;var T=[];return T.push(s),T.push(i),T}();function correctBlendMode(i,s){return jo[s?1:0][i]}function premultiplyRgba(i,s,_,T){return _=_||new Float32Array(4),T||void 0===T?(_[0]=i[0]*s,_[1]=i[1]*s,_[2]=i[2]*s):(_[0]=i[0],_[1]=i[1],_[2]=i[2]),_[3]=s,_}function premultiplyTint(i,s){if(1===s)return(255*s<<24)+i;if(0===s)return 0;var _=i>>16&255,T=i>>8&255,S=255&i;return(255*s<<24)+((_=_*s+.5|0)<<16)+((T=T*s+.5|0)<<8)+(S=S*s+.5|0)}function premultiplyTintToRgba(i,s,_,T){return(_=_||new Float32Array(4))[0]=(i>>16&255)/255,_[1]=(i>>8&255)/255,_[2]=(255&i)/255,(T||void 0===T)&&(_[0]*=s,_[1]*=s,_[2]*=s),_[3]=s,_}function createIndicesForQuads(i,s){void 0===s&&(s=null);var _=6*i;if((s=s||new Uint16Array(_)).length!==_)throw new Error("Out buffer length is incorrect, got "+s.length+" and expected "+_);for(var T=0,S=0;T<_;T+=6,S+=4)s[T+0]=S+0,s[T+1]=S+1,s[T+2]=S+2,s[T+3]=S+0,s[T+4]=S+2,s[T+5]=S+3;return s}function nextPow2(i){return i+=0===i?1:0,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,(i|=i>>>16)+1}function isPow2(i){return!(i&i-1||!i)}function log2(i){var s=(i>65535?1:0)<<4,_=((i>>>=s)>255?1:0)<<3;return s|=_,s|=_=((i>>>=_)>15?1:0)<<2,(s|=_=((i>>>=_)>3?1:0)<<1)|(i>>>=_)>>1}function removeItems(i,s,_){var T,S=i.length;if(!(s>=S||0===_)){var C=S-(_=s+_>S?S-s:_);for(T=s;T<C;++T)i[T]=i[T+_];i.length=C}}function sign(i){return 0===i?0:i<0?-1:1}var Bo=0;function uid(){return++Bo}var $o={};function deprecation(i,s,_){if(void 0===_&&(_=3),!$o[s]){var T=(new Error).stack;void 0===T?console.warn("PixiJS Deprecation Warning: ",s+"\nDeprecated since v"+i):(T=T.split("\n").splice(_).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",s+"\nDeprecated since v"+i),console.warn(T),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",s+"\nDeprecated since v"+i),console.warn(T))),$o[s]=!0}}var Uo,Fo={},Ho=Object.create(null),qo=Object.create(null),Vo=function(){function CanvasRenderTarget2(i,s,_){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=_||Ns.RESOLUTION,this.resize(i,s)}return CanvasRenderTarget2.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},CanvasRenderTarget2.prototype.resize=function(i,s){this.canvas.width=i*this.resolution,this.canvas.height=s*this.resolution},CanvasRenderTarget2.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(CanvasRenderTarget2.prototype,"width",{get:function(){return this.canvas.width},set:function(i){this.canvas.width=i},enumerable:!0,configurable:!0}),Object.defineProperty(CanvasRenderTarget2.prototype,"height",{get:function(){return this.canvas.height},set:function(i){this.canvas.height=i},enumerable:!0,configurable:!0}),CanvasRenderTarget2}();function trimCanvas(i){var s,_,T,S=i.width,C=i.height,P=i.getContext("2d"),O=P.getImageData(0,0,S,C).data,M=O.length,R={top:null,left:null,right:null,bottom:null},D=null;for(s=0;s<M;s+=4)0!==O[s+3]&&(_=s/4%S,T=~~(s/4/S),null===R.top&&(R.top=T),(null===R.left||_<R.left)&&(R.left=_),(null===R.right||R.right<_)&&(R.right=_+1),(null===R.bottom||R.bottom<T)&&(R.bottom=T));return null!==R.top&&(S=R.right-R.left,C=R.bottom-R.top+1,D=P.getImageData(R.left,R.top,S,C)),{height:C,width:S,data:D}}function getResolutionOfUrl(i,s){var _=Ns.RETINA_PREFIX.exec(i);return _?parseFloat(_[1]):void 0!==s?s:1}
/*!
 * @pixi/math - v5.2.1
 * Compiled Tue, 28 Jan 2020 23:33:11 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Go,Zo,Wo=function(){function Point2(i,s){void 0===i&&(i=0),void 0===s&&(s=0),this.x=i,this.y=s}return Point2.prototype.clone=function(){return new Point2(this.x,this.y)},Point2.prototype.copyFrom=function(i){return this.set(i.x,i.y),this},Point2.prototype.copyTo=function(i){return i.set(this.x,this.y),i},Point2.prototype.equals=function(i){return i.x===this.x&&i.y===this.y},Point2.prototype.set=function(i,s){return void 0===i&&(i=0),void 0===s&&(s=i),this.x=i,this.y=s,this},Point2}(),Ko=function(){function ObservablePoint2(i,s,_,T){void 0===_&&(_=0),void 0===T&&(T=0),this._x=_,this._y=T,this.cb=i,this.scope=s}return ObservablePoint2.prototype.clone=function(i,s){return void 0===i&&(i=this.cb),void 0===s&&(s=this.scope),new ObservablePoint2(i,s,this._x,this._y)},ObservablePoint2.prototype.set=function(i,s){return void 0===i&&(i=0),void 0===s&&(s=i),this._x===i&&this._y===s||(this._x=i,this._y=s,this.cb.call(this.scope)),this},ObservablePoint2.prototype.copyFrom=function(i){return this._x===i.x&&this._y===i.y||(this._x=i.x,this._y=i.y,this.cb.call(this.scope)),this},ObservablePoint2.prototype.copyTo=function(i){return i.set(this._x,this._y),i},ObservablePoint2.prototype.equals=function(i){return i.x===this._x&&i.y===this._y},Object.defineProperty(ObservablePoint2.prototype,"x",{get:function(){return this._x},set:function(i){this._x!==i&&(this._x=i,this.cb.call(this.scope))},enumerable:!0,configurable:!0}),Object.defineProperty(ObservablePoint2.prototype,"y",{get:function(){return this._y},set:function(i){this._y!==i&&(this._y=i,this.cb.call(this.scope))},enumerable:!0,configurable:!0}),ObservablePoint2}(),Yo=2*Math.PI,Xo=180/Math.PI,Qo=Math.PI/180;(Zo=Go||(Go={}))[Zo.POLY=0]="POLY",Zo[Zo.RECT=1]="RECT",Zo[Zo.CIRC=2]="CIRC",Zo[Zo.ELIP=3]="ELIP",Zo[Zo.RREC=4]="RREC";var Jo=function(){function Matrix2(i,s,_,T,S,C){void 0===i&&(i=1),void 0===s&&(s=0),void 0===_&&(_=0),void 0===T&&(T=1),void 0===S&&(S=0),void 0===C&&(C=0),this.array=null,this.a=i,this.b=s,this.c=_,this.d=T,this.tx=S,this.ty=C}return Matrix2.prototype.fromArray=function(i){this.a=i[0],this.b=i[1],this.c=i[3],this.d=i[4],this.tx=i[2],this.ty=i[5]},Matrix2.prototype.set=function(i,s,_,T,S,C){return this.a=i,this.b=s,this.c=_,this.d=T,this.tx=S,this.ty=C,this},Matrix2.prototype.toArray=function(i,s){this.array||(this.array=new Float32Array(9));var _=s||this.array;return i?(_[0]=this.a,_[1]=this.b,_[2]=0,_[3]=this.c,_[4]=this.d,_[5]=0,_[6]=this.tx,_[7]=this.ty,_[8]=1):(_[0]=this.a,_[1]=this.c,_[2]=this.tx,_[3]=this.b,_[4]=this.d,_[5]=this.ty,_[6]=0,_[7]=0,_[8]=1),_},Matrix2.prototype.apply=function(i,s){s=s||new Wo;var _=i.x,T=i.y;return s.x=this.a*_+this.c*T+this.tx,s.y=this.b*_+this.d*T+this.ty,s},Matrix2.prototype.applyInverse=function(i,s){s=s||new Wo;var _=1/(this.a*this.d+this.c*-this.b),T=i.x,S=i.y;return s.x=this.d*_*T+-this.c*_*S+(this.ty*this.c-this.tx*this.d)*_,s.y=this.a*_*S+-this.b*_*T+(-this.ty*this.a+this.tx*this.b)*_,s},Matrix2.prototype.translate=function(i,s){return this.tx+=i,this.ty+=s,this},Matrix2.prototype.scale=function(i,s){return this.a*=i,this.d*=s,this.c*=i,this.b*=s,this.tx*=i,this.ty*=s,this},Matrix2.prototype.rotate=function(i){var s=Math.cos(i),_=Math.sin(i),T=this.a,S=this.c,C=this.tx;return this.a=T*s-this.b*_,this.b=T*_+this.b*s,this.c=S*s-this.d*_,this.d=S*_+this.d*s,this.tx=C*s-this.ty*_,this.ty=C*_+this.ty*s,this},Matrix2.prototype.append=function(i){var s=this.a,_=this.b,T=this.c,S=this.d;return this.a=i.a*s+i.b*T,this.b=i.a*_+i.b*S,this.c=i.c*s+i.d*T,this.d=i.c*_+i.d*S,this.tx=i.tx*s+i.ty*T+this.tx,this.ty=i.tx*_+i.ty*S+this.ty,this},Matrix2.prototype.setTransform=function(i,s,_,T,S,C,P,O,M){return this.a=Math.cos(P+M)*S,this.b=Math.sin(P+M)*S,this.c=-Math.sin(P-O)*C,this.d=Math.cos(P-O)*C,this.tx=i-(_*this.a+T*this.c),this.ty=s-(_*this.b+T*this.d),this},Matrix2.prototype.prepend=function(i){var s=this.tx;if(1!==i.a||0!==i.b||0!==i.c||1!==i.d){var _=this.a,T=this.c;this.a=_*i.a+this.b*i.c,this.b=_*i.b+this.b*i.d,this.c=T*i.a+this.d*i.c,this.d=T*i.b+this.d*i.d}return this.tx=s*i.a+this.ty*i.c+i.tx,this.ty=s*i.b+this.ty*i.d+i.ty,this},Matrix2.prototype.decompose=function(i){var s=this.a,_=this.b,T=this.c,S=this.d,C=-Math.atan2(-T,S),P=Math.atan2(_,s),O=Math.abs(C+P);return O<1e-5||Math.abs(Yo-O)<1e-5?(i.rotation=P,i.skew.x=i.skew.y=0):(i.rotation=0,i.skew.x=C,i.skew.y=P),i.scale.x=Math.sqrt(s*s+_*_),i.scale.y=Math.sqrt(T*T+S*S),i.position.x=this.tx,i.position.y=this.ty,i},Matrix2.prototype.invert=function(){var i=this.a,s=this.b,_=this.c,T=this.d,S=this.tx,C=i*T-s*_;return this.a=T/C,this.b=-s/C,this.c=-_/C,this.d=i/C,this.tx=(_*this.ty-T*S)/C,this.ty=-(i*this.ty-s*S)/C,this},Matrix2.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},Matrix2.prototype.clone=function(){var i=new Matrix2;return i.a=this.a,i.b=this.b,i.c=this.c,i.d=this.d,i.tx=this.tx,i.ty=this.ty,i},Matrix2.prototype.copyTo=function(i){return i.a=this.a,i.b=this.b,i.c=this.c,i.d=this.d,i.tx=this.tx,i.ty=this.ty,i},Matrix2.prototype.copyFrom=function(i){return this.a=i.a,this.b=i.b,this.c=i.c,this.d=i.d,this.tx=i.tx,this.ty=i.ty,this},Object.defineProperty(Matrix2,"IDENTITY",{get:function(){return new Matrix2},enumerable:!0,configurable:!0}),Object.defineProperty(Matrix2,"TEMP_MATRIX",{get:function(){return new Matrix2},enumerable:!0,configurable:!0}),Matrix2}(),tl=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],nl=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],rl=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],il=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],al=[],sl=[],ol=Math.sign;!function init(){for(var i=0;i<16;i++){var s=[];al.push(s);for(var _=0;_<16;_++)for(var T=ol(tl[i]*tl[_]+rl[i]*nl[_]),S=ol(nl[i]*tl[_]+il[i]*nl[_]),C=ol(tl[i]*rl[_]+rl[i]*il[_]),P=ol(nl[i]*rl[_]+il[i]*il[_]),O=0;O<16;O++)if(tl[O]===T&&nl[O]===S&&rl[O]===C&&il[O]===P){s.push(O);break}}for(i=0;i<16;i++){var M=new Jo;M.set(tl[i],nl[i],rl[i],il[i],0,0),sl.push(M)}}();var ll={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(i){return tl[i]},uY:function(i){return nl[i]},vX:function(i){return rl[i]},vY:function(i){return il[i]},inv:function(i){return 8&i?15&i:7&-i},add:function(i,s){return al[i][s]},sub:function(i,s){return al[i][ll.inv(s)]},rotate180:function(i){return 4^i},isVertical:function(i){return 2==(3&i)},byDirection:function(i,s){return 2*Math.abs(i)<=Math.abs(s)?s>=0?ll.S:ll.N:2*Math.abs(s)<=Math.abs(i)?i>0?ll.E:ll.W:s>0?i>0?ll.SE:ll.SW:i>0?ll.NE:ll.NW},matrixAppendRotationInv:function(i,s,_,T){void 0===_&&(_=0),void 0===T&&(T=0);var S=sl[ll.inv(s)];S.tx=_,S.ty=T,i.append(S)}},cl=function(){function Transform2(){this.worldTransform=new Jo,this.localTransform=new Jo,this.position=new Ko(this.onChange,this,0,0),this.scale=new Ko(this.onChange,this,1,1),this.pivot=new Ko(this.onChange,this,0,0),this.skew=new Ko(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return Transform2.prototype.onChange=function(){this._localID++},Transform2.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},Transform2.prototype.updateLocalTransform=function(){var i=this.localTransform;this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1)},Transform2.prototype.updateTransform=function(i){var s=this.localTransform;if(this._localID!==this._currentLocalID&&(s.a=this._cx*this.scale.x,s.b=this._sx*this.scale.x,s.c=this._cy*this.scale.y,s.d=this._sy*this.scale.y,s.tx=this.position.x-(this.pivot.x*s.a+this.pivot.y*s.c),s.ty=this.position.y-(this.pivot.x*s.b+this.pivot.y*s.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==i._worldID){var _=i.worldTransform,T=this.worldTransform;T.a=s.a*_.a+s.b*_.c,T.b=s.a*_.b+s.b*_.d,T.c=s.c*_.a+s.d*_.c,T.d=s.c*_.b+s.d*_.d,T.tx=s.tx*_.a+s.ty*_.c+_.tx,T.ty=s.tx*_.b+s.ty*_.d+_.ty,this._parentID=i._worldID,this._worldID++}},Transform2.prototype.setFromMatrix=function(i){i.decompose(this),this._localID++},Object.defineProperty(Transform2.prototype,"rotation",{get:function(){return this._rotation},set:function(i){this._rotation!==i&&(this._rotation=i,this.updateSkew())},enumerable:!0,configurable:!0}),Transform2.IDENTITY=new Transform2,Transform2}(),ul=function(){function Rectangle2(i,s,_,T){void 0===i&&(i=0),void 0===s&&(s=0),void 0===_&&(_=0),void 0===T&&(T=0),this.x=Number(i),this.y=Number(s),this.width=Number(_),this.height=Number(T),this.type=Go.RECT}return Object.defineProperty(Rectangle2.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(Rectangle2.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(Rectangle2.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(Rectangle2.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(Rectangle2,"EMPTY",{get:function(){return new Rectangle2(0,0,0,0)},enumerable:!0,configurable:!0}),Rectangle2.prototype.clone=function(){return new Rectangle2(this.x,this.y,this.width,this.height)},Rectangle2.prototype.copyFrom=function(i){return this.x=i.x,this.y=i.y,this.width=i.width,this.height=i.height,this},Rectangle2.prototype.copyTo=function(i){return i.x=this.x,i.y=this.y,i.width=this.width,i.height=this.height,i},Rectangle2.prototype.contains=function(i,s){return!(this.width<=0||this.height<=0)&&(i>=this.x&&i<this.x+this.width&&s>=this.y&&s<this.y+this.height)},Rectangle2.prototype.pad=function(i,s){return void 0===i&&(i=0),void 0===s&&(s=i),this.x-=i,this.y-=s,this.width+=2*i,this.height+=2*s,this},Rectangle2.prototype.fit=function(i){var s=Math.max(this.x,i.x),_=Math.min(this.x+this.width,i.x+i.width),T=Math.max(this.y,i.y),S=Math.min(this.y+this.height,i.y+i.height);return this.x=s,this.width=Math.max(_-s,0),this.y=T,this.height=Math.max(S-T,0),this},Rectangle2.prototype.ceil=function(i,s){void 0===i&&(i=1),void 0===s&&(s=.001);var _=Math.ceil((this.x+this.width-s)*i)/i,T=Math.ceil((this.y+this.height-s)*i)/i;return this.x=Math.floor((this.x+s)*i)/i,this.y=Math.floor((this.y+s)*i)/i,this.width=_-this.x,this.height=T-this.y,this},Rectangle2.prototype.enlarge=function(i){var s=Math.min(this.x,i.x),_=Math.max(this.x+this.width,i.x+i.width),T=Math.min(this.y,i.y),S=Math.max(this.y+this.height,i.y+i.height);return this.x=s,this.width=_-s,this.y=T,this.height=S-T,this},Rectangle2}(),dl=function(){function Circle2(i,s,_){void 0===i&&(i=0),void 0===s&&(s=0),void 0===_&&(_=0),this.x=i,this.y=s,this.radius=_,this.type=Go.CIRC}return Circle2.prototype.clone=function(){return new Circle2(this.x,this.y,this.radius)},Circle2.prototype.contains=function(i,s){if(this.radius<=0)return!1;var _=this.radius*this.radius,T=this.x-i,S=this.y-s;return(T*=T)+(S*=S)<=_},Circle2.prototype.getBounds=function(){return new ul(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},Circle2}(),hl=function(){function Ellipse2(i,s,_,T){void 0===i&&(i=0),void 0===s&&(s=0),void 0===_&&(_=0),void 0===T&&(T=0),this.x=i,this.y=s,this.width=_,this.height=T,this.type=Go.ELIP}return Ellipse2.prototype.clone=function(){return new Ellipse2(this.x,this.y,this.width,this.height)},Ellipse2.prototype.contains=function(i,s){if(this.width<=0||this.height<=0)return!1;var _=(i-this.x)/this.width,T=(s-this.y)/this.height;return(_*=_)+(T*=T)<=1},Ellipse2.prototype.getBounds=function(){return new ul(this.x-this.width,this.y-this.height,this.width,this.height)},Ellipse2}(),pl=function(){function Polygon2(){for(var i=arguments,s=[],_=0;_<arguments.length;_++)s[_]=i[_];if(Array.isArray(s[0])&&(s=s[0]),s[0]instanceof Wo){for(var T=[],S=0,C=(s=s).length;S<C;S++)T.push(s[S].x,s[S].y);s=T}this.points=s,this.type=Go.POLY,this.closeStroke=!0}return Polygon2.prototype.clone=function(){var i=new Polygon2(this.points.slice());return i.closeStroke=this.closeStroke,i},Polygon2.prototype.contains=function(i,s){for(var _=!1,T=this.points.length/2,S=0,C=T-1;S<T;C=S++){var P=this.points[2*S],O=this.points[2*S+1],M=this.points[2*C],R=this.points[2*C+1];O>s!=R>s&&i<(s-O)/(R-O)*(M-P)+P&&(_=!_)}return _},Polygon2}(),ml=function(){function RoundedRectangle2(i,s,_,T,S){void 0===i&&(i=0),void 0===s&&(s=0),void 0===_&&(_=0),void 0===T&&(T=0),void 0===S&&(S=20),this.x=i,this.y=s,this.width=_,this.height=T,this.radius=S,this.type=Go.RREC}return RoundedRectangle2.prototype.clone=function(){return new RoundedRectangle2(this.x,this.y,this.width,this.height,this.radius)},RoundedRectangle2.prototype.contains=function(i,s){if(this.width<=0||this.height<=0)return!1;if(i>=this.x&&i<=this.x+this.width&&s>=this.y&&s<=this.y+this.height){if(s>=this.y+this.radius&&s<=this.y+this.height-this.radius||i>=this.x+this.radius&&i<=this.x+this.width-this.radius)return!0;var _=i-(this.x+this.radius),T=s-(this.y+this.radius),S=this.radius*this.radius;if(_*_+T*T<=S)return!0;if((_=i-(this.x+this.width-this.radius))*_+T*T<=S)return!0;if(_*_+(T=s-(this.y+this.height-this.radius))*T<=S)return!0;if((_=i-(this.x+this.radius))*_+T*T<=S)return!0}return!1},RoundedRectangle2}();
/*!
 * @pixi/display - v5.2.1
 * Compiled Tue, 28 Jan 2020 23:33:11 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
Ns.SORTABLE_CHILDREN=!1;var fl=function Bounds2(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null};fl.prototype.isEmpty=function isEmpty(){return this.minX>this.maxX||this.minY>this.maxY},fl.prototype.clear=function clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},fl.prototype.getRectangle=function getRectangle(i){return this.minX>this.maxX||this.minY>this.maxY?ul.EMPTY:((i=i||new ul(0,0,1,1)).x=this.minX,i.y=this.minY,i.width=this.maxX-this.minX,i.height=this.maxY-this.minY,i)},fl.prototype.addPoint=function addPoint(i){this.minX=Math.min(this.minX,i.x),this.maxX=Math.max(this.maxX,i.x),this.minY=Math.min(this.minY,i.y),this.maxY=Math.max(this.maxY,i.y)},fl.prototype.addQuad=function addQuad(i){var s=this.minX,_=this.minY,T=this.maxX,S=this.maxY,C=i[0],P=i[1];s=C<s?C:s,_=P<_?P:_,T=C>T?C:T,S=P>S?P:S,s=(C=i[2])<s?C:s,_=(P=i[3])<_?P:_,T=C>T?C:T,S=P>S?P:S,s=(C=i[4])<s?C:s,_=(P=i[5])<_?P:_,T=C>T?C:T,S=P>S?P:S,s=(C=i[6])<s?C:s,_=(P=i[7])<_?P:_,T=C>T?C:T,S=P>S?P:S,this.minX=s,this.minY=_,this.maxX=T,this.maxY=S},fl.prototype.addFrame=function addFrame(i,s,_,T,S){this.addFrameMatrix(i.worldTransform,s,_,T,S)},fl.prototype.addFrameMatrix=function addFrameMatrix(i,s,_,T,S){var C=i.a,P=i.b,O=i.c,M=i.d,R=i.tx,D=i.ty,j=this.minX,$=this.minY,U=this.maxX,V=this.maxY,Z=C*s+O*_+R,Y=P*s+M*_+D;j=Z<j?Z:j,$=Y<$?Y:$,U=Z>U?Z:U,V=Y>V?Y:V,j=(Z=C*T+O*_+R)<j?Z:j,$=(Y=P*T+M*_+D)<$?Y:$,U=Z>U?Z:U,V=Y>V?Y:V,j=(Z=C*s+O*S+R)<j?Z:j,$=(Y=P*s+M*S+D)<$?Y:$,U=Z>U?Z:U,V=Y>V?Y:V,j=(Z=C*T+O*S+R)<j?Z:j,$=(Y=P*T+M*S+D)<$?Y:$,U=Z>U?Z:U,V=Y>V?Y:V,this.minX=j,this.minY=$,this.maxX=U,this.maxY=V},fl.prototype.addVertexData=function addVertexData(i,s,_){for(var T=this.minX,S=this.minY,C=this.maxX,P=this.maxY,O=s;O<_;O+=2){var M=i[O],R=i[O+1];T=M<T?M:T,S=R<S?R:S,C=M>C?M:C,P=R>P?R:P}this.minX=T,this.minY=S,this.maxX=C,this.maxY=P},fl.prototype.addVertices=function addVertices(i,s,_,T){this.addVerticesMatrix(i.worldTransform,s,_,T)},fl.prototype.addVerticesMatrix=function addVerticesMatrix(i,s,_,T,S,C){var P=i.a,O=i.b,M=i.c,R=i.d,D=i.tx,j=i.ty;S=S||0,C=C||0;for(var $=this.minX,U=this.minY,V=this.maxX,Z=this.maxY,Y=_;Y<T;Y+=2){var X=s[Y],Q=s[Y+1],ee=P*X+M*Q+D,te=R*Q+O*X+j;$=Math.min($,ee-S),V=Math.max(V,ee+S),U=Math.min(U,te-C),Z=Math.max(Z,te+C)}this.minX=$,this.minY=U,this.maxX=V,this.maxY=Z},fl.prototype.addBounds=function addBounds(i){var s=this.minX,_=this.minY,T=this.maxX,S=this.maxY;this.minX=i.minX<s?i.minX:s,this.minY=i.minY<_?i.minY:_,this.maxX=i.maxX>T?i.maxX:T,this.maxY=i.maxY>S?i.maxY:S},fl.prototype.addBoundsMask=function addBoundsMask(i,s){var _=i.minX>s.minX?i.minX:s.minX,T=i.minY>s.minY?i.minY:s.minY,S=i.maxX<s.maxX?i.maxX:s.maxX,C=i.maxY<s.maxY?i.maxY:s.maxY;if(_<=S&&T<=C){var P=this.minX,O=this.minY,M=this.maxX,R=this.maxY;this.minX=_<P?_:P,this.minY=T<O?T:O,this.maxX=S>M?S:M,this.maxY=C>R?C:R}},fl.prototype.addBoundsMatrix=function addBoundsMatrix(i,s){this.addFrameMatrix(s,i.minX,i.minY,i.maxX,i.maxY)},fl.prototype.addBoundsArea=function addBoundsArea(i,s){var _=i.minX>s.x?i.minX:s.x,T=i.minY>s.y?i.minY:s.y,S=i.maxX<s.x+s.width?i.maxX:s.x+s.width,C=i.maxY<s.y+s.height?i.maxY:s.y+s.height;if(_<=S&&T<=C){var P=this.minX,O=this.minY,M=this.maxX,R=this.maxY;this.minX=_<P?_:P,this.minY=T<O?T:O,this.maxX=S>M?S:M,this.maxY=C>R?C:R}},fl.prototype.pad=function pad(i,s){i=i||0,s=s||(0!==s?i:0),this.isEmpty()||(this.minX-=i,this.maxX+=i,this.minY-=s,this.maxY+=s)},fl.prototype.addFramePad=function addFramePad(i,s,_,T,S,C){i-=S,s-=C,_+=S,T+=C,this.minX=this.minX<i?this.minX:i,this.maxX=this.maxX>_?this.maxX:_,this.minY=this.minY<s?this.minY:s,this.maxY=this.maxY>T?this.maxY:T};var gl=function(i){function DisplayObject2(){i.call(this),this.tempDisplayObjectParent=null,this.transform=new cl,this.alpha=1,this.visible=!0,this.renderable=!0,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new fl,this._boundsID=0,this._lastBoundsID=-1,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}i&&(DisplayObject2.__proto__=i),DisplayObject2.prototype=Object.create(i&&i.prototype),DisplayObject2.prototype.constructor=DisplayObject2;var s={_tempDisplayObjectParent:{configurable:!0},x:{configurable:!0},y:{configurable:!0},worldTransform:{configurable:!0},localTransform:{configurable:!0},position:{configurable:!0},scale:{configurable:!0},pivot:{configurable:!0},skew:{configurable:!0},rotation:{configurable:!0},angle:{configurable:!0},zIndex:{configurable:!0},worldVisible:{configurable:!0},mask:{configurable:!0}};return DisplayObject2.mixin=function mixin(i){for(var s=Object.keys(i),_=0;_<s.length;++_){var T=s[_];Object.defineProperty(DisplayObject2.prototype,T,Object.getOwnPropertyDescriptor(i,T))}},s._tempDisplayObjectParent.get=function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new DisplayObject2),this.tempDisplayObjectParent},DisplayObject2.prototype.updateTransform=function updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},DisplayObject2.prototype.calculateBounds=function calculateBounds(){},DisplayObject2.prototype._recursivePostUpdateTransform=function _recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},DisplayObject2.prototype.getBounds=function getBounds(i,s){return i||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&(this.calculateBounds(),this._lastBoundsID=this._boundsID),s||(this._boundsRect||(this._boundsRect=new ul),s=this._boundsRect),this._bounds.getRectangle(s)},DisplayObject2.prototype.getLocalBounds=function getLocalBounds(i){var s=this.transform,_=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,i||(this._localBoundsRect||(this._localBoundsRect=new ul),i=this._localBoundsRect);var T=this.getBounds(!1,i);return this.parent=_,this.transform=s,T},DisplayObject2.prototype.toGlobal=function toGlobal(i,s,_){return void 0===_&&(_=!1),_||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(i,s)},DisplayObject2.prototype.toLocal=function toLocal(i,s,_,T){return s&&(i=s.toGlobal(i,_,T)),T||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(i,_)},DisplayObject2.prototype.render=function render2(i){},DisplayObject2.prototype.setParent=function setParent(i){if(!i||!i.addChild)throw new Error("setParent: Argument must be a Container");return i.addChild(this),i},DisplayObject2.prototype.setTransform=function setTransform(i,s,_,T,S,C,P,O,M){return void 0===i&&(i=0),void 0===s&&(s=0),void 0===_&&(_=1),void 0===T&&(T=1),void 0===S&&(S=0),void 0===C&&(C=0),void 0===P&&(P=0),void 0===O&&(O=0),void 0===M&&(M=0),this.position.x=i,this.position.y=s,this.scale.x=_||1,this.scale.y=T||1,this.rotation=S,this.skew.x=C,this.skew.y=P,this.pivot.x=O,this.pivot.y=M,this},DisplayObject2.prototype.destroy=function destroy10(){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},s.x.get=function(){return this.position.x},s.x.set=function(i){this.transform.position.x=i},s.y.get=function(){return this.position.y},s.y.set=function(i){this.transform.position.y=i},s.worldTransform.get=function(){return this.transform.worldTransform},s.localTransform.get=function(){return this.transform.localTransform},s.position.get=function(){return this.transform.position},s.position.set=function(i){this.transform.position.copyFrom(i)},s.scale.get=function(){return this.transform.scale},s.scale.set=function(i){this.transform.scale.copyFrom(i)},s.pivot.get=function(){return this.transform.pivot},s.pivot.set=function(i){this.transform.pivot.copyFrom(i)},s.skew.get=function(){return this.transform.skew},s.skew.set=function(i){this.transform.skew.copyFrom(i)},s.rotation.get=function(){return this.transform.rotation},s.rotation.set=function(i){this.transform.rotation=i},s.angle.get=function(){return this.transform.rotation*Xo},s.angle.set=function(i){this.transform.rotation=i*Qo},s.zIndex.get=function(){return this._zIndex},s.zIndex.set=function(i){this._zIndex=i,this.parent&&(this.parent.sortDirty=!0)},s.worldVisible.get=function(){var i=this;do{if(!i.visible)return!1;i=i.parent}while(i);return!0},s.mask.get=function(){return this._mask},s.mask.set=function(i){if(this._mask){var s=this._mask.maskObject||this._mask;s.renderable=!0,s.isMask=!1}if(this._mask=i,this._mask){var _=this._mask.maskObject||this._mask;_.renderable=!1,_.isMask=!0}},Object.defineProperties(DisplayObject2.prototype,s),DisplayObject2}(js);function sortChildren(i,s){return i.zIndex===s.zIndex?i._lastSortedIndex-s._lastSortedIndex:i.zIndex-s.zIndex}gl.prototype.displayObjectUpdateTransform=gl.prototype.updateTransform;var vl,bl,yl=function(i){function Container2(){i.call(this),this.children=[],this.sortableChildren=Ns.SORTABLE_CHILDREN,this.sortDirty=!1}i&&(Container2.__proto__=i),Container2.prototype=Object.create(i&&i.prototype),Container2.prototype.constructor=Container2;var s={width:{configurable:!0},height:{configurable:!0}};return Container2.prototype.onChildrenChange=function onChildrenChange(){},Container2.prototype.addChild=function addChild(i){var s=arguments,_=arguments.length;if(_>1)for(var T=0;T<_;T++)this.addChild(s[T]);else i.parent&&i.parent.removeChild(i),i.parent=this,this.sortDirty=!0,i.transform._parentID=-1,this.children.push(i),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",i,this,this.children.length-1),i.emit("added",this);return i},Container2.prototype.addChildAt=function addChildAt(i,s){if(s<0||s>this.children.length)throw new Error(i+"addChildAt: The index "+s+" supplied is out of bounds "+this.children.length);return i.parent&&i.parent.removeChild(i),i.parent=this,this.sortDirty=!0,i.transform._parentID=-1,this.children.splice(s,0,i),this._boundsID++,this.onChildrenChange(s),i.emit("added",this),this.emit("childAdded",i,this,s),i},Container2.prototype.swapChildren=function swapChildren(i,s){if(i!==s){var _=this.getChildIndex(i),T=this.getChildIndex(s);this.children[_]=s,this.children[T]=i,this.onChildrenChange(_<T?_:T)}},Container2.prototype.getChildIndex=function getChildIndex(i){var s=this.children.indexOf(i);if(-1===s)throw new Error("The supplied DisplayObject must be a child of the caller");return s},Container2.prototype.setChildIndex=function setChildIndex(i,s){if(s<0||s>=this.children.length)throw new Error("The index "+s+" supplied is out of bounds "+this.children.length);var _=this.getChildIndex(i);removeItems(this.children,_,1),this.children.splice(s,0,i),this.onChildrenChange(s)},Container2.prototype.getChildAt=function getChildAt(i){if(i<0||i>=this.children.length)throw new Error("getChildAt: Index ("+i+") does not exist.");return this.children[i]},Container2.prototype.removeChild=function removeChild(i){var s=arguments,_=arguments.length;if(_>1)for(var T=0;T<_;T++)this.removeChild(s[T]);else{var S=this.children.indexOf(i);if(-1===S)return null;i.parent=null,i.transform._parentID=-1,removeItems(this.children,S,1),this._boundsID++,this.onChildrenChange(S),i.emit("removed",this),this.emit("childRemoved",i,this,S)}return i},Container2.prototype.removeChildAt=function removeChildAt(i){var s=this.getChildAt(i);return s.parent=null,s.transform._parentID=-1,removeItems(this.children,i,1),this._boundsID++,this.onChildrenChange(i),s.emit("removed",this),this.emit("childRemoved",s,this,i),s},Container2.prototype.removeChildren=function removeChildren(i,s){void 0===i&&(i=0);var _,T=i,S="number"==typeof s?s:this.children.length,C=S-T;if(C>0&&C<=S){_=this.children.splice(T,C);for(var P=0;P<_.length;++P)_[P].parent=null,_[P].transform&&(_[P].transform._parentID=-1);this._boundsID++,this.onChildrenChange(i);for(var O=0;O<_.length;++O)_[O].emit("removed",this),this.emit("childRemoved",_[O],this,O);return _}if(0===C&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},Container2.prototype.sortChildren=function sortChildren$1(){for(var i=!1,s=0,_=this.children.length;s<_;++s){var T=this.children[s];T._lastSortedIndex=s,i||0===T.zIndex||(i=!0)}i&&this.children.length>1&&this.children.sort(sortChildren),this.sortDirty=!1},Container2.prototype.updateTransform=function updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var i=0,s=this.children.length;i<s;++i){var _=this.children[i];_.visible&&_.updateTransform()}},Container2.prototype.calculateBounds=function calculateBounds(){this._bounds.clear(),this._calculateBounds();for(var i=0;i<this.children.length;i++){var s=this.children[i];if(s.visible&&s.renderable)if(s.calculateBounds(),s._mask){var _=s._mask.maskObject||s._mask;_.calculateBounds(),this._bounds.addBoundsMask(s._bounds,_._bounds)}else s.filterArea?this._bounds.addBoundsArea(s._bounds,s.filterArea):this._bounds.addBounds(s._bounds)}this._lastBoundsID=this._boundsID},Container2.prototype._calculateBounds=function _calculateBounds(){},Container2.prototype.render=function render2(i){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(i);else{this._render(i);for(var s=0,_=this.children.length;s<_;++s)this.children[s].render(i)}},Container2.prototype.renderAdvanced=function renderAdvanced(i){i.batch.flush();var s=this.filters,_=this._mask;if(s){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var T=0;T<s.length;T++)s[T].enabled&&this._enabledFilters.push(s[T]);this._enabledFilters.length&&i.filter.push(this,this._enabledFilters)}_&&i.mask.push(this,this._mask),this._render(i);for(var S=0,C=this.children.length;S<C;S++)this.children[S].render(i);i.batch.flush(),_&&i.mask.pop(this,this._mask),s&&this._enabledFilters&&this._enabledFilters.length&&i.filter.pop()},Container2.prototype._render=function _render(i){},Container2.prototype.destroy=function destroy10(s){i.prototype.destroy.call(this),this.sortDirty=!1;var _="boolean"==typeof s?s:s&&s.children,T=this.removeChildren(0,this.children.length);if(_)for(var S=0;S<T.length;++S)T[S].destroy(s)},s.width.get=function(){return this.scale.x*this.getLocalBounds().width},s.width.set=function(i){var s=this.getLocalBounds().width;this.scale.x=0!==s?i/s:1,this._width=i},s.height.get=function(){return this.scale.y*this.getLocalBounds().height},s.height.set=function(i){var s=this.getLocalBounds().height;this.scale.y=0!==s?i/s:1,this._height=i},Object.defineProperties(Container2.prototype,s),Container2}(gl);yl.prototype.containerUpdateTransform=yl.prototype.updateTransform,
/*!
 * @pixi/ticker - v5.2.1
 * Compiled Tue, 28 Jan 2020 23:33:11 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
Ns.TARGET_FPMS=.06,(bl=vl||(vl={}))[bl.INTERACTION=50]="INTERACTION",bl[bl.HIGH=25]="HIGH",bl[bl.NORMAL=0]="NORMAL",bl[bl.LOW=-25]="LOW",bl[bl.UTILITY=-50]="UTILITY";var _l=function(){function TickerListener2(i,s,_,T){void 0===s&&(s=null),void 0===_&&(_=0),void 0===T&&(T=!1),this.fn=i,this.context=s,this.priority=_,this.once=T,this.next=null,this.previous=null,this._destroyed=!1}return TickerListener2.prototype.match=function(i,s){return void 0===s&&(s=null),this.fn===i&&this.context===s},TickerListener2.prototype.emit=function(i){this.fn&&(this.context?this.fn.call(this.context,i):this.fn(i));var s=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),s},TickerListener2.prototype.connect=function(i){this.previous=i,i.next&&(i.next.previous=this),this.next=i.next,i.next=this},TickerListener2.prototype.destroy=function(i){void 0===i&&(i=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var s=this.next;return this.next=i?null:s,this.previous=null,s},TickerListener2}(),wl=function(){function Ticker2(){var i=this;this._head=new _l(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/Ns.TARGET_FPMS,this.elapsedMS=1/Ns.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(s){i._requestId=null,i.started&&(i.update(s),i.started&&null===i._requestId&&i._head.next&&(i._requestId=requestAnimationFrame(i._tick)))}}return Ticker2.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},Ticker2.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},Ticker2.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},Ticker2.prototype.add=function(i,s,_){return void 0===_&&(_=vl.NORMAL),this._addListener(new _l(i,s,_))},Ticker2.prototype.addOnce=function(i,s,_){return void 0===_&&(_=vl.NORMAL),this._addListener(new _l(i,s,_,!0))},Ticker2.prototype._addListener=function(i){var s=this._head.next,_=this._head;if(s){for(;s;){if(i.priority>s.priority){i.connect(_);break}_=s,s=s.next}i.previous||i.connect(_)}else i.connect(_);return this._startIfPossible(),this},Ticker2.prototype.remove=function(i,s){for(var _=this._head.next;_;)_=_.match(i,s)?_.destroy():_.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(Ticker2.prototype,"count",{get:function(){if(!this._head)return 0;for(var i=0,s=this._head;s=s.next;)i++;return i},enumerable:!0,configurable:!0}),Ticker2.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},Ticker2.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},Ticker2.prototype.destroy=function(){if(!this._protected){this.stop();for(var i=this._head.next;i;)i=i.destroy(!0);this._head.destroy(),this._head=null}},Ticker2.prototype.update=function(i){var s;if(void 0===i&&(i=performance.now()),i>this.lastTime){if((s=this.elapsedMS=i-this.lastTime)>this._maxElapsedMS&&(s=this._maxElapsedMS),s*=this.speed,this._minElapsedMS){var _=i-this._lastFrame|0;if(_<this._minElapsedMS)return;this._lastFrame=i-_%this._minElapsedMS}this.deltaMS=s,this.deltaTime=this.deltaMS*Ns.TARGET_FPMS;for(var T=this._head,S=T.next;S;)S=S.emit(this.deltaTime);T.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=i},Object.defineProperty(Ticker2.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!0,configurable:!0}),Object.defineProperty(Ticker2.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(i){var s=Math.min(this.maxFPS,i),_=Math.min(Math.max(0,s)/1e3,Ns.TARGET_FPMS);this._maxElapsedMS=1/_},enumerable:!0,configurable:!0}),Object.defineProperty(Ticker2.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(i){if(0===i)this._minElapsedMS=0;else{var s=Math.max(this.minFPS,i);this._minElapsedMS=1/(s/1e3)}},enumerable:!0,configurable:!0}),Object.defineProperty(Ticker2,"shared",{get:function(){if(!Ticker2._shared){var i=Ticker2._shared=new Ticker2;i.autoStart=!0,i._protected=!0}return Ticker2._shared},enumerable:!0,configurable:!0}),Object.defineProperty(Ticker2,"system",{get:function(){if(!Ticker2._system){var i=Ticker2._system=new Ticker2;i.autoStart=!0,i._protected=!0}return Ticker2._system},enumerable:!0,configurable:!0}),Ticker2}(),kl=function(){function TickerPlugin2(){}return TickerPlugin2.init=function(i){var s=this;i=Object.assign({autoStart:!0,sharedTicker:!1},i),Object.defineProperty(this,"ticker",{set:function(i){this._ticker&&this._ticker.remove(this.render,this),this._ticker=i,i&&i.add(this.render,this,vl.LOW)},get:function(){return this._ticker}}),this.stop=function(){s._ticker.stop()},this.start=function(){s._ticker.start()},this._ticker=null,this.ticker=i.sharedTicker?wl.shared:new wl,i.autoStart&&this.start()},TickerPlugin2.destroy=function(){if(this._ticker){var i=this._ticker;this.ticker=null,i.destroy()}},TickerPlugin2}(),Tl=function(){function Runner2(i){this.items=[],this._name=i,this._aliasCount=0}return Runner2.prototype.emit=function(i,s,_,T,S,C,P,O){if(arguments.length>8)throw new Error("max arguments reached");var M=this,R=M.name,D=M.items;this._aliasCount++;for(var j=0,$=D.length;j<$;j++)D[j][R](i,s,_,T,S,C,P,O);return D===this.items&&this._aliasCount--,this},Runner2.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},Runner2.prototype.add=function(i){return i[this._name]&&(this.ensureNonAliasedItems(),this.remove(i),this.items.push(i)),this},Runner2.prototype.remove=function(i){var s=this.items.indexOf(i);return-1!==s&&(this.ensureNonAliasedItems(),this.items.splice(s,1)),this},Runner2.prototype.contains=function(i){return-1!==this.items.indexOf(i)},Runner2.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},Runner2.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(Runner2.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!0,configurable:!0}),Object.defineProperty(Runner2.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Runner2}();Object.defineProperties(Tl.prototype,{dispatch:{value:Tl.prototype.emit},run:{value:Tl.prototype.emit}});
/*!
 * @pixi/core - v5.2.1
 * Compiled Tue, 28 Jan 2020 23:33:11 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Sl=function Resource2(i,s){void 0===i&&(i=0),void 0===s&&(s=0),this._width=i,this._height=s,this.destroyed=!1,this.internal=!1,this.onResize=new Tl("setRealSize",2),this.onUpdate=new Tl("update"),this.onError=new Tl("onError",1)},Cl={valid:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};Sl.prototype.bind=function bind(i){this.onResize.add(i),this.onUpdate.add(i),this.onError.add(i),(this._width||this._height)&&this.onResize.run(this._width,this._height)},Sl.prototype.unbind=function unbind(i){this.onResize.remove(i),this.onUpdate.remove(i),this.onError.remove(i)},Sl.prototype.resize=function resize(i,s){i===this._width&&s===this._height||(this._width=i,this._height=s,this.onResize.run(i,s))},Cl.valid.get=function(){return!!this._width&&!!this._height},Sl.prototype.update=function update(){this.destroyed||this.onUpdate.run()},Sl.prototype.load=function load2(){return Promise.resolve()},Cl.width.get=function(){return this._width},Cl.height.get=function(){return this._height},Sl.prototype.upload=function upload(i,s,_){return!1},Sl.prototype.style=function style2(i,s,_){return!1},Sl.prototype.dispose=function dispose(){},Sl.prototype.destroy=function destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},Object.defineProperties(Sl.prototype,Cl);var xl=function(i){function BaseImageResource2(s){var _=s.naturalWidth||s.videoWidth||s.width,T=s.naturalHeight||s.videoHeight||s.height;i.call(this,_,T),this.source=s,this.noSubImage=!1}return i&&(BaseImageResource2.__proto__=i),BaseImageResource2.prototype=Object.create(i&&i.prototype),BaseImageResource2.prototype.constructor=BaseImageResource2,BaseImageResource2.crossOrigin=function crossOrigin(i,s,_){void 0===_&&0!==s.indexOf("data:")?i.crossOrigin=function determineCrossOrigin(i,s){if(void 0===s&&(s=window.location),0===i.indexOf("data:"))return"";s=s||window.location,Uo||(Uo=document.createElement("a")),Uo.href=i;var _=Gs(Uo.href),T=!_.port&&""===s.port||_.port===s.port;return _.hostname===s.hostname&&T&&_.protocol===s.protocol?"":"anonymous"}(s):!1!==_&&(i.crossOrigin="string"==typeof _?_:"anonymous")},BaseImageResource2.prototype.upload=function upload2(i,s,_,T){var S=i.gl,C=s.realWidth,P=s.realHeight;return T=T||this.source,S.pixelStorei(S.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.alphaMode===mo.UNPACK),this.noSubImage||s.target!==S.TEXTURE_2D||_.width!==C||_.height!==P?(_.width=C,_.height=P,S.texImage2D(s.target,0,s.format,s.format,s.type,T)):S.texSubImage2D(S.TEXTURE_2D,0,0,0,s.format,s.type,T),!0},BaseImageResource2.prototype.update=function update5(){if(!this.destroyed){var s=this.source.naturalWidth||this.source.videoWidth||this.source.width,_=this.source.naturalHeight||this.source.videoHeight||this.source.height;this.resize(s,_),i.prototype.update.call(this)}},BaseImageResource2.prototype.dispose=function dispose5(){this.source=null},BaseImageResource2}(Sl),El=function(i){function ImageResource2(s,_){if(_=_||{},!(s instanceof HTMLImageElement)){var T=new Image;i.crossOrigin(T,s,_.crossorigin),T.src=s,s=T}i.call(this,s),!s.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=s.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(void 0!==_.createBitmap?_.createBitmap:Ns.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,this.alphaMode="number"==typeof _.alphaMode?_.alphaMode:null,void 0!==_.premultiplyAlpha&&(this.premultiplyAlpha=_.premultiplyAlpha),this.bitmap=null,this._load=null,!1!==_.autoLoad&&this.load()}return i&&(ImageResource2.__proto__=i),ImageResource2.prototype=Object.create(i&&i.prototype),ImageResource2.prototype.constructor=ImageResource2,ImageResource2.prototype.load=function load3(i){var s=this;return void 0!==i&&(this.createBitmap=i),this._load||(this._load=new Promise((function(i){s.url=s.source.src;var _=s.source,completed=function(){s.destroyed||(_.onload=null,_.onerror=null,s.resize(_.width,_.height),s._load=null,s.createBitmap?i(s.process()):i(s))};_.complete&&_.src?completed():(_.onload=completed,_.onerror=function(i){return s.onError.run(i)})}))),this._load},ImageResource2.prototype.process=function process(){var i=this;return null!==this._process?this._process:null===this.bitmap&&window.createImageBitmap?(this._process=window.createImageBitmap(this.source,0,0,this.source.width,this.source.height,{premultiplyAlpha:this.premultiplyAlpha===mo.UNPACK?"premultiply":"none"}).then((function(s){return i.destroyed?Promise.reject():(i.bitmap=s,i.update(),i._process=null,Promise.resolve(i))})),this._process):Promise.resolve(this)},ImageResource2.prototype.upload=function upload2(s,_,T){if("number"==typeof this.alphaMode&&(_.alphaMode=this.alphaMode),!this.createBitmap)return i.prototype.upload.call(this,s,_,T);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(i.prototype.upload.call(this,s,_,T,this.bitmap),!this.preserveBitmap){var S=!0;for(var C in _._glTextures){var P=_._glTextures[C];if(P!==T&&P.dirtyId!==_.dirtyId){S=!1;break}}S&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},ImageResource2.prototype.dispose=function dispose5(){this.source.onload=null,this.source.onerror=null,i.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},ImageResource2}(xl),Pl=[];function autoDetectResource(i,s){if(!i)return null;var _="";if("string"==typeof i){var T=/\.(\w{3,4})(?:$|\?|#)/i.exec(i);T&&(_=T[1].toLowerCase())}for(var S=Pl.length-1;S>=0;--S){var C=Pl[S];if(C.test&&C.test(i,_))return new C(i,s)}return new El(i,s)}var Al=function(i){function BufferResource2(s,_){var T=_||{},S=T.width,C=T.height;if(!S||!C)throw new Error("BufferResource width or height invalid");i.call(this,S,C),this.data=s}return i&&(BufferResource2.__proto__=i),BufferResource2.prototype=Object.create(i&&i.prototype),BufferResource2.prototype.constructor=BufferResource2,BufferResource2.prototype.upload=function upload2(i,s,_){var T=i.gl;return T.pixelStorei(T.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.alphaMode===mo.UNPACK),_.width===s.width&&_.height===s.height?T.texSubImage2D(s.target,0,0,0,s.width,s.height,s.format,s.type,this.data):(_.width=s.width,_.height=s.height,T.texImage2D(s.target,0,_.internalFormat,s.width,s.height,0,s.format,_.type,this.data)),!0},BufferResource2.prototype.dispose=function dispose5(){this.data=null},BufferResource2.test=function test(i){return i instanceof Float32Array||i instanceof Uint8Array||i instanceof Uint32Array},BufferResource2}(Sl),Ol={scaleMode:oo.NEAREST,format:to.RGBA,alphaMode:mo.NPM},Ml=function(i){function BaseTexture2(s,_){void 0===s&&(s=null),void 0===_&&(_=null),i.call(this);var T=(_=_||{}).alphaMode,S=_.mipmap,C=_.anisotropicLevel,P=_.scaleMode,O=_.width,M=_.height,R=_.wrapMode,D=_.format,j=_.type,$=_.target,U=_.resolution,V=_.resourceOptions;!s||s instanceof Sl||((s=autoDetectResource(s,V)).internal=!0),this.width=O||0,this.height=M||0,this.resolution=U||Ns.RESOLUTION,this.mipmap=void 0!==S?S:Ns.MIPMAP_TEXTURES,this.anisotropicLevel=void 0!==C?C:Ns.ANISOTROPIC_LEVEL,this.wrapMode=R||Ns.WRAP_MODE,this.scaleMode=void 0!==P?P:Ns.SCALE_MODE,this.format=D||to.RGBA,this.type=j||ao.UNSIGNED_BYTE,this.target=$||ro.TEXTURE_2D,this.alphaMode=void 0!==T?T:mo.UNPACK,void 0!==_.premultiplyAlpha&&(this.premultiplyAlpha=_.premultiplyAlpha),this.uid=uid(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=O>0&&M>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.setResource(s)}i&&(BaseTexture2.__proto__=i),BaseTexture2.prototype=Object.create(i&&i.prototype),BaseTexture2.prototype.constructor=BaseTexture2;var s={realWidth:{configurable:!0},realHeight:{configurable:!0}};return s.realWidth.get=function(){return Math.ceil(this.width*this.resolution-1e-4)},s.realHeight.get=function(){return Math.ceil(this.height*this.resolution-1e-4)},BaseTexture2.prototype.setStyle=function setStyle(i,s){var _;return void 0!==i&&i!==this.scaleMode&&(this.scaleMode=i,_=!0),void 0!==s&&s!==this.mipmap&&(this.mipmap=s,_=!0),_&&this.dirtyStyleId++,this},BaseTexture2.prototype.setSize=function setSize(i,s,_){return this.resolution=_||this.resolution,this.width=i,this.height=s,this._refreshPOT(),this.update(),this},BaseTexture2.prototype.setRealSize=function setRealSize(i,s,_){return this.resolution=_||this.resolution,this.width=i/this.resolution,this.height=s/this.resolution,this._refreshPOT(),this.update(),this},BaseTexture2.prototype._refreshPOT=function _refreshPOT(){this.isPowerOfTwo=isPow2(this.realWidth)&&isPow2(this.realHeight)},BaseTexture2.prototype.setResolution=function setResolution(i){var s=this.resolution;return s===i||(this.resolution=i,this.valid&&(this.width=this.width*s/i,this.height=this.height*s/i,this.emit("update",this)),this._refreshPOT()),this},BaseTexture2.prototype.setResource=function setResource(i){if(this.resource===i)return this;if(this.resource)throw new Error("Resource can be set only once");return i.bind(this),this.resource=i,this},BaseTexture2.prototype.update=function update5(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},BaseTexture2.prototype.onError=function onError(i){this.emit("error",this,i)},BaseTexture2.prototype.destroy=function destroy10(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete qo[this.cacheId],delete Ho[this.cacheId],this.cacheId=null),this.dispose(),BaseTexture2.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},BaseTexture2.prototype.dispose=function dispose5(){this.emit("dispose",this)},BaseTexture2.from=function from6(i,s,_){void 0===_&&(_=Ns.STRICT_TEXTURE_CACHE);var T="string"==typeof i,S=null;T?S=i:(i._pixiId||(i._pixiId="pixiid_"+uid()),S=i._pixiId);var C=qo[S];if(T&&_&&!C)throw new Error('The cacheId "'+S+'" does not exist in BaseTextureCache.');return C||((C=new BaseTexture2(i,s)).cacheId=S,BaseTexture2.addToCache(C,S)),C},BaseTexture2.fromBuffer=function fromBuffer(i,s,_,T){i=i||new Float32Array(s*_*4);var S=new Al(i,{width:s,height:_}),C=i instanceof Float32Array?ao.FLOAT:ao.UNSIGNED_BYTE;return new BaseTexture2(S,Object.assign(Ol,T||{width:s,height:_,type:C}))},BaseTexture2.addToCache=function addToCache(i,s){s&&(-1===i.textureCacheIds.indexOf(s)&&i.textureCacheIds.push(s),qo[s]&&console.warn("BaseTexture added to the cache with an id ["+s+"] that already had an entry"),qo[s]=i)},BaseTexture2.removeFromCache=function removeFromCache(i){if("string"==typeof i){var s=qo[i];if(s){var _=s.textureCacheIds.indexOf(i);return _>-1&&s.textureCacheIds.splice(_,1),delete qo[i],s}}else if(i&&i.textureCacheIds){for(var T=0;T<i.textureCacheIds.length;++T)delete qo[i.textureCacheIds[T]];return i.textureCacheIds.length=0,i}return null},Object.defineProperties(BaseTexture2.prototype,s),BaseTexture2}(js);Ml._globalBatch=0;var zl=function(i){function ArrayResource2(s,_){var T;_=_||{};var S=s;Array.isArray(s)&&(T=s,S=s.length),i.call(this,_.width,_.height),this.items=[],this.itemDirtyIds=[];for(var C=0;C<S;C++){var P=new Ml;this.items.push(P),this.itemDirtyIds.push(-1)}if(this.length=S,this._load=null,T)for(var O=0;O<S;O++)this.addResourceAt(autoDetectResource(T[O],_),O)}return i&&(ArrayResource2.__proto__=i),ArrayResource2.prototype=Object.create(i&&i.prototype),ArrayResource2.prototype.constructor=ArrayResource2,ArrayResource2.prototype.dispose=function dispose5(){for(var i=0,s=this.length;i<s;i++)this.items[i].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},ArrayResource2.prototype.addResourceAt=function addResourceAt(i,s){if(!this.items[s])throw new Error("Index "+s+" is out of bounds");return i.valid&&!this.valid&&this.resize(i.width,i.height),this.items[s].setResource(i),this},ArrayResource2.prototype.bind=function bind2(s){i.prototype.bind.call(this,s),s.target=ro.TEXTURE_2D_ARRAY;for(var _=0;_<this.length;_++)this.items[_].on("update",s.update,s)},ArrayResource2.prototype.unbind=function unbind2(s){i.prototype.unbind.call(this,s);for(var _=0;_<this.length;_++)this.items[_].off("update",s.update,s)},ArrayResource2.prototype.load=function load3(){var i=this;if(this._load)return this._load;var s=this.items.map((function(i){return i.resource})),_=s.map((function(i){return i.load()}));return this._load=Promise.all(_).then((function(){var _=s[0],T=_.width,S=_.height;return i.resize(T,S),Promise.resolve(i)})),this._load},ArrayResource2.prototype.upload=function upload2(i,s,_){var T=this,S=T.length,C=T.itemDirtyIds,P=T.items,O=i.gl;_.dirtyId<0&&O.texImage3D(O.TEXTURE_2D_ARRAY,0,s.format,this._width,this._height,S,0,s.format,s.type,null);for(var M=0;M<S;M++){var R=P[M];C[M]<R.dirtyId&&(C[M]=R.dirtyId,R.valid&&O.texSubImage3D(O.TEXTURE_2D_ARRAY,0,0,0,M,R.resource.width,R.resource.height,1,s.format,s.type,R.resource.source))}return!0},ArrayResource2}(Sl),Il=function(i){function CanvasResource2(){i.apply(this,arguments)}return i&&(CanvasResource2.__proto__=i),CanvasResource2.prototype=Object.create(i&&i.prototype),CanvasResource2.prototype.constructor=CanvasResource2,CanvasResource2.test=function test(i){var s=window.OffscreenCanvas;return!!(s&&i instanceof s)||i instanceof HTMLCanvasElement},CanvasResource2}(xl),Ll=function(i){function CubeResource2(s,_){if(_=_||{},i.call(this,s,_),this.length!==CubeResource2.SIDES)throw new Error("Invalid length. Got "+this.length+", expected 6");for(var T=0;T<CubeResource2.SIDES;T++)this.items[T].target=ro.TEXTURE_CUBE_MAP_POSITIVE_X+T;!1!==_.autoLoad&&this.load()}return i&&(CubeResource2.__proto__=i),CubeResource2.prototype=Object.create(i&&i.prototype),CubeResource2.prototype.constructor=CubeResource2,CubeResource2.prototype.bind=function bind2(s){i.prototype.bind.call(this,s),s.target=ro.TEXTURE_CUBE_MAP},CubeResource2.prototype.upload=function upload2(i,s,_){for(var T=this.itemDirtyIds,S=0;S<CubeResource2.SIDES;S++){var C=this.items[S];T[S]<C.dirtyId&&(T[S]=C.dirtyId,C.valid&&C.resource.upload(i,C,_))}return!0},CubeResource2}(zl);Ll.SIDES=6;var Rl=function(i){function SVGResource2(s,_){_=_||{},i.call(this,document.createElement("canvas")),this._width=0,this._height=0,this.svg=s,this.scale=_.scale||1,this._overrideWidth=_.width,this._overrideHeight=_.height,this._resolve=null,this._crossorigin=_.crossorigin,this._load=null,!1!==_.autoLoad&&this.load()}return i&&(SVGResource2.__proto__=i),SVGResource2.prototype=Object.create(i&&i.prototype),SVGResource2.prototype.constructor=SVGResource2,SVGResource2.prototype.load=function load3(){var i=this;return this._load||(this._load=new Promise((function(s){if(i._resolve=function(){i.resize(i.source.width,i.source.height),s(i)},/^\<svg/.test(i.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");i.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(i.svg)))}i._loadSvg()}))),this._load},SVGResource2.prototype._loadSvg=function _loadSvg(){var s=this,_=new Image;i.crossOrigin(_,this.svg,this._crossorigin),_.src=this.svg,_.onerror=function(i){_.onerror=null,s.onError.run(i)},_.onload=function(){var i=_.width,T=_.height;if(!i||!T)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var S=i*s.scale,C=T*s.scale;(s._overrideWidth||s._overrideHeight)&&(S=s._overrideWidth||s._overrideHeight/T*i,C=s._overrideHeight||s._overrideWidth/i*T),S=Math.round(S),C=Math.round(C);var P=s.source;P.width=S,P.height=C,P._pixiId="canvas_"+uid(),P.getContext("2d").drawImage(_,0,0,i,T,0,0,S,C),s._resolve(),s._resolve=null}},SVGResource2.getSize=function getSize2(i){var s=SVGResource2.SVG_SIZE.exec(i),_={};return s&&(_[s[1]]=Math.round(parseFloat(s[3])),_[s[5]]=Math.round(parseFloat(s[7]))),_},SVGResource2.prototype.dispose=function dispose5(){i.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},SVGResource2.test=function test(i,s){return"svg"===s||"string"==typeof i&&0===i.indexOf("data:image/svg+xml;base64")||"string"==typeof i&&0===i.indexOf("<svg")},SVGResource2}(xl);Rl.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;var Nl=function(i){function VideoResource2(s,_){if(_=_||{},!(s instanceof HTMLVideoElement)){var T=document.createElement("video");T.setAttribute("preload","auto"),T.setAttribute("webkit-playsinline",""),T.setAttribute("playsinline",""),"string"==typeof s&&(s=[s]),i.crossOrigin(T,s[0].src||s[0],_.crossorigin);for(var S=0;S<s.length;++S){var C=document.createElement("source"),P=s[S],O=P.src,M=P.mime,R=(O=O||s[S]).split("?").shift().toLowerCase(),D=R.substr(R.lastIndexOf(".")+1);M=M||"video/"+D,C.src=O,C.type=M,T.appendChild(C)}s=T}i.call(this,s),this.noSubImage=!0,this._autoUpdate=!0,this._isAutoUpdating=!1,this._updateFPS=_.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==_.autoPlay,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),!1!==_.autoLoad&&this.load()}i&&(VideoResource2.__proto__=i),VideoResource2.prototype=Object.create(i&&i.prototype),VideoResource2.prototype.constructor=VideoResource2;var s={autoUpdate:{configurable:!0},updateFPS:{configurable:!0}};return VideoResource2.prototype.update=function update5(s){if(void 0===s&&(s=0),!this.destroyed){var _=wl.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-_),(!this._updateFPS||this._msToNextUpdate<=0)&&(i.prototype.update.call(this,s),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},VideoResource2.prototype.load=function load3(){var i=this;if(this._load)return this._load;var s=this.source;return(s.readyState===s.HAVE_ENOUGH_DATA||s.readyState===s.HAVE_FUTURE_DATA)&&s.width&&s.height&&(s.complete=!0),s.addEventListener("play",this._onPlayStart.bind(this)),s.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(s.addEventListener("canplay",this._onCanPlay),s.addEventListener("canplaythrough",this._onCanPlay),s.addEventListener("error",this._onError,!0)),this._load=new Promise((function(_){i.valid?_(i):(i._resolve=_,s.load())})),this._load},VideoResource2.prototype._onError=function _onError(){this.source.removeEventListener("error",this._onError,!0),this.onError.run(event)},VideoResource2.prototype._isSourcePlaying=function _isSourcePlaying(){var i=this.source;return i.currentTime>0&&!1===i.paused&&!1===i.ended&&i.readyState>2},VideoResource2.prototype._isSourceReady=function _isSourceReady(){return 3===this.source.readyState||4===this.source.readyState},VideoResource2.prototype._onPlayStart=function _onPlayStart(){this.valid||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(wl.shared.add(this.update,this),this._isAutoUpdating=!0)},VideoResource2.prototype._onPlayStop=function _onPlayStop(){this._isAutoUpdating&&(wl.shared.remove(this.update,this),this._isAutoUpdating=!1)},VideoResource2.prototype._onCanPlay=function _onCanPlay(){var i=this.source;i.removeEventListener("canplay",this._onCanPlay),i.removeEventListener("canplaythrough",this._onCanPlay);var s=this.valid;this.resize(i.videoWidth,i.videoHeight),!s&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&i.play()},VideoResource2.prototype.dispose=function dispose5(){this._isAutoUpdating&&wl.shared.remove(this.update,this),this.source&&(this.source.removeEventListener("error",this._onError,!0),this.source.pause(),this.source.src="",this.source.load()),i.prototype.dispose.call(this)},s.autoUpdate.get=function(){return this._autoUpdate},s.autoUpdate.set=function(i){i!==this._autoUpdate&&(this._autoUpdate=i,!this._autoUpdate&&this._isAutoUpdating?(wl.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(wl.shared.add(this.update,this),this._isAutoUpdating=!0))},s.updateFPS.get=function(){return this._updateFPS},s.updateFPS.set=function(i){i!==this._updateFPS&&(this._updateFPS=i)},VideoResource2.test=function test(i,s){return i instanceof HTMLVideoElement||VideoResource2.TYPES.indexOf(s)>-1},Object.defineProperties(VideoResource2.prototype,s),VideoResource2}(xl);Nl.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"];var Dl=function(i){function ImageBitmapResource2(){i.apply(this,arguments)}return i&&(ImageBitmapResource2.__proto__=i),ImageBitmapResource2.prototype=Object.create(i&&i.prototype),ImageBitmapResource2.prototype.constructor=ImageBitmapResource2,ImageBitmapResource2.test=function test(i){return!!window.createImageBitmap&&i instanceof ImageBitmap},ImageBitmapResource2}(xl);Pl.push(El,Dl,Il,Nl,Rl,Al,Ll,zl);var jl=function System2(i){this.renderer=i};jl.prototype.destroy=function destroy2(){this.renderer=null};var Bl=function(i){function DepthResource2(){i.apply(this,arguments)}return i&&(DepthResource2.__proto__=i),DepthResource2.prototype=Object.create(i&&i.prototype),DepthResource2.prototype.constructor=DepthResource2,DepthResource2.prototype.upload=function upload2(i,s,_){var T=i.gl;return T.pixelStorei(T.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.alphaMode===mo.UNPACK),_.width===s.width&&_.height===s.height?T.texSubImage2D(s.target,0,0,0,s.width,s.height,s.format,s.type,this.data):(_.width=s.width,_.height=s.height,T.texImage2D(s.target,0,T.DEPTH_COMPONENT16,s.width,s.height,0,s.format,s.type,this.data)),!0},DepthResource2}(Al),$l=function Framebuffer2(i,s){this.width=Math.ceil(i||100),this.height=Math.ceil(s||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Tl("disposeFramebuffer",2)},Ul={colorTexture:{configurable:!0}};Ul.colorTexture.get=function(){return this.colorTextures[0]},$l.prototype.addColorTexture=function addColorTexture(i,s){return void 0===i&&(i=0),this.colorTextures[i]=s||new Ml(null,{scaleMode:0,resolution:1,mipmap:!1,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},$l.prototype.addDepthTexture=function addDepthTexture(i){return this.depthTexture=i||new Ml(new Bl(null,{width:this.width,height:this.height}),{scaleMode:0,resolution:1,width:this.width,height:this.height,mipmap:!1,format:to.DEPTH_COMPONENT,type:ao.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},$l.prototype.enableDepth=function enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},$l.prototype.enableStencil=function enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},$l.prototype.resize=function resize2(i,s){if(i=Math.ceil(i),s=Math.ceil(s),i!==this.width||s!==this.height){this.width=i,this.height=s,this.dirtyId++,this.dirtySize++;for(var _=0;_<this.colorTextures.length;_++){var T=this.colorTextures[_],S=T.resolution;T.setSize(i/S,s/S)}if(this.depthTexture){var C=this.depthTexture.resolution;this.depthTexture.setSize(i/C,s/C)}}},$l.prototype.dispose=function dispose2(){this.disposeRunner.run(this,!1)},Object.defineProperties($l.prototype,Ul);var Fl=function(i){function BaseRenderTexture2(s){if("number"==typeof s){var _=arguments[0],T=arguments[1],S=arguments[2],C=arguments[3];s={width:_,height:T,scaleMode:S,resolution:C}}i.call(this,null,s);var P=s||{},O=P.width,M=P.height;this.mipmap=!1,this.width=Math.ceil(O)||100,this.height=Math.ceil(M)||100,this.valid=!0,this._canvasRenderTarget=null,this.clearColor=[0,0,0,0],this.framebuffer=new $l(this.width*this.resolution,this.height*this.resolution).addColorTexture(0,this),this.maskStack=[],this.filterStack=[{}]}return i&&(BaseRenderTexture2.__proto__=i),BaseRenderTexture2.prototype=Object.create(i&&i.prototype),BaseRenderTexture2.prototype.constructor=BaseRenderTexture2,BaseRenderTexture2.prototype.resize=function resize3(i,s){i=Math.ceil(i),s=Math.ceil(s),this.framebuffer.resize(i*this.resolution,s*this.resolution)},BaseRenderTexture2.prototype.dispose=function dispose5(){this.framebuffer.dispose(),i.prototype.dispose.call(this)},BaseRenderTexture2.prototype.destroy=function destroy10(){i.prototype.destroy.call(this,!0),this.framebuffer=null},BaseRenderTexture2}(Ml),Hl=function TextureUvs2(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)};Hl.prototype.set=function set2(i,s,_){var T=s.width,S=s.height;if(_){var C=i.width/2/T,P=i.height/2/S,O=i.x/T+C,M=i.y/S+P;_=ll.add(_,ll.NW),this.x0=O+C*ll.uX(_),this.y0=M+P*ll.uY(_),_=ll.add(_,2),this.x1=O+C*ll.uX(_),this.y1=M+P*ll.uY(_),_=ll.add(_,2),this.x2=O+C*ll.uX(_),this.y2=M+P*ll.uY(_),_=ll.add(_,2),this.x3=O+C*ll.uX(_),this.y3=M+P*ll.uY(_)}else this.x0=i.x/T,this.y0=i.y/S,this.x1=(i.x+i.width)/T,this.y1=i.y/S,this.x2=(i.x+i.width)/T,this.y2=(i.y+i.height)/S,this.x3=i.x/T,this.y3=(i.y+i.height)/S;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3};var ql=new Hl,Vl=function(i){function Texture2(s,_,T,S,C,P){if(i.call(this),this.noFrame=!1,_||(this.noFrame=!0,_=new ul(0,0,1,1)),s instanceof Texture2&&(s=s.baseTexture),this.baseTexture=s,this._frame=_,this.trim=S,this.valid=!1,this.requiresUpdate=!1,this._uvs=ql,this.uvMatrix=null,this.orig=T||_,this._rotate=Number(C||0),!0===C)this._rotate=2;else if(this._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=P?new Wo(P.x,P.y):new Wo(0,0),this._updateID=0,this.textureCacheIds=[],s.valid?this.noFrame?s.valid&&this.onBaseTextureUpdated(s):this.frame=_:s.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&s.on("update",this.onBaseTextureUpdated,this)}i&&(Texture2.__proto__=i),Texture2.prototype=Object.create(i&&i.prototype),Texture2.prototype.constructor=Texture2;var s={resolution:{configurable:!0},frame:{configurable:!0},rotate:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};return Texture2.prototype.update=function update5(){this.baseTexture.resource&&this.baseTexture.resource.update()},Texture2.prototype.onBaseTextureUpdated=function onBaseTextureUpdated(i){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=i.width,this._frame.height=i.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},Texture2.prototype.destroy=function destroy10(i){if(this.baseTexture){if(i){var s=this.baseTexture.resource;s&&Ho[s.url]&&Texture2.removeFromCache(s.url),this.baseTexture.destroy()}this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Texture2.removeFromCache(this),this.textureCacheIds=null},Texture2.prototype.clone=function clone2(){return new Texture2(this.baseTexture,this.frame,this.orig,this.trim,this.rotate,this.defaultAnchor)},Texture2.prototype.updateUvs=function updateUvs(){this._uvs===ql&&(this._uvs=new Hl),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},Texture2.from=function from6(i,s,_){void 0===s&&(s={}),void 0===_&&(_=Ns.STRICT_TEXTURE_CACHE);var T="string"==typeof i,S=null;T?S=i:(i._pixiId||(i._pixiId="pixiid_"+uid()),S=i._pixiId);var C=Ho[S];if(T&&_&&!C)throw new Error('The cacheId "'+S+'" does not exist in TextureCache.');return C||(s.resolution||(s.resolution=getResolutionOfUrl(i)),(C=new Texture2(new Ml(i,s))).baseTexture.cacheId=S,Ml.addToCache(C.baseTexture,S),Texture2.addToCache(C,S)),C},Texture2.fromBuffer=function fromBuffer(i,s,_,T){return new Texture2(Ml.fromBuffer(i,s,_,T))},Texture2.fromLoader=function fromLoader(i,s,_){var T=new El(i);T.url=s;var S=new Texture2(new Ml(T,{scaleMode:Ns.SCALE_MODE,resolution:getResolutionOfUrl(s)}));return _||(_=s),Ml.addToCache(S.baseTexture,_),Texture2.addToCache(S,_),_!==s&&(Ml.addToCache(S.baseTexture,s),Texture2.addToCache(S,s)),S},Texture2.addToCache=function addToCache(i,s){s&&(-1===i.textureCacheIds.indexOf(s)&&i.textureCacheIds.push(s),Ho[s]&&console.warn("Texture added to the cache with an id ["+s+"] that already had an entry"),Ho[s]=i)},Texture2.removeFromCache=function removeFromCache(i){if("string"==typeof i){var s=Ho[i];if(s){var _=s.textureCacheIds.indexOf(i);return _>-1&&s.textureCacheIds.splice(_,1),delete Ho[i],s}}else if(i&&i.textureCacheIds){for(var T=0;T<i.textureCacheIds.length;++T)Ho[i.textureCacheIds[T]]===i&&delete Ho[i.textureCacheIds[T]];return i.textureCacheIds.length=0,i}return null},s.resolution.get=function(){return this.baseTexture.resolution},s.frame.get=function(){return this._frame},s.frame.set=function(i){this._frame=i,this.noFrame=!1;var s=i.x,_=i.y,T=i.width,S=i.height,C=s+T>this.baseTexture.width,P=_+S>this.baseTexture.height;if(C||P){var O=C&&P?"and":"or",M="X: "+s+" + "+T+" = "+(s+T)+" > "+this.baseTexture.width,R="Y: "+_+" + "+S+" = "+(_+S)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+M+" "+O+" "+R)}this.valid=T&&S&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=i),this.valid&&this.updateUvs()},s.rotate.get=function(){return this._rotate},s.rotate.set=function(i){this._rotate=i,this.valid&&this.updateUvs()},s.width.get=function(){return this.orig.width},s.height.get=function(){return this.orig.height},Object.defineProperties(Texture2.prototype,s),Texture2}(js);function removeAllHandlers(i){i.destroy=function _emptyDestroy(){},i.on=function _emptyOn(){},i.once=function _emptyOnce(){},i.emit=function _emptyEmit(){}}Vl.EMPTY=new Vl(new Ml),removeAllHandlers(Vl.EMPTY),removeAllHandlers(Vl.EMPTY.baseTexture),Vl.WHITE=function createWhiteTexture(){var i=document.createElement("canvas");i.width=16,i.height=16;var s=i.getContext("2d");return s.fillStyle="white",s.fillRect(0,0,16,16),new Vl(new Ml(new Il(i)))}(),removeAllHandlers(Vl.WHITE),removeAllHandlers(Vl.WHITE.baseTexture);var Gl=function(i){function RenderTexture2(s,_){var T=null;if(!(s instanceof Fl)){var S=arguments[1],C=arguments[2],P=arguments[3],O=arguments[4];console.warn("Please use RenderTexture.create("+S+", "+C+") instead of the ctor directly."),T=arguments[0],_=null,s=new Fl({width:S,height:C,scaleMode:P,resolution:O})}i.call(this,s,_),this.legacyRenderer=T,this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}return i&&(RenderTexture2.__proto__=i),RenderTexture2.prototype=Object.create(i&&i.prototype),RenderTexture2.prototype.constructor=RenderTexture2,RenderTexture2.prototype.resize=function resize3(i,s,_){void 0===_&&(_=!0),i=Math.ceil(i),s=Math.ceil(s),this.valid=i>0&&s>0,this._frame.width=this.orig.width=i,this._frame.height=this.orig.height=s,_&&this.baseTexture.resize(i,s),this.updateUvs()},RenderTexture2.prototype.setResolution=function setResolution(i){var s=this.baseTexture;s.resolution!==i&&(s.setResolution(i),this.resize(s.width,s.height,!1))},RenderTexture2.create=function create3(i){return"number"==typeof i&&(i={width:i,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),new RenderTexture2(new Fl(i))},RenderTexture2}(Vl),Zl=function RenderTexturePool2(i){this.texturePool={},this.textureOptions=i||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0};Zl.prototype.createTexture=function createTexture(i,s){var _=new Fl(Object.assign({width:i,height:s,resolution:1},this.textureOptions));return new Gl(_)},Zl.prototype.getOptimalTexture=function getOptimalTexture(i,s,_){void 0===_&&(_=1);var T=Zl.SCREEN_KEY;i*=_,s*=_,this.enableFullScreen&&i===this._pixelsWidth&&s===this._pixelsHeight||(T=(65535&(i=nextPow2(i)))<<16|65535&(s=nextPow2(s))),this.texturePool[T]||(this.texturePool[T]=[]);var S=this.texturePool[T].pop();return S||(S=this.createTexture(i,s)),S.filterPoolKey=T,S.setResolution(_),S},Zl.prototype.getFilterTexture=function getFilterTexture(i,s){var _=this.getOptimalTexture(i.width,i.height,s||i.resolution);return _.filterFrame=i.filterFrame,_},Zl.prototype.returnTexture=function returnTexture(i){var s=i.filterPoolKey;i.filterFrame=null,this.texturePool[s].push(i)},Zl.prototype.returnFilterTexture=function returnFilterTexture(i){this.returnTexture(i)},Zl.prototype.clear=function clear2(i){if(i=!1!==i)for(var s in this.texturePool){var _=this.texturePool[s];if(_)for(var T=0;T<_.length;T++)_[T].destroy(!0)}this.texturePool={}},Zl.prototype.setScreenSize=function setScreenSize(i){if(i.width!==this._pixelsWidth||i.height!==this._pixelsHeight){var s=Zl.SCREEN_KEY,_=this.texturePool[s];if(this.enableFullScreen=i.width>0&&i.height>0,_)for(var T=0;T<_.length;T++)_[T].destroy(!0);this.texturePool[s]=[],this._pixelsWidth=i.width,this._pixelsHeight=i.height}},Zl.SCREEN_KEY="screen";var Wl=function Attribute2(i,s,_,T,S,C,P){void 0===_&&(_=!1),void 0===T&&(T=5126),this.buffer=i,this.size=s,this.normalized=_,this.type=T,this.stride=S,this.start=C,this.instance=P};Wl.prototype.destroy=function destroy3(){this.buffer=null},Wl.from=function from(i,s,_,T,S){return new Wl(i,s,_,T,S)};var Kl=0,Yl=function Buffer3(i,s,_){void 0===s&&(s=!0),void 0===_&&(_=!1),this.data=i||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=_,this.static=s,this.id=Kl++,this.disposeRunner=new Tl("disposeBuffer",2)};function getBufferType(i){if(4===i.BYTES_PER_ELEMENT)return i instanceof Float32Array?"Float32Array":i instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===i.BYTES_PER_ELEMENT){if(i instanceof Uint16Array)return"Uint16Array"}else if(1===i.BYTES_PER_ELEMENT&&i instanceof Uint8Array)return"Uint8Array";return null}Yl.prototype.update=function update2(i){this.data=i||this.data,this._updateID++},Yl.prototype.dispose=function dispose3(){this.disposeRunner.run(this,!1)},Yl.prototype.destroy=function destroy4(){this.dispose(),this.data=null},Yl.from=function from2(i){return i instanceof Array&&(i=new Float32Array(i)),new Yl(i)};var Xl={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var Ql={5126:4,5123:2,5121:1},Jl=0,ec={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},tc=function Geometry2(i,s){void 0===i&&(i=[]),void 0===s&&(s={}),this.buffers=i,this.indexBuffer=null,this.attributes=s,this.glVertexArrayObjects={},this.id=Jl++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Tl("disposeGeometry",2),this.refCount=0};tc.prototype.addAttribute=function addAttribute(i,s,_,T,S,C,P,O){if(void 0===T&&(T=!1),void 0===O&&(O=!1),!s)throw new Error("You must pass a buffer when creating an attribute");s.data||(s instanceof Array&&(s=new Float32Array(s)),s=new Yl(s));var M=i.split("|");if(M.length>1){for(var R=0;R<M.length;R++)this.addAttribute(M[R],s,_,T,S);return this}var D=this.buffers.indexOf(s);return-1===D&&(this.buffers.push(s),D=this.buffers.length-1),this.attributes[i]=new Wl(D,_,T,S,C,P,O),this.instanced=this.instanced||O,this},tc.prototype.getAttribute=function getAttribute(i){return this.attributes[i]},tc.prototype.getBuffer=function getBuffer(i){return this.buffers[this.getAttribute(i).buffer]},tc.prototype.addIndex=function addIndex(i){return i.data||(i instanceof Array&&(i=new Uint16Array(i)),i=new Yl(i)),i.index=!0,this.indexBuffer=i,-1===this.buffers.indexOf(i)&&this.buffers.push(i),this},tc.prototype.getIndex=function getIndex(){return this.indexBuffer},tc.prototype.interleave=function interleave(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var i,s=[],_=[],T=new Yl;for(i in this.attributes){var S=this.attributes[i],C=this.buffers[S.buffer];s.push(C.data),_.push(S.size*Ql[S.type]/4),S.buffer=0}for(T.data=function interleaveTypedArrays(i,s){for(var _=0,T=0,S={},C=0;C<i.length;C++)T+=s[C],_+=i[C].length;for(var P=new ArrayBuffer(4*_),O=null,M=0,R=0;R<i.length;R++){var D=s[R],j=i[R],$=getBufferType(j);S[$]||(S[$]=new Xl[$](P)),O=S[$];for(var U=0;U<j.length;U++)O[(U/D|0)*T+M+U%D]=j[U];M+=D}return new Float32Array(P)}(s,_),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[T],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},tc.prototype.getSize=function getSize(){for(var i in this.attributes){var s=this.attributes[i];return this.buffers[s.buffer].data.length/(s.stride/4||s.size)}return 0},tc.prototype.dispose=function dispose4(){this.disposeRunner.run(this,!1)},tc.prototype.destroy=function destroy5(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},tc.prototype.clone=function clone(){for(var i=new tc,s=0;s<this.buffers.length;s++)i.buffers[s]=new Yl(this.buffers[s].data.slice());for(var _ in this.attributes){var T=this.attributes[_];i.attributes[_]=new Wl(T.buffer,T.size,T.normalized,T.type,T.stride,T.start,T.instance)}return this.indexBuffer&&(i.indexBuffer=i.buffers[this.buffers.indexOf(this.indexBuffer)],i.indexBuffer.index=!0),i},tc.merge=function merge(i){for(var s,_=new tc,T=[],S=[],C=[],P=0;P<i.length;P++){s=i[P];for(var O=0;O<s.buffers.length;O++)S[O]=S[O]||0,S[O]+=s.buffers[O].data.length,C[O]=0}for(var M=0;M<s.buffers.length;M++)T[M]=new(ec[getBufferType(s.buffers[M].data)])(S[M]),_.buffers[M]=new Yl(T[M]);for(var R=0;R<i.length;R++){s=i[R];for(var D=0;D<s.buffers.length;D++)T[D].set(s.buffers[D].data,C[D]),C[D]+=s.buffers[D].data.length}if(_.attributes=s.attributes,s.indexBuffer){_.indexBuffer=_.buffers[s.buffers.indexOf(s.indexBuffer)],_.indexBuffer.index=!0;for(var j=0,$=0,U=0,V=0,Z=0;Z<s.buffers.length;Z++)if(s.buffers[Z]!==s.indexBuffer){V=Z;break}for(var Y in s.attributes){var X=s.attributes[Y];(0|X.buffer)===V&&($+=X.size*Ql[X.type]/4)}for(var Q=0;Q<i.length;Q++){for(var ee=i[Q].indexBuffer.data,te=0;te<ee.length;te++)_.indexBuffer.data[te+U]+=j;j+=s.buffers[V].data.length/$,U+=ee.length}}return _};var nc=function(i){function Quad2(){i.call(this),this.addAttribute("aVertexPosition",[0,0,1,0,1,1,0,1]).addIndex([0,1,3,2])}return i&&(Quad2.__proto__=i),Quad2.prototype=Object.create(i&&i.prototype),Quad2.prototype.constructor=Quad2,Quad2}(tc),rc=function(i){function QuadUv2(){i.call(this),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Yl(this.vertices),this.uvBuffer=new Yl(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}return i&&(QuadUv2.__proto__=i),QuadUv2.prototype=Object.create(i&&i.prototype),QuadUv2.prototype.constructor=QuadUv2,QuadUv2.prototype.map=function map2(i,s){var _=0,T=0;return this.uvs[0]=_,this.uvs[1]=T,this.uvs[2]=_+s.width/i.width,this.uvs[3]=T,this.uvs[4]=_+s.width/i.width,this.uvs[5]=T+s.height/i.height,this.uvs[6]=_,this.uvs[7]=T+s.height/i.height,_=s.x,T=s.y,this.vertices[0]=_,this.vertices[1]=T,this.vertices[2]=_+s.width,this.vertices[3]=T,this.vertices[4]=_+s.width,this.vertices[5]=T+s.height,this.vertices[6]=_,this.vertices[7]=T+s.height,this.invalidate(),this},QuadUv2.prototype.invalidate=function invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},QuadUv2}(tc),ic=0,ac=function UniformGroup2(i,s){this.uniforms=i,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=ic++,this.static=!!s};ac.prototype.update=function update3(){this.dirtyId++},ac.prototype.add=function add(i,s,_){this.uniforms[i]=new ac(s,_)},ac.from=function from3(i,s){return new ac(i,s)};var sc=function FilterState2(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new ul,this.destinationFrame=new ul,this.filters=[]};sc.prototype.clear=function clear3(){this.target=null,this.filters=null,this.renderTexture=null};var oc=function(i){function FilterSystem2(s){i.call(this,s),this.defaultFilterStack=[{}],this.texturePool=new Zl,this.texturePool.setScreenSize(s.view),this.statePool=[],this.quad=new nc,this.quadUv=new rc,this.tempRect=new ul,this.activeState={},this.globalUniforms=new ac({outputFrame:this.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this._pixelsWidth=s.view.width,this._pixelsHeight=s.view.height}return i&&(FilterSystem2.__proto__=i),FilterSystem2.prototype=Object.create(i&&i.prototype),FilterSystem2.prototype.constructor=FilterSystem2,FilterSystem2.prototype.push=function push(i,s){for(var _=this.renderer,T=this.defaultFilterStack,S=this.statePool.pop()||new sc,C=s[0].resolution,P=s[0].padding,O=s[0].autoFit,M=s[0].legacy,R=1;R<s.length;R++){var D=s[R];C=Math.min(C,D.resolution),P=Math.max(P,D.padding),O=O||D.autoFit,M=M||D.legacy}1===T.length&&(this.defaultFilterStack[0].renderTexture=_.renderTexture.current),T.push(S),S.resolution=C,S.legacy=M,S.target=i,S.sourceFrame.copyFrom(i.filterArea||i.getBounds(!0)),S.sourceFrame.pad(P),O&&S.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),S.sourceFrame.ceil(C),S.renderTexture=this.getOptimalFilterTexture(S.sourceFrame.width,S.sourceFrame.height,C),S.filters=s,S.destinationFrame.width=S.renderTexture.width,S.destinationFrame.height=S.renderTexture.height,S.renderTexture.filterFrame=S.sourceFrame,_.renderTexture.bind(S.renderTexture,S.sourceFrame),_.renderTexture.clear()},FilterSystem2.prototype.pop=function pop(){var i=this.defaultFilterStack,s=i.pop(),_=s.filters;this.activeState=s;var T=this.globalUniforms.uniforms;T.outputFrame=s.sourceFrame,T.resolution=s.resolution;var S=T.inputSize,C=T.inputPixel,P=T.inputClamp;if(S[0]=s.destinationFrame.width,S[1]=s.destinationFrame.height,S[2]=1/S[0],S[3]=1/S[1],C[0]=S[0]*s.resolution,C[1]=S[1]*s.resolution,C[2]=1/C[0],C[3]=1/C[1],P[0]=.5*C[2],P[1]=.5*C[3],P[2]=s.sourceFrame.width*S[2]-.5*C[2],P[3]=s.sourceFrame.height*S[3]-.5*C[3],s.legacy){var O=T.filterArea;O[0]=s.destinationFrame.width,O[1]=s.destinationFrame.height,O[2]=s.sourceFrame.x,O[3]=s.sourceFrame.y,T.filterClamp=T.inputClamp}this.globalUniforms.update();var M=i[i.length-1];if(1===_.length)_[0].apply(this,s.renderTexture,M.renderTexture,!1,s),this.returnFilterTexture(s.renderTexture);else{var R=s.renderTexture,D=this.getOptimalFilterTexture(R.width,R.height,s.resolution);D.filterFrame=R.filterFrame;var j=0;for(j=0;j<_.length-1;++j){_[j].apply(this,R,D,!0,s);var $=R;R=D,D=$}_[j].apply(this,R,M.renderTexture,!1,s),this.returnFilterTexture(R),this.returnFilterTexture(D)}s.clear(),this.statePool.push(s)},FilterSystem2.prototype.applyFilter=function applyFilter(i,s,_,T){var S=this.renderer;S.renderTexture.bind(_,_?_.filterFrame:null),T&&S.renderTexture.clear(),i.uniforms.uSampler=s,i.uniforms.filterGlobals=this.globalUniforms,S.state.set(i.state),S.shader.bind(i),i.legacy?(this.quadUv.map(s._frame,s.filterFrame),S.geometry.bind(this.quadUv),S.geometry.draw(Js.TRIANGLES)):(S.geometry.bind(this.quad),S.geometry.draw(Js.TRIANGLE_STRIP))},FilterSystem2.prototype.calculateSpriteMatrix=function calculateSpriteMatrix(i,s){var _=this.activeState,T=_.sourceFrame,S=_.destinationFrame,C=s._texture.orig,P=i.set(S.width,0,0,S.height,T.x,T.y),O=s.worldTransform.copyTo(Jo.TEMP_MATRIX);return O.invert(),P.prepend(O),P.scale(1/C.width,1/C.height),P.translate(s.anchor.x,s.anchor.y),P},FilterSystem2.prototype.destroy=function destroy10(){this.texturePool.clear(!1)},FilterSystem2.prototype.getOptimalFilterTexture=function getOptimalFilterTexture(i,s,_){return void 0===_&&(_=1),this.texturePool.getOptimalTexture(i,s,_)},FilterSystem2.prototype.getFilterTexture=function getFilterTexture2(i,s){if("number"==typeof i){var _=i;i=s,s=_}i=i||this.activeState.renderTexture;var T=this.texturePool.getOptimalTexture(i.width,i.height,s||i.resolution);return T.filterFrame=i.filterFrame,T},FilterSystem2.prototype.returnFilterTexture=function returnFilterTexture2(i){this.texturePool.returnTexture(i)},FilterSystem2.prototype.emptyPool=function emptyPool(){this.texturePool.clear(!0)},FilterSystem2.prototype.resize=function resize3(){this.texturePool.setScreenSize(this.renderer.view)},FilterSystem2}(jl),lc=function ObjectRenderer2(i){this.renderer=i};lc.prototype.flush=function flush(){},lc.prototype.destroy=function destroy6(){this.renderer=null},lc.prototype.start=function start(){},lc.prototype.stop=function stop(){this.flush()},lc.prototype.render=function render(i){};var cc=function(i){function BatchSystem2(s){i.call(this,s),this.emptyRenderer=new lc(s),this.currentRenderer=this.emptyRenderer}return i&&(BatchSystem2.__proto__=i),BatchSystem2.prototype=Object.create(i&&i.prototype),BatchSystem2.prototype.constructor=BatchSystem2,BatchSystem2.prototype.setObjectRenderer=function setObjectRenderer(i){this.currentRenderer!==i&&(this.currentRenderer.stop(),this.currentRenderer=i,this.currentRenderer.start())},BatchSystem2.prototype.flush=function flush2(){this.setObjectRenderer(this.emptyRenderer)},BatchSystem2.prototype.reset=function reset2(){this.setObjectRenderer(this.emptyRenderer)},BatchSystem2.prototype.copyBoundTextures=function copyBoundTextures(i,s){for(var _=this.renderer.texture.boundTextures,T=s-1;T>=0;--T)i[T]=_[T]||null,i[T]&&(i[T]._batchLocation=T)},BatchSystem2.prototype.boundArray=function boundArray(i,s,_,T){for(var S=i.elements,C=i.ids,P=i.count,O=0,M=0;M<P;M++){var R=S[M],D=R._batchLocation;if(D>=0&&D<T&&s[D]===R)C[M]=D;else for(;O<T;){var j=s[O];if(!j||j._batchEnabled!==_||j._batchLocation!==O){C[M]=O,R._batchLocation=O,s[O]=R;break}O++}}},BatchSystem2}(jl);Ns.PREFER_ENV=Rs.any?Zs.WEBGL:Zs.WEBGL2,Ns.STRICT_TEXTURE_CACHE=!1;var uc=0,dc=function(i){function ContextSystem2(s){i.call(this,s),this.webGLVersion=1,this.extensions={},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),s.view.addEventListener("webglcontextlost",this.handleContextLost,!1),s.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}i&&(ContextSystem2.__proto__=i),ContextSystem2.prototype=Object.create(i&&i.prototype),ContextSystem2.prototype.constructor=ContextSystem2;var s={isLost:{configurable:!0}};return s.isLost.get=function(){return!this.gl||this.gl.isContextLost()},ContextSystem2.prototype.contextChange=function contextChange(i){this.gl=i,this.renderer.gl=i,this.renderer.CONTEXT_UID=uc++,i.isContextLost()&&i.getExtension("WEBGL_lose_context")&&i.getExtension("WEBGL_lose_context").restoreContext()},ContextSystem2.prototype.initFromContext=function initFromContext(i){this.gl=i,this.validateContext(i),this.renderer.gl=i,this.renderer.CONTEXT_UID=uc++,this.renderer.runners.contextChange.run(i)},ContextSystem2.prototype.initFromOptions=function initFromOptions(i){var s=this.createContext(this.renderer.view,i);this.initFromContext(s)},ContextSystem2.prototype.createContext=function createContext2(i,s){var _;if(Ns.PREFER_ENV>=Zs.WEBGL2&&(_=i.getContext("webgl2",s)),_)this.webGLVersion=2;else if(this.webGLVersion=1,!(_=i.getContext("webgl",s)||i.getContext("experimental-webgl",s)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=_,this.getExtensions(),_},ContextSystem2.prototype.getExtensions=function getExtensions(){var i=this.gl;1===this.webGLVersion?Object.assign(this.extensions,{drawBuffers:i.getExtension("WEBGL_draw_buffers"),depthTexture:i.getExtension("WEBKIT_WEBGL_depth_texture"),loseContext:i.getExtension("WEBGL_lose_context"),vertexArrayObject:i.getExtension("OES_vertex_array_object")||i.getExtension("MOZ_OES_vertex_array_object")||i.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:i.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:i.getExtension("OES_element_index_uint"),floatTexture:i.getExtension("OES_texture_float"),floatTextureLinear:i.getExtension("OES_texture_float_linear"),textureHalfFloat:i.getExtension("OES_texture_half_float"),textureHalfFloatLinear:i.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,{anisotropicFiltering:i.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:i.getExtension("EXT_color_buffer_float"),floatTextureLinear:i.getExtension("OES_texture_float_linear")})},ContextSystem2.prototype.handleContextLost=function handleContextLost(i){i.preventDefault()},ContextSystem2.prototype.handleContextRestored=function handleContextRestored(){this.renderer.runners.contextChange.run(this.gl)},ContextSystem2.prototype.destroy=function destroy10(){var i=this.renderer.view;i.removeEventListener("webglcontextlost",this.handleContextLost),i.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},ContextSystem2.prototype.postrender=function postrender(){this.renderer.renderingToScreen&&this.gl.flush()},ContextSystem2.prototype.validateContext=function validateContext(i){i.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")},Object.defineProperties(ContextSystem2.prototype,s),ContextSystem2}(jl),hc=function(i){function FramebufferSystem2(s){i.call(this,s),this.managedFramebuffers=[],this.unknownFramebuffer=new $l(10,10)}i&&(FramebufferSystem2.__proto__=i),FramebufferSystem2.prototype=Object.create(i&&i.prototype),FramebufferSystem2.prototype.constructor=FramebufferSystem2;var s={size:{configurable:!0}};return FramebufferSystem2.prototype.contextChange=function contextChange(){var i=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new ul,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var s=this.renderer.context.extensions.drawBuffers,_=this.renderer.context.extensions.depthTexture;Ns.PREFER_ENV===Zs.WEBGL_LEGACY&&(s=null,_=null),s?i.drawBuffers=function(i){return s.drawBuffersWEBGL(i)}:(this.hasMRT=!1,i.drawBuffers=function(){}),_||(this.writeDepthTexture=!1)}},FramebufferSystem2.prototype.bind=function bind2(i,s){var _=this.gl;if(i){var T=i.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(i);this.current!==i&&(this.current=i,_.bindFramebuffer(_.FRAMEBUFFER,T.framebuffer)),T.dirtyId!==i.dirtyId&&(T.dirtyId=i.dirtyId,T.dirtyFormat!==i.dirtyFormat?(T.dirtyFormat=i.dirtyFormat,this.updateFramebuffer(i)):T.dirtySize!==i.dirtySize&&(T.dirtySize=i.dirtySize,this.resizeFramebuffer(i)));for(var S=0;S<i.colorTextures.length;S++)i.colorTextures[S].texturePart?this.renderer.texture.unbind(i.colorTextures[S].texture):this.renderer.texture.unbind(i.colorTextures[S]);i.depthTexture&&this.renderer.texture.unbind(i.depthTexture),s?this.setViewport(s.x,s.y,s.width,s.height):this.setViewport(0,0,i.width,i.height)}else this.current&&(this.current=null,_.bindFramebuffer(_.FRAMEBUFFER,null)),s?this.setViewport(s.x,s.y,s.width,s.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},FramebufferSystem2.prototype.setViewport=function setViewport(i,s,_,T){var S=this.viewport;S.width===_&&S.height===T&&S.x===i&&S.y===s||(S.x=i,S.y=s,S.width=_,S.height=T,this.gl.viewport(i,s,_,T))},s.size.get=function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},FramebufferSystem2.prototype.clear=function clear5(i,s,_,T){var S=this.gl;S.clearColor(i,s,_,T),S.clear(S.COLOR_BUFFER_BIT|S.DEPTH_BUFFER_BIT)},FramebufferSystem2.prototype.initFramebuffer=function initFramebuffer(i){var s={framebuffer:this.gl.createFramebuffer(),stencil:null,dirtyId:0,dirtyFormat:0,dirtySize:0};return i.glFramebuffers[this.CONTEXT_UID]=s,this.managedFramebuffers.push(i),i.disposeRunner.add(this),s},FramebufferSystem2.prototype.resizeFramebuffer=function resizeFramebuffer(i){var s=this.gl,_=i.glFramebuffers[this.CONTEXT_UID];_.stencil&&(s.bindRenderbuffer(s.RENDERBUFFER,_.stencil),s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,i.width,i.height));for(var T=i.colorTextures,S=0;S<T.length;S++)this.renderer.texture.bind(T[S],0);i.depthTexture&&this.renderer.texture.bind(i.depthTexture,0)},FramebufferSystem2.prototype.updateFramebuffer=function updateFramebuffer(i){var s=this.gl,_=i.glFramebuffers[this.CONTEXT_UID],T=i.colorTextures.length;s.drawBuffers||(T=Math.min(T,1));for(var S=[],C=0;C<T;C++){var P=i.colorTextures[C];P.texturePart?(this.renderer.texture.bind(P.texture,0),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+C,s.TEXTURE_CUBE_MAP_NEGATIVE_X+P.side,P.texture._glTextures[this.CONTEXT_UID].texture,0)):(this.renderer.texture.bind(P,0),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+C,s.TEXTURE_2D,P._glTextures[this.CONTEXT_UID].texture,0)),S.push(s.COLOR_ATTACHMENT0+C)}if((S.length>1&&s.drawBuffers(S),i.depthTexture)&&this.writeDepthTexture){var O=i.depthTexture;this.renderer.texture.bind(O,0),s.framebufferTexture2D(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.TEXTURE_2D,O._glTextures[this.CONTEXT_UID].texture,0)}_.stencil||!i.stencil&&!i.depth||(_.stencil=s.createRenderbuffer(),s.bindRenderbuffer(s.RENDERBUFFER,_.stencil),s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,i.width,i.height),i.depthTexture||s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,_.stencil))},FramebufferSystem2.prototype.disposeFramebuffer=function disposeFramebuffer(i,s){var _=i.glFramebuffers[this.CONTEXT_UID],T=this.gl;if(_){delete i.glFramebuffers[this.CONTEXT_UID];var S=this.managedFramebuffers.indexOf(i);S>=0&&this.managedFramebuffers.splice(S,1),i.disposeRunner.remove(this),s||(T.deleteFramebuffer(_.framebuffer),_.stencil&&T.deleteRenderbuffer(_.stencil))}},FramebufferSystem2.prototype.disposeAll=function disposeAll(i){var s=this.managedFramebuffers;this.managedFramebuffers=[];for(var _=0;_<s.length;_++)this.disposeFramebuffer(s[_],i)},FramebufferSystem2.prototype.forceStencil=function forceStencil(){var i=this.current;if(i){var s=i.glFramebuffers[this.CONTEXT_UID];if(s&&!s.stencil){i.enableStencil();var _=i.width,T=i.height,S=this.gl,C=S.createRenderbuffer();S.bindRenderbuffer(S.RENDERBUFFER,C),S.renderbufferStorage(S.RENDERBUFFER,S.DEPTH_STENCIL,_,T),s.stencil=C,S.framebufferRenderbuffer(S.FRAMEBUFFER,S.DEPTH_STENCIL_ATTACHMENT,S.RENDERBUFFER,C)}}},FramebufferSystem2.prototype.reset=function reset2(){this.current=this.unknownFramebuffer,this.viewport=new ul},Object.defineProperties(FramebufferSystem2.prototype,s),FramebufferSystem2}(jl),pc=function GLBuffer2(i){this.buffer=i,this.updateID=-1,this.byteLength=-1,this.refCount=0},mc={5126:4,5123:2,5121:1},fc=function(i){function GeometrySystem2(s){i.call(this,s),this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.boundBuffers={},this.managedGeometries={},this.managedBuffers={}}return i&&(GeometrySystem2.__proto__=i),GeometrySystem2.prototype=Object.create(i&&i.prototype),GeometrySystem2.prototype.constructor=GeometrySystem2,GeometrySystem2.prototype.contextChange=function contextChange(){this.disposeAll(!0);var i=this.gl=this.renderer.gl,s=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,!i.createVertexArray){var _=this.renderer.context.extensions.vertexArrayObject;Ns.PREFER_ENV===Zs.WEBGL_LEGACY&&(_=null),_?(i.createVertexArray=function(){return _.createVertexArrayOES()},i.bindVertexArray=function(i){return _.bindVertexArrayOES(i)},i.deleteVertexArray=function(i){return _.deleteVertexArrayOES(i)}):(this.hasVao=!1,i.createVertexArray=function(){},i.bindVertexArray=function(){},i.deleteVertexArray=function(){})}if(!i.vertexAttribDivisor){var T=i.getExtension("ANGLE_instanced_arrays");T?(i.vertexAttribDivisor=function(i,s){return T.vertexAttribDivisorANGLE(i,s)},i.drawElementsInstanced=function(i,s,_,S,C){return T.drawElementsInstancedANGLE(i,s,_,S,C)},i.drawArraysInstanced=function(i,s,_,S){return T.drawArraysInstancedANGLE(i,s,_,S)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===s.webGLVersion||!!s.extensions.uint32ElementIndex},GeometrySystem2.prototype.bind=function bind2(i,s){s=s||this.renderer.shader.shader;var _=this.gl,T=i.glVertexArrayObjects[this.CONTEXT_UID];T||(this.managedGeometries[i.id]=i,i.disposeRunner.add(this),i.glVertexArrayObjects[this.CONTEXT_UID]=T={});var S=T[s.program.id]||this.initGeometryVao(i,s.program);this._activeGeometry=i,this._activeVao!==S&&(this._activeVao=S,this.hasVao?_.bindVertexArray(S):this.activateVao(i,s.program)),this.updateBuffers()},GeometrySystem2.prototype.reset=function reset2(){this.unbind()},GeometrySystem2.prototype.updateBuffers=function updateBuffers(){for(var i=this._activeGeometry,s=this.gl,_=0;_<i.buffers.length;_++){var T=i.buffers[_],S=T._glBuffers[this.CONTEXT_UID];if(T._updateID!==S.updateID){S.updateID=T._updateID;var C=T.index?s.ELEMENT_ARRAY_BUFFER:s.ARRAY_BUFFER;if(s.bindBuffer(C,S.buffer),this._boundBuffer=S,S.byteLength>=T.data.byteLength)s.bufferSubData(C,0,T.data);else{var P=T.static?s.STATIC_DRAW:s.DYNAMIC_DRAW;S.byteLength=T.data.byteLength,s.bufferData(C,T.data,P)}}}},GeometrySystem2.prototype.checkCompatibility=function checkCompatibility(i,s){var _=i.attributes,T=s.attributeData;for(var S in T)if(!_[S])throw new Error('shader and geometry incompatible, geometry missing the "'+S+'" attribute')},GeometrySystem2.prototype.getSignature=function getSignature(i,s){var _=i.attributes,T=s.attributeData,S=["g",i.id];for(var C in _)T[C]&&S.push(C);return S.join("-")},GeometrySystem2.prototype.initGeometryVao=function initGeometryVao(i,s){this.checkCompatibility(i,s);var _=this.gl,T=this.CONTEXT_UID,S=this.getSignature(i,s),C=i.glVertexArrayObjects[this.CONTEXT_UID],P=C[S];if(P)return C[s.id]=P,P;var O=i.buffers,M=i.attributes,R={},D={};for(var j in O)R[j]=0,D[j]=0;for(var $ in M)!M[$].size&&s.attributeData[$]?M[$].size=s.attributeData[$].size:M[$].size||console.warn("PIXI Geometry attribute '"+$+"' size cannot be determined (likely the bound shader does not have the attribute)"),R[M[$].buffer]+=M[$].size*mc[M[$].type];for(var U in M){var V=M[U],Z=V.size;void 0===V.stride&&(R[V.buffer]===Z*mc[V.type]?V.stride=0:V.stride=R[V.buffer]),void 0===V.start&&(V.start=D[V.buffer],D[V.buffer]+=Z*mc[V.type])}P=_.createVertexArray(),_.bindVertexArray(P);for(var Y=0;Y<O.length;Y++){var X=O[Y];X._glBuffers[T]||(X._glBuffers[T]=new pc(_.createBuffer()),this.managedBuffers[X.id]=X,X.disposeRunner.add(this)),X._glBuffers[T].refCount++}return this.activateVao(i,s),this._activeVao=P,C[s.id]=P,C[S]=P,P},GeometrySystem2.prototype.disposeBuffer=function disposeBuffer(i,s){if(this.managedBuffers[i.id]){delete this.managedBuffers[i.id];var _=i._glBuffers[this.CONTEXT_UID],T=this.gl;i.disposeRunner.remove(this),_&&(s||T.deleteBuffer(_.buffer),delete i._glBuffers[this.CONTEXT_UID])}},GeometrySystem2.prototype.disposeGeometry=function disposeGeometry(i,s){if(this.managedGeometries[i.id]){delete this.managedGeometries[i.id];var _=i.glVertexArrayObjects[this.CONTEXT_UID],T=this.gl,S=i.buffers;if(i.disposeRunner.remove(this),_){for(var C=0;C<S.length;C++){var P=S[C]._glBuffers[this.CONTEXT_UID];P.refCount--,0!==P.refCount||s||this.disposeBuffer(S[C],s)}if(!s)for(var O in _)if("g"===O[0]){var M=_[O];this._activeVao===M&&this.unbind(),T.deleteVertexArray(M)}delete i.glVertexArrayObjects[this.CONTEXT_UID]}}},GeometrySystem2.prototype.disposeAll=function disposeAll(i){for(var s=Object.keys(this.managedGeometries),_=0;_<s.length;_++)this.disposeGeometry(this.managedGeometries[s[_]],i);s=Object.keys(this.managedBuffers);for(var T=0;T<s.length;T++)this.disposeBuffer(this.managedBuffers[s[T]],i)},GeometrySystem2.prototype.activateVao=function activateVao(i,s){var _=this.gl,T=this.CONTEXT_UID,S=i.buffers,C=i.attributes;i.indexBuffer&&_.bindBuffer(_.ELEMENT_ARRAY_BUFFER,i.indexBuffer._glBuffers[T].buffer);var P=null;for(var O in C){var M=C[O],R=S[M.buffer]._glBuffers[T];if(s.attributeData[O]){P!==R&&(_.bindBuffer(_.ARRAY_BUFFER,R.buffer),P=R);var D=s.attributeData[O].location;if(_.enableVertexAttribArray(D),_.vertexAttribPointer(D,M.size,M.type||_.FLOAT,M.normalized,M.stride,M.start),M.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");_.vertexAttribDivisor(D,1)}}}},GeometrySystem2.prototype.draw=function draw(i,s,_,T){var S=this.gl,C=this._activeGeometry;if(C.indexBuffer){var P=C.indexBuffer.data.BYTES_PER_ELEMENT,O=2===P?S.UNSIGNED_SHORT:S.UNSIGNED_INT;2===P||4===P&&this.canUseUInt32ElementIndex?C.instanced?S.drawElementsInstanced(i,s||C.indexBuffer.data.length,O,(_||0)*P,T||1):S.drawElements(i,s||C.indexBuffer.data.length,O,(_||0)*P):console.warn("unsupported index buffer type: uint32")}else C.instanced?S.drawArraysInstanced(i,_,s||C.getSize(),T||1):S.drawArrays(i,_,s||C.getSize());return this},GeometrySystem2.prototype.unbind=function unbind2(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},GeometrySystem2}(jl),gc=function MaskData2(i){this.type=wo.NONE,this.autoDetect=!0,this.maskObject=i||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null};function compileProgram(i,s,_,T){var S=compileShader(i,i.VERTEX_SHADER,s),C=compileShader(i,i.FRAGMENT_SHADER,_),P=i.createProgram();if(i.attachShader(P,S),i.attachShader(P,C),T)for(var O in T)i.bindAttribLocation(P,T[O],O);return i.linkProgram(P),i.getProgramParameter(P,i.LINK_STATUS)||(i.getShaderParameter(S,i.COMPILE_STATUS)||(console.warn(s),console.error(i.getShaderInfoLog(S))),i.getShaderParameter(C,i.COMPILE_STATUS)||(console.warn(_),console.error(i.getShaderInfoLog(C))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",i.getProgramParameter(P,i.VALIDATE_STATUS)),console.error("gl.getError()",i.getError()),""!==i.getProgramInfoLog(P)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",i.getProgramInfoLog(P)),i.deleteProgram(P),P=null),i.deleteShader(S),i.deleteShader(C),P}function compileShader(i,s,_){var T=i.createShader(s);return i.shaderSource(T,_),i.compileShader(T),T}function defaultValue(i,s){switch(i){case"float":case"int":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*s);case"vec3":return new Float32Array(3*s);case"vec4":return new Float32Array(4*s);case"ivec2":return new Int32Array(2*s);case"ivec3":return new Int32Array(3*s);case"ivec4":return new Int32Array(4*s);case"bool":return!1;case"bvec2":return booleanArray(2*s);case"bvec3":return booleanArray(3*s);case"bvec4":return booleanArray(4*s);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}function booleanArray(i){for(var s=new Array(i),_=0;_<s.length;_++)s[_]=!1;return s}gc.prototype.reset=function reset(){this.pooled&&(this.maskObject=null,this.type=wo.NONE,this.autoDetect=!0),this._target=null},gc.prototype.copyCountersOrReset=function copyCountersOrReset(i){i?(this._stencilCounter=i._stencilCounter,this._scissorCounter=i._scissorCounter,this._scissorRect=i._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)};var vc,bc={},yc=bc;function getTestContext(){if(yc===bc||yc&&yc.isContextLost()){var i,s=document.createElement("canvas");Ns.PREFER_ENV>=Zs.WEBGL2&&(i=s.getContext("webgl2",{})),i||((i=s.getContext("webgl",{})||s.getContext("experimental-webgl",{}))?i.getExtension("WEBGL_draw_buffers"):i=null),yc=i}return yc}function setPrecision(i,s,_){if("precision"!==i.substring(0,9)){var T=s;return s===yo.HIGH&&_!==yo.HIGH&&(T=yo.MEDIUM),"precision "+T+" float;\n"+i}return _!==yo.HIGH&&"precision highp"===i.substring(0,15)?i.replace("precision highp","precision mediump"):i}var _c={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function mapSize(i){return _c[i]}var wc=null,kc={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray"};function mapType(i,s){if(!wc){var _=Object.keys(kc);wc={};for(var T=0;T<_.length;++T){var S=_[T];wc[i[S]]=kc[S]}}return wc[s]}var Tc={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Sc={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var Cc,xc=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function generateIfTestSrc(i){for(var s="",_=0;_<i;++_)_>0&&(s+="\nelse "),_<i-1&&(s+="if(test == "+_+".0){}");return s}var Ec=0,Pc={},Ac=function Program2(i,s,_){void 0===_&&(_="pixi-shader"),this.id=Ec++,this.vertexSrc=i||Program2.defaultVertexSrc,this.fragmentSrc=s||Program2.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(_=_.replace(/\s+/g,"-"),Pc[_]?(Pc[_]++,_+="-"+Pc[_]):Pc[_]=1,this.vertexSrc="#define SHADER_NAME "+_+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+_+"\n"+this.fragmentSrc,this.vertexSrc=setPrecision(this.vertexSrc,Ns.PRECISION_VERTEX,yo.HIGH),this.fragmentSrc=setPrecision(this.fragmentSrc,Ns.PRECISION_FRAGMENT,function getMaxFragmentPrecision(){if(!vc){vc=yo.MEDIUM;var i=getTestContext();if(i&&i.getShaderPrecisionFormat){var s=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);vc=s.precision?yo.HIGH:yo.MEDIUM}}return vc}())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null},Oc={defaultVertexSrc:{configurable:!0},defaultFragmentSrc:{configurable:!0}};Ac.prototype.extractData=function extractData(i,s){var _=getTestContext();if(_){var T=compileProgram(_,i,s);this.attributeData=this.getAttributeData(T,_),this.uniformData=this.getUniformData(T,_),_.deleteProgram(T)}else this.uniformData={},this.attributeData={}},Ac.prototype.getAttributeData=function getAttributeData(i,s){for(var _={},T=[],S=s.getProgramParameter(i,s.ACTIVE_ATTRIBUTES),C=0;C<S;C++){var P=s.getActiveAttrib(i,C),O=mapType(s,P.type),M={type:O,name:P.name,size:mapSize(O),location:0};_[P.name]=M,T.push(M)}T.sort((function(i,s){return i.name>s.name?1:-1}));for(var R=0;R<T.length;R++)T[R].location=R;return _},Ac.prototype.getUniformData=function getUniformData(i,s){for(var _={},T=s.getProgramParameter(i,s.ACTIVE_UNIFORMS),S=0;S<T;S++){var C=s.getActiveUniform(i,S),P=C.name.replace(/\[.*?\]/,""),O=C.name.match(/\[.*?\]/,""),M=mapType(s,C.type);_[P]={type:M,size:C.size,isArray:O,value:defaultValue(M,C.size)}}return _},Oc.defaultVertexSrc.get=function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},Oc.defaultFragmentSrc.get=function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},Ac.from=function from4(i,s,_){var T=i+s,S=Fo[T];return S||(Fo[T]=S=new Ac(i,s,_)),S},Object.defineProperties(Ac,Oc);var Mc=function Shader2(i,s){for(var _ in this.program=i,this.uniformGroup=s?s instanceof ac?s:new ac(s):new ac({}),i.uniformData)this.uniformGroup.uniforms[_]instanceof Array&&(this.uniformGroup.uniforms[_]=new Float32Array(this.uniformGroup.uniforms[_]))},zc={uniforms:{configurable:!0}};Mc.prototype.checkUniformExists=function checkUniformExists(i,s){if(s.uniforms[i])return!0;for(var _ in s.uniforms){var T=s.uniforms[_];if(T.group&&this.checkUniformExists(i,T))return!0}return!1},Mc.prototype.destroy=function destroy7(){this.uniformGroup=null},zc.uniforms.get=function(){return this.uniformGroup.uniforms},Mc.from=function from5(i,s,_){var T=Ac.from(i,s);return new Mc(T,_)},Object.defineProperties(Mc.prototype,zc);var Ic=function State2(){this.data=0,this.blendMode=Xs.NORMAL,this.polygonOffset=0,this.blend=!0},Lc={blend:{configurable:!0},offsets:{configurable:!0},culling:{configurable:!0},depthTest:{configurable:!0},clockwiseFrontFace:{configurable:!0},blendMode:{configurable:!0},polygonOffset:{configurable:!0}};Lc.blend.get=function(){return!!(1&this.data)},Lc.blend.set=function(i){!!(1&this.data)!==i&&(this.data^=1)},Lc.offsets.get=function(){return!!(2&this.data)},Lc.offsets.set=function(i){!!(2&this.data)!==i&&(this.data^=2)},Lc.culling.get=function(){return!!(4&this.data)},Lc.culling.set=function(i){!!(4&this.data)!==i&&(this.data^=4)},Lc.depthTest.get=function(){return!!(8&this.data)},Lc.depthTest.set=function(i){!!(8&this.data)!==i&&(this.data^=8)},Lc.clockwiseFrontFace.get=function(){return!!(16&this.data)},Lc.clockwiseFrontFace.set=function(i){!!(16&this.data)!==i&&(this.data^=16)},Lc.blendMode.get=function(){return this._blendMode},Lc.blendMode.set=function(i){this.blend=i!==Xs.NONE,this._blendMode=i},Lc.polygonOffset.get=function(){return this._polygonOffset},Lc.polygonOffset.set=function(i){this.offsets=!!i,this._polygonOffset=i},Ic.for2d=function for2d(){var i=new Ic;return i.depthTest=!1,i.blend=!0,i},Object.defineProperties(Ic.prototype,Lc);var Rc=function(i){function Filter2(s,_,T){var S=Ac.from(s||Filter2.defaultVertexSrc,_||Filter2.defaultFragmentSrc);i.call(this,S,T),this.padding=0,this.resolution=Ns.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0,this.legacy=!!this.program.attributeData.aTextureCoord,this.state=new Ic}i&&(Filter2.__proto__=i),Filter2.prototype=Object.create(i&&i.prototype),Filter2.prototype.constructor=Filter2;var s={blendMode:{configurable:!0}},_={defaultVertexSrc:{configurable:!0},defaultFragmentSrc:{configurable:!0}};return Filter2.prototype.apply=function apply(i,s,_,T,S){i.applyFilter(this,s,_,T,S)},s.blendMode.get=function(){return this.state.blendMode},s.blendMode.set=function(i){this.state.blendMode=i},_.defaultVertexSrc.get=function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},_.defaultFragmentSrc.get=function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},Object.defineProperties(Filter2.prototype,s),Object.defineProperties(Filter2,_),Filter2}(Mc);Rc.SOURCE_KEY_MAP={};var Nc=new Jo,Dc=function TextureMatrix2(i,s){this._texture=i,this.mapCoord=new Jo,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._updateID=-1,this.clampOffset=0,this.clampMargin=void 0===s?.5:s,this.isSimple=!1},jc={texture:{configurable:!0}};jc.texture.get=function(){return this._texture},jc.texture.set=function(i){this._texture=i,this._updateID=-1},Dc.prototype.multiplyUvs=function multiplyUvs(i,s){void 0===s&&(s=i);for(var _=this.mapCoord,T=0;T<i.length;T+=2){var S=i[T],C=i[T+1];s[T]=S*_.a+C*_.c+_.tx,s[T+1]=S*_.b+C*_.d+_.ty}return s},Dc.prototype.update=function update4(i){var s=this._texture;if(!s||!s.valid)return!1;if(!i&&this._updateID===s._updateID)return!1;this._updateID=s._updateID;var _=s._uvs;this.mapCoord.set(_.x1-_.x0,_.y1-_.y0,_.x3-_.x0,_.y3-_.y0,_.x0,_.y0);var T=s.orig,S=s.trim;S&&(Nc.set(T.width/S.width,0,0,T.height/S.height,-S.x/S.width,-S.y/S.height),this.mapCoord.append(Nc));var C=s.baseTexture,P=this.uClampFrame,O=this.clampMargin/C.resolution,M=this.clampOffset;return P[0]=(s._frame.x+O+M)/C.width,P[1]=(s._frame.y+O+M)/C.height,P[2]=(s._frame.x+s._frame.width-O+M)/C.width,P[3]=(s._frame.y+s._frame.height-O+M)/C.height,this.uClampOffset[0]=M/C.realWidth,this.uClampOffset[1]=M/C.realHeight,this.isSimple=s._frame.width===C.width&&s._frame.height===C.height&&0===s.rotate,!0},Object.defineProperties(Dc.prototype,jc);var Bc=function(i){function SpriteMaskFilter2(s){var _=new Jo;i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n"),s.renderable=!1,this.maskSprite=s,this.maskMatrix=_}return i&&(SpriteMaskFilter2.__proto__=i),SpriteMaskFilter2.prototype=Object.create(i&&i.prototype),SpriteMaskFilter2.prototype.constructor=SpriteMaskFilter2,SpriteMaskFilter2.prototype.apply=function apply(i,s,_,T){var S=this.maskSprite,C=this.maskSprite.texture;C.valid&&(C.transform||(C.transform=new Dc(C,0)),C.transform.update(),this.uniforms.npmAlpha=C.baseTexture.alphaMode?0:1,this.uniforms.mask=C,this.uniforms.otherMatrix=i.calculateSpriteMatrix(this.maskMatrix,S).prepend(C.transform.mapCoord),this.uniforms.alpha=S.worldAlpha,this.uniforms.maskClamp=C.transform.uClampFrame,i.applyFilter(this,s,_,T))},SpriteMaskFilter2}(Rc),$c=function(i){function MaskSystem2(s){i.call(this,s),this.scissorRenderTarget=null,this.enableScissor=!1,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return i&&(MaskSystem2.__proto__=i),MaskSystem2.prototype=Object.create(i&&i.prototype),MaskSystem2.prototype.constructor=MaskSystem2,MaskSystem2.prototype.setMaskStack=function setMaskStack(i){this.maskStack=i,this.renderer.scissor.setMaskStack(i),this.renderer.stencil.setMaskStack(i)},MaskSystem2.prototype.push=function push(i,s){if(!s.isMaskData){var _=this.maskDataPool.pop()||new gc;_.pooled=!0,_.maskObject=s,s=_}switch(s.autoDetect&&this.detect(s),s.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),s._target=i,s.type){case wo.SCISSOR:this.maskStack.push(s),this.renderer.scissor.push(s);break;case wo.STENCIL:this.maskStack.push(s),this.renderer.stencil.push(s);break;case wo.SPRITE:s.copyCountersOrReset(null),this.pushSpriteMask(s),this.maskStack.push(s)}},MaskSystem2.prototype.pop=function pop(i){var s=this.maskStack.pop();if(s&&s._target===i){switch(s.type){case wo.SCISSOR:this.renderer.scissor.pop();break;case wo.STENCIL:this.renderer.stencil.pop(s.maskObject);break;case wo.SPRITE:this.popSpriteMask()}s.reset(),s.pooled&&this.maskDataPool.push(s)}},MaskSystem2.prototype.detect=function detect(i){var s=i.maskObject;if(s.isSprite)i.type=wo.SPRITE;else if(i.type=wo.STENCIL,this.enableScissor&&s.isFastRect&&s.isFastRect()){var _=s.worldTransform,T=Math.atan2(_.b,_.a),S=Math.atan2(_.d,_.c);T=Math.round(T*(180/Math.PI)*100),S=((S=Math.round(S*(180/Math.PI)*100)-T)%18e3+18e3)%18e3,0===(T=(T%9e3+9e3)%9e3)&&9e3===S&&(i.type=wo.SCISSOR)}},MaskSystem2.prototype.pushSpriteMask=function pushSpriteMask(i){var s=i.maskObject,_=i._target,T=this.alphaMaskPool[this.alphaMaskIndex];T||(T=this.alphaMaskPool[this.alphaMaskIndex]=[new Bc(s)]),T[0].resolution=this.renderer.resolution,T[0].maskSprite=s;var S=_.filterArea;_.filterArea=s.getBounds(!0),this.renderer.filter.push(_,T),_.filterArea=S,this.alphaMaskIndex++},MaskSystem2.prototype.popSpriteMask=function popSpriteMask(){this.renderer.filter.pop(),this.alphaMaskIndex--},MaskSystem2}(jl),Uc=function(i){function AbstractMaskSystem2(s){i.call(this,s),this.maskStack=[],this.glConst=0}return i&&(AbstractMaskSystem2.__proto__=i),AbstractMaskSystem2.prototype=Object.create(i&&i.prototype),AbstractMaskSystem2.prototype.constructor=AbstractMaskSystem2,AbstractMaskSystem2.prototype.getStackLength=function getStackLength(){return this.maskStack.length},AbstractMaskSystem2.prototype.setMaskStack=function setMaskStack(i){var s=this.renderer.gl,_=this.getStackLength();this.maskStack=i;var T=this.getStackLength();T!==_&&(0===T?s.disable(this.glConst):(s.enable(this.glConst),this._useCurrent()))},AbstractMaskSystem2.prototype._useCurrent=function _useCurrent(){},AbstractMaskSystem2.prototype.destroy=function destroy10(){i.prototype.destroy.call(this,this),this.maskStack=null},AbstractMaskSystem2}(jl),Fc=function(i){function ScissorSystem2(s){i.call(this,s),this.glConst=WebGLRenderingContext.SCISSOR_TEST}return i&&(ScissorSystem2.__proto__=i),ScissorSystem2.prototype=Object.create(i&&i.prototype),ScissorSystem2.prototype.constructor=ScissorSystem2,ScissorSystem2.prototype.getStackLength=function getStackLength(){var i=this.maskStack[this.maskStack.length-1];return i?i._scissorCounter:0},ScissorSystem2.prototype.push=function push(i){var s=i.maskObject;s.renderable=!0;var _=i._scissorRect,T=s.getBounds(!0),S=this.renderer.gl;s.renderable=!1,_?T.fit(_):S.enable(S.SCISSOR_TEST),i._scissorCounter++,i._scissorRect=T,this._useCurrent()},ScissorSystem2.prototype.pop=function pop(){var i=this.renderer.gl;this.getStackLength()>0?this._useCurrent():i.disable(i.SCISSOR_TEST)},ScissorSystem2.prototype._useCurrent=function _useCurrent(){var i=this.maskStack[this.maskStack.length-1]._scissorRect,s=this.renderer.renderTexture.current,_=this.renderer.projection,T=_.transform,S=_.sourceFrame,C=_.destinationFrame,P=s?s.resolution:this.renderer.resolution,O=(i.x-S.x)*P+C.x,M=(i.y-S.y)*P+C.y,R=i.width*P,D=i.height*P;T&&(O+=T.tx*P,M+=T.ty*P),s||(M=this.renderer.height-D-M),this.renderer.gl.scissor(O,M,R,D)},ScissorSystem2}(Uc),Hc=function(i){function StencilSystem2(s){i.call(this,s),this.glConst=WebGLRenderingContext.STENCIL_TEST}return i&&(StencilSystem2.__proto__=i),StencilSystem2.prototype=Object.create(i&&i.prototype),StencilSystem2.prototype.constructor=StencilSystem2,StencilSystem2.prototype.getStackLength=function getStackLength(){var i=this.maskStack[this.maskStack.length-1];return i?i._stencilCounter:0},StencilSystem2.prototype.push=function push(i){var s=i.maskObject,_=this.renderer.gl,T=i._stencilCounter;0===T&&(this.renderer.framebuffer.forceStencil(),_.enable(_.STENCIL_TEST)),i._stencilCounter++,_.colorMask(!1,!1,!1,!1),_.stencilFunc(_.EQUAL,T,this._getBitwiseMask()),_.stencilOp(_.KEEP,_.KEEP,_.INCR),s.renderable=!0,s.render(this.renderer),this.renderer.batch.flush(),s.renderable=!1,this._useCurrent()},StencilSystem2.prototype.pop=function pop(i){var s=this.renderer.gl;0===this.getStackLength()?(s.disable(s.STENCIL_TEST),s.clear(s.STENCIL_BUFFER_BIT),s.clearStencil(0)):(s.colorMask(!1,!1,!1,!1),s.stencilOp(s.KEEP,s.KEEP,s.DECR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,this._useCurrent())},StencilSystem2.prototype._useCurrent=function _useCurrent(){var i=this.renderer.gl;i.colorMask(!0,!0,!0,!0),i.stencilFunc(i.EQUAL,this.getStackLength(),this._getBitwiseMask()),i.stencilOp(i.KEEP,i.KEEP,i.KEEP)},StencilSystem2.prototype._getBitwiseMask=function _getBitwiseMask(){return(1<<this.getStackLength())-1},StencilSystem2}(Uc),qc=function(i){function ProjectionSystem2(s){i.call(this,s),this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Jo,this.transform=null}return i&&(ProjectionSystem2.__proto__=i),ProjectionSystem2.prototype=Object.create(i&&i.prototype),ProjectionSystem2.prototype.constructor=ProjectionSystem2,ProjectionSystem2.prototype.update=function update5(i,s,_,T){this.destinationFrame=i||this.destinationFrame||this.defaultFrame,this.sourceFrame=s||this.sourceFrame||i,this.calculateProjection(this.destinationFrame,this.sourceFrame,_,T),this.transform&&this.projectionMatrix.append(this.transform);var S=this.renderer;S.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,S.globalUniforms.update(),S.shader.shader&&S.shader.syncUniformGroup(S.shader.shader.uniforms.globals)},ProjectionSystem2.prototype.calculateProjection=function calculateProjection(i,s,_,T){var S=this.projectionMatrix;T?(S.a=1/i.width*2*_,S.d=-1/i.height*2*_,S.tx=-1-s.x*S.a,S.ty=1-s.y*S.d):(S.a=1/i.width*2*_,S.d=1/i.height*2*_,S.tx=-1-s.x*S.a,S.ty=-1-s.y*S.d)},ProjectionSystem2.prototype.setTransform=function setTransform(){},ProjectionSystem2}(jl),Vc=new ul,Gc=function(i){function RenderTextureSystem2(s){i.call(this,s),this.clearColor=s._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new ul,this.destinationFrame=new ul}return i&&(RenderTextureSystem2.__proto__=i),RenderTextureSystem2.prototype=Object.create(i&&i.prototype),RenderTextureSystem2.prototype.constructor=RenderTextureSystem2,RenderTextureSystem2.prototype.bind=function bind2(i,s,_){void 0===i&&(i=null),this.current=i;var T,S=this.renderer;if(i){var C=i.baseTexture;T=C.resolution,_||(Vc.width=C.realWidth,Vc.height=C.realHeight,_=Vc),s||(s=_),this.renderer.framebuffer.bind(C.framebuffer,_),this.renderer.projection.update(_,s,T,!1),this.renderer.mask.setMaskStack(C.maskStack)}else T=this.renderer.resolution,_||(Vc.width=S.width,Vc.height=S.height,_=Vc),s||(s=_),S.framebuffer.bind(null,_),this.renderer.projection.update(_,s,T,!0),this.renderer.mask.setMaskStack(this.defaultMaskStack);this.sourceFrame.copyFrom(s),this.destinationFrame.x=_.x/T,this.destinationFrame.y=_.y/T,this.destinationFrame.width=_.width/T,this.destinationFrame.height=_.height/T,s===_&&this.sourceFrame.copyFrom(this.destinationFrame)},RenderTextureSystem2.prototype.clear=function clear5(i){i=this.current?i||this.current.baseTexture.clearColor:i||this.clearColor,this.renderer.framebuffer.clear(i[0],i[1],i[2],i[3])},RenderTextureSystem2.prototype.resize=function resize3(){this.bind(null)},RenderTextureSystem2.prototype.reset=function reset2(){this.bind(null)},RenderTextureSystem2}(jl),Zc=function GLProgram2(i,s){this.program=i,this.uniformData=s,this.uniformGroups={}};Zc.prototype.destroy=function destroy8(){this.uniformData=null,this.uniformGroups=null,this.program=null};var Wc=0,Kc={textureCount:0},Yc=function(i){function ShaderSystem2(s){i.call(this,s),this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this.id=Wc++}return i&&(ShaderSystem2.__proto__=i),ShaderSystem2.prototype=Object.create(i&&i.prototype),ShaderSystem2.prototype.constructor=ShaderSystem2,ShaderSystem2.prototype.systemCheck=function systemCheck(){if(!function unsafeEvalSupported(){if("boolean"==typeof Cc)return Cc;try{var i=new Function("param1","param2","param3","return param1[param2] === param3;");Cc=!0===i({a:"b"},"a","b")}catch(s){Cc=!1}return Cc}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},ShaderSystem2.prototype.contextChange=function contextChange(i){this.gl=i,this.reset()},ShaderSystem2.prototype.bind=function bind2(i,s){i.uniforms.globals=this.renderer.globalUniforms;var _=i.program,T=_.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(i);return this.shader=i,this.program!==_&&(this.program=_,this.gl.useProgram(T.program)),s||(Kc.textureCount=0,this.syncUniformGroup(i.uniformGroup,Kc)),T},ShaderSystem2.prototype.setUniforms=function setUniforms(i){var s=this.shader.program,_=s.glPrograms[this.renderer.CONTEXT_UID];s.syncUniforms(_.uniformData,i,this.renderer)},ShaderSystem2.prototype.syncUniformGroup=function syncUniformGroup(i,s){var _=this.getglProgram();i.static&&i.dirtyId===_.uniformGroups[i.id]||(_.uniformGroups[i.id]=i.dirtyId,this.syncUniforms(i,_,s))},ShaderSystem2.prototype.syncUniforms=function syncUniforms(i,s,_){(i.syncUniforms[this.shader.program.id]||this.createSyncGroups(i))(s.uniformData,i.uniforms,this.renderer,_)},ShaderSystem2.prototype.createSyncGroups=function createSyncGroups(i){var s=this.getSignature(i,this.shader.program.uniformData);return this.cache[s]||(this.cache[s]=function generateUniformsSync(i,s){var _="var v = null;\n    var cv = null\n    var t = 0;\n    var gl = renderer.gl\n    ";for(var T in i.uniforms){var S=s[T];S?"float"===S.type&&1===S.size?_+="\n            if(uv."+T+" !== ud."+T+".value)\n            {\n                ud."+T+".value = uv."+T+"\n                gl.uniform1f(ud."+T+".location, uv."+T+")\n            }\n":"sampler2D"!==S.type&&"samplerCube"!==S.type&&"sampler2DArray"!==S.type||1!==S.size||S.isArray?"mat3"===S.type&&1===S.size?void 0!==i.uniforms[T].a?_+="\n                gl.uniformMatrix3fv(ud."+T+".location, false, uv."+T+".toArray(true));\n                \n":_+="\n                gl.uniformMatrix3fv(ud."+T+".location, false, uv."+T+");\n                \n":"vec2"===S.type&&1===S.size?void 0!==i.uniforms[T].x?_+="\n                cv = ud."+T+".value;\n                v = uv."+T+";\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud."+T+".location, v.x, v.y);\n                }\n":_+="\n                cv = ud."+T+".value;\n                v = uv."+T+";\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud."+T+".location, v[0], v[1]);\n                }\n                \n":"vec4"===S.type&&1===S.size?void 0!==i.uniforms[T].width?_+="\n                cv = ud."+T+".value;\n                v = uv."+T+";\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud."+T+".location, v.x, v.y, v.width, v.height)\n                }\n":_+="\n                cv = ud."+T+".value;\n                v = uv."+T+";\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud."+T+".location, v[0], v[1], v[2], v[3])\n                }\n                \n":_+="\n            cv = ud."+T+".value;\n            v = uv."+T+";\n            "+(1===S.size?Tc:Sc)[S.type].replace("location","ud."+T+".location")+";\n":_+="\n\n            t = syncData.textureCount++;\n\n            renderer.texture.bind(uv."+T+", t);\n            \n            if(ud."+T+".value !== t)\n            {\n                ud."+T+".value = t;\n                gl.uniform1i(ud."+T+".location, t);\n; // eslint-disable-line max-len\n            }\n":i.uniforms[T].group&&(_+="\n                    renderer.shader.syncUniformGroup(uv."+T+", syncData);\n                ")}return new Function("ud","uv","renderer","syncData",_)}(i,this.shader.program.uniformData)),i.syncUniforms[this.shader.program.id]=this.cache[s],i.syncUniforms[this.shader.program.id]},ShaderSystem2.prototype.getSignature=function getSignature(i,s){var _=i.uniforms,T=[];for(var S in _)T.push(S),s[S]&&T.push(s[S].type);return T.join("-")},ShaderSystem2.prototype.getglProgram=function getglProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},ShaderSystem2.prototype.generateShader=function generateShader2(i){var s=this.gl,_=i.program,T={};for(var S in _.attributeData)T[S]=_.attributeData[S].location;var C=compileProgram(s,_.vertexSrc,_.fragmentSrc,T),P={};for(var O in _.uniformData){var M=_.uniformData[O];P[O]={location:s.getUniformLocation(C,O),value:defaultValue(M.type,M.size)}}var R=new Zc(C,P);return _.glPrograms[this.renderer.CONTEXT_UID]=R,R},ShaderSystem2.prototype.reset=function reset2(){this.program=null,this.shader=null},ShaderSystem2.prototype.destroy=function destroy10(){this.destroyed=!0},ShaderSystem2}(jl);var Xc=function(i){function StateSystem2(s){i.call(this,s),this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Xs.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.checks=[],this.defaultState=new Ic,this.defaultState.blend=!0,this.defaultState.depth=!0}return i&&(StateSystem2.__proto__=i),StateSystem2.prototype=Object.create(i&&i.prototype),StateSystem2.prototype.constructor=StateSystem2,StateSystem2.prototype.contextChange=function contextChange(i){this.gl=i,this.blendModes=function mapWebGLBlendModesToPixi(i,s){return void 0===s&&(s=[]),s[Xs.NORMAL]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],s[Xs.ADD]=[i.ONE,i.ONE],s[Xs.MULTIPLY]=[i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA],s[Xs.SCREEN]=[i.ONE,i.ONE_MINUS_SRC_COLOR,i.ONE,i.ONE_MINUS_SRC_ALPHA],s[Xs.OVERLAY]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],s[Xs.DARKEN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],s[Xs.LIGHTEN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],s[Xs.COLOR_DODGE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],s[Xs.COLOR_BURN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],s[Xs.HARD_LIGHT]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],s[Xs.SOFT_LIGHT]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],s[Xs.DIFFERENCE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],s[Xs.EXCLUSION]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],s[Xs.HUE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],s[Xs.SATURATION]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],s[Xs.COLOR]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],s[Xs.LUMINOSITY]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],s[Xs.NONE]=[0,0],s[Xs.NORMAL_NPM]=[i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA],s[Xs.ADD_NPM]=[i.SRC_ALPHA,i.ONE,i.ONE,i.ONE],s[Xs.SCREEN_NPM]=[i.SRC_ALPHA,i.ONE_MINUS_SRC_COLOR,i.ONE,i.ONE_MINUS_SRC_ALPHA],s[Xs.SRC_IN]=[i.DST_ALPHA,i.ZERO],s[Xs.SRC_OUT]=[i.ONE_MINUS_DST_ALPHA,i.ZERO],s[Xs.SRC_ATOP]=[i.DST_ALPHA,i.ONE_MINUS_SRC_ALPHA],s[Xs.DST_OVER]=[i.ONE_MINUS_DST_ALPHA,i.ONE],s[Xs.DST_IN]=[i.ZERO,i.SRC_ALPHA],s[Xs.DST_OUT]=[i.ZERO,i.ONE_MINUS_SRC_ALPHA],s[Xs.DST_ATOP]=[i.ONE_MINUS_DST_ALPHA,i.SRC_ALPHA],s[Xs.XOR]=[i.ONE_MINUS_DST_ALPHA,i.ONE_MINUS_SRC_ALPHA],s[Xs.SUBTRACT]=[i.ONE,i.ONE,i.ONE,i.ONE,i.FUNC_REVERSE_SUBTRACT,i.FUNC_ADD],s}(i),this.set(this.defaultState),this.reset()},StateSystem2.prototype.set=function set3(i){if(i=i||this.defaultState,this.stateId!==i.data){for(var s=this.stateId^i.data,_=0;s;)1&s&&this.map[_].call(this,!!(i.data&1<<_)),s>>=1,_++;this.stateId=i.data}for(var T=0;T<this.checks.length;T++)this.checks[T](this,i)},StateSystem2.prototype.forceState=function forceState(i){i=i||this.defaultState;for(var s=0;s<this.map.length;s++)this.map[s].call(this,!!(i.data&1<<s));for(var _=0;_<this.checks.length;_++)this.checks[_](this,i);this.stateId=i.data},StateSystem2.prototype.setBlend=function setBlend(i){this.updateCheck(StateSystem2.checkBlendMode,i),this.gl[i?"enable":"disable"](this.gl.BLEND)},StateSystem2.prototype.setOffset=function setOffset(i){this.updateCheck(StateSystem2.checkPolygonOffset,i),this.gl[i?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},StateSystem2.prototype.setDepthTest=function setDepthTest(i){this.gl[i?"enable":"disable"](this.gl.DEPTH_TEST)},StateSystem2.prototype.setCullFace=function setCullFace(i){this.gl[i?"enable":"disable"](this.gl.CULL_FACE)},StateSystem2.prototype.setFrontFace=function setFrontFace(i){this.gl.frontFace(this.gl[i?"CW":"CCW"])},StateSystem2.prototype.setBlendMode=function setBlendMode(i){if(i!==this.blendMode){this.blendMode=i;var s=this.blendModes[i],_=this.gl;2===s.length?_.blendFunc(s[0],s[1]):_.blendFuncSeparate(s[0],s[1],s[2],s[3]),6===s.length?(this._blendEq=!0,_.blendEquationSeparate(s[4],s[5])):this._blendEq&&(this._blendEq=!1,_.blendEquationSeparate(_.FUNC_ADD,_.FUNC_ADD))}},StateSystem2.prototype.setPolygonOffset=function setPolygonOffset(i,s){this.gl.polygonOffset(i,s)},StateSystem2.prototype.reset=function reset2(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(0),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},StateSystem2.prototype.updateCheck=function updateCheck(i,s){var _=this.checks.indexOf(i);s&&-1===_?this.checks.push(i):s||-1===_||this.checks.splice(_,1)},StateSystem2.checkBlendMode=function checkBlendMode(i,s){i.setBlendMode(s.blendMode)},StateSystem2.checkPolygonOffset=function checkPolygonOffset(i,s){i.setPolygonOffset(s.polygonOffset,0)},StateSystem2}(jl),Qc=function(i){function TextureGCSystem2(s){i.call(this,s),this.count=0,this.checkCount=0,this.maxIdle=Ns.GC_MAX_IDLE,this.checkCountMax=Ns.GC_MAX_CHECK_COUNT,this.mode=Ns.GC_MODE}return i&&(TextureGCSystem2.__proto__=i),TextureGCSystem2.prototype=Object.create(i&&i.prototype),TextureGCSystem2.prototype.constructor=TextureGCSystem2,TextureGCSystem2.prototype.postrender=function postrender(){this.renderer.renderingToScreen&&(this.count++,this.mode!==vo.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},TextureGCSystem2.prototype.run=function run2(){for(var i=this.renderer.texture,s=i.managedTextures,_=!1,T=0;T<s.length;T++){var S=s[T];!S.framebuffer&&this.count-S.touched>this.maxIdle&&(i.destroyTexture(S,!0),s[T]=null,_=!0)}if(_){for(var C=0,P=0;P<s.length;P++)null!==s[P]&&(s[C++]=s[P]);s.length=C}},TextureGCSystem2.prototype.unload=function unload(i){var s=this.renderer.textureSystem;i._texture&&i._texture._glRenderTargets&&s.destroyTexture(i._texture);for(var _=i.children.length-1;_>=0;_--)this.unload(i.children[_])},TextureGCSystem2}(jl),Jc=function GLTexture2(i){this.texture=i,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121},eu=function(i){function TextureSystem2(s){i.call(this,s),this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Ml}return i&&(TextureSystem2.__proto__=i),TextureSystem2.prototype=Object.create(i&&i.prototype),TextureSystem2.prototype.constructor=TextureSystem2,TextureSystem2.prototype.contextChange=function contextChange(){var i=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var s=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=s;for(var _=0;_<s;_++)this.boundTextures[_]=null;this.emptyTextures={};var T=new Jc(i.createTexture());i.bindTexture(i.TEXTURE_2D,T.texture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[i.TEXTURE_2D]=T,this.emptyTextures[i.TEXTURE_CUBE_MAP]=new Jc(i.createTexture()),i.bindTexture(i.TEXTURE_CUBE_MAP,this.emptyTextures[i.TEXTURE_CUBE_MAP].texture);for(var S=0;S<6;S++)i.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+S,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,null);i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_MIN_FILTER,i.LINEAR);for(var C=0;C<this.boundTextures.length;C++)this.bind(null,C)},TextureSystem2.prototype.bind=function bind2(i,s){void 0===s&&(s=0);var _=this.gl;if(i){if((i=i.baseTexture||i).valid){i.touched=this.renderer.textureGC.count;var T=i._glTextures[this.CONTEXT_UID]||this.initTexture(i);this.boundTextures[s]!==i&&(this.currentLocation!==s&&(this.currentLocation=s,_.activeTexture(_.TEXTURE0+s)),_.bindTexture(i.target,T.texture)),T.dirtyId!==i.dirtyId&&(this.currentLocation!==s&&(this.currentLocation=s,_.activeTexture(_.TEXTURE0+s)),this.updateTexture(i)),this.boundTextures[s]=i}}else this.currentLocation!==s&&(this.currentLocation=s,_.activeTexture(_.TEXTURE0+s)),_.bindTexture(_.TEXTURE_2D,this.emptyTextures[_.TEXTURE_2D].texture),this.boundTextures[s]=null},TextureSystem2.prototype.reset=function reset2(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var i=0;i<this.boundTextures.length;i++)this.boundTextures[i]=this.unknownTexture},TextureSystem2.prototype.unbind=function unbind2(i){var s=this.gl,_=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var T=0;T<_.length;T++)_[T]===this.unknownTexture&&this.bind(null,T)}for(var S=0;S<_.length;S++)_[S]===i&&(this.currentLocation!==S&&(s.activeTexture(s.TEXTURE0+S),this.currentLocation=S),s.bindTexture(s.TEXTURE_2D,this.emptyTextures[i.target].texture),_[S]=null)},TextureSystem2.prototype.initTexture=function initTexture(i){var s=new Jc(this.gl.createTexture());return s.dirtyId=-1,i._glTextures[this.CONTEXT_UID]=s,this.managedTextures.push(i),i.on("dispose",this.destroyTexture,this),s},TextureSystem2.prototype.initTextureType=function initTextureType(i,s){if(s.internalFormat=i.format,s.type=i.type,2===this.webGLVersion){var _=this.renderer.gl;i.type===_.FLOAT&&i.format===_.RGBA&&(s.internalFormat=_.RGBA32F),i.type===ao.HALF_FLOAT&&(s.type=_.HALF_FLOAT),s.type===_.HALF_FLOAT&&i.format===_.RGBA&&(s.internalFormat=_.RGBA16F)}},TextureSystem2.prototype.updateTexture=function updateTexture(i){var s=i._glTextures[this.CONTEXT_UID];if(s){var _=this.renderer;if(this.initTextureType(i,s),i.resource&&i.resource.upload(_,i,s));else{var T=i.realWidth,S=i.realHeight,C=_.gl;(s.width!==T||s.height!==S||s.dirtyId<0)&&(s.width=T,s.height=S,C.texImage2D(i.target,0,s.internalFormat,T,S,0,i.format,s.type,null))}i.dirtyStyleId!==s.dirtyStyleId&&this.updateTextureStyle(i),s.dirtyId=i.dirtyId}},TextureSystem2.prototype.destroyTexture=function destroyTexture(i,s){var _=this.gl;if((i=i.baseTexture||i)._glTextures[this.CONTEXT_UID]&&(this.unbind(i),_.deleteTexture(i._glTextures[this.CONTEXT_UID].texture),i.off("dispose",this.destroyTexture,this),delete i._glTextures[this.CONTEXT_UID],!s)){var T=this.managedTextures.indexOf(i);-1!==T&&removeItems(this.managedTextures,T,1)}},TextureSystem2.prototype.updateTextureStyle=function updateTextureStyle(i){var s=i._glTextures[this.CONTEXT_UID];s&&(i.mipmap!==ho.POW2&&2===this.webGLVersion||i.isPowerOfTwo?s.mipmap=i.mipmap>=1:s.mipmap=0,2===this.webGLVersion||i.isPowerOfTwo?s.wrapMode=i.wrapMode:s.wrapMode=co.CLAMP,i.resource&&i.resource.style(this.renderer,i,s)||this.setStyle(i,s),s.dirtyStyleId=i.dirtyStyleId)},TextureSystem2.prototype.setStyle=function setStyle(i,s){var _=this.gl;if(s.mipmap&&_.generateMipmap(i.target),_.texParameteri(i.target,_.TEXTURE_WRAP_S,s.wrapMode),_.texParameteri(i.target,_.TEXTURE_WRAP_T,s.wrapMode),s.mipmap){_.texParameteri(i.target,_.TEXTURE_MIN_FILTER,i.scaleMode?_.LINEAR_MIPMAP_LINEAR:_.NEAREST_MIPMAP_NEAREST);var T=this.renderer.context.extensions.anisotropicFiltering;if(T&&i.anisotropicLevel>0&&i.scaleMode===oo.LINEAR){var S=Math.min(i.anisotropicLevel,_.getParameter(T.MAX_TEXTURE_MAX_ANISOTROPY_EXT));_.texParameterf(i.target,T.TEXTURE_MAX_ANISOTROPY_EXT,S)}}else _.texParameteri(i.target,_.TEXTURE_MIN_FILTER,i.scaleMode?_.LINEAR:_.NEAREST);_.texParameteri(i.target,_.TEXTURE_MAG_FILTER,i.scaleMode?_.LINEAR:_.NEAREST)},TextureSystem2}(jl),tu=new Jo,nu=function(i){function Renderer2(s){void 0===s&&(s={}),i.call(this,"WebGL",s),s=this.options,this.type=Ks.WEBGL,this.gl=null,this.CONTEXT_UID=0,this.runners={destroy:new Tl("destroy"),contextChange:new Tl("contextChange",1),reset:new Tl("reset"),update:new Tl("update"),postrender:new Tl("postrender"),prerender:new Tl("prerender"),resize:new Tl("resize",2)},this.globalUniforms=new ac({projectionMatrix:new Jo},!0),this.addSystem($c,"mask").addSystem(dc,"context").addSystem(Xc,"state").addSystem(Yc,"shader").addSystem(eu,"texture").addSystem(fc,"geometry").addSystem(hc,"framebuffer").addSystem(Fc,"scissor").addSystem(Hc,"stencil").addSystem(qc,"projection").addSystem(Qc,"textureGC").addSystem(oc,"filter").addSystem(Gc,"renderTexture").addSystem(cc,"batch"),this.initPlugins(Renderer2.__plugins),s.context?this.context.initFromContext(s.context):this.context.initFromOptions({alpha:this.transparent,antialias:s.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:s.preserveDrawingBuffer,powerPreference:this.options.powerPreference}),this.renderingToScreen=!0,function sayHello(i){var s;if(!Do){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var _=["\n %c %c %c PixiJS 5.2.1 -  "+i+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(s=window.console).log.apply(s,_)}else window.console&&window.console.log("PixiJS 5.2.1 - "+i+" - http://www.pixijs.com/");Do=!0}}(2===this.context.webGLVersion?"WebGL 2":"WebGL 1"),this.resize(this.options.width,this.options.height)}return i&&(Renderer2.__proto__=i),Renderer2.prototype=Object.create(i&&i.prototype),Renderer2.prototype.constructor=Renderer2,Renderer2.create=function create3(i){if(function isWebGLSupported(){return void 0===No&&(No=function supported2(){var i={stencil:!0,failIfMajorPerformanceCaveat:Ns.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext)return!1;var s=document.createElement("canvas"),_=s.getContext("webgl",i)||s.getContext("experimental-webgl",i),T=!(!_||!_.getContextAttributes().stencil);if(_){var S=_.getExtension("WEBGL_lose_context");S&&S.loseContext()}return _=null,T}catch(C){return!1}}()),No}())return new Renderer2(i);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},Renderer2.prototype.addSystem=function addSystem(i,s){s||(s=i.name);var _=new i(this);if(this[s])throw new Error('Whoops! The name "'+s+'" is already in use');for(var T in this[s]=_,this.runners)this.runners[T].add(_);return this},Renderer2.prototype.render=function render2(i,s,_,T,S){if(this.renderingToScreen=!s,this.runners.prerender.run(),this.emit("prerender"),this.projection.transform=T,!this.context.isLost){if(s||(this._lastObjectRendered=i),!S){var C=i.parent;i.parent=this._tempDisplayObjectParent,i.updateTransform(),i.parent=C}this.renderTexture.bind(s),this.batch.currentRenderer.start(),(void 0!==_?_:this.clearBeforeRender)&&this.renderTexture.clear(),i.render(this),this.batch.currentRenderer.flush(),s&&s.baseTexture.update(),this.runners.postrender.run(),this.projection.transform=null,this.emit("postrender")}},Renderer2.prototype.resize=function resize3(s,_){i.prototype.resize.call(this,s,_),this.runners.resize.run(s,_)},Renderer2.prototype.reset=function reset2(){return this.runners.reset.run(),this},Renderer2.prototype.clear=function clear5(){this.framebuffer.bind(),this.framebuffer.clear()},Renderer2.prototype.destroy=function destroy10(s){for(var _ in this.runners.destroy.run(),this.runners)this.runners[_].destroy();i.prototype.destroy.call(this,s),this.gl=null},Renderer2.registerPlugin=function registerPlugin(i,s){Renderer2.__plugins=Renderer2.__plugins||{},Renderer2.__plugins[i]=s},Renderer2}(function(i){function AbstractRenderer2(s,_){i.call(this),(_=Object.assign({},Ns.RENDER_OPTIONS,_)).roundPixels&&(Ns.ROUND_PIXELS=_.roundPixels,deprecation("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),this.options=_,this.type=Ks.UNKNOWN,this.screen=new ul(0,0,_.width,_.height),this.view=_.view||document.createElement("canvas"),this.resolution=_.resolution||Ns.RESOLUTION,this.transparent=_.transparent,this.autoDensity=_.autoDensity||_.autoResize||!1,this.preserveDrawingBuffer=_.preserveDrawingBuffer,this.clearBeforeRender=_.clearBeforeRender,this._backgroundColor=0,this._backgroundColorRgba=[0,0,0,0],this._backgroundColorString="#000000",this.backgroundColor=_.backgroundColor||this._backgroundColor,this._tempDisplayObjectParent=new yl,this._lastObjectRendered=this._tempDisplayObjectParent,this.plugins={}}i&&(AbstractRenderer2.__proto__=i),AbstractRenderer2.prototype=Object.create(i&&i.prototype),AbstractRenderer2.prototype.constructor=AbstractRenderer2;var s={width:{configurable:!0},height:{configurable:!0},backgroundColor:{configurable:!0}};return AbstractRenderer2.prototype.initPlugins=function initPlugins(i){for(var s in i)this.plugins[s]=new i[s](this)},s.width.get=function(){return this.view.width},s.height.get=function(){return this.view.height},AbstractRenderer2.prototype.resize=function resize3(i,s){this.screen.width=i,this.screen.height=s,this.view.width=i*this.resolution,this.view.height=s*this.resolution,this.autoDensity&&(this.view.style.width=i+"px",this.view.style.height=s+"px")},AbstractRenderer2.prototype.generateTexture=function generateTexture(i,s,_,T){0===(T=T||i.getLocalBounds()).width&&(T.width=1),0===T.height&&(T.height=1);var S=Gl.create(0|T.width,0|T.height,s,_);return tu.tx=-T.x,tu.ty=-T.y,this.render(i,S,!1,tu,!!i.parent),S},AbstractRenderer2.prototype.destroy=function destroy10(i){for(var s in this.plugins)this.plugins[s].destroy(),this.plugins[s]=null;i&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.plugins=null,this.type=Ks.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoDensity=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},s.backgroundColor.get=function(){return this._backgroundColor},s.backgroundColor.set=function(i){this._backgroundColor=i,this._backgroundColorString=hex2string(i),hex2rgb(i,this._backgroundColorRgba)},Object.defineProperties(AbstractRenderer2.prototype,s),AbstractRenderer2}(js));function autoDetectRenderer(i){return nu.create(i)}var ru=function BatchDrawCall2(){this.texArray=null,this.blend=0,this.type=Js.TRIANGLES,this.start=0,this.size=0,this.data=null},iu=function BatchTextureArray2(){this.elements=[],this.ids=[],this.count=0};iu.prototype.clear=function clear4(){for(var i=0;i<this.count;i++)this.elements[i]=null;this.count=0};var au=function ViewableBuffer2(i){this.rawBinaryData=new ArrayBuffer(i),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)},su={int8View:{configurable:!0},uint8View:{configurable:!0},int16View:{configurable:!0},uint16View:{configurable:!0},int32View:{configurable:!0}};su.int8View.get=function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},su.uint8View.get=function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},su.int16View.get=function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},su.uint16View.get=function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},su.int32View.get=function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},au.prototype.view=function view(i){return this[i+"View"]},au.prototype.destroy=function destroy9(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},au.sizeOf=function sizeOf(i){switch(i){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(i+" isn't a valid view type")}},Object.defineProperties(au.prototype,su);var ou=function(i){function AbstractBatchRenderer2(s){i.call(this,s),this.shaderGenerator=null,this.geometryClass=null,this.vertexSize=null,this.state=Ic.for2d(),this.size=4*Ns.SPRITE_BATCH_SIZE,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.MAX_TEXTURES=1,this.renderer.on("prerender",this.onPrerender,this),s.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}return i&&(AbstractBatchRenderer2.__proto__=i),AbstractBatchRenderer2.prototype=Object.create(i&&i.prototype),AbstractBatchRenderer2.prototype.constructor=AbstractBatchRenderer2,AbstractBatchRenderer2.prototype.contextChange=function contextChange(){var i=this.renderer.gl;Ns.PREFER_ENV===Zs.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),Ns.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=function checkMaxIfStatementsInShader(i,s){if(0===i)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var _=s.createShader(s.FRAGMENT_SHADER);;){var T=xc.replace(/%forloop%/gi,generateIfTestSrc(i));if(s.shaderSource(_,T),s.compileShader(_),s.getShaderParameter(_,s.COMPILE_STATUS))break;i=i/2|0}return i}(this.MAX_TEXTURES,i)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var s=0;s<this._packedGeometryPoolSize;s++)this._packedGeometries[s]=new this.geometryClass;this.initFlushBuffers()},AbstractBatchRenderer2.prototype.initFlushBuffers=function initFlushBuffers(){for(var i=AbstractBatchRenderer2._drawCallPool,s=AbstractBatchRenderer2._textureArrayPool,_=this.size/4,T=Math.floor(_/this.MAX_TEXTURES)+1;i.length<_;)i.push(new ru);for(;s.length<T;)s.push(new iu);for(var S=0;S<this.MAX_TEXTURES;S++)this._tempBoundTextures[S]=null},AbstractBatchRenderer2.prototype.onPrerender=function onPrerender(){this._flushId=0},AbstractBatchRenderer2.prototype.render=function render2(i){i._texture.valid&&(this._vertexCount+i.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=i.vertexData.length/2,this._indexCount+=i.indices.length,this._bufferedTextures[this._bufferSize]=i._texture.baseTexture,this._bufferedElements[this._bufferSize++]=i)},AbstractBatchRenderer2.prototype.buildTexturesAndDrawCalls=function buildTexturesAndDrawCalls(){var i=this._bufferedTextures,s=this.MAX_TEXTURES,_=AbstractBatchRenderer2._textureArrayPool,T=this.renderer.batch,S=this._tempBoundTextures,C=this.renderer.textureGC.count,P=++Ml._globalBatch,O=0,M=_[0],R=0;T.copyBoundTextures(S,s);for(var D=0;D<this._bufferSize;++D){var j=i[D];i[D]=null,j._batchEnabled!==P&&(M.count>=s&&(T.boundArray(M,S,P,s),this.buildDrawCalls(M,R,D),R=D,M=_[++O],++P),j._batchEnabled=P,j.touched=C,M.elements[M.count++]=j)}M.count>0&&(T.boundArray(M,S,P,s),this.buildDrawCalls(M,R,this._bufferSize),++O,++P);for(var $=0;$<S.length;$++)S[$]=null;Ml._globalBatch=P},AbstractBatchRenderer2.prototype.buildDrawCalls=function buildDrawCalls(i,s,_){var T=this,S=T._bufferedElements,C=T._attributeBuffer,P=T._indexBuffer,O=T.vertexSize,M=AbstractBatchRenderer2._drawCallPool,R=this._dcIndex,D=this._aIndex,j=this._iIndex,$=M[R];$.start=this._iIndex,$.texArray=i;for(var U=s;U<_;++U){var V=S[U],Z=V._texture.baseTexture,Y=jo[Z.alphaMode?1:0][V.blendMode];S[U]=null,s<U&&$.blend!==Y&&($.size=j-$.start,s=U,($=M[++R]).texArray=i,$.start=j),this.packInterleavedGeometry(V,C,P,D,j),D+=V.vertexData.length/2*O,j+=V.indices.length,$.blend=Y}s<_&&($.size=j-$.start,++R),this._dcIndex=R,this._aIndex=D,this._iIndex=j},AbstractBatchRenderer2.prototype.bindAndClearTexArray=function bindAndClearTexArray(i){for(var s=this.renderer.texture,_=0;_<i.count;_++)s.bind(i.elements[_],i.ids[_]),i.elements[_]=null;i.count=0},AbstractBatchRenderer2.prototype.updateGeometry=function updateGeometry(){var i=this,s=i._packedGeometries,_=i._attributeBuffer,T=i._indexBuffer;Ns.CAN_UPLOAD_SAME_BUFFER?(s[this._flushId]._buffer.update(_.rawBinaryData),s[this._flushId]._indexBuffer.update(T),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,s[this._flushId]=new this.geometryClass),s[this._flushId]._buffer.update(_.rawBinaryData),s[this._flushId]._indexBuffer.update(T),this.renderer.geometry.bind(s[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},AbstractBatchRenderer2.prototype.drawBatches=function drawBatches(){for(var i=this._dcIndex,s=this.renderer,_=s.gl,T=s.state,S=AbstractBatchRenderer2._drawCallPool,C=null,P=0;P<i;P++){var O=S[P],M=O.texArray,R=O.type,D=O.size,j=O.start,$=O.blend;C!==M&&(C=M,this.bindAndClearTexArray(M)),this.state.blendMode=$,T.set(this.state),_.drawElements(R,D,_.UNSIGNED_SHORT,2*j)}},AbstractBatchRenderer2.prototype.flush=function flush2(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},AbstractBatchRenderer2.prototype.start=function start2(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),Ns.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},AbstractBatchRenderer2.prototype.stop=function stop2(){this.flush()},AbstractBatchRenderer2.prototype.destroy=function destroy10(){for(var s=0;s<this._packedGeometryPoolSize;s++)this._packedGeometries[s]&&this._packedGeometries[s].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),i.prototype.destroy.call(this)},AbstractBatchRenderer2.prototype.getAttributeBuffer=function getAttributeBuffer(i){var s=nextPow2(Math.ceil(i/8)),_=log2(s),T=8*s;this._aBuffers.length<=_&&(this._iBuffers.length=_+1);var S=this._aBuffers[T];return S||(this._aBuffers[T]=S=new au(T*this.vertexSize*4)),S},AbstractBatchRenderer2.prototype.getIndexBuffer=function getIndexBuffer(i){var s=nextPow2(Math.ceil(i/12)),_=log2(s),T=12*s;this._iBuffers.length<=_&&(this._iBuffers.length=_+1);var S=this._iBuffers[_];return S||(this._iBuffers[_]=S=new Uint16Array(T)),S},AbstractBatchRenderer2.prototype.packInterleavedGeometry=function packInterleavedGeometry(i,s,_,T,S){for(var C=s.uint32View,P=s.float32View,O=T/this.vertexSize,M=i.uvs,R=i.indices,D=i.vertexData,j=i._texture.baseTexture._batchLocation,$=Math.min(i.worldAlpha,1),U=$<1&&i._texture.baseTexture.alphaMode?premultiplyTint(i._tintRGB,$):i._tintRGB+(255*$<<24),V=0;V<D.length;V+=2)P[T++]=D[V],P[T++]=D[V+1],P[T++]=M[V],P[T++]=M[V+1],C[T++]=U,P[T++]=j;for(var Z=0;Z<R.length;Z++)_[S++]=O+R[Z]},AbstractBatchRenderer2}(lc);ou._drawCallPool=[],ou._textureArrayPool=[];var lu=function BatchShaderGenerator2(i,s){if(this.vertexSrc=i,this.fragTemplate=s,this.programCache={},this.defaultGroupCache={},s.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(s.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')};lu.prototype.generateShader=function generateShader(i){if(!this.programCache[i]){for(var s=new Int32Array(i),_=0;_<i;_++)s[_]=_;this.defaultGroupCache[i]=ac.from({uSamplers:s},!0);var T=this.fragTemplate;T=(T=T.replace(/%count%/gi,""+i)).replace(/%forloop%/gi,this.generateSampleSrc(i)),this.programCache[i]=new Ac(this.vertexSrc,T)}var S={tint:new Float32Array([1,1,1,1]),translationMatrix:new Jo,default:this.defaultGroupCache[i]};return new Mc(this.programCache[i],S)},lu.prototype.generateSampleSrc=function generateSampleSrc(i){var s="";s+="\n",s+="\n";for(var _=0;_<i;_++)_>0&&(s+="\nelse "),_<i-1&&(s+="if(vTextureId < "+_+".5)"),s+="\n{",s+="\n\tcolor = texture2D(uSamplers["+_+"], vTextureCoord);",s+="\n}";return s+="\n",s+="\n"};var cu=function(i){function BatchGeometry2(s){void 0===s&&(s=!1),i.call(this),this._buffer=new Yl(null,s,!1),this._indexBuffer=new Yl(null,s,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,ao.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,ao.FLOAT).addAttribute("aColor",this._buffer,4,!0,ao.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,ao.FLOAT).addIndex(this._indexBuffer)}return i&&(BatchGeometry2.__proto__=i),BatchGeometry2.prototype=Object.create(i&&i.prototype),BatchGeometry2.prototype.constructor=BatchGeometry2,BatchGeometry2}(tc),uu="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",du="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",hu=function BatchPluginFactory2(){},pu={defaultVertexSrc:{configurable:!0},defaultFragmentTemplate:{configurable:!0}};hu.create=function create2(i){var s=Object.assign({vertex:uu,fragment:du,geometryClass:cu,vertexSize:6},i),_=s.vertex,T=s.fragment,S=s.vertexSize,C=s.geometryClass;return function(i){function BatchPlugin(s){i.call(this,s),this.shaderGenerator=new lu(_,T),this.geometryClass=C,this.vertexSize=S}return i&&(BatchPlugin.__proto__=i),BatchPlugin.prototype=Object.create(i&&i.prototype),BatchPlugin.prototype.constructor=BatchPlugin,BatchPlugin}(ou)},pu.defaultVertexSrc.get=function(){return uu},pu.defaultFragmentTemplate.get=function(){return du},Object.defineProperties(hu,pu);var mu=hu.create()},35746:function(i,s,_){"use strict";_.d(s,{A:function(){return pick},B:function(){return invertObject},C:function(){return onMount},D:function(){return de},E:function(){return destroy_each},F:function(){return capitalizeFirstLetter},H:function(){return HtmlTag},J:function(){return R},N:function(){return T},S:function(){return Store},a:function(){return createEventEmitter},b:function(){return SvelteComponent},c:function(){return createStateMachine},d:function(){return safe_not_equal},e:function(){return enableSound},f:function(){return element},g:function(){return get},h:function(){return text},i:function(){return init},j:function(){return attr},k:function(){return insert},l:function(){return loadSound},m:function(){return append},n:function(){return null_to_empty},o:function(){return set_data},p:function(){return playSound},q:function(){return detach},r:function(){return space},s:function(){return set},t:function(){return toSelector},u:function(){return empty},v:function(){return toggle_class},w:function(){return listen},x:function(){return noop},y:function(){return run_all},z:function(){return createEventDispatcher}});var T="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==_.g?_.g:"undefined"!=typeof self?self:{},S={exports:{}};!function(i){
/*!
   * Chess.com (c) 2020 | all rights reserved
   */
/*!
   * A distant fork of chess.js - BSD (c) 2014, Jeff Hlywa (jhlywa@gmail.com)
   */
var s,_,T,S;s=function(){var i=[[2637767806,863464769],[720845184,95069639],[1155203408,610415943],[2618685246,1655139042],[1971536997,1218186377],[848342074,540017087],[263957791,1627660921],[3896152207,4076560586],[226391645,1484086288],[436746274,3467632685],[2516964848,3797861296],[3491888988,3510251221],[1086189917,1248276018],[18044180,1876255637],[1572111136,1190386149],[597658413,2146900428],[97624494,2243205793],[1738507407,1854916977],[1950989311,2149575947],[2098318769,3283594736],[2194108574,2015279052],[4079062812,2500884588],[856979699,2941369318],[1270058469,3877737539],[2858720366,3170717948],[2378012835,1387254795],[2278688587,2178388503],[435406673,3555273441],[3031118064,1655806655],[2063925420,1107589828],[3376753832,436852829],[615148625,1302492416],[1285502018,1963045959],[346460119,1016137793],[2803604355,1176288659],[55085973,2968618255],[1669016372,4287873088],[164740250,1037634196],[896886403,883023163],[1935551383,2764331555],[410153072,4055711755],[533441746,1505690343],[3541084098,3466290517],[3214426080,4267541060],[2675233103,1951705124],[1374411850,3115986997],[1552073989,3684348154],[4244110986,875606593],[844343081,3115990494],[2356462440,135999605],[3116133511,377238503],[2129956651,2197966368],[299173332,3276914047],[1701379241,745972291],[1306570996,254977976],[2530644806,214138461],[1122123979,1667800879],[1831591130,3801192033],[1116211970,920967505],[1594837592,2551651254],[972591349,2046373768],[2479207924,1935030411],[1675376029,2367888248],[3960916618,3935874422],[1398143232,3265801671],[133930885,1520005442],[1351827834,2829577566],[2076951437,2723839804],[435980918,2364847828],[1668970368,3738157273],[2185864314,3993911799],[2041407829,31969768],[346864372,2004703094],[4047877822,3437142421],[3669961416,538399484],[616810829,4190688246],[3144558884,4030272234],[216165387,2513010905],[2761740594,3216997572],[3919406634,4096014649],[669429112,2434161727],[2234904640,3111407601],[1421079802,1598085235],[1924213810,310373675],[4002762044,2067865415],[2592451728,2586110625],[1890340057,4031717877],[4189625662,2577429954],[2276713138,3049850801],[2741429688,3310307512],[2924122950,3426712818],[421576781,1193704381],[2277442246,3030264553],[153237420,595540057],[4278711886,4176286928],[2380848297,4030514510],[2618700582,1303682185],[3018992701,185284845],[957243316,1291916363],[1543415220,1898408169],[504378001,531073412],[2591337657,1692896435],[1333852064,903543556],[1661259930,188168388],[561112646,2197961224],[1536910315,2632972300],[1349168372,2307429186],[411152329,2745631190],[1694697476,1081411140],[3755185459,2631660711],[4019355068,4027326706],[2066937809,3761668332],[3120395808,3878773315],[94890149,2109283191],[3045629038,358812277],[1249184265,3465901047],[3477490924,2308583306],[4114113436,3875911716],[1014604031,1434513279],[3991324799,2222416029],[2040431088,1539915569],[2253613964,4081224332],[2547464012,1611168627],[2722521980,4281500978],[71289574,213969824],[2450408597,903689630],[1894451515,364024012],[1939968537,374938813],[1447259295,3785468557],[4021046128,1664847745],[3139524504,3562928047],[1173487682,4065269608],[2467266804,3907744866],[4284945151,3486998177],[2925674454,1953016432],[3710671816,1271453948],[2129465869,1422863833],[587093076,18243356],[3373793513,2411305257],[2156648078,1791034213],[3737413652,1534461430],[468575139,2935304962],[1129551363,3603256834],[2861996892,1763494778],[2826449619,2465197654],[1704209531,1014895022],[3738359347,3402630390],[569410928,4095796581],[3021312909,2108247612],[2444777957,2664129360],[282063667,3773661258],[682545472,3188439005],[3318488457,1917822038],[1447622272,4045023041],[757420137,4038580915],[2613420942,4146703316],[4012836163,150381244],[2938127093,3428591704],[1208226490,3086335530],[2935205706,1446903363],[430957978,3830532479],[1381578755,3757172800],[4109399782,1596778224],[288855589,1954372339],[3169178148,2256716053],[2644780093,3895892303],[107966643,1071681559],[1304747544,2607225372],[1359190711,1898207171],[3229237120,3273634996],[3027167685,3863637628],[3011615298,2883984519],[564135827,978463264],[770797430,362326607],[1983662611,1907583229],[4153656423,48268960],[3609759233,720080177],[3727911466,1270989899],[200708787,2366086947],[744508026,393422515],[1213261630,65757284],[3485747185,3845951003],[2958861301,1680248217],[2598470344,3163845864],[2767997908,4233451722],[3881113485,1492930166],[1773764017,2764062206],[4189435844,2898689174],[4234838742,1267095035],[2624081078,3302114327],[2395569449,390426320],[1728307101,690284926],[3309827454,1118258254],[2028172868,3888829086],[4271523049,909051386],[146617804,942892565],[2467685867,974297806],[2483428231,503635829],[3743260573,2018222096],[1002067894,2289153437],[3535252974,3738302271],[4154611160,1002664952],[3623154244,2349656961],[3646679180,3524329383],[862933752,4282853607],[2806008282,3272780913],[2734037942,3828874677],[1328176304,2137666995],[2278785213,2780788825],[381286368,1816476193],[2074232908,2316293454],[4087773386,3651330956],[967884669,3728964514],[4239349185,3213509668],[419231360,1463788948],[1275421624,2672384707],[1088456595,436245261],[2365565249,783696577],[1758083333,845223583],[2048846183,3530914274],[2635948261,124738415],[940630937,3069598626],[839474029,1253439921],[902477345,165479306],[2836079689,2681188273],[2007115168,2093139645],[1363041891,1282466609],[1130479818,1063857938],[3644959908,1260430427],[1385135238,46497915],[1386975934,3110156681],[2635987502,4233461619],[1915744629,4117939016],[487743653,285736599],[2049219159,3960249250],[69242857,3908563670],[1511066720,1488527520],[215590039,1703564952],[1459430344,4184955468],[676103291,2642967214],[83799035,3182827979],[1949179493,476101251],[2593534694,1493478716],[2283504289,995211746],[1349412676,3449243940],[2954378677,1878813305],[249149717,3329151870],[1578231917,1483986052],[4135085182,890874990],[461755528,3505523909],[3669622373,634949665],[219487622,2914465301],[2825233742,3703631897],[2479105382,2935590907],[2582097898,3187672881],[1221328648,1843341402],[2140891889,3958868911],[1482849818,345750049],[751922730,3178831411],[3546542069,4036458902],[216179596,877293293],[444615341,3117393729],[2424254530,494454238],[1344234989,3003337991],[929188581,2760877801],[2507911009,1879899982],[980166547,1311840394],[3566535507,1790747461],[143525013,2311336672],[4181962471,4273938872],[1815842366,862009811],[911175674,1179575598],[3591335374,3694215714],[1452686093,3393294272],[385158879,2447709103],[4011414929,1264623507],[1448477120,911094312],[3971299641,2289992053],[3133647265,2234591563],[3007628400,964409938],[1708345684,3673411261],[3031964479,2843021794],[3022128657,2480338599],[118850112,473449293],[2048127371,3202109429],[3158349745,382018770],[1505327237,3807570472],[2568424029,3272693060],[1866609495,3888556537],[844703982,1852802964],[3504617058,682636099],[1448882679,3733580327],[821387540,2215744532],[3631471417,311618895],[2077838877,2383929020],[3352949096,1688694420],[2491080787,3998672444],[3368630402,4182204255],[983299419,2837414346],[3651215291,1033373924],[265429091,3988955082],[3019003608,2896212153],[2955948456,3025235588],[903690197,2266253487],[3925215275,89402958],[3959093811,3609545561],[2455088053,223552128],[3115011301,2133669107],[1765081558,673805649],[3324795129,2111392191],[3443871631,432345706],[3152559950,3425427147],[3699649406,672784944],[3129545774,7668664],[2747044893,173040075],[3925243406,852328481],[164095314,3161868591],[2234471571,1302682825],[2164784335,105893718],[159995093,536831360],[599199451,425051327],[3274759746,1680930461],[1192619331,3903085578],[2832721114,3078660237],[91404660,4030521531],[3044880024,1578375623],[3906596030,754177855],[803516785,1894094672],[288455592,2030430096],[2143232492,2317305324],[388352703,3406060288],[2521731420,3588403719],[1043041227,4028028525],[3195290851,2468913324],[4166724431,3168683191],[1228226538,968516529],[500177583,3444787306],[533367442,4252082053],[4236023256,657816314],[413575568,3367198397],[3435884549,3334062733],[1004255532,1135705894],[2859513268,4170618274],[3914086821,1251487871],[3080761716,3489067886],[3571165255,699353261],[773372954,3648014952],[769693293,2939128604],[3116440923,507748478],[1687629160,3739431776],[2489486648,3502376324],[3686847158,2878383449],[3530767427,902211375],[2121652637,2493976397],[1827477891,930064171],[2549918411,4029725732],[2071415163,844118802],[2236083679,3088894868],[2040110303,4144562891],[3489536313,1133419300],[2190878435,2301466071],[2465915458,2448602097],[1675766804,2073834499],[3329799896,1613253148],[1483966600,1348836071],[159505618,2527621997],[2674227354,1695130688],[2683539437,1927873839],[3833196123,2570082188],[3891433165,759819981],[1455453349,2179602430],[1430583255,1957776111],[2067726741,4235143439],[303380021,2998980439],[2136024795,3126725799],[2054591852,1051702291],[1029141665,489794361],[2317027384,569642164],[2068461795,624418658],[2499875684,1830645251],[1302894490,4319401],[1002663431,2406815191],[1560941298,2060652753],[2141002286,515773223],[3661248027,475092913],[3705503008,2419919909],[914567990,3496539911],[3462935583,2039034761],[2878378006,2379243316],[1133857586,1390159333],[3023618742,2140726761],[282908558,944874642],[3686955701,1148723903],[2604456805,4163675010],[3061545110,377179268],[3218002352,76459088],[2836503392,916455101],[536836808,151306053],[2886925079,404221671],[2936593041,2011015485],[453815187,1852163908],[3042568989,82176306],[3279635891,4174836410],[3282689058,2360003049],[4088968807,1516570623],[2680453086,1322680794],[1731693966,3438253771],[1842894553,1294307894],[2736377365,2964642609],[121205621,521330014],[2324595870,3005710757],[3784465521,676493813],[1958759409,2030833406],[1306150933,1016370058],[2636541290,482366508],[1950415745,1695073534],[322077955,3746046623],[3602873262,3829181504],[1211684447,1861645455],[504701736,4080111082],[2407799203,1223857855],[1925743434,1498920209],[3617596327,845198428],[2498480299,3484773806],[2680229135,2560201696],[3731399221,1536412390],[2756509305,2924710846],[2635957500,3459716133],[1372762539,769635894],[802677945,3878474636],[1707760534,3075809808],[3714687192,2872792173],[1615679922,1606381794],[1940556374,1337437342],[445390489,731124040],[2864974375,64601760],[1984806574,2141516710],[513390958,1890172555],[744398315,1475299139],[982749166,852662657],[652663695,4260736510],[1184061125,82616221],[3363191899,147951756],[1064069880,1507328085],[2138882964,547595589],[2616926846,3186935246],[2298715513,3606862940],[2414381911,811477686],[2694745228,900437726],[4202576185,2201114451],[3602305260,3323446937],[3756663274,2658490339],[3061587876,2171079416],[3390977925,2850497765],[486312941,224925241],[3515712841,3510684394],[1322319486,2647200565],[3839619171,1148450258],[392296762,1154854654],[1401523788,957405781],[1934485528,527352730],[645968162,3131215255],[696971825,3361451947],[2038689491,1946699733],[1723966113,2785859721],[2652365974,1118037185],[3988018407,3134982149],[1354171594,3053634345],[1287854075,2631782435],[1723106141,2662328866],[563845090,1878819261],[639520332,171129501],[534957223,1696062352],[3612364282,2283204027],[3109494688,1304463816],[500957989,630925278],[3477030536,2149497258],[4109750364,281719363],[951472732,564407054],[922095147,2767874048],[3946156928,829677774],[2622281253,2086286851],[2936811901,850242186],[630086272,3340782667],[2340986210,1296336989],[4107355543,3865114709],[3560210278,3968418243],[3868847493,2967450637],[611513888,2083325060],[3265390517,3025776309],[2874106961,3424470508],[1668707698,2923258228],[2778598353,24320552],[292356118,3415510793],[754567370,86994591],[185141877,1621715171],[2884558258,3722473457],[1492107531,111281805],[3336927864,4225337056],[782994598,1021838039],[346133860,18281270],[2080909533,1649329040],[3612065399,3859901127],[2151962287,284556115],[3957975594,3745718727],[52533817,3998775856],[1232633839,397383972],[2716413964,3629253960],[1531307298,3836851439],[3030137657,2500401718],[3561556693,653345841],[313061910,2945718466],[2065276,3342140708],[410498334,1470588117],[2726640512,4051654894],[2570984935,758567696],[3008987264,3462702678],[623860175,228525243],[3527183895,1829844480],[467272850,3890501742],[568376656,650516927],[990477018,4035508558],[2366955227,817792110],[4183621538,989198068],[946958343,1639184195],[3395758993,3924097558],[1690887473,3220519765],[605184237,1255270525],[275515833,1926424610],[2142902612,283494960],[2021972412,1823828440],[105373677,3448326697],[1666662384,1042433908],[1338566998,261206307],[498685668,1344755577],[3101233780,3119109371],[2733370951,3808165089],[3656512268,3449289481],[4025308119,1607880299],[778896067,1612183167],[2846510368,3674754715],[3058428120,2991822529],[1892379383,3268787440],[2565895844,4154602030],[3213117192,98999135],[2495816991,116985075],[1040203361,1785041385],[3106252493,69316595],[1639829808,2087117568],[3213709576,3799911752],[604681594,2340981536],[4236730699,2938666503],[4009938384,1878897714],[2701667332,1725918218],[2182473079,1258184],[3550198211,2760750799],[657991062,875584532],[1640976276,3380476221],[460041378,2924352091],[1972323596,2287414795],[2510248061,1350206297],[2959337826,3762681165],[1625877874,3235902929],[2070189957,1429368735],[4245163299,1839731898],[2358312347,138364248],[275739390,2179122576],[2037777210,972544338],[2766930226,1984733259],[1933485829,4209310327],[3034118011,3286589799],[2653025529,62078937],[2641780289,2679545709],[3540781195,2787026415],[1569993599,3215949659],[441337890,3947723353],[1878946792,459505587],[3724105660,920173002],[1691411102,3934795955],[148741087,3647709027],[142506469,2776440083],[3811107376,3823285243],[472209891,252266174],[1913386482,1867329194],[2960608550,482740699],[1145005292,1513558421],[1091751784,1687823886],[3625186042,3086337482],[1712140887,940065262],[1504455800,1945702563],[3896940088,2003245591],[2478191531,4197739e3],[3233871270,250924495],[3404865229,1131917964],[1462204167,429621621],[1349259705,3641608989],[3627860584,2048468319],[1244251718,1513180369],[3979211282,371413143],[3043187861,4285699810],[581894202,3060983825],[1390895705,1811317301],[2599134010,3337406128],[2488233440,2436161462],[1816641224,2208816697],[1792034756,815866116],[2779893723,2695577703],[2084952115,2951772258],[1351806869,169269771],[2469979804,86740603],[1163545420,4264616949],[1795352113,2511146232],[1796715044,3134635815],[3521170642,1538900329],[3725363621,1455009392],[1342594643,1512127734],[2618386938,662157428],[2028859350,2494504685],[1841905045,648351336],[4002935891,4033319405],[850071259,1768358867],[979915719,3876018087],[830889197,1629549437],[1744763229,2455795856],[522919199,368499868],[3063822504,2522639205],[2861636095,407686388],[4097602344,1945259027],[4215946617,1251639506],[894485042,534122652],[924809191,1807237502],[1811585710,1589663609],[3439653887,1722232],[3810997538,105152714],[2677100683,4291805514],[77233985,102407776],[4239834691,2851274395],[148802076,2006440603],[2409138150,126301601],[3048474397,3217504870],[588133437,4221603123],[1139638106,263087485],[982032635,3165674595],[562514827,1294842959],[467575086,905357513],[1405117894,3370530088],[3813285157,242912619],[3601878331,1985076606],[1586505598,2092146221],[738488098,103663229],[2970334297,321718822],[1068097019,1742926233],[235518094,420804527],[283685722,4092504887],[2666392744,3799169331],[3569817788,1256762975],[2169728352,292617248],[2444571896,2239859206],[3967907832,1066404216],[420376911,2913277294],[3046293305,2956347747],[2311278792,2477686209],[2885955184,4172514290],[3030078181,2275536480],[4212469731,4280736393],[1046900335,1773022229],[995380926,1414273529],[3892683234,2429494358],[615726237,2127712535],[3880203074,2071130305],[176180504,3070850165],[1474506861,2283723599],[1256707747,1857412043],[764236850,359687368],[3521530334,511649419],[2318567964,3992868140],[128167623,2518992858],[2220129756,1042300052],[2567608573,1349636707],[441446694,384760969],[4143447316,829506048],[817912603,2738025500],[2368091832,357934982],[1187643061,1561463042],[3438021235,3030161697],[1318922279,895468690],[434876457,1130220303],[1180291767,1132759596],[2520707785,1798553137],[1962430872,2958700157],[1510954061,3534879512],[57831539,3269538993],[3354831405,3852135009],[891783098,2698494511],[2555636406,996018997],[2881342935,3982231648],[3473267445,2894952368],[1238029452,3958679326],[2051805420,559465638],[3655936674,1186951582],[330209165,167662935],[1929681327,2450868735],[1313566811,2458925988],[4283920930,3243182650],[1438004300,4185567150],[3093439067,89876832],[3401620219,3721579956],[3673745794,2682874719],[3053321309,825410712],[822915968,3681514755],[3900685126,561657358],[553823814,1857753416],[4166295066,983949325],[128359165,3426887194],[3300989119,3884968622],[4193552686,3647722552],[452189154,1569670618],[4122259632,3537825460],[2519387887,2821594244],[74333898,2940550377],[4032631446,2173999692],[2521268686,1934310532],[2620314688,2177785789],[1378755571,2455646622],[394133753,4231198609],[734399075,2800989170],[573292462,1634883078],[1214417373,3426576256],[2110224475,2399009920],[2331215665,3224086912],[531326186,698539511],[3839443603,583861850],[2644531398,2017784332],[616620850,3070237104],[590349237,2798642861],[3582377217,3317831670],[1582708616,1596570667],[2126148205,2358511947],[173450736,3219362418],[3616831144,1323437318],[2655785577,3131359031],[401600069,2967397952],[496349349,4244179910],[2479612086,2579650653],[1710903074,2049666425],[3589924952,690291925],[3266682943,1900485231],[1496318498,3025542656],[3459221058,3389461212],[2091479615,3140389256],[663040899,1207089672],[3323704225,1105530508],[353318429,2879253542],[2674540957,941987316],[1688550857,620657353],[338551967,4286217277],[204689992,2239736295],[178008789,3940832005],[3871613304,3300636974],[1911672356,2429684487],[4055679954,1974461722],[3878217928,1009991796],[2533095482,310920740],[2174833823,3596041637],[1604814460,2939543881],[1452830254,4092397851],[2441027029,4169690209],[3524103304,3372213855]],s=[[836181454,1689436944],[2776523577,3710710688],[4049974663,3750330768],[519497435,2979405513]],_=[[1892447193,197291556],[3793382197,3742120663],[3838936,2994760034],[479846099,1018728609],[3476112862,182272649],[3504620154,1427438450],[2009473484,2679350403],[1738755500,1129731339]],T=[4174784170,2938602761],S={p:0,P:1,n:2,N:3,b:4,B:5,r:6,R:7,q:8,Q:9,k:10,K:11},C=[];C[5]=1,C[6]=0,C[9]=3,C[10]=2,C[17]=5,C[18]=4,C[33]=7,C[34]=6,C[65]=9,C[66]=8,C[129]=11,C[130]=10;var P,O=[2,5,10,20,40,80,160,64],M=["","0000000","000000","00000","0000","000","00","0",""];function to32BitHex(i){var s=i.toString(16);return M[s.length]+s}function to64BitHex(i){return to32BitHex(i[0])+to32BitHex(i[1])}function hash(C,P){var M,R,D,j,$,U,V,Z,Y,X,Q,ee,te=C.split(" "),ne=te[0].split("/"),re="w"===te[1],ie=0,ae=Number(re),se=ae?3:4;for(D=7;D>=0;D-=1)for(j=0,V=($=ne[D]).length,U=0;U<V;U+=1)Z=$[U],(Q=S[Z])>=0&&(M=(M^(Y=i[64*Q+8*(7-D)+j])[0])>>>0,R=(R^Y[1])>>>0,Q===ae&&D===se&&(ie|=1<<j)),j+=Number(Z)||1;return"-"!==te[2]&&((X=te[2]).indexOf("K")>-1&&(M=(M^(Y=s[0])[0])>>>0,R=(R^Y[1])>>>0),X.indexOf("Q")>-1&&(M=(M^(Y=s[2])[0])>>>0,R=(R^Y[1])>>>0),X.indexOf("k")>-1&&(M=(M^(Y=s[1])[0])>>>0,R=(R^Y[1])>>>0),X.indexOf("q")>-1&&(M=(M^(Y=s[3])[0])>>>0,R=(R^Y[1])>>>0)),te[3]&&"-"!==te[3]&&(ee=te[3].charCodeAt(0)-97,O[ee]&ie&&(M=(M^(Y=_[ee])[0])>>>0,R=(R^Y[1])>>>0)),re&&(M=(M^T[0])>>>0,R=(R^T[1])>>>0),P&&"hex"===P?to64BitHex([M,R]):[M,R]}function wrap(i){var s,_,T,S,C={};function parseBook(i,s){var T,S,C,P,O,M,R=_.getUint16(i+8),D=_.getUint16(i+10);return S=R>>9&7,P=R>>3&7,O=7&R,M=R>>12&7,4==(C=R>>6&7)&&s&&S===P&&"-"!==s&&(7===O&&(0===S&&s.indexOf("K")>-1||7===S&&s.indexOf("k")>-1)?O-=1:0===O&&(0===S&&s.indexOf("Q")>-1||7===S&&s.indexOf("q")>-1)&&(O+=2)),T=String.fromCharCode(C+97)+(S+1)+String.fromCharCode(O+97)+(P+1),M&&(T+="nbrq"[M-1]),{move:T,weight:D}}function query(i){return"string"==typeof i&&(i={fen:i}),s(i)}if(C={query:query,pick:function pick2(i){var s,_,T,S,C,P=0;if(function sortMoves(i){i.sort((function sorter(i,s){return s.weight-i.weight}))}(s=(i=i||{}).moves||query(i)),T=s.length){if(i.type&&1!==T&&"best"!==i.type){if("random"===i.type){for(S=Math.floor(Math.random()*s.sum)+1,C=0;C<T-1&&!(S<=(P+=s[C].weight));C+=1);return s[C].move}return"randomDisregardWeight"===i.type?s[Math.floor(Math.random()*T)].move:"worst"===i.type?s[T-1].move:((_=parseInt(i.type)||1)<0&&(_=T+_+1),_<1?_=1:_>T&&(_=T),s[_-1].move)}return s[0].move}}},i.getUint32)s=function bufferBookFind(i){var s,T,S,C,P,O=_.length||_.byteLength||0,M=i.offset||0,R=i.fen,D=i.chess960,j=i.checkAll,$=[],U=0;for(i.hash?"string"==typeof(s=i.hash)&&(s=function hex64ToDec(i){return[parseInt(i.substr(0,8),16),parseInt(i.substr(8),16)]}(s)):s=hash(R),!D&&R&&(P=R.split(" ")[2]),M=0;M<O;M+=16)if(_.getUint32(M)===s[0]&&_.getUint32(M+4)===s[1])S=parseBook(M,P),$[$.length]=S,U+=S.weight,T=!0;else if(T&&!j)break;if($.sum=U,i.relative)for(C=$.length-1;C>=0;C-=1)$[C].relative=Math.round($[C].weight/U*1e4);return $},_=i,C.buffer=_;else for(S in s=function jsonBookFind(i){var s,_,S,P,O,M,R=0,D=i.fen;if(C.useFen)S=D.replace(/ \d+ \d+$/,""),(s=T[S])||(P=S.replace(/[a-h][1-8]$/,"-"))!==S&&(s=T[P]);else if(i.hash||(i.hash=hash(D,"hex")),s=T[i.hash]){if(s[0]&&s[0].n&&(s=s[0]),s.n&&!s.b)return[];if(s.b)s=function decompressMoves(i){var s,_=[],T=i.b.length;for(s=0;s<T;++s)_.push({move:i.b[s],weight:i.w[s]});return _}(s);else if(!i.chess960&&D)for(M=D.split(" ")[2],_=s.length-1;_>=0;_-=1)(O=s[_].move.match(/e([18])([ah])\1/))&&("h"===O[2]&&("1"===O[1]&&M.indexOf("K")>-1||"8"===O[1]&&M.indexOf("k")>-1)?s[_]={move:"e"+O[1]+"g"+O[1],weight:s[_].weight}:"a"===O[2]&&("1"===O[1]&&M.indexOf("Q")>-1||"8"===O[1]&&M.indexOf("q")>-1)&&(s[_]={move:"e"+O[1]+"c"+O[1],weight:s[_].weight}))}if(s)for(_=s.length-1;_>=0;_-=1)R+=Number(s[_].weight);else s=[];return s.sum=R,s},T=i,C.json=T,T){C.useFen=S.indexOf(" ")>-1;break}return C}function getBook(i,s){!function ajaxLoad(i,s){var _=new XMLHttpRequest,T=i.toLowerCase().indexOf(".json")>-1;function onload(){var i;if(_.status>=200&&_.status<300||304===_.status||0===_.status||1223===_.status)if(T)try{s(null,JSON.parse(_.response))}catch(S){s(S)}else i=new DataView(_.response),s(null,i);else s(new Error("Error code: "+_.status))}_.open("GET",i,!0),T||(_.responseType="arraybuffer"),_.onload=onload,_.onerror=onload,_.send()}(i,(function onload(i,_){var T;if(_&&(T=wrap(_)),s)return s(i,T);if(i)throw i;return T}))}return{hash:hash,loadBook:(P={},function loadBook2(i,s){P[i]?P[i].book?setTimeout((function(){s(null,P[i].book)}),0):P[i].cbs.push(s):(P[i]={cbs:[s]},getBook(i,(function onload(s,_){var T=P[i].cbs;s?delete P[i]:(P[i].book=_,P[i].cbs=void 0),T.forEach((function(i){setTimeout((function(){i(s,_)}),0)}))})))}),to64BitHex:to64BitHex,zobristPiece:i,zobristCastle:s,zobristEnPassant:_,zobristTurn:T,zobristPieceValue:S,zobristPieceValueNumbers:C}}(),_=function init2(){var i,_,T,S,C={Chess:0,Chess960:1,Crazyhouse:2,"3-check":3,"King of the Hill":4,Bughouse:5,chess960:1,fischerandom:1,fischerrandom:1,fischer:1,chess9lx:1,960:1,crazyhouse:2,"three-check":3,threecheck:3,"3check":3,kingofthehill:4,koth:4,bughouse:5},P=["Chess","Chess960","Crazyhouse","3-check","King of the Hill","Bughouse"],O={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],R=0,D=0,j=0,$=-1,U=32,V=128,Z=252,Y=255,X=512,Q=112,ee=14,te=21,ne=127,re="pnbrqkPNBRQK",ie="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",ae=[];ae[5]=[-16,-17,-15],ae[6]=[16,17,15],ae[8]=[-18,-33,-31,-14,18,33,31,14],ae[16]=[-17,-15,17,15],ae[32]=[-16,1,16,-1],ae[64]=[-17,-16,-15,1,17,16,15,-1],ae[128]=[-17,-16,-15,1,17,16,15,-1];var se={P:5,p:6,N:9,n:10,B:17,b:18,R:33,r:34,Q:65,q:66,K:129,k:130},oe={P:4,p:4,N:8,n:8,B:16,b:16,R:32,r:32,Q:64,q:64,K:128,k:128},le={5:"P",6:"p",9:"N",10:"n",17:"B",18:"b",33:"R",34:"r",65:"Q",66:"q",129:"K",130:"k"},ce={9:"N",10:"N",17:"B",18:"B",33:"R",34:"R",65:"Q",66:"Q",129:"K",130:"K"},ue=[80,0,0,0,0,0,0,96,0,0,0,0,0,0,80,0,0,80,0,0,0,0,0,96,0,0,0,0,0,80,0,0,0,0,80,0,0,0,0,96,0,0,0,0,80,0,0,0,0,0,0,80,0,0,0,96,0,0,0,80,0,0,0,0,0,0,0,0,80,0,0,96,0,0,80,0,0,0,0,0,0,0,0,0,0,80,8,96,8,80,0,0,0,0,0,0,0,0,0,0,0,8,212,224,212,8,0,0,0,0,0,0,96,96,96,96,96,96,224,0,224,96,96,96,96,96,96,0,0,0,0,0,0,8,212,224,212,8,0,0,0,0,0,0,0,0,0,0,0,80,8,96,8,80,0,0,0,0,0,0,0,0,0,0,80,0,0,96,0,0,80,0,0,0,0,0,0,0,0,80,0,0,0,96,0,0,0,80,0,0,0,0,0,0,80,0,0,0,0,96,0,0,0,0,80,0,0,0,0,80,0,0,0,0,0,96,0,0,0,0,0,80,0,0,80,0,0,0,0,0,0,96,0,0,0,0,0,0,80],de=[336,80,80,0,0,0,96,352,96,0,0,0,80,80,336,0,80,336,80,80,0,0,96,352,96,0,0,80,80,336,80,0,80,80,336,80,80,0,96,352,96,0,80,80,336,80,80,0,0,80,80,336,80,80,96,352,96,80,80,336,80,80,0,0,0,0,80,80,336,88,120,360,120,88,336,80,80,0,0,0,0,0,0,80,88,476,252,508,252,476,88,80,0,0,0,0,96,96,96,96,120,252,252,252,252,252,120,96,96,96,96,0,352,352,352,352,360,508,252,0,252,508,360,352,352,352,352,0,96,96,96,96,120,252,252,252,252,252,120,96,96,96,96,0,0,0,0,80,88,476,252,508,252,476,88,80,0,0,0,0,0,0,80,80,336,88,120,360,120,88,336,80,80,0,0,0,0,80,80,336,80,80,96,352,96,80,80,336,80,80,0,0,80,80,336,80,80,0,96,352,96,0,80,80,336,80,80,0,80,336,80,80,0,0,96,352,96,0,0,80,80,336,80,0,336,80,80,0,0,0,96,352,96,0,0,0,80,80,336],he=[336,80,80,0,0,0,96,352,96,96,0,0,80,80,336,0,80,336,80,80,0,0,96,352,96,96,0,80,80,336,80,0,80,80,336,80,80,0,96,352,96,96,80,80,336,80,80,0,0,80,80,336,80,80,96,352,96,112,80,336,80,80,0,0,0,0,80,80,336,88,120,360,120,120,336,80,80,0,0,0,0,0,0,80,88,476,252,508,252,508,88,80,0,0,0,0,96,96,96,96,120,252,252,252,252,252,252,104,96,96,96,0,352,352,352,352,360,508,252,0,252,508,488,352,352,352,352,0,96,96,96,96,120,252,252,252,252,252,252,104,96,96,96,0,0,0,0,80,88,476,252,508,252,508,88,80,0,0,0,0,0,0,80,80,336,88,120,360,120,120,336,80,80,0,0,0,0,80,80,336,80,80,96,352,96,112,80,336,80,80,0,0,80,80,336,80,80,0,96,352,96,96,80,80,336,80,80,0,80,336,80,80,0,0,96,352,96,96,0,80,80,336,80,0,336,80,80,0,0,0,96,352,96,96,0,0,80,80,336],pe=[336,80,80,0,0,96,96,352,96,0,0,0,80,80,336,0,80,336,80,80,0,96,96,352,96,0,0,80,80,336,80,0,80,80,336,80,80,96,96,352,96,0,80,80,336,80,80,0,0,80,80,336,80,112,96,352,96,80,80,336,80,80,0,0,0,0,80,80,336,120,120,360,120,88,336,80,80,0,0,0,0,0,0,80,88,508,252,508,252,476,88,80,0,0,0,0,96,96,96,104,252,252,252,252,252,252,120,96,96,96,96,0,352,352,352,352,488,508,252,0,252,508,360,352,352,352,352,0,96,96,96,104,252,252,252,252,252,252,120,96,96,96,96,0,0,0,0,80,88,508,252,508,252,476,88,80,0,0,0,0,0,0,80,80,336,120,120,360,120,88,336,80,80,0,0,0,0,80,80,336,80,112,96,352,96,80,80,336,80,80,0,0,80,80,336,80,80,96,96,352,96,0,80,80,336,80,80,0,80,336,80,80,0,96,96,352,96,0,0,80,80,336,80,0,336,80,80,0,0,96,96,352,96,0,0,0,80,80,336],me=[336,80,80,0,0,96,96,352,96,96,0,0,80,80,336,0,80,336,80,80,0,96,96,352,96,96,0,80,80,336,80,0,80,80,336,80,80,96,96,352,96,96,80,80,336,80,80,0,0,80,80,336,80,112,96,352,96,112,80,336,80,80,0,0,0,0,80,80,336,120,120,360,120,120,336,80,80,0,0,0,0,0,0,80,88,508,252,508,252,508,88,80,0,0,0,0,96,96,96,104,252,252,252,252,252,252,252,104,96,96,96,0,352,352,352,352,488,508,252,0,252,508,488,352,352,352,352,0,96,96,96,104,252,252,252,252,252,252,252,104,96,96,96,0,0,0,0,80,88,508,252,508,252,508,88,80,0,0,0,0,0,0,80,80,336,120,120,360,120,120,336,80,80,0,0,0,0,80,80,336,80,112,96,352,96,112,80,336,80,80,0,0,80,80,336,80,80,96,96,352,96,96,80,80,336,80,80,0,80,336,80,80,0,96,96,352,96,96,0,80,80,336,80,0,336,80,80,0,0,96,96,352,96,96,0,0,80,80,336],fe=[336,80,80,112,112,112,96,352,96,96,112,112,112,80,336,0,80,336,80,112,112,112,112,352,96,112,112,112,112,336,80,0,80,80,336,112,112,112,112,368,112,112,112,112,368,80,80,0,80,80,80,368,112,112,112,368,112,112,112,368,112,80,80,0,80,80,80,112,368,120,120,376,120,120,368,112,112,80,80,0,0,80,88,120,120,508,252,508,252,508,120,120,120,88,80,0,96,104,252,252,252,252,252,252,252,252,252,252,252,252,104,0,352,352,480,480,488,508,252,0,252,508,488,480,480,480,352,0,96,104,252,252,252,252,252,252,252,252,252,252,252,252,104,0,0,80,88,120,120,508,252,508,252,508,120,120,120,88,80,0,80,80,80,112,368,120,120,376,120,120,368,112,112,80,80,0,80,80,80,368,112,112,112,368,112,112,112,368,112,80,80,0,80,80,336,112,112,112,112,368,112,112,112,112,368,80,80,0,80,336,80,112,112,112,112,352,96,112,112,112,112,336,80,0,336,80,80,112,112,112,96,352,96,96,112,112,112,80,336],ge=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,33,16,31,15,0,0,0,0,0,0,0,0,0,0,0,18,17,16,15,14,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,-14,-15,-16,-17,-18,0,0,0,0,0,0,0,0,0,0,0,-15,-31,-16,-33,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],ve=[0,5,8,11,14],be=[31,7,7,7,63],ye={P:0,p:0,N:5,n:5,B:8,b:8,R:11,r:11,Q:14,q:14},_e=[4,8,16,U,64],we=["","N","B","R","Q"],ke={CAPTURE:1,BIG_PAWN:2,EP_CAPTURE:4,ANY_CAPTURE:5,PROMOTION:8,KSIDE_CASTLE:16,QSIDE_CASTLE:32,KQSIDE_CASTLE:48,DROP:64,DROP_OR_PROMOTE:72},Te=[0,6,1],Se={K:119,Q:112,k:7,q:0,A:112,B:113,C:114,D:115,E:116,F:117,G:118,H:119,a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7},Ce=["Event","Site","Date","Round","White","Black","Result"],xe=["Event","Site","Date","Round","White","Black","Result","Variant","SetUp","FEN","WhiteA","WhiteB","BlackA","BlackB"];function rank(i){return i>>4}function file(i){return 7&i}function algebraic(i){return String.fromCharCode(file(i)+97)+(8-rank(i))}function swapColor(i){return 3-i}function hashNum(i,s){i[0]=(i[0]^s[0])>>>0,i[1]=(i[1]^s[1])>>>0}function completeFen(i){var s,_;return(s=[""," w - - 0 1"," - - 0 1"," - 0 1"," 0 1"," 1"][(_=(i=i.trim()).split(" ")).length])&&i?i+=s:"0"===_[5]&&(_[5]=1,i=_.join(" ")),i}function createVariantZobristNumbers(){s.zobristCheck=[[441249556,340005552],[1040760204,311043682],[1621584863,1749286446],[1006868636,1625552915],[1953853171,24921145],[161251506,1935545265]]}function validateFen(i,s){var _,T,S,P,O,M,R,D,j,$,U,V,Z,Y,X,Q,ee,te,ne,ie,ae=/^(?:[A-H]{1,2}[a-h]{0,2}|[A-H]{0,2}[a-h]{1,2}|KQ?k?q?|Qk?q?|kq?|q|-)$/,se=C[s]||1*s||C[String(s).replace(/\s/g,"").toLowerCase()],oe=se===C.Crazyhouse||se===C.Bughouse,le=0,ce=0,ue=!0,de="",he={0:0,7:0},pe={0:0,7:0},me={0:"k",7:"K"},fe={0:"r",7:"R"},ge=se===C.Chess960;if(!i)return 1;if(se===C.Bughouse&&2===(O=i.split(" | ")).length)return 0===(M=validateFen(O[0],s))&&(M=validateFen(O[1],s)),M;if(O=i.split(/\s+/),se===C["3-check"]&&7===O.length&&(P=O.pop(),!/^\+[0-3]\+[0-3]$/.test(P)||"+3+3"===P))return 14;if(6!==O.length)return 1;if(/\D|.{7,}|^0|^$/.test(O[5]))return 2;if(/\D|.{7,}|^0.|^$/.test(O[4]))return 3;if(!/^(?:-|[abcdefgh][36])$/.test(O[3]))return 4;if($=O[2],ge){if(!ae.test($))return 12}else if(!/^(?:KQ?k?q?|Qk?q?|kq?|q|-)$/.test($)){if(void 0!==s||!ae.test($))return 5;ge=!0}if("w"!==O[1]&&"b"!==O[1])return 6;if(oe&&(O[0]=O[0].replace(/~(?=.*\/)/g,"")),T=O[0].split("/"),oe&&9===T.length&&(P=T.pop(),!/^[pnbrq]{0,63}$/i.test(P)))return 13;if(8!==T.length)return 7;if("3"===O[3][1]&&"w"===O[1]||"6"===O[3][1]&&"b"===O[1])return 11;for("-"!==O[3]&&(R=4==(ce="3"===O[3][1]?4:3)?5:2,le=O[3].charCodeAt(0)-97,ue=!1,de=4===ce?"P":"p"),_=0;_<T.length;++_){for(te=0,ne=!1,ie=0;ie<T[_].length;ie++)if(+(S=T[_][ie])==+S){if(ne)return 8;te+=1*S,ne=!0}else{if(-1===re.indexOf(S))return 9;if(ue||ce!==_||le!==te||de!==S||(ue=!0),R===_&&le===te)return 11;_%7==0&&(S===me[_]?pe[_]=1<<te:S===fe[_]&&(he[_]|=1<<te)),++te,ne=!1}if(8!==te)return 10}if(!ue)return 11;if("-"!==$)if(ge)for(V={0:0,1:0,2:252,4:248,8:240,16:224,32:192,64:128,128:0},U={0:0,1:0,2:1,4:3,8:7,16:15,32:31,64:63,128:0},ee={0:[0,0],7:[0,0]},_=$.length-1;_>=0;--_){if(X=$.charCodeAt(_),Q&&Q>X&&Q-X<8)return 15;if(75===X?Z=he[Y=7]&V[pe[Y]]:81===X?Z=he[Y=7]&U[pe[Y]]:107===X?Z=he[Y=0]&V[pe[Y]]:113===X?Z=he[Y=0]&U[pe[Y]]:(Z=1<<X-((Y=X>=97?0:7)?65:97),Q=X),!Z||0!=(Z&Z-1))return 15;if(pe[Y]<2||pe[Y]>64||(Z&he[Y])!==Z)return 15;if(++ee[Y][1*(pe[Y]<Z)]>1)return 15}else{if((D=($.indexOf("K")>-1?128:0)|($.indexOf("Q")>-1?1:0))&&(16!==pe[7]||(D&he[7])!==D))return 15;if((j=($.indexOf("k")>-1?128:0)|($.indexOf("q")>-1?1:0))&&(16!==pe[0]||(j&he[0])!==j))return 15}return 0}function handToString(i,s){var _,T,S="",C=0,P=s?6:0;if(i)for(;C<5;){for(_=i>>ve[C]&be[C],T=0;T<_;++T)S+=re[C+P];++C}return S}function hashEP(i,_,T,S){i[T+1]!==S&&i[T-1]!==S||hashNum(_,s.zobristEnPassant[file(T)])}function addPawnMove(i,s,T,S){var C;(0===_||2&i[T+8])&&(rank(T)%7==0?(C=S|ke.PROMOTION|s<<7|T<<ee,M[D++]=8388608|C,M[D++]=6291456|C,M[D++]=4194304|C,M[D++]=2097152|C):M[D++]=S|s<<7|T<<ee)}function kingOfTheHillWin(i){switch(i){case 67:case 68:case 51:case 52:return!0}return!1}function canCastle960(i,s,_,T){var S,C,P,O=s+(_-s%8),M=_>s%8?1:-1;for(P=s+M;P!==O;P+=M)if(i[P])return!1;if(C=(S=1===T?1===M?118:114:1===M?6:2)-M,i[S+8]||i[S]&&S!==s&&S!==O||i[C]&&C!==s&&C!==O)return!1;if(S!==s)for(P=s+(M=S>s?1:-1);P!==S;P+=M)if(P!==O&&i[P]||i[P+8])return!1;return!0}var Ee=function(){function createLine(i,s,_,T,S,P,O){var M,R,D,j,$,U,V,Z,Y,X,Q,ee=[],te="",ne=!0,re=s[_],ie=re.length,ae="";if(re.commands)for(j in re.commands)(!P||P.indexOf(j)>-1)&&(ae+="[%"+j+" "+re.commands[j]+"]");for(re.initComment&&!O&&(ae=(ae+" "+re.initComment.replace(/(\"|\}|\%|\\)/g,"\\$1")).trim()),ae&&ee.push("{"+ae+"}"),R=0;R<ie;++R){if(U=1===(M=re[R]).color,te="",ae="",T!==C.Bughouse?(ne&&!U?te=i+"...":U&&(te=i+"."),S&&(U||ne)&&(te+=" ")):(ee.bughouseOrder||(ee.bughouseOrder=[]),ee.bughouseOrder.push(M.bughouseOrder),R||(ee.blackCountOffset=2===re[0].color?1:0)),te+=M.san,M.annotation&&(te+=M.annotation),M.additionalAnnotation&&(te+=" "+M.additionalAnnotation.join(" ")),ne=!1,void 0===M.time||M.commands||(M.commands={clk:(Y=M.time,X=void 0,Q=void 0,X=Math.floor(Y%36e3/600),Q=Math.floor(Y%36e3%600)/10,Math.floor(Y/36e3)+":"+(X<10?"0":"")+X+":"+(Q<10?"0":"")+Q)}),M.commands)for(j in M.commands)(!P||P.indexOf(j)>-1)&&(ae+="[%"+j+" "+M.commands[j]+"]");if(M.comment&&!O&&(ae=(ae+" "+M.comment.replace(/(\"|\}|\%|\\)/g,"\\$1")).trim()),ae&&(te+=" {"+ae+"}",ne=!0),ee.push(te),M.lines)for(V=M.lines.length,D=0;D<V;++D)s[Z=M.lines[D]].length&&(($=createLine(i,s,Z,T,S,P,O))[0]="("+$[0],$[$.length-1]+=")",ee=ee.concat($),ne=!0);U||i++}return ee}function createHeader(i,s){return"["+i+' "'+String(s).replace(/(\"|\\)/g,"\\$1")+'"]'}return function generatePgn2(i,s,_,T,S,P){var O,M,R="string"==typeof i.newline?i.newline:"\n",D=void 0===i.spaceAfterPeriods||i.spaceAfterPeriods,j="";for(O in j+=createHeader("Event",s.Event)+R,j+=createHeader("Site",s.Site)+R,j+=createHeader("Date",s.Date)+R,j+=createHeader("Round",s.Round)+R,S===C.Bughouse?(j+=createHeader("WhiteA",s.WhiteA||"?")+R,j+=createHeader("BlackA",s.BlackA||"?")+R,j+=createHeader("WhiteB",s.WhiteB||"?")+R,j+=createHeader("BlackB",s.BlackB||"?")+R):(j+=createHeader("White",s.White)+R,j+=createHeader("Black",s.Black)+R),j+=createHeader("Result",s.Result)+R,S&&(j+=createHeader("Variant",s.Variant)+R),s.FEN&&s.FEN!==ie&&(j+=createHeader("SetUp","1")+R,j+=createHeader("FEN",s.FEN)+R),s)-1===xe.indexOf(O)&&(j+=createHeader(O,s[O])+R);if(j+=R,M=createLine(T,_,0,S,D,i.hideCommands?[]:i.restrictCommands,i.hideComments),S===C.Bughouse){if(P.isDependent)return M;M=function makeBugHousePgn(i,s,_){var T=s,S=i.siblingGame.pgn(),C=0,P=0,O=[];for(s.bughouseOrder=s.bughouseOrder||[],S.bughouseOrder=S.bughouseOrder||[];s.bughouseOrder.length||S.bughouseOrder.length;)!s.bughouseOrder.length||S.bughouseOrder.length&&s.bughouseOrder[0]>S.bughouseOrder[0]?(S.bughouseOrder.shift(),O.push("B")):(s.bughouseOrder.shift(),O.push("A"));return s=[],O.forEach((function(O){var M,R,D,j="";"A"===O?(M=T,R=++C,D=i.startingMoveNumber()):(M=S,R=++P,D=i.siblingGame.startingMoveNumber()),j=String(Math.floor((R+1)/2)+D-1),(M.blackCountOffset+R)%2?j+=O:j+=O.toLowerCase(),j+="."+(_?" ":"")+M.shift(),s.push(j)})),s}(P,M,D)}return M.push(s.Result),j+function wordWrap(i,s,_){return s<1?i:(s="number"==typeof s?s:80,i.replace(new RegExp("(.{1,"+s+"})(?: |$|\r?\n)","g"),"$1"+_).slice(0,-_.length))}(M.join(" "),i.maxWidth,R)}}(),Pe=function(){var i="!?~",s=/\[%(\S+)\s([^\]]+)\]/,_=/^(?:[+=~\/\-\u2212]+|T?N|RR|D)$/;function extractCommands(i){for(var _,T=i.commands||{};_=s.exec(i.value);)i.value=i.value.replace(_[0],"").trim(),T[_[1]]=_[2],i.commands=T}function isSplitGame(i,s,_,T){for(var S;++s<_;)if((S=i[s].trim())&&"%"!==S[0])return"["===S[0]&&(!T||/^\[\S+\s+".*"\]$/.test(S))}return function tokenize(s,T){var S,C,P,O,M,R,D,j="tags",$=[],U={type:j,value:""},V=0,Z=[],Y=!0;T=T||{},O=(S=s.split(/\r?\n/)).length;e:for(C=0;C<O;++C)if("%"!==(P=S[C].trim())[0])if(P){if(R=(P=" "+P+" ").length,M=0,Y)for(;M<R;++M)if(D=P[M],"tags"===j){if("["===D)U={type:j="tagName",value:""};else if(D.trim()){U={type:j="san",value:""},Y=!1;break}}else if("tagName"===j)U.value&&""===D.trim()?($.push(U),j="tagValueStart"):" "!==D&&(U.value+=D);else if("tagValueStart"===j){if('"'===D||""===D)U={type:j="tagValue",value:""};else if(D.trim()){$.push({type:"tagValue",value:P.slice(M,-1).match(/(.*?)"?\]?$/)[1]}),U={type:j="tags",value:""};continue e}}else if("tagValue"===j)if('"'===D||""===D)if($.push(U),"]"===P[M+1])U={type:j="tags",value:""},++M;else{if("]"===P.slice(-2,-1)){U.value+=P.substr(M).match(/(.*?)"?\s*\] $/)[1],U={type:j="tags",value:""};continue e}j="tagEnd"}else"\\"===D&&M+2<R&&(D=P[++M]),M>0&&(U.value+=D);else{if("]"!==D){if(!D.trim())continue;--M}U={type:j="tags",value:""}}for(;M<R;++M)if(D=P[M],"san"===j)if(i.indexOf(D)>-1)"!"===D||"?"===D||i.indexOf(D)<6&&(D=["!!","??","!?","?!"][i.indexOf(D)-2])?(U.value&&$.push(U),U={type:"a",value:D},"!"!==P[M+1]&&"?"!==P[M+1]||(U.value+=P[++M]),$.push(U),U={type:"san",value:""}):(""===D&&"=/"===U.value?(U.type="aa",U.value+=D):(U.value&&(_.test(U.value)&&("--"!==U.value||T.rejectNullMoves)&&(U.type="aa"),$.push(U)),U={type:"aa",value:D},""===D&&""===P[M+1]&&(U.value="",++M)),$.push(U),U={type:"san",value:""});else if(" "===D||"\t"===D||"\r"===D||"{"===D||"("===D||")"===D){if(U.value){if("$"===U.value[0])U.type="nag";else if("*"===U.value||"1-0"===U.value||"0-1"===U.value||"1/2-1/2"===U.value||"-"===U.value){if(!(V||M+1<R)){if(U.type="result","-"===U.value&&(U.value="1/2-1/2"),$.push(U),Z.push($),C+1===O||C+2===O&&!S[C+1])return Z;Y=!0,U={type:j="tags",value:""},$=[];break}U.type="*"===U.value?"cont":"comment"}_.test(U.value)&&("--"!==U.value||T.rejectNullMoves)&&(U.type="aa"),$.push(U),U={type:j,value:""}}if(" "===D||"\t"===D||"\r"===D)j="san";else if("{"===D)j="comment",$.length&&"comment"===$[$.length-1].type&&((U=$.pop()).value+=" ");else if("("===D)j="san",$.push({type:"variationStart",value:++V});else{if(V<1){if(!T.commentErrors)return!1}else $.push({type:"variationEnd",value:V--});j="san"}U.type=j}else if("."===D||!U.value&&+D==+D&&"-"!==P[M+1]&&"/"!==P[M+1]){if(+D==+D)switch(U.number||(U.number=""),U.number+=D,P[M+1]){case"A":case"a":case"B":case"b":U.number+=P[++M],$.push({type:"number",value:U.number}),delete U.number}}else U.value+=D;else 0===M&&(U.value=U.value.trim()),"}"!==D?("\\"===D&&M+2<R&&(D=P[++M]),U.value+=D):(U.value=U.value.trim(),U.value.indexOf("[")>-1&&extractCommands(U),$.push(U),U={type:j="san",value:""})}else $.length&&("tags"===j?(j="san",Y=!1):"tagValueStart"!==j&&isSplitGame(S,C,O,V||"comment"===j)&&("comment"===j&&$.push(U),"tagValue"!==$[$.length-1].type&&(Z.push($),$=[]),j="tags",Y=!0,V=0));return U.value&&$.push(U),!$.length&&Z.length||Z.push($),Z}}();function Chess2(xe,Ae){var Oe,Me,ze=0,Ie=!0,Le=[],Re=1,Ne=[],De=$,je=0,Be=1,$e=1,Ue=[],Fe=[Ue],He=0;Ue.id=He;var qe={},Ve=[],Ge=!1,Ze=!1,We=makeMoveChess,moveToSan=function(i,s){var _,T,S,C,P,O,$="";return i&ke.KQSIDE_CASTLE?$=i&ke.KSIDE_CASTLE?"O-O":"O-O-O":i&ke.DROP?((_=i>>te)&&($+=we[_]),$+="@"+algebraic(S=i>>ee&ne)):(S=i>>ee&ne,4&(C=Me[T=i>>7&ne])?(i&ke.ANY_CAPTURE&&($+=String.fromCharCode(file(T)+97)+"x"),$+=algebraic(S),i&ke.PROMOTION&&($+="="+we[_=i>>te])):($+=ce[C&Y],j>1&&($+=function getDisambiguator(i,s,_){var T,S,C,P,O,R;if(D<2)return"";for(i&=Z,R=0;R<D;++R)if(_===(T=M[R])>>ee&&(C=T>>7&ne)!==s&&Me[C]&i){if(S=!0,rank(s)===rank(C)){if(P)return algebraic(s);O=!0}if(file(s)===file(C)){if(O)return algebraic(s);P=!0}}return S?P?String(8-rank(s)):String.fromCharCode(file(s)+97):""}(C,T,S)),i&ke.ANY_CAPTURE&&($+="x"),$+=algebraic(S))),s||(i&ke.KQSIDE_CASTLE?(T=i>>7&ne,S=i>>ee&ne):i&ke.DROP_OR_PROMOTE&&(C=_e[_]+Re),inCheckAfterMove(C,T,S,i)&&(We(i,T,S,_),P=R,R=D,O=j,ze&&isVariantWin()||generateMoves()===R?$+="#":$+="+",D=R,R=P,j=O,reverseMove(Ue.pop()))),$};function hashPosition(){var i,_,T,S=1===Re?[4174784170,2938602761]:[0,0];for(T=0;T<120;++T)136&T&&(T+=8),(i=Me[T])&&hashNum(S,s.zobristPiece[64*s.zobristPieceValueNumbers[i&Y]+8*(7-rank(T))+file(T)]);if(Ze)for(_=1;_<3;++_)Ne[_]&&(0!=(Ne[_]&Ne[_]-1)?(hashNum(S,s.zobristCastle[_-1]),hashNum(S,s.zobristCastle[_+1])):Ne[_]>1<<file(Le[_])?hashNum(S,s.zobristCastle[_-1]):hashNum(S,s.zobristCastle[_+1]));else{for(_=1;_<3;++_)Ne[_]&&(Ne[_]&ke.KSIDE_CASTLE&&hashNum(S,s.zobristCastle[_-1]),Ne[_]&ke.QSIDE_CASTLE&&hashNum(S,s.zobristCastle[_+1]));Ge?function hashHand(i,_){var T,S,C,P,O,M,R,D=0;for(T=1;T<3;++T){if(S=_[T])for(C=0;C<5;){for(O=D+63*C,P=S>>ve[C]&be[C],M=0;M<P;++M)hashNum(i,[31*(R=s.zobristPiece[O++])[0]>>>0,17*R[1]>>>0]);++C}D=315}}(S,Oe._hand):ze===C["3-check"]&&function hash3Check(i,_){_[1]&&hashNum(i,s.zobristCheck[_[1]-1]),_[2]&&hashNum(i,s.zobristCheck[_[2]+2])}(S,Ve)}return De!==$&&hashEP(Me,S,De+(1===Re?16:-16),4|Re),S}function getCurrentHash(){var i;return Ue.length?i=Ue[Ue.length-1].hash:(Ue.hash||(Ue.hash=hashPosition()),i=Ue.hash),[i[0],i[1]]}function bughouseify(i){function fixBughouseSan(i){return/#/.test(i)&&checkIsPotentiallyBlockable()&&(i=i.replace("#","+")),i}function bughouseFunc(s,_){var T=i(s,_);return T&&("string"==typeof T?T=fixBughouseSan(T):(T.san=fixBughouseSan(T.san),Ue[Ue.length-1].san=T.san)),T}return bughouseFunc._isBughouseified=!0,bughouseFunc._orig=i,bughouseFunc}function setVariant(i,s){ze!==(ze=i?C[i]||1*i||C[String(i).replace(/\s/g,"").toLowerCase()]||C.Chess:0)&&(ze===C.Bughouse?(Ge=!0,Oe.isDependent||(Oe.siblingGame=Chess2(),Oe.siblingGame.hashing(Ie),Oe.siblingGame.isDependent=!0,Oe.siblingGame.siblingGame=Oe,Oe.siblingGame.header({Variant:"Bughouse"})),createVariantZobristNumbers(),We=makeMoveVariant,moveToSan=bughouseify(moveToSan),Oe.move=bughouseify(Oe.move)):(delete Oe.siblingGame,Ge=ze===C.Crazyhouse,Ze=ze===C.Chess960,ze?(createVariantZobristNumbers(),We=makeMoveVariant):We=makeMoveChess,moveToSan._isBughouseified&&(moveToSan=moveToSan._orig,Oe.move=Oe.move._orig)),s||updateSetup(generateFen()))}function disambiguate960Rook(i,s){for(var _,T,S=i>7?1:2;!(136&i);){if((_=Me[i])&S)if(_&U){if(T)return;T=i%8+(1===S?65:97)}else if(_&V)return T;i+=s}}function clear(i,s,_){Me=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Re=1,Le[1]=$,Le[2]=$,Ne[1]=0,Ne[2]=0,Oe._hand[1]=0,Oe._hand[2]=0,Ve[1]=0,Ve[2]=0,De=$,je=0,Be=1,s||(Fe=[Ue=[]],He=0,Ue.id=He,qe={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},i?setHeader(["Variant",i]):setVariant(!1,_),_||updateSetup(generateFen()))}function reset(){clear(0,!1,!0),Ue.hash=[1178310168,378666140],Me=[34,10,18,66,130,18,10,34,0,0,0,0,0,0,0,0,6,6,6,6,6,6,6,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,5,5,5,5,5,5,5,0,0,0,0,0,0,0,0,33,9,17,65,129,17,9,33,0,0,0,0,0,0,0,0],$e=1,Le[1]=116,Le[2]=4,Ne[1]=48,Ne[2]=48}function load(i,s,_,T){var S,M,R,D,j,Z,Y,Q,ee,te,ne,re,ie=0;if(T?(re=(S=i.split(" "))[3],ne=S[2]):(re=(S=i.trim().split(/\s+/))[3]||"-",ne=S[2]||"-"),void 0===s?(31&ne.charCodeAt(0))<9&&setVariant(C.Chess960,!0):setVariant(s,!0),M=S[0],!T&&!(M=function fixFenPieces(i,s){var _,T,S=i.length,P=0,O=0,M=s&&(s===C.Crazyhouse||s===C.Bughouse);for(_=0;_<S;++_)if(+(T=i[_])!=+T)if("/"===T){if(8!==O&&(i=i.substr(0,_)+(8-O)+i.substr(_),++_,++S),O=0,++P>7){if(!M&&_<S-1||!/^[pnbrq]{0,63}$/i.test(i.substr(_+1)))return!1;break}}else if(se[T]){if(++O>8)return!1}else{if("~"!==T)return!1;M&&_&&/[nbrq]/i.test(i[_-1])||(i=i.substr(0,_)+i.substr(_+1),--_,--S)}else(O+=1*T)>8&&(i=i.substr(0,_)+(T-(O-8))+i.substr(_+1),O=8);return i}(M,ze)))return!1;if(D=M.length,clear(P[ze],_,!0),Ge){if(ze===C.Bughouse&&!Oe.isDependent&&(Z=i.split(" | "),!Oe.siblingGame.load(1===Z.length?i:Z[1],s,_,T)))return reset(),!1;for(j=0;j<D;++j)if(+(Y=M[j])!=+Y)if("/"===Y){if(ie>111){for(++j;j<D;++j)Y=M[j],Oe._hand[Y<"a"?1:2]+=1<<ye[Y]>>>0;break}ie+=8}else Me[ie]=se[Y],"~"===M[j+1]&&(++j,Me[ie]|=X),Me[ie]&V&&(Le[3&Me[ie]]=ie),++ie;else ie+=1*Y}else for(j=0;j<D;++j)+(Y=M[j])!=+Y?"/"===Y?ie+=8:(Me[ie]=se[Y],Me[ie]&V&&(Le[3&Me[ie]]=ie),++ie):ie+=1*Y;if(Re="b"===S[1]?2:1,"-"!==ne)if(Ze){for(ee={1:[0,0],2:[0,0]},j=ne.length-1;j>=0;--j)75===(R=ne.charCodeAt(j))?R=disambiguate960Rook(119,-1):81===R?R=disambiguate960Rook(112,1):107===R?R=disambiguate960Rook(7,-1):113===R&&(R=disambiguate960Rook(0,1)),Q=R<97?1:2,te=Se[String.fromCharCode(R)],(T||Me[te]===(U|Q))&&(R>=97?Le[Q]>=1&&Le[Q]<=6&&(Ne[Q]|=1<<te):Le[Q]>=113&&Le[Q]<=118&&(Ne[Q]|=1<<te-112),++ee[Q][1*(Le[Q]<te)]);(ee[1][0]>1||ee[1][1]>1)&&(Ne[1]=0),(ee[2][0]>1||ee[2][1]>1)&&(Ne[2]=0)}else{if(!T)for(j=ne.length-1;j>=0;--j)Q=ne.charCodeAt(j)<97?1:2,Me[Se[ne[j]]]===(U|Q)&&Le[Q]===(1===Q?116:4)||(ne=ne.substr(0,j)+ne.substr(j+1));for(j=ne.length-1;j>=0;--j)switch(ne[j]){case"K":Ne[1]|=ke.KSIDE_CASTLE;break;case"Q":Ne[1]|=ke.QSIDE_CASTLE;break;case"k":Ne[2]|=ke.KSIDE_CASTLE;break;case"q":Ne[2]|=ke.QSIDE_CASTLE}}return!T&&(2!==re.length||1===Re&&"6"!==re[1]||2===Re&&"3"!==re[1]||Me[re.charCodeAt(0)-97+16*(8-("3"===re[1]?4:5))]!==(4|swapColor(Re))||Me[O[re]])&&(re="-"),De="-"===re?$:O[re],je=1*S[4]||0,Be=1*S[5]||1,ze===C["3-check"]&&(S[6]&&"+3+3"!==S[6]&&(Z=S[6].match(/^\+([0-3])\+([0-3])$/)),Z=Z||[0,0,0],Ve[1]=1*Z[1],Ve[2]=1*Z[2]),_||($e=Be,updateSetup(generateFen())),!0}function generateFen(){return ze?function generateVariantFen(){var i,s,_,T=0,S="",P="";for(i=0;i<120;++i)136&i&&(T&&(S+=T),S+="/",T=0,i+=8),(_=Me[i])?(T&&(S+=T,T=0),S+=le[_&Y],Ge&&_&X&&(S+="~")):++T;if(T&&(S+=T),Ge&&(S+="/"+handToString(Oe._hand[1],!0)+handToString(Oe._hand[2])),Ze){for(s=Ne[2],i=0;s;)1&s&&(P=String.fromCharCode(i+97)+P),s>>=1,++i;for(s=Ne[1],i=0;s;)1&s&&(P=String.fromCharCode(i+65)+P),s>>=1,++i}else Ne[1]&ke.KSIDE_CASTLE&&(P+="K"),Ne[1]&ke.QSIDE_CASTLE&&(P+="Q"),Ne[2]&ke.KSIDE_CASTLE&&(P+="k"),Ne[2]&ke.QSIDE_CASTLE&&(P+="q");return S+=" "+(1===Re?"w":"b")+" "+(P||"-")+" "+(De===$?"-":algebraic(De))+" "+je+" "+Be,ze===C["3-check"]?S+=" +"+Ve[1]+"+"+Ve[2]:ze!==C.Bughouse||Oe.isDependent||(S+=" | "+Oe.siblingGame.fen()),S}():function generateStandardFen(){var i,s,_=0,T="",S="";for(i=0;i<120;++i)136&i&&(_&&(T+=_),T+="/",_=0,i+=8),(s=Me[i])?(_&&(T+=_,_=0),T+=le[s&Y]):++_;return _&&(T+=_),Ne[1]&ke.KSIDE_CASTLE&&(S+="K"),Ne[1]&ke.QSIDE_CASTLE&&(S+="Q"),Ne[2]&ke.KSIDE_CASTLE&&(S+="k"),Ne[2]&ke.QSIDE_CASTLE&&(S+="q"),T+" "+(1===Re?"w":"b")+" "+(S||"-")+" "+(De===$?"-":algebraic(De))+" "+je+" "+Be}()}function setHeader(i){var s,_,T;for(s=0;s<i.length;s+=2)_=i[s],T=i[s+1],_&&("Variant"===_&&(setVariant(T),T=ze?P[ze]:void 0),"Result"===_&&"*"!==T&&"1-0"!==T&&"0-1"!==T&&"1/2-1/2"!==T&&(T="*"),void 0!==T?qe[_]=String(T):Ce.indexOf(_)>-1?qe[_]="Date"===_?"????.??.??":"?":delete qe[_]);return qe}function updateSetup(i){Ue.length>0||He||(i!==ie?(qe.SetUp="1",qe.FEN=i,Ue.hash=null):(delete qe.SetUp,delete qe.FEN,Ue.hash=[1178310168,378666140]))}function get2(i){var s=Me[O[i]];return s?{type:le[s&Z|2],color:3&s,promoted:0!=(s&X)}:null}function calculateLegalMoveInfo(s,C){var P,O,M,R,D,j,U,V,Y,X,ee,te,ne,re=Re,ie=Me;if(i=[],_=0,T=0,S=0,ie[8]=ie[9]=ie[10]=ie[11]=ie[12]=ie[13]=ie[14]=ie[15]=ie[24]=ie[25]=ie[26]=ie[27]=ie[28]=ie[29]=ie[30]=ie[31]=ie[40]=ie[41]=ie[42]=ie[43]=ie[44]=ie[45]=ie[46]=ie[47]=ie[56]=ie[57]=ie[58]=ie[59]=ie[60]=ie[61]=ie[62]=ie[63]=ie[72]=ie[73]=ie[74]=ie[75]=ie[76]=ie[77]=ie[78]=ie[79]=ie[88]=ie[89]=ie[90]=ie[91]=ie[92]=ie[93]=ie[94]=ie[95]=ie[104]=ie[105]=ie[106]=ie[107]=ie[108]=ie[109]=ie[110]=ie[111]=ie[120]=ie[121]=ie[122]=ie[123]=ie[124]=ie[125]=ie[126]=ie[127]=0,C!==$){for(te=function chooseKingThreats(i,s){return Ze&&Ne[i]?fe:Ne[i]&ke.KSIDE_CASTLE&&!Me[s+1]&&!Me[s+2]?Ne[i]&ke.QSIDE_CASTLE&&!Me[s-1]&&!Me[s-2]&&!Me[s-3]?(S=ke.KQSIDE_CASTLE,me):(S=ke.KSIDE_CASTLE,he):Ne[i]&ke.QSIDE_CASTLE&&!Me[s-1]&&!Me[s-2]&&!Me[s-3]?(S=ke.QSIDE_CASTLE,pe):de}(re,C),P=0;P<120;++P)if(136&P&&(P+=8),R=Me[P])if(R&re)(!s||(0|R)&s)&&i.push(P);else if(0!=((ne=te[P-C+119])&R))if(4&R)for(Y=ae[R],O=1;O<3;++O)136&(U=P+Y[O])||(ie[U+8]|=1,U===C&&(++_,ie[P+8]|=2));else{V=(Y=ae[R&Z]).length,ee=R&Q;e:for(O=0;O<V;++O)if(X=Y[O],!(C>(U=P)&&X<0&&C-U>16||C<U&&X>0&&U-C>16))for(;0==(136&(U+=X));){if(ie[U+8]|=1,D=Me[U]){if(D&re)if(U===C){for(M=U-X;M!==P;M-=X)ie[M+8]|=2;ie[P+8]|=2,++_,ee&&0==(136&(U+=X))&&(ie[U+8]|=1)}else if(ee&&256&ne){for(j=U;(j+=X)!==C;)if(136&j||Me[j])continue e;ie[U+8]|=4+(Math.abs(X)<<3),++T}break}if(!ee)break}}_>1&&(i=[C])}else i=function getPieces(i,s){var _,T,S=[];for(_=0;_<120;++_)136&_&&(_+=8),(T=i[_])&&(T&s)===s&&S.push(_);return S}(Me,re|s)}function validateEnPassant(i,s){var T,S,C,P=s+16*(1===Re?1:-1);return(1!==_||0!=(2&Me[s+8])||0!=(2&Me[P+8]))&&(T=Me[i],Me[s]=T,Me[i]=0,S=Me[P],Me[P]=0,C=inCheck(),Me[i]=T,Me[s]=0,Me[P]=S,!C)}function addCastlingMoves(i){var s,_,T;if(Ze){if(Ne[i])for(_=(s=Le[i])%8,T=0;T<8;++T)Ne[i]&1<<T&&canCastle960(Me,s,T,i)&&(M[D++]=(T>_?ke.KSIDE_CASTLE:ke.QSIDE_CASTLE)+(s<<7)+(s+(T-_)<<ee),++T)}else S&ke.KSIDE_CASTLE&&(_=(s=Le[i])+2,0===Me[s+9]&&0===Me[s+10]&&(M[D++]=ke.KSIDE_CASTLE+(s<<7)+(_<<ee))),S&ke.QSIDE_CASTLE&&(_=(s=Le[i])-2,0===Me[s+7]&&0===Me[s+6]&&(M[D++]=ke.QSIDE_CASTLE+(s<<7)+(_<<ee)))}function generateMoves(s,S){var C,P,O,$,U,V,Y,X,ne,re,ie=Re,se=swapColor(ie),oe=Le[ie];for(calculateLegalMoveInfo(s,oe),j=i.length,D=R,ne=0;ne<j;++ne)if(C=i[ne],$=Me[C],!(_&&T&&4&Me[C+8]))if(4&$)for(V=ae[$],0!==T&&0!=(4&Me[C+8])&&Me[C+8]>>3!=16||(U=C+V[0],0===Me[U]&&(addPawnMove(Me,C,U,0),Te[ie]===rank(C)&&(U+=V[0],Me[U]||addPawnMove(Me,C,U,ke.BIG_PAWN)))),P=1;P<3;++P)136&(U=C+(Y=V[P]))||T&&4&Me[C+8]&&Me[C+8]>>3!==Math.abs(Y)||(Me[U]&se?addPawnMove(Me,C,U,ke.CAPTURE):U===De&&validateEnPassant(C,U)&&(M[D++]=ke.EP_CAPTURE|C<<7|U<<ee));else{if(T&&4&Me[C+8]){if(8&$)continue;if(!(ue[C-Le[ie]+119]&$))continue;V=[Y=Me[C+8]>>3,-Y]}else V=ae[$&Z];if(re=C<<7,C===oe){for(P=0;P<8;++P)0==(136&(U=C+(Y=V[P])))&&(Me[U]?Me[U]&se&&0==(1&Me[U+8])&&(M[D++]=ke.CAPTURE|re|U<<ee):0==(1&Me[U+8])&&(M[D++]=re|U<<ee));0===_&&addCastlingMoves(ie)}else for(O=V.length,X=$&Q,P=0;P<O;++P)for(Y=V[P],U=C;!(136&(U+=Y));){if(Me[U]){Me[U]&se&&(0===_||2&Me[U+8])&&(M[D++]=ke.CAPTURE|re|U<<ee);break}if((0===_||2&Me[U+8])&&(M[D++]=re|U<<ee),!X)break}}return ze&&(Ge?function drop(i,s,T){var S,C,P,O,R;if(!i)for(s&&(s>>=26),O=0;O<5;++O)if((!s||(0|s)==1<<O)&&Oe._hand[T]&be[O]<<ve[O]){for(0===O?(S=16,C=103,P=ke.DROP):(S=0,C=119,P=ke.DROP|O<<te),R=S;R<=C;++R)136&R&&(R+=8),Me[R]||(0===_||1===_&&2&Me[R+8])&&(M[D++]=P|R<<ee);if(s)return}}(S,s,ie):!Ze&&isVariantWin()&&(D=R)),D}function inCheckAfterMove(i,s,_,T){var S,P,O,M,R,D,j,Z;if(ze===C["King of the Hill"]&&i&V&&kingOfTheHillWin(_))return!0;if(T&ke.KQSIDE_CASTLE&&(_=1===Re?T&ke.KSIDE_CASTLE?117:115:T&ke.KSIDE_CASTLE?5:3,i=U,Z=!0),(S=Le[swapColor(Re)])===$)return!1;if(0==(i&V)&&ue[_-S+119]&i)for(R=i&Q,M=_+(O=ge[_-S+119]);0==(136&M);){if(M===S){if(4&i){if(1==(3&i)?S-_<0:S-_>0)return!0;break}return!0}if(M!==s&&Me[M]||!R)break;M+=O}if(!Z){if((P=ue[s-S+119])&Q&&(O=ge[s-S+119])!==ge[_-S+119])for(M=S-O;0==(136&M);){if(M!==s&&(D=Me[M])){if(D&Re&&P&D&&D&Q)return!0;break}M-=O}if(T&ke.EP_CAPTURE&&(P=ue[(j=_+16*(1===Re?1:-1))-S+119])&Q)for(M=S-(O=ge[j-S+119]);0==(136&M);){if(M!==s&&M!==j){if(M===_)break;if(D=Me[M]){if(D&Re&&P&D&&D&Q)return!0;break}}M-=O}}return!1}function attacked(i,s){var _,T,S,C,P=ae[8],O=8|i;for(_=0;_<8;++_)if(0==(136&(S=s+P[_]))&&((T=Me[S])&O)===O)return!0;for(P=ae[128],_=0;_<8;++_)for(S=s+(C=P[_]);0==(136&S);){if(T=Me[S]){if(T&i&&ue[s-S+119]&T){if(!(4&T))return!0;if(1===i?s-S<0:s-S>0)return!0}break}S+=C}return!1}function kingAttacked(i){return Le[i]!==$&&attacked(swapColor(i),Le[i])}function inCheck(){return kingAttacked(Re)}function checkIsPotentiallyBlockable(){var i,s,_,T=1<<ve[4];return Oe._hand[Re]+=T,i=R,R=D,s=j,_=generateMoves()!==R,D=R,R=i,j=s,Oe._hand[Re]-=T,_}function inCheckmate(){return inCheck()&&(M[0]=0)===generateMoves()&&!M[0]&&(ze!==C.Bughouse||!checkIsPotentiallyBlockable())}function inStalemate(){var i=!inCheck()&&(M[0]=0)===generateMoves()&&!M[0];return i&&ze===C.Bughouse&&!Oe.isDependent&&(i=Oe.siblingGame.inStalemate()),i&&Le[Re]!==$}function insufficientMaterial(i){var s,_,T=0,S=0,C=0;for(_=0;_<120;++_)if(136&_&&(_+=8),s=Me[_]){if(i&&0==(s&i))continue;if(100&s)return!1;if(8&s){if(S||T++)return!1}else if(16&s){if(T)return!1;if(++S,(rank(_)+_)%2&&++C,C&&S!==C)return!1}}return!0}function inThreefoldRepetition(){if(je<8)return!1;for(var i,s=getCurrentHash(),_=!1,T=je,S=!1,C=Ue,P=C.length-1;;){if((P-=2)<0){if(C.id){P=C.atMoveNode+P+2,C=Fe[C.parentId];continue}if(-2===P)return!1;i=C.hash,S=!0}else i=C[P].hash,C[P].halfMoves>T||T<2?S=!0:T=C[P].halfMoves;if(i[0]===s[0]&&i[1]===s[1]){if(_)return!0;_=!0}if(S)return!1}}function modifyHand(i){var _,T,S,P,O,M,R,D,j,$=i.move;if(ze===C.Crazyhouse||$&ke.DROP?(T=Oe._hand,O=i.hash,j=i.color):(T=Oe.siblingGame._hand,i.handSibling=!0,Ie&&((M=Oe.siblingGame._history()).length?O=M[M.length-1].hash:(M.hash||(M.hash=Oe.siblingGame._hashPosition()),O=M.hash)),j=swapColor(i.color)),i.captured){switch((i.captured&X?4:i.captured&Z)&Z){case 4:R=0;break;case 8:R=1;break;case 16:R=2;break;case U:R=3;break;default:R=4}_=1<<ve[R],Ie&&(P=T[j]>>ve[R]&be[R],D=s.zobristPiece[P+63*R+(1===j?0:315)])}else _=-1<<ve[S=$>>te],Ie&&(P=T[j]>>ve[S]&be[S],D=s.zobristPiece[P-1+63*S+(1===j?0:315)]);T[j]+=_,i.handChange=_,Ie&&hashNum(O,[31*D[0]>>>0,17*D[1]>>>0])}function makeMoveChess(i,_,T,S){var C,P,O,M,R,D,j,Z,Q=Re,ee=swapColor(Q),te={move:i,epSquare:De,halfMoves:je,castlingW:Ne[1],castlingB:Ne[2],color:Q},ne=1===Q;Ie&&(M=getCurrentHash(),te.hash=M,hashNum(M,s.zobristTurn),De!==$&&hashEP(Me,M,De+(ne?16:-16),4|Q)),0==(i&ke.KQSIDE_CASTLE)?Ge&&i&ke.DROP?(Me[T]=_e[S]|Q,Ie&&hashNum(M,s.zobristPiece[64*s.zobristPieceValueNumbers[Me[T]]+8*(7-rank(T))+file(T)]),modifyHand(te),j=0):(j=Me[_],(Z=Me[T])&&(te.captured=Z,Ie&&hashNum(M,s.zobristPiece[64*s.zobristPieceValueNumbers[Me[T]&Y]+8*(7-rank(T))+file(T)]),Z&U&&Ne[ee]&&(Ze?rank(T)===(ne?0:7)&&(O=1<<file(T),Ne[ee]&O&&(Ne[ee]^=O,Ie&&(O>1<<file(Le[Q])?hashNum(M,s.zobristCastle[ee-1]):hashNum(M,s.zobristCastle[ee+1])))):T===(ne?7:119)?Ne[ee]&ke.KSIDE_CASTLE&&(Ne[ee]^=ke.KSIDE_CASTLE,Ie&&hashNum(M,s.zobristCastle[ee-1])):T===(ne?0:112)&&Ne[ee]&ke.QSIDE_CASTLE&&(Ne[ee]^=ke.QSIDE_CASTLE,Ie&&hashNum(M,s.zobristCastle[ee+1])))),Me[T]=i&ke.PROMOTION?_e[S]|Q|X:Me[_],Me[_]=0,Ie&&(hashNum(M,s.zobristPiece[64*s.zobristPieceValueNumbers[j&Y]+8*(7-rank(_))+file(_)]),hashNum(M,s.zobristPiece[64*s.zobristPieceValueNumbers[Me[T]&Y]+8*(7-rank(T))+file(T)]))):j=V,i&ke.EP_CAPTURE?(ne?(D=T+16,R=6):(D=T-16,R=8),te.captured=4|ee,Me[D]=0,Ie&&hashNum(M,s.zobristPiece[64*s.zobristPieceValueNumbers[4|ee]+8*(R-rank(T))+file(T)])):j&V?(Ze?(i&ke.KQSIDE_CASTLE&&(Me[T]=0,Me[_]=0,i&ke.KSIDE_CASTLE?ne?(C=118,P=117):(C=6,P=5):ne?(C=114,P=115):(C=2,P=3),Me[C]=Q|V,Me[P]=Q|U,Ie&&(hashNum(M,s.zobristPiece[64*s.zobristPieceValueNumbers[V|Q]+8*(7-rank(_))+file(_)]),hashNum(M,s.zobristPiece[64*s.zobristPieceValueNumbers[U|Q]+8*(7-rank(T))+file(T)]),hashNum(M,s.zobristPiece[64*s.zobristPieceValueNumbers[V|Q]+8*(7-rank(C))+file(C)]),hashNum(M,s.zobristPiece[64*s.zobristPieceValueNumbers[U|Q]+8*(7-rank(P))+file(P)]))),Ie&&(0!=(Ne[Q]&Ne[Q]-1)?(hashNum(M,s.zobristCastle[Q-1]),hashNum(M,s.zobristCastle[Q+1])):Ne[Q]>1<<file(Le[Q])?hashNum(M,s.zobristCastle[Q-1]):hashNum(M,s.zobristCastle[Q+1])),Le[Q]=C||T):(i&ke.KQSIDE_CASTLE&&(Me[T]=Me[_],Me[_]=0,i&ke.KSIDE_CASTLE?(C=T-1,P=T+1):(C=T+1,P=T-2),Me[C]=Me[P],Me[P]=0,Ie&&(hashNum(M,s.zobristPiece[64*s.zobristPieceValueNumbers[V|Q]+8*(7-rank(_))+file(_)]),hashNum(M,s.zobristPiece[64*s.zobristPieceValueNumbers[U|Q]+8*(7-rank(P))+file(P)]),hashNum(M,s.zobristPiece[64*s.zobristPieceValueNumbers[V|Q]+8*(7-rank(T))+file(T)]),hashNum(M,s.zobristPiece[64*s.zobristPieceValueNumbers[U|Q]+8*(7-rank(C))+file(C)]))),Ie&&(Ne[Q]&ke.KSIDE_CASTLE&&hashNum(M,s.zobristCastle[Q-1]),Ne[Q]&ke.QSIDE_CASTLE&&hashNum(M,s.zobristCastle[Q+1])),Le[Q]=T),Ne[Q]=0):j&U&&Ne[Q]&&(Ze?rank(_)===(ne?7:0)&&(O=1<<file(_),Ne[Q]&O&&(Ne[Q]^=O,Ie&&(O>1<<file(Le[Q])?hashNum(M,s.zobristCastle[Q-1]):hashNum(M,s.zobristCastle[Q+1])))):_===(ne?119:7)?Ne[Q]&ke.KSIDE_CASTLE&&(Ne[Q]^=ke.KSIDE_CASTLE,Ie&&hashNum(M,s.zobristCastle[Q-1])):_===(ne?112:0)&&Ne[Q]&ke.QSIDE_CASTLE&&(Ne[Q]^=ke.QSIDE_CASTLE,Ie&&hashNum(M,s.zobristCastle[Q+1]))),i&ke.BIG_PAWN?(De=ne?T+16:T-16,Ie&&hashEP(Me,M,T,4|ee)):De=$,4&j||i&ke.ANY_CAPTURE?je=0:je++,Re=ee,Ue.push(te)}function makeMoveVariant(i,_,T,S){var P,O=Re;makeMoveChess(i,_,T,S),P=Ue[Ue.length-1],Ge?(je=P.halfMoves+1,P.captured&&modifyHand(P),ze===C.Bughouse&&(P.bughouseOrder=Oe.moveCount()-1+Oe.siblingGame.moveCount())):ze===C["3-check"]&&kingAttacked(Re)&&(P.checked=!0,Ie&&Ve[O]&&hashNum(P.hash,s.zobristCheck[Ve[O]+(1===O?-1:2)]),++Ve[O],Ie&&hashNum(P.hash,s.zobristCheck[Ve[O]+(1===O?-1:2)]))}function reverseMove(i){var s,_,T=Re,S=swapColor(T),P=i.move,O=P>>ee&ne,M=P>>7&ne;if(Re=S,Ne[2]=i.castlingB,Ne[1]=i.castlingW,De=i.epSquare,je=i.halfMoves,ze){if(Ze&&P&ke.KQSIDE_CASTLE)return P&ke.KSIDE_CASTLE?1===S?(_=118,s=117):(_=6,s=5):1===S?(_=114,s=115):(_=2,s=3),Me[_]=0,Me[s]=0,Me[M]=S|V,Me[O]=S|U,void(Le[S]=M);if(i.handChange&&(ze!==C.Crazyhouse&&i.handSibling?Oe.siblingGame._hand[swapColor(S)]-=i.handChange:Oe._hand[S]-=i.handChange),P&ke.DROP)return void(Me[O]=0);i.checked&&--Ve[S]}P&ke.PROMOTION?(Me[M]=4|S,Me[O]=P&ke.CAPTURE?i.captured:0):(Me[M]=Me[O],P&ke.KQSIDE_CASTLE?(Me[O]=0,P&ke.KSIDE_CASTLE?(s=O+1,_=O-1):(s=O-2,_=O+1),Me[s]=S|U,Me[_]=0,Le[S]=M):(O===Le[S]&&(Le[S]=M),P&ke.CAPTURE?Me[O]=i.captured:(Me[O]=0,P&ke.EP_CAPTURE&&(Me[O-(1===S?-16:16)]=4|T))))}function beautifyMove(i,s,_){var T,S,C=i>>ee&ne,P={color:Re,to:algebraic(C),flags:i&ne};return Ge&&0!=(i&ke.DROP)?(S=i>>te,P.drop=S,P.piece=_e[S]+Re):(T=i>>7&ne,P.from=algebraic(T),P.piece=Me[T],i&ke.PROMOTION&&(S=i>>te,P.promotion=_e[S]+Re),i&ke.CAPTURE?P.captured=Me[C]:i&ke.EP_CAPTURE&&(P.captured=4|swapColor(Re))),P.san=s||moveToSan(i,_),P}function isVariantWin(){return ze===C["3-check"]?3===Ve[swapColor(Re)]:ze===C["King of the Hill"]?kingOfTheHillWin(Le[swapColor(Re)]):void 0}function isBughouseWin(){if(ze===C.Bughouse)return Oe.siblingGame.inCheckmate()}function createVariation(){var i=[],s=generateFen(),_=Ue.length-1,T=Ue[_];return!!T&&(i.parentId=He,i.id=Fe.length,Ue.curFen=s,T.lines||(T.lines=[]),T.lines.push(i.id),T.move?reverseMove(T):(De=T.epSquare,--je,Re=swapColor(Re)),2===Re&&--Be,i.atMoveNode=_,i.hash=_?Ue[_-1].hash:Ue.hash,He=i.id,Fe.push(i),Ue=i,!0)}function selectLine(i){var s=generateFen();Ue.curFen=s,Ue=Fe[i],He=i,load(Ue.curFen,ze,!0,!0)}return Oe={WHITE:1,BLACK:2,PAWN:4,KNIGHT:8,BISHOP:16,ROOK:U,QUEEN:64,KING:V,FLAGS:ke,load:load,reset:reset,moves:function(i){var s,_,T,S=[],C=moveToSan;for(i&&(i.verbose&&(C=beautifyMove),i.type&&(_=i.type|i.type<<24),T=i.noDrop),generateMoves(_,T),s=0;s<D;++s)S.push(C(M[s]));return S},inCheck:inCheck,inCheckmate:inCheckmate,inStalemate:inStalemate,isBughouseWin:isBughouseWin,in50MoveRule:function(){return je>=100},inDraw:function(){return je>=100||inStalemate()||insufficientMaterial()||inThreefoldRepetition()||Boolean(function isBughouseDraw(){if(ze===C.Bughouse)return Oe.siblingGame.in50MoveRule()||Oe.siblingGame.inThreefoldRepetition()}())},insufficientMaterial:insufficientMaterial,inThreefoldRepetition:inThreefoldRepetition,isVariantWin:isVariantWin,gameOver:function(){return Oe.inDraw()||inCheckmate()||Boolean(isVariantWin())||Boolean(isBughouseWin())},isPositionValid:function(i){var s,_,T,S=0;if(!1!==(i=i||{}).pawns)for(s=0;s<=119;){if(4&(T=Me[s]))return!1;8==++s&&(s=112)}if(!1!==i.kings){for(s=0;s<=119;++s)if(136&s&&(s+=8),(T=Me[s])&V){if(++S>2)return!1;if(_&&_&T)return!1;_=3&T}if(2!==S)return!1}return!1===i.check||!1===i.kings&&Le[swapColor(Re)]===$||!kingAttacked(swapColor(Re))},validateFen:validateFen,fen:generateFen,pgn:function(i){return(i=i||{}).useResultHeader||He||(isVariantWin()||inCheckmate()?qe.Result=2===Re?"1-0":"0-1":Oe.inStalemate()?qe.Result="1/2-1/2":isBughouseWin()&&(qe.Result=1===Oe.siblingGame.turn()?"1-0":"0-1")),Ee(i,qe,Fe,$e,ze,Oe)},loadPgn:function(i,s,_){var T,S,C,P,O,M,R,D,j,$={},U=0;if("number"!=typeof s&&(_=_||s,s=0),_=_||{},"string"==typeof i&&(_.singleGame&&(i=i.replace(/(?:\r?\n\s*){2,}/g,"\n")),i=Oe.tokenizePgn(i,_)),s<0&&(s=i.length+s),!(P=i[s]))return!1;for(reset(),S=P.length,T=0;T<S&&"tagName"===(C=P[T]).type;++T){if(!P[T+1]||"tagValue"!==P[T+1].type)return!1;++T,"FEN"===C.value?R=completeFen(P[T].value):$[C.value]=P[T].value}if(_.variant&&($.Variant=_.variant),$.Variant&&!R&&(R=ie),R||"1"===$.SetUp)if("0"===$.SetUp)$.FEN=R;else if(!R||!load(R,$.Variant))return!1;for(Oe.header($),M=(O=Oe)._history();T<S;++T)if("san"===(C=P[T]).type&&0===U){if(!O.move(C.value)&&("Z0"!==C.value&&"<>"!==C.value||_.rejectNullMoves||!O.move("--")))if(_.commentErrors)M.length?M[M.length-1].comment=((M[M.length-1].comment||"")+" "+C.value).trim():M.initComment=((M.initComment||"")+" "+C.value).trim();else{if(!_.skipBadLines||!(0!==He||Ue.length&&_.allowBadMainLine))return reset(),!1;U=1}}else if("result"===C.type&&"*"===qe.Result)setHeader(["Result",C.value]);else if("a"===C.type&&0===U&&M[M.length-1])M[M.length-1].annotation=C.value;else if("nag"!==C.type&&"aa"!==C.type||0!==U||!M[M.length-1])if("comment"===C.type&&0===U)M.length?(C.value&&(M[M.length-1].comment=C.value),C.commands&&(M[M.length-1].commands=C.commands,C.commands.clk&&(M[M.length-1].time=(D=C.commands.clk,j=void 0,10*(3600*(j=D.split(":"))[0]+60*j[1]+1*j[2]))))):(M.initComment=String(C.value),C.commands&&(M.commands=C.commands));else if("variationStart"===C.type){if(U>0)++U;else if(!createVariation())return reset(),!1;M=O._history()}else if("variationEnd"===C.type)U>0&&--U,0===U&&(selectLine(M.parentId),M=O._history());else if("number"===C.type){if(!(O=/b/i.test(C.value.slice(-1))?Oe.siblingGame:Oe))return!1;M=O._history()}else"cont"===C.type&&He&&!M.length&&O.move(O._lines()[M.parentId][M.atMoveNode].san);else M[M.length-1].additionalAnnotation||(M[M.length-1].additionalAnnotation=[]),-1===M[M.length-1].additionalAnnotation.indexOf(C.value)&&M[M.length-1].additionalAnnotation.push(C.value);return!0},header:function(i){return Array.isArray(i)?setHeader(i):"object"==typeof i?(Object.keys(i).forEach((function(s){setHeader([s,i[s]])})),qe):qe},turn:function(i){return 1!==i&&2!==i||(Re=i),Re},move:function playMove(i){var _,T,S,C,P,R,j,U,Y,Q,ie,ae,se;if("string"==typeof i){switch(i[C=i.length-1]){case"+":case"#":i=i.substr(0,C)}for(Y=re.indexOf(i[0])>6?oe[i[0]]:"O"===i[0]?V:4,Ge&&(-1===i.indexOf("@")?Q=!0:(Q=!1,Y<<=24)),generateMoves(Y,Q),C=0;C<D;++C)if(i===(R=moveToSan(M[C],!0))){T=M[C];break}if(!T){if("--"===i)return function makeNullMove(){var i,_={color:Re,san:"--",epSquare:De},T={color:Re,san:"--"};return Ie&&(i=getCurrentHash(),_.hash=i,hashNum(i,s.zobristTurn),De!==$&&hashEP(Me,i,De+(1===Re?16:-16),4|Re)),De=$,je++,1===(Re=swapColor(Re))&&++Be,Ue.push(_),T}();if(i=Oe.fixMove(i))try{return playMove(i)}catch(le){}return null}j=T>>7&ne,U=T>>ee&ne,S=T>>te}else{if(i.drop){switch(i.drop){case"p":S=0;break;case"n":S=1;break;case"b":S=2;break;case"r":S=3;break;case"q":S=4;break;default:return null}Y=1<<26+S}else{if(i.promotion)switch(i.promotion){case"q":S=4;break;case"n":S=1;break;case"r":S=3;break;case"b":S=2;break;default:return null}j=O[i.from],Q=!0,Y=Me[j]&Z}for(U=O[i.to],_=((S?S<<te:0)|U<<ee)>>7|j,generateMoves(Y,Q),C=0;C<D;++C)if(M[C]>>7===_){T=M[C];break}if(!T)return(i=Oe.fixMove(i))?playMove(i):null}return se=T&ke.DROP_OR_PROMOTE?_e[S]+Re:Me[j],P=beautifyMove(T,R,!0),ie=inCheckAfterMove(se,j,U,T),We(T,j,U,S),ie&&(ze&&isVariantWin()||0===generateMoves()?P.san+="#":P.san+="+"),(ae=Ue[Ue.length-1]).san=P.san,P.piece&X&&(ae.promoted=!0),1===Re&&++Be,P},undo:function(i){var s=Ue.pop();return s?(1===Re&&--Be,s.move?(reverseMove(s),!!i||beautifyMove(s.move,s.san)):(De=s.epSquare,--je,Re=swapColor(Re),!!i||{san:"--",color:s.color})):null},clear:function(i){clear(i)},put:function(i,s,_){var T,S=O[s],C=!1,P=Me[S],M=3&P,R=i.color;if(isNaN(S)||!i.type||!R||-1===re.indexOf(i.type))return!1;if(Me[S]=oe[i.type]|R|(i.promoted?X:0),Me[S]&V&&(Le[R]=S),P&&Me[Le[M]]&&Me[Le[M]]!==(V|M)){for(T=0;T<120;++T)136&T&&(T+=8),Me[T]===(V|M)&&(Le[M]=T,C=!0);C||(Le[M]=$)}return _||load(generateFen(),ze,!1,!1),!0},get:get2,remove:function(i,s){var _,T=Me[O[i]],S=get2(i),C=3&T;if(Me[O[i]]=0,T&V)for(Le[C]=$,Ne[C]=0,_=0;_<120;++_)if(136&_&&(_+=8),Me[_]===(V|C)){Le[T.color]=_;break}return s||load(generateFen(),ze,!0,!1),S},history:function(i,s){for(var _,T=[],S=Ue,C=S.length;;){if(-1==--C){if(S.id&&!s){C=S.atMoveNode,S=Fe[S.parentId];continue}break}i?((_=beautifyMove(S[C].move,S[C].san)).color=S[C].color,!C&&S.initComment&&(_.firstComment=S.initComment),void 0!==S[C].comment&&(_.comment=S[C].comment),void 0!==S[C].time&&(_.time=S[C].time),void 0!==S[C].annotation&&(_.annotation=S[C].annotation),void 0!==S[C].additionalAnnotation&&(_.additionalAnnotation=S[C].additionalAnnotation),void 0!==S[C].commands&&(_.commands=S[C].commands),void 0!==S[C].captured&&(_.captured=S[C].captured),void 0!==S[C].promoted&&(_.promoted=S[C].promoted),void 0!==S[C].lines&&(_.lines=S[C].lines),void 0!==S[C].bughouseOrder&&(_.bughouseOrder=S[C].bughouseOrder),re.indexOf(S[C].san[0])>6?_.piece=oe[S[C].san[0]]:"O"===S[C].san[0]?_.piece=V:_.piece=4,_.piece|=_.color,T.unshift(_)):T.unshift(S[C].san)}return T},hashes:function(){for(var i=[],s=Ue,_=s.length;;){if(-1==--_){if(s.id){_=s.atMoveNode,s=Fe[s.parentId];continue}s.hash||getCurrentHash(),i.unshift(s.hash);break}i.unshift(s[_].hash)}return i},moveCount:function(){return Ue.length},startingMoveNumber:function(){return $e},completeFen:completeFen,createVariation:createVariation,selectLine:selectLine,hash:function(){var i=getCurrentHash();return ze!==C.Bughouse||Oe.isDependent?i:[i,Oe.siblingGame.hash()]},hashing:function(i){Ie=i,ze!==C.Bughouse||Oe.isDependent||Oe.siblingGame.hashing(Ie)},hand:function(){if(Ge)return handToString(Oe._hand[1],!0)+handToString(Oe._hand[2])},checks:function(){if(ze===C["3-check"])return[Ve[1],Ve[2]]},threats:function(){var i,s,S,C,P,O,j,U=Re,V=swapColor(U),Y=[],X=[],Q=[],re=[],ie=[],ae=De;if(calculateLegalMoveInfo(0,Le[U]),_||T)for(i=0;i<120;++i)136&i&&(i+=8),2&Me[i+8]&&Me[i]?Q.push(algebraic(i)):4&Me[i+8]&&Y.push(algebraic(i));for(Re=V,De=$,generateMoves(),i=D;i--;){if(P=(s=M[i])>>ee&ne,O=s>>7&ne,s&ke.DROP_OR_PROMOTE){if(C=_e[j=s>>te]|V,s&ke.PROMOTION&&j%3!=1)continue}else C=Me[O],j=0;if(inCheckAfterMove(C,O,P,s)&&(We(s,O,P,j),R=i,(ze&&isVariantWin()||generateMoves()===i)&&X.push((s&ke.DROP?le[C].toLowerCase()+"@":algebraic(O))+algebraic(P)),reverseMove(Ue.pop()),s&ke.CAPTURE)){for(S=0,i=D;i>R;)if((M[--i]>>ee&ne)===P){S=1,i=R;break}if(!S){re.push(algebraic(O)+algebraic(P));continue}}s&ke.CAPTURE&&1!==j&&(S=124&Me[P])&&(attacked(U,P)?S>(C=Me[O]&Z)&&S-C!=8&&ie.push(algebraic(O)+algebraic(P)):re.push(algebraic(O)+algebraic(P)))}return R=0,Re=U,De=ae,{pins:Y,checkers:Q,mates:X,undefended:re,underdefended:ie}},tokenizePgn:Pe,fixMove:function(i){var s,_,T;if("string"==typeof i){if(/0|[?!+#]$|[18][QNRB]$|^P/i.test(i))return i.replace(/[?!+#]+$/,"").replace(/0/g,"O").replace(/([18])([QNRB])$/i,"$1=$2").replace(/^P+/i,"");if(_=i.indexOf("=")>0?-4:-2,"number"==typeof(s=O[i.substr(_,2)])){if(Me[s]&swapColor(Re)||/^[a-h]x?[a-h][36]$/.test(i)){if(-1===i.indexOf("x"))return i.slice(0,_)+"x"+i.substr(_)}else if(i.indexOf("x")>-1)return i.replace(/x/g,"");if(T=i.match(/^([KQNRB]?)([a-h][1-8]?|[1-8])x?([a-h][1-8])=?(.?)$/)){if(Me[O[T[2]]])return{from:T[2],to:T[3],promotion:T[4].toLowerCase()};if(/^\d$/.test(T[2])){for(i=0,generateMoves(oe[T[1]],!0),_=0;_<D;++_)if(M[_]>>ee===s&&rank(M[_]>>7&ne)===8-T[2]){if(i)return;i=M[_]}if(i)return moveToSan(i,!0)}return T[1]+T[3]+T[4]}}}else if(Me[O[i.from]]===(V|Re)&&i.to&&i.from[1]===i.to[1]){if(i.from<i.to)return"O-O";if(i.from>i.to)return"O-O-O"}},_hand:[],_history:function(i){return i&&(He=(Ue=i).id),Ue},_lines:function(){return Fe},_hashPosition:hashPosition,_board:function(){return Me}},xe&&load(xe,Ae)||reset(),Oe}return Chess2.variants=P,Chess2}(),T=function(i){var _=["bench","d","eval","flip","isready","ponderhit","stop","uci","ucinewgame"],T=[{cmd:"position",args:["fen","startpos","moves","continuation"]},{cmd:"go",args:["binc","btime","confidence","depth","infinite","mate","mindepth","mintime","maxdepth","maxtime","movestogo","movetime","ponder","searchmoves","shallow","winc","wtime"]}],S=["moves","searchmoves"],C=["ponder","infinite","startpos"],P={depth:1,seldepth:1,time:1,nodes:1,multipv:1,cp:1,mate:1,currmovenumber:1,hashfull:1,nps:1,tbhits:1,sbhits:1,cpuload:1,bmc:1,score:2,lowerbound:2,upperbound:2,bestmove:3,ponder:3,baseTurn:3,bestmoveSan:3,ponderSan:3,pv:4,pvSan:4,string:4,refutation:4,currline:4},O=/(?:Total|Final) Evaluation[\s\S]+\n$/i;function createWebWorker(i,s,_){var T=new Worker(i||"stockfish.js"),S={terminate:function terminate(){T.terminate()},postMessage:function postMessage(i){T.postMessage(i)}};function requeue(i){var s=i.concat();i.length=0,s.forEach((function(i){i.cmd?"go"!==i.cmd.substr(0,2)&&_.send(i.cmd,i.cb,i.stream):(clearTimeout(i.timer),_.getBestMove(i.args,i.cb,i.stream))}))}return T.onmessage=function(i){"string"==typeof i.data&&S.onmessage(i.data)},T.onerror=function(C){if(_.fallbackPath&&_.fallbackPath!==i){try{C.preventDefault()}catch(P){}try{T.terminate()}catch(P){}return(T=createWebWorker(_.fallbackPath,s,_)).onmessage=function(i){S.onmessage(i)},requeue(_._activeCommands()),requeue(_._bestMoveQueue()),!1}if(s.onError)return s.onError(C)},S}function createWorker(s,_){var T;return function getSupportedEngines(s,_){_.fallbackPath=s.pathToNonWasmEngine,_.path=s.enginePath||s.pathToEngineWorker,_.wasmPath=s.pathToWasmEngine,s.engines&&(s.engines.multiThreaded&&i.supportsMultithreading()?(_.path=s.engines.multiThreaded.loader,_.wasmPath=s.engines.multiThreaded.engine):s.engines.singleThreaded&&(_.path=s.engines.singleThreaded.loader,_.wasmPath=s.engines.singleThreaded.engine),_.fallbackPath=s.engines.asm||_.fallbackPath)}(s,_),T=_.path,(_.fallbackPath&&"undefined"==typeof WebAssembly||!T)&&(T=_.fallbackPath),_.wasmPath&&(T+="#"+_.wasmPath),createWebWorker(T,s,_)}function parseSearchLine(i){for(var s,_,T=i.split(" "),S=T.length,C="info"===T[0]?1:0,O={mtype:T[0]};C<S;++C)if(_=T[C])if(1===(s=P[_])){for(;!T[++C]&&C<S;);O[_]=Number(T[C])}else if(2===s)O[_]=!0;else if(3===s){for(;!T[++C]&&C<S;);O[_]=T[C]}else for(O[_]=[],++C;C<S;++C){if(P[T[C]]){--C;break}T[C]&&O[_].push(T[C])}return"(none)"!==O.bestmove&&"0000"!==O.bestmove||(O.bestmove=void 0,O.bestmoveSan=void 0),"(none)"!==O.ponder&&"0000"!==O.ponder||(O.ponder=void 0,O.ponderSan=void 0),O}function getFirstWord(i){var s=i.indexOf(" ");return-1===s?i:i.substr(0,s)}return function loadEngine(P,M){var R,D,j,$={},U=[],V=[],Z=null;function bestMoveSearch(){var s,_,T,S,C,P=1,O=[],M=[],R=null,j=V[0].args,U=V[0].cb,Z=V[0].stream,Y=1,X=[],Q=loadEngine._previousCP;function convertpv(i){var s=[],_=M[i]||createSanPv(O[i]);return O[i].forEach((function oneach(i,T){s.push({moveSan:_[T],moveLan:i})})),s}function getpv(i,s,_,T){var S;for(S=O.length-1;S>=0;S-=1)if(O[S][0]===i)return convertpv(S);return _?[{moveSan:s,moveLan:i},{moveSan:T,moveLan:_}]:s?[{moveSan:s,moveLan:i}]:[]}function convertScore(i){0===i.mate?(i.mateIn=0,i.cp=-31800*Y):(i.mateIn=Number(i.mate*Y)||null,"number"!=typeof i.mateIn||isNaN(i.mateIn)||"number"==typeof i.cp?(i.cp*=Y,9===Math.abs(i.cp)&&(i.cp=0),j.normalize&&i.depth<=14&&"number"==typeof Q&&1===i.multipv&&function normalize(i){var s=.03*Math.pow(32,i.depth/14);i.cp=Q+(i.cp-Q)*s}(i)):i.cp=31800*Y*(i.mate/Math.abs(i.mate))),i.score=i.cp/100}function addBestMoveProps(C){var O;C.baseTurn=T,C.cp=s,C.score=s/100,C.mate=_,C.mateIn=R,C.depth=P,C.moveLan=C.bestmove,C.moveLan&&(C.move=i.uciToObj(C.moveLan)[0],(O=S.move(C.move))&&(C.moveSan=C.bestmoveSan=O.san,C.ponder&&(O=S.move(i.uciToObj(C.ponder)[0]))&&(C.ponderSan=O.san,S.undo(!0)),S.undo(!0)))}function createSanPv(s){var _,T,C=s.length,P=[];for(_=0;_<C&&(T=S.move(i.uciToObj(s[_])[0]));++_)P.push(T.san);for(;_>0;--_)S.undo(!0);return P}function createTimeout(){j.timeout&&(clearTimeout(D),V[0].timer=D=setTimeout((function(){$.stop(),U&&(U(),U=void 0)}),j.timeout))}V[0].started=!0,loadEngine._previousCP=null,j.difficulty>=0&&j.difficulty<20?($.setoption("Skill Level",j.difficulty),j.maximumError>=0&&j.maximumError<=4999&&$.setoption("Skill Level Maximum Error",j.maximumError),j.errorProbability>=1&&j.errorProbability<=128&&$.setoption("Skill Level Probability",j.errorProbability)):$.setoption("Skill Level",20),void 0!==j.contempt?$.setoption("Contempt",j.contempt):$.setoption("Contempt","0"),j.multiPv>1?$.setoption("MultiPV",j.multiPv):$.setoption("MultiPV",1),j.movetime||j.wtime&&j.btime||j.depth||(j.btime=j.btime||72e3,j.wtime=j.wtime||72e3),!j.startpos&&j.fen||j.moves||j.variant?(S=i.createGame({fen:j.fen?(C=j.fen,(C+"").replace(/\[([qrbnp]*)\]/i,"/$1").replace(/([0-3])\+([0-3]) (\d+ \d+)/,(function(i,s,_,T){return T+" +"+(3-s)+"+"+(3-_)}))):"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",moves:j.moves,variant:j.variant,disableHashing:!0})).turn()===S.WHITE?T="w":(T="b",Y=-1):(T="w",S=i.createGame({disableHashing:!0})),$.setVariant(j.variant),$.position(j),$.go(j,(function returnBestMove(i){var _=parseSearchLine(i);if(addBestMoveProps(_),P>14&&s<5e3&&s>-5e3&&(loadEngine._previousCP=s),_.pv=getpv(_.moveLan,_.moveSan),1===_.pv.length&&_.ponder&&(_.pv=getpv(_.moveLan,_.moveSan,_.ponder,_.ponderSan)),X.length>1)X.splice(X.indexOf(_.moveLan),1),j.searchmoves=X,j.getNextBest=0,queueBestMoveSearch(j,(function done(){U(_)}),(function streamer(i){Z&&(i.multipv=2,Z(i))}));else if(U)try{U(_)}catch(T){console.error(T)}V.shift(),clearTimeout(D),V.length>0&&bestMoveSearch()}),(function streamInfo(i){var S=parseSearchLine(i);S.score&&(S.baseTurn=T,convertScore(S),!S.multipv&&S.depth&&(S.multipv=1),1!==S.multipv&&0!==S.depth||(s=S.cp,_=S.mate,R=S.mateIn)),S.pv&&Z&&(S.pvSan=createSanPv(S.pv)),!S.pv||S.lowerbound||S.upperbound||(O.push(S.pv),Z&&M.push(S.pvSan)),S.depth>P?P=S.depth:"bestmove"===S.mtype&&addBestMoveProps(S),!Z||0===S.mateIn&&S.pv||Z(S),createTimeout()})),j.getNextBest&&U&&S.moves({verbose:!0}).forEach((function toLan(s){s=i.normalizeMoveObj(s),X.push(s.from+s.to+(s.promotion||""))})),createTimeout()}function queueBestMoveSearch(i,s,_){V.push({args:i,cb:s,stream:_}),1===V.length&&bestMoveSearch()}function cbIfReady(){$.ready&&($.bookLoaded||!$.pathToBook)&&M&&M($)}return $.send=function(s,_,T){var S;!function isPrintingCommand(i){return"ucinewgame"!==i&&"flip"!==i&&"stop"!==i&&"ponderhit"!==i&&0!==i.indexOf("position")&&0!==i.indexOf("setoption")&&0!==i.indexOf("variation")&&0!==i.indexOf("threat-variation")&&0!==i.indexOf("push")&&0!==i.indexOf("pop")&&0!==i.indexOf("serve")&&0!==i.indexOf("speech")}(s=String(s).trim())?S=!0:U[U.length]={cmd:s,cb:_,stream:T},R&&(i.log&&console.log("stdin: "+s),R.postMessage(s),S&&_&&setTimeout(_,0))},$._activeCommands=function(){return U},$._bestMoveQueue=function(){return V},$.quit=function(){if(R&&R.terminate){try{$.send("quit")}catch(i){}R.terminate(),R=null,$.ready=void 0}clearTimeout(D)},_.forEach((function oneach(i){$[i]=function makeSCmd(s,_){$.send(i,s,_)}})),T.forEach((function oneach(i){$[i.cmd]=function makeCCmd(s,_,T){var P=[i.cmd];j&&s.fen&&(s.fen=function convertStockfishVariantFen(i){return(i+"").replace(/^([^/]+)((?:\/[^/]+){7})\/([qrbnp]*)/i,"$1$2[$3]").replace(/( \d+ \d+) \+([0-3])\+([0-3])/,(function(i,s,_,T){return" "+(3-_)+"+"+(3-T)+s}))}(s.fen)),i.args.forEach((function oneach2(i){if(s[i]||0===s[i]){if(S.indexOf(i)>-1){if(!s[i]||!s[i].length)return;Array.isArray(s[i])&&(s[i]=s[i].join(" "))}P.push(i),-1===C.indexOf(i)&&P.push(s[i])}})),$.send(P.join(" "),_,T)}})),$.setoption=function(i,s){$.send("setoption name "+i+" value "+s)},$.setVariant=function(i){var s;i!==j&&(s=String(i).toLowerCase().replace(/ |-/g,""),i&&"chess"!==s?"chess960"===s?($.setoption("UCI_Variant","chess"),$.setoption("UCI_Chess960","true")):("threecheck"===s&&(s="3check"),$.setoption("UCI_Variant",s),$.setoption("UCI_Chess960","false")):(s=void 0,$.setoption("UCI_Variant","chess"),$.setoption("UCI_Chess960","false")),j=s)},$.loadBook=function(i,_){$.pathToBook=i,s.loadBook(i,(function onload(i,s){$.book=s,$.bookLoaded=!0,i&&(console.error("Error loading opening book."),console.error(i),$.pathToBook=null,$.bookLoaded=!1),_()}))},$.getBestMove=function(s,_,T){var S;if((s=s||{}).fen=s.fen||s.baseFen,s.is960&&(s.variant="Chess960"),$.bookLoaded&&s.useBook&&(S=function getBookMove(s){var _=i.createGame(s),T=$.book.pick({fen:_.fen(),type:void 0!==s.bookPick?s.bookPick:"random",chess960:"Chess960"===_.header().Variant}),S=T&&_.move(T);if(S)return{moveSan:S.san,moveLan:T,move:{from:S.from,to:S.to,promotion:S.promotion||null},baseTurn:1===_.turn()?"b":"w",pv:[{moveSan:S.san,moveLan:T}],depth:null,score:null,mateIn:null,isBookMove:!0}}(s),S))return setTimeout((function(){S.mtype="bestmove",_(S)}),0);queueBestMoveSearch(s,_,T)},$.stopAll=function(s){var _,T=U.length,S=0;function ondiscard(){0==(S-=1)&&s()}for(V=[],_=0;_<T;_+=1)i.log&&console.log("debug (stop_moves): "+_,getFirstWord(U[_].cmd)),"go"!==getFirstWord(U[_].cmd)||U[_].discard||($.stop(),U[_].discard=!0,s&&(S+=1,U[_].ondiscard=ondiscard));s&&!S&&$.isready(s)},$.restartEngine=function(i){return $.stopAll(),$.quit(),U=[],V=[],$.bookLoaded&&!P.book&&((P=JSON.parse(JSON.stringify(P))).book=$.book),loadEngine(P,i)},$.stopFast=function(i,s){var _;$.stopAll((function(){clearTimeout(_),i($)})),_=setTimeout((function(){$.restartEngine(i)}),s||5e3)},"undefined"!=typeof Worker&&(P.ceeMode&&(function addCeeInterface(s,_){var T,S,C=1e3,P=0;function createInterruptHook(i){function interruptHook(i){var s=interruptHook.callbacks;for(var _ in interruptHook.callbacks={},interruptHook.original&&interruptHook.original(i),s)s[_](i)}return interruptHook.callbacks={},interruptHook.original=i,interruptHook}function analyze(_,O,M,R){var D,j=Date.now(),$=!1,U=++P;function cleanup(){clearTimeout(D),delete T.callbacks[U],delete S.callbacks[U],$=!0}function handleError(i){$||(cleanup(),R({data:i,action:O,uci:_},_))}function onProcessCrash(s){handleError({msg:"CEE process crashed unexpectedly",code:i.ERROR_CODES.CRASH,exitCode:s,err:new Error("CEE process exited with "+s)})}T.callbacks[U]=onProcessCrash,S.callbacks[U]=onProcessCrash,D=setTimeout((function(){handleError({msg:"CEE timed out",code:i.ERROR_CODES.TIMEOUT,timeout:C,duration:Date.now()-j,err:new Error("CEE timed out")})}),C);for(var V=0;V<_.length;++V)s.send(_[V]);s.send("fetch "+O,(function onFetchDone(i){$||(cleanup(),M(i,_))}),(function onFetchStream(_){_.indexOf("info string CEEError")>=0?handleError({msg:"CEE crashed with error code",code:i.ERROR_CODES.ERROR,log:_.match(/info string CEEError\s*(.*)/)[1],err:new Error(_.match(/info string CEEError\s*(.*)/)[1])}):s.ceeDebug&&_.indexOf("not recognized")>=0&&handleError({msg:"CEE received unknown UCI option (engine.ceeDebug mode on)",option:_,code:i.ERROR_CODES.NONFATAL_ERROR,err:new Error(_)})}))}_.onError=T=createInterruptHook(_.onError),_.onSignal=S=createInterruptHook(_.onSignal),s.fetch=function(s,_,T){var S,C;S=(s=s||[]).action||"analysis",Array.isArray(s)?C=s:(C=s.uciCommands?s.uciCommands.map((function(i){return i})):[],s.startFen&&(s.options=s.options||{},void 0===s.options.ScoreWhiteToMove&&(s.options.ScoreWhiteToMove=!0),void 0===s.options.SerializeLikeCEAC&&(s.options.SerializeLikeCEAC=!0),i.CEE_LIB.addOptions(C,s.options),i.CEE_LIB.addVariant(C,s.variant),i.CEE_LIB.addPosition(C,s.startFen)),i.CEE_LIB.addVariations(C,s.evals&&s.evals[0]),i.CEE_LIB.addVariations(C,s.threats&&s.threats[0],"threat-variation"),(s.moves||[]).forEach((function(_,T){var S=T+1;i.CEE_LIB.addPush(C,_),i.CEE_LIB.addVariations(C,s.evals&&s.evals[S]),i.CEE_LIB.addVariations(C,s.threats&&s.threats[S],"threat-variation")}))),analyze(C,S,_,T)},s.fetch.setTimeout=function(i){C=i},i.ERROR_CODES={TIMEOUT:1,CRASH:2,ERROR:3,NONFATAL_ERROR:4}}($,P),$.ceeVersion=function(){return JSON.parse(JSON.stringify(Z))}),(R=createWorker(P,$)).onmessage=function onmessage(s){var _,T,S,C,M;if(s.indexOf("\n")>-1)for(C=s.split("\n"),M=0;M<C.length;M+=1)onmessage(C[M]);else if(i.log&&console.log("debug (onmessage): "+s),$.stream&&$.stream(s),U.length&&0!==s.indexOf("No such option")&&0!==s.indexOf("Stockfish")&&0!==s.indexOf("Komodo")&&0!==s.indexOf("Explanation Engine")&&0!==s.indexOf("info string variant")){if(T=function determineQueueNum(i,s){var _,T,S,C,P=getFirstWord(i);for(_="uciok"===P||"option"===P?"uci":"readyok"===P||"ready"===P?"isready":"json"===P||i.indexOf("info string CEEError")>=0?"fetch":"bestmove"===P||"info"===P?"go":"other",C=s.length,S=0;S<C;S+=1)if((T=getFirstWord(s[S].cmd))===_||"other"===_&&("d"===T||"eval"===T))return S;return 0}(s,U),(S=U[T]).stream&&!S.discard&&S.stream(s),void 0===S.message?S.message="":""!==S.message&&(S.message+="\n"),S.message+=s,0===s.indexOf("uciok"))$.name=function parseEngineName(i){var s=i.match(/id name ((\S+) ([\d.a-z]+).*)/i);if(s)return{all:s[1].trim(),short:s[2],version:s[3],full:s[2]+" "+s[3],wasm:/ wasm/i.test(i),multithreaded:/ multithreaded/i.test(i)}}(S.message),_=!0;else if(0===s.indexOf("ready"))_=!0;else if(0!==s.indexOf("bestmove")&&"bestmove"!==getFirstWord(s)||"bench"===S.cmd)if("d"===S.cmd)0!==s.indexOf("Legal uci moves")&&0!==s.indexOf("Key is")||(S.done=!0,_=!0);else if(0===S.cmd.indexOf("fetch"))try{var R=S.message.split("\n").filter((function(i){return i.includes("json")})).join("\n");R&&(S.message=JSON.parse(R.replace(/^json /gm,"").replace(/\n/g,"")),_=!0)}catch(j){}else"eval"===S.cmd?O.test(S.message)&&(_=!0):(0===s.indexOf("pawn key")||0===s.indexOf("Nodes/second")||0===s.indexOf("Unknown command"))&&(_=!0);else _=!0,S.message=s;_&&(U.splice(T,1),S.cb&&!S.discard?S.cb(S.message):S.ondiscard&&S.ondiscard())}else if(P.ceeMode&&0===s.indexOf("Explanation Engine")){var D=s.match(/Explanation Engine\s*([0-9]+)\.([0-9]+)/);Z={date:D[1],increment:D[2]}}},P.book&&($.book=P.book,$.bookLoaded=!0,$.pathToBook=P.pathToBook),$.getFenFromMoves=i.getFenFromMoves,$.getLegalMoves=i.getLegalMoves,$.getPositionInfo=i.getPositionInfo,$.isFenValid=i.isFenValid,$.ready=!1,function startUp(){$.uci((function onstart(){P.settings&&Object.keys(P.settings).forEach((function oneach(i){$.setoption(i,P.settings[i])})),$.ready=!0,cbIfReady()}))}(),!$.book&&P.pathToBook&&$.loadBook(P.pathToBook,cbIfReady),$)}},S=function(){var i,S=_(),C="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",P=252,O={4:"p",5:"P",6:"p",8:"n",9:"N",10:"n",16:"b",17:"B",18:"b",32:"r",33:"R",34:"r",64:"q",65:"Q",66:"q",128:"k",129:"K",130:"k"},M=512,R="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!?{~}(^)[_]@#$,./&-*++=",D="qnrbkp";function decodeTCN(i){var s,_,T,S,C=i.length,P=[];for(s=0;s<C;s+=2)S={},_=R.indexOf(i[s]),(T=R.indexOf(i[s+1]))>63&&(S.promotion=D[Math.floor((T-64)/3)],T=_+(_<16?-8:8)+(T-1)%3-1),_>75?S.drop=D[_-79]:S.from=R[_%8]+(Math.floor(_/8)+1),S.to=R[T%8]+(Math.floor(T/8)+1),P.push(S);return P}function uciToObj(i){var s,_,T=i.split(" "),S=T.length,C=[];if(i)for(s=0;s<S;++s)4===(_=T[s]).length?"@"===_[1]?C.push({drop:_[0].toLowerCase(),to:_.substr(2,2)}):C.push({from:_.substr(0,2),to:_.substr(2,2)}):C.push({from:_.substr(0,2),to:_.substr(2,2),promotion:_[4]});return C}function isSameMove(i,s){return!(i.san!==s.san&&(i.to!==s.to||i.from!==s.from&&(i.from||s.from)||i.promotion!==s.promotion&&(i.promotion||s.promotion)||i.drop!==s.drop&&(i.drop||s.drop)))}function getPremoves(i,s,T){var S,C,P,O,M,R,D,j,$,U,V=[],Z=1,Y=8,X=1,Q=8,ee={verbose:!0};for($=3-(U=i.turn()),(O=_("/",s)).turn($),T&&(Z=Y=+T[1],X=Q=T.charCodeAt(0)-96),S=Z;S<=Y;++S)for(C=X;C<=Q;++C)M=String.fromCharCode(C+96)+S,(P=i.get(M))&&P.color===$&&(O.put(P,M,!0),"p"===P.type?(R=String.fromCharCode(C-1+96)+(S+(1===$?1:-1)),D=String.fromCharCode(C+1+96)+(S+(1===$?1:-1)),O.put({type:"n",color:U},R,!0),O.put({type:"n",color:U},D,!0)):"k"===P.type&&"-"!==(j=i.fen().split(" ")[2])&&O.load(O.fen().replace(/^(\S+\s\S\s)(\S+)/,"$1"+j),s,!0,!0),V=V.concat(O.moves(ee)),O.remove(M,!0),"p"===P.type&&(O.remove(R,!0),O.remove(D,!0)));return s&&i.hand()&&(O._hand[$]=18721,V=V.concat(O.moves({verbose:!0}).filter((function(i){return!T||i.to===T})))),V.forEach((function(i){normalizeMoveObj(i)})),V}function makePremove(i,s){var _,T,C,P,O,M=i.header().Variant,R=getPremoves(i,M,s.from),D=3-i.turn();for(_=R.length-1;_>=0;--_)if(isSameMove(T=R[_],s)){C=!0;break}return C?(T.drop?i.put({type:T.drop,color:D},T.to):(P=i.remove(T.from,!0),T.flags===S.FLAGS.KSIDE_CASTLE?(O=i.remove("Chess960"===M?T.to:"h"+T.from[1],!0),i.put(P,"g"+T.from[1],!0),i.put(O,"f"+T.from[1])):T.flags===S.FLAGS.QSIDE_CASTLE?(O=i.remove("Chess960"===M?T.to:"a"+T.from[1],!0),i.put(P,"c"+T.from[1],!0),i.put(O,"d"+T.from[1])):(T.promotion&&(P.type=T.promotion,P.promoted=!0),O=i.get(T.to),i.put(P,T.to,"k"!==P.type&&"r"!==P.type&&(!O||O.color!==D||"r"!==O.type)))),T):s.from&&(i.turn(D),s=i.fixMove(s),i.turn(3-D),s)?makePremove(i,{san:s,from:s.from}):void 0}function getPieces(i,s){var _,T,S,C=s?{}:[],D=i._board();if(s)for(_=112;_>=0;++_)136&_&&(_-=24),(T=D[_])&&(C[S=R[7&_]+(8-(_>>4))]={type:O[T&P],color:3&T,promoted:0!=(T&M),square:S});else for(_=112;_>=0;++_)136&_&&(_-=24),(T=D[_])&&C.push({type:O[T&P],color:3&T,promoted:0!=(T&M),rank:8-(_>>4),file:1+(7&_)});return C}function makeMoves(i,s,_,T){var S,C,P,O,M,R,D,j,$,U;for(_=_||{},"string"==typeof s&&(s=s.trim().split(" ")),P=s.length,S=0;S<P;S+=1){if(M="b"===s[S].board||"B"===s[S].board?i.siblingGame:i,R="string"==typeof s[S].moveLan?uciToObj(s[S].moveLan)[0]:"string"==typeof s[S]?uciToObj(s[S])[0]:s[S].san?s[S].san:s[S],!M.move(R)){if(!_.autoPromote){if(_.skipBadLines)break;return!1}if(!0===_.autoPromote?R.promotion="q":R.promotion=_.autoPromote,!M.move(R)){if(_.skipBadLines)break;return!1}}if(j=(D=M._history())[D.length-1],T&&($=parseInt(T[S],10)),("number"!=typeof $||isNaN($))&&($=parseInt(s[S].time,10)),"number"!=typeof $||isNaN($)||(j.time=$,$=void 0),s[S].firstComment&&(D.initComment=s[S].firstComment),s[S].comment&&(j.comment=s[S].comment),s[S].annotation&&(j.annotation=s[S].annotation),s[S].additionalAnnotation&&(j.additionalAnnotation=s[S].additionalAnnotation),s[S].commands&&(j.commands=s[S].commands),s[S].lines)for(O=s[S].lines.length,C=0;C<O;++C){if(U=i._history().id,i.createVariation(),!makeMoves(i,s[S].lines[C],_)&&!_.skipBadLines)return!1;i.selectLine(U)}}return!0}function extendChess(i){var s,T,P,O,M=-1,R=0;function swapMoveAttributes(i,s){var _={moveTime:i.moveTime,firstComment:i.firstComment,comment:i.comment,annotation:i.annotation,additionalAnnotation:i.additionalAnnotation,commands:i.commands};Object.keys(_).forEach((function(T){i[T]=s[T],s[T]=_[T]}))}i.extended||(i.extended=!0,s={header:i.header,load:i.load,loadPgn:i.loadPgn,createVariation:i.createVariation,undo:i.undo,pgn:i.pgn},i._move=i.move,i.undo=function(){return i.siblingGame?i.deleteBughouseMove(i.curBughouseMove()):i.deletePosition(M,R)},i.getMove=function(_){return _&&("string"==typeof _||_.to&&(_.from||_.drop))&&i._move(_)&&normalizeMoveObj(s.undo())||null},i.premove={queue:O=[],move:function(s){var T;return!(T=makePremove(P=P||_(i.fen(),i.header().Variant),s))||R||M!==i._history().length-1?(O.length||(P=void 0),null):(O.push(T),T)},consume:function(){var s,T,S,C=O.shift();if(C){if(s=i.move(C)){if(P=void 0,T=O.length)for(P=_(i.fen(),i.header().Variant),S=0;S<T;++S)makePremove(P,O[S]);return s}i.premove.cancel()}},moves:function(s){return!R&&M===i._history().length-1&&getPremoves(P||i,i.header().Variant,s)},getPieces:function(s){return getPieces(P||i,s)},fen:function(){return(P||i).fen()},cancel:function(){O.length=0,P=void 0}},i.getPieces=function(s){return getPieces(i,s)},i.material=function(){var s,_,T,S=i.getPieces(),C={imbalance:0,white:{p:8,n:2,b:2,r:2,q:1,count:0},black:{p:8,n:2,b:2,r:2,q:1,count:0}},P={p:1,n:3,b:3,r:5,q:9,k:0};for(s=S.length-1;s>=0;--s)1===S[s].color?(_=C.white,T=C.black):(_=C.black,T=C.white),T[S[s].type]&&--T[S[s].type],_.count+=P[S[s].type];return C.imbalance=C.white.count-C.black.count,C},i.origHistory=i.history,i.history=function(s,_){var T,S,C,P=[],O=i._history(),M=O.length,R=i._lines();for("boolean"==typeof s&&(s={verbose:s}),s=s||{},_&&(s.noParentLines=_),s.toCurrent&&(M=i.ids().move+1);;){if(-1==--M){if(O.id&&!s.noParentLines){M=O.atMoveNode,O=R[O.parentId];continue}break}if(s.verbose){for(S in T={},O[M])if(O[M][S]&&"object"==typeof O[M][S])for(C in T[S]=O[M][S].constructor===Array?[]:{},O[M][S])T[S][C]=O[M][S][C];else T[S]=O[M][S];P.unshift(T)}else P.unshift(O[M].san)}return P},i._getPos=function(_,T){var S,P,O;return"number"!=typeof _&&(_=M),"number"!=typeof T&&(T=R),S=(P=i._lines())[T],_>=0?S[_]:S.id?S.atMoveNode?P[S.parentId][S.atMoveNode-1]:i._getPos(S.atMoveNode-1,S.parentId):(O={fen:s.header().FEN||C,hash:S.hash,initial:!0,ids:{move:-1,line:0}},i.siblingGame&&(O.bughouseOrder=-1),O)},i.move=function(s,_){var T,S,C,P,O=i._history();if(s&&("string"==typeof s||s.to&&(s.from||s.drop))){if(R===O.id&&M<O.length-1||_){if(i.moveForward(_,s))return!0;M<O.length-1&&(i.selectPosition(M+1),i.createVariation(),O=i._history())}i.siblingGame&&(C=i.isDependent?i.siblingGame.fen():i.fen()),(T=i._move(s))&&(normalizeMoveObj(T),R=O.id,S=O[M=O.length-1],P=i._getPos(M-1),i.siblingGame?(S.fen=i.isDependent?i.siblingGame.fen():i.fen(),S.beforeFen=C,S.siblingIds=i.siblingGame.ids()):(S.fen=i.fen(),S.beforeFen=P.fen),P.initial?(S.moveNumber=0,S.previous=null):(S.moveNumber=P.moveNumber+1,S.previous=P.ids),R&&0===M&&i._lines()[O.parentId][O.atMoveNode].move===S.move&&(S.isContinuation=!0),S.flags=T.flags,S.to=T.to,S.from=T.from,S.drop=T.drop,S.capturedStr=T.captured,S.promotion=T.promotion,S.piece=T.piece,T.promoted&&(S.promoted=!0),T.capturedPromotedPawn&&(S.capturedPromotedPawn=!0),S.ids={move:M,line:R})}return T},i.moveDetails=function(s){return(s=s||i._history()[M])&&(s.lines=s.lines||null,s.flags===S.FLAGS.KSIDE_CASTLE?(s.rookFrom="Chess960"===i.header().Variant?s.to:"h"+s.to[1],s.rookTo="f"+s.to[1],s.kingTo="g"+s.to[1]):s.flags===S.FLAGS.QSIDE_CASTLE?(s.rookFrom="Chess960"===i.header().Variant?s.to:"a"+s.to[1],s.rookTo="d"+s.to[1],s.kingTo="c"+s.to[1]):s.flags===S.FLAGS.EP_CAPTURE&&(s.epCapture=s.to[0]+s.from[1])),s},i.header=i.headers=function(_){var T=s.header(_);return i.siblingGame&&extendChess(i.siblingGame),T},i.load=function(_,T,S,C){var P=s.load(_,T,S,C);return i.siblingGame&&extendChess(i.siblingGame),P&&!S&&(M=-1,R=0),P},i.removeEmptyLines=function(){var s,_,T=i._lines();for(s=T.length-1;s>0;--s)T[s].length||(T[s]=void 0,_=!0);_&&i.reorderLines()},i.loadPgn=function(_,T,S){var C=s.loadPgn(_,T,S),P=i._history();return i.removeEmptyLines(),M=P.length-1,(R=P.id)&&i.selectLine(0),C},i.ids=function(){return{move:M,line:R}},i.selectLine=function(s){i.selectPosition(null,s)},i.curBughouseMove=function(){return Math.max(i._getPos().bughouseOrder,i.siblingGame._getPos().bughouseOrder)},i.deleteBughouseMove=function(s){var _,T,S,C=i.curBughouseMove(),P=!1,O=i;if(s>=0)for(C>=s&&i.selectBughouseMove(s-1);;){for(T=(_=O._history()).length,S=0;S<T;++S)if(_[S].bughouseOrder>=s){_.length=S,P=!0;break}if(O===i.siblingGame)break;O=i.siblingGame}return P},i.selectBughouseMove=function(s){var _,T,S=i.isDependent?i.siblingGame:i,C=S;if(-1===s)return C.selectPosition(-1,0,!0),C.siblingGame.selectPosition(-1,0,!0),S.load(S.header().FEN,"Bughouse",!0,!0);for(;;){for(T=(_=C._history()).length-1;T>=0;--T)if(_[T].bughouseOrder===s)return C.selectPosition(_[T].ids.move,0,!0),C.siblingGame.selectPosition(_[T].siblingIds.move,0,!0),S.load(_[T].fen,"Bughouse",!0,!0);if(C===S.siblingGame)return!1;C=S.siblingGame}},i.moveBackward=function(s){var _;if(i.siblingGame)return i.selectBughouseMove(i.curBughouseMove()-1);if(M<=1)if(0===R){if(-1===M)return!1;i.selectPosition(M-1)}else(_=i._getPos(M-1,R)).isContinuation&&!s&&(_=i._getPos(_.ids.move-1,_.ids.line),_=i._getPos(_.ids.move+1,_.ids.line)),i.selectPosition(_.ids.move,_.ids.line);else i.selectPosition(M-1);return!0},i.moveForward=function(s,_){var T,S,C,P,O,D,j=i._lines();if(i.siblingGame)return i.selectBughouseMove(i.curBughouseMove()+1);if("string"==typeof _&&(_={san:_}),!(T=j[R][M+1])||_&&!isSameMove(_,T)){if(_&&T&&T.lines)for(O=T.lines.length,P=0;P<O;++P)if((C=j[T.lines[P]][0])&&isSameMove(_,C)){T=C,D=!0;break}if(!D&&s&&(S=j[R][M])&&S.lines)for(O=S.lines.length,P=0;P<O;++P)if((C=j[S.lines[P]][0])&&C.isContinuation&&(C=j[S.lines[P]][1])&&(!_||isSameMove(_,C))){T=C,D=!0;break}if(!D){try{if(_&&_.san&&(_=i.fixMove(_.san))||_&&_.to&&_.from&&Math.abs(_.to.charCodeAt(0)-_.from.charCodeAt(0))>1&&(_=i.fixMove(_)))return i.moveForward(s,_)}catch($){}return!1}}return i.selectPosition(T.ids.move,T.ids.line)},i.moveVariation=function(s,_){var T,S,C,P=i._lines(),O=P[s];if(O&&O.id)for(S=(T=P[O.parentId][O.atMoveNode].lines).length-1;S>=0;--S)if(T[S]===s&&T[C=S-(_?1:-1)])return T[S]=T[C],T[C]=s,i.reorderLines(),!0;return!1},i.promoteVariation=function(s,_){for(var T,S,C,P,O,D,j=i._lines(),$=j[s];$&&$[0]&&$.id&&(-1!==_||$.parentId);){for(T=j[C=$.parentId],P=$.atMoveNode,$[0].lines=T[P].lines.concat($[0].lines||[]),T[P].lines=void 0,D=T.length-P,S=T.splice(P,D),O=0;O<D;++O)S[O].ids.line=s,S[O].ids.move=O;for(S.id=s,S.parentId=C,S.atMoveNode=P,S.hash=$.hash,0===P?(S.initComment=T.initComment,T.initComment=$.initComment):$.initComment&&(T[P-1].comment=((T[P-1].comment||"")+" "+$.initComment).trim()),j[s]=S,D=$.length,O=0;O<D;++O)$[O].ids.line=C,$[O].ids.move=O+P,T.push($[O]);for(S[0].isContinuation=!!$[0].isContinuation,T[P].isContinuation=!P&&"number"==typeof T.parentId&&j[T.parentId][T.atMoveNode].move===T[0].move,D=T[P].lines.length,O=0;O<D;++O)j[T[P].lines[O]].atMoveNode=P,j[T[P].lines[O]][0]&&(j[T[P].lines[O]][0].isContinuation=j[T[P].lines[O]][0].move===T[P].move);if(R===s?(R=C,M+=P):R===C&&M>=P&&(R=s,M-=P),1===_)break;$=j[s=C]}return void 0!==T&&(i._history(j[R]),i.reorderLines(),!M&&j[R][0].isContinuation&&i.selectPosition(j[R].atMoveNode,j[R].parentId),!0)},i.reorderLines=function(s,_){var S,C,P,O,M,D,j,$,U,V,Z=i._lines(),Y=!1;for(s?U=_.length-1:(s=0,_=[Z[0]],U=0,T=!1),P=(S=Z[s]).length,C=0;C<P;++C)if((O=S[C]).ids.line!==U&&(Y=!0,O.ids.line=U),O.lines)for(M=O.lines.length,D=0;D<M;++D)($=Z[j=O.lines[D]])?($.atMoveNode=C,V=_.length,O.lines[D]=V,$.parentId=U,T||j!==R||(T=!0,R=V),_.push($),Y=i.reorderLines(j,_)||Y):(1===O.lines.length?delete O.lines:O.lines.splice(D,1),--D,--M);return s||i.saveLines(_,!0),Y},i.createVariation=function(){var _,T,S,C=i._history(),P=i._lines();return M===C.length-1?(_=s.createVariation(),C=i._history(),M=C.length-1,R=C.id,_):-1!==M&&(T=[],S=C[M],T.parentId=C.id,T.id=P.length,S.lines||(S.lines=[]),S.lines.push(T.id),T.hash=i._getPos(M-1).hash,T.atMoveNode=M,P.push(T),i.selectPosition(-1,T.id))},i.selectLineEnd=function(s){return i.siblingGame?i.selectBughouseMove(i._history().length+i.siblingGame._history().length-1):("number"!=typeof s&&(s=R),(s!==R||M<i._history().length-1)&&i.selectPosition(null,s,!0))},i.selectLineStart=function(){var s,_;return i.siblingGame?i.selectBughouseMove(-1):R?(M>1||1===M&&!i._getPos(0).isContinuation?s=i._history():(_=i._getPos(-1),s=i._lines()[_.ids.line]),i.selectPosition(s.id?s[1]&&s[0].isContinuation?1:0:-1,s.id)):-1!==M&&i.selectPosition(-1,0)},i.selectPosition=function(_,T,S){var C=i._lines(),P=i._history();if("number"==typeof T&&(T!==R||S)){if(T<0||T>=C.length)return!1;if(P=C[T],"number"!=typeof _)_=P.length-1;else if(_<-1||_>=P.length)return!1;R=T,i._history(P),S=!0}if("number"==typeof _&&(_!==M||S)){if(_<-1||_>=P.length)return!1;s.load(i._getPos(_).fen,s.header().Variant,!0,!0),M=_}return!0},i.resetToMainLine=function(){var s=i._lines();i.selectLineEnd(0),s.length>1&&(s.length=1,i.reorderLines())},i.updateNode=function(s,_,T){var S,C,P=i._lines();for(C in _="number"==typeof _?_:M,S=P[T="number"==typeof T?T:R][_]||P[T],s)S[C]=s[C]},i.updateLineComment=function(s,_){i.updateNode({initComment:s},-1,_)},i.saveLines=function(s,_){var T,S,C,P=i._lines(),O=s.length;for(s!==P&&(P.length=0),S=0;S<O;++S){if(T=s[S],S&&"number"!=typeof T.parentId)return!1;s!==P&&P.push(T),T.id=S}return i._history(i._history()),_||(C=i.ids(),i.selectPosition(-1,0,!0),i.selectPosition(C.move,C.line)),!0},i.deletePosition=function(s,_){var T,S,C=i._lines();return!(!C[_]||!(C[_][s]||-1===s&&0!==_))&&(_&&(0===s||1===s&&C[_][0].isContinuation)&&(s=-1),R>0&&_!==R?(T=function descendsFromMove(i,s,_){for(var T,S=i[s];"number"==typeof(T=S.parentId);){if(T===_)return S.atMoveNode;S=i[T]}return!1}(C,R,_),S=!1!==T&&T>=s):S=_===R&&s<=M,S&&(s>1?i.selectPosition(s-1,_):(i.selectPosition((C[_][0].isContinuation||1===s)&&C[_][1]?1:0,_),i.moveBackward())),s>0?C[_].length=s:_?C[_]=null:C[0].length=0,i.reorderLines(),i.ids())},i.mark=function(s,_){var T=M<0?i._lines()[R]:i._lines()[R][M],S=s.type,C=1;s.color&&("arrow"===S?i.mark({key:s.color+s.key,type:"cal"},_):"square"===S&&i.mark({key:s.color+s.key,type:"csl"},_)),"cal"!==S&&"csl"!==S&&(S="c_"+S,C=0),T.commands&&T.commands[S]&&(T.commands[S]=T.commands[S].split(",").filter((function rm(i){return i.slice(C).split(";")[0]!==s.key.slice(C)})).join(","),T.commands[S]||delete T.commands[S]),_||(T.commands||(T.commands={}),T.commands[S]=(T.commands[S]?T.commands[S]+",":"")+s.key+(s.data?";"+s.data.join(";"):""))},i.markings=function(){var s,_,T,S,C,P,O,D,j={},$=M<0?i._lines()[R]:i._lines()[R][M],U={cal:"arrow",csl:"square"};for(_ in $.commands){if(T=$.commands[_],U[_])_=U[_],S=0;else{if("c_"!==_.substr(0,2))continue;_=_.slice(2),S=1}for(j[_]=j[_]||{},P=(C=T.split(",")).length,s=0;s<P;++s)S?(D=(O=C[s].split(";")).shift(),j[_][D]=j[_][D]||{type:_,key:D},j[_][D].data=O):(D=C[s].slice(1),j[_][D]=j[_][D]||{type:_,key:D},j[_][D].color=C[s][0])}return j},i.clearMarkings=function(){var s,_=M<0?i._lines()[R]:i._lines()[R][M];for(s in _.commands)/^c[sa]l$|^c_/.test(s)&&delete _.commands[s]},i.pgn=function(_){var T,S=i.ids();return i.selectLineEnd(0),T=s.pgn(_),i.selectPosition(S.move,S.line),T},i.loadMoves=function(s,_){var T,S,C,P,O;if(_=_||{},"string"==typeof s&&(s=decodeTCN(s)),s){for(_.atCurrent||i.selectPosition(-1,0),C=R,S=s.length,T=0;T<S;++T){if(!((P=i.move(s[T],!0))||(s[T].promotion=!0===_.autoPromote?"q":_.autoPromote,P=i.move(s[T],!0))))return!1;R!==C&&"merge"!==_.method&&(i.promoteVariation(R,1),"promote"!==_.method&&(i._history()[M].lines=void 0,i.reorderLines()),C=R)}if("promote"===_.method){if(S){for(i._history()[M+1]&&(P=i._history()[M],i.createVariation(),i.move(P),swapMoveAttributes(i._history()[0],P),i.promoteVariation(R,1)),T=(O=i._lines()).length-1;T>=0;--T)1===O[T].length&&O[T][0].isContinuation&&(swapMoveAttributes(O[T][0],O[O[T].parentId][O[T].atMoveNode]),O[T].length=0);i.removeEmptyLines()}}else"merge"!==_.method&&i.deletePosition(M+1,R)}return!0})}function createGame(i){var s,T;if((i=i||{}).game)return i.game;if(s=_(),i.analysis&&extendChess(s),i.disableHashing&&s.hashing(!1),i.pgn){if(!(s.loadPgn(i.pgn,i.index,i.options)||"detect"===i.variant&&_.variants.some((function(_){return i.options=i.options||{},i.options.variant=_,s.loadPgn(i.pgn,i.index,i.options)}))))return!1}else{if(i.headers&&(i.variant=i.headers.Variant||i.variant,i.fen||(i.fen=i.headers.FEN)),"detect"===i.variant&&i.fen&&(i.fen.indexOf("|")>-1?i.variant="Bughouse":9===i.fen.split("/").length?i.variant="Crazyhouse":i.fen.indexOf("+")>-1?i.variant="3-check":i.variant=void 0),(i.fen||i.variant)&&!s.load(i.fen||C,i.variant))return!1;i.headers&&"object"==typeof i.headers&&!Array.isArray(i.headers)&&s.header(i.headers)}if(i.tcn)if("object"==typeof i.tcn){if(!function playBughouseTCN(i,s,_){var T,S,C,P=[decodeTCN(s[0]),decodeTCN(s[1])],O=[0,0],M=[0,0],R=P[0].length+P[1].length,D=Math.max(0|_[0][0],0|_[0][1],0|_[1][0],0|_[1][1]),j=[0,0],$=[0,0];for(T=[[D+=600-D%600,D],[D,D]];R--;){if($[0]=j[0]+T[0][M[0]]-_[0][O[0]]||0,$[1]=j[1]+T[1][M[1]]-_[1][O[1]]||0,P[S=$[0]<=$[1]?0:1][O[S]]||(S^=1),(!(C=S?i.siblingGame:i).move(P[S][O[S]])||R&&C.inCheckmate()&&C.undo(!0))&&!(C=(S^=1)?i.siblingGame:i).move(P[S][O[S]]))return!1;C._history()[O[S]].time=_[S][O[S]],T[S][M[S]]=_[S][O[S]],j[S]=$[S],M[S]^=1,++O[S]}return!0}(s,i.tcn,i.timestamps||[[],[]]))return!1}else T=decodeTCN(i.tcn);else T=i.moves;return!(T&&!makeMoves(s,T,i,i.timestamps))&&s}function normalizeMoveObj(i){return i&&(i.piece&M&&(i.promoted=!0),i.piece=O[i.piece&P],i.captured&&(i.captured&M&&(i.capturedPromotedPawn=!0),i.captured=O[255&i.captured]),i.promotion&&(i.promotion=O[i.promotion&P]),void 0!==i.drop&&(i.drop="pnbrq"[i.drop])),i}function normalizeHistory(i){var s,_,T,S,C,P,O,M=i.history(!0,!0);if(i.siblingGame){for(s=i.siblingGame.history(!0,!0),T=M.length+s.length,_=[],S=0;S<T;++S)!M.length||s.length&&s[0].bughouseOrder<M[0].bughouseOrder?(C=s.shift()).board="b":(C=M.shift()).board="a",_.push(C);M=_}for(T=M.length,S=0;S<T;++S)if((P=M[S]).fen||normalizeMoveObj(P),P.lines)for(O=P.lines.length-1;O>=0;--O)i.selectLine(P.lines[O]),P.lines[O]=normalizeHistory(i).moves;return{moves:M}}function getLegalMoves(i,s){var _,T,C,P;if("string"==typeof i){if((T=S).reset(),!T.load(i,s))return null}else T=createGame(i);for(P=(_=T.moves({verbose:!0})).length,C=0;C<P;++C)normalizeMoveObj(_[C]);return _}function jce(s,_){return(i=i||T(jce))(s,_)}return jce.supportsMultithreading=function(){var i,s=Boolean(jce._hasThreads);if("boolean"!=typeof jce._hasThreads){try{(i=new Worker("data:application/javascript,")).postMessage(new SharedArrayBuffer(1)),s=!0}catch(_){}try{i.terminate()}catch(_){}jce._hasThreads=s}return s},jce.gameFingerprints=function gameFingerprints(i){var _,T,S,P,O,M,R,D,j,$=createGame(i),U=[""],V=[];if(!$)return!1;for(j=(D=$.header()).Variant||"",M=$.hashes(),_="function"==typeof $.origHistory?$.origHistory(!0):$.history(!0),O=M.length,T=[M[0][0],M[0][1]],V.push(s.to64BitHex(T)+j),M[0]=s.to64BitHex(M[0]),S=1;S<O;++S)T[0]=(T[0]^M[S][0]*(S+58465))>>>0,T[1]=(T[1]^M[S][1]*(S+984))>>>0,M[S]=s.to64BitHex(M[S]),V.push(s.to64BitHex(T)+j),normalizeMoveObj(_[P=S-1]),R=(_[P].from?_[P].from:_[P].drop.toUpperCase()+"@")+_[P].to+(_[P].promotion||""),P&&(R=U[P]+" "+R),U.push(R);return{startingFen:D.FEN||C,hashes:M,fingerprints:V,moves:U,variant:D.Variant}},jce.getFenFromMoves=function getFenFromMoves(i,s,_){return S.reset(),S.load(i,_),!(s&&!makeMoves(S,s))&&S.fen()},jce.getLegalMoves=getLegalMoves,jce.getPositionInfo=function getPositionInfo(i,s,_){var T,C,P={gameOver:!1,check:!1,checkmate:!1,draw:!1,stalemate:!1,threefold:!1,insufficient:!1};if(Array.isArray(s)||(_=s,s=null),"boolean"==typeof _?(T=_,_={}):T=(_=_||{}).variant,"string"==typeof i){if((C=S).reset(),0!==C.validateFen(i,T)||!C.load(i,T))return!1}else C=createGame(i);return!(s&&!makeMoves(C,s))&&(_.getLegalMoves&&(P.legalMoves=getLegalMoves({game:C})),C.inCheck()?(P.check=!0,P.checkmate=C.inCheckmate()):P.stalemate=C.inStalemate(),P.threefold=C.inThreefoldRepetition(),P.insufficient=C.insufficientMaterial(_.color),P.fiftyMoveRule=C.in50MoveRule(),P.draw=P.stalemate||P.threefold||P.insufficient||P.fiftyMoveRule||C.inDraw(),_.skipValidation||(P.isValid=C.isPositionValid(_)),T&&(P.variantWin=C.isVariantWin(),void 0===P.variantWin&&(P.variantWin=C.isBughouseWin())),P.gameOver=P.checkmate||P.draw||Boolean(P.variantWin),P)},jce.isFenValid=function isFenValid(i,s){return 0===S.validateFen(i,s)},jce.encodeTCN=function encodeTCN(i){var s,_,T,S,C="";for(Array.isArray(i)||(i=[i]),_=i.length,s=0;s<_;s+=1)T=i[s].drop?79+D.indexOf(i[s].drop):R.indexOf(i[s].from[0])+8*(i[s].from[1]-1),S=R.indexOf(i[s].to[0])+8*(i[s].to[1]-1),i[s].promotion&&(S=3*D.indexOf(i[s].promotion)+64+(S<T?9+S-T:S-T-7)),C+=R[T]+R[S];return C},jce.decodeTCN=decodeTCN,jce.uciToObj=uciToObj,jce.generatePgn=function generatePgn(i){var s;return(i=i||{}).disableHashing=!0,!!(s=createGame(i))&&s.pgn(i)},jce.pgnToFen=function pgnToFen(i,s){var _,T,C=[];if(S.reset(),!S.loadPgn(i))return!1;if(_=S.moveCount(),"number"==typeof s){for(s<0&&(s=_+s+1),T=_-1;T>=s&&T>=0;T-=1)S.undo();return S.fen()}for(T=0;T<=_;T+=1)C.unshift(S.fen()),S.undo();return C},jce.pgnToJson=function pgnToJson(i,s,_){var T,C=[],P=S;return"number"!=typeof s&&(_=s,s=void 0),T=P.tokenizePgn(i,_),s<0&&(s=T.length+s),!!T&&(_&&_.includeFen&&(P=createGame({analysis:!0})),T.forEach((function(i,T){var S,O;T===s||void 0===s?P.loadPgn([i],0,_)?(O=normalizeHistory(P),S=P.header(),C.push({headers:S,moves:O.moves})):C.push(!1):C.push(void 0)})),"number"==typeof s?C[s]:C)},jce.sanToObj=function sanToObj(i,s,_){return S.reset(),!!S.load(s,_)&&normalizeMoveObj(S.move(i))},jce.completeFen=S.completeFen,jce.shortenFen=function shortenFen(i,s){return S.completeFen(i).split(" ").slice(0,s||4).join(" ")},jce.createGame=createGame,jce.getPositionDetails=function getPositionDetails(i,s){var _,T,S,C;if((i=i||{}).disableHashing=!0,!(_=createGame(i)))return null;if(s){if(!(S=_.move(s)))return null;_.extended||normalizeMoveObj(S)}return C=_.fen(),i.skipValidation||_.isPositionValid(i)?(T=C.split(" "),{fen:C,pieces:getPieces(_),sideToMove:_.turn(),castling:T[2],epSquare:"-"===T[3]?null:T[3],halfMoves:+T[4],moveNumber:+T[5],move:S,hand:_.hand(),checks:_.checks()}):null},jce.predict=function predict(i,s){var _=Math.min(Math.max(.20773843*Math.atan(2.49085889*i/100-2.47841945*s/100)+.02262979*i/100-.02256839*s/100+.52239679,0),1),T=Math.min(Math.max(-.20720905*Math.atan(2.49626837*i/100-2.48220286*s/100)+-.02352551*i/100+.02172627*s/100+.49443923,0),1),S=Math.min(Math.max(Math.exp(.037043456*i/100+.178106427*s/100-8.069742932)+.004823544*Math.exp(-1.364136591*Math.pow(i/100-s/100,2))+-.001625539,0),1),C=_+T+S;return{w:_/C,b:T/C,d:S/C}},jce.normalizeMoveObj=normalizeMoveObj,jce.FLAGS=S.FLAGS,jce.loadECO=function loadECO(i,_){s.loadBook(i,(function onload(i,T){if(!T||!T.json)return _(i||new Error("Invalid book"));_(i,(function queryECO(i){var _,S,C,P,O,M,R,D,j;if(i.hash)S="string"==typeof i.hash?[s.hex64ToDec(i.hash)]:[i.hash],P=1;else{if(!(_=createGame(i)))return!1;P=(S=_.hashes()).length}for(C=0;C<P;++C)if(O=T.json[s.to64BitHex(S[C])]){if(O.constructor===Array)if(M&&-1===O[0].m.indexOf(M.m)){for(D=O.length-1;D>=0;--D)if(!D||-1!==O[D].m.indexOf(M.m)){(j=O[D]).e=O[0].e,j.s=O[0].s,j.mate=O[0].mate,j.v=O[0].v,j.h=O[0].h,j.n=j.n||O[0].n,j.u=j.u||O[0].u,j.c=j.c||O[0].c;break}}else j=O[0];else j=O;(j.n||i.allowNameless)&&(M=j)}else i.mustEndInBook&&(M=void 0);if(M)return R={name:M.n},M.m&&(R.moves=M.m),void 0!==M.d&&(R.sdiff=M.d/100),M.c&&(R.code=M.c,R.url=M.u||M.n.replace(/[\u00e1-\u00e5]/g,"a").replace(/[\u0107\u010d]/g,"c").replace(/[\u00e9\u00e8\u0117\u0113]/g,"e").replace(/[\u00f3\u00f6\u00f8]/g,"o").replace(/[\u016f\u00fc]/g,"u").replace(/['+,]/g,"").replace(/[^a-z0-9.]+/gi,"-").replace(/(with-\d|St)\.+-?/,"$1-")),M.e?(R.eval=M.e,R.depth=M.h,R.score=M.e[0].cp/100,void 0!==M.e[0].mate&&(R.mate=M.e[0].mate)):(R.score=M.s/100,void 0!==M.mate&&(R.mate=M.mate)),M.v&&(R.bad=!0),R}),T.json)}))},jce.CEE_LIB={addOptions:function(i,s){for(var _ in s)void 0!==s[_]&&i.push("setoption name "+_+" value "+s[_]);return i},addVariations:function(i,s,_){var T,S;s=s||[],_=_||"variation";for(var C=0;C<s.length;++C)(T=s[C]).pv=Array.isArray(T.pv)&&T.pv.join(" ")||T.pv||"",S=_+" "+T.pv,"number"==typeof T.mateIn?S+=" mate "+T.mateIn:"number"==typeof T.mate?S+=" mate "+T.mate:S+=" cp "+Math.round(T.cp),"number"==typeof T.depth&&(S+=" depth "+T.depth),i.push(S);return i},addPush:function(i,s){var _;return"string"==typeof s&&(s={moveLan:s}),_="push "+s.moveLan,s.isBook&&(_+=" isBook"),s.isRetry&&(_+=" isRetry"),i.push(_),i},addPosition:function(i,s){return i.push("position fen "+s),i},addVariant:function(i,s){return"chess960"===String(s).toLowerCase().replace(/ |-/g,"")?(i.push("setoption name UCI_Variant value chess"),i.push("setoption name UCI_Chess960 value "+!0)):(i.push("setoption name UCI_Variant value chess"),i.push("setoption name UCI_Chess960 value "+!1)),i}},jce}(),i.exports=S}(S);var C,P,O,M,R=S.exports;function createEventEmitter(){const i=[];return{emit:function emit(s,_){let T;for(T of i)T.type!==s&&"all"!==T.type||T.handler(_)},listeners:i,off:off,offAll:function offAll(i){return off({handler:i,type:"all"})},offMany:function offMany(i=[]){i.forEach((i=>off(i)))},on:on,onAll:function onAll(i){on("all",i)},onMany:function onMany(i=[],s){i.forEach((i=>on(i,s)))},once:function once(s,_){const T={handler:(...i)=>{off(T),_(...i)},type:s};i.push(T)}};function off(s){const _=i.findIndex((i=>s.type===i.type&&s.handler===i.handler));-1!==_&&i.splice(_,1)}function on(s,_){const T={handler:_,type:s};i.push(T)}}function createStateMachine({data:i,initialState:s,states:_},T=createEventEmitter()){let S=s;return Object.assign(Object.assign({},T),{getCurrentState:function getCurrentState(){return S},getData:function getData(){return Object.assign({},i)},transition:function transition(s,P){if(!_[S][s])return T.emit(C.Event.Types.NoTransition,{action:s,data:i,state:S}),!1;const O=_[S][s](P),M="string"==typeof O?O:O.nextState,buildEvent=_=>({action:s,currentState:S,data:i,event:_,nextState:M,params:P});S!==M&&T.emit(C.Event.Types.OnExit,buildEvent(C.Event.Types.OnExit));O.data&&Object.assign(i,O.data);S!==M&&T.emit(C.Event.Types.OnEnter,buildEvent(C.Event.Types.OnEnter));S===M?T.emit(C.Event.Types.OnReEnter,buildEvent(C.Event.Types.OnReEnter)):S=M;return!0}})}P=C||(C={}),O=P.Event||(P.Event={}),(M=O.Types||(O.Types={})).NoTransition="NoTransition",M.OnEnter="Enter",M.OnExit="Exit",M.OnReEnter="ReEnter";const D=["mousedown","keydown","touchstart","touchend"];let j=!1;const $=window.chesscom||{},U=window.AudioContext||window.webkitAudioContext;let V=Boolean(U);function isSuspended(){return V}function resumeAudio(i){if(U){if($.audioContext||($.audioContext=function newAudioContext(){try{return new U}catch(i){return null}}()),!$.audioContext||!$.audioContext.resume)return V=!1,void i();$.audioContext.resume().then((()=>{V=!1,i()}))}}var Z="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==_.g?_.g:"undefined"!=typeof self?self:{};
/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
var Y,X,Q=function createCommonjsModule(i){var s={exports:{}};return i(s,s.exports),s.exports}((function(i,s){!function(){var HowlerGlobal2=function(){this.init()};HowlerGlobal2.prototype={init:function(){var s=this||i;return s._counter=1e3,s._html5AudioPool=[],s.html5PoolSize=10,s._codecs={},s._howls=[],s._muted=!1,s._volume=1,s._canPlayEvent="canplaythrough",s._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,s.masterGain=null,s.noAudio=!1,s.usingWebAudio=!0,s.autoSuspend=!0,s.ctx=null,s.autoUnlock=!0,s._setup(),s},volume:function(s){var _=this||i;if(s=parseFloat(s),_.ctx||setupAudioContext(),void 0!==s&&s>=0&&s<=1){if(_._volume=s,_._muted)return _;_.usingWebAudio&&_.masterGain.gain.setValueAtTime(s,i.ctx.currentTime);for(var T=0;T<_._howls.length;T++)if(!_._howls[T]._webAudio)for(var S=_._howls[T]._getSoundIds(),C=0;C<S.length;C++){var P=_._howls[T]._soundById(S[C]);P&&P._node&&(P._node.volume=P._volume*s)}return _}return _._volume},mute:function(s){var _=this||i;_.ctx||setupAudioContext(),_._muted=s,_.usingWebAudio&&_.masterGain.gain.setValueAtTime(s?0:_._volume,i.ctx.currentTime);for(var T=0;T<_._howls.length;T++)if(!_._howls[T]._webAudio)for(var S=_._howls[T]._getSoundIds(),C=0;C<S.length;C++){var P=_._howls[T]._soundById(S[C]);P&&P._node&&(P._node.muted=!!s||P._muted)}return _},stop:function(){for(var s=this||i,_=0;_<s._howls.length;_++)s._howls[_].stop();return s},unload:function(){for(var s=this||i,_=s._howls.length-1;_>=0;_--)s._howls[_].unload();return s.usingWebAudio&&s.ctx&&void 0!==s.ctx.close&&(s.ctx.close(),s.ctx=null,setupAudioContext()),s},codecs:function(s){return(this||i)._codecs[s.replace(/^x-/,"")]},_setup:function(){var s=this||i;if(s.state=s.ctx&&s.ctx.state||"suspended",s._autoSuspend(),!s.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(s._canPlayEvent="canplay")}catch(_){s.noAudio=!0}else s.noAudio=!0;try{(new Audio).muted&&(s.noAudio=!0)}catch(_){}return s.noAudio||s._setupCodecs(),s},_setupCodecs:function(){var s=this||i,_=null;try{_="undefined"!=typeof Audio?new Audio:null}catch(D){return s}if(!_||"function"!=typeof _.canPlayType)return s;var T=_.canPlayType("audio/mpeg;").replace(/^no$/,""),S=s._navigator?s._navigator.userAgent:"",C=S.match(/OPR\/([0-6].)/g),P=C&&parseInt(C[0].split("/")[1],10)<33,O=-1!==S.indexOf("Safari")&&-1===S.indexOf("Chrome"),M=S.match(/Version\/(.*?) /),R=O&&M&&parseInt(M[1],10)<15;return s._codecs={mp3:!(P||!T&&!_.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!T,opus:!!_.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!_.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!_.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(_.canPlayType('audio/wav; codecs="1"')||_.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!_.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!_.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(_.canPlayType("audio/x-m4a;")||_.canPlayType("audio/m4a;")||_.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(_.canPlayType("audio/x-m4b;")||_.canPlayType("audio/m4b;")||_.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(_.canPlayType("audio/x-mp4;")||_.canPlayType("audio/mp4;")||_.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(R||!_.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(R||!_.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!_.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(_.canPlayType("audio/x-flac;")||_.canPlayType("audio/flac;")).replace(/^no$/,"")},s},_unlockAudio:function(){var s=this||i;if(!s._audioUnlocked&&s.ctx){s._audioUnlocked=!1,s.autoUnlock=!1,s._mobileUnloaded||44100===s.ctx.sampleRate||(s._mobileUnloaded=!0,s.unload()),s._scratchBuffer=s.ctx.createBuffer(1,1,22050);var unlock=function(i){for(;s._html5AudioPool.length<s.html5PoolSize;)try{var _=new Audio;_._unlocked=!0,s._releaseHtml5Audio(_)}catch(M){s.noAudio=!0;break}for(var T=0;T<s._howls.length;T++)if(!s._howls[T]._webAudio)for(var S=s._howls[T]._getSoundIds(),C=0;C<S.length;C++){var P=s._howls[T]._soundById(S[C]);P&&P._node&&!P._node._unlocked&&(P._node._unlocked=!0,P._node.load())}s._autoResume();var O=s.ctx.createBufferSource();O.buffer=s._scratchBuffer,O.connect(s.ctx.destination),void 0===O.start?O.noteOn(0):O.start(0),"function"==typeof s.ctx.resume&&s.ctx.resume(),O.onended=function(){O.disconnect(0),s._audioUnlocked=!0,document.removeEventListener("touchstart",unlock,!0),document.removeEventListener("touchend",unlock,!0),document.removeEventListener("click",unlock,!0),document.removeEventListener("keydown",unlock,!0);for(var i=0;i<s._howls.length;i++)s._howls[i]._emit("unlock")}};return document.addEventListener("touchstart",unlock,!0),document.addEventListener("touchend",unlock,!0),document.addEventListener("click",unlock,!0),document.addEventListener("keydown",unlock,!0),s}},_obtainHtml5Audio:function(){var s=this||i;if(s._html5AudioPool.length)return s._html5AudioPool.pop();var _=(new Audio).play();return _&&"undefined"!=typeof Promise&&(_ instanceof Promise||"function"==typeof _.then)&&_.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(s){var _=this||i;return s._unlocked&&_._html5AudioPool.push(s),_},_autoSuspend:function(){var s=this;if(s.autoSuspend&&s.ctx&&void 0!==s.ctx.suspend&&i.usingWebAudio){for(var _=0;_<s._howls.length;_++)if(s._howls[_]._webAudio)for(var T=0;T<s._howls[_]._sounds.length;T++)if(!s._howls[_]._sounds[T]._paused)return s;return s._suspendTimer&&clearTimeout(s._suspendTimer),s._suspendTimer=setTimeout((function(){if(s.autoSuspend){s._suspendTimer=null,s.state="suspending";var handleSuspension=function(){s.state="suspended",s._resumeAfterSuspend&&(delete s._resumeAfterSuspend,s._autoResume())};s.ctx.suspend().then(handleSuspension,handleSuspension)}}),3e4),s}},_autoResume:function(){var s=this;if(s.ctx&&void 0!==s.ctx.resume&&i.usingWebAudio)return"running"===s.state&&"interrupted"!==s.ctx.state&&s._suspendTimer?(clearTimeout(s._suspendTimer),s._suspendTimer=null):"suspended"===s.state||"running"===s.state&&"interrupted"===s.ctx.state?(s.ctx.resume().then((function(){s.state="running";for(var i=0;i<s._howls.length;i++)s._howls[i]._emit("resume")})),s._suspendTimer&&(clearTimeout(s._suspendTimer),s._suspendTimer=null)):"suspending"===s.state&&(s._resumeAfterSuspend=!0),s}};var i=new HowlerGlobal2,Howl2=function(i){i.src&&0!==i.src.length?this.init(i):console.error("An array of source files must be passed with any new Howl.")};Howl2.prototype={init:function(s){var _=this;return i.ctx||setupAudioContext(),_._autoplay=s.autoplay||!1,_._format="string"!=typeof s.format?s.format:[s.format],_._html5=s.html5||!1,_._muted=s.mute||!1,_._loop=s.loop||!1,_._pool=s.pool||5,_._preload="boolean"!=typeof s.preload&&"metadata"!==s.preload||s.preload,_._rate=s.rate||1,_._sprite=s.sprite||{},_._src="string"!=typeof s.src?s.src:[s.src],_._volume=void 0!==s.volume?s.volume:1,_._xhr={method:s.xhr&&s.xhr.method?s.xhr.method:"GET",headers:s.xhr&&s.xhr.headers?s.xhr.headers:null,withCredentials:!(!s.xhr||!s.xhr.withCredentials)&&s.xhr.withCredentials},_._duration=0,_._state="unloaded",_._sounds=[],_._endTimers={},_._queue=[],_._playLock=!1,_._onend=s.onend?[{fn:s.onend}]:[],_._onfade=s.onfade?[{fn:s.onfade}]:[],_._onload=s.onload?[{fn:s.onload}]:[],_._onloaderror=s.onloaderror?[{fn:s.onloaderror}]:[],_._onplayerror=s.onplayerror?[{fn:s.onplayerror}]:[],_._onpause=s.onpause?[{fn:s.onpause}]:[],_._onplay=s.onplay?[{fn:s.onplay}]:[],_._onstop=s.onstop?[{fn:s.onstop}]:[],_._onmute=s.onmute?[{fn:s.onmute}]:[],_._onvolume=s.onvolume?[{fn:s.onvolume}]:[],_._onrate=s.onrate?[{fn:s.onrate}]:[],_._onseek=s.onseek?[{fn:s.onseek}]:[],_._onunlock=s.onunlock?[{fn:s.onunlock}]:[],_._onresume=[],_._webAudio=i.usingWebAudio&&!_._html5,void 0!==i.ctx&&i.ctx&&i.autoUnlock&&i._unlockAudio(),i._howls.push(_),_._autoplay&&_._queue.push({event:"play",action:function(){_.play()}}),_._preload&&"none"!==_._preload&&_.load(),_},load:function(){var s=this,_=null;if(i.noAudio)s._emit("loaderror",null,"No audio support.");else{"string"==typeof s._src&&(s._src=[s._src]);for(var T=0;T<s._src.length;T++){var S,C;if(s._format&&s._format[T])S=s._format[T];else{if("string"!=typeof(C=s._src[T])){s._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(S=/^data:audio\/([^;,]+);/i.exec(C))||(S=/\.([^.]+)$/.exec(C.split("?",1)[0])),S&&(S=S[1].toLowerCase())}if(S||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),S&&i.codecs(S)){_=s._src[T];break}}if(_)return s._src=_,s._state="loading","https:"===window.location.protocol&&"http:"===_.slice(0,5)&&(s._html5=!0,s._webAudio=!1),new Sound2(s),s._webAudio&&loadBuffer(s),s;s._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(s,_){var T=this,S=null;if("number"==typeof s)S=s,s=null;else{if("string"==typeof s&&"loaded"===T._state&&!T._sprite[s])return null;if(void 0===s&&(s="__default",!T._playLock)){for(var C=0,P=0;P<T._sounds.length;P++)T._sounds[P]._paused&&!T._sounds[P]._ended&&(C++,S=T._sounds[P]._id);1===C?s=null:S=null}}var O=S?T._soundById(S):T._inactiveSound();if(!O)return null;if(S&&!s&&(s=O._sprite||"__default"),"loaded"!==T._state){O._sprite=s,O._ended=!1;var M=O._id;return T._queue.push({event:"play",action:function(){T.play(M)}}),M}if(S&&!O._paused)return _||T._loadQueue("play"),O._id;T._webAudio&&i._autoResume();var R=Math.max(0,O._seek>0?O._seek:T._sprite[s][0]/1e3),D=Math.max(0,(T._sprite[s][0]+T._sprite[s][1])/1e3-R),j=1e3*D/Math.abs(O._rate),$=T._sprite[s][0]/1e3,U=(T._sprite[s][0]+T._sprite[s][1])/1e3;O._sprite=s,O._ended=!1;var setParams=function(){O._paused=!1,O._seek=R,O._start=$,O._stop=U,O._loop=!(!O._loop&&!T._sprite[s][2])};if(!(R>=U)){var V=O._node;if(T._webAudio){var playWebAudio=function(){T._playLock=!1,setParams(),T._refreshBuffer(O);var s=O._muted||T._muted?0:O._volume;V.gain.setValueAtTime(s,i.ctx.currentTime),O._playStart=i.ctx.currentTime,void 0===V.bufferSource.start?O._loop?V.bufferSource.noteGrainOn(0,R,86400):V.bufferSource.noteGrainOn(0,R,D):O._loop?V.bufferSource.start(0,R,86400):V.bufferSource.start(0,R,D),j!==1/0&&(T._endTimers[O._id]=setTimeout(T._ended.bind(T,O),j)),_||setTimeout((function(){T._emit("play",O._id),T._loadQueue()}),0)};"running"===i.state&&"interrupted"!==i.ctx.state?playWebAudio():(T._playLock=!0,T.once("resume",playWebAudio),T._clearTimer(O._id))}else{var playHtml5=function(){V.currentTime=R,V.muted=O._muted||T._muted||i._muted||V.muted,V.volume=O._volume*i.volume(),V.playbackRate=O._rate;try{var S=V.play();if(S&&"undefined"!=typeof Promise&&(S instanceof Promise||"function"==typeof S.then)?(T._playLock=!0,setParams(),S.then((function(){T._playLock=!1,V._unlocked=!0,_?T._loadQueue():T._emit("play",O._id)})).catch((function(){T._playLock=!1,T._emit("playerror",O._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),O._ended=!0,O._paused=!0}))):_||(T._playLock=!1,setParams(),T._emit("play",O._id)),V.playbackRate=O._rate,V.paused)return void T._emit("playerror",O._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==s||O._loop?T._endTimers[O._id]=setTimeout(T._ended.bind(T,O),j):(T._endTimers[O._id]=function(){T._ended(O),V.removeEventListener("ended",T._endTimers[O._id],!1)},V.addEventListener("ended",T._endTimers[O._id],!1))}catch(C){T._emit("playerror",O._id,C)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===V.src&&(V.src=T._src,V.load());var Z=window&&window.ejecta||!V.readyState&&i._navigator.isCocoonJS;if(V.readyState>=3||Z)playHtml5();else{T._playLock=!0,T._state="loading";var listener=function(){T._state="loaded",playHtml5(),V.removeEventListener(i._canPlayEvent,listener,!1)};V.addEventListener(i._canPlayEvent,listener,!1),T._clearTimer(O._id)}}return O._id}T._ended(O)},pause:function(i){var s=this;if("loaded"!==s._state||s._playLock)return s._queue.push({event:"pause",action:function(){s.pause(i)}}),s;for(var _=s._getSoundIds(i),T=0;T<_.length;T++){s._clearTimer(_[T]);var S=s._soundById(_[T]);if(S&&!S._paused&&(S._seek=s.seek(_[T]),S._rateSeek=0,S._paused=!0,s._stopFade(_[T]),S._node))if(s._webAudio){if(!S._node.bufferSource)continue;void 0===S._node.bufferSource.stop?S._node.bufferSource.noteOff(0):S._node.bufferSource.stop(0),s._cleanBuffer(S._node)}else isNaN(S._node.duration)&&S._node.duration!==1/0||S._node.pause();arguments[1]||s._emit("pause",S?S._id:null)}return s},stop:function(i,s){var _=this;if("loaded"!==_._state||_._playLock)return _._queue.push({event:"stop",action:function(){_.stop(i)}}),_;for(var T=_._getSoundIds(i),S=0;S<T.length;S++){_._clearTimer(T[S]);var C=_._soundById(T[S]);C&&(C._seek=C._start||0,C._rateSeek=0,C._paused=!0,C._ended=!0,_._stopFade(T[S]),C._node&&(_._webAudio?C._node.bufferSource&&(void 0===C._node.bufferSource.stop?C._node.bufferSource.noteOff(0):C._node.bufferSource.stop(0),_._cleanBuffer(C._node)):isNaN(C._node.duration)&&C._node.duration!==1/0||(C._node.currentTime=C._start||0,C._node.pause(),C._node.duration===1/0&&_._clearSound(C._node))),s||_._emit("stop",C._id))}return _},mute:function(s,_){var T=this;if("loaded"!==T._state||T._playLock)return T._queue.push({event:"mute",action:function(){T.mute(s,_)}}),T;if(void 0===_){if("boolean"!=typeof s)return T._muted;T._muted=s}for(var S=T._getSoundIds(_),C=0;C<S.length;C++){var P=T._soundById(S[C]);P&&(P._muted=s,P._interval&&T._stopFade(P._id),T._webAudio&&P._node?P._node.gain.setValueAtTime(s?0:P._volume,i.ctx.currentTime):P._node&&(P._node.muted=!!i._muted||s),T._emit("mute",P._id))}return T},volume:function(){var s,_,T,S=this,C=arguments;if(0===C.length)return S._volume;if(1===C.length||2===C.length&&void 0===C[1]){var P=S._getSoundIds(),O=P.indexOf(C[0]);O>=0?_=parseInt(C[0],10):s=parseFloat(C[0])}else C.length>=2&&(s=parseFloat(C[0]),_=parseInt(C[1],10));if(!(void 0!==s&&s>=0&&s<=1))return(T=_?S._soundById(_):S._sounds[0])?T._volume:0;if("loaded"!==S._state||S._playLock)return S._queue.push({event:"volume",action:function(){S.volume.apply(S,C)}}),S;void 0===_&&(S._volume=s),_=S._getSoundIds(_);for(var M=0;M<_.length;M++)(T=S._soundById(_[M]))&&(T._volume=s,C[2]||S._stopFade(_[M]),S._webAudio&&T._node&&!T._muted?T._node.gain.setValueAtTime(s,i.ctx.currentTime):T._node&&!T._muted&&(T._node.volume=s*i.volume()),S._emit("volume",T._id));return S},fade:function(s,_,T,S){var C=this;if("loaded"!==C._state||C._playLock)return C._queue.push({event:"fade",action:function(){C.fade(s,_,T,S)}}),C;s=Math.min(Math.max(0,parseFloat(s)),1),_=Math.min(Math.max(0,parseFloat(_)),1),T=parseFloat(T),C.volume(s,S);for(var P=C._getSoundIds(S),O=0;O<P.length;O++){var M=C._soundById(P[O]);if(M){if(S||C._stopFade(P[O]),C._webAudio&&!M._muted){var R=i.ctx.currentTime,D=R+T/1e3;M._volume=s,M._node.gain.setValueAtTime(s,R),M._node.gain.linearRampToValueAtTime(_,D)}C._startFadeInterval(M,s,_,T,P[O],void 0===S)}}return C},_startFadeInterval:function(i,s,_,T,S,C){var P=this,O=s,M=_-s,R=Math.abs(M/.01),D=Math.max(4,R>0?T/R:T),j=Date.now();i._fadeTo=_,i._interval=setInterval((function(){var S=(Date.now()-j)/T;j=Date.now(),O+=M*S,O=Math.round(100*O)/100,O=M<0?Math.max(_,O):Math.min(_,O),P._webAudio?i._volume=O:P.volume(O,i._id,!0),C&&(P._volume=O),(_<s&&O<=_||_>s&&O>=_)&&(clearInterval(i._interval),i._interval=null,i._fadeTo=null,P.volume(_,i._id),P._emit("fade",i._id))}),D)},_stopFade:function(s){var _=this,T=_._soundById(s);return T&&T._interval&&(_._webAudio&&T._node.gain.cancelScheduledValues(i.ctx.currentTime),clearInterval(T._interval),T._interval=null,_.volume(T._fadeTo,s),T._fadeTo=null,_._emit("fade",s)),_},loop:function(){var i,s,_,T=this,S=arguments;if(0===S.length)return T._loop;if(1===S.length){if("boolean"!=typeof S[0])return!!(_=T._soundById(parseInt(S[0],10)))&&_._loop;i=S[0],T._loop=i}else 2===S.length&&(i=S[0],s=parseInt(S[1],10));for(var C=T._getSoundIds(s),P=0;P<C.length;P++)(_=T._soundById(C[P]))&&(_._loop=i,T._webAudio&&_._node&&_._node.bufferSource&&(_._node.bufferSource.loop=i,i&&(_._node.bufferSource.loopStart=_._start||0,_._node.bufferSource.loopEnd=_._stop,T.playing(C[P])&&(T.pause(C[P],!0),T.play(C[P],!0)))));return T},rate:function(){var s,_,T,S=this,C=arguments;if(0===C.length)_=S._sounds[0]._id;else if(1===C.length){var P=S._getSoundIds(),O=P.indexOf(C[0]);O>=0?_=parseInt(C[0],10):s=parseFloat(C[0])}else 2===C.length&&(s=parseFloat(C[0]),_=parseInt(C[1],10));if("number"!=typeof s)return(T=S._soundById(_))?T._rate:S._rate;if("loaded"!==S._state||S._playLock)return S._queue.push({event:"rate",action:function(){S.rate.apply(S,C)}}),S;void 0===_&&(S._rate=s),_=S._getSoundIds(_);for(var M=0;M<_.length;M++)if(T=S._soundById(_[M])){S.playing(_[M])&&(T._rateSeek=S.seek(_[M]),T._playStart=S._webAudio?i.ctx.currentTime:T._playStart),T._rate=s,S._webAudio&&T._node&&T._node.bufferSource?T._node.bufferSource.playbackRate.setValueAtTime(s,i.ctx.currentTime):T._node&&(T._node.playbackRate=s);var R=S.seek(_[M]),D=(S._sprite[T._sprite][0]+S._sprite[T._sprite][1])/1e3-R,j=1e3*D/Math.abs(T._rate);!S._endTimers[_[M]]&&T._paused||(S._clearTimer(_[M]),S._endTimers[_[M]]=setTimeout(S._ended.bind(S,T),j)),S._emit("rate",T._id)}return S},seek:function(){var s,_,T=this,S=arguments;if(0===S.length)T._sounds.length&&(_=T._sounds[0]._id);else if(1===S.length){var C=T._getSoundIds(),P=C.indexOf(S[0]);P>=0?_=parseInt(S[0],10):T._sounds.length&&(_=T._sounds[0]._id,s=parseFloat(S[0]))}else 2===S.length&&(s=parseFloat(S[0]),_=parseInt(S[1],10));if(void 0===_)return 0;if("number"==typeof s&&("loaded"!==T._state||T._playLock))return T._queue.push({event:"seek",action:function(){T.seek.apply(T,S)}}),T;var O=T._soundById(_);if(O){if(!("number"==typeof s&&s>=0)){if(T._webAudio){var M=T.playing(_)?i.ctx.currentTime-O._playStart:0,R=O._rateSeek?O._rateSeek-O._seek:0;return O._seek+(R+M*Math.abs(O._rate))}return O._node.currentTime}var D=T.playing(_);D&&T.pause(_,!0),O._seek=s,O._ended=!1,T._clearTimer(_),T._webAudio||!O._node||isNaN(O._node.duration)||(O._node.currentTime=s);var seekAndEmit=function(){D&&T.play(_,!0),T._emit("seek",_)};if(D&&!T._webAudio){var emitSeek=function(){T._playLock?setTimeout(emitSeek,0):seekAndEmit()};setTimeout(emitSeek,0)}else seekAndEmit()}return T},playing:function(i){var s=this;if("number"==typeof i){var _=s._soundById(i);return!!_&&!_._paused}for(var T=0;T<s._sounds.length;T++)if(!s._sounds[T]._paused)return!0;return!1},duration:function(i){var s=this,_=s._duration,T=s._soundById(i);return T&&(_=s._sprite[T._sprite][1]/1e3),_},state:function(){return this._state},unload:function(){for(var s=this,T=s._sounds,S=0;S<T.length;S++)T[S]._paused||s.stop(T[S]._id),s._webAudio||(s._clearSound(T[S]._node),T[S]._node.removeEventListener("error",T[S]._errorFn,!1),T[S]._node.removeEventListener(i._canPlayEvent,T[S]._loadFn,!1),T[S]._node.removeEventListener("ended",T[S]._endFn,!1),i._releaseHtml5Audio(T[S]._node)),delete T[S]._node,s._clearTimer(T[S]._id);var C=i._howls.indexOf(s);C>=0&&i._howls.splice(C,1);var P=!0;for(S=0;S<i._howls.length;S++)if(i._howls[S]._src===s._src||s._src.indexOf(i._howls[S]._src)>=0){P=!1;break}return _&&P&&delete _[s._src],i.noAudio=!1,s._state="unloaded",s._sounds=[],s=null,null},on:function(i,s,_,T){var S=this["_on"+i];return"function"==typeof s&&S.push(T?{id:_,fn:s,once:T}:{id:_,fn:s}),this},off:function(i,s,_){var T=this,S=T["_on"+i],C=0;if("number"==typeof s&&(_=s,s=null),s||_)for(C=0;C<S.length;C++){var P=_===S[C].id;if(s===S[C].fn&&P||!s&&P){S.splice(C,1);break}}else if(i)T["_on"+i]=[];else{var O=Object.keys(T);for(C=0;C<O.length;C++)0===O[C].indexOf("_on")&&Array.isArray(T[O[C]])&&(T[O[C]]=[])}return T},once:function(i,s,_){return this.on(i,s,_,1),this},_emit:function(i,s,_){for(var T=this,S=T["_on"+i],C=S.length-1;C>=0;C--)S[C].id&&S[C].id!==s&&"load"!==i||(setTimeout(function(i){i.call(this,s,_)}.bind(T,S[C].fn),0),S[C].once&&T.off(i,S[C].fn,S[C].id));return T._loadQueue(i),T},_loadQueue:function(i){var s=this;if(s._queue.length>0){var _=s._queue[0];_.event===i&&(s._queue.shift(),s._loadQueue()),i||_.action()}return s},_ended:function(s){var _=this,T=s._sprite;if(!_._webAudio&&s._node&&!s._node.paused&&!s._node.ended&&s._node.currentTime<s._stop)return setTimeout(_._ended.bind(_,s),100),_;var S=!(!s._loop&&!_._sprite[T][2]);if(_._emit("end",s._id),!_._webAudio&&S&&_.stop(s._id,!0).play(s._id),_._webAudio&&S){_._emit("play",s._id),s._seek=s._start||0,s._rateSeek=0,s._playStart=i.ctx.currentTime;var C=1e3*(s._stop-s._start)/Math.abs(s._rate);_._endTimers[s._id]=setTimeout(_._ended.bind(_,s),C)}return _._webAudio&&!S&&(s._paused=!0,s._ended=!0,s._seek=s._start||0,s._rateSeek=0,_._clearTimer(s._id),_._cleanBuffer(s._node),i._autoSuspend()),_._webAudio||S||_.stop(s._id,!0),_},_clearTimer:function(i){var s=this;if(s._endTimers[i]){if("function"!=typeof s._endTimers[i])clearTimeout(s._endTimers[i]);else{var _=s._soundById(i);_&&_._node&&_._node.removeEventListener("ended",s._endTimers[i],!1)}delete s._endTimers[i]}return s},_soundById:function(i){for(var s=this,_=0;_<s._sounds.length;_++)if(i===s._sounds[_]._id)return s._sounds[_];return null},_inactiveSound:function(){var i=this;i._drain();for(var s=0;s<i._sounds.length;s++)if(i._sounds[s]._ended)return i._sounds[s].reset();return new Sound2(i)},_drain:function(){var i=this,s=i._pool,_=0,T=0;if(!(i._sounds.length<s)){for(T=0;T<i._sounds.length;T++)i._sounds[T]._ended&&_++;for(T=i._sounds.length-1;T>=0;T--){if(_<=s)return;i._sounds[T]._ended&&(i._webAudio&&i._sounds[T]._node&&i._sounds[T]._node.disconnect(0),i._sounds.splice(T,1),_--)}}},_getSoundIds:function(i){if(void 0===i){for(var s=[],_=0;_<this._sounds.length;_++)s.push(this._sounds[_]._id);return s}return[i]},_refreshBuffer:function(s){return s._node.bufferSource=i.ctx.createBufferSource(),s._node.bufferSource.buffer=_[this._src],s._panner?s._node.bufferSource.connect(s._panner):s._node.bufferSource.connect(s._node),s._node.bufferSource.loop=s._loop,s._loop&&(s._node.bufferSource.loopStart=s._start||0,s._node.bufferSource.loopEnd=s._stop||0),s._node.bufferSource.playbackRate.setValueAtTime(s._rate,i.ctx.currentTime),this},_cleanBuffer:function(s){var _=i._navigator&&i._navigator.vendor.indexOf("Apple")>=0;if(i._scratchBuffer&&s.bufferSource&&(s.bufferSource.onended=null,s.bufferSource.disconnect(0),_))try{s.bufferSource.buffer=i._scratchBuffer}catch(T){}return s.bufferSource=null,this},_clearSound:function(s){/MSIE |Trident\//.test(i._navigator&&i._navigator.userAgent)||(s.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var Sound2=function(i){this._parent=i,this.init()};Sound2.prototype={init:function(){var s=this,_=s._parent;return s._muted=_._muted,s._loop=_._loop,s._volume=_._volume,s._rate=_._rate,s._seek=0,s._paused=!0,s._ended=!0,s._sprite="__default",s._id=++i._counter,_._sounds.push(s),s.create(),s},create:function(){var s=this,_=s._parent,T=i._muted||s._muted||s._parent._muted?0:s._volume;return _._webAudio?(s._node=void 0===i.ctx.createGain?i.ctx.createGainNode():i.ctx.createGain(),s._node.gain.setValueAtTime(T,i.ctx.currentTime),s._node.paused=!0,s._node.connect(i.masterGain)):i.noAudio||(s._node=i._obtainHtml5Audio(),s._errorFn=s._errorListener.bind(s),s._node.addEventListener("error",s._errorFn,!1),s._loadFn=s._loadListener.bind(s),s._node.addEventListener(i._canPlayEvent,s._loadFn,!1),s._endFn=s._endListener.bind(s),s._node.addEventListener("ended",s._endFn,!1),s._node.src=_._src,s._node.preload=!0===_._preload?"auto":_._preload,s._node.volume=T*i.volume(),s._node.load()),s},reset:function(){var s=this,_=s._parent;return s._muted=_._muted,s._loop=_._loop,s._volume=_._volume,s._rate=_._rate,s._seek=0,s._rateSeek=0,s._paused=!0,s._ended=!0,s._sprite="__default",s._id=++i._counter,s},_errorListener:function(){var i=this;i._parent._emit("loaderror",i._id,i._node.error?i._node.error.code:0),i._node.removeEventListener("error",i._errorFn,!1)},_loadListener:function(){var s=this,_=s._parent;_._duration=Math.ceil(10*s._node.duration)/10,0===Object.keys(_._sprite).length&&(_._sprite={__default:[0,1e3*_._duration]}),"loaded"!==_._state&&(_._state="loaded",_._emit("load"),_._loadQueue()),s._node.removeEventListener(i._canPlayEvent,s._loadFn,!1)},_endListener:function(){var i=this,s=i._parent;s._duration===1/0&&(s._duration=Math.ceil(10*i._node.duration)/10,s._sprite.__default[1]===1/0&&(s._sprite.__default[1]=1e3*s._duration),s._ended(i)),i._node.removeEventListener("ended",i._endFn,!1)}};var _={},loadBuffer=function(i){var s=i._src;if(_[s])return i._duration=_[s].duration,void loadSound2(i);if(/^data:[^;]+;base64,/.test(s)){for(var T=atob(s.split(",")[1]),S=new Uint8Array(T.length),C=0;C<T.length;++C)S[C]=T.charCodeAt(C);decodeAudioData(S.buffer,i)}else{var P=new XMLHttpRequest;P.open(i._xhr.method,s,!0),P.withCredentials=i._xhr.withCredentials,P.responseType="arraybuffer",i._xhr.headers&&Object.keys(i._xhr.headers).forEach((function(s){P.setRequestHeader(s,i._xhr.headers[s])})),P.onload=function(){var s=(P.status+"")[0];"0"===s||"2"===s||"3"===s?decodeAudioData(P.response,i):i._emit("loaderror",null,"Failed loading audio file with status: "+P.status+".")},P.onerror=function(){i._webAudio&&(i._html5=!0,i._webAudio=!1,i._sounds=[],delete _[s],i.load())},safeXhrSend(P)}},safeXhrSend=function(i){try{i.send()}catch(s){i.onerror()}},decodeAudioData=function(s,T){var error=function(){T._emit("loaderror",null,"Decoding audio data failed.")},success=function(i){i&&T._sounds.length>0?(_[T._src]=i,loadSound2(T,i)):error()};"undefined"!=typeof Promise&&1===i.ctx.decodeAudioData.length?i.ctx.decodeAudioData(s).then(success).catch(error):i.ctx.decodeAudioData(s,success,error)},loadSound2=function(i,s){s&&!i._duration&&(i._duration=s.duration),0===Object.keys(i._sprite).length&&(i._sprite={__default:[0,1e3*i._duration]}),"loaded"!==i._state&&(i._state="loaded",i._emit("load"),i._loadQueue())},setupAudioContext=function(){if(i.usingWebAudio){try{"undefined"!=typeof AudioContext?i.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?i.ctx=new webkitAudioContext:i.usingWebAudio=!1}catch(C){i.usingWebAudio=!1}i.ctx||(i.usingWebAudio=!1);var s=/iP(hone|od|ad)/.test(i._navigator&&i._navigator.platform),_=i._navigator&&i._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),T=_?parseInt(_[1],10):null;if(s&&T&&T<9){var S=/safari/.test(i._navigator&&i._navigator.userAgent.toLowerCase());i._navigator&&!S&&(i.usingWebAudio=!1)}i.usingWebAudio&&(i.masterGain=void 0===i.ctx.createGain?i.ctx.createGainNode():i.ctx.createGain(),i.masterGain.gain.setValueAtTime(i._muted?0:i._volume,i.ctx.currentTime),i.masterGain.connect(i.ctx.destination)),i._setup()}};s.Howler=i,s.Howl=Howl2,void 0!==Z?(Z.HowlerGlobal=HowlerGlobal2,Z.Howler=i,Z.Howl=Howl2,Z.Sound=Sound2):"undefined"!=typeof window&&(window.HowlerGlobal=HowlerGlobal2,window.Howler=i,window.Howl=Howl2,window.Sound=Sound2)}(),
/*!
   *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
   *  
   *  howler.js v2.2.3
   *  howlerjs.com
   *
   *  (c) 2013-2020, James Simpson of GoldFire Studios
   *  goldfirestudios.com
   *
   *  MIT License
   */
function(){var i;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(i){var s=this;if(!s.ctx||!s.ctx.listener)return s;for(var _=s._howls.length-1;_>=0;_--)s._howls[_].stereo(i);return s},HowlerGlobal.prototype.pos=function(i,s,_){var T=this;return T.ctx&&T.ctx.listener?(s="number"!=typeof s?T._pos[1]:s,_="number"!=typeof _?T._pos[2]:_,"number"!=typeof i?T._pos:(T._pos=[i,s,_],void 0!==T.ctx.listener.positionX?(T.ctx.listener.positionX.setTargetAtTime(T._pos[0],Howler.ctx.currentTime,.1),T.ctx.listener.positionY.setTargetAtTime(T._pos[1],Howler.ctx.currentTime,.1),T.ctx.listener.positionZ.setTargetAtTime(T._pos[2],Howler.ctx.currentTime,.1)):T.ctx.listener.setPosition(T._pos[0],T._pos[1],T._pos[2]),T)):T},HowlerGlobal.prototype.orientation=function(i,s,_,T,S,C){var P=this;if(!P.ctx||!P.ctx.listener)return P;var O=P._orientation;return s="number"!=typeof s?O[1]:s,_="number"!=typeof _?O[2]:_,T="number"!=typeof T?O[3]:T,S="number"!=typeof S?O[4]:S,C="number"!=typeof C?O[5]:C,"number"!=typeof i?O:(P._orientation=[i,s,_,T,S,C],void 0!==P.ctx.listener.forwardX?(P.ctx.listener.forwardX.setTargetAtTime(i,Howler.ctx.currentTime,.1),P.ctx.listener.forwardY.setTargetAtTime(s,Howler.ctx.currentTime,.1),P.ctx.listener.forwardZ.setTargetAtTime(_,Howler.ctx.currentTime,.1),P.ctx.listener.upX.setTargetAtTime(T,Howler.ctx.currentTime,.1),P.ctx.listener.upY.setTargetAtTime(S,Howler.ctx.currentTime,.1),P.ctx.listener.upZ.setTargetAtTime(C,Howler.ctx.currentTime,.1)):P.ctx.listener.setOrientation(i,s,_,T,S,C),P)},Howl.prototype.init=(i=Howl.prototype.init,function(s){var _=this;return _._orientation=s.orientation||[1,0,0],_._stereo=s.stereo||null,_._pos=s.pos||null,_._pannerAttr={coneInnerAngle:void 0!==s.coneInnerAngle?s.coneInnerAngle:360,coneOuterAngle:void 0!==s.coneOuterAngle?s.coneOuterAngle:360,coneOuterGain:void 0!==s.coneOuterGain?s.coneOuterGain:0,distanceModel:void 0!==s.distanceModel?s.distanceModel:"inverse",maxDistance:void 0!==s.maxDistance?s.maxDistance:1e4,panningModel:void 0!==s.panningModel?s.panningModel:"HRTF",refDistance:void 0!==s.refDistance?s.refDistance:1,rolloffFactor:void 0!==s.rolloffFactor?s.rolloffFactor:1},_._onstereo=s.onstereo?[{fn:s.onstereo}]:[],_._onpos=s.onpos?[{fn:s.onpos}]:[],_._onorientation=s.onorientation?[{fn:s.onorientation}]:[],i.call(this,s)}),Howl.prototype.stereo=function(i,s){var _=this;if(!_._webAudio)return _;if("loaded"!==_._state)return _._queue.push({event:"stereo",action:function(){_.stereo(i,s)}}),_;var T=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===s){if("number"!=typeof i)return _._stereo;_._stereo=i,_._pos=[i,0,0]}for(var S=_._getSoundIds(s),C=0;C<S.length;C++){var P=_._soundById(S[C]);if(P){if("number"!=typeof i)return P._stereo;P._stereo=i,P._pos=[i,0,0],P._node&&(P._pannerAttr.panningModel="equalpower",P._panner&&P._panner.pan||setupPanner(P,T),"spatial"===T?void 0!==P._panner.positionX?(P._panner.positionX.setValueAtTime(i,Howler.ctx.currentTime),P._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),P._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):P._panner.setPosition(i,0,0):P._panner.pan.setValueAtTime(i,Howler.ctx.currentTime)),_._emit("stereo",P._id)}}return _},Howl.prototype.pos=function(i,s,_,T){var S=this;if(!S._webAudio)return S;if("loaded"!==S._state)return S._queue.push({event:"pos",action:function(){S.pos(i,s,_,T)}}),S;if(s="number"!=typeof s?0:s,_="number"!=typeof _?-.5:_,void 0===T){if("number"!=typeof i)return S._pos;S._pos=[i,s,_]}for(var C=S._getSoundIds(T),P=0;P<C.length;P++){var O=S._soundById(C[P]);if(O){if("number"!=typeof i)return O._pos;O._pos=[i,s,_],O._node&&(O._panner&&!O._panner.pan||setupPanner(O,"spatial"),void 0!==O._panner.positionX?(O._panner.positionX.setValueAtTime(i,Howler.ctx.currentTime),O._panner.positionY.setValueAtTime(s,Howler.ctx.currentTime),O._panner.positionZ.setValueAtTime(_,Howler.ctx.currentTime)):O._panner.setPosition(i,s,_)),S._emit("pos",O._id)}}return S},Howl.prototype.orientation=function(i,s,_,T){var S=this;if(!S._webAudio)return S;if("loaded"!==S._state)return S._queue.push({event:"orientation",action:function(){S.orientation(i,s,_,T)}}),S;if(s="number"!=typeof s?S._orientation[1]:s,_="number"!=typeof _?S._orientation[2]:_,void 0===T){if("number"!=typeof i)return S._orientation;S._orientation=[i,s,_]}for(var C=S._getSoundIds(T),P=0;P<C.length;P++){var O=S._soundById(C[P]);if(O){if("number"!=typeof i)return O._orientation;O._orientation=[i,s,_],O._node&&(O._panner||(O._pos||(O._pos=S._pos||[0,0,-.5]),setupPanner(O,"spatial")),void 0!==O._panner.orientationX?(O._panner.orientationX.setValueAtTime(i,Howler.ctx.currentTime),O._panner.orientationY.setValueAtTime(s,Howler.ctx.currentTime),O._panner.orientationZ.setValueAtTime(_,Howler.ctx.currentTime)):O._panner.setOrientation(i,s,_)),S._emit("orientation",O._id)}}return S},Howl.prototype.pannerAttr=function(){var i,s,_,T=this,S=arguments;if(!T._webAudio)return T;if(0===S.length)return T._pannerAttr;if(1===S.length){if("object"!=typeof S[0])return(_=T._soundById(parseInt(S[0],10)))?_._pannerAttr:T._pannerAttr;i=S[0],void 0===s&&(i.pannerAttr||(i.pannerAttr={coneInnerAngle:i.coneInnerAngle,coneOuterAngle:i.coneOuterAngle,coneOuterGain:i.coneOuterGain,distanceModel:i.distanceModel,maxDistance:i.maxDistance,refDistance:i.refDistance,rolloffFactor:i.rolloffFactor,panningModel:i.panningModel}),T._pannerAttr={coneInnerAngle:void 0!==i.pannerAttr.coneInnerAngle?i.pannerAttr.coneInnerAngle:T._coneInnerAngle,coneOuterAngle:void 0!==i.pannerAttr.coneOuterAngle?i.pannerAttr.coneOuterAngle:T._coneOuterAngle,coneOuterGain:void 0!==i.pannerAttr.coneOuterGain?i.pannerAttr.coneOuterGain:T._coneOuterGain,distanceModel:void 0!==i.pannerAttr.distanceModel?i.pannerAttr.distanceModel:T._distanceModel,maxDistance:void 0!==i.pannerAttr.maxDistance?i.pannerAttr.maxDistance:T._maxDistance,refDistance:void 0!==i.pannerAttr.refDistance?i.pannerAttr.refDistance:T._refDistance,rolloffFactor:void 0!==i.pannerAttr.rolloffFactor?i.pannerAttr.rolloffFactor:T._rolloffFactor,panningModel:void 0!==i.pannerAttr.panningModel?i.pannerAttr.panningModel:T._panningModel})}else 2===S.length&&(i=S[0],s=parseInt(S[1],10));for(var C=T._getSoundIds(s),P=0;P<C.length;P++)if(_=T._soundById(C[P])){var O=_._pannerAttr;O={coneInnerAngle:void 0!==i.coneInnerAngle?i.coneInnerAngle:O.coneInnerAngle,coneOuterAngle:void 0!==i.coneOuterAngle?i.coneOuterAngle:O.coneOuterAngle,coneOuterGain:void 0!==i.coneOuterGain?i.coneOuterGain:O.coneOuterGain,distanceModel:void 0!==i.distanceModel?i.distanceModel:O.distanceModel,maxDistance:void 0!==i.maxDistance?i.maxDistance:O.maxDistance,refDistance:void 0!==i.refDistance?i.refDistance:O.refDistance,rolloffFactor:void 0!==i.rolloffFactor?i.rolloffFactor:O.rolloffFactor,panningModel:void 0!==i.panningModel?i.panningModel:O.panningModel};var M=_._panner;M?(M.coneInnerAngle=O.coneInnerAngle,M.coneOuterAngle=O.coneOuterAngle,M.coneOuterGain=O.coneOuterGain,M.distanceModel=O.distanceModel,M.maxDistance=O.maxDistance,M.refDistance=O.refDistance,M.rolloffFactor=O.rolloffFactor,M.panningModel=O.panningModel):(_._pos||(_._pos=T._pos||[0,0,-.5]),setupPanner(_,"spatial"))}return T},Sound.prototype.init=function(i){return function(){var s=this,_=s._parent;s._orientation=_._orientation,s._stereo=_._stereo,s._pos=_._pos,s._pannerAttr=_._pannerAttr,i.call(this),s._stereo?_.stereo(s._stereo):s._pos&&_.pos(s._pos[0],s._pos[1],s._pos[2],s._id)}}(Sound.prototype.init),Sound.prototype.reset=function(i){return function(){var s=this,_=s._parent;return s._orientation=_._orientation,s._stereo=_._stereo,s._pos=_._pos,s._pannerAttr=_._pannerAttr,s._stereo?_.stereo(s._stereo):s._pos?_.pos(s._pos[0],s._pos[1],s._pos[2],s._id):s._panner&&(s._panner.disconnect(0),s._panner=void 0,_._refreshBuffer(s)),i.call(this)}}(Sound.prototype.reset);var setupPanner=function(i,s){"spatial"===(s=s||"spatial")?(i._panner=Howler.ctx.createPanner(),i._panner.coneInnerAngle=i._pannerAttr.coneInnerAngle,i._panner.coneOuterAngle=i._pannerAttr.coneOuterAngle,i._panner.coneOuterGain=i._pannerAttr.coneOuterGain,i._panner.distanceModel=i._pannerAttr.distanceModel,i._panner.maxDistance=i._pannerAttr.maxDistance,i._panner.refDistance=i._pannerAttr.refDistance,i._panner.rolloffFactor=i._pannerAttr.rolloffFactor,i._panner.panningModel=i._pannerAttr.panningModel,void 0!==i._panner.positionX?(i._panner.positionX.setValueAtTime(i._pos[0],Howler.ctx.currentTime),i._panner.positionY.setValueAtTime(i._pos[1],Howler.ctx.currentTime),i._panner.positionZ.setValueAtTime(i._pos[2],Howler.ctx.currentTime)):i._panner.setPosition(i._pos[0],i._pos[1],i._pos[2]),void 0!==i._panner.orientationX?(i._panner.orientationX.setValueAtTime(i._orientation[0],Howler.ctx.currentTime),i._panner.orientationY.setValueAtTime(i._orientation[1],Howler.ctx.currentTime),i._panner.orientationZ.setValueAtTime(i._orientation[2],Howler.ctx.currentTime)):i._panner.setOrientation(i._orientation[0],i._orientation[1],i._orientation[2])):(i._panner=Howler.ctx.createStereoPanner(),i._panner.pan.setValueAtTime(i._stereo,Howler.ctx.currentTime)),i._panner.connect(i._node),i._paused||i._parent.pause(i._id,!0).play(i._id,!0)}}()}));class Sound$1{constructor(i,s=0,_=!1){this.howler=null,this.tags=[],this.assets=i,this.maxTags=s,this.useHowler=_}load(){this.unload(),this.useHowler?this.howler||(this.howler=new Q.Howl({src:this.assets})):this.addTag()}addTag(){const i=document.createElement("audio");i.setAttribute("preload","auto"),this.assets.forEach((s=>{const _=s.split(".").pop(),T="mp3"===_?"audio/mpeg":`audio/${_}`,S=document.createElement("source");S.setAttribute("src",s),S.setAttribute("type",T),i.appendChild(S)})),document.body.appendChild(i),i.pause&&i.pause(),this.tags.push(i)}unload(){var i;if(this.useHowler)null===(i=this.howler)||void 0===i||i.unload();else for(;this.tags.length;){const i=this.tags.shift();(null==i?void 0:i.parentNode)&&i.parentNode.removeChild(i)}}play(){var i;if(this.useHowler)this.howler||this.load(),null===(i=this.howler)||void 0===i||i.play();else{const i=this.tags.find((i=>i.paused||i.ended));if(!i){if(this.tags.length>=this.maxTags)return;return this.addTag(),void this.play()}const s=i.play();s&&s.catch((()=>{}))}}}(X=Y||(Y={})).Suspended="web-ui-sound-suspended",X.Enabled="web-ui-sound-enabled";let ee,te=0,ne=!1;function whenEnabled(i){!function waitMessage(i,s){window.addEventListener("message",(function listener(_){var T;(null===(T=null==_?void 0:_.data)||void 0===T?void 0:T.key)===i&&(s(),window.removeEventListener("message",listener))}))}(Y.Enabled,i)}function enableSound(){isSuspended()&&resumeAudio((()=>{window.postMessage({key:Y.Enabled},window.location.origin),function removeWindowEvents(i){j&&(j=!1,D.forEach((s=>window.removeEventListener(s,i))))}(enableSound)}))}function loadSound(i,s=5,_=!1){const T=new Sound$1(i,s,_);return isSuspended()?(!function addWindowEvents(i){j||(j=!0,D.forEach((s=>window.addEventListener(s,i))))}(enableSound),whenEnabled((()=>T.load()))):T.load(),T}function playSound(i){isSuspended()?!ne&&te>3?(te=0,ne=!0,window.postMessage({key:Y.Suspended},window.location.origin)):ne||(te++,enableSound(),whenEnabled((()=>i.play()))):i.play()}class Store{constructor(i="keyval-store",s="keyval"){this.storeName=s,this._dbp=new Promise(((_,T)=>{const S=indexedDB.open(i,1);S.onerror=()=>T(S.error),S.onsuccess=()=>_(S.result),S.onupgradeneeded=()=>{S.result.createObjectStore(s)}}))}_withIDBStore(i,s){return this._dbp.then((_=>new Promise(((T,S)=>{const C=_.transaction(this.storeName,i);C.oncomplete=()=>T(),C.onabort=C.onerror=()=>S(C.error),s(C.objectStore(this.storeName))}))))}}function getDefaultStore(){return ee||(ee=new Store),ee}function get(i,s=getDefaultStore()){let _;return s._withIDBStore("readonly",(s=>{_=s.get(i)})).then((()=>_.result))}function set(i,s,_=getDefaultStore()){return _._withIDBStore("readwrite",(_=>{_.put(s,i)}))}var re,ie,ae,se,oe,le;function toSelector(i,s="."){return`${s}${i}`}function noop(){}function run(i){return i()}function blank_object(){return Object.create(null)}function run_all(i){i.forEach(run)}function is_function(i){return"function"==typeof i}function safe_not_equal(i,s){return i!=i?s==s:i!==s||i&&"object"==typeof i||"function"==typeof i}function null_to_empty(i){return null==i?"":i}function append(i,s){i.appendChild(s)}function insert(i,s,_){i.insertBefore(s,_||null)}function detach(i){i.parentNode.removeChild(i)}function destroy_each(i,s){for(let _=0;_<i.length;_+=1)i[_]&&i[_].d(s)}function element(i){return document.createElement(i)}function text(i){return document.createTextNode(i)}function space(){return text(" ")}function empty(){return text("")}function listen(i,s,_,T){return i.addEventListener(s,_,T),()=>i.removeEventListener(s,_,T)}function attr(i,s,_){null==_?i.removeAttribute(s):i.getAttribute(s)!==_&&i.setAttribute(s,_)}function set_data(i,s){s=""+s,i.wholeText!==s&&(i.data=s)}function toggle_class(i,s,_){i.classList[_?"add":"remove"](s)}ie=re||(re={}),(ae=ie.Classes||(ie.Classes={})).Hidden="hidden",ae.Invisible="invisible",oe=se||(se={}),(le=oe.KeyCodes||(oe.KeyCodes={}))[le.Backspace=8]="Backspace",le[le.Delete=46]="Delete",le[le.DownArrow=40]="DownArrow",le[le.Enter=13]="Enter",le[le.Escape=27]="Escape",le[le.LeftArrow=37]="LeftArrow",le[le.RightArrow=39]="RightArrow",le[le.Spacebar=32]="Spacebar",le[le.Stop=137]="Stop",le[le.Tab=9]="Tab",le[le.UpArrow=38]="UpArrow";class HtmlTag{constructor(){this.e=this.n=null}c(i){this.h(i)}m(i,s,_=null){this.e||(this.e=element(s.nodeName),this.t=s,this.c(i)),this.i(_)}h(i){this.e.innerHTML=i,this.n=Array.from(this.e.childNodes)}i(i){for(let s=0;s<this.n.length;s+=1)insert(this.t,this.n[s],i)}p(i){this.d(),this.h(i),this.i(this.a)}d(){this.n.forEach(detach)}}let ce;function set_current_component(i){ce=i}function get_current_component(){if(!ce)throw new Error("Function called outside component initialization");return ce}function onMount(i){get_current_component().$$.on_mount.push(i)}function createEventDispatcher(){const i=get_current_component();return(s,_)=>{const T=i.$$.callbacks[s];if(T){const S=function custom_event(i,s,_=!1){const T=document.createEvent("CustomEvent");return T.initCustomEvent(i,_,!1,s),T}(s,_);T.slice().forEach((s=>{s.call(i,S)}))}}}const ue=[],de=[],he=[],pe=[],me=Promise.resolve();let fe=!1;function add_render_callback(i){he.push(i)}let ge=!1;const ve=new Set;function flush(){if(!ge){ge=!0;do{for(let i=0;i<ue.length;i+=1){const s=ue[i];set_current_component(s),update(s.$$)}for(set_current_component(null),ue.length=0;de.length;)de.pop()();for(let i=0;i<he.length;i+=1){const s=he[i];ve.has(s)||(ve.add(s),s())}he.length=0}while(ue.length);for(;pe.length;)pe.pop()();fe=!1,ge=!1,ve.clear()}}function update(i){if(null!==i.fragment){i.update(),run_all(i.before_update);const s=i.dirty;i.dirty=[-1],i.fragment&&i.fragment.p(i.ctx,s),i.after_update.forEach(add_render_callback)}}const be=new Set;function transition_in(i,s){i&&i.i&&(be.delete(i),i.i(s))}function make_dirty(i,s){-1===i.$$.dirty[0]&&(ue.push(i),function schedule_update(){fe||(fe=!0,me.then(flush))}(),i.$$.dirty.fill(0)),i.$$.dirty[s/31|0]|=1<<s%31}function init(i,s,_,T,S,C,P,O=[-1]){const M=ce;set_current_component(i);const R=i.$$={fragment:null,ctx:null,props:C,update:noop,not_equal:S,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(M?M.$$.context:s.context||[]),callbacks:blank_object(),dirty:O,skip_bound:!1,root:s.target||M.$$.root};P&&P(R.root);let D=!1;if(R.ctx=_?_(i,s.props||{},((s,_,...T)=>{const C=T.length?T[0]:_;return R.ctx&&S(R.ctx[s],R.ctx[s]=C)&&(!R.skip_bound&&R.bound[s]&&R.bound[s](C),D&&make_dirty(i,s)),_})):[],R.update(),D=!0,run_all(R.before_update),R.fragment=!!T&&T(R.ctx),s.target){if(s.hydrate){const i=function children(i){return Array.from(i.childNodes)}(s.target);R.fragment&&R.fragment.l(i),i.forEach(detach)}else R.fragment&&R.fragment.c();s.intro&&transition_in(i.$$.fragment),function mount_component(i,s,_,T){const{fragment:S,on_mount:C,on_destroy:P,after_update:O}=i.$$;S&&S.m(s,_),T||add_render_callback((()=>{const s=C.map(run).filter(is_function);P?P.push(...s):run_all(s),i.$$.on_mount=[]})),O.forEach(add_render_callback)}(i,s.target,s.anchor,s.customElement),flush()}set_current_component(M)}class SvelteComponent{$destroy(){!function destroy_component(i,s){const _=i.$$;null!==_.fragment&&(run_all(_.on_destroy),_.fragment&&_.fragment.d(s),_.on_destroy=_.fragment=null,_.ctx=[])}(this,1),this.$destroy=noop}$on(i,s){const _=this.$$.callbacks[i]||(this.$$.callbacks[i]=[]);return _.push(s),()=>{const i=_.indexOf(s);-1!==i&&_.splice(i,1)}}$set(i){this.$$set&&!function is_empty(i){return 0===Object.keys(i).length}(i)&&(this.$$.skip_bound=!0,this.$$set(i),this.$$.skip_bound=!1)}}function invertObject(i){return Object.keys(i).reduce(((s,_)=>Object.assign(Object.assign({},s),{[i[_]]:_})),{})}function pick(i,s){return s.reduce(((s,_)=>(Object.prototype.hasOwnProperty.call(i,_)&&(s[_]=i[_]),s)),{})}function capitalizeFirstLetter(i){return`${i[0].toUpperCase()}${i.slice(1)}`}},3527:function(i,s,_){_(34155),function(){"use strict";var s=function(){var i=[[2637767806,863464769],[720845184,95069639],[1155203408,610415943],[2618685246,1655139042],[1971536997,1218186377],[848342074,540017087],[263957791,1627660921],[3896152207,4076560586],[226391645,1484086288],[436746274,3467632685],[2516964848,3797861296],[3491888988,3510251221],[1086189917,1248276018],[18044180,1876255637],[1572111136,1190386149],[597658413,2146900428],[97624494,2243205793],[1738507407,1854916977],[1950989311,2149575947],[2098318769,3283594736],[2194108574,2015279052],[4079062812,2500884588],[856979699,2941369318],[1270058469,3877737539],[2858720366,3170717948],[2378012835,1387254795],[2278688587,2178388503],[435406673,3555273441],[3031118064,1655806655],[2063925420,1107589828],[3376753832,436852829],[615148625,1302492416],[1285502018,1963045959],[346460119,1016137793],[2803604355,1176288659],[55085973,2968618255],[1669016372,4287873088],[164740250,1037634196],[896886403,883023163],[1935551383,2764331555],[410153072,4055711755],[533441746,1505690343],[3541084098,3466290517],[3214426080,4267541060],[2675233103,1951705124],[1374411850,3115986997],[1552073989,3684348154],[4244110986,875606593],[844343081,3115990494],[2356462440,135999605],[3116133511,377238503],[2129956651,2197966368],[299173332,3276914047],[1701379241,745972291],[1306570996,254977976],[2530644806,214138461],[1122123979,1667800879],[1831591130,3801192033],[1116211970,920967505],[1594837592,2551651254],[972591349,2046373768],[2479207924,1935030411],[1675376029,2367888248],[3960916618,3935874422],[1398143232,3265801671],[133930885,1520005442],[1351827834,2829577566],[2076951437,2723839804],[435980918,2364847828],[1668970368,3738157273],[2185864314,3993911799],[2041407829,31969768],[346864372,2004703094],[4047877822,3437142421],[3669961416,538399484],[616810829,4190688246],[3144558884,4030272234],[216165387,2513010905],[2761740594,3216997572],[3919406634,4096014649],[669429112,2434161727],[2234904640,3111407601],[1421079802,1598085235],[1924213810,310373675],[4002762044,2067865415],[2592451728,2586110625],[1890340057,4031717877],[4189625662,2577429954],[2276713138,3049850801],[2741429688,3310307512],[2924122950,3426712818],[421576781,1193704381],[2277442246,3030264553],[153237420,595540057],[4278711886,4176286928],[2380848297,4030514510],[2618700582,1303682185],[3018992701,185284845],[957243316,1291916363],[1543415220,1898408169],[504378001,531073412],[2591337657,1692896435],[1333852064,903543556],[1661259930,188168388],[561112646,2197961224],[1536910315,2632972300],[1349168372,2307429186],[411152329,2745631190],[1694697476,1081411140],[3755185459,2631660711],[4019355068,4027326706],[2066937809,3761668332],[3120395808,3878773315],[94890149,2109283191],[3045629038,358812277],[1249184265,3465901047],[3477490924,2308583306],[4114113436,3875911716],[1014604031,1434513279],[3991324799,2222416029],[2040431088,1539915569],[2253613964,4081224332],[2547464012,1611168627],[2722521980,4281500978],[71289574,213969824],[2450408597,903689630],[1894451515,364024012],[1939968537,374938813],[1447259295,3785468557],[4021046128,1664847745],[3139524504,3562928047],[1173487682,4065269608],[2467266804,3907744866],[4284945151,3486998177],[2925674454,1953016432],[3710671816,1271453948],[2129465869,1422863833],[587093076,18243356],[3373793513,2411305257],[2156648078,1791034213],[3737413652,1534461430],[468575139,2935304962],[1129551363,3603256834],[2861996892,1763494778],[2826449619,2465197654],[1704209531,1014895022],[3738359347,3402630390],[569410928,4095796581],[3021312909,2108247612],[2444777957,2664129360],[282063667,3773661258],[682545472,3188439005],[3318488457,1917822038],[1447622272,4045023041],[757420137,4038580915],[2613420942,4146703316],[4012836163,150381244],[2938127093,3428591704],[1208226490,3086335530],[2935205706,1446903363],[430957978,3830532479],[1381578755,3757172800],[4109399782,1596778224],[288855589,1954372339],[3169178148,2256716053],[2644780093,3895892303],[107966643,1071681559],[1304747544,2607225372],[1359190711,1898207171],[3229237120,3273634996],[3027167685,3863637628],[3011615298,2883984519],[564135827,978463264],[770797430,362326607],[1983662611,1907583229],[4153656423,48268960],[3609759233,720080177],[3727911466,1270989899],[200708787,2366086947],[744508026,393422515],[1213261630,65757284],[3485747185,3845951003],[2958861301,1680248217],[2598470344,3163845864],[2767997908,4233451722],[3881113485,1492930166],[1773764017,2764062206],[4189435844,2898689174],[4234838742,1267095035],[2624081078,3302114327],[2395569449,390426320],[1728307101,690284926],[3309827454,1118258254],[2028172868,3888829086],[4271523049,909051386],[146617804,942892565],[2467685867,974297806],[2483428231,503635829],[3743260573,2018222096],[1002067894,2289153437],[3535252974,3738302271],[4154611160,1002664952],[3623154244,2349656961],[3646679180,3524329383],[862933752,4282853607],[2806008282,3272780913],[2734037942,3828874677],[1328176304,2137666995],[2278785213,2780788825],[381286368,1816476193],[2074232908,2316293454],[4087773386,3651330956],[967884669,3728964514],[4239349185,3213509668],[419231360,1463788948],[1275421624,2672384707],[1088456595,436245261],[2365565249,783696577],[1758083333,845223583],[2048846183,3530914274],[2635948261,124738415],[940630937,3069598626],[839474029,1253439921],[902477345,165479306],[2836079689,2681188273],[2007115168,2093139645],[1363041891,1282466609],[1130479818,1063857938],[3644959908,1260430427],[1385135238,46497915],[1386975934,3110156681],[2635987502,4233461619],[1915744629,4117939016],[487743653,285736599],[2049219159,3960249250],[69242857,3908563670],[1511066720,1488527520],[215590039,1703564952],[1459430344,4184955468],[676103291,2642967214],[83799035,3182827979],[1949179493,476101251],[2593534694,1493478716],[2283504289,995211746],[1349412676,3449243940],[2954378677,1878813305],[249149717,3329151870],[1578231917,1483986052],[4135085182,890874990],[461755528,3505523909],[3669622373,634949665],[219487622,2914465301],[2825233742,3703631897],[2479105382,2935590907],[2582097898,3187672881],[1221328648,1843341402],[2140891889,3958868911],[1482849818,345750049],[751922730,3178831411],[3546542069,4036458902],[216179596,877293293],[444615341,3117393729],[2424254530,494454238],[1344234989,3003337991],[929188581,2760877801],[2507911009,1879899982],[980166547,1311840394],[3566535507,1790747461],[143525013,2311336672],[4181962471,4273938872],[1815842366,862009811],[911175674,1179575598],[3591335374,3694215714],[1452686093,3393294272],[385158879,2447709103],[4011414929,1264623507],[1448477120,911094312],[3971299641,2289992053],[3133647265,2234591563],[3007628400,964409938],[1708345684,3673411261],[3031964479,2843021794],[3022128657,2480338599],[118850112,473449293],[2048127371,3202109429],[3158349745,382018770],[1505327237,3807570472],[2568424029,3272693060],[1866609495,3888556537],[844703982,1852802964],[3504617058,682636099],[1448882679,3733580327],[821387540,2215744532],[3631471417,311618895],[2077838877,2383929020],[3352949096,1688694420],[2491080787,3998672444],[3368630402,4182204255],[983299419,2837414346],[3651215291,1033373924],[265429091,3988955082],[3019003608,2896212153],[2955948456,3025235588],[903690197,2266253487],[3925215275,89402958],[3959093811,3609545561],[2455088053,223552128],[3115011301,2133669107],[1765081558,673805649],[3324795129,2111392191],[3443871631,432345706],[3152559950,3425427147],[3699649406,672784944],[3129545774,7668664],[2747044893,173040075],[3925243406,852328481],[164095314,3161868591],[2234471571,1302682825],[2164784335,105893718],[159995093,536831360],[599199451,425051327],[3274759746,1680930461],[1192619331,3903085578],[2832721114,3078660237],[91404660,4030521531],[3044880024,1578375623],[3906596030,754177855],[803516785,1894094672],[288455592,2030430096],[2143232492,2317305324],[388352703,3406060288],[2521731420,3588403719],[1043041227,4028028525],[3195290851,2468913324],[4166724431,3168683191],[1228226538,968516529],[500177583,3444787306],[533367442,4252082053],[4236023256,657816314],[413575568,3367198397],[3435884549,3334062733],[1004255532,1135705894],[2859513268,4170618274],[3914086821,1251487871],[3080761716,3489067886],[3571165255,699353261],[773372954,3648014952],[769693293,2939128604],[3116440923,507748478],[1687629160,3739431776],[2489486648,3502376324],[3686847158,2878383449],[3530767427,902211375],[2121652637,2493976397],[1827477891,930064171],[2549918411,4029725732],[2071415163,844118802],[2236083679,3088894868],[2040110303,4144562891],[3489536313,1133419300],[2190878435,2301466071],[2465915458,2448602097],[1675766804,2073834499],[3329799896,1613253148],[1483966600,1348836071],[159505618,2527621997],[2674227354,1695130688],[2683539437,1927873839],[3833196123,2570082188],[3891433165,759819981],[1455453349,2179602430],[1430583255,1957776111],[2067726741,4235143439],[303380021,2998980439],[2136024795,3126725799],[2054591852,1051702291],[1029141665,489794361],[2317027384,569642164],[2068461795,624418658],[2499875684,1830645251],[1302894490,4319401],[1002663431,2406815191],[1560941298,2060652753],[2141002286,515773223],[3661248027,475092913],[3705503008,2419919909],[914567990,3496539911],[3462935583,2039034761],[2878378006,2379243316],[1133857586,1390159333],[3023618742,2140726761],[282908558,944874642],[3686955701,1148723903],[2604456805,4163675010],[3061545110,377179268],[3218002352,76459088],[2836503392,916455101],[536836808,151306053],[2886925079,404221671],[2936593041,2011015485],[453815187,1852163908],[3042568989,82176306],[3279635891,4174836410],[3282689058,2360003049],[4088968807,1516570623],[2680453086,1322680794],[1731693966,3438253771],[1842894553,1294307894],[2736377365,2964642609],[121205621,521330014],[2324595870,3005710757],[3784465521,676493813],[1958759409,2030833406],[1306150933,1016370058],[2636541290,482366508],[1950415745,1695073534],[322077955,3746046623],[3602873262,3829181504],[1211684447,1861645455],[504701736,4080111082],[2407799203,1223857855],[1925743434,1498920209],[3617596327,845198428],[2498480299,3484773806],[2680229135,2560201696],[3731399221,1536412390],[2756509305,2924710846],[2635957500,3459716133],[1372762539,769635894],[802677945,3878474636],[1707760534,3075809808],[3714687192,2872792173],[1615679922,1606381794],[1940556374,1337437342],[445390489,731124040],[2864974375,64601760],[1984806574,2141516710],[513390958,1890172555],[744398315,1475299139],[982749166,852662657],[652663695,4260736510],[1184061125,82616221],[3363191899,147951756],[1064069880,1507328085],[2138882964,547595589],[2616926846,3186935246],[2298715513,3606862940],[2414381911,811477686],[2694745228,900437726],[4202576185,2201114451],[3602305260,3323446937],[3756663274,2658490339],[3061587876,2171079416],[3390977925,2850497765],[486312941,224925241],[3515712841,3510684394],[1322319486,2647200565],[3839619171,1148450258],[392296762,1154854654],[1401523788,957405781],[1934485528,527352730],[645968162,3131215255],[696971825,3361451947],[2038689491,1946699733],[1723966113,2785859721],[2652365974,1118037185],[3988018407,3134982149],[1354171594,3053634345],[1287854075,2631782435],[1723106141,2662328866],[563845090,1878819261],[639520332,171129501],[534957223,1696062352],[3612364282,2283204027],[3109494688,1304463816],[500957989,630925278],[3477030536,2149497258],[4109750364,281719363],[951472732,564407054],[922095147,2767874048],[3946156928,829677774],[2622281253,2086286851],[2936811901,850242186],[630086272,3340782667],[2340986210,1296336989],[4107355543,3865114709],[3560210278,3968418243],[3868847493,2967450637],[611513888,2083325060],[3265390517,3025776309],[2874106961,3424470508],[1668707698,2923258228],[2778598353,24320552],[292356118,3415510793],[754567370,86994591],[185141877,1621715171],[2884558258,3722473457],[1492107531,111281805],[3336927864,4225337056],[782994598,1021838039],[346133860,18281270],[2080909533,1649329040],[3612065399,3859901127],[2151962287,284556115],[3957975594,3745718727],[52533817,3998775856],[1232633839,397383972],[2716413964,3629253960],[1531307298,3836851439],[3030137657,2500401718],[3561556693,653345841],[313061910,2945718466],[2065276,3342140708],[410498334,1470588117],[2726640512,4051654894],[2570984935,758567696],[3008987264,3462702678],[623860175,228525243],[3527183895,1829844480],[467272850,3890501742],[568376656,650516927],[990477018,4035508558],[2366955227,817792110],[4183621538,989198068],[946958343,1639184195],[3395758993,3924097558],[1690887473,3220519765],[605184237,1255270525],[275515833,1926424610],[2142902612,283494960],[2021972412,1823828440],[105373677,3448326697],[1666662384,1042433908],[1338566998,261206307],[498685668,1344755577],[3101233780,3119109371],[2733370951,3808165089],[3656512268,3449289481],[4025308119,1607880299],[778896067,1612183167],[2846510368,3674754715],[3058428120,2991822529],[1892379383,3268787440],[2565895844,4154602030],[3213117192,98999135],[2495816991,116985075],[1040203361,1785041385],[3106252493,69316595],[1639829808,2087117568],[3213709576,3799911752],[604681594,2340981536],[4236730699,2938666503],[4009938384,1878897714],[2701667332,1725918218],[2182473079,1258184],[3550198211,2760750799],[657991062,875584532],[1640976276,3380476221],[460041378,2924352091],[1972323596,2287414795],[2510248061,1350206297],[2959337826,3762681165],[1625877874,3235902929],[2070189957,1429368735],[4245163299,1839731898],[2358312347,138364248],[275739390,2179122576],[2037777210,972544338],[2766930226,1984733259],[1933485829,4209310327],[3034118011,3286589799],[2653025529,62078937],[2641780289,2679545709],[3540781195,2787026415],[1569993599,3215949659],[441337890,3947723353],[1878946792,459505587],[3724105660,920173002],[1691411102,3934795955],[148741087,3647709027],[142506469,2776440083],[3811107376,3823285243],[472209891,252266174],[1913386482,1867329194],[2960608550,482740699],[1145005292,1513558421],[1091751784,1687823886],[3625186042,3086337482],[1712140887,940065262],[1504455800,1945702563],[3896940088,2003245591],[2478191531,4197739e3],[3233871270,250924495],[3404865229,1131917964],[1462204167,429621621],[1349259705,3641608989],[3627860584,2048468319],[1244251718,1513180369],[3979211282,371413143],[3043187861,4285699810],[581894202,3060983825],[1390895705,1811317301],[2599134010,3337406128],[2488233440,2436161462],[1816641224,2208816697],[1792034756,815866116],[2779893723,2695577703],[2084952115,2951772258],[1351806869,169269771],[2469979804,86740603],[1163545420,4264616949],[1795352113,2511146232],[1796715044,3134635815],[3521170642,1538900329],[3725363621,1455009392],[1342594643,1512127734],[2618386938,662157428],[2028859350,2494504685],[1841905045,648351336],[4002935891,4033319405],[850071259,1768358867],[979915719,3876018087],[830889197,1629549437],[1744763229,2455795856],[522919199,368499868],[3063822504,2522639205],[2861636095,407686388],[4097602344,1945259027],[4215946617,1251639506],[894485042,534122652],[924809191,1807237502],[1811585710,1589663609],[3439653887,1722232],[3810997538,105152714],[2677100683,4291805514],[77233985,102407776],[4239834691,2851274395],[148802076,2006440603],[2409138150,126301601],[3048474397,3217504870],[588133437,4221603123],[1139638106,263087485],[982032635,3165674595],[562514827,1294842959],[467575086,905357513],[1405117894,3370530088],[3813285157,242912619],[3601878331,1985076606],[1586505598,2092146221],[738488098,103663229],[2970334297,321718822],[1068097019,1742926233],[235518094,420804527],[283685722,4092504887],[2666392744,3799169331],[3569817788,1256762975],[2169728352,292617248],[2444571896,2239859206],[3967907832,1066404216],[420376911,2913277294],[3046293305,2956347747],[2311278792,2477686209],[2885955184,4172514290],[3030078181,2275536480],[4212469731,4280736393],[1046900335,1773022229],[995380926,1414273529],[3892683234,2429494358],[615726237,2127712535],[3880203074,2071130305],[176180504,3070850165],[1474506861,2283723599],[1256707747,1857412043],[764236850,359687368],[3521530334,511649419],[2318567964,3992868140],[128167623,2518992858],[2220129756,1042300052],[2567608573,1349636707],[441446694,384760969],[4143447316,829506048],[817912603,2738025500],[2368091832,357934982],[1187643061,1561463042],[3438021235,3030161697],[1318922279,895468690],[434876457,1130220303],[1180291767,1132759596],[2520707785,1798553137],[1962430872,2958700157],[1510954061,3534879512],[57831539,3269538993],[3354831405,3852135009],[891783098,2698494511],[2555636406,996018997],[2881342935,3982231648],[3473267445,2894952368],[1238029452,3958679326],[2051805420,559465638],[3655936674,1186951582],[330209165,167662935],[1929681327,2450868735],[1313566811,2458925988],[4283920930,3243182650],[1438004300,4185567150],[3093439067,89876832],[3401620219,3721579956],[3673745794,2682874719],[3053321309,825410712],[822915968,3681514755],[3900685126,561657358],[553823814,1857753416],[4166295066,983949325],[128359165,3426887194],[3300989119,3884968622],[4193552686,3647722552],[452189154,1569670618],[4122259632,3537825460],[2519387887,2821594244],[74333898,2940550377],[4032631446,2173999692],[2521268686,1934310532],[2620314688,2177785789],[1378755571,2455646622],[394133753,4231198609],[734399075,2800989170],[573292462,1634883078],[1214417373,3426576256],[2110224475,2399009920],[2331215665,3224086912],[531326186,698539511],[3839443603,583861850],[2644531398,2017784332],[616620850,3070237104],[590349237,2798642861],[3582377217,3317831670],[1582708616,1596570667],[2126148205,2358511947],[173450736,3219362418],[3616831144,1323437318],[2655785577,3131359031],[401600069,2967397952],[496349349,4244179910],[2479612086,2579650653],[1710903074,2049666425],[3589924952,690291925],[3266682943,1900485231],[1496318498,3025542656],[3459221058,3389461212],[2091479615,3140389256],[663040899,1207089672],[3323704225,1105530508],[353318429,2879253542],[2674540957,941987316],[1688550857,620657353],[338551967,4286217277],[204689992,2239736295],[178008789,3940832005],[3871613304,3300636974],[1911672356,2429684487],[4055679954,1974461722],[3878217928,1009991796],[2533095482,310920740],[2174833823,3596041637],[1604814460,2939543881],[1452830254,4092397851],[2441027029,4169690209],[3524103304,3372213855]],s=[[836181454,1689436944],[2776523577,3710710688],[4049974663,3750330768],[519497435,2979405513]],_=[[1892447193,197291556],[3793382197,3742120663],[3838936,2994760034],[479846099,1018728609],[3476112862,182272649],[3504620154,1427438450],[2009473484,2679350403],[1738755500,1129731339]],T=[4174784170,2938602761],S={p:0,P:1,n:2,N:3,b:4,B:5,r:6,R:7,q:8,Q:9,k:10,K:11},C=[];C[5]=1,C[6]=0,C[9]=3,C[10]=2,C[17]=5,C[18]=4,C[33]=7,C[34]=6,C[65]=9,C[66]=8,C[129]=11,C[130]=10;var P,O=[2,5,10,20,40,80,160,64],M=["","0000000","000000","00000","0000","000","00","0",""];function to32BitHex(i){var s=i.toString(16);return M[s.length]+s}function to64BitHex(i){return to32BitHex(i[0])+to32BitHex(i[1])}function hash(C,P){var M,R,D,j,$,U,V,Z,Y,X,Q,ee,te=C.split(" "),ne=te[0].split("/"),re="w"===te[1],ie=0,ae=Number(re),se=ae?3:4;for(D=7;D>=0;D-=1)for(j=0,V=($=ne[D]).length,U=0;U<V;U+=1)Z=$[U],(Q=S[Z])>=0&&(M=(M^(Y=i[64*Q+8*(7-D)+j])[0])>>>0,R=(R^Y[1])>>>0,Q===ae&&D===se&&(ie|=1<<j)),j+=Number(Z)||1;return"-"!==te[2]&&((X=te[2]).indexOf("K")>-1&&(M=(M^(Y=s[0])[0])>>>0,R=(R^Y[1])>>>0),X.indexOf("Q")>-1&&(M=(M^(Y=s[2])[0])>>>0,R=(R^Y[1])>>>0),X.indexOf("k")>-1&&(M=(M^(Y=s[1])[0])>>>0,R=(R^Y[1])>>>0),X.indexOf("q")>-1&&(M=(M^(Y=s[3])[0])>>>0,R=(R^Y[1])>>>0)),te[3]&&"-"!==te[3]&&(ee=te[3].charCodeAt(0)-97,O[ee]&ie&&(M=(M^(Y=_[ee])[0])>>>0,R=(R^Y[1])>>>0)),re&&(M=(M^T[0])>>>0,R=(R^T[1])>>>0),P&&"hex"===P?to64BitHex([M,R]):[M,R]}function wrap(i){var s,_,T,S,C={};function parseBook(i,s){var T,S,C,P,O,M,R=_.getUint16(i+8),D=_.getUint16(i+10);return S=R>>9&7,P=R>>3&7,O=7&R,M=R>>12&7,4===(C=R>>6&7)&&s&&S===P&&"-"!==s&&(7===O&&(0===S&&s.indexOf("K")>-1||7===S&&s.indexOf("k")>-1)?O-=1:0===O&&(0===S&&s.indexOf("Q")>-1||7===S&&s.indexOf("q")>-1)&&(O+=2)),T=String.fromCharCode(C+97)+(S+1)+String.fromCharCode(O+97)+(P+1),M&&(T+="nbrq"[M-1]),{move:T,weight:D}}function query(i){return"string"==typeof i&&(i={fen:i}),s(i)}if(C={query:query,pick:function pick(i){var s,_,T,S,C,P=0;if(function sortMoves(i){i.sort((function sorter(i,s){return s.weight-i.weight}))}(s=(i=i||{}).moves||query(i)),T=s.length){if(i.type&&1!==T&&"best"!==i.type){if("random"===i.type){for(S=Math.floor(Math.random()*s.sum)+1,C=0;C<T-1&&!(S<=(P+=s[C].weight));C+=1);return s[C].move}return"randomDisregardWeight"===i.type?s[Math.floor(Math.random()*T)].move:"worst"===i.type?s[T-1].move:((_=parseInt(i.type)||1)<0&&(_=T+_+1),_<1?_=1:_>T&&(_=T),s[_-1].move)}return s[0].move}}},i.getUint32)s=function bufferBookFind(i){var s,T,S,C,P,O=_.length||_.byteLength||0,M=i.offset||0,R=i.fen,D=i.chess960,j=i.checkAll,$=[],U=0;for(i.hash?"string"==typeof(s=i.hash)&&(s=function hex64ToDec(i){return[parseInt(i.substr(0,8),16),parseInt(i.substr(8),16)]}(s)):s=hash(R),!D&&R&&(P=R.split(" ")[2]),M=0;M<O;M+=16)if(_.getUint32(M)===s[0]&&_.getUint32(M+4)===s[1])S=parseBook(M,P),$[$.length]=S,U+=S.weight,T=!0;else if(T&&!j)break;if($.sum=U,i.relative)for(C=$.length-1;C>=0;C-=1)$[C].relative=Math.round($[C].weight/U*1e4);return $},_=i,C.buffer=_;else for(S in s=function jsonBookFind(i){var s,_,S,P,O,M,R=0,D=i.fen;if(C.useFen)S=D.replace(/ \d+ \d+$/,""),(s=T[S])||(P=S.replace(/[a-h][1-8]$/,"-"))!==S&&(s=T[P]);else if(i.hash||(i.hash=hash(D,"hex")),s=T[i.hash]){if(s[0]&&s[0].n&&(s=s[0]),s.n&&!s.b)return[];if(s.b)s=function decompressMoves(i){var s,_=[],T=i.b.length;for(s=0;s<T;++s)_.push({move:i.b[s],weight:i.w[s]});return _}(s);else if(!i.chess960&&D)for(M=D.split(" ")[2],_=s.length-1;_>=0;_-=1)(O=s[_].move.match(/e([18])([ah])\1/))&&("h"===O[2]&&("1"===O[1]&&M.indexOf("K")>-1||"8"===O[1]&&M.indexOf("k")>-1)?s[_]={move:"e"+O[1]+"g"+O[1],weight:s[_].weight}:"a"===O[2]&&("1"===O[1]&&M.indexOf("Q")>-1||"8"===O[1]&&M.indexOf("q")>-1)&&(s[_]={move:"e"+O[1]+"c"+O[1],weight:s[_].weight}))}if(s)for(_=s.length-1;_>=0;_-=1)R+=Number(s[_].weight);else s=[];return s.sum=R,s},T=i,C.json=T,T){C.useFen=S.indexOf(" ")>-1;break}return C}function getBook(i,s){!function ajaxLoad(i,s){var _=new XMLHttpRequest,T=i.toLowerCase().indexOf(".json")>-1;function onload(){var i;if(_.status>=200&&_.status<300||304===_.status||0===_.status||1223===_.status)if(T)try{s(null,JSON.parse(_.response))}catch(S){s(S)}else i=new DataView(_.response),s(null,i);else s(new Error("Error code: "+_.status))}_.open("GET",i,!0),T||(_.responseType="arraybuffer"),_.onload=onload,_.onerror=onload,_.send()}(i,(function onload(i,_){var T;if(_&&(T=wrap(_)),s)return s(i,T);if(i)throw i;return T}))}return{hash:hash,loadBook:(P={},function loadBook(i,s){P[i]?P[i].book?setTimeout((function(){s(null,P[i].book)}),0):P[i].cbs.push(s):(P[i]={cbs:[s]},getBook(i,(function onload(s,_){var T=P[i].cbs;s?delete P[i]:(P[i].book=_,P[i].cbs=void 0),T.forEach((function(i){setTimeout((function(){i(s,_)}),0)}))})))}),to64BitHex:to64BitHex,zobristPiece:i,zobristCastle:s,zobristEnPassant:_,zobristTurn:T,zobristPieceValue:S,zobristPieceValueNumbers:C}}(),_=function init(){var i,_,T,S,C={Chess:0,Chess960:1,Crazyhouse:2,"3-check":3,"King of the Hill":4,Bughouse:5,chess960:1,fischerandom:1,fischerrandom:1,fischer:1,chess9lx:1,960:1,crazyhouse:2,"three-check":3,threecheck:3,"3check":3,kingofthehill:4,koth:4,bughouse:5},P=["Chess","Chess960","Crazyhouse","3-check","King of the Hill","Bughouse"],O={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],R=0,D=0,j=0,$=-1,U=32,V=128,Z=252,Y=255,X=512,Q=112,ee=14,te=21,ne=127,re="pnbrqkPNBRQK",ie="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",ae=[];ae[5]=[-16,-17,-15],ae[6]=[16,17,15],ae[8]=[-18,-33,-31,-14,18,33,31,14],ae[16]=[-17,-15,17,15],ae[32]=[-16,1,16,-1],ae[64]=[-17,-16,-15,1,17,16,15,-1],ae[128]=[-17,-16,-15,1,17,16,15,-1];var se={P:5,p:6,N:9,n:10,B:17,b:18,R:33,r:34,Q:65,q:66,K:129,k:130},oe={P:4,p:4,N:8,n:8,B:16,b:16,R:32,r:32,Q:64,q:64,K:128,k:128},le={5:"P",6:"p",9:"N",10:"n",17:"B",18:"b",33:"R",34:"r",65:"Q",66:"q",129:"K",130:"k"},ce={9:"N",10:"N",17:"B",18:"B",33:"R",34:"R",65:"Q",66:"Q",129:"K",130:"K"},ue=[80,0,0,0,0,0,0,96,0,0,0,0,0,0,80,0,0,80,0,0,0,0,0,96,0,0,0,0,0,80,0,0,0,0,80,0,0,0,0,96,0,0,0,0,80,0,0,0,0,0,0,80,0,0,0,96,0,0,0,80,0,0,0,0,0,0,0,0,80,0,0,96,0,0,80,0,0,0,0,0,0,0,0,0,0,80,8,96,8,80,0,0,0,0,0,0,0,0,0,0,0,8,212,224,212,8,0,0,0,0,0,0,96,96,96,96,96,96,224,0,224,96,96,96,96,96,96,0,0,0,0,0,0,8,212,224,212,8,0,0,0,0,0,0,0,0,0,0,0,80,8,96,8,80,0,0,0,0,0,0,0,0,0,0,80,0,0,96,0,0,80,0,0,0,0,0,0,0,0,80,0,0,0,96,0,0,0,80,0,0,0,0,0,0,80,0,0,0,0,96,0,0,0,0,80,0,0,0,0,80,0,0,0,0,0,96,0,0,0,0,0,80,0,0,80,0,0,0,0,0,0,96,0,0,0,0,0,0,80],de=[336,80,80,0,0,0,96,352,96,0,0,0,80,80,336,0,80,336,80,80,0,0,96,352,96,0,0,80,80,336,80,0,80,80,336,80,80,0,96,352,96,0,80,80,336,80,80,0,0,80,80,336,80,80,96,352,96,80,80,336,80,80,0,0,0,0,80,80,336,88,120,360,120,88,336,80,80,0,0,0,0,0,0,80,88,476,252,508,252,476,88,80,0,0,0,0,96,96,96,96,120,252,252,252,252,252,120,96,96,96,96,0,352,352,352,352,360,508,252,0,252,508,360,352,352,352,352,0,96,96,96,96,120,252,252,252,252,252,120,96,96,96,96,0,0,0,0,80,88,476,252,508,252,476,88,80,0,0,0,0,0,0,80,80,336,88,120,360,120,88,336,80,80,0,0,0,0,80,80,336,80,80,96,352,96,80,80,336,80,80,0,0,80,80,336,80,80,0,96,352,96,0,80,80,336,80,80,0,80,336,80,80,0,0,96,352,96,0,0,80,80,336,80,0,336,80,80,0,0,0,96,352,96,0,0,0,80,80,336],he=[336,80,80,0,0,0,96,352,96,96,0,0,80,80,336,0,80,336,80,80,0,0,96,352,96,96,0,80,80,336,80,0,80,80,336,80,80,0,96,352,96,96,80,80,336,80,80,0,0,80,80,336,80,80,96,352,96,112,80,336,80,80,0,0,0,0,80,80,336,88,120,360,120,120,336,80,80,0,0,0,0,0,0,80,88,476,252,508,252,508,88,80,0,0,0,0,96,96,96,96,120,252,252,252,252,252,252,104,96,96,96,0,352,352,352,352,360,508,252,0,252,508,488,352,352,352,352,0,96,96,96,96,120,252,252,252,252,252,252,104,96,96,96,0,0,0,0,80,88,476,252,508,252,508,88,80,0,0,0,0,0,0,80,80,336,88,120,360,120,120,336,80,80,0,0,0,0,80,80,336,80,80,96,352,96,112,80,336,80,80,0,0,80,80,336,80,80,0,96,352,96,96,80,80,336,80,80,0,80,336,80,80,0,0,96,352,96,96,0,80,80,336,80,0,336,80,80,0,0,0,96,352,96,96,0,0,80,80,336],pe=[336,80,80,0,0,96,96,352,96,0,0,0,80,80,336,0,80,336,80,80,0,96,96,352,96,0,0,80,80,336,80,0,80,80,336,80,80,96,96,352,96,0,80,80,336,80,80,0,0,80,80,336,80,112,96,352,96,80,80,336,80,80,0,0,0,0,80,80,336,120,120,360,120,88,336,80,80,0,0,0,0,0,0,80,88,508,252,508,252,476,88,80,0,0,0,0,96,96,96,104,252,252,252,252,252,252,120,96,96,96,96,0,352,352,352,352,488,508,252,0,252,508,360,352,352,352,352,0,96,96,96,104,252,252,252,252,252,252,120,96,96,96,96,0,0,0,0,80,88,508,252,508,252,476,88,80,0,0,0,0,0,0,80,80,336,120,120,360,120,88,336,80,80,0,0,0,0,80,80,336,80,112,96,352,96,80,80,336,80,80,0,0,80,80,336,80,80,96,96,352,96,0,80,80,336,80,80,0,80,336,80,80,0,96,96,352,96,0,0,80,80,336,80,0,336,80,80,0,0,96,96,352,96,0,0,0,80,80,336],me=[336,80,80,0,0,96,96,352,96,96,0,0,80,80,336,0,80,336,80,80,0,96,96,352,96,96,0,80,80,336,80,0,80,80,336,80,80,96,96,352,96,96,80,80,336,80,80,0,0,80,80,336,80,112,96,352,96,112,80,336,80,80,0,0,0,0,80,80,336,120,120,360,120,120,336,80,80,0,0,0,0,0,0,80,88,508,252,508,252,508,88,80,0,0,0,0,96,96,96,104,252,252,252,252,252,252,252,104,96,96,96,0,352,352,352,352,488,508,252,0,252,508,488,352,352,352,352,0,96,96,96,104,252,252,252,252,252,252,252,104,96,96,96,0,0,0,0,80,88,508,252,508,252,508,88,80,0,0,0,0,0,0,80,80,336,120,120,360,120,120,336,80,80,0,0,0,0,80,80,336,80,112,96,352,96,112,80,336,80,80,0,0,80,80,336,80,80,96,96,352,96,96,80,80,336,80,80,0,80,336,80,80,0,96,96,352,96,96,0,80,80,336,80,0,336,80,80,0,0,96,96,352,96,96,0,0,80,80,336],fe=[336,80,80,112,112,112,96,352,96,96,112,112,112,80,336,0,80,336,80,112,112,112,112,352,96,112,112,112,112,336,80,0,80,80,336,112,112,112,112,368,112,112,112,112,368,80,80,0,80,80,80,368,112,112,112,368,112,112,112,368,112,80,80,0,80,80,80,112,368,120,120,376,120,120,368,112,112,80,80,0,0,80,88,120,120,508,252,508,252,508,120,120,120,88,80,0,96,104,252,252,252,252,252,252,252,252,252,252,252,252,104,0,352,352,480,480,488,508,252,0,252,508,488,480,480,480,352,0,96,104,252,252,252,252,252,252,252,252,252,252,252,252,104,0,0,80,88,120,120,508,252,508,252,508,120,120,120,88,80,0,80,80,80,112,368,120,120,376,120,120,368,112,112,80,80,0,80,80,80,368,112,112,112,368,112,112,112,368,112,80,80,0,80,80,336,112,112,112,112,368,112,112,112,112,368,80,80,0,80,336,80,112,112,112,112,352,96,112,112,112,112,336,80,0,336,80,80,112,112,112,96,352,96,96,112,112,112,80,336],ge=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,33,16,31,15,0,0,0,0,0,0,0,0,0,0,0,18,17,16,15,14,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,-14,-15,-16,-17,-18,0,0,0,0,0,0,0,0,0,0,0,-15,-31,-16,-33,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],ve=[0,5,8,11,14],be=[31,7,7,7,63],ye={P:0,p:0,N:5,n:5,B:8,b:8,R:11,r:11,Q:14,q:14},_e=[4,8,16,U,64],we=["","N","B","R","Q"],ke={CAPTURE:1,BIG_PAWN:2,EP_CAPTURE:4,ANY_CAPTURE:5,PROMOTION:8,KSIDE_CASTLE:16,QSIDE_CASTLE:32,KQSIDE_CASTLE:48,DROP:64,DROP_OR_PROMOTE:72},Te=[0,6,1],Se={K:119,Q:112,k:7,q:0,A:112,B:113,C:114,D:115,E:116,F:117,G:118,H:119,a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7},Ce=["Event","Site","Date","Round","White","Black","Result"],xe=["Event","Site","Date","Round","White","Black","Result","Variant","SetUp","FEN","WhiteA","WhiteB","BlackA","BlackB"];function rank(i){return i>>4}function file(i){return 7&i}function algebraic(i){return String.fromCharCode(file(i)+97)+(8-rank(i))}function swapColor(i){return 3-i}function hashNum(i,s){i[0]=(i[0]^s[0])>>>0,i[1]=(i[1]^s[1])>>>0}function completeFen(i){var s,_;return(s=[""," w - - 0 1"," - - 0 1"," - 0 1"," 0 1"," 1"][(_=(i=i.trim()).split(" ")).length])&&i?i+=s:"0"===_[5]&&(_[5]=1,i=_.join(" ")),i}function createVariantZobristNumbers(){s.zobristCheck=[[441249556,340005552],[1040760204,311043682],[1621584863,1749286446],[1006868636,1625552915],[1953853171,24921145],[161251506,1935545265]]}function validateFen(i,s){var _,T,S,P,O,M,R,D,j,$,U,V,Z,Y,X,Q,ee,te,ne,ie,ae=/^(?:[A-H]{1,2}[a-h]{0,2}|[A-H]{0,2}[a-h]{1,2}|KQ?k?q?|Qk?q?|kq?|q|-)$/,se=C[s]||1*s||C[String(s).replace(/\s/g,"").toLowerCase()],oe=se===C.Crazyhouse||se===C.Bughouse,le=0,ce=0,ue=!0,de="",he={0:0,7:0},pe={0:0,7:0},me={0:"k",7:"K"},fe={0:"r",7:"R"},ge=se===C.Chess960;if(!i)return 1;if(se===C.Bughouse&&2===(O=i.split(" | ")).length)return 0===(M=validateFen(O[0],s))&&(M=validateFen(O[1],s)),M;if(O=i.split(/\s+/),se===C["3-check"]&&7===O.length&&(P=O.pop(),!/^\+[0-3]\+[0-3]$/.test(P)||"+3+3"===P))return 14;if(6!==O.length)return 1;if(/\D|.{7,}|^0|^$/.test(O[5]))return 2;if(/\D|.{7,}|^0.|^$/.test(O[4]))return 3;if(!/^(?:-|[abcdefgh][36])$/.test(O[3]))return 4;if($=O[2],ge){if(!ae.test($))return 12}else if(!/^(?:KQ?k?q?|Qk?q?|kq?|q|-)$/.test($)){if(void 0!==s||!ae.test($))return 5;ge=!0}if("w"!==O[1]&&"b"!==O[1])return 6;if(oe&&(O[0]=O[0].replace(/~(?=.*\/)/g,"")),T=O[0].split("/"),oe&&9===T.length&&(P=T.pop(),!/^[pnbrq]{0,63}$/i.test(P)))return 13;if(8!==T.length)return 7;if("3"===O[3][1]&&"w"===O[1]||"6"===O[3][1]&&"b"===O[1])return 11;for("-"!==O[3]&&(R=4===(ce="3"===O[3][1]?4:3)?5:2,le=O[3].charCodeAt(0)-97,ue=!1,de=4===ce?"P":"p"),_=0;_<T.length;++_){for(te=0,ne=!1,ie=0;ie<T[_].length;ie++)if(+(S=T[_][ie])==+S){if(ne)return 8;te+=1*S,ne=!0}else{if(-1===re.indexOf(S))return 9;if(ue||ce!==_||le!==te||de!==S||(ue=!0),R===_&&le===te)return 11;_%7==0&&(S===me[_]?pe[_]=1<<te:S===fe[_]&&(he[_]|=1<<te)),++te,ne=!1}if(8!==te)return 10}if(!ue)return 11;if("-"!==$)if(ge)for(V={0:0,1:0,2:252,4:248,8:240,16:224,32:192,64:128,128:0},U={0:0,1:0,2:1,4:3,8:7,16:15,32:31,64:63,128:0},ee={0:[0,0],7:[0,0]},_=$.length-1;_>=0;--_){if(X=$.charCodeAt(_),Q&&Q>X&&Q-X<8)return 15;if(75===X?Z=he[Y=7]&V[pe[Y]]:81===X?Z=he[Y=7]&U[pe[Y]]:107===X?Z=he[Y=0]&V[pe[Y]]:113===X?Z=he[Y=0]&U[pe[Y]]:(Z=1<<X-((Y=X>=97?0:7)?65:97),Q=X),!Z||0!=(Z&Z-1))return 15;if(pe[Y]<2||pe[Y]>64||(Z&he[Y])!==Z)return 15;if(++ee[Y][1*(pe[Y]<Z)]>1)return 15}else{if((D=($.indexOf("K")>-1?128:0)|($.indexOf("Q")>-1?1:0))&&(16!==pe[7]||(D&he[7])!==D))return 15;if((j=($.indexOf("k")>-1?128:0)|($.indexOf("q")>-1?1:0))&&(16!==pe[0]||(j&he[0])!==j))return 15}return 0}function handToString(i,s){var _,T,S="",C=0,P=s?6:0;if(i)for(;C<5;){for(_=i>>ve[C]&be[C],T=0;T<_;++T)S+=re[C+P];++C}return S}function hashEP(i,_,T,S){i[T+1]!==S&&i[T-1]!==S||hashNum(_,s.zobristEnPassant[file(T)])}function addPawnMove(i,s,T,S){var C;(0===_||2&i[T+8])&&(rank(T)%7==0?(C=S|ke.PROMOTION|s<<7|T<<ee,M[D++]=8388608|C,M[D++]=6291456|C,M[D++]=4194304|C,M[D++]=2097152|C):M[D++]=S|s<<7|T<<ee)}function kingOfTheHillWin(i){switch(i){case 67:case 68:case 51:case 52:return!0}return!1}function canCastle960(i,s,_,T){var S,C,P,O=s+(_-s%8),M=_>s%8?1:-1;for(P=s+M;P!==O;P+=M)if(i[P])return!1;if(C=(S=1===T?1===M?118:114:1===M?6:2)-M,i[S+8]||i[S]&&S!==s&&S!==O||i[C]&&C!==s&&C!==O)return!1;if(S!==s)for(P=s+(M=S>s?1:-1);P!==S;P+=M)if(P!==O&&i[P]||i[P+8])return!1;return!0}var Ee=function(){function createLine(i,s,_,T,S,P,O){var M,R,D,j,$,U,V,Z,Y,X,Q,ee=[],te="",ne=!0,re=s[_],ie=re.length,ae="";if(re.commands)for(j in re.commands)(!P||P.indexOf(j)>-1)&&(ae+="[%"+j+" "+re.commands[j]+"]");for(re.initComment&&!O&&(ae=(ae+" "+re.initComment.replace(/(\"|\}|\%|\\)/g,"\\$1")).trim()),ae&&ee.push("{"+ae+"}"),R=0;R<ie;++R){if(U=1===(M=re[R]).color,te="",ae="",T!==C.Bughouse?(ne&&!U?te=i+"...":U&&(te=i+"."),S&&(U||ne)&&(te+=" ")):(ee.bughouseOrder||(ee.bughouseOrder=[]),ee.bughouseOrder.push(M.bughouseOrder),R||(ee.blackCountOffset=2===re[0].color?1:0)),te+=M.san,M.annotation&&(te+=M.annotation),M.additionalAnnotation&&(te+=" "+M.additionalAnnotation.join(" ")),ne=!1,void 0===M.time||M.commands||(M.commands={clk:(Y=M.time,X=void 0,Q=void 0,X=Math.floor(Y%36e3/600),Q=Math.floor(Y%36e3%600)/10,Math.floor(Y/36e3)+":"+(X<10?"0":"")+X+":"+(Q<10?"0":"")+Q)}),M.commands)for(j in M.commands)(!P||P.indexOf(j)>-1)&&(ae+="[%"+j+" "+M.commands[j]+"]");if(M.comment&&!O&&(ae=(ae+" "+M.comment.replace(/(\"|\}|\%|\\)/g,"\\$1")).trim()),ae&&(te+=" {"+ae+"}",ne=!0),ee.push(te),M.lines)for(V=M.lines.length,D=0;D<V;++D)s[Z=M.lines[D]].length&&(($=createLine(i,s,Z,T,S,P,O))[0]="("+$[0],$[$.length-1]+=")",ee=ee.concat($),ne=!0);U||i++}return ee}function createHeader(i,s){return"["+i+' "'+String(s).replace(/(\"|\\)/g,"\\$1")+'"]'}return function generatePgn(i,s,_,T,S,P){var O,M,R="string"==typeof i.newline?i.newline:"\n",D=void 0===i.spaceAfterPeriods||i.spaceAfterPeriods,j="";for(O in j+=createHeader("Event",s.Event)+R,j+=createHeader("Site",s.Site)+R,j+=createHeader("Date",s.Date)+R,j+=createHeader("Round",s.Round)+R,S===C.Bughouse?(j+=createHeader("WhiteA",s.WhiteA||"?")+R,j+=createHeader("BlackA",s.BlackA||"?")+R,j+=createHeader("WhiteB",s.WhiteB||"?")+R,j+=createHeader("BlackB",s.BlackB||"?")+R):(j+=createHeader("White",s.White)+R,j+=createHeader("Black",s.Black)+R),j+=createHeader("Result",s.Result)+R,S&&(j+=createHeader("Variant",s.Variant)+R),s.FEN&&s.FEN!==ie&&(j+=createHeader("SetUp","1")+R,j+=createHeader("FEN",s.FEN)+R),s)-1===xe.indexOf(O)&&(j+=createHeader(O,s[O])+R);if(j+=R,M=createLine(T,_,0,S,D,i.hideCommands?[]:i.restrictCommands,i.hideComments),S===C.Bughouse){if(P.isDependent)return M;M=function makeBugHousePgn(i,s,_){var T=s,S=i.siblingGame.pgn(),C=0,P=0,O=[];for(s.bughouseOrder=s.bughouseOrder||[],S.bughouseOrder=S.bughouseOrder||[];s.bughouseOrder.length||S.bughouseOrder.length;)!s.bughouseOrder.length||S.bughouseOrder.length&&s.bughouseOrder[0]>S.bughouseOrder[0]?(S.bughouseOrder.shift(),O.push("B")):(s.bughouseOrder.shift(),O.push("A"));return s=[],O.forEach((function(O){var M,R,D,j="";"A"===O?(M=T,R=++C,D=i.startingMoveNumber()):(M=S,R=++P,D=i.siblingGame.startingMoveNumber()),j=String(Math.floor((R+1)/2)+D-1),(M.blackCountOffset+R)%2?j+=O:j+=O.toLowerCase(),j+="."+(_?" ":"")+M.shift(),s.push(j)})),s}(P,M,D)}return M.push(s.Result),j+function wordWrap(i,s,_){return s<1?i:(s="number"==typeof s?s:80,i.replace(new RegExp("(.{1,"+s+"})(?: |$|\r?\n)","g"),"$1"+_).slice(0,-_.length))}(M.join(" "),i.maxWidth,R)}}(),Pe=function(){var i="!?~",s=/\[%(\S+)\s([^\]]+)\]/,_=/^(?:[+=~\/\-\u2212]+|T?N|RR|D)$/;function extractCommands(i){for(var _,T=i.commands||{};_=s.exec(i.value);)i.value=i.value.replace(_[0],"").trim(),T[_[1]]=_[2],i.commands=T}function isSplitGame(i,s,_,T){for(var S;++s<_;)if((S=i[s].trim())&&"%"!==S[0])return"["===S[0]&&(!T||/^\[\S+\s+".*"\]$/.test(S))}return function tokenize(s,T){var S,C,P,O,M,R,D,j="tags",$=[],U={type:j,value:""},V=0,Z=[],Y=!0;T=T||{},O=(S=s.split(/\r?\n/)).length;e:for(C=0;C<O;++C)if("%"!==(P=S[C].trim())[0])if(P){if(R=(P=" "+P+" ").length,M=0,Y)for(;M<R;++M)if(D=P[M],"tags"===j){if("["===D)U={type:j="tagName",value:""};else if(D.trim()){U={type:j="san",value:""},Y=!1;break}}else if("tagName"===j)U.value&&""===D.trim()?($.push(U),j="tagValueStart"):" "!==D&&(U.value+=D);else if("tagValueStart"===j){if('"'===D||""===D)U={type:j="tagValue",value:""};else if(D.trim()){$.push({type:"tagValue",value:P.slice(M,-1).match(/(.*?)"?\]?$/)[1]}),U={type:j="tags",value:""};continue e}}else if("tagValue"===j)if('"'===D||""===D)if($.push(U),"]"===P[M+1])U={type:j="tags",value:""},++M;else{if("]"===P.slice(-2,-1)){U.value+=P.substr(M).match(/(.*?)"?\s*\] $/)[1],U={type:j="tags",value:""};continue e}j="tagEnd"}else"\\"===D&&M+2<R&&(D=P[++M]),M>0&&(U.value+=D);else{if("]"!==D){if(!D.trim())continue;--M}U={type:j="tags",value:""}}for(;M<R;++M)if(D=P[M],"san"===j)if(i.indexOf(D)>-1)"!"===D||"?"===D||i.indexOf(D)<6&&(D=["!!","??","!?","?!"][i.indexOf(D)-2])?(U.value&&$.push(U),U={type:"a",value:D},"!"!==P[M+1]&&"?"!==P[M+1]||(U.value+=P[++M]),$.push(U),U={type:"san",value:""}):(""===D&&"=/"===U.value?(U.type="aa",U.value+=D):(U.value&&(_.test(U.value)&&("--"!==U.value||T.rejectNullMoves)&&(U.type="aa"),$.push(U)),U={type:"aa",value:D},""===D&&""===P[M+1]&&(U.value="",++M)),$.push(U),U={type:"san",value:""});else if(" "===D||"\t"===D||"\r"===D||"{"===D||"("===D||")"===D){if(U.value){if("$"===U.value[0])U.type="nag";else if("*"===U.value||"1-0"===U.value||"0-1"===U.value||"1/2-1/2"===U.value||"-"===U.value){if(!(V||M+1<R)){if(U.type="result","-"===U.value&&(U.value="1/2-1/2"),$.push(U),Z.push($),C+1===O||C+2===O&&!S[C+1])return Z;Y=!0,U={type:j="tags",value:""},$=[];break}U.type="*"===U.value?"cont":"comment"}_.test(U.value)&&("--"!==U.value||T.rejectNullMoves)&&(U.type="aa"),$.push(U),U={type:j,value:""}}if(" "===D||"\t"===D||"\r"===D)j="san";else if("{"===D)j="comment",$.length&&"comment"===$[$.length-1].type&&((U=$.pop()).value+=" ");else if("("===D)j="san",$.push({type:"variationStart",value:++V});else{if(V<1){if(!T.commentErrors)return!1}else $.push({type:"variationEnd",value:V--});j="san"}U.type=j}else if("."===D||!U.value&&+D==+D&&"-"!==P[M+1]&&"/"!==P[M+1]){if(+D==+D)switch(U.number||(U.number=""),U.number+=D,P[M+1]){case"A":case"a":case"B":case"b":U.number+=P[++M],$.push({type:"number",value:U.number}),delete U.number}}else U.value+=D;else 0===M&&(U.value=U.value.trim()),"}"!==D?("\\"===D&&M+2<R&&(D=P[++M]),U.value+=D):(U.value=U.value.trim(),U.value.indexOf("[")>-1&&extractCommands(U),$.push(U),U={type:j="san",value:""})}else $.length&&("tags"===j?(j="san",Y=!1):"tagValueStart"!==j&&isSplitGame(S,C,O,V||"comment"===j)&&("comment"===j&&$.push(U),"tagValue"!==$[$.length-1].type&&(Z.push($),$=[]),j="tags",Y=!0,V=0));return U.value&&$.push(U),!$.length&&Z.length||Z.push($),Z}}();function Chess(xe,Ae){var Oe,Me,ze=0,Ie=!0,Le=[],Re=1,Ne=[],De=$,je=0,Be=1,$e=1,Ue=[],Fe=[Ue],He=0;Ue.id=He;var qe={},Ve=[],Ge=!1,Ze=!1,We=makeMoveChess,moveToSan=function(i,s){var _,T,S,C,P,O,$="";return i&ke.KQSIDE_CASTLE?$=i&ke.KSIDE_CASTLE?"O-O":"O-O-O":i&ke.DROP?((_=i>>te)&&($+=we[_]),$+="@"+algebraic(S=i>>ee&ne)):(S=i>>ee&ne,4&(C=Me[T=i>>7&ne])?(i&ke.ANY_CAPTURE&&($+=String.fromCharCode(file(T)+97)+"x"),$+=algebraic(S),i&ke.PROMOTION&&($+="="+we[_=i>>te])):($+=ce[C&Y],j>1&&($+=function getDisambiguator(i,s,_){var T,S,C,P,O,R;if(D<2)return"";for(i&=Z,R=0;R<D;++R)if(_===(T=M[R])>>ee&&(C=T>>7&ne)!==s&&Me[C]&i){if(S=!0,rank(s)===rank(C)){if(P)return algebraic(s);O=!0}if(file(s)===file(C)){if(O)return algebraic(s);P=!0}}if(S)return P?String(8-rank(s)):String.fromCharCode(file(s)+97);return""}(C,T,S)),i&ke.ANY_CAPTURE&&($+="x"),$+=algebraic(S))),s||(i&ke.KQSIDE_CASTLE?(T=i>>7&ne,S=i>>ee&ne):i&ke.DROP_OR_PROMOTE&&(C=_e[_]+Re),inCheckAfterMove(C,T,S,i)&&(We(i,T,S,_),P=R,R=D,O=j,ze&&isVariantWin()||generateMoves()===R?$+="#":$+="+",D=R,R=P,j=O,reverseMove(Ue.pop()))),$};function hashPosition(){var i,_,T,S=1===Re?[4174784170,2938602761]:[0,0];for(T=0;T<120;++T)136&T&&(T+=8),(i=Me[T])&&hashNum(S,s.zobristPiece[64*s.zobristPieceValueNumbers[i&Y]+8*(7-rank(T))+file(T)]);if(Ze)for(_=1;_<3;++_)Ne[_]&&(0!=(Ne[_]&Ne[_]-1)?(hashNum(S,s.zobristCastle[_-1]),hashNum(S,s.zobristCastle[_+1])):Ne[_]>1<<file(Le[_])?hashNum(S,s.zobristCastle[_-1]):hashNum(S,s.zobristCastle[_+1]));else{for(_=1;_<3;++_)Ne[_]&&(Ne[_]&ke.KSIDE_CASTLE&&hashNum(S,s.zobristCastle[_-1]),Ne[_]&ke.QSIDE_CASTLE&&hashNum(S,s.zobristCastle[_+1]));Ge?function hashHand(i,_){var T,S,C,P,O,M,R,D=0;for(T=1;T<3;++T){if(S=_[T])for(C=0;C<5;){for(O=D+63*C,P=S>>ve[C]&be[C],M=0;M<P;++M)hashNum(i,[31*(R=s.zobristPiece[O++])[0]>>>0,17*R[1]>>>0]);++C}D=315}}(S,Oe._hand):ze===C["3-check"]&&function hash3Check(i,_){_[1]&&hashNum(i,s.zobristCheck[_[1]-1]),_[2]&&hashNum(i,s.zobristCheck[_[2]+2])}(S,Ve)}return De!==$&&hashEP(Me,S,De+(1===Re?16:-16),4|Re),S}function getCurrentHash(){var i;return Ue.length?i=Ue[Ue.length-1].hash:(Ue.hash||(Ue.hash=hashPosition()),i=Ue.hash),[i[0],i[1]]}function bughouseify(i){function fixBughouseSan(i){return/#/.test(i)&&checkIsPotentiallyBlockable()&&(i=i.replace("#","+")),i}function bughouseFunc(s,_){var T=i(s,_);return T&&("string"==typeof T?T=fixBughouseSan(T):(T.san=fixBughouseSan(T.san),Ue[Ue.length-1].san=T.san)),T}return bughouseFunc._isBughouseified=!0,bughouseFunc._orig=i,bughouseFunc}function setVariant(i,s){ze!==(ze=i?C[i]||1*i||C[String(i).replace(/\s/g,"").toLowerCase()]||C.Chess:0)&&(ze===C.Bughouse?(Ge=!0,Oe.isDependent||(Oe.siblingGame=Chess(),Oe.siblingGame.hashing(Ie),Oe.siblingGame.isDependent=!0,Oe.siblingGame.siblingGame=Oe,Oe.siblingGame.header({Variant:"Bughouse"})),createVariantZobristNumbers(),We=makeMoveVariant,moveToSan=bughouseify(moveToSan),Oe.move=bughouseify(Oe.move)):(delete Oe.siblingGame,Ge=ze===C.Crazyhouse,Ze=ze===C.Chess960,ze?(createVariantZobristNumbers(),We=makeMoveVariant):We=makeMoveChess,moveToSan._isBughouseified&&(moveToSan=moveToSan._orig,Oe.move=Oe.move._orig)),s||updateSetup(generateFen()))}function disambiguate960Rook(i,s){for(var _,T,S=i>7?1:2;!(136&i);){if((_=Me[i])&S)if(_&U){if(T)return;T=i%8+(1===S?65:97)}else if(_&V)return T;i+=s}}function clear(i,s,_){Me=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Re=1,Le[1]=$,Le[2]=$,Ne[1]=0,Ne[2]=0,Oe._hand[1]=0,Oe._hand[2]=0,Ve[1]=0,Ve[2]=0,De=$,je=0,Be=1,s||(Fe=[Ue=[]],He=0,Ue.id=He,qe={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},i?setHeader(["Variant",i]):setVariant(!1,_),_||updateSetup(generateFen()))}function reset(){clear(0,!1,!0),Ue.hash=[1178310168,378666140],Me=[34,10,18,66,130,18,10,34,0,0,0,0,0,0,0,0,6,6,6,6,6,6,6,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,5,5,5,5,5,5,5,0,0,0,0,0,0,0,0,33,9,17,65,129,17,9,33,0,0,0,0,0,0,0,0],$e=1,Le[1]=116,Le[2]=4,Ne[1]=48,Ne[2]=48}function load(i,s,_,T){var S,M,R,D,j,Z,Y,Q,ee,te,ne,re,ie=0;if(T?(re=(S=i.split(" "))[3],ne=S[2]):(re=(S=i.trim().split(/\s+/))[3]||"-",ne=S[2]||"-"),void 0===s?(31&ne.charCodeAt(0))<9&&setVariant(C.Chess960,!0):setVariant(s,!0),M=S[0],!T&&!(M=function fixFenPieces(i,s){var _,T,S=i.length,P=0,O=0,M=s&&(s===C.Crazyhouse||s===C.Bughouse);for(_=0;_<S;++_)if(+(T=i[_])!=+T)if("/"===T){if(8!==O&&(i=i.substr(0,_)+(8-O)+i.substr(_),++_,++S),O=0,++P>7){if(!M&&_<S-1||!/^[pnbrq]{0,63}$/i.test(i.substr(_+1)))return!1;break}}else if(se[T]){if(++O>8)return!1}else{if("~"!==T)return!1;M&&_&&/[nbrq]/i.test(i[_-1])||(i=i.substr(0,_)+i.substr(_+1),--_,--S)}else(O+=1*T)>8&&(i=i.substr(0,_)+(T-(O-8))+i.substr(_+1),O=8);return i}(M,ze)))return!1;if(D=M.length,clear(P[ze],_,!0),Ge){if(ze===C.Bughouse&&!Oe.isDependent&&(Z=i.split(" | "),!Oe.siblingGame.load(1===Z.length?i:Z[1],s,_,T)))return reset(),!1;for(j=0;j<D;++j)if(+(Y=M[j])!=+Y)if("/"===Y){if(ie>111){for(++j;j<D;++j)Y=M[j],Oe._hand[Y<"a"?1:2]+=1<<ye[Y]>>>0;break}ie+=8}else Me[ie]=se[Y],"~"===M[j+1]&&(++j,Me[ie]|=X),Me[ie]&V&&(Le[3&Me[ie]]=ie),++ie;else ie+=1*Y}else for(j=0;j<D;++j)+(Y=M[j])!=+Y?"/"===Y?ie+=8:(Me[ie]=se[Y],Me[ie]&V&&(Le[3&Me[ie]]=ie),++ie):ie+=1*Y;if(Re="b"===S[1]?2:1,"-"!==ne)if(Ze){for(ee={1:[0,0],2:[0,0]},j=ne.length-1;j>=0;--j)75===(R=ne.charCodeAt(j))?R=disambiguate960Rook(119,-1):81===R?R=disambiguate960Rook(112,1):107===R?R=disambiguate960Rook(7,-1):113===R&&(R=disambiguate960Rook(0,1)),Q=R<97?1:2,te=Se[String.fromCharCode(R)],(T||Me[te]===(U|Q))&&(R>=97?Le[Q]>=1&&Le[Q]<=6&&(Ne[Q]|=1<<te):Le[Q]>=113&&Le[Q]<=118&&(Ne[Q]|=1<<te-112),++ee[Q][1*(Le[Q]<te)]);(ee[1][0]>1||ee[1][1]>1)&&(Ne[1]=0),(ee[2][0]>1||ee[2][1]>1)&&(Ne[2]=0)}else{if(!T)for(j=ne.length-1;j>=0;--j)Q=ne.charCodeAt(j)<97?1:2,Me[Se[ne[j]]]===(U|Q)&&Le[Q]===(1===Q?116:4)||(ne=ne.substr(0,j)+ne.substr(j+1));for(j=ne.length-1;j>=0;--j)switch(ne[j]){case"K":Ne[1]|=ke.KSIDE_CASTLE;break;case"Q":Ne[1]|=ke.QSIDE_CASTLE;break;case"k":Ne[2]|=ke.KSIDE_CASTLE;break;case"q":Ne[2]|=ke.QSIDE_CASTLE}}return!T&&(2!==re.length||1===Re&&"6"!==re[1]||2===Re&&"3"!==re[1]||Me[re.charCodeAt(0)-97+16*(8-("3"===re[1]?4:5))]!==(4|swapColor(Re))||Me[O[re]])&&(re="-"),De="-"===re?$:O[re],je=1*S[4]||0,Be=1*S[5]||1,ze===C["3-check"]&&(S[6]&&"+3+3"!==S[6]&&(Z=S[6].match(/^\+([0-3])\+([0-3])$/)),Z=Z||[0,0,0],Ve[1]=1*Z[1],Ve[2]=1*Z[2]),_||($e=Be,updateSetup(generateFen())),!0}function generateFen(){return ze?function generateVariantFen(){var i,s,_,T=0,S="",P="";for(i=0;i<120;++i)136&i&&(T&&(S+=T),S+="/",T=0,i+=8),(_=Me[i])?(T&&(S+=T,T=0),S+=le[_&Y],Ge&&_&X&&(S+="~")):++T;if(T&&(S+=T),Ge&&(S+="/"+handToString(Oe._hand[1],!0)+handToString(Oe._hand[2])),Ze){for(s=Ne[2],i=0;s;)1&s&&(P=String.fromCharCode(i+97)+P),s>>=1,++i;for(s=Ne[1],i=0;s;)1&s&&(P=String.fromCharCode(i+65)+P),s>>=1,++i}else Ne[1]&ke.KSIDE_CASTLE&&(P+="K"),Ne[1]&ke.QSIDE_CASTLE&&(P+="Q"),Ne[2]&ke.KSIDE_CASTLE&&(P+="k"),Ne[2]&ke.QSIDE_CASTLE&&(P+="q");return S+=" "+(1===Re?"w":"b")+" "+(P||"-")+" "+(De===$?"-":algebraic(De))+" "+je+" "+Be,ze===C["3-check"]?S+=" +"+Ve[1]+"+"+Ve[2]:ze!==C.Bughouse||Oe.isDependent||(S+=" | "+Oe.siblingGame.fen()),S}():function generateStandardFen(){var i,s,_=0,T="",S="";for(i=0;i<120;++i)136&i&&(_&&(T+=_),T+="/",_=0,i+=8),(s=Me[i])?(_&&(T+=_,_=0),T+=le[s&Y]):++_;return _&&(T+=_),Ne[1]&ke.KSIDE_CASTLE&&(S+="K"),Ne[1]&ke.QSIDE_CASTLE&&(S+="Q"),Ne[2]&ke.KSIDE_CASTLE&&(S+="k"),Ne[2]&ke.QSIDE_CASTLE&&(S+="q"),T+" "+(1===Re?"w":"b")+" "+(S||"-")+" "+(De===$?"-":algebraic(De))+" "+je+" "+Be}()}function setHeader(i){var s,_,T;for(s=0;s<i.length;s+=2)_=i[s],T=i[s+1],_&&("Variant"===_&&(setVariant(T),T=ze?P[ze]:void 0),"Result"===_&&"*"!==T&&"1-0"!==T&&"0-1"!==T&&"1/2-1/2"!==T&&(T="*"),void 0!==T?qe[_]=String(T):Ce.indexOf(_)>-1?qe[_]="Date"===_?"????.??.??":"?":delete qe[_]);return qe}function updateSetup(i){Ue.length>0||He||(i!==ie?(qe.SetUp="1",qe.FEN=i,Ue.hash=null):(delete qe.SetUp,delete qe.FEN,Ue.hash=[1178310168,378666140]))}function get(i){var s=Me[O[i]];return s?{type:le[s&Z|2],color:3&s,promoted:0!=(s&X)}:null}function calculateLegalMoveInfo(s,C){var P,O,M,R,D,j,U,V,Y,X,ee,te,ne,re=Re,ie=Me;if(i=[],_=0,T=0,S=0,ie[8]=ie[9]=ie[10]=ie[11]=ie[12]=ie[13]=ie[14]=ie[15]=ie[24]=ie[25]=ie[26]=ie[27]=ie[28]=ie[29]=ie[30]=ie[31]=ie[40]=ie[41]=ie[42]=ie[43]=ie[44]=ie[45]=ie[46]=ie[47]=ie[56]=ie[57]=ie[58]=ie[59]=ie[60]=ie[61]=ie[62]=ie[63]=ie[72]=ie[73]=ie[74]=ie[75]=ie[76]=ie[77]=ie[78]=ie[79]=ie[88]=ie[89]=ie[90]=ie[91]=ie[92]=ie[93]=ie[94]=ie[95]=ie[104]=ie[105]=ie[106]=ie[107]=ie[108]=ie[109]=ie[110]=ie[111]=ie[120]=ie[121]=ie[122]=ie[123]=ie[124]=ie[125]=ie[126]=ie[127]=0,C!==$){for(te=function chooseKingThreats(i,s){return Ze&&Ne[i]?fe:Ne[i]&ke.KSIDE_CASTLE&&!Me[s+1]&&!Me[s+2]?Ne[i]&ke.QSIDE_CASTLE&&!Me[s-1]&&!Me[s-2]&&!Me[s-3]?(S=ke.KQSIDE_CASTLE,me):(S=ke.KSIDE_CASTLE,he):Ne[i]&ke.QSIDE_CASTLE&&!Me[s-1]&&!Me[s-2]&&!Me[s-3]?(S=ke.QSIDE_CASTLE,pe):de}(re,C),P=0;P<120;++P)if(136&P&&(P+=8),R=Me[P])if(R&re)(!s||(0|R)&s)&&i.push(P);else if(0!=((ne=te[P-C+119])&R))if(4&R)for(Y=ae[R],O=1;O<3;++O)136&(U=P+Y[O])||(ie[U+8]|=1,U===C&&(++_,ie[P+8]|=2));else{V=(Y=ae[R&Z]).length,ee=R&Q;e:for(O=0;O<V;++O)if(X=Y[O],!(C>(U=P)&&X<0&&C-U>16||C<U&&X>0&&U-C>16))for(;0==(136&(U+=X));){if(ie[U+8]|=1,D=Me[U]){if(D&re)if(U===C){for(M=U-X;M!==P;M-=X)ie[M+8]|=2;ie[P+8]|=2,++_,ee&&0==(136&(U+=X))&&(ie[U+8]|=1)}else if(ee&&256&ne){for(j=U;(j+=X)!==C;)if(136&j||Me[j])continue e;ie[U+8]|=4+(Math.abs(X)<<3),++T}break}if(!ee)break}}_>1&&(i=[C])}else i=function getPieces(i,s){var _,T,S=[];for(_=0;_<120;++_)136&_&&(_+=8),(T=i[_])&&(T&s)===s&&S.push(_);return S}(Me,re|s)}function validateEnPassant(i,s){var T,S,C,P=s+16*(1===Re?1:-1);return(1!==_||0!=(2&Me[s+8])||0!=(2&Me[P+8]))&&(T=Me[i],Me[s]=T,Me[i]=0,S=Me[P],Me[P]=0,C=inCheck(),Me[i]=T,Me[s]=0,Me[P]=S,!C)}function addCastlingMoves(i){var s,_,T;if(Ze){if(Ne[i])for(_=(s=Le[i])%8,T=0;T<8;++T)Ne[i]&1<<T&&canCastle960(Me,s,T,i)&&(M[D++]=(T>_?ke.KSIDE_CASTLE:ke.QSIDE_CASTLE)+(s<<7)+(s+(T-_)<<ee),++T)}else S&ke.KSIDE_CASTLE&&(_=(s=Le[i])+2,0===Me[s+9]&&0===Me[s+10]&&(M[D++]=ke.KSIDE_CASTLE+(s<<7)+(_<<ee))),S&ke.QSIDE_CASTLE&&(_=(s=Le[i])-2,0===Me[s+7]&&0===Me[s+6]&&(M[D++]=ke.QSIDE_CASTLE+(s<<7)+(_<<ee)))}function generateMoves(s,S){var C,P,O,$,U,V,Y,X,ne,re,ie=Re,se=swapColor(ie),oe=Le[ie];for(calculateLegalMoveInfo(s,oe),j=i.length,D=R,ne=0;ne<j;++ne)if(C=i[ne],$=Me[C],!(_&&T&&4&Me[C+8]))if(4&$)for(V=ae[$],0!==T&&0!=(4&Me[C+8])&&Me[C+8]>>3!=16||(U=C+V[0],0===Me[U]&&(addPawnMove(Me,C,U,0),Te[ie]===rank(C)&&(U+=V[0],Me[U]||addPawnMove(Me,C,U,ke.BIG_PAWN)))),P=1;P<3;++P)136&(U=C+(Y=V[P]))||T&&4&Me[C+8]&&Me[C+8]>>3!==Math.abs(Y)||(Me[U]&se?addPawnMove(Me,C,U,ke.CAPTURE):U===De&&validateEnPassant(C,U)&&(M[D++]=ke.EP_CAPTURE|C<<7|U<<ee));else{if(T&&4&Me[C+8]){if(8&$)continue;if(!(ue[C-Le[ie]+119]&$))continue;V=[Y=Me[C+8]>>3,-Y]}else V=ae[$&Z];if(re=C<<7,C===oe){for(P=0;P<8;++P)0==(136&(U=C+(Y=V[P])))&&(Me[U]?Me[U]&se&&0==(1&Me[U+8])&&(M[D++]=ke.CAPTURE|re|U<<ee):0==(1&Me[U+8])&&(M[D++]=re|U<<ee));0===_&&addCastlingMoves(ie)}else for(O=V.length,X=$&Q,P=0;P<O;++P)for(Y=V[P],U=C;!(136&(U+=Y));){if(Me[U]){Me[U]&se&&(0===_||2&Me[U+8])&&(M[D++]=ke.CAPTURE|re|U<<ee);break}if((0===_||2&Me[U+8])&&(M[D++]=re|U<<ee),!X)break}}return ze&&(Ge?function drop(i,s,T){var S,C,P,O,R;if(!i)for(s&&(s>>=26),O=0;O<5;++O)if((!s||(0|s)==1<<O)&&Oe._hand[T]&be[O]<<ve[O]){for(0===O?(S=16,C=103,P=ke.DROP):(S=0,C=119,P=ke.DROP|O<<te),R=S;R<=C;++R)136&R&&(R+=8),Me[R]||(0===_||1===_&&2&Me[R+8])&&(M[D++]=P|R<<ee);if(s)return}}(S,s,ie):!Ze&&isVariantWin()&&(D=R)),D}function inCheckAfterMove(i,s,_,T){var S,P,O,M,R,D,j,Z;if(ze===C["King of the Hill"]&&i&V&&kingOfTheHillWin(_))return!0;if(T&ke.KQSIDE_CASTLE&&(_=1===Re?T&ke.KSIDE_CASTLE?117:115:T&ke.KSIDE_CASTLE?5:3,i=U,Z=!0),(S=Le[swapColor(Re)])===$)return!1;if(0==(i&V)&&ue[_-S+119]&i)for(R=i&Q,M=_+(O=ge[_-S+119]);0==(136&M);){if(M===S){if(4&i){if(1==(3&i)?S-_<0:S-_>0)return!0;break}return!0}if(M!==s&&Me[M]||!R)break;M+=O}if(!Z){if((P=ue[s-S+119])&Q&&(O=ge[s-S+119])!==ge[_-S+119])for(M=S-O;0==(136&M);){if(M!==s&&(D=Me[M])){if(D&Re&&P&D&&D&Q)return!0;break}M-=O}if(T&ke.EP_CAPTURE&&(P=ue[(j=_+16*(1===Re?1:-1))-S+119])&Q)for(M=S-(O=ge[j-S+119]);0==(136&M);){if(M!==s&&M!==j){if(M===_)break;if(D=Me[M]){if(D&Re&&P&D&&D&Q)return!0;break}}M-=O}}return!1}function attacked(i,s){var _,T,S,C,P=ae[8],O=8|i;for(_=0;_<8;++_)if(0==(136&(S=s+P[_]))&&((T=Me[S])&O)===O)return!0;for(P=ae[128],_=0;_<8;++_)for(S=s+(C=P[_]);0==(136&S);){if(T=Me[S]){if(T&i&&ue[s-S+119]&T){if(!(4&T))return!0;if(1===i?s-S<0:s-S>0)return!0}break}S+=C}return!1}function kingAttacked(i){return Le[i]!==$&&attacked(swapColor(i),Le[i])}function inCheck(){return kingAttacked(Re)}function checkIsPotentiallyBlockable(){var i,s,_,T=1<<ve[4];return Oe._hand[Re]+=T,i=R,R=D,s=j,_=generateMoves()!==R,D=R,R=i,j=s,Oe._hand[Re]-=T,_}function inCheckmate(){return inCheck()&&(M[0]=0)===generateMoves()&&!M[0]&&(ze!==C.Bughouse||!checkIsPotentiallyBlockable())}function inStalemate(){var i=!inCheck()&&(M[0]=0)===generateMoves()&&!M[0];return i&&ze===C.Bughouse&&!Oe.isDependent&&(i=Oe.siblingGame.inStalemate()),i&&Le[Re]!==$}function insufficientMaterial(i){var s,_,T=0,S=0,C=0;for(_=0;_<120;++_)if(136&_&&(_+=8),s=Me[_]){if(i&&0==(s&i))continue;if(100&s)return!1;if(8&s){if(S||T++)return!1}else if(16&s){if(T)return!1;if(++S,(rank(_)+_)%2&&++C,C&&S!==C)return!1}}return Le[1]!==$&&Le[2]!==$}function inThreefoldRepetition(){if(je<8)return!1;for(var i,s=getCurrentHash(),_=!1,T=je,S=!1,C=Ue,P=C.length-1;;){if((P-=2)<0){if(C.id){P=C.atMoveNode+P+2,C=Fe[C.parentId];continue}if(-2===P)return!1;i=C.hash,S=!0}else i=C[P].hash,C[P].halfMoves>T||T<2?S=!0:T=C[P].halfMoves;if(i[0]===s[0]&&i[1]===s[1]){if(_)return!0;_=!0}if(S)return!1}}function modifyHand(i){var _,T,S,P,O,M,R,D,j,$=i.move;if(ze===C.Crazyhouse||$&ke.DROP?(T=Oe._hand,O=i.hash,j=i.color):(T=Oe.siblingGame._hand,i.handSibling=!0,Ie&&((M=Oe.siblingGame._history()).length?O=M[M.length-1].hash:(M.hash||(M.hash=Oe.siblingGame._hashPosition()),O=M.hash)),j=swapColor(i.color)),i.captured){switch((i.captured&X?4:i.captured&Z)&Z){case 4:R=0;break;case 8:R=1;break;case 16:R=2;break;case U:R=3;break;default:R=4}_=1<<ve[R],Ie&&(P=T[j]>>ve[R]&be[R],D=s.zobristPiece[P+63*R+(1===j?0:315)])}else _=-1<<ve[S=$>>te],Ie&&(P=T[j]>>ve[S]&be[S],D=s.zobristPiece[P-1+63*S+(1===j?0:315)]);T[j]+=_,i.handChange=_,Ie&&hashNum(O,[31*D[0]>>>0,17*D[1]>>>0])}function makeMoveChess(i,_,T,S){var C,P,O,M,R,D,j,Z,Q=Re,ee=swapColor(Q),te={move:i,epSquare:De,halfMoves:je,castlingW:Ne[1],castlingB:Ne[2],color:Q},ne=1===Q;Ie&&(M=getCurrentHash(),te.hash=M,hashNum(M,s.zobristTurn),De!==$&&hashEP(Me,M,De+(ne?16:-16),4|Q)),0==(i&ke.KQSIDE_CASTLE)?Ge&&i&ke.DROP?(Me[T]=_e[S]|Q,Ie&&hashNum(M,s.zobristPiece[64*s.zobristPieceValueNumbers[Me[T]]+8*(7-rank(T))+file(T)]),modifyHand(te),j=0):(j=Me[_],(Z=Me[T])&&(te.captured=Z,Ie&&hashNum(M,s.zobristPiece[64*s.zobristPieceValueNumbers[Me[T]&Y]+8*(7-rank(T))+file(T)]),Z&U&&Ne[ee]&&(Ze?rank(T)===(ne?0:7)&&(O=1<<file(T),Ne[ee]&O&&(Ne[ee]^=O,Ie&&(O>1<<file(Le[Q])?hashNum(M,s.zobristCastle[ee-1]):hashNum(M,s.zobristCastle[ee+1])))):T===(ne?7:119)?Ne[ee]&ke.KSIDE_CASTLE&&(Ne[ee]^=ke.KSIDE_CASTLE,Ie&&hashNum(M,s.zobristCastle[ee-1])):T===(ne?0:112)&&Ne[ee]&ke.QSIDE_CASTLE&&(Ne[ee]^=ke.QSIDE_CASTLE,Ie&&hashNum(M,s.zobristCastle[ee+1])))),Me[T]=i&ke.PROMOTION?_e[S]|Q|X:Me[_],Me[_]=0,Ie&&(hashNum(M,s.zobristPiece[64*s.zobristPieceValueNumbers[j&Y]+8*(7-rank(_))+file(_)]),hashNum(M,s.zobristPiece[64*s.zobristPieceValueNumbers[Me[T]&Y]+8*(7-rank(T))+file(T)]))):j=V,i&ke.EP_CAPTURE?(ne?(D=T+16,R=6):(D=T-16,R=8),te.captured=4|ee,Me[D]=0,Ie&&hashNum(M,s.zobristPiece[64*s.zobristPieceValueNumbers[4|ee]+8*(R-rank(T))+file(T)])):j&V?(Ze?(i&ke.KQSIDE_CASTLE&&(Me[T]=0,Me[_]=0,i&ke.KSIDE_CASTLE?ne?(C=118,P=117):(C=6,P=5):ne?(C=114,P=115):(C=2,P=3),Me[C]=Q|V,Me[P]=Q|U,Ie&&(hashNum(M,s.zobristPiece[64*s.zobristPieceValueNumbers[V|Q]+8*(7-rank(_))+file(_)]),hashNum(M,s.zobristPiece[64*s.zobristPieceValueNumbers[U|Q]+8*(7-rank(T))+file(T)]),hashNum(M,s.zobristPiece[64*s.zobristPieceValueNumbers[V|Q]+8*(7-rank(C))+file(C)]),hashNum(M,s.zobristPiece[64*s.zobristPieceValueNumbers[U|Q]+8*(7-rank(P))+file(P)]))),Ie&&(0!=(Ne[Q]&Ne[Q]-1)?(hashNum(M,s.zobristCastle[Q-1]),hashNum(M,s.zobristCastle[Q+1])):Ne[Q]>1<<file(Le[Q])?hashNum(M,s.zobristCastle[Q-1]):hashNum(M,s.zobristCastle[Q+1])),Le[Q]=C||T):(i&ke.KQSIDE_CASTLE&&(Me[T]=Me[_],Me[_]=0,i&ke.KSIDE_CASTLE?(C=T-1,P=T+1):(C=T+1,P=T-2),Me[C]=Me[P],Me[P]=0,Ie&&(hashNum(M,s.zobristPiece[64*s.zobristPieceValueNumbers[V|Q]+8*(7-rank(_))+file(_)]),hashNum(M,s.zobristPiece[64*s.zobristPieceValueNumbers[U|Q]+8*(7-rank(P))+file(P)]),hashNum(M,s.zobristPiece[64*s.zobristPieceValueNumbers[V|Q]+8*(7-rank(T))+file(T)]),hashNum(M,s.zobristPiece[64*s.zobristPieceValueNumbers[U|Q]+8*(7-rank(C))+file(C)]))),Ie&&(Ne[Q]&ke.KSIDE_CASTLE&&hashNum(M,s.zobristCastle[Q-1]),Ne[Q]&ke.QSIDE_CASTLE&&hashNum(M,s.zobristCastle[Q+1])),Le[Q]=T),Ne[Q]=0):j&U&&Ne[Q]&&(Ze?rank(_)===(ne?7:0)&&(O=1<<file(_),Ne[Q]&O&&(Ne[Q]^=O,Ie&&(O>1<<file(Le[Q])?hashNum(M,s.zobristCastle[Q-1]):hashNum(M,s.zobristCastle[Q+1])))):_===(ne?119:7)?Ne[Q]&ke.KSIDE_CASTLE&&(Ne[Q]^=ke.KSIDE_CASTLE,Ie&&hashNum(M,s.zobristCastle[Q-1])):_===(ne?112:0)&&Ne[Q]&ke.QSIDE_CASTLE&&(Ne[Q]^=ke.QSIDE_CASTLE,Ie&&hashNum(M,s.zobristCastle[Q+1]))),i&ke.BIG_PAWN?(De=ne?T+16:T-16,Ie&&hashEP(Me,M,T,4|ee)):De=$,4&j||i&ke.ANY_CAPTURE?je=0:je++,Re=ee,Ue.push(te)}function makeMoveVariant(i,_,T,S){var P,O=Re;makeMoveChess(i,_,T,S),P=Ue[Ue.length-1],Ge?(je=P.halfMoves+1,P.captured&&modifyHand(P),ze===C.Bughouse&&(P.bughouseOrder=Oe.moveCount()-1+Oe.siblingGame.moveCount())):ze===C["3-check"]&&kingAttacked(Re)&&(P.checked=!0,Ie&&Ve[O]&&hashNum(P.hash,s.zobristCheck[Ve[O]+(1===O?-1:2)]),++Ve[O],Ie&&hashNum(P.hash,s.zobristCheck[Ve[O]+(1===O?-1:2)]))}function reverseMove(i){var s,_,T=Re,S=swapColor(T),P=i.move,O=P>>ee&ne,M=P>>7&ne;if(Re=S,Ne[2]=i.castlingB,Ne[1]=i.castlingW,De=i.epSquare,je=i.halfMoves,ze){if(Ze&&P&ke.KQSIDE_CASTLE)return P&ke.KSIDE_CASTLE?1===S?(_=118,s=117):(_=6,s=5):1===S?(_=114,s=115):(_=2,s=3),Me[_]=0,Me[s]=0,Me[M]=S|V,Me[O]=S|U,void(Le[S]=M);if(i.handChange&&(ze!==C.Crazyhouse&&i.handSibling?Oe.siblingGame._hand[swapColor(S)]-=i.handChange:Oe._hand[S]-=i.handChange),P&ke.DROP)return void(Me[O]=0);i.checked&&--Ve[S]}P&ke.PROMOTION?(Me[M]=4|S,Me[O]=P&ke.CAPTURE?i.captured:0):(Me[M]=Me[O],P&ke.KQSIDE_CASTLE?(Me[O]=0,P&ke.KSIDE_CASTLE?(s=O+1,_=O-1):(s=O-2,_=O+1),Me[s]=S|U,Me[_]=0,Le[S]=M):(O===Le[S]&&(Le[S]=M),P&ke.CAPTURE?Me[O]=i.captured:(Me[O]=0,P&ke.EP_CAPTURE&&(Me[O-(1===S?-16:16)]=4|T))))}function beautifyMove(i,s,_){var T,S,C=i>>ee&ne,P={color:Re,to:algebraic(C),flags:i&ne};return Ge&&0!=(i&ke.DROP)?(S=i>>te,P.drop=S,P.piece=_e[S]+Re):(T=i>>7&ne,P.from=algebraic(T),P.piece=Me[T],i&ke.PROMOTION&&(S=i>>te,P.promotion=_e[S]+Re),i&ke.CAPTURE?P.captured=Me[C]:i&ke.EP_CAPTURE&&(P.captured=4|swapColor(Re))),P.san=s||moveToSan(i,_),P}function isVariantWin(){return ze===C["3-check"]?3===Ve[swapColor(Re)]:ze===C["King of the Hill"]?kingOfTheHillWin(Le[swapColor(Re)]):void 0}function isBughouseWin(){if(ze===C.Bughouse)return Oe.siblingGame.inCheckmate()}function createVariation(){var i=[],s=generateFen(),_=Ue.length-1,T=Ue[_];return!!T&&(i.parentId=He,i.id=Fe.length,Ue.curFen=s,T.lines||(T.lines=[]),T.lines.push(i.id),T.move?reverseMove(T):(De=T.epSquare,--je,Re=swapColor(Re)),2===Re&&--Be,i.atMoveNode=_,i.hash=_?Ue[_-1].hash:Ue.hash,He=i.id,Fe.push(i),Ue=i,!0)}function selectLine(i){var s=generateFen();Ue.curFen=s,Ue=Fe[i],He=i,load(Ue.curFen,ze,!0,!0)}return Oe={WHITE:1,BLACK:2,PAWN:4,KNIGHT:8,BISHOP:16,ROOK:U,QUEEN:64,KING:V,FLAGS:ke,load:load,reset:reset,moves:function(i){var s,_,T,S=[],C=moveToSan;for(i&&(i.verbose&&(C=beautifyMove),i.type&&(_=i.type|i.type<<24),T=i.noDrop),generateMoves(_,T),s=0;s<D;++s)S.push(C(M[s]));return S},inCheck:inCheck,inCheckmate:inCheckmate,inStalemate:inStalemate,isBughouseWin:isBughouseWin,in50MoveRule:function(){return je>=100},inDraw:function(){return je>=100||inStalemate()||insufficientMaterial()||inThreefoldRepetition()||Boolean(function isBughouseDraw(){if(ze===C.Bughouse)return Oe.siblingGame.in50MoveRule()||Oe.siblingGame.inThreefoldRepetition()}())},insufficientMaterial:insufficientMaterial,inThreefoldRepetition:inThreefoldRepetition,isVariantWin:isVariantWin,gameOver:function(){return Oe.inDraw()||inCheckmate()||Boolean(isVariantWin())||Boolean(isBughouseWin())},isPositionValid:function(i){var s,_,T,S=0;if(!1!==(i=i||{}).pawns)for(s=0;s<=119;){if(4&(T=Me[s]))return!1;8==++s&&(s=112)}if(!1!==i.kings){for(s=0;s<=119;++s)if(136&s&&(s+=8),(T=Me[s])&V){if(++S>2)return!1;if(_&&_&T)return!1;_=3&T}if(2!==S)return!1}return!1===i.check||!1===i.kings&&Le[swapColor(Re)]===$||!kingAttacked(swapColor(Re))},validateFen:validateFen,fen:generateFen,pgn:function(i){return(i=i||{}).useResultHeader||He||(isVariantWin()||inCheckmate()?qe.Result=2===Re?"1-0":"0-1":Oe.inStalemate()?qe.Result="1/2-1/2":isBughouseWin()&&(qe.Result=1===Oe.siblingGame.turn()?"1-0":"0-1")),Ee(i,qe,Fe,$e,ze,Oe)},loadPgn:function(i,s,_){var T,S,C,P,O,M,R,D,j,$={},U=0;if("number"!=typeof s&&(_=_||s,s=0),_=_||{},"string"==typeof i&&(_.singleGame&&(i=i.replace(/(?:\r?\n\s*){2,}/g,"\n")),i=Oe.tokenizePgn(i,_)),s<0&&(s=i.length+s),!(P=i[s]))return!1;for(reset(),S=P.length,T=0;T<S&&"tagName"===(C=P[T]).type;++T){if(!P[T+1]||"tagValue"!==P[T+1].type)return!1;++T,"FEN"===C.value?R=completeFen(P[T].value):$[C.value]=P[T].value}if(_.variant&&($.Variant=_.variant),$.Variant&&!R&&(R=ie),R||"1"===$.SetUp)if("0"===$.SetUp)$.FEN=R;else if(!R||!load(R,$.Variant))return!1;for(Oe.header($),M=(O=Oe)._history();T<S;++T)if("san"===(C=P[T]).type&&0===U){if(!O.move(C.value)&&("Z0"!==C.value&&"<>"!==C.value||_.rejectNullMoves||!O.move("--")))if(_.commentErrors)M.length?M[M.length-1].comment=((M[M.length-1].comment||"")+" "+C.value).trim():M.initComment=((M.initComment||"")+" "+C.value).trim();else{if(!_.skipBadLines||!(0!==He||Ue.length&&_.allowBadMainLine))return reset(),!1;U=1}}else if("result"===C.type&&"*"===qe.Result)setHeader(["Result",C.value]);else if("a"===C.type&&0===U&&M[M.length-1])M[M.length-1].annotation=C.value;else if("nag"!==C.type&&"aa"!==C.type||0!==U||!M[M.length-1])if("comment"===C.type&&0===U)M.length?(C.value&&(M[M.length-1].comment=C.value),C.commands&&(M[M.length-1].commands=C.commands,C.commands.clk&&(M[M.length-1].time=(D=C.commands.clk,j=void 0,10*(3600*(j=D.split(":"))[0]+60*j[1]+1*j[2]))))):(M.initComment=String(C.value),C.commands&&(M.commands=C.commands));else if("variationStart"===C.type){if(U>0)++U;else if(!createVariation())return reset(),!1;M=O._history()}else if("variationEnd"===C.type)U>0&&--U,0===U&&(selectLine(M.parentId),M=O._history());else if("number"===C.type){if(!(O=/b/i.test(C.value.slice(-1))?Oe.siblingGame:Oe))return!1;M=O._history()}else"cont"===C.type&&He&&!M.length&&O.move(O._lines()[M.parentId][M.atMoveNode].san);else M[M.length-1].additionalAnnotation||(M[M.length-1].additionalAnnotation=[]),-1===M[M.length-1].additionalAnnotation.indexOf(C.value)&&M[M.length-1].additionalAnnotation.push(C.value);return!0},header:function(i){return Array.isArray(i)?setHeader(i):"object"==typeof i?(Object.keys(i).forEach((function(s){setHeader([s,i[s]])})),qe):qe},turn:function(i){return 1!==i&&2!==i||(Re=i),Re},move:function playMove(i){var _,T,S,C,P,R,j,U,Y,Q,ie,ae,se;if("string"==typeof i){switch(i[C=i.length-1]){case"+":case"#":i=i.substr(0,C)}for(Y=re.indexOf(i[0])>6?oe[i[0]]:"O"===i[0]?V:4,Ge&&(-1===i.indexOf("@")?Q=!0:(Q=!1,Y<<=24)),generateMoves(Y,Q),C=0;C<D;++C)if(i===(R=moveToSan(M[C],!0))){T=M[C];break}if(!T){if("--"===i)return function makeNullMove(){var i,_={color:Re,san:"--",epSquare:De},T={color:Re,san:"--"};return Ie&&(i=getCurrentHash(),_.hash=i,hashNum(i,s.zobristTurn),De!==$&&hashEP(Me,i,De+(1===Re?16:-16),4|Re)),De=$,je++,1===(Re=swapColor(Re))&&++Be,Ue.push(_),T}();if(i=Oe.fixMove(i))try{return playMove(i)}catch(le){}return null}j=T>>7&ne,U=T>>ee&ne,S=T>>te}else{if(i.drop){switch(i.drop){case"p":S=0;break;case"n":S=1;break;case"b":S=2;break;case"r":S=3;break;case"q":S=4;break;default:return null}Y=1<<26+S}else{if(i.promotion)switch(i.promotion){case"q":S=4;break;case"n":S=1;break;case"r":S=3;break;case"b":S=2;break;default:return null}j=O[i.from],Q=!0,Y=Me[j]&Z}for(U=O[i.to],_=((S?S<<te:0)|U<<ee)>>7|j,generateMoves(Y,Q),C=0;C<D;++C)if(M[C]>>7===_){T=M[C];break}if(!T)return(i=Oe.fixMove(i))?playMove(i):null}return se=T&ke.DROP_OR_PROMOTE?_e[S]+Re:Me[j],P=beautifyMove(T,R,!0),ie=inCheckAfterMove(se,j,U,T),We(T,j,U,S),ie&&(ze&&isVariantWin()||0===generateMoves()?P.san+="#":P.san+="+"),(ae=Ue[Ue.length-1]).san=P.san,P.piece&X&&(ae.promoted=!0),1===Re&&++Be,P},undo:function(i){var s=Ue.pop();return s?(1===Re&&--Be,s.move?(reverseMove(s),!!i||beautifyMove(s.move,s.san)):(De=s.epSquare,--je,Re=swapColor(Re),!!i||{san:"--",color:s.color})):null},clear:function(i){clear(i)},put:function(i,s,_){var T,S=O[s],C=!1,P=Me[S],M=3&P,R=i.color;if(isNaN(S)||!i.type||!R||-1===re.indexOf(i.type))return!1;if(Me[S]=oe[i.type]|R|(i.promoted?X:0),Me[S]&V&&(Le[R]=S),P&&Me[Le[M]]&&Me[Le[M]]!==(V|M)){for(T=0;T<120;++T)136&T&&(T+=8),Me[T]===(V|M)&&(Le[M]=T,C=!0);C||(Le[M]=$)}return _||load(generateFen(),ze,!1,!1),!0},get:get,remove:function(i,s){var _,T=Me[O[i]],S=get(i),C=3&T;if(Me[O[i]]=0,T&V)for(Le[C]=$,Ne[C]=0,_=0;_<120;++_)if(136&_&&(_+=8),Me[_]===(V|C)){Le[T.color]=_;break}return s||load(generateFen(),ze,!0,!1),S},history:function(i,s){for(var _,T=[],S=Ue,C=S.length;;){if(-1==--C){if(S.id&&!s){C=S.atMoveNode,S=Fe[S.parentId];continue}break}i?((_=beautifyMove(S[C].move,S[C].san)).color=S[C].color,!C&&S.initComment&&(_.firstComment=S.initComment),void 0!==S[C].comment&&(_.comment=S[C].comment),void 0!==S[C].time&&(_.time=S[C].time),void 0!==S[C].annotation&&(_.annotation=S[C].annotation),void 0!==S[C].additionalAnnotation&&(_.additionalAnnotation=S[C].additionalAnnotation),void 0!==S[C].commands&&(_.commands=S[C].commands),void 0!==S[C].captured&&(_.captured=S[C].captured),void 0!==S[C].promoted&&(_.promoted=S[C].promoted),void 0!==S[C].lines&&(_.lines=S[C].lines),void 0!==S[C].bughouseOrder&&(_.bughouseOrder=S[C].bughouseOrder),re.indexOf(S[C].san[0])>6?_.piece=oe[S[C].san[0]]:"O"===S[C].san[0]?_.piece=V:_.piece=4,_.piece|=_.color,T.unshift(_)):T.unshift(S[C].san)}return T},hashes:function(){for(var i=[],s=Ue,_=s.length;;){if(-1==--_){if(s.id){_=s.atMoveNode,s=Fe[s.parentId];continue}s.hash||getCurrentHash(),i.unshift(s.hash);break}i.unshift(s[_].hash)}return i},moveCount:function(){return Ue.length},startingMoveNumber:function(){return $e},completeFen:completeFen,createVariation:createVariation,selectLine:selectLine,hash:function(){var i=getCurrentHash();return ze!==C.Bughouse||Oe.isDependent?i:[i,Oe.siblingGame.hash()]},hashing:function(i){Ie=i,ze!==C.Bughouse||Oe.isDependent||Oe.siblingGame.hashing(Ie)},hand:function(){if(Ge)return handToString(Oe._hand[1],!0)+handToString(Oe._hand[2])},checks:function(){if(ze===C["3-check"])return[Ve[1],Ve[2]]},threats:function(){var i,s,S,C,P,O,j,U=Re,V=swapColor(U),Y=[],X=[],Q=[],re=[],ie=[],ae=De;if(calculateLegalMoveInfo(0,Le[U]),_||T)for(i=0;i<120;++i)136&i&&(i+=8),2&Me[i+8]&&Me[i]?Q.push(algebraic(i)):4&Me[i+8]&&Y.push(algebraic(i));for(Re=V,De=$,generateMoves(),i=D;i--;){if(P=(s=M[i])>>ee&ne,O=s>>7&ne,s&ke.DROP_OR_PROMOTE){if(C=_e[j=s>>te]|V,s&ke.PROMOTION&&j%3!=1)continue}else C=Me[O],j=0;if(inCheckAfterMove(C,O,P,s)&&(We(s,O,P,j),R=i,(ze&&isVariantWin()||generateMoves()===i)&&X.push((s&ke.DROP?le[C].toLowerCase()+"@":algebraic(O))+algebraic(P)),reverseMove(Ue.pop()),s&ke.CAPTURE)){for(S=0,i=D;i>R;)if((M[--i]>>ee&ne)===P){S=1,i=R;break}if(!S){re.push(algebraic(O)+algebraic(P));continue}}s&ke.CAPTURE&&1!==j&&(S=124&Me[P])&&(attacked(U,P)?S>(C=Me[O]&Z)&&S-C!=8&&ie.push(algebraic(O)+algebraic(P)):re.push(algebraic(O)+algebraic(P)))}return R=0,Re=U,De=ae,{pins:Y,checkers:Q,mates:X,undefended:re,underdefended:ie}},tokenizePgn:Pe,fixMove:function(i){var s,_,T;if("string"==typeof i){if(/0|[?!+#]$|[18][QNRB]$|^P/i.test(i))return i.replace(/[?!+#]+$/,"").replace(/0/g,"O").replace(/([18])([QNRB])$/i,"$1=$2").replace(/^P+/i,"");if(_=i.indexOf("=")>0?-4:-2,"number"==typeof(s=O[i.substr(_,2)])){if(Me[s]&swapColor(Re)||/^[a-h]x?[a-h][36]$/.test(i)){if(-1===i.indexOf("x"))return i.slice(0,_)+"x"+i.substr(_)}else if(i.indexOf("x")>-1)return i.replace(/x/g,"");if(T=i.match(/^([KQNRB]?)([a-h][1-8]?|[1-8])x?([a-h][1-8])=?(.?)$/)){if(Me[O[T[2]]])return{from:T[2],to:T[3],promotion:T[4].toLowerCase()};if(/^\d$/.test(T[2])){for(i=0,generateMoves(oe[T[1]],!0),_=0;_<D;++_)if(M[_]>>ee===s&&rank(M[_]>>7&ne)===8-T[2]){if(i)return;i=M[_]}if(i)return moveToSan(i,!0)}return T[1]+T[3]+T[4]}}}else if(Me[O[i.from]]===(V|Re)&&i.to&&i.from[1]===i.to[1]){if(i.from<i.to)return"O-O";if(i.from>i.to)return"O-O-O"}},_hand:[],_history:function(i){return i&&(He=(Ue=i).id),Ue},_lines:function(){return Fe},_hashPosition:hashPosition,_board:function(){return Me}},xe&&load(xe,Ae)||reset(),Oe}return Chess.variants=P,Chess}(),ENGINE_MANAGER=function(i){var _=["bench","d","eval","flip","isready","ponderhit","stop","uci","ucinewgame"],T=[{cmd:"position",args:["fen","startpos","moves","continuation"]},{cmd:"go",args:["binc","btime","confidence","depth","infinite","mate","mindepth","mintime","maxdepth","maxtime","movestogo","movetime","ponder","searchmoves","shallow","winc","wtime"]}],S=["moves","searchmoves"],C=["ponder","infinite","startpos"],P={depth:1,seldepth:1,time:1,nodes:1,multipv:1,cp:1,mate:1,currmovenumber:1,hashfull:1,nps:1,tbhits:1,sbhits:1,cpuload:1,bmc:1,score:2,lowerbound:2,upperbound:2,bestmove:3,ponder:3,baseTurn:3,bestmoveSan:3,ponderSan:3,pv:4,pvSan:4,string:4,refutation:4,currline:4},O=/(?:Total|Final) Evaluation[\s\S]+\n$/i;function createWebWorker(i,s,_){var T=new Worker(i||"stockfish.js"),S={terminate:function terminate(){T.terminate()},postMessage:function postMessage(i){T.postMessage(i)}};function requeue(i){var s=i.concat();i.length=0,s.forEach((function(i){i.cmd?"go"!==i.cmd.substr(0,2)&&_.send(i.cmd,i.cb,i.stream):(clearTimeout(i.timer),_.getBestMove(i.args,i.cb,i.stream))}))}return T.onmessage=function(i){"string"==typeof i.data&&S.onmessage(i.data)},T.onerror=function(C){if(_.fallbackPath&&_.fallbackPath!==i){try{C.preventDefault()}catch(C){}try{T.terminate()}catch(C){}return(T=createWebWorker(_.fallbackPath,s,_)).onmessage=function(i){S.onmessage(i)},requeue(_._activeCommands()),requeue(_._bestMoveQueue()),!1}if(s.onError)return s.onError(C)},S}function createWorker(s,_){var T;return function getSupportedEngines(s,_){_.fallbackPath=s.pathToNonWasmEngine,_.path=s.enginePath||s.pathToEngineWorker,_.wasmPath=s.pathToWasmEngine,s.engines&&(s.engines.multiThreaded&&i.supportsMultithreading()?(_.path=s.engines.multiThreaded.loader,_.wasmPath=s.engines.multiThreaded.engine):s.engines.singleThreaded&&(_.path=s.engines.singleThreaded.loader,_.wasmPath=s.engines.singleThreaded.engine),_.fallbackPath=s.engines.asm||_.fallbackPath)}(s,_),T=_.path,(_.fallbackPath&&"undefined"==typeof WebAssembly||!T)&&(T=_.fallbackPath),_.wasmPath&&(T+="#"+_.wasmPath),createWebWorker(T,s,_)}function parseSearchLine(i){for(var s,_,T=i.split(" "),S=T.length,C="info"===T[0]?1:0,O={mtype:T[0]};C<S;++C)if(_=T[C])if(1===(s=P[_])){for(;!T[++C]&&C<S;);O[_]=Number(T[C])}else if(2===s)O[_]=!0;else if(3===s){for(;!T[++C]&&C<S;);O[_]=T[C]}else for(O[_]=[],++C;C<S;++C){if(P[T[C]]){--C;break}T[C]&&O[_].push(T[C])}return"(none)"!==O.bestmove&&"0000"!==O.bestmove||(O.bestmove=void 0,O.bestmoveSan=void 0),"(none)"!==O.ponder&&"0000"!==O.ponder||(O.ponder=void 0,O.ponderSan=void 0),O}function getFirstWord(i){var s=i.indexOf(" ");return-1===s?i:i.substr(0,s)}return function loadEngine(P,M){var R,D,j,$={},U=[],V=[],Z=null;function bestMoveSearch(){var s,_,T,S,C,P=1,O=[],M=[],R=null,j=V[0].args,U=V[0].cb,Z=V[0].stream,Y=1,X=[],Q=loadEngine._previousCP;function convertpv(i){var s=[],_=M[i]||createSanPv(O[i]);return O[i].forEach((function oneach(i,T){s.push({moveSan:_[T],moveLan:i})})),s}function getpv(i,s,_,T){var S;for(S=O.length-1;S>=0;S-=1)if(O[S][0]===i)return convertpv(S);return _?[{moveSan:s,moveLan:i},{moveSan:T,moveLan:_}]:s?[{moveSan:s,moveLan:i}]:[]}function convertScore(i){0===i.mate?(i.mateIn=0,i.cp=-31800*Y):(i.mateIn=Number(i.mate*Y)||null,"number"!=typeof i.mateIn||isNaN(i.mateIn)||"number"==typeof i.cp?(i.cp*=Y,9===Math.abs(i.cp)&&(i.cp=0),j.normalize&&i.depth<=14&&"number"==typeof Q&&1===i.multipv&&function normalize(i){var s=.03*Math.pow(32,i.depth/14);i.cp=Q+(i.cp-Q)*s}(i)):i.cp=31800*Y*(i.mate/Math.abs(i.mate))),i.score=i.cp/100}function addBestMoveProps(C){var O;C.baseTurn=T,C.cp=s,C.score=s/100,C.mate=_,C.mateIn=R,C.depth=P,C.moveLan=C.bestmove,C.moveLan&&(C.move=i.uciToObj(C.moveLan)[0],(O=S.move(C.move))&&(C.moveSan=C.bestmoveSan=O.san,C.ponder&&(O=S.move(i.uciToObj(C.ponder)[0]))&&(C.ponderSan=O.san,S.undo(!0)),S.undo(!0)))}function createSanPv(s){var _,T,C=s.length,P=[];for(_=0;_<C&&(T=S.move(i.uciToObj(s[_])[0]));++_)P.push(T.san);for(;_>0;--_)S.undo(!0);return P}function createTimeout(){j.timeout&&(clearTimeout(D),V[0].timer=D=setTimeout((function(){$.stop(),U&&(U(),U=void 0)}),j.timeout))}V[0].started=!0,loadEngine._previousCP=null,j.difficulty>=0&&j.difficulty<20?($.setoption("Skill Level",j.difficulty),j.maximumError>=0&&j.maximumError<=4999&&$.setoption("Skill Level Maximum Error",j.maximumError),j.errorProbability>=1&&j.errorProbability<=128&&$.setoption("Skill Level Probability",j.errorProbability)):$.setoption("Skill Level",20),void 0!==j.contempt?$.setoption("Contempt",j.contempt):$.setoption("Contempt","0"),j.multiPv>1?$.setoption("MultiPV",j.multiPv):$.setoption("MultiPV",1),j.movetime||j.wtime&&j.btime||j.depth||(j.btime=j.btime||72e3,j.wtime=j.wtime||72e3),!j.startpos&&j.fen||j.moves||j.variant?(S=i.createGame({fen:j.fen?(C=j.fen,(C+"").replace(/\[([qrbnp]*)\]/i,"/$1").replace(/([0-3])\+([0-3]) (\d+ \d+)/,(function(i,s,_,T){return T+" +"+(3-s)+"+"+(3-_)}))):"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",moves:j.moves,variant:j.variant,disableHashing:!0})).turn()===S.WHITE?T="w":(T="b",Y=-1):(T="w",S=i.createGame({disableHashing:!0})),$.setVariant(j.variant),$.position(j),$.go(j,(function returnBestMove(i){var _=parseSearchLine(i);if(addBestMoveProps(_),P>14&&s<5e3&&s>-5e3&&(loadEngine._previousCP=s),_.pv=getpv(_.moveLan,_.moveSan),1===_.pv.length&&_.ponder&&(_.pv=getpv(_.moveLan,_.moveSan,_.ponder,_.ponderSan)),X.length>1)X.splice(X.indexOf(_.moveLan),1),j.searchmoves=X,j.getNextBest=0,queueBestMoveSearch(j,(function done(){U(_)}),(function streamer(i){Z&&(i.multipv=2,Z(i))}));else if(U)try{U(_)}catch(T){console.error(T)}V.shift(),clearTimeout(D),V.length>0&&bestMoveSearch()}),(function streamInfo(i){var S=parseSearchLine(i);S.score&&(S.baseTurn=T,convertScore(S),!S.multipv&&S.depth&&(S.multipv=1),1!==S.multipv&&0!==S.depth||(s=S.cp,_=S.mate,R=S.mateIn)),S.pv&&Z&&(S.pvSan=createSanPv(S.pv)),!S.pv||S.lowerbound||S.upperbound||(O.push(S.pv),Z&&M.push(S.pvSan)),S.depth>P?P=S.depth:"bestmove"===S.mtype&&addBestMoveProps(S),!Z||0===S.mateIn&&S.pv||Z(S),createTimeout()})),j.getNextBest&&U&&S.moves({verbose:!0}).forEach((function toLan(s){s=i.normalizeMoveObj(s),X.push(s.from+s.to+(s.promotion||""))})),createTimeout()}function queueBestMoveSearch(i,s,_){V.push({args:i,cb:s,stream:_}),1===V.length&&bestMoveSearch()}function cbIfReady(){$.ready&&($.bookLoaded||!$.pathToBook)&&M&&M($)}return $.send=function(s,_,T){var S;!function isPrintingCommand(i){return"ucinewgame"!==i&&"flip"!==i&&"stop"!==i&&"ponderhit"!==i&&0!==i.indexOf("position")&&0!==i.indexOf("setoption")&&0!==i.indexOf("variation")&&0!==i.indexOf("threat-variation")&&0!==i.indexOf("push")&&0!==i.indexOf("pop")&&0!==i.indexOf("serve")&&0!==i.indexOf("speech")}(s=String(s).trim())?S=!0:U[U.length]={cmd:s,cb:_,stream:T},R&&(i.log&&console.log("stdin: "+s),R.postMessage(s),S&&_&&setTimeout(_,0))},$._activeCommands=function(){return U},$._bestMoveQueue=function(){return V},$.quit=function(){if(R&&R.terminate){try{$.send("quit")}catch(i){}R.terminate(),R=null,$.ready=void 0}clearTimeout(D)},_.forEach((function oneach(i){$[i]=function makeSCmd(s,_){$.send(i,s,_)}})),T.forEach((function oneach(i){$[i.cmd]=function makeCCmd(s,_,T){var P=[i.cmd];j&&s.fen&&(s.fen=function convertStockfishVariantFen(i){return(i+"").replace(/^([^/]+)((?:\/[^/]+){7})\/([qrbnp]*)/i,"$1$2[$3]").replace(/( \d+ \d+) \+([0-3])\+([0-3])/,(function(i,s,_,T){return" "+(3-_)+"+"+(3-T)+s}))}(s.fen)),i.args.forEach((function oneach(i){if(s[i]||0===s[i]){if(S.indexOf(i)>-1){if(!s[i]||!s[i].length)return;Array.isArray(s[i])&&(s[i]=s[i].join(" "))}P.push(i),-1===C.indexOf(i)&&P.push(s[i])}})),$.send(P.join(" "),_,T)}})),$.setoption=function(i,s){$.send("setoption name "+i+" value "+s)},$.setVariant=function(i){var s;i!==j&&(s=String(i).toLowerCase().replace(/ |-/g,""),i&&"chess"!==s?"chess960"===s?($.setoption("UCI_Variant","chess"),$.setoption("UCI_Chess960","true")):("threecheck"===s&&(s="3check"),$.setoption("UCI_Variant",s),$.setoption("UCI_Chess960","false")):(s=void 0,$.setoption("UCI_Variant","chess"),$.setoption("UCI_Chess960","false")),j=s)},$.loadBook=function(i,_){$.pathToBook=i,s.loadBook(i,(function onload(i,s){$.book=s,$.bookLoaded=!0,i&&(console.error("Error loading opening book."),console.error(i),$.pathToBook=null,$.bookLoaded=!1),_()}))},$.getBestMove=function(s,_,T){var S;if((s=s||{}).fen=s.fen||s.baseFen,s.is960&&(s.variant="Chess960"),$.bookLoaded&&s.useBook&&(S=function getBookMove(s){var _=i.createGame(s),T=$.book.pick({fen:_.fen(),type:void 0!==s.bookPick?s.bookPick:"random",chess960:"Chess960"===_.header().Variant}),S=T&&_.move(T);if(S)return{moveSan:S.san,moveLan:T,move:{from:S.from,to:S.to,promotion:S.promotion||null},baseTurn:1===_.turn()?"b":"w",pv:[{moveSan:S.san,moveLan:T}],depth:null,score:null,mateIn:null,isBookMove:!0}}(s),S))return setTimeout((function(){S.mtype="bestmove",_(S)}),0);queueBestMoveSearch(s,_,T)},$.stopAll=function(s){var _,T=U.length,S=0;function ondiscard(){0===(S-=1)&&s()}for(V=[],_=0;_<T;_+=1)i.log&&console.log("debug (stop_moves): "+_,getFirstWord(U[_].cmd)),"go"!==getFirstWord(U[_].cmd)||U[_].discard||($.stop(),U[_].discard=!0,s&&(S+=1,U[_].ondiscard=ondiscard));s&&!S&&$.isready(s)},$.restartEngine=function(i){return $.stopAll(),$.quit(),U=[],V=[],$.bookLoaded&&!P.book&&((P=JSON.parse(JSON.stringify(P))).book=$.book),loadEngine(P,i)},$.stopFast=function(i,s){var _;$.stopAll((function(){clearTimeout(_),i($)})),_=setTimeout((function(){$.restartEngine(i)}),s||5e3)},"undefined"!=typeof Worker&&(P.ceeMode&&(!function addCeeInterface(s,_){var T,S,C=1e3,P=0;function createInterruptHook(i){function interruptHook(i){var s=interruptHook.callbacks;for(var _ in interruptHook.callbacks={},interruptHook.original&&interruptHook.original(i),s)s[_](i)}return interruptHook.callbacks={},interruptHook.original=i,interruptHook}function analyze(_,O,M,R){var D,j=Date.now(),$=!1,U=++P;function cleanup(){clearTimeout(D),delete T.callbacks[U],delete S.callbacks[U],$=!0}function handleError(i){$||(cleanup(),R({data:i,action:O,uci:_},_))}function onProcessCrash(s){handleError({msg:"CEE process crashed unexpectedly",code:i.ERROR_CODES.CRASH,exitCode:s,err:new Error("CEE process exited with "+s)})}T.callbacks[U]=onProcessCrash,S.callbacks[U]=onProcessCrash,D=setTimeout((function(){handleError({msg:"CEE timed out",code:i.ERROR_CODES.TIMEOUT,timeout:C,duration:Date.now()-j,err:new Error("CEE timed out")})}),C);for(var V=0;V<_.length;++V)s.send(_[V]);s.send("fetch "+O,(function onFetchDone(i){$||(cleanup(),M(i,_))}),(function onFetchStream(_){_.indexOf("info string CEEError")>=0?handleError({msg:"CEE crashed with error code",code:i.ERROR_CODES.ERROR,log:_.match(/info string CEEError\s*(.*)/)[1],err:new Error(_.match(/info string CEEError\s*(.*)/)[1])}):s.ceeDebug&&_.indexOf("not recognized")>=0&&handleError({msg:"CEE received unknown UCI option (engine.ceeDebug mode on)",option:_,code:i.ERROR_CODES.NONFATAL_ERROR,err:new Error(_)})}))}_.onError=T=createInterruptHook(_.onError),_.onSignal=S=createInterruptHook(_.onSignal),s.fetch=function(s,_,T){var S,C;S=(s=s||[]).action||"analysis",Array.isArray(s)?C=s:(C=s.uciCommands?s.uciCommands.map((function(i){return i})):[],s.startFen&&(s.options=s.options||{},void 0===s.options.ScoreWhiteToMove&&(s.options.ScoreWhiteToMove=!0),void 0===s.options.SerializeLikeCEAC&&(s.options.SerializeLikeCEAC=!0),i.CEE_LIB.addOptions(C,s.options),i.CEE_LIB.addVariant(C,s.variant),i.CEE_LIB.addPosition(C,s.startFen)),i.CEE_LIB.addVariations(C,s.evals&&s.evals[0]),i.CEE_LIB.addVariations(C,s.threats&&s.threats[0],"threat-variation"),(s.moves||[]).forEach((function(_,T){var S=T+1;i.CEE_LIB.addPush(C,_),i.CEE_LIB.addVariations(C,s.evals&&s.evals[S]),i.CEE_LIB.addVariations(C,s.threats&&s.threats[S],"threat-variation")}))),analyze(C,S,_,T)},s.fetch.setTimeout=function(i){C=i},i.ERROR_CODES={TIMEOUT:1,CRASH:2,ERROR:3,NONFATAL_ERROR:4}}($,P),$.ceeVersion=function(){return JSON.parse(JSON.stringify(Z))}),(R=createWorker(P,$)).onmessage=function onmessage(s){var _,T,S,C,M;if(s.indexOf("\n")>-1)for(C=s.split("\n"),M=0;M<C.length;M+=1)onmessage(C[M]);else if(i.log&&console.log("debug (onmessage): "+s),$.stream&&$.stream(s),U.length&&0!==s.indexOf("No such option")&&0!==s.indexOf("Stockfish")&&0!==s.indexOf("Komodo")&&0!==s.indexOf("Explanation Engine")&&0!==s.indexOf("info string variant")){if(T=function determineQueueNum(i,s){var _,T,S,C,P=getFirstWord(i);for(_="uciok"===P||"option"===P?"uci":"readyok"===P||"ready"===P?"isready":"json"===P||i.indexOf("info string CEEError")>=0?"fetch":"bestmove"===P||"info"===P?"go":"other",C=s.length,S=0;S<C;S+=1)if((T=getFirstWord(s[S].cmd))===_||"other"===_&&("d"===T||"eval"===T))return S;return 0}(s,U),(S=U[T]).stream&&!S.discard&&S.stream(s),void 0===S.message?S.message="":""!==S.message&&(S.message+="\n"),S.message+=s,0===s.indexOf("uciok"))$.name=function parseEngineName(i){var s=i.match(/id name ((\S+) ([\d.a-z]+).*)/i);if(s)return{all:s[1].trim(),short:s[2],version:s[3],full:s[2]+" "+s[3],wasm:/ wasm/i.test(i),multithreaded:/ multithreaded/i.test(i)}}(S.message),_=!0;else if(0===s.indexOf("ready"))_=!0;else if(0!==s.indexOf("bestmove")&&"bestmove"!==getFirstWord(s)||"bench"===S.cmd)if("d"===S.cmd)0!==s.indexOf("Legal uci moves")&&0!==s.indexOf("Key is")||(S.done=!0,_=!0);else if(0===S.cmd.indexOf("fetch"))try{var R=S.message.split("\n").filter((function(i){return i.includes("json")})).join("\n");R&&(S.message=JSON.parse(R.replace(/^json /gm,"").replace(/\n/g,"")),_=!0)}catch(j){}else"eval"===S.cmd?O.test(S.message)&&(_=!0):(0===s.indexOf("pawn key")||0===s.indexOf("Nodes/second")||0===s.indexOf("Unknown command"))&&(_=!0);else _=!0,S.message=s;_&&(U.splice(T,1),S.cb&&!S.discard?S.cb(S.message):S.ondiscard&&S.ondiscard())}else if(P.ceeMode&&0===s.indexOf("Explanation Engine")){var D=s.match(/Explanation Engine\s*([0-9]+)\.([0-9]+)/);Z={date:D[1],increment:D[2]}}},P.book&&($.book=P.book,$.bookLoaded=!0,$.pathToBook=P.pathToBook),$.getFenFromMoves=i.getFenFromMoves,$.getLegalMoves=i.getLegalMoves,$.getPositionInfo=i.getPositionInfo,$.isFenValid=i.isFenValid,$.ready=!1,function startUp(){$.uci((function onstart(){P.settings&&Object.keys(P.settings).forEach((function oneach(i){$.setoption(i,P.settings[i])})),$.ready=!0,cbIfReady()}))}(),!$.book&&P.pathToBook&&$.loadBook(P.pathToBook,cbIfReady),$)}},T=function(){var i,T=_(),S="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",C=252,P={4:"p",5:"P",6:"p",8:"n",9:"N",10:"n",16:"b",17:"B",18:"b",32:"r",33:"R",34:"r",64:"q",65:"Q",66:"q",128:"k",129:"K",130:"k"},O=512,M="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!?{~}(^)[_]@#$,./&-*++=",R="qnrbkp";function decodeTCN(i){var s,_,T,S,C=i.length,P=[];for(s=0;s<C;s+=2)S={},_=M.indexOf(i[s]),(T=M.indexOf(i[s+1]))>63&&(S.promotion=R[Math.floor((T-64)/3)],T=_+(_<16?-8:8)+(T-1)%3-1),_>75?S.drop=R[_-79]:S.from=M[_%8]+(Math.floor(_/8)+1),S.to=M[T%8]+(Math.floor(T/8)+1),P.push(S);return P}function uciToObj(i){var s,_,T=i.split(" "),S=T.length,C=[];if(i)for(s=0;s<S;++s)4===(_=T[s]).length?"@"===_[1]?C.push({drop:_[0].toLowerCase(),to:_.substr(2,2)}):C.push({from:_.substr(0,2),to:_.substr(2,2)}):C.push({from:_.substr(0,2),to:_.substr(2,2),promotion:_[4]});return C}function isSameMove(i,s){return!(i.san!==s.san&&(i.to!==s.to||i.from!==s.from&&(i.from||s.from)||i.promotion!==s.promotion&&(i.promotion||s.promotion)||i.drop!==s.drop&&(i.drop||s.drop)))}function getPremoves(i,s,T){var S,C,P,O,M,R,D,j,$,U,V=[],Z=1,Y=8,X=1,Q=8,ee={verbose:!0};for($=3-(U=i.turn()),(O=_("/",s)).turn($),T&&(Z=Y=+T[1],X=Q=T.charCodeAt(0)-96),S=Z;S<=Y;++S)for(C=X;C<=Q;++C)M=String.fromCharCode(C+96)+S,(P=i.get(M))&&P.color===$&&(O.put(P,M,!0),"p"===P.type?(R=String.fromCharCode(C-1+96)+(S+(1===$?1:-1)),D=String.fromCharCode(C+1+96)+(S+(1===$?1:-1)),O.put({type:"n",color:U},R,!0),O.put({type:"n",color:U},D,!0)):"k"===P.type&&"-"!==(j=i.fen().split(" ")[2])&&O.load(O.fen().replace(/^(\S+\s\S\s)(\S+)/,"$1"+j),s,!0,!0),V=V.concat(O.moves(ee)),O.remove(M,!0),"p"===P.type&&(O.remove(R,!0),O.remove(D,!0)));return s&&i.hand()&&(O._hand[$]=18721,V=V.concat(O.moves({verbose:!0}).filter((function(i){return!T||i.to===T})))),V.forEach((function(i){normalizeMoveObj(i)})),V}function makePremove(i,s){var _,S,C,P,O,M=i.header().Variant,R=getPremoves(i,M,s.from),D=3-i.turn();for(_=R.length-1;_>=0;--_)if(isSameMove(S=R[_],s)){C=!0;break}return C?(S.drop?i.put({type:S.drop,color:D},S.to):(P=i.remove(S.from,!0),S.flags===T.FLAGS.KSIDE_CASTLE?(O=i.remove("Chess960"===M?S.to:"h"+S.from[1],!0),i.put(P,"g"+S.from[1],!0),i.put(O,"f"+S.from[1])):S.flags===T.FLAGS.QSIDE_CASTLE?(O=i.remove("Chess960"===M?S.to:"a"+S.from[1],!0),i.put(P,"c"+S.from[1],!0),i.put(O,"d"+S.from[1])):(S.promotion&&(P.type=S.promotion,P.promoted=!0),O=i.get(S.to),i.put(P,S.to,"k"!==P.type&&"r"!==P.type&&(!O||O.color!==D||"r"!==O.type)))),S):s.from&&(i.turn(D),s=i.fixMove(s),i.turn(3-D),s)?makePremove(i,{san:s,from:s.from}):void 0}function getPieces(i,s){var _,T,S,R=s?{}:[],D=i._board();if(s)for(_=112;_>=0;++_)136&_&&(_-=24),(T=D[_])&&(R[S=M[7&_]+(8-(_>>4))]={type:P[T&C],color:3&T,promoted:0!=(T&O),square:S});else for(_=112;_>=0;++_)136&_&&(_-=24),(T=D[_])&&R.push({type:P[T&C],color:3&T,promoted:0!=(T&O),rank:8-(_>>4),file:1+(7&_)});return R}function makeMoves(i,s,_,T){var S,C,P,O,M,R,D,j,$,U;for(_=_||{},"string"==typeof s&&(s=s.trim().split(" ")),P=s.length,S=0;S<P;S+=1){if(M="b"===s[S].board||"B"===s[S].board?i.siblingGame:i,R="string"==typeof s[S].moveLan?uciToObj(s[S].moveLan)[0]:"string"==typeof s[S]?uciToObj(s[S])[0]:s[S].san?s[S].san:s[S],!M.move(R)){if(!_.autoPromote){if(_.skipBadLines)break;return!1}if(!0===_.autoPromote?R.promotion="q":R.promotion=_.autoPromote,!M.move(R)){if(_.skipBadLines)break;return!1}}if(j=(D=M._history())[D.length-1],T&&($=parseInt(T[S],10)),("number"!=typeof $||isNaN($))&&($=parseInt(s[S].time,10)),"number"!=typeof $||isNaN($)||(j.time=$,$=void 0),s[S].firstComment&&(D.initComment=s[S].firstComment),s[S].comment&&(j.comment=s[S].comment),s[S].annotation&&(j.annotation=s[S].annotation),s[S].additionalAnnotation&&(j.additionalAnnotation=s[S].additionalAnnotation),s[S].commands&&(j.commands=s[S].commands),s[S].lines)for(O=s[S].lines.length,C=0;C<O;++C){if(U=i._history().id,i.createVariation(),!makeMoves(i,s[S].lines[C],_)&&!_.skipBadLines)return!1;i.selectLine(U)}}return!0}function extendChess(i){var s,C,P,O,M=-1,R=0;function swapMoveAttributes(i,s){var _={moveTime:i.moveTime,firstComment:i.firstComment,comment:i.comment,annotation:i.annotation,additionalAnnotation:i.additionalAnnotation,commands:i.commands};Object.keys(_).forEach((function(T){i[T]=s[T],s[T]=_[T]}))}i.extended||(i.extended=!0,s={header:i.header,load:i.load,loadPgn:i.loadPgn,createVariation:i.createVariation,undo:i.undo,pgn:i.pgn},i._move=i.move,i.undo=function(){return i.siblingGame?i.deleteBughouseMove(i.curBughouseMove()):i.deletePosition(M,R)},i.getMove=function(_){return _&&("string"==typeof _||_.to&&(_.from||_.drop))&&i._move(_)&&normalizeMoveObj(s.undo())||null},i.premove={queue:O=[],move:function(s){var T;return!(T=makePremove(P=P||_(i.fen(),i.header().Variant),s))||R||M!==i._history().length-1?(O.length||(P=void 0),null):(O.push(T),T)},consume:function(){var s,T,S,C=O.shift();if(C){if(s=i.move(C)){if(P=void 0,T=O.length)for(P=_(i.fen(),i.header().Variant),S=0;S<T;++S)makePremove(P,O[S]);return s}i.premove.cancel()}},moves:function(s){return!R&&M===i._history().length-1&&getPremoves(P||i,i.header().Variant,s)},getPieces:function(s){return getPieces(P||i,s)},fen:function(){return(P||i).fen()},cancel:function(){O.length=0,P=void 0}},i.getPieces=function(s){return getPieces(i,s)},i.material=function(){var s,_,T,S=i.getPieces(),C={imbalance:0,white:{p:8,n:2,b:2,r:2,q:1,count:0},black:{p:8,n:2,b:2,r:2,q:1,count:0}},P={p:1,n:3,b:3,r:5,q:9,k:0};for(s=S.length-1;s>=0;--s)1===S[s].color?(_=C.white,T=C.black):(_=C.black,T=C.white),T[S[s].type]&&--T[S[s].type],_.count+=P[S[s].type];return C.imbalance=C.white.count-C.black.count,C},i.origHistory=i.history,i.history=function(s,_){var T,S,C,P=[],O=i._history(),M=O.length,R=i._lines();for("boolean"==typeof s&&(s={verbose:s}),s=s||{},_&&(s.noParentLines=_),s.toCurrent&&(M=i.ids().move+1);;){if(-1==--M){if(O.id&&!s.noParentLines){M=O.atMoveNode,O=R[O.parentId];continue}break}if(s.verbose){for(S in T={},O[M])if(O[M][S]&&"object"==typeof O[M][S])for(C in T[S]=O[M][S].constructor===Array?[]:{},O[M][S])T[S][C]=O[M][S][C];else T[S]=O[M][S];P.unshift(T)}else P.unshift(O[M].san)}return P},i._getPos=function(_,T){var C,P,O;return"number"!=typeof _&&(_=M),"number"!=typeof T&&(T=R),C=(P=i._lines())[T],_>=0?C[_]:C.id?C.atMoveNode?P[C.parentId][C.atMoveNode-1]:i._getPos(C.atMoveNode-1,C.parentId):(O={fen:s.header().FEN||S,hash:C.hash,initial:!0,ids:{move:-1,line:0}},i.siblingGame&&(O.bughouseOrder=-1),O)},i.move=function(s,_){var T,S,C,P,O=i._history();if(s&&("string"==typeof s||s.to&&(s.from||s.drop))){if(R===O.id&&M<O.length-1||_){if(i.moveForward(_,s))return!0;M<O.length-1&&(i.selectPosition(M+1),i.createVariation(),O=i._history())}i.siblingGame&&(C=i.isDependent?i.siblingGame.fen():i.fen()),(T=i._move(s))&&(normalizeMoveObj(T),R=O.id,S=O[M=O.length-1],P=i._getPos(M-1),i.siblingGame?(S.fen=i.isDependent?i.siblingGame.fen():i.fen(),S.beforeFen=C,S.siblingIds=i.siblingGame.ids()):(S.fen=i.fen(),S.beforeFen=P.fen),P.initial?(S.moveNumber=0,S.previous=null):(S.moveNumber=P.moveNumber+1,S.previous=P.ids),R&&0===M&&i._lines()[O.parentId][O.atMoveNode].move===S.move&&(S.isContinuation=!0),S.flags=T.flags,S.to=T.to,S.from=T.from,S.drop=T.drop,S.capturedStr=T.captured,S.promotion=T.promotion,S.piece=T.piece,T.promoted&&(S.promoted=!0),T.capturedPromotedPawn&&(S.capturedPromotedPawn=!0),S.ids={move:M,line:R})}return T},i.moveDetails=function(s){return(s=s||i._history()[M])&&(s.lines=s.lines||null,s.flags===T.FLAGS.KSIDE_CASTLE?(s.rookFrom="Chess960"===i.header().Variant?s.to:"h"+s.to[1],s.rookTo="f"+s.to[1],s.kingTo="g"+s.to[1]):s.flags===T.FLAGS.QSIDE_CASTLE?(s.rookFrom="Chess960"===i.header().Variant?s.to:"a"+s.to[1],s.rookTo="d"+s.to[1],s.kingTo="c"+s.to[1]):s.flags===T.FLAGS.EP_CAPTURE&&(s.epCapture=s.to[0]+s.from[1])),s},i.header=i.headers=function(_){var T=s.header(_);return i.siblingGame&&extendChess(i.siblingGame),T},i.load=function(_,T,S,C){var P=s.load(_,T,S,C);return i.siblingGame&&extendChess(i.siblingGame),P&&!S&&(M=-1,R=0),P},i.removeEmptyLines=function(){var s,_,T=i._lines();for(s=T.length-1;s>0;--s)T[s].length||(T[s]=void 0,_=!0);_&&i.reorderLines()},i.loadPgn=function(_,T,S){var C=s.loadPgn(_,T,S),P=i._history();return i.removeEmptyLines(),M=P.length-1,(R=P.id)&&i.selectLine(0),C},i.ids=function(){return{move:M,line:R}},i.selectLine=function(s){i.selectPosition(null,s)},i.curBughouseMove=function(){return Math.max(i._getPos().bughouseOrder,i.siblingGame._getPos().bughouseOrder)},i.deleteBughouseMove=function(s){var _,T,S,C=i.curBughouseMove(),P=!1,O=i;if(s>=0)for(C>=s&&i.selectBughouseMove(s-1);;){for(T=(_=O._history()).length,S=0;S<T;++S)if(_[S].bughouseOrder>=s){_.length=S,P=!0;break}if(O===i.siblingGame)break;O=i.siblingGame}return P},i.selectBughouseMove=function(s){var _,T,S=i.isDependent?i.siblingGame:i,C=S;if(-1===s)return C.selectPosition(-1,0,!0),C.siblingGame.selectPosition(-1,0,!0),S.load(S.header().FEN,"Bughouse",!0,!0);for(;;){for(T=(_=C._history()).length-1;T>=0;--T)if(_[T].bughouseOrder===s)return C.selectPosition(_[T].ids.move,0,!0),C.siblingGame.selectPosition(_[T].siblingIds.move,0,!0),S.load(_[T].fen,"Bughouse",!0,!0);if(C===S.siblingGame)return!1;C=S.siblingGame}},i.moveBackward=function(s){var _;if(i.siblingGame)return i.selectBughouseMove(i.curBughouseMove()-1);if(M<=1)if(0===R){if(-1===M)return!1;i.selectPosition(M-1)}else(_=i._getPos(M-1,R)).isContinuation&&!s&&(_=i._getPos(_.ids.move-1,_.ids.line),_=i._getPos(_.ids.move+1,_.ids.line)),i.selectPosition(_.ids.move,_.ids.line);else i.selectPosition(M-1);return!0},i.moveForward=function(s,_){var T,S,C,P,O,D,j=i._lines();if(i.siblingGame)return i.selectBughouseMove(i.curBughouseMove()+1);if("string"==typeof _&&(_={san:_}),!(T=j[R][M+1])||_&&!isSameMove(_,T)){if(_&&T&&T.lines)for(O=T.lines.length,P=0;P<O;++P)if((C=j[T.lines[P]][0])&&isSameMove(_,C)){T=C,D=!0;break}if(!D&&s&&(S=j[R][M])&&S.lines)for(O=S.lines.length,P=0;P<O;++P)if((C=j[S.lines[P]][0])&&C.isContinuation&&(C=j[S.lines[P]][1])&&(!_||isSameMove(_,C))){T=C,D=!0;break}if(!D){try{if(_&&_.san&&(_=i.fixMove(_.san))||_&&_.to&&_.from&&Math.abs(_.to.charCodeAt(0)-_.from.charCodeAt(0))>1&&(_=i.fixMove(_)))return i.moveForward(s,_)}catch($){}return!1}}return i.selectPosition(T.ids.move,T.ids.line)},i.moveVariation=function(s,_){var T,S,C,P=i._lines(),O=P[s];if(O&&O.id)for(S=(T=P[O.parentId][O.atMoveNode].lines).length-1;S>=0;--S)if(T[S]===s&&T[C=S-(_?1:-1)])return T[S]=T[C],T[C]=s,i.reorderLines(),!0;return!1},i.promoteVariation=function(s,_){for(var T,S,C,P,O,D,j=i._lines(),$=j[s];$&&$[0]&&$.id&&(-1!==_||$.parentId);){for(T=j[C=$.parentId],P=$.atMoveNode,$[0].lines=T[P].lines.concat($[0].lines||[]),T[P].lines=void 0,D=T.length-P,S=T.splice(P,D),O=0;O<D;++O)S[O].ids.line=s,S[O].ids.move=O;for(S.id=s,S.parentId=C,S.atMoveNode=P,S.hash=$.hash,0===P?(S.initComment=T.initComment,T.initComment=$.initComment):$.initComment&&(T[P-1].comment=((T[P-1].comment||"")+" "+$.initComment).trim()),j[s]=S,D=$.length,O=0;O<D;++O)$[O].ids.line=C,$[O].ids.move=O+P,T.push($[O]);for(S[0].isContinuation=!!$[0].isContinuation,T[P].isContinuation=!P&&"number"==typeof T.parentId&&j[T.parentId][T.atMoveNode].move===T[0].move,D=T[P].lines.length,O=0;O<D;++O)j[T[P].lines[O]].atMoveNode=P,j[T[P].lines[O]][0]&&(j[T[P].lines[O]][0].isContinuation=j[T[P].lines[O]][0].move===T[P].move);if(R===s?(R=C,M+=P):R===C&&M>=P&&(R=s,M-=P),1===_)break;$=j[s=C]}return void 0!==T&&(i._history(j[R]),i.reorderLines(),!M&&j[R][0].isContinuation&&i.selectPosition(j[R].atMoveNode,j[R].parentId),!0)},i.reorderLines=function(s,_){var T,S,P,O,M,D,j,$,U,V,Z=i._lines(),Y=!1;for(s?U=_.length-1:(s=0,_=[Z[0]],U=0,C=!1),P=(T=Z[s]).length,S=0;S<P;++S)if((O=T[S]).ids.line!==U&&(Y=!0,O.ids.line=U),O.lines)for(M=O.lines.length,D=0;D<M;++D)($=Z[j=O.lines[D]])?($.atMoveNode=S,V=_.length,O.lines[D]=V,$.parentId=U,C||j!==R||(C=!0,R=V),_.push($),Y=i.reorderLines(j,_)||Y):(1===O.lines.length?delete O.lines:O.lines.splice(D,1),--D,--M);return s||i.saveLines(_,!0),Y},i.createVariation=function(){var _,T,S,C=i._history(),P=i._lines();return M===C.length-1?(_=s.createVariation(),C=i._history(),M=C.length-1,R=C.id,_):-1!==M&&(T=[],S=C[M],T.parentId=C.id,T.id=P.length,S.lines||(S.lines=[]),S.lines.push(T.id),T.hash=i._getPos(M-1).hash,T.atMoveNode=M,P.push(T),i.selectPosition(-1,T.id))},i.selectLineEnd=function(s){return i.siblingGame?i.selectBughouseMove(i._history().length+i.siblingGame._history().length-1):("number"!=typeof s&&(s=R),(s!==R||M<i._history().length-1)&&i.selectPosition(null,s,!0))},i.selectLineStart=function(){var s,_;return i.siblingGame?i.selectBughouseMove(-1):R?(M>1||1===M&&!i._getPos(0).isContinuation?s=i._history():(_=i._getPos(-1),s=i._lines()[_.ids.line]),i.selectPosition(s.id?s[1]&&s[0].isContinuation?1:0:-1,s.id)):-1!==M&&i.selectPosition(-1,0)},i.selectPosition=function(_,T,S){var C=i._lines(),P=i._history();if("number"==typeof T&&(T!==R||S)){if(T<0||T>=C.length)return!1;if(P=C[T],"number"!=typeof _)_=P.length-1;else if(_<-1||_>=P.length)return!1;R=T,i._history(P),S=!0}if("number"==typeof _&&(_!==M||S)){if(_<-1||_>=P.length)return!1;s.load(i._getPos(_).fen,s.header().Variant,!0,!0),M=_}return!0},i.resetToMainLine=function(){var s=i._lines();i.selectLineEnd(0),s.length>1&&(s.length=1,i.reorderLines())},i.updateNode=function(s,_,T){var S,C,P=i._lines();for(C in _="number"==typeof _?_:M,S=P[T="number"==typeof T?T:R][_]||P[T],s)S[C]=s[C]},i.updateLineComment=function(s,_){i.updateNode({initComment:s},-1,_)},i.saveLines=function(s,_){var T,S,C,P=i._lines(),O=s.length;for(s!==P&&(P.length=0),S=0;S<O;++S){if(T=s[S],S&&"number"!=typeof T.parentId)return!1;s!==P&&P.push(T),T.id=S}return i._history(i._history()),_||(C=i.ids(),i.selectPosition(-1,0,!0),i.selectPosition(C.move,C.line)),!0},i.deletePosition=function(s,_){var T,S,C=i._lines();return!(!C[_]||!(C[_][s]||-1===s&&0!==_))&&(_&&(0===s||1===s&&C[_][0].isContinuation)&&(s=-1),R>0&&_!==R?(T=function descendsFromMove(i,s,_){for(var T,S=i[s];"number"==typeof(T=S.parentId);){if(T===_)return S.atMoveNode;S=i[T]}return!1}(C,R,_),S=!1!==T&&T>=s):S=_===R&&s<=M,S&&(s>1?i.selectPosition(s-1,_):(i.selectPosition((C[_][0].isContinuation||1===s)&&C[_][1]?1:0,_),i.moveBackward())),s>0?C[_].length=s:_?C[_]=null:C[0].length=0,i.reorderLines(),i.ids())},i.mark=function(s,_){var T=M<0?i._lines()[R]:i._lines()[R][M],S=s.type,C=1;s.color&&("arrow"===S?i.mark({key:s.color+s.key,type:"cal"},_):"square"===S&&i.mark({key:s.color+s.key,type:"csl"},_)),"cal"!==S&&"csl"!==S&&(S="c_"+S,C=0),T.commands&&T.commands[S]&&(T.commands[S]=T.commands[S].split(",").filter((function rm(i){return i.slice(C).split(";")[0]!==s.key.slice(C)})).join(","),T.commands[S]||delete T.commands[S]),_||(T.commands||(T.commands={}),T.commands[S]=(T.commands[S]?T.commands[S]+",":"")+s.key+(s.data?";"+s.data.join(";"):""))},i.markings=function(){var s,_,T,S,C,P,O,D,j={},$=M<0?i._lines()[R]:i._lines()[R][M],U={cal:"arrow",csl:"square"};for(_ in $.commands){if(T=$.commands[_],U[_])_=U[_],S=0;else{if("c_"!==_.substr(0,2))continue;_=_.slice(2),S=1}for(j[_]=j[_]||{},P=(C=T.split(",")).length,s=0;s<P;++s)S?(D=(O=C[s].split(";")).shift(),j[_][D]=j[_][D]||{type:_,key:D},j[_][D].data=O):(D=C[s].slice(1),j[_][D]=j[_][D]||{type:_,key:D},j[_][D].color=C[s][0])}return j},i.clearMarkings=function(){var s,_=M<0?i._lines()[R]:i._lines()[R][M];for(s in _.commands)/^c[sa]l$|^c_/.test(s)&&delete _.commands[s]},i.pgn=function(_){var T,S=i.ids();return i.selectLineEnd(0),T=s.pgn(_),i.selectPosition(S.move,S.line),T},i.loadMoves=function(s,_){var T,S,C,P,O;if(_=_||{},"string"==typeof s&&(s=decodeTCN(s)),s){for(_.atCurrent||i.selectPosition(-1,0),C=R,S=s.length,T=0;T<S;++T){if(!((P=i.move(s[T],!0))||(s[T].promotion=!0===_.autoPromote?"q":_.autoPromote,P=i.move(s[T],!0))))return!1;R!==C&&"merge"!==_.method&&(i.promoteVariation(R,1),"promote"!==_.method&&(i._history()[M].lines=void 0,i.reorderLines()),C=R)}if("promote"===_.method){if(S){for(i._history()[M+1]&&(P=i._history()[M],i.createVariation(),i.move(P),swapMoveAttributes(i._history()[0],P),i.promoteVariation(R,1)),T=(O=i._lines()).length-1;T>=0;--T)1===O[T].length&&O[T][0].isContinuation&&(swapMoveAttributes(O[T][0],O[O[T].parentId][O[T].atMoveNode]),O[T].length=0);i.removeEmptyLines()}}else"merge"!==_.method&&i.deletePosition(M+1,R)}return!0})}function createGame(i){var s,T;if((i=i||{}).game)return i.game;if(s=_(),i.analysis&&extendChess(s),i.disableHashing&&s.hashing(!1),i.pgn){if(!(s.loadPgn(i.pgn,i.index,i.options)||"detect"===i.variant&&_.variants.some((function(_){return i.options=i.options||{},i.options.variant=_,s.loadPgn(i.pgn,i.index,i.options)}))))return!1}else{if(i.headers&&(i.variant=i.headers.Variant||i.variant,i.fen||(i.fen=i.headers.FEN)),"detect"===i.variant&&i.fen&&(i.fen.indexOf("|")>-1?i.variant="Bughouse":9===i.fen.split("/").length?i.variant="Crazyhouse":i.fen.indexOf("+")>-1?i.variant="3-check":i.variant=void 0),(i.fen||i.variant)&&!s.load(i.fen||S,i.variant))return!1;i.headers&&"object"==typeof i.headers&&!Array.isArray(i.headers)&&s.header(i.headers)}if(i.tcn)if("object"==typeof i.tcn){if(!function playBughouseTCN(i,s,_){var T,S,C,P=[decodeTCN(s[0]),decodeTCN(s[1])],O=[0,0],M=[0,0],R=P[0].length+P[1].length,D=Math.max(0|_[0][0],0|_[0][1],0|_[1][0],0|_[1][1]),j=[0,0],$=[0,0];for(T=[[D+=600-D%600,D],[D,D]];R--;){if($[0]=j[0]+T[0][M[0]]-_[0][O[0]]||0,$[1]=j[1]+T[1][M[1]]-_[1][O[1]]||0,P[S=$[0]<=$[1]?0:1][O[S]]||(S^=1),(!(C=S?i.siblingGame:i).move(P[S][O[S]])||R&&C.inCheckmate()&&C.undo(!0))&&!(C=(S^=1)?i.siblingGame:i).move(P[S][O[S]]))return!1;C._history()[O[S]].time=_[S][O[S]],T[S][M[S]]=_[S][O[S]],j[S]=$[S],M[S]^=1,++O[S]}return!0}(s,i.tcn,i.timestamps||[[],[]]))return!1}else T=decodeTCN(i.tcn);else T=i.moves;return!(T&&!makeMoves(s,T,i,i.timestamps))&&s}function normalizeMoveObj(i){return i&&(i.piece&O&&(i.promoted=!0),i.piece=P[i.piece&C],i.captured&&(i.captured&O&&(i.capturedPromotedPawn=!0),i.captured=P[255&i.captured]),i.promotion&&(i.promotion=P[i.promotion&C]),void 0!==i.drop&&(i.drop="pnbrq"[i.drop])),i}function normalizeHistory(i){var s,_,T,S,C,P,O,M=i.history(!0,!0);if(i.siblingGame){for(s=i.siblingGame.history(!0,!0),T=M.length+s.length,_=[],S=0;S<T;++S)!M.length||s.length&&s[0].bughouseOrder<M[0].bughouseOrder?(C=s.shift()).board="b":(C=M.shift()).board="a",_.push(C);M=_}for(T=M.length,S=0;S<T;++S)if((P=M[S]).fen||normalizeMoveObj(P),P.lines)for(O=P.lines.length-1;O>=0;--O)i.selectLine(P.lines[O]),P.lines[O]=normalizeHistory(i).moves;return{moves:M}}function getLegalMoves(i,s){var _,S,C,P;if("string"==typeof i){if((S=T).reset(),!S.load(i,s))return null}else S=createGame(i);for(P=(_=S.moves({verbose:!0})).length,C=0;C<P;++C)normalizeMoveObj(_[C]);return _}function jce(s,_){return(i=i||ENGINE_MANAGER(jce))(s,_)}return jce.supportsMultithreading=function(){var i,s=Boolean(jce._hasThreads);if("boolean"!=typeof jce._hasThreads){try{(i=new Worker("data:application/javascript,")).postMessage(new SharedArrayBuffer(1)),s=!0}catch(_){}try{i.terminate()}catch(_){}jce._hasThreads=s}return s},jce.gameFingerprints=function gameFingerprints(i){var _,T,C,P,O,M,R,D,j,$=createGame(i),U=[""],V=[];if(!$)return!1;for(j=(D=$.header()).Variant||"",M=$.hashes(),_="function"==typeof $.origHistory?$.origHistory(!0):$.history(!0),O=M.length,T=[M[0][0],M[0][1]],V.push(s.to64BitHex(T)+j),M[0]=s.to64BitHex(M[0]),C=1;C<O;++C)T[0]=(T[0]^M[C][0]*(C+58465))>>>0,T[1]=(T[1]^M[C][1]*(C+984))>>>0,M[C]=s.to64BitHex(M[C]),V.push(s.to64BitHex(T)+j),normalizeMoveObj(_[P=C-1]),R=(_[P].from?_[P].from:_[P].drop.toUpperCase()+"@")+_[P].to+(_[P].promotion||""),P&&(R=U[P]+" "+R),U.push(R);return{startingFen:D.FEN||S,hashes:M,fingerprints:V,moves:U,variant:D.Variant}},jce.getFenFromMoves=function getFenFromMoves(i,s,_){return T.reset(),T.load(i,_),!(s&&!makeMoves(T,s))&&T.fen()},jce.getLegalMoves=getLegalMoves,jce.getPositionInfo=function getPositionInfo(i,s,_){var S,C,P={gameOver:!1,check:!1,checkmate:!1,draw:!1,stalemate:!1,threefold:!1,insufficient:!1};if(Array.isArray(s)||(_=s,s=null),"boolean"==typeof _?(S=_,_={}):S=(_=_||{}).variant,"string"==typeof i){if((C=T).reset(),0!==C.validateFen(i,S)||!C.load(i,S))return!1}else C=createGame(i);return!(s&&!makeMoves(C,s))&&(_.getLegalMoves&&(P.legalMoves=getLegalMoves({game:C})),C.inCheck()?(P.check=!0,P.checkmate=C.inCheckmate()):P.stalemate=C.inStalemate(),P.threefold=C.inThreefoldRepetition(),P.insufficient=C.insufficientMaterial(_.color),P.fiftyMoveRule=C.in50MoveRule(),P.draw=P.stalemate||P.threefold||P.insufficient||P.fiftyMoveRule||C.inDraw(),_.skipValidation||(P.isValid=C.isPositionValid(_)),S&&(P.variantWin=C.isVariantWin(),void 0===P.variantWin&&(P.variantWin=C.isBughouseWin())),P.gameOver=P.checkmate||P.draw||Boolean(P.variantWin),P)},jce.isFenValid=function isFenValid(i,s){return 0===T.validateFen(i,s)},jce.encodeTCN=function encodeTCN(i){var s,_,T,S,C="";for(Array.isArray(i)||(i=[i]),_=i.length,s=0;s<_;s+=1)T=i[s].drop?79+R.indexOf(i[s].drop):M.indexOf(i[s].from[0])+8*(i[s].from[1]-1),S=M.indexOf(i[s].to[0])+8*(i[s].to[1]-1),i[s].promotion&&(S=3*R.indexOf(i[s].promotion)+64+(S<T?9+S-T:S-T-7)),C+=M[T]+M[S];return C},jce.decodeTCN=decodeTCN,jce.uciToObj=uciToObj,jce.generatePgn=function generatePgn(i){var s;return(i=i||{}).disableHashing=!0,!!(s=createGame(i))&&s.pgn(i)},jce.pgnToFen=function pgnToFen(i,s){var _,S,C=[];if(T.reset(),!T.loadPgn(i))return!1;if(_=T.moveCount(),"number"==typeof s){for(s<0&&(s=_+s+1),S=_-1;S>=s&&S>=0;S-=1)T.undo();return T.fen()}for(S=0;S<=_;S+=1)C.unshift(T.fen()),T.undo();return C},jce.pgnToJson=function pgnToJson(i,s,_){var S,C=[],P=T;return"number"!=typeof s&&(_=s,s=void 0),S=P.tokenizePgn(i,_),s<0&&(s=S.length+s),!!S&&(_&&_.includeFen&&(P=createGame({analysis:!0})),S.forEach((function(i,T){var S,O;T===s||void 0===s?P.loadPgn([i],0,_)?(O=normalizeHistory(P),S=P.header(),C.push({headers:S,moves:O.moves})):C.push(!1):C.push(void 0)})),"number"==typeof s?C[s]:C)},jce.sanToObj=function sanToObj(i,s,_){return T.reset(),!!T.load(s,_)&&normalizeMoveObj(T.move(i))},jce.completeFen=T.completeFen,jce.shortenFen=function shortenFen(i,s){return T.completeFen(i).split(" ").slice(0,s||4).join(" ")},jce.createGame=createGame,jce.getPositionDetails=function getPositionDetails(i,s){var _,T,S,C;if((i=i||{}).disableHashing=!0,!(_=createGame(i)))return null;if(s){if(!(S=_.move(s)))return null;_.extended||normalizeMoveObj(S)}return C=_.fen(),i.skipValidation||_.isPositionValid(i)?(T=C.split(" "),{fen:C,pieces:getPieces(_),sideToMove:_.turn(),castling:T[2],epSquare:"-"===T[3]?null:T[3],halfMoves:+T[4],moveNumber:+T[5],move:S,hand:_.hand(),checks:_.checks()}):null},jce.predict=function predict(i,s){var _=Math.min(Math.max(.20773843*Math.atan(2.49085889*i/100-2.47841945*s/100)+.02262979*i/100-.02256839*s/100+.52239679,0),1),T=Math.min(Math.max(-.20720905*Math.atan(2.49626837*i/100-2.48220286*s/100)+-.02352551*i/100+.02172627*s/100+.49443923,0),1),S=Math.min(Math.max(Math.exp(.037043456*i/100+.178106427*s/100-8.069742932)+.004823544*Math.exp(-1.364136591*Math.pow(i/100-s/100,2))+-.001625539,0),1),C=_+T+S;return{w:_/C,b:T/C,d:S/C}},jce.normalizeMoveObj=normalizeMoveObj,jce.FLAGS=T.FLAGS,jce.loadECO=function loadECO(i,_){s.loadBook(i,(function onload(i,T){if(!T||!T.json)return _(i||new Error("Invalid book"));_(i,(function queryECO(i){var _,S,C,P,O,M,R,D,j;if(i.hash)S="string"==typeof i.hash?[s.hex64ToDec(i.hash)]:[i.hash],P=1;else{if(!(_=createGame(i)))return!1;P=(S=_.hashes()).length}for(C=0;C<P;++C)if(O=T.json[s.to64BitHex(S[C])]){if(O.constructor===Array)if(M&&-1===O[0].m.indexOf(M.m)){for(D=O.length-1;D>=0;--D)if(!D||-1!==O[D].m.indexOf(M.m)){(j=O[D]).e=O[0].e,j.s=O[0].s,j.mate=O[0].mate,j.v=O[0].v,j.h=O[0].h,j.n=j.n||O[0].n,j.u=j.u||O[0].u,j.c=j.c||O[0].c;break}}else j=O[0];else j=O;(j.n||i.allowNameless)&&(M=j)}else i.mustEndInBook&&(M=void 0);if(M)return R={name:M.n},M.m&&(R.moves=M.m),void 0!==M.d&&(R.sdiff=M.d/100),M.c&&(R.code=M.c,R.url=M.u||M.n.replace(/[\u00e1-\u00e5]/g,"a").replace(/[\u0107\u010d]/g,"c").replace(/[\u00e9\u00e8\u0117\u0113]/g,"e").replace(/[\u00f3\u00f6\u00f8]/g,"o").replace(/[\u016f\u00fc]/g,"u").replace(/['+,]/g,"").replace(/[^a-z0-9.]+/gi,"-").replace(/(with-\d|St)\.+-?/,"$1-")),M.e?(R.eval=M.e,R.depth=M.h,R.score=M.e[0].cp/100,void 0!==M.e[0].mate&&(R.mate=M.e[0].mate)):(R.score=M.s/100,void 0!==M.mate&&(R.mate=M.mate)),M.v&&(R.bad=!0),R}),T.json)}))},jce.CEE_LIB={addOptions:function(i,s){for(var _ in s)void 0!==s[_]&&i.push("setoption name "+_+" value "+s[_]);return i},addVariations:function(i,s,_){var T,S;s=s||[],_=_||"variation";for(var C=0;C<s.length;++C)(T=s[C]).pv=Array.isArray(T.pv)&&T.pv.join(" ")||T.pv||"",S=_+" "+T.pv,"number"==typeof T.mateIn?S+=" mate "+T.mateIn:"number"==typeof T.mate?S+=" mate "+T.mate:S+=" cp "+Math.round(T.cp),"number"==typeof T.depth&&(S+=" depth "+T.depth),i.push(S);return i},addPush:function(i,s){var _;return"string"==typeof s&&(s={moveLan:s}),_="push "+s.moveLan,s.isBook&&(_+=" isBook"),s.isRetry&&(_+=" isRetry"),i.push(_),i},addPosition:function(i,s){return i.push("position fen "+s),i},addVariant:function(i,s){return"chess960"===String(s).toLowerCase().replace(/ |-/g,"")?(i.push("setoption name UCI_Variant value chess"),i.push("setoption name UCI_Chess960 value "+!0)):(i.push("setoption name UCI_Variant value chess"),i.push("setoption name UCI_Chess960 value "+!1)),i}},jce}();
/*!
 * Chess.com (c) 2020
 *
 * A distant fork of chess.js - BSD (c) 2014, Jeff Hlywa (jhlywa@gmail.com)
 */i.exports=T}();
/*!
 * Chess.com (c) 2020 | all rights reserved
 */
/*!
 * A distant fork of chess.js - BSD (c) 2014, Jeff Hlywa (jhlywa@gmail.com)
 */},41914:function(i,s){"use strict";s.Z={component:"board-tab-item-underlined-component",active:"board-tab-item-underlined-active"}},72838:function(i,s){"use strict";s.Z={component:"share-menu-share-link-component",input:"share-menu-share-link-input",action:"share-menu-share-link-action",icon:"share-menu-share-link-icon",message:"share-menu-share-link-message","message-enter":"share-menu-share-link-message-enter","message-leave-to":"share-menu-share-link-message-leave-to","message-enter-active":"share-menu-share-link-message-enter-active","message-leave-active":"share-menu-share-link-message-leave-active"}},37857:function(i,s){"use strict";s.Z={component:"share-menu-tab-selector-component",tab:"share-menu-tab-selector-tab"}},61155:function(i,s){"use strict";s.Z={content:"share-menu-content",header:"share-menu-header",share:"share-menu-share",tab:"share-menu-tab"}},69925:function(i,s){"use strict";s.Z={button:"download-button-button"}},11960:function(i,s){"use strict";s.Z={bold:"share-menu-tab-embed-bold",header:"share-menu-tab-embed-header",inactive:"share-menu-tab-embed-inactive",scrollable:"share-menu-tab-embed-scrollable",accordion:"share-menu-tab-embed-accordion",controls:"share-menu-tab-embed-controls",stretch:"share-menu-tab-embed-stretch",select:"share-menu-tab-embed-select",component:"share-menu-tab-embed-component",section:"share-menu-tab-embed-section",first:"share-menu-tab-embed-first",flex:"share-menu-tab-embed-flex",half:"share-menu-tab-embed-half",heading:"share-menu-tab-embed-heading",code:"share-menu-tab-embed-code",content:"share-menu-tab-embed-content",label:"share-menu-tab-embed-label",input:"share-menu-tab-embed-input",toggles:"share-menu-tab-embed-toggles",toggle:"share-menu-tab-embed-toggle"}},93228:function(i,s){"use strict";s.Z={download:"share-menu-tab-event-download",heading:"share-menu-tab-event-heading",section:"share-menu-tab-event-section"}},61302:function(i,s){"use strict";s.Z={component:"share-menu-tab-gif-component",link:"share-menu-tab-gif-link",gif:"share-menu-tab-gif-gif",square:"share-menu-tab-gif-square",button:"share-menu-tab-gif-button"}},89922:function(i,s){"use strict";s.Z={component:"share-menu-tab-image-component",image:"share-menu-tab-image-image"}},7770:function(i,s){"use strict";s.Z={component:"share-menu-tab-pgn-component",button:"share-menu-tab-pgn-button",heading:"share-menu-tab-pgn-heading",pgn:"share-menu-tab-pgn-pgn",section:"share-menu-tab-pgn-section",textarea:"share-menu-tab-pgn-textarea",toggle:"share-menu-tab-pgn-toggle",icon:"share-menu-tab-pgn-icon",toggles:"share-menu-tab-pgn-toggles"}},36621:function(i,s){"use strict";s.Z={component:"social-share-component",preloader:"social-share-preloader",wrapper:"social-share-wrapper",expanded:"social-share-expanded",primary:"social-share-primary",link:"social-share-link",icon:"social-share-icon",secondary:"social-share-secondary",visible:"social-share-visible",facebook:"social-share-facebook",twitter:"social-share-twitter",reddit:"social-share-reddit",google:"social-share-google",more:"social-share-more","more-icon":"social-share-more-icon"}},52870:function(i,s){"use strict";s.Z={component:"tinymce-component"}},7504:function(i,s,_){"use strict";function _arrayLikeToArray(i,s){(null==s||s>i.length)&&(s=i.length);for(var _=0,T=new Array(s);_<s;_++)T[_]=i[_];return T}function _toConsumableArray(i){return function _arrayWithoutHoles(i){if(Array.isArray(i))return _arrayLikeToArray(i)}(i)||function _iterableToArray(i){if("undefined"!=typeof Symbol&&null!=i[Symbol.iterator]||null!=i["@@iterator"])return Array.from(i)}(i)||function _unsupportedIterableToArray(i,s){if(i){if("string"==typeof i)return _arrayLikeToArray(i,s);var _=Object.prototype.toString.call(i).slice(8,-1);return"Object"===_&&i.constructor&&(_=i.constructor.name),"Map"===_||"Set"===_?Array.from(i):"Arguments"===_||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_)?_arrayLikeToArray(i,s):void 0}}(i)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}_.d(s,{eI:function(){return createClient},kr:function(){return createContext},ko:function(){return createExtension},QB:function(){return initApp},DP:function(){return initControllers}});_(97326),_(60136);_(89611);_(98852);function asyncGeneratorStep(i,s,_,T,S,C,P){try{var O=i[C](P),M=O.value}catch(R){return void _(R)}O.done?s(M):Promise.resolve(M).then(T,S)}function asyncToGenerator_asyncToGenerator(i){return function(){var s=this,_=arguments;return new Promise((function(T,S){var C=i.apply(s,_);function _next(i){asyncGeneratorStep(C,T,S,_next,_throw,"next",i)}function _throw(i){asyncGeneratorStep(C,T,S,_next,_throw,"throw",i)}_next(void 0)}))}}var T=_(87757),S=_.n(T),C=_(52439),P=_(23992);function createClient(i){return Object.keys(i).forEach((function(s){"function"==typeof i[s]&&(i[s]=i[s].bind(i))})),i}function _initClient(){return(_initClient=asyncToGenerator_asyncToGenerator(S().mark((function _callee2(i,s){return S().wrap((function _callee2$(_){for(;;)switch(_.prev=_.next){case 0:return _.prev=0,_.next=3,i.init(s);case 3:_.next=8;break;case 5:_.prev=5,_.t0=_.catch(0),console.error(_.t0);case 8:case"end":return _.stop()}}),_callee2,null,[[0,5]])})))).apply(this,arguments)}function createExtension(i){return function(s){return Object.assign(i.context,s),i}}function createContext(){return{}}function initController(i){if("function"==typeof i)initController(i());else{if(i instanceof Promise)return i.then((function(i){return initController(i.default)}));if(document.querySelector(i.el))return new Promise((function(s){new(C.default.extend({mounted:s}))(i).$mount()}))}}try{0}catch(O){}function mergeArray(i,s){var _=[];return i[s]instanceof Array?_.push.apply(_,_toConsumableArray(i[s])):i[s]&&console.warn("".concat(s," should be array")),i.extensions&&i.extensions.forEach((function(i){i[s]instanceof Array?_.push.apply(_,_toConsumableArray(i[s])):i[s]&&console.warn("extension ".concat(s," should be array"))})),_}function mergeObject(i,s){var _={};return i[s]&&Object.assign(_,i[s]),i.extensions&&i.extensions.forEach((function(i){i[s]&&Object.assign(_,i[s])})),_}function initControllers(i){return Promise.all(i.map(initController))}function initElements(i){return _initElements.apply(this,arguments)}function _initElements(){return(_initElements=asyncToGenerator_asyncToGenerator(S().mark((function _callee3(i){return S().wrap((function _callee3$(s){for(;;)switch(s.prev=s.next){case 0:Object.keys(i).forEach((function(s){customElements.define(s,i[s])}));case 1:case"end":return s.stop()}}),_callee3)})))).apply(this,arguments)}function initClients(i){var s=new Promise((function(_){setTimeout((function(){Promise.all(i.map((function(i){return function initClient(i,s){return _initClient.apply(this,arguments)}(i,s)}))).then((function(){return _()}))}),0)}));return s}function initWithHooks(i,s,_,T){return _initWithHooks.apply(this,arguments)}function _initWithHooks(){return(_initWithHooks=asyncToGenerator_asyncToGenerator(S().mark((function _callee4(i,s,_,T){return S().wrap((function _callee4$(S){for(;;)switch(S.prev=S.next){case 0:if(!s){S.next=11;break}return null==_||_(s),S.prev=2,S.next=5,i(s);case 5:S.next=10;break;case 7:S.prev=7,S.t0=S.catch(2),console.error(S.t0);case 10:null==T||T(s);case 11:case"end":return S.stop()}}),_callee4,null,[[2,7]])})))).apply(this,arguments)}function initOptions(i){return _initOptions.apply(this,arguments)}function _initOptions(){return(_initOptions=asyncToGenerator_asyncToGenerator(S().mark((function _callee5(i){var s,_,T,C;return S().wrap((function _callee5$(S){for(;;)switch(S.prev=S.next){case 0:return s=i.elements,_=i.controllers,T=i.clients,C=i.hooks,S.next=3,Promise.all([initWithHooks(initElements,s,null==C?void 0:C.onBeforeInitElements,null==C?void 0:C.onAfterInitElements),initWithHooks(initControllers,_,null==C?void 0:C.onBeforeInitControllers,null==C?void 0:C.onAfterInitControllers),initWithHooks(initClients,T,null==C?void 0:C.onBeforeInitClients,null==C?void 0:C.onAfterInitClients)]);case 3:case"end":return S.stop()}}),_callee5)})))).apply(this,arguments)}function initApp(i){return _initApp.apply(this,arguments)}function _initApp(){return(_initApp=asyncToGenerator_asyncToGenerator(S().mark((function _callee6(i){var s,_,T,C,O,M,R;return S().wrap((function _callee6$(S){for(;;)switch(S.prev=S.next){case 0:return T=(0,P.ref)(mergeArray(i,"state")),C=mergeObject(i,"elements"),O=mergeArray(i,"controllers"),M=mergeArray(i,"clients"),R=i.hooks,S.next=7,initWithHooks(initOptions,{state:T,elements:C,controllers:O,clients:M,hooks:R},null===(s=i.hooks)||void 0===s?void 0:s.onBeforeInit,null===(_=i.hooks)||void 0===_?void 0:_.onAfterInit);case 7:case"end":return S.stop()}}),_callee6)})))).apply(this,arguments)}},35174:function(i,s,_){"use strict";function createEventEmitter(){const i=[];return{emit:function emit(s,_){let T;for(T of i)T.type!==s&&"all"!==T.type||T.handler(_)},listeners:i,off:off,offAll:function offAll(i){return off({handler:i,type:"all"})},offMany:function offMany(i=[]){i.forEach((i=>off(i)))},on:on,onAll:function onAll(i){on("all",i)},onMany:function onMany(i=[],s){i.forEach((i=>on(i,s)))},once:function once(s,_){const T={handler:(...i)=>{off(T),_(...i)},type:s};i.push(T)}};function off(s){const _=i.findIndex((i=>s.type===i.type&&s.handler===i.handler));-1!==_&&i.splice(_,1)}function on(s,_){const T={handler:_,type:s};i.push(T)}}_.d(s,{I:function(){return createEventEmitter}})},73167:function(i,s,_){"use strict";function pick(i,s){return s.reduce(((s,_)=>(Object.prototype.hasOwnProperty.call(i,_)&&(s[_]=i[_]),s)),{})}_.d(s,{ei:function(){return pick}})},92591:function(i,s,_){"use strict";function noop(){}function createQueue(i=!0){const s=[];let _=!1;return{add:function add(T,...S){let C=noop,P=noop;const O=new Promise(((i,s)=>{P=i,C=s}));s.push({fn:T,params:S,reject:C,resolve:P}),i&&!1===_&&flush();return O},clear:function clear(){_=!1,s.length=0},flush:flush,getEntries:function getEntries(){return s}};async function flush(){const i=s.shift();if(i){_=!0;try{const s=await i.fn(...i.params);return i.resolve(s),flush()}catch(T){i.reject(T)}}else _=!1}}_.d(s,{j:function(){return createQueue}})},40185:function(i,s){"use strict";var _=function toUint8(i){return i instanceof Uint8Array?i:new Uint8Array(i&&i.buffer||i,i&&i.byteOffset||0,i&&i.byteLength||0)};s.lx=function concatTypedArrays(){for(var i=arguments.length,s=new Array(i),T=0;T<i;T++)s[T]=arguments[T];var S=s.reduce((function(i,s){return i+=s&&(s.byteLength||s.length)||0}),0),C=new Uint8Array(S),P=0;return s.forEach((function(i){i=_(i),C.set(i,P),P+=i.byteLength})),C},s.qX=function stringToBytes(i,s){void 0===s&&(s=!1);return"string"!=typeof i&&i&&"function"==typeof i.toString&&(i=i.toString()),"string"!=typeof i?[]:(s||(i=unescape(encodeURIComponent(i))),i.split("").map((function(i){return 255&i.charCodeAt(0)})))},s.Ki=_},78044:function(i,s,_){"use strict";var T=function _interopDefault(i){return i&&"object"==typeof i&&"default"in i?i.default:i}(_(58908)),S={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},C=["video","audio","text"],P=["Video","Audio","Text"],O=function translateLegacyCodec(i){return i?i.replace(/avc1\.(\d+)\.(\d+)/i,(function(i,s,_){return"avc1."+("00"+Number(s).toString(16)).slice(-2)+"00"+("00"+Number(_).toString(16)).slice(-2)})):i},M=function translateLegacyCodecs(i){return i.map(O)},R=function parseCodecs(i){void 0===i&&(i="");var s=i.split(","),_={},T=[];return s.forEach((function(i){var s;i=i.trim(),C.forEach((function(T){var C=S[T].exec(i.toLowerCase());if(C&&!(C.length<=1)){s=T;var P=i.substring(0,C[1].length),O=i.replace(P,"");_[T]={type:P,details:O}}})),s||T.push(i)})),T.length&&(_.unknown=T),_},D=function isAudioCodec(i){return void 0===i&&(i=""),S.audio.test(i.trim().toLowerCase())},j=function isTextCodec(i){return void 0===i&&(i=""),S.text.test(i.trim().toLowerCase())},$=function getMimeForCodec(i){if(i&&"string"==typeof i){var s=i.toLowerCase().split(",").map((function(i){return O(i.trim())})),_="video";1===s.length&&D(s[0])?_="audio":1===s.length&&j(s[0])&&(_="application");var T="mp4";return s.every((function(i){return S.mp4.test(i)}))?T="mp4":s.every((function(i){return S.webm.test(i)}))?T="webm":s.every((function(i){return S.ogg.test(i)}))&&(T="ogg"),_+"/"+T+';codecs="'+i+'"'}};s.lA="mp4a.40.2",s.xz="avc1.4d400d",s.p7=function browserSupportsCodec(i){return void 0===i&&(i=""),T.MediaSource&&T.MediaSource.isTypeSupported&&T.MediaSource.isTypeSupported($(i))||!1},s.Jg=function codecsFromDefault(i,s){if(!i.mediaGroups.AUDIO||!s)return null;var _=i.mediaGroups.AUDIO[s];if(!_)return null;for(var T in _){var S=_[T];if(S.default&&S.playlists)return R(S.playlists[0].attributes.CODECS)}return null},s._5=$,s.KL=D,s.tf=function isVideoCodec(i){return void 0===i&&(i=""),S.video.test(i.trim().toLowerCase())},s.Hi=function muxerSupportsCodec(i){return void 0===i&&(i=""),i.toLowerCase().split(",").every((function(i){i=i.trim();for(var s=0;s<P.length;s++){if(S["muxer"+P[s]].test(i))return!0}return!1}))},s.kS=R,s.ws=O},49352:function(i,s){"use strict";var _=function toUint8(i){return i instanceof Uint8Array?i:new Uint8Array(i&&i.buffer||i,i&&i.byteOffset||0,i&&i.byteLength||0)},T=function bytesToString(i){if(!i)return"";i=Array.prototype.slice.call(i);var s=String.fromCharCode.apply(null,_(i));try{return decodeURIComponent(escape(s))}catch(T){}return s},S=function id3Size(i,s){void 0===s&&(s=0);var T=(i=_(i))[s+6]<<21|i[s+7]<<14|i[s+8]<<7|i[s+9];return(16&i[s+5])>>4?T+20:T+10},C=function getId3Offset(i,s){return void 0===s&&(s=0),(i=_(i)).length-s<10||"ID3"!==T(i.subarray(s,s+3))?s:getId3Offset(i,s+=S(i,s))},P={aac:function aac(i){var s=C(i);return i.length>=s+2&&255==(255&i[s])&&224==(224&i[s+1])&&16==(22&i[s+1])},mp3:function mp3(i){var s=C(i);return i.length>=s+2&&255==(255&i[s])&&224==(224&i[s+1])&&2==(6&i[s+1])},webm:function webm(i){return i.length>=4&&26==(255&i[0])&&69==(255&i[1])&&223==(255&i[2])&&163==(255&i[3])},mp4:function mp4(i){return i.length>=8&&/^(f|s)typ$/.test(T(i.subarray(4,8)))&&!/^ftyp3g$/.test(T(i.subarray(4,10)))},"3gp":function gp(i){return i.length>=10&&/^ftyp3g$/.test(T(i.subarray(4,10)))},ts:function ts(i){if(i.length<189&&i.length>=1)return 71===i[0];for(var s=0;s+188<i.length&&s<188;){if(71===i[s]&&71===i[s+188])return!0;s+=1}return!1},flac:function flac(i){return i.length>=4&&/^fLaC$/.test(T(i.subarray(0,4)))},ogg:function ogg(i){return i.length>=4&&/^OggS$/.test(T(i.subarray(0,4)))}},O=Object.keys(P).filter((function(i){return"ts"!==i})).concat("ts");O.forEach((function(i){var s=P[i];P[i]=function(i){return s(_(i))}}));s.Xm=function detectContainerForBytes(i){i=_(i);for(var s=0;s<O.length;s++){var T=O[s];if(P[T](i))return T}return""},s.cc=C,s.cz=function isLikelyFmp4MediaSegment(i){i=_(i);for(var s=0;s<i.length;){var S=(i[s]<<24|i[s+1]<<16|i[s+2]<<8|i[s+3])>>>0;if("moof"===T(i.subarray(s+4,s+8)))return!0;0===S||S+s>i.length?s=i.length:s+=S}return!1}},47927:function(i,s,_){"use strict";
/*! @name @videojs/vhs-utils @version 2.3.0 @license MIT */var T=function _interopDefault(i){return i&&"object"==typeof i&&"default"in i?i.default:i}(_(58908));i.exports=function decodeB64ToUint8Array(i){for(var s=function atob(i){return T.atob?T.atob(i):Buffer.from(i,"base64").toString("binary")}(i),_=new Uint8Array(s.length),S=0;S<s.length;S++)_[S]=s.charCodeAt(S);return _}},74810:function(i,s){"use strict";var _=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,T=/^application\/dash\+xml/i;s.t=function simpleTypeFromSourceType(i){return _.test(i)?"hls":T.test(i)?"dash":"application/vnd.videojs.vhs+json"===i?"vhs-json":null}},49972:function(i,s,_){"use strict";
/*! @name @videojs/vhs-utils @version 2.3.0 @license MIT */function _interopDefault(i){return i&&"object"==typeof i&&"default"in i?i.default:i}var T=_interopDefault(_(49945)),S=_interopDefault(_(58908));i.exports=function resolveUrl(i,s){return/^[a-z]+:/i.test(s)?s:(/\/\//i.test(i)||(i=T.buildAbsoluteURL(S.location&&S.location.href||"",i)),T.buildAbsoluteURL(i,s))}},17388:function(i){"use strict";
/*! @name @videojs/vhs-utils @version 2.3.0 @license MIT */var s=function(){function Stream(){this.listeners={}}var i=Stream.prototype;return i.on=function on(i,s){this.listeners[i]||(this.listeners[i]=[]),this.listeners[i].push(s)},i.off=function off(i,s){if(!this.listeners[i])return!1;var _=this.listeners[i].indexOf(s);return this.listeners[i]=this.listeners[i].slice(0),this.listeners[i].splice(_,1),_>-1},i.trigger=function trigger(i){var s=this.listeners[i];if(s)if(2===arguments.length)for(var _=s.length,T=0;T<_;++T)s[T].call(this,arguments[1]);else for(var S=Array.prototype.slice.call(arguments,1),C=s.length,P=0;P<C;++P)s[P].apply(this,S)},i.dispose=function dispose(){this.listeners={}},i.pipe=function pipe(i){this.on("data",(function(s){i.push(s)}))},Stream}();i.exports=s},23316:function(i,s,_){"use strict";var T=_(58908),S=_(67154),C=_(27376);function initParams(i,s,_){var T=i;return C(s)?(_=s,"string"==typeof i&&(T={uri:i})):T=S({},s,{uri:i}),T.callback=_,T}function createXHR(i,s,_){return _createXHR(s=initParams(i,s,_))}function _createXHR(i){if(void 0===i.callback)throw new Error("callback argument missing");var s=!1,_=function cbOnce(_,T,S){s||(s=!0,i.callback(_,T,S))};function getBody(){var i=void 0;if(i=C.response?C.response:C.responseText||function getXml(i){try{if("document"===i.responseType)return i.responseXML;var s=i.responseXML&&"parsererror"===i.responseXML.documentElement.nodeName;if(""===i.responseType&&!s)return i.responseXML}catch(_){}return null}(C),$)try{i=JSON.parse(i)}catch(s){}return i}function errorFunc(i){return clearTimeout(P),i instanceof Error||(i=new Error(""+(i||"Unknown XMLHttpRequest Error"))),i.statusCode=0,_(i,U)}function loadFunc(){if(!S){var s;clearTimeout(P),s=i.useXDR&&void 0===C.status?200:1223===C.status?204:C.status;var T=U,R=null;return 0!==s?(T={body:getBody(),statusCode:s,method:M,headers:{},url:O,rawRequest:C},C.getAllResponseHeaders&&(T.headers=function(i){var s={};return i?(i.trim().split("\n").forEach((function(i){var _=i.indexOf(":"),T=i.slice(0,_).trim().toLowerCase(),S=i.slice(_+1).trim();void 0===s[T]?s[T]=S:Array.isArray(s[T])?s[T].push(S):s[T]=[s[T],S]})),s):s}(C.getAllResponseHeaders()))):R=new Error("Internal XMLHttpRequest Error"),_(R,T,T.body)}}var T,S,C=i.xhr||null;C||(C=i.cors||i.useXDR?new createXHR.XDomainRequest:new createXHR.XMLHttpRequest);var P,O=C.url=i.uri||i.url,M=C.method=i.method||"GET",R=i.body||i.data,D=C.headers=i.headers||{},j=!!i.sync,$=!1,U={body:void 0,headers:{},statusCode:0,method:M,url:O,rawRequest:C};if("json"in i&&!1!==i.json&&($=!0,D.accept||D.Accept||(D.Accept="application/json"),"GET"!==M&&"HEAD"!==M&&(D["content-type"]||D["Content-Type"]||(D["Content-Type"]="application/json"),R=JSON.stringify(!0===i.json?R:i.json))),C.onreadystatechange=function readystatechange(){4===C.readyState&&setTimeout(loadFunc,0)},C.onload=loadFunc,C.onerror=errorFunc,C.onprogress=function(){},C.onabort=function(){S=!0},C.ontimeout=errorFunc,C.open(M,O,!j,i.username,i.password),j||(C.withCredentials=!!i.withCredentials),!j&&i.timeout>0&&(P=setTimeout((function(){if(!S){S=!0,C.abort("timeout");var i=new Error("XMLHttpRequest timeout");i.code="ETIMEDOUT",errorFunc(i)}}),i.timeout)),C.setRequestHeader)for(T in D)D.hasOwnProperty(T)&&C.setRequestHeader(T,D[T]);else if(i.headers&&!function isEmpty(i){for(var s in i)if(i.hasOwnProperty(s))return!1;return!0}(i.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in i&&(C.responseType=i.responseType),"beforeSend"in i&&"function"==typeof i.beforeSend&&i.beforeSend(C),C.send(R||null),C}i.exports=createXHR,i.exports.default=createXHR,createXHR.XMLHttpRequest=T.XMLHttpRequest||function noop(){},createXHR.XDomainRequest="withCredentials"in new createXHR.XMLHttpRequest?createXHR.XMLHttpRequest:T.XDomainRequest,function forEachArray(i,s){for(var _=0;_<i.length;_++)s(i[_])}(["get","put","post","patch","head","delete"],(function(i){createXHR["delete"===i?"del":i]=function(s,_,T){return(_=initParams(s,_,T)).method=i.toUpperCase(),_createXHR(_)}}))},9669:function(i,s,_){i.exports=_(51609)},55448:function(i,s,_){"use strict";var T=_(64867),S=_(36026),C=_(4372),P=_(15327),O=_(94097),M=_(84109),R=_(67985),D=_(85061),j=_(45655),$=_(65263);i.exports=function xhrAdapter(i){return new Promise((function dispatchXhrRequest(s,_){var U,V=i.data,Z=i.headers,Y=i.responseType;function done(){i.cancelToken&&i.cancelToken.unsubscribe(U),i.signal&&i.signal.removeEventListener("abort",U)}T.isFormData(V)&&delete Z["Content-Type"];var X=new XMLHttpRequest;if(i.auth){var Q=i.auth.username||"",ee=i.auth.password?unescape(encodeURIComponent(i.auth.password)):"";Z.Authorization="Basic "+btoa(Q+":"+ee)}var te=O(i.baseURL,i.url);function onloadend(){if(X){var T="getAllResponseHeaders"in X?M(X.getAllResponseHeaders()):null,C={data:Y&&"text"!==Y&&"json"!==Y?X.response:X.responseText,status:X.status,statusText:X.statusText,headers:T,config:i,request:X};S((function _resolve(i){s(i),done()}),(function _reject(i){_(i),done()}),C),X=null}}if(X.open(i.method.toUpperCase(),P(te,i.params,i.paramsSerializer),!0),X.timeout=i.timeout,"onloadend"in X?X.onloadend=onloadend:X.onreadystatechange=function handleLoad(){X&&4===X.readyState&&(0!==X.status||X.responseURL&&0===X.responseURL.indexOf("file:"))&&setTimeout(onloadend)},X.onabort=function handleAbort(){X&&(_(D("Request aborted",i,"ECONNABORTED",X)),X=null)},X.onerror=function handleError(){_(D("Network Error",i,null,X)),X=null},X.ontimeout=function handleTimeout(){var s=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded",T=i.transitional||j.transitional;i.timeoutErrorMessage&&(s=i.timeoutErrorMessage),_(D(s,i,T.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",X)),X=null},T.isStandardBrowserEnv()){var ne=(i.withCredentials||R(te))&&i.xsrfCookieName?C.read(i.xsrfCookieName):void 0;ne&&(Z[i.xsrfHeaderName]=ne)}"setRequestHeader"in X&&T.forEach(Z,(function setRequestHeader(i,s){void 0===V&&"content-type"===s.toLowerCase()?delete Z[s]:X.setRequestHeader(s,i)})),T.isUndefined(i.withCredentials)||(X.withCredentials=!!i.withCredentials),Y&&"json"!==Y&&(X.responseType=i.responseType),"function"==typeof i.onDownloadProgress&&X.addEventListener("progress",i.onDownloadProgress),"function"==typeof i.onUploadProgress&&X.upload&&X.upload.addEventListener("progress",i.onUploadProgress),(i.cancelToken||i.signal)&&(U=function(i){X&&(_(!i||i&&i.type?new $("canceled"):i),X.abort(),X=null)},i.cancelToken&&i.cancelToken.subscribe(U),i.signal&&(i.signal.aborted?U():i.signal.addEventListener("abort",U))),V||(V=null),X.send(V)}))}},51609:function(i,s,_){"use strict";var T=_(64867),S=_(91849),C=_(30321),P=_(47185);var O=function createInstance(i){var s=new C(i),_=S(C.prototype.request,s);return T.extend(_,C.prototype,s),T.extend(_,s),_.create=function create(s){return createInstance(P(i,s))},_}(_(45655));O.Axios=C,O.Cancel=_(65263),O.CancelToken=_(14972),O.isCancel=_(26502),O.VERSION=_(97288).version,O.all=function all(i){return Promise.all(i)},O.spread=_(8713),O.isAxiosError=_(16268),i.exports=O,i.exports.default=O},65263:function(i){"use strict";function Cancel(i){this.message=i}Cancel.prototype.toString=function toString(){return"Cancel"+(this.message?": "+this.message:"")},Cancel.prototype.__CANCEL__=!0,i.exports=Cancel},14972:function(i,s,_){"use strict";var T=_(65263);function CancelToken(i){if("function"!=typeof i)throw new TypeError("executor must be a function.");var s;this.promise=new Promise((function promiseExecutor(i){s=i}));var _=this;this.promise.then((function(i){if(_._listeners){var s,T=_._listeners.length;for(s=0;s<T;s++)_._listeners[s](i);_._listeners=null}})),this.promise.then=function(i){var s,T=new Promise((function(i){_.subscribe(i),s=i})).then(i);return T.cancel=function reject(){_.unsubscribe(s)},T},i((function cancel(i){_.reason||(_.reason=new T(i),s(_.reason))}))}CancelToken.prototype.throwIfRequested=function throwIfRequested(){if(this.reason)throw this.reason},CancelToken.prototype.subscribe=function subscribe(i){this.reason?i(this.reason):this._listeners?this._listeners.push(i):this._listeners=[i]},CancelToken.prototype.unsubscribe=function unsubscribe(i){if(this._listeners){var s=this._listeners.indexOf(i);-1!==s&&this._listeners.splice(s,1)}},CancelToken.source=function source(){var i;return{token:new CancelToken((function executor(s){i=s})),cancel:i}},i.exports=CancelToken},26502:function(i){"use strict";i.exports=function isCancel(i){return!(!i||!i.__CANCEL__)}},30321:function(i,s,_){"use strict";var T=_(64867),S=_(15327),C=_(80782),P=_(13572),O=_(47185),M=_(54875),R=M.validators;function Axios(i){this.defaults=i,this.interceptors={request:new C,response:new C}}Axios.prototype.request=function request(i,s){if("string"==typeof i?(s=s||{}).url=i:s=i||{},!s.url)throw new Error("Provided config url is not valid");(s=O(this.defaults,s)).method?s.method=s.method.toLowerCase():this.defaults.method?s.method=this.defaults.method.toLowerCase():s.method="get";var _=s.transitional;void 0!==_&&M.assertOptions(_,{silentJSONParsing:R.transitional(R.boolean),forcedJSONParsing:R.transitional(R.boolean),clarifyTimeoutError:R.transitional(R.boolean)},!1);var T=[],S=!0;this.interceptors.request.forEach((function unshiftRequestInterceptors(i){"function"==typeof i.runWhen&&!1===i.runWhen(s)||(S=S&&i.synchronous,T.unshift(i.fulfilled,i.rejected))}));var C,D=[];if(this.interceptors.response.forEach((function pushResponseInterceptors(i){D.push(i.fulfilled,i.rejected)})),!S){var j=[P,void 0];for(Array.prototype.unshift.apply(j,T),j=j.concat(D),C=Promise.resolve(s);j.length;)C=C.then(j.shift(),j.shift());return C}for(var $=s;T.length;){var U=T.shift(),V=T.shift();try{$=U($)}catch(Z){V(Z);break}}try{C=P($)}catch(Z){return Promise.reject(Z)}for(;D.length;)C=C.then(D.shift(),D.shift());return C},Axios.prototype.getUri=function getUri(i){if(!i.url)throw new Error("Provided config url is not valid");return i=O(this.defaults,i),S(i.url,i.params,i.paramsSerializer).replace(/^\?/,"")},T.forEach(["delete","get","head","options"],(function forEachMethodNoData(i){Axios.prototype[i]=function(s,_){return this.request(O(_||{},{method:i,url:s,data:(_||{}).data}))}})),T.forEach(["post","put","patch"],(function forEachMethodWithData(i){Axios.prototype[i]=function(s,_,T){return this.request(O(T||{},{method:i,url:s,data:_}))}})),i.exports=Axios},80782:function(i,s,_){"use strict";var T=_(64867);function InterceptorManager(){this.handlers=[]}InterceptorManager.prototype.use=function use(i,s,_){return this.handlers.push({fulfilled:i,rejected:s,synchronous:!!_&&_.synchronous,runWhen:_?_.runWhen:null}),this.handlers.length-1},InterceptorManager.prototype.eject=function eject(i){this.handlers[i]&&(this.handlers[i]=null)},InterceptorManager.prototype.forEach=function forEach(i){T.forEach(this.handlers,(function forEachHandler(s){null!==s&&i(s)}))},i.exports=InterceptorManager},94097:function(i,s,_){"use strict";var T=_(91793),S=_(7303);i.exports=function buildFullPath(i,s){return i&&!T(s)?S(i,s):s}},85061:function(i,s,_){"use strict";var T=_(80481);i.exports=function createError(i,s,_,S,C){var P=new Error(i);return T(P,s,_,S,C)}},13572:function(i,s,_){"use strict";var T=_(64867),S=_(18527),C=_(26502),P=_(45655),O=_(65263);function throwIfCancellationRequested(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new O("canceled")}i.exports=function dispatchRequest(i){return throwIfCancellationRequested(i),i.headers=i.headers||{},i.data=S.call(i,i.data,i.headers,i.transformRequest),i.headers=T.merge(i.headers.common||{},i.headers[i.method]||{},i.headers),T.forEach(["delete","get","head","post","put","patch","common"],(function cleanHeaderConfig(s){delete i.headers[s]})),(i.adapter||P.adapter)(i).then((function onAdapterResolution(s){return throwIfCancellationRequested(i),s.data=S.call(i,s.data,s.headers,i.transformResponse),s}),(function onAdapterRejection(s){return C(s)||(throwIfCancellationRequested(i),s&&s.response&&(s.response.data=S.call(i,s.response.data,s.response.headers,i.transformResponse))),Promise.reject(s)}))}},80481:function(i){"use strict";i.exports=function enhanceError(i,s,_,T,S){return i.config=s,_&&(i.code=_),i.request=T,i.response=S,i.isAxiosError=!0,i.toJSON=function toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},i}},47185:function(i,s,_){"use strict";var T=_(64867);i.exports=function mergeConfig(i,s){s=s||{};var _={};function getMergedValue(i,s){return T.isPlainObject(i)&&T.isPlainObject(s)?T.merge(i,s):T.isPlainObject(s)?T.merge({},s):T.isArray(s)?s.slice():s}function mergeDeepProperties(_){return T.isUndefined(s[_])?T.isUndefined(i[_])?void 0:getMergedValue(void 0,i[_]):getMergedValue(i[_],s[_])}function valueFromConfig2(i){if(!T.isUndefined(s[i]))return getMergedValue(void 0,s[i])}function defaultToConfig2(_){return T.isUndefined(s[_])?T.isUndefined(i[_])?void 0:getMergedValue(void 0,i[_]):getMergedValue(void 0,s[_])}function mergeDirectKeys(_){return _ in s?getMergedValue(i[_],s[_]):_ in i?getMergedValue(void 0,i[_]):void 0}var S={url:valueFromConfig2,method:valueFromConfig2,data:valueFromConfig2,baseURL:defaultToConfig2,transformRequest:defaultToConfig2,transformResponse:defaultToConfig2,paramsSerializer:defaultToConfig2,timeout:defaultToConfig2,timeoutMessage:defaultToConfig2,withCredentials:defaultToConfig2,adapter:defaultToConfig2,responseType:defaultToConfig2,xsrfCookieName:defaultToConfig2,xsrfHeaderName:defaultToConfig2,onUploadProgress:defaultToConfig2,onDownloadProgress:defaultToConfig2,decompress:defaultToConfig2,maxContentLength:defaultToConfig2,maxBodyLength:defaultToConfig2,transport:defaultToConfig2,httpAgent:defaultToConfig2,httpsAgent:defaultToConfig2,cancelToken:defaultToConfig2,socketPath:defaultToConfig2,responseEncoding:defaultToConfig2,validateStatus:mergeDirectKeys};return T.forEach(Object.keys(i).concat(Object.keys(s)),(function computeConfigValue(i){var s=S[i]||mergeDeepProperties,C=s(i);T.isUndefined(C)&&s!==mergeDirectKeys||(_[i]=C)})),_}},36026:function(i,s,_){"use strict";var T=_(85061);i.exports=function settle(i,s,_){var S=_.config.validateStatus;_.status&&S&&!S(_.status)?s(T("Request failed with status code "+_.status,_.config,null,_.request,_)):i(_)}},18527:function(i,s,_){"use strict";var T=_(64867),S=_(45655);i.exports=function transformData(i,s,_){var C=this||S;return T.forEach(_,(function transform(_){i=_.call(C,i,s)})),i}},45655:function(i,s,_){"use strict";var T=_(34155),S=_(64867),C=_(16016),P=_(80481),O={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(i,s){!S.isUndefined(i)&&S.isUndefined(i["Content-Type"])&&(i["Content-Type"]=s)}var M={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:function getDefaultAdapter(){var i;return("undefined"!=typeof XMLHttpRequest||void 0!==T&&"[object process]"===Object.prototype.toString.call(T))&&(i=_(55448)),i}(),transformRequest:[function transformRequest(i,s){return C(s,"Accept"),C(s,"Content-Type"),S.isFormData(i)||S.isArrayBuffer(i)||S.isBuffer(i)||S.isStream(i)||S.isFile(i)||S.isBlob(i)?i:S.isArrayBufferView(i)?i.buffer:S.isURLSearchParams(i)?(setContentTypeIfUnset(s,"application/x-www-form-urlencoded;charset=utf-8"),i.toString()):S.isObject(i)||s&&"application/json"===s["Content-Type"]?(setContentTypeIfUnset(s,"application/json"),function stringifySafely(i,s,_){if(S.isString(i))try{return(s||JSON.parse)(i),S.trim(i)}catch(T){if("SyntaxError"!==T.name)throw T}return(_||JSON.stringify)(i)}(i)):i}],transformResponse:[function transformResponse(i){var s=this.transitional||M.transitional,_=s&&s.silentJSONParsing,T=s&&s.forcedJSONParsing,C=!_&&"json"===this.responseType;if(C||T&&S.isString(i)&&i.length)try{return JSON.parse(i)}catch(O){if(C){if("SyntaxError"===O.name)throw P(O,this,"E_JSON_PARSE");throw O}}return i}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function validateStatus(i){return i>=200&&i<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};S.forEach(["delete","get","head"],(function forEachMethodNoData(i){M.headers[i]={}})),S.forEach(["post","put","patch"],(function forEachMethodWithData(i){M.headers[i]=S.merge(O)})),i.exports=M},97288:function(i){i.exports={version:"0.25.0"}},91849:function(i){"use strict";i.exports=function bind(i,s){return function wrap(){for(var _=new Array(arguments.length),T=0;T<_.length;T++)_[T]=arguments[T];return i.apply(s,_)}}},15327:function(i,s,_){"use strict";var T=_(64867);function encode(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}i.exports=function buildURL(i,s,_){if(!s)return i;var S;if(_)S=_(s);else if(T.isURLSearchParams(s))S=s.toString();else{var C=[];T.forEach(s,(function serialize(i,s){null!=i&&(T.isArray(i)?s+="[]":i=[i],T.forEach(i,(function parseValue(i){T.isDate(i)?i=i.toISOString():T.isObject(i)&&(i=JSON.stringify(i)),C.push(encode(s)+"="+encode(i))})))})),S=C.join("&")}if(S){var P=i.indexOf("#");-1!==P&&(i=i.slice(0,P)),i+=(-1===i.indexOf("?")?"?":"&")+S}return i}},7303:function(i){"use strict";i.exports=function combineURLs(i,s){return s?i.replace(/\/+$/,"")+"/"+s.replace(/^\/+/,""):i}},4372:function(i,s,_){"use strict";var T=_(64867);i.exports=T.isStandardBrowserEnv()?function standardBrowserEnv(){return{write:function write(i,s,_,S,C,P){var O=[];O.push(i+"="+encodeURIComponent(s)),T.isNumber(_)&&O.push("expires="+new Date(_).toGMTString()),T.isString(S)&&O.push("path="+S),T.isString(C)&&O.push("domain="+C),!0===P&&O.push("secure"),document.cookie=O.join("; ")},read:function read(i){var s=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove:function remove(i){this.write(i,"",Date.now()-864e5)}}}():{write:function write(){},read:function read(){return null},remove:function remove(){}}},91793:function(i){"use strict";i.exports=function isAbsoluteURL(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}},16268:function(i,s,_){"use strict";var T=_(64867);i.exports=function isAxiosError(i){return T.isObject(i)&&!0===i.isAxiosError}},67985:function(i,s,_){"use strict";var T=_(64867);i.exports=T.isStandardBrowserEnv()?function standardBrowserEnv(){var i,s=/(msie|trident)/i.test(navigator.userAgent),_=document.createElement("a");function resolveURL(i){var T=i;return s&&(_.setAttribute("href",T),T=_.href),_.setAttribute("href",T),{href:_.href,protocol:_.protocol?_.protocol.replace(/:$/,""):"",host:_.host,search:_.search?_.search.replace(/^\?/,""):"",hash:_.hash?_.hash.replace(/^#/,""):"",hostname:_.hostname,port:_.port,pathname:"/"===_.pathname.charAt(0)?_.pathname:"/"+_.pathname}}return i=resolveURL(window.location.href),function isURLSameOrigin(s){var _=T.isString(s)?resolveURL(s):s;return _.protocol===i.protocol&&_.host===i.host}}():function isURLSameOrigin(){return!0}},16016:function(i,s,_){"use strict";var T=_(64867);i.exports=function normalizeHeaderName(i,s){T.forEach(i,(function processHeader(_,T){T!==s&&T.toUpperCase()===s.toUpperCase()&&(i[s]=_,delete i[T])}))}},84109:function(i,s,_){"use strict";var T=_(64867),S=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];i.exports=function parseHeaders(i){var s,_,C,P={};return i?(T.forEach(i.split("\n"),(function parser(i){if(C=i.indexOf(":"),s=T.trim(i.substr(0,C)).toLowerCase(),_=T.trim(i.substr(C+1)),s){if(P[s]&&S.indexOf(s)>=0)return;P[s]="set-cookie"===s?(P[s]?P[s]:[]).concat([_]):P[s]?P[s]+", "+_:_}})),P):P}},8713:function(i){"use strict";i.exports=function spread(i){return function wrap(s){return i.apply(null,s)}}},54875:function(i,s,_){"use strict";var T=_(97288).version,S={};["object","boolean","number","function","string","symbol"].forEach((function(i,s){S[i]=function validator(_){return typeof _===i||"a"+(s<1?"n ":" ")+i}}));var C={};S.transitional=function transitional(i,s,_){function formatMessage(i,s){return"[Axios v"+T+"] Transitional option '"+i+"'"+s+(_?". "+_:"")}return function(_,T,S){if(!1===i)throw new Error(formatMessage(T," has been removed"+(s?" in "+s:"")));return s&&!C[T]&&(C[T]=!0,console.warn(formatMessage(T," has been deprecated since v"+s+" and will be removed in the near future"))),!i||i(_,T,S)}},i.exports={assertOptions:function assertOptions(i,s,_){if("object"!=typeof i)throw new TypeError("options must be an object");for(var T=Object.keys(i),S=T.length;S-- >0;){var C=T[S],P=s[C];if(P){var O=i[C],M=void 0===O||P(O,C,i);if(!0!==M)throw new TypeError("option "+C+" must be "+M)}else if(!0!==_)throw Error("Unknown option "+C)}},validators:S}},64867:function(i,s,_){"use strict";var T=_(91849),S=Object.prototype.toString;function isArray(i){return Array.isArray(i)}function isUndefined(i){return void 0===i}function isArrayBuffer(i){return"[object ArrayBuffer]"===S.call(i)}function isObject(i){return null!==i&&"object"==typeof i}function isPlainObject(i){if("[object Object]"!==S.call(i))return!1;var s=Object.getPrototypeOf(i);return null===s||s===Object.prototype}function isFunction(i){return"[object Function]"===S.call(i)}function forEach(i,s){if(null!=i)if("object"!=typeof i&&(i=[i]),isArray(i))for(var _=0,T=i.length;_<T;_++)s.call(null,i[_],_,i);else for(var S in i)Object.prototype.hasOwnProperty.call(i,S)&&s.call(null,i[S],S,i)}i.exports={isArray:isArray,isArrayBuffer:isArrayBuffer,isBuffer:function isBuffer(i){return null!==i&&!isUndefined(i)&&null!==i.constructor&&!isUndefined(i.constructor)&&"function"==typeof i.constructor.isBuffer&&i.constructor.isBuffer(i)},isFormData:function isFormData(i){return"[object FormData]"===S.call(i)},isArrayBufferView:function isArrayBufferView(i){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(i):i&&i.buffer&&isArrayBuffer(i.buffer)},isString:function isString(i){return"string"==typeof i},isNumber:function isNumber(i){return"number"==typeof i},isObject:isObject,isPlainObject:isPlainObject,isUndefined:isUndefined,isDate:function isDate(i){return"[object Date]"===S.call(i)},isFile:function isFile(i){return"[object File]"===S.call(i)},isBlob:function isBlob(i){return"[object Blob]"===S.call(i)},isFunction:isFunction,isStream:function isStream(i){return isObject(i)&&isFunction(i.pipe)},isURLSearchParams:function isURLSearchParams(i){return"[object URLSearchParams]"===S.call(i)},isStandardBrowserEnv:function isStandardBrowserEnv(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:forEach,merge:function merge(){var i={};function assignValue(s,_){isPlainObject(i[_])&&isPlainObject(s)?i[_]=merge(i[_],s):isPlainObject(s)?i[_]=merge({},s):isArray(s)?i[_]=s.slice():i[_]=s}for(var s=0,_=arguments.length;s<_;s++)forEach(arguments[s],assignValue);return i},extend:function extend(i,s,_){return forEach(s,(function assignValue(s,S){i[S]=_&&"function"==typeof s?T(s,_):s})),i},trim:function trim(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")},stripBOM:function stripBOM(i){return 65279===i.charCodeAt(0)&&(i=i.slice(1)),i}}},61089:function(i,s,_){"use strict";var T=_(18165),S=_(463),C=_(5771),P={};s.Z={name:"Tinymce",props:{customConfig:{type:Object,required:!1},disabled:{type:Boolean,default:!1},initValue:{type:String,default:""},theme:{type:String},placeholder:{type:String},unsavedChangesConfirm:{type:Boolean,default:!1}},emits:["input","content-updated"],watch:{initValue:function initValue(i){P.setContent("<p>".concat(i,"</p>")),this.$emit("input",i)},disabled:function disabled(){P.destroy(),P=new T.Z,this.setupEditor()}},mounted:function mounted(){P=new T.Z,this.setupEditor()},beforeDestroy:function beforeDestroy(){P.destroy()},methods:{getCurrentValue:function getCurrentValue(){return P.getContent()},setupEditor:function setupEditor(){var i=this,s=this,_="advanced"===this.theme?(0,S.Q7)():(0,S.u_)(),T=document.getElementById(S.xL.SUBMIT_BUTTON),O=this.unsavedChangesConfirm?(0,C.y)([T]):{},M=Object.assign({},_,s.customConfig,O,{target:s.$refs.editor,setup:function setup(i){i.settings.readonly=s.disabled,s.disabled||(i.on("blur",(function(){s.$emit("content-updated",i.getContent())})),i.on("KeyUp",(function(){s.$emit("input",i.getContent())})),i.on("Change",(function(){s.$emit("input",i.getContent())})),i.on("BeforeSetContent",(function(i){i.content.match(/<a href="http:.*?\.chess\.com.*?a>/)&&(i.content=i.content.replace(/http:/g,"https:"))})),i.shortcuts.add("ctrl+13","submit",(function(){T&&T.click()})))}});P.init(M).then((function(){i.$emit("input",P.getContent())}))}}}},463:function(i,s,_){"use strict";_.d(s,{Q7:function(){return D},u_:function(){return R},xL:function(){return j}});var T=_(91353),S=_(23276),C=_(90388),P="chessdiagram imageuploader smileys media link unlink bullist numlist table hr undo redo fullscreen",O="bold italic underline alignleft aligncenter alignright alignjustify outdent indent forecolor backcolor fontselect fontsizeselect",M=(0,T.FR)("tinymce_editor_beta"),R=function defaultConfig(){return Object.assign(window.TinymceConfig.theme_options,window.TinymceConfig.editor_options,{plugins:"placeholder",paste_postprocess:C.wZ,resize:!0,toolbar1:(0,S.H)("chessdiagram imageuploader smileys media bold italic forecolor fontsizeselect bullist numlist hr link unlink"),toolbar:!0},M&&{elementpath:!1,contextmenu:!1,height:230,min_height:130,mobile:{toolbar_mode:"wrap"}})},D=function advancedConfig(){return Object.assign(R(),{toolbar1:(0,S.H)(P),toolbar2:O,toolbar3:"blockquote anchor subscript superscript charmap preview code styleselect",verify_html:!1,default_link_target:"_blank"},M&&{height:280})},j={MCE_HEADER:"mce-window-head",MCE_DRAG_ELEMENT:"mce-dragh",SUBMIT_BUTTON:"message-submit"}},23276:function(i,s,_){"use strict";_.d(s,{H:function(){return filterToolbarButtons}});var T=_(38096);function filterToolbarButtons(i){return(0,T.S_)("isNewlyRegistered")?i.replace(/imageuploader|smileys|media|link|unlink/g,""):i}},90388:function(i,s,_){"use strict";_.d(s,{wZ:function(){return pastePostproccess}});function fixWidth(i){var s=i.style.width,_=parseInt(s,10);s&&s.includes("px")&&_>668&&(i.style.width=function calcWidth(i){var s=[];return["marginLeft","marginRight","borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"].forEach((function(_){parseInt(i.style[_],10)&&s.push(i.style[_])})),s.length>0?(s=s.join(" - "),"calc(100% - ".concat(s,")")):"100%"}(i))}function pastePostproccess(i,s){var _=s.node;Array.from(_.querySelectorAll("[style]")).forEach((function(i){!function fixMargin(i){var s=i.style.marginLeft,_=i.style.marginRight;s&&_&&s===_&&(i.style.marginLeft="auto",i.style.marginRight="auto")}(i),fixWidth(i)}))}},17493:function(i,s,_){"use strict";var T;function lazyLoadTinyMCE(){return T||(T=new Promise((function(i,s){var _=document.createElement("script");_.src=window.Config.pathToTinyMCE,_.async=!0,_.type="text/javascript",_.onload=function(){i()},_.onerror=function(i){s(i||new Error("failed to load tinymce"))},_.onreadystatechange=function(){"complete"===_.readyState&&i()},document.body.appendChild(_)}))),T}_.d(s,{i:function(){return lazyLoadTinyMCE}})},72475:function(i,s,_){var T,S;
/**
 * @author William DURAND <william.durand1@gmail.com>
 * @license MIT Licensed
 */void 0===(S="function"==typeof(T=function(){"use strict";var i={},s="en",_=[],T=new RegExp(/^\w+\: +(.+)$/),S=new RegExp(/^\s*((\{\s*(\-?\d+[\s*,\s*\-?\d+]*)\s*\})|([\[\]])\s*(-Inf|\-?\d+)\s*,\s*(\+?Inf|\-?\d+)\s*([\[\]]))\s?(.+?)$/),C=new RegExp(/^\s*(\{\s*(\-?\d+[\s*,\s*\-?\d+]*)\s*\})|([\[\]])\s*(-Inf|\-?\d+)\s*,\s*(\+?Inf|\-?\d+)\s*([\[\]])/),P={locale:get_current_locale(),fallback:s,placeHolderPrefix:"%",placeHolderSuffix:"%",defaultDomain:"messages",pluralSeparator:"|",add:function(s,T,S,C){var P=C||this.locale||this.fallback,O=S||this.defaultDomain;return i[P]||(i[P]={}),i[P][O]||(i[P][O]={}),i[P][O][s]=T,!1===exists(_,O)&&_.push(O),this},trans:function(i,s,_,T){return replace_placeholders(get_message(i,_,T,this.locale,this.fallback),s||{})},transChoice:function(i,s,_,T,S){var C=get_message(i,T,S,this.locale,this.fallback),P=parseInt(s,10);return void 0===(_=_||{}).count&&(_.count=s),void 0===C||isNaN(P)||(C=pluralize(C,P,S||this.locale||this.fallback)),replace_placeholders(C,_)},fromJSON:function(i){if("string"==typeof i&&(i=JSON.parse(i)),i.locale&&(this.locale=i.locale),i.fallback&&(this.fallback=i.fallback),i.defaultDomain&&(this.defaultDomain=i.defaultDomain),i.translations)for(var s in i.translations)for(var _ in i.translations[s])for(var T in i.translations[s][_])this.add(T,i.translations[s][_][T],_,s);return this},reset:function(){i={},_=[],this.locale=get_current_locale()}};function replace_placeholders(i,s){var _,T=P.placeHolderPrefix,S=P.placeHolderSuffix;for(_ in s){var C=new RegExp(T+_+S,"g");if(C.test(i)){var O=String(s[_]).replace(new RegExp("\\$","g"),"$$$$");i=i.replace(C,O)}}return i}function get_message(s,T,S,C,P){var O,M,R,D=S||C||P,j=T,$=D.split("_")[0];if(!(D in i))if($ in i)D=$;else{if(!(P in i))return s;D=P}if(null==j)for(var U=0;U<_.length;U++)if(has_message(D,_[U],s)||has_message($,_[U],s)||has_message(P,_[U],s)){j=_[U];break}if(has_message(D,j,s))return i[D][j][s];for(;D.length>2&&(O=D.length,R=(M=D.split(/[\s_]+/))[M.length-1].length,1!==M.length);)if(has_message(D=D.substring(0,O-(R+1)),j,s))return i[D][j][s];return has_message(P,j,s)?i[P][j][s]:s}function has_message(s,_,T){return s in i&&_ in i[s]&&T in i[s][_]}function pluralize(i,s,_){var O,M,R=[],D=[],j=i.split(P.pluralSeparator),$=[];for(O=0;O<j.length;O++){var U=j[O];S.test(U)?R[($=U.match(S))[0]]=$[$.length-1]:T.test(U)?($=U.match(T),D.push($[1])):D.push(U)}for(M in R)if(C.test(M))if(($=M.match(C))[1]){var V,Z=$[2].split(",");for(V in Z)if(s==Z[V])return R[M]}else{var Y=convert_number($[4]),X=convert_number($[5]);if(("["===$[3]?s>=Y:s>Y)&&("]"===$[6]?s<=X:s<X))return R[M]}return D[plural_position(s,_)]||D[0]||void 0}function convert_number(i){return"-Inf"===i?Number.NEGATIVE_INFINITY:"+Inf"===i||"Inf"===i?Number.POSITIVE_INFINITY:parseInt(i,10)}function plural_position(i,s){var _=s;switch("pt_BR"===_&&(_="xbr"),_.length>3&&(_=_.split("_")[0]),_){case"bo":case"dz":case"id":case"ja":case"jv":case"ka":case"km":case"kn":case"ko":case"ms":case"th":case"tr":case"vi":case"zh":default:return 0;case"af":case"az":case"bn":case"bg":case"ca":case"da":case"de":case"el":case"en":case"eo":case"es":case"et":case"eu":case"fa":case"fi":case"fo":case"fur":case"fy":case"gl":case"gu":case"ha":case"he":case"hu":case"is":case"it":case"ku":case"lb":case"ml":case"mn":case"mr":case"nah":case"nb":case"ne":case"nl":case"nn":case"no":case"om":case"or":case"pa":case"pap":case"ps":case"pt":case"so":case"sq":case"sv":case"sw":case"ta":case"te":case"tk":case"ur":case"zu":return 1==i?0:1;case"am":case"bh":case"fil":case"fr":case"gun":case"hi":case"ln":case"mg":case"nso":case"xbr":case"ti":case"wa":return 0===i||1==i?0:1;case"be":case"bs":case"hr":case"ru":case"sr":case"uk":return i%10==1&&i%100!=11?0:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?1:2;case"cs":case"sk":return 1==i?0:i>=2&&i<=4?1:2;case"ga":return 1==i?0:2==i?1:2;case"lt":return i%10==1&&i%100!=11?0:i%10>=2&&(i%100<10||i%100>=20)?1:2;case"sl":return i%100==1?0:i%100==2?1:i%100==3||i%100==4?2:3;case"mk":return i%10==1?0:1;case"mt":return 1==i?0:0===i||i%100>1&&i%100<11?1:i%100>10&&i%100<20?2:3;case"lv":return 0===i?0:i%10==1&&i%100!=11?1:2;case"pl":return 1==i?0:i%10>=2&&i%10<=4&&(i%100<12||i%100>14)?1:2;case"cy":return 1==i?0:2==i?1:8==i||11==i?2:3;case"ro":return 1==i?0:0===i||i%100>0&&i%100<20?1:2;case"ar":return 0===i?0:1==i?1:2==i?2:i>=3&&i<=10?3:i>=11&&i<=99?4:5}}function exists(i,s){for(var _=0;_<i.length;_++)if(s===i[_])return!0;return!1}function get_current_locale(){return"undefined"!=typeof document?document.documentElement.lang.replace("-","_"):s}return P})?T.call(s,_,s,i):T)||(i.exports=S)},75844:function(i,s,_){"use strict";_.d(s,{s:function(){return render},x:function(){return T}});var render=function(){var i,s=this,_=s.$createElement,T=s._self._c||_;return T("div",s._g({class:[s.$style.component,(i={},i[s.$style.active]=s.isActive,i)]},s.$listeners),[T("span",{class:s.$style.label,domProps:{textContent:s._s(s.label)}})])},T=[]},53296:function(i,s,_){"use strict";_.d(s,{s:function(){return render},x:function(){return T}});var render=function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("icon-font",{class:i.$style.icon,attrs:{theme:"primary",name:"link"}}),i._v(" "),_("v5-input",{ref:"link",class:i.$style.input,attrs:{"force-theme":"light",readonly:!0,value:i.shareUrl},on:{focus:function(i){return i.target.select()}}}),i._v(" "),_("button",{class:i.$style.action,attrs:{type:"button","aria-label":i.$trans("Copy to Clipboard!")},on:{click:i.copyLink}},[_("icon-font",{class:i.$style.icon,attrs:{theme:"primary",name:"copy"}})],1),i._v(" "),_("transition",{attrs:{name:i.$style.message}},[i.showCopiedMessage?_("div",{class:i.$style.message,domProps:{textContent:i._s(i.$trans("Copied to Clipboard!"))}}):i._e()])],1)},T=[]},71120:function(i,s,_){"use strict";_.d(s,{s:function(){return render},x:function(){return T}});var render=function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},i._l(i.tabs,(function(s){return _("tab-item",{key:s.key,class:i.$style.tab,attrs:{"is-active":i.tabIsActive(s.key),label:s.label},on:{click:function(_){return i.$emit("tab-selected",s.key)}}})})),1)},T=[]},78673:function(i,s,_){"use strict";_.d(s,{s:function(){return render},x:function(){return T}});var render=function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("Modal",{ref:"modalContainer",attrs:{corners:"rounded-lg","modal-width":"lg"},on:{"modal-did-hide":function(s){return i.$emit("hide",s)}}},[_("outside-close",{on:{click:i.hide}}),i._v(" "),i.fen?_("div",[_("header",{class:i.$style.header},[_("div",{class:i.$style.share},[_("share-link",i._b({class:i.$style.link,attrs:{"share-url":i.generatedShareUrl}},"share-link",i.$attrs,!1)),i._v(" "),_("social-share",{attrs:{url:i.shareUrl}})],1),i._v(" "),_("tab-selector",{ref:"tab-selector",attrs:{"active-tab":i.activeTab,tabs:i.displayableTabs},on:{"tab-selected":i.selectTab}})],1),i._v(" "),_("section",{class:i.$style.content},[i._l(i.displayableTabs,(function(s){return[_(i.getTabComponent(s.key),{directives:[{name:"show",rawName:"v-show",value:i.activeTab===s.key,expression:"activeTab === tab.key"}],key:s.key,tag:"component",class:i.$style.tab,attrs:{"analyzed-pgn":i.analyzedPgn,"board-options":i.boardOptions,"board-settings":i.boardSettings,"diagram-options":i.diagramEditor,"event-filename":i.eventFilename,"event-url":i.eventUrl,"gif-url":i.animatedGifUrl,"has-timestamps":i.hasTimestamps,"is-loading-gif":i.isLoadingGif,"image-size":i.imageSize,"image-url":i.imageUrl,fen:i.normalizedFen,pgn:i.pgn,"pgn-headers":i.pgnHeaders,"tactics-id":i.tacticsId},on:{"update-diagram-option":i.updateDiagramOption}})]}))],2)]):i._e()],1)},T=[]},5168:function(i,s,_){"use strict";_.d(s,{s:function(){return render},x:function(){return T}});var render=function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("v5-button",i._b({class:i.$style.button,attrs:{size:"small",theme:"primary",target:"_blank","aria-label":i.$trans("Download")},on:i._d({},[i.emitsClick,i.onClick])},"v5-button",i.$props,!1),[_("span",{staticClass:"icon-font-chess ui_v5-button-icon download"}),i._v(" "),_("span",{domProps:{textContent:i._s(i.$trans("Download"))}})])},T=[]},87002:function(i,s,_){"use strict";_.d(s,{s:function(){return render},x:function(){return T}});var render=function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("section",{class:[i.$style.section,i.$style.first]},[i.loading&&!i.diagramOptions.diagramId?[_("label",{class:i.$style.heading,attrs:{for:"share-menu-tab-embed-embed"}},[i._v("\n        "+i._s(i.$trans("Embed"))+"\n      ")]),i._v(" "),_("v5-input",{attrs:{id:"share-menu-tab-embed-embed","force-theme":"light",readonly:!0}})]:i._e(),i._v(" "),i.diagramOptions.diagramId?[_("label",{class:i.$style.heading,attrs:{for:"embed"}},[i._v("\n        "+i._s(i.$trans("Embed"))+"\n      ")]),i._v(" "),_("v5-input",{attrs:{id:"embed","force-theme":"light",readonly:!0,value:i.diagramEmbed},on:{focus:function(i){return i.target.select()}}})]:i._e()],2),i._v(" "),_("section",{class:i.$style.section,domProps:{textContent:i._s(i.$trans("To display the diagram, copy/paste the image OR code below into a post on Chess.com."))}}),i._v(" "),_("section",{class:[i.$style.section,i.$style.flex]},[_("div",{class:i.$style.half},[i.diagramOptions.diagramImage?_("div",{class:i.$style.editor},[_("tiny-mce",{attrs:{theme:"analysis","custom-config":i.editorOptions,"init-value":i.diagramOptions.diagramImage}})],1):i._e()]),i._v(" "),_("div",{class:i.$style.half},[_("div",{class:i.$style.code},[i.loading&&!i.diagramOptions.diagramId?_("v5-input",{attrs:{"force-theme":"light",readonly:!0}}):i._e(),i._v(" "),i.diagramOptions.diagramId?_("v5-input",{attrs:{"force-theme":"light",readonly:!0,value:i.diagramCode},on:{focus:function(i){return i.target.select()}}}):i._e()],1),i._v(" "),i._l(i.controls,(function(s){return _("div",{key:s.label,class:i.$style.controls},[_("label",{class:i.$style.label,attrs:{for:s.id}},[i._v("\n          "+i._s(s.label)+"\n        ")]),i._v(" "),_("v5-select",{class:i.$style.input,attrs:{id:s.id,"force-theme":"light","label-key":"name","value-key":"code",options:s.options,value:s.value},on:{input:s.action}})],1)})),i._v(" "),_("div",{class:i.$style.toggles},i._l(i.toggles,(function(s){return _("div",{key:s.key,class:i.$style.toggle},[s.show?_("div",[_("input",{attrs:{id:s.key,type:"checkbox","light-mode":!0},domProps:{checked:s.checked},on:{change:s.action}}),i._v(" "),_("label",{attrs:{for:s.key},domProps:{textContent:i._s(s.label)}})]):i._e()])})),0)],2)])])},T=[]},61715:function(i,s,_){"use strict";_.d(s,{s:function(){return render},x:function(){return T}});var render=function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("div",{class:i.$style.section},[_("div",{class:i.$style.heading,domProps:{textContent:i._s("URL")}}),i._v(" "),_("v5-input",{class:i.$style.input,attrs:{"force-theme":"light",readonly:!0,value:i.eventUrl},on:{focus:function(i){return i.target.select()}}})],1),i._v(" "),_("div",{class:i.$style.section},[_("div",{class:i.$style.download},[_("download-button",{on:{download:i.downloadEvent}})],1)])])},T=[]},22369:function(i,s,_){"use strict";_.d(s,{s:function(){return render},x:function(){return T}});var render=function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[i.isLoadingGif?_("div",{class:i.$style.square},[_("loader-three-bounce",{attrs:{"is-circle":!0,size:50}})],1):_("img",{class:i.$style.gif,attrs:{alt:i.$trans("Game gif"),height:"248",width:"248",src:i.gifUrl}}),i._v(" "),_("download-button",{attrs:{disabled:i.isLoadingGif},on:{download:i.download}}),i._v(" "),_("p",{class:i.$style.link,domProps:{innerHTML:i._s(i.gifPageLinkText)}})],1)},T=[]},35047:function(i,s,_){"use strict";_.d(s,{s:function(){return render},x:function(){return T}});var render=function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("img",{class:i.$style.image,attrs:{alt:i.$trans("Chessboard image"),height:i.imageSize.height,width:i.imageSize.width,src:i.dynamicBoardUrl}}),i._v(" "),_("download-button",{attrs:{href:i.dynamicBoardUrl,download:"board.jpeg"}})],1)},T=[]},63448:function(i,s,_){"use strict";_.d(s,{s:function(){return render},x:function(){return T}});var render=function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("div",{class:i.$style.section},[_("div",{class:i.$style.heading,domProps:{textContent:i._s("FEN")}}),i._v(" "),_("v5-input",{class:i.$style.input,attrs:{"force-theme":"light",readonly:!0,value:i.fen},on:{focus:function(i){return i.target.select()}}})],1),i._v(" "),_("div",{class:i.$style.section},[_("div",{class:i.$style.pgn},[_("div",{class:i.$style.heading,domProps:{textContent:i._s("PGN")}}),i._v(" "),_("div",{class:i.$style.toggles},[i.checkboxUi.isAnalyzedPgnCheckboxVisible?_("label",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.$trans("Annotation"),expression:"$trans('Annotation')"}],class:i.$style.toggle},[_("input",{attrs:{type:"radio",name:"isComputerAnalysisEnabled"},domProps:{checked:!i.checkboxModel.isAnalyzedPgnEnabled},on:{change:function(s){return i.onAnalyzedPgnEnabledChange(!1)}}}),i._v(" "),_("span",{class:["user","icon-font-chess",i.$style.icon]})]):i._e(),i._v(" "),i.checkboxUi.isAnalyzedPgnCheckboxVisible?_("label",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.$trans("Computer Analysis"),expression:"$trans('Computer Analysis')"}],class:i.$style.toggle},[_("input",{attrs:{type:"radio",name:"isComputerAnalysisEnabled"},domProps:{checked:i.checkboxModel.isAnalyzedPgnEnabled},on:{change:function(s){return i.onAnalyzedPgnEnabledChange(!0)}}}),i._v(" "),_("span",{class:["comp-analysis","icon-font-chess",i.$style.icon]})]):i._e(),i._v(" "),i.checkboxUi.isHighlightsCheckboxVisible?_("label",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.$trans("Highlights"),expression:"$trans('Highlights')"}],class:i.$style.toggle},[_("input",{attrs:{disabled:i.checkboxModel.isAnalyzedPgnEnabled,type:"checkbox"},domProps:{checked:!i.checkboxModel.isAnalyzedPgnEnabled&&i.checkboxModel.isHighlightsEnabled},on:{change:i.onHighlightsEnabledChange}}),i._v(" "),_("span",{class:["board-arrow","icon-font-chess",i.$style.icon]})]):i._e(),i._v(" "),i.checkboxUi.isCommentsCheckboxVisible?_("label",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.$trans("Comments"),expression:"$trans('Comments')"}],class:i.$style.toggle},[_("input",{attrs:{disabled:i.checkboxModel.isAnalyzedPgnEnabled,type:"checkbox"},domProps:{checked:i.checkboxModel.isAnalyzedPgnEnabled||i.checkboxModel.isCommentsEnabled},on:{change:i.onCommentsEnabledChange}}),i._v(" "),_("span",{class:["icon-font-chess","chat",i.$style.icon]})]):i._e(),i._v(" "),i.hasTimestamps?_("label",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.$trans("PGN Timestamps"),expression:"$trans('PGN Timestamps')"}],class:i.$style.toggle},[_("input",{attrs:{disabled:!i.hasTimestampsInUserPgn,type:"checkbox"},domProps:{checked:!i.checkboxModel.isAnalyzedPgnEnabled&&i.checkboxModel.isTimestampsEnabled},on:{change:i.onTimestampsEnabledChange}}),i._v(" "),_("span",{class:["circle-clock","icon-font-chess",i.$style.icon]})]):i._e()])]),i._v(" "),_("v5-textarea",{class:i.$style.textarea,attrs:{"force-theme":"light",name:"pgn",readonly:!0,value:i.displayedPgn},on:{focus:function(i){return i.target.select()}}})],1),i._v(" "),_("download-button",{on:{download:i.download}})],1)},T=[]},89385:function(i,s,_){"use strict";_.d(s,{s:function(){return render},x:function(){return T}});var render=function(){var i,s,_=this,T=_.$createElement,S=_._self._c||T;return S("div",{class:_.$style.component},[S("div",{class:[_.$style.wrapper,(i={},i[_.$style.expanded]=_.isExpanded,i)]},[S("div",{class:_.$style.primary},[S("button",{class:[_.$style.link,_.$style.facebook],attrs:{type:"button","aria-label":_.translations.shareFacebook,title:_.translations.shareFacebook},on:{click:function(i){return _.shareWindow("facebook")}}},[S("span",{staticClass:"icon-font-chess facebook",class:_.$style.icon})]),_._v(" "),S("button",{class:[_.$style.link,_.$style.twitter],attrs:{type:"button","aria-label":_.translations.shareTwitter,title:_.translations.shareTwitter},on:{click:function(i){return _.shareWindow("twitter")}}},[S("span",{staticClass:"icon-font-chess twitter",class:_.$style.icon})]),_._v(" "),S("button",{class:[_.$style.link,_.$style.reddit],attrs:{type:"button","aria-label":_.translations.shareReddit,title:_.translations.shareReddit},on:{click:function(i){return _.shareWindow("reddit")}}},[S("span",{staticClass:"icon-font-chess reddit",class:_.$style.icon})]),_._v(" "),S("button",{class:[_.$style.link,_.$style.more],attrs:{type:"button","aria-label":_.translations.showMore,title:_.translations.showMore},on:{click:_.toggleExpanded}},[S("span",{staticClass:"icon-font-chess",class:[_.$style.icon,_.isExpanded?"x":"circle-3-dots"]})])]),_._v(" "),S("div",{class:[_.$style.secondary,(s={},s[_.$style.visible]=_.isExpanded,s)]},[S("button",{class:_.$style.link,attrs:{type:"button","aria-label":_.translations.shareLinkedIn,title:_.translations.shareLinkedIn},on:{click:function(i){return _.shareWindow("linkedin")}}},[S("span",{staticClass:"icon-font-chess linkedin",class:_.$style.icon})]),_._v(" "),S("button",{class:_.$style.link,attrs:{type:"button","aria-label":_.translations.shareMix,title:_.translations.shareMix},on:{click:function(i){return _.shareWindow("mix")}}},[S("span",{staticClass:"icon-font-chess mix",class:_.$style.icon})]),_._v(" "),S("button",{class:_.$style.link,attrs:{type:"button","aria-label":_.translations.shareTumblr,title:_.translations.shareTumblr},on:{click:function(i){return _.shareWindow("tumblr")}}},[S("span",{staticClass:"icon-font-chess tumblr",class:_.$style.icon})]),_._v(" "),S("button",{class:_.$style.link,attrs:{type:"button","aria-label":_.translations.addFavorites,title:_.translations.addFavorites},on:{click:_.bookmarkPage}},[S("span",{staticClass:"icon-font-chess favorites",class:_.$style.icon})]),_._v(" "),S("button",{class:_.$style.link,attrs:{type:"button","aria-label":_.translations.sendEmail,title:_.translations.sendEmail},on:{click:function(i){return _.sendInvitation(_.userId,_.username)}}},[S("span",{staticClass:"icon-font-chess mail",class:_.$style.icon})]),_._v(" "),S("button",{class:_.$style.link,attrs:{type:"button","aria-label":_.translations.print,title:_.translations.print},on:{click:_.printWindow}},[S("span",{staticClass:"icon-font-chess printer",class:_.$style.icon})])])])])},T=[]},15315:function(i,s,_){"use strict";_.d(s,{s:function(){return render},x:function(){return T}});var render=function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("div",{ref:"editor",attrs:{"data-placeholder":i.placeholder},domProps:{innerHTML:i._s(i.initValue)}})])},T=[]},51804:function(i,s,_){"use strict";var T=_(75618),S=_(17205),C=_(67191),P=_(5516),O=_(49981),M=i.exports=function(i,s){var _,S,M,R,D;return arguments.length<2||"string"!=typeof i?(R=s,s=i,i=null):R=arguments[2],T(i)?(_=O.call(i,"c"),S=O.call(i,"e"),M=O.call(i,"w")):(_=M=!0,S=!1),D={value:s,configurable:_,enumerable:S,writable:M},R?C(P(R),D):D};M.gs=function(i,s,_){var M,R,D,j;return"string"!=typeof i?(D=_,_=s,s=i,i=null):D=arguments[3],T(s)?S(s)?T(_)?S(_)||(D=_,_=void 0):_=void 0:(D=s,s=_=void 0):s=void 0,T(i)?(M=O.call(i,"c"),R=O.call(i,"e")):(M=!0,R=!1),j={get:s,set:_,configurable:M,enumerable:R},D?C(P(D),j):j}},70430:function(i){"use strict";i.exports=function(){}},67191:function(i,s,_){"use strict";i.exports=_(96560)()?Object.assign:_(47346)},96560:function(i){"use strict";i.exports=function(){var i,s=Object.assign;return"function"==typeof s&&(s(i={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),i.foo+i.bar+i.trzy==="razdwatrzy")}},47346:function(i,s,_){"use strict";var T=_(45103),S=_(32745),C=Math.max;i.exports=function(i,s){var _,P,O,M=C(arguments.length,2);for(i=Object(S(i)),O=function(T){try{i[T]=s[T]}catch(S){_||(_=S)}},P=1;P<M;++P)T(s=arguments[P]).forEach(O);if(void 0!==_)throw _;return i}},76914:function(i,s,_){"use strict";var T=_(70430)();i.exports=function(i){return i!==T&&null!==i}},45103:function(i,s,_){"use strict";i.exports=_(17446)()?Object.keys:_(96137)},17446:function(i){"use strict";i.exports=function(){try{return Object.keys("primitive"),!0}catch(i){return!1}}},96137:function(i,s,_){"use strict";var T=_(76914),S=Object.keys;i.exports=function(i){return S(T(i)?Object(i):i)}},5516:function(i,s,_){"use strict";var T=_(76914),S=Array.prototype.forEach,C=Object.create,process=function(i,s){var _;for(_ in i)s[_]=i[_]};i.exports=function(i){var s=C(null);return S.call(arguments,(function(i){T(i)&&process(Object(i),s)})),s}},31290:function(i){"use strict";i.exports=function(i){if("function"!=typeof i)throw new TypeError(i+" is not a function");return i}},32745:function(i,s,_){"use strict";var T=_(76914);i.exports=function(i){if(!T(i))throw new TypeError("Cannot use null or undefined");return i}},49981:function(i,s,_){"use strict";i.exports=_(43591)()?String.prototype.contains:_(6042)},43591:function(i){"use strict";var s="razdwatrzy";i.exports=function(){return"function"==typeof s.contains&&(!0===s.contains("dwa")&&!1===s.contains("foo"))}},6042:function(i){"use strict";var s=String.prototype.indexOf;i.exports=function(i){return s.call(this,i,arguments[1])>-1}},48370:function(i,s,_){"use strict";var T,S,C,P,O,M,R,D=_(51804),j=_(31290),$=Function.prototype.apply,U=Function.prototype.call,V=Object.create,Z=Object.defineProperty,Y=Object.defineProperties,X=Object.prototype.hasOwnProperty,Q={configurable:!0,enumerable:!1,writable:!0};S=function(i,s){var _,S;return j(s),S=this,T.call(this,i,_=function(){C.call(S,i,_),$.call(s,this,arguments)}),_.__eeOnceListener__=s,this},P=function(i){var s,_,T,S,C;if(X.call(this,"__ee__")&&(S=this.__ee__[i]))if("object"==typeof S){for(_=arguments.length,C=new Array(_-1),s=1;s<_;++s)C[s-1]=arguments[s];for(S=S.slice(),s=0;T=S[s];++s)$.call(T,this,C)}else switch(arguments.length){case 1:U.call(S,this);break;case 2:U.call(S,this,arguments[1]);break;case 3:U.call(S,this,arguments[1],arguments[2]);break;default:for(_=arguments.length,C=new Array(_-1),s=1;s<_;++s)C[s-1]=arguments[s];$.call(S,this,C)}},O={on:T=function(i,s){var _;return j(s),X.call(this,"__ee__")?_=this.__ee__:(_=Q.value=V(null),Z(this,"__ee__",Q),Q.value=null),_[i]?"object"==typeof _[i]?_[i].push(s):_[i]=[_[i],s]:_[i]=s,this},once:S,off:C=function(i,s){var _,T,S,C;if(j(s),!X.call(this,"__ee__"))return this;if(!(_=this.__ee__)[i])return this;if("object"==typeof(T=_[i]))for(C=0;S=T[C];++C)S!==s&&S.__eeOnceListener__!==s||(2===T.length?_[i]=T[C?0:1]:T.splice(C,1));else T!==s&&T.__eeOnceListener__!==s||delete _[i];return this},emit:P},M={on:D(T),once:D(S),off:D(C),emit:D(P)},R=Y({},M),i.exports=s=function(i){return null==i?V(R):Y(Object(i),M)},s.methods=O},93162:function(i,s,_){var T,S,C;S=[],T=function(){"use strict";function b(i,s){return void 0===s?s={autoBom:!1}:"object"!=typeof s&&(console.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\ufeff",i],{type:i.type}):i}function c(i,s,_){var T=new XMLHttpRequest;T.open("GET",i),T.responseType="blob",T.onload=function(){S(T.response,s,_)},T.onerror=function(){console.error("could not download file")},T.send()}function d(i){var s=new XMLHttpRequest;s.open("HEAD",i,!1);try{s.send()}catch(i){}return 200<=s.status&&299>=s.status}function e(i){try{i.dispatchEvent(new MouseEvent("click"))}catch(c){var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),i.dispatchEvent(s)}}var s="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof _.g&&_.g.global===_.g?_.g:void 0,T=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),S=s.saveAs||("object"!=typeof window||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!T?function(i,_,T){var S=s.URL||s.webkitURL,C=document.createElement("a");_=_||i.name||"download",C.download=_,C.rel="noopener","string"==typeof i?(C.href=i,C.origin===location.origin?e(C):d(C.href)?c(i,_,T):e(C,C.target="_blank")):(C.href=S.createObjectURL(i),setTimeout((function(){S.revokeObjectURL(C.href)}),4e4),setTimeout((function(){e(C)}),0))}:"msSaveOrOpenBlob"in navigator?function(i,s,_){if(s=s||i.name||"download","string"!=typeof i)navigator.msSaveOrOpenBlob(b(i,_),s);else if(d(i))c(i,s,_);else{var T=document.createElement("a");T.href=i,T.target="_blank",setTimeout((function(){e(T)}))}}:function(i,_,S,C){if((C=C||open("","_blank"))&&(C.document.title=C.document.body.innerText="downloading..."),"string"==typeof i)return c(i,_,S);var P="application/octet-stream"===i.type,O=/constructor/i.test(s.HTMLElement)||s.safari,M=/CriOS\/[\d]+/.test(navigator.userAgent);if((M||P&&O||T)&&"undefined"!=typeof FileReader){var R=new FileReader;R.onloadend=function(){var i=R.result;i=M?i:i.replace(/^data:[^;]*;/,"data:attachment/file;"),C?C.location.href=i:location=i,C=null},R.readAsDataURL(i)}else{var D=s.URL||s.webkitURL,j=D.createObjectURL(i);C?C.location=j:location.href=j,C=null,setTimeout((function(){D.revokeObjectURL(j)}),4e4)}});s.saveAs=S.saveAs=S,i.exports=S},void 0===(C="function"==typeof T?T.apply(s,S):T)||(i.exports=C)},89144:function(i,s,_){var T,S=void 0!==_.g?_.g:"undefined"!=typeof window?window:{},C=_(25893);"undefined"!=typeof document?T=document:(T=S["__GLOBAL_DOCUMENT_CACHE@4"])||(T=S["__GLOBAL_DOCUMENT_CACHE@4"]=C),i.exports=T},58908:function(i,s,_){var T;T="undefined"!=typeof window?window:void 0!==_.g?_.g:"undefined"!=typeof self?self:{},i.exports=T},78840:function(i,s,_){"use strict";var T,S,C;S="undefined"!=typeof window?window:this,C=function(i){function L(i,s,_,T){i.hasOwnProperty(s)||(i[s]=T.apply(null,_))}var s={};return L(s,"Core/Globals.js",[],(function(){var s,_=void 0!==i?i:"undefined"!=typeof window?window:{};return function(i){i.SVG_NS="http://www.w3.org/2000/svg",i.product="Highcharts",i.version="9.1.2",i.win=_,i.doc=i.win.document,i.svg=i.doc&&i.doc.createElementNS&&!!i.doc.createElementNS(i.SVG_NS,"svg").createSVGRect,i.userAgent=i.win.navigator&&i.win.navigator.userAgent||"",i.isChrome=-1!==i.userAgent.indexOf("Chrome"),i.isFirefox=-1!==i.userAgent.indexOf("Firefox"),i.isMS=/(edge|msie|trident)/i.test(i.userAgent)&&!i.win.opera,i.isSafari=!i.isChrome&&-1!==i.userAgent.indexOf("Safari"),i.isTouchDevice=/(Mobile|Android|Windows Phone)/.test(i.userAgent),i.isWebKit=-1!==i.userAgent.indexOf("AppleWebKit"),i.deg2rad=2*Math.PI/360,i.hasBidiBug=i.isFirefox&&4>parseInt(i.userAgent.split("Firefox/")[1],10),i.hasTouch=!!i.win.TouchEvent,i.marginNames=["plotTop","marginRight","marginBottom","plotLeft"],i.noop=function(){},i.supportsPassiveEvents=function(){var s=!1;if(!i.isMS){var _=Object.defineProperty({},"passive",{get:function(){s=!0}});i.win.addEventListener&&i.win.removeEventListener&&(i.win.addEventListener("testPassive",i.noop,_),i.win.removeEventListener("testPassive",i.noop,_))}return s}(),i.charts=[],i.dateFormats={},i.seriesTypes={},i.symbolSizes={},i.chartCount=0}(s||(s={})),s})),L(s,"Core/Utilities.js",[s["Core/Globals.js"]],(function(i){function v(s,_,T,C){var P=_?"Highcharts error":"Highcharts warning";32===s&&(s=P+": Deprecated member");var O=h(s),M=O?P+" #"+s+": www.highcharts.com/errors/"+s+"/":s.toString();if(void 0!==C){var R="";O&&(M+="?"),J(C,(function(i,s){R+="\n - "+s+": "+i,O&&(M+=encodeURI(s)+"="+encodeURI(i))})),M+=R}A(i,"displayError",{chart:T,code:s,message:M,params:C},(function(){if(_)throw Error(M);S.console&&-1===v.messages.indexOf(M)&&console.warn(M)})),v.messages.push(M)}function H(i,s){return parseInt(i,s||10)}function x(i){return"string"==typeof i}function y(i){return"[object Array]"===(i=Object.prototype.toString.call(i))||"[object Array Iterator]"===i}function G(i,s){return!(!i||"object"!=typeof i||s&&y(i))}function B(i){return G(i)&&"number"==typeof i.nodeType}function q(i){var s=i&&i.constructor;return!(!G(i,!0)||B(i)||!s||!s.name||"Object"===s.name)}function h(i){return"number"==typeof i&&!isNaN(i)&&1/0>i&&-1/0<i}function f(i){return null!=i}function c(i,s,_){var T;return x(s)?f(_)?i.setAttribute(s,_):i&&i.getAttribute&&((T=i.getAttribute(s))||"class"!==s||(T=i.getAttribute(s+"Name"))):J(s,(function(s,_){i.setAttribute(_,s)})),T}function e(i,s){var _;for(_ in i||(i={}),s)i[_]=s[_];return i}function t(){for(var i=arguments,s=i.length,_=0;_<s;_++){var T=i[_];if(null!=T)return T}}function m(s,_){i.isMS&&!i.svg&&_&&void 0!==_.opacity&&(_.filter="alpha(opacity="+100*_.opacity+")"),e(s.style,_)}function w(i,s,_,S,C){return i=T.createElement(i),s&&e(i,s),C&&m(i,{padding:"0",border:"none",margin:"0"}),_&&m(i,_),S&&S.appendChild(i),i}function n(i,s){return parseFloat(i.toPrecision(s||14))}function J(i,s,_){for(var T in i)Object.hasOwnProperty.call(i,T)&&s.call(_||i[T],i[T],T,i)}function K(s,_,T){function k(_,T){var S=s.removeEventListener||i.removeEventListenerPolyfill;S&&S.call(s,_,T,!1)}function r(i){var T;if(s.nodeName){if(_){var S={};S[_]=!0}else S=i;J(S,(function(s,_){if(i[_])for(T=i[_].length;T--;)k(_,i[_][T].fn)}))}}var S="function"==typeof s&&s.prototype||s;if(Object.hasOwnProperty.call(S,"hcEvents")){var C=S.hcEvents;_?(S=C[_]||[],T?(C[_]=S.filter((function(i){return T!==i.fn})),k(_,T)):(r(C),C[_]=[])):(r(C),delete S.hcEvents)}}function A(s,_,S,C){if(S=S||{},T.createEvent&&(s.dispatchEvent||s.fireEvent&&s!==i)){var P=T.createEvent("Events");P.initEvent(_,!0,!0),S=e(P,S),s.dispatchEvent?s.dispatchEvent(S):s.fireEvent(_,S)}else if(s.hcEvents){S.target||e(S,{preventDefault:function(){S.defaultPrevented=!0},target:s,type:_}),P=[];for(var O=s,M=!1;O.hcEvents;)Object.hasOwnProperty.call(O,"hcEvents")&&O.hcEvents[_]&&(P.length&&(M=!0),P.unshift.apply(P,O.hcEvents[_])),O=Object.getPrototypeOf(O);M&&P.sort((function(i,s){return i.order-s.order})),P.forEach((function(i){!1===i.fn.call(s,S)&&S.preventDefault()}))}C&&!S.defaultPrevented&&C.call(s,S)}var s,_=i.charts,T=i.doc,S=i.win;(v||(v={})).messages=[],Math.easeInOutSine=function(i){return-.5*(Math.cos(Math.PI*i)-1)};var C=Array.prototype.find?function(i,s){return i.find(s)}:function(i,s){var _,T=i.length;for(_=0;_<T;_++)if(s(i[_],_))return i[_]};J({map:"map",each:"forEach",grep:"filter",reduce:"reduce",some:"some"},(function(s,_){i[_]=function(i){var T;return v(32,!1,void 0,((T={})["Highcharts."+_]="use Array."+s,T)),Array.prototype[s].apply(i,[].slice.call(arguments,1))}}));var P,O=function(){var i=Math.random().toString(36).substring(2,9)+"-",s=0;return function(){return"highcharts-"+(P?"":i)+s++}}();return S.jQuery&&(S.jQuery.fn.highcharts=function(){var s=[].slice.call(arguments);if(this[0])return s[0]?(new(i[x(s[0])?s.shift():"Chart"])(this[0],s[0],s[1]),this):_[c(this[0],"data-highcharts-chart")]}),{addEvent:function(s,_,T,S){void 0===S&&(S={});var C="function"==typeof s&&s.prototype||s;Object.hasOwnProperty.call(C,"hcEvents")||(C.hcEvents={}),C=C.hcEvents,i.Point&&s instanceof i.Point&&s.series&&s.series.chart&&(s.series.chart.runTrackerClick=!0);var P=s.addEventListener||i.addEventListenerPolyfill;return P&&P.call(s,_,T,!!i.supportsPassiveEvents&&{passive:void 0===S.passive?-1!==_.indexOf("touch"):S.passive,capture:!1}),C[_]||(C[_]=[]),C[_].push({fn:T,order:"number"==typeof S.order?S.order:1/0}),C[_].sort((function(i,s){return i.order-s.order})),function(){K(s,_,T)}},arrayMax:function(i){for(var s=i.length,_=i[0];s--;)i[s]>_&&(_=i[s]);return _},arrayMin:function(i){for(var s=i.length,_=i[0];s--;)i[s]<_&&(_=i[s]);return _},attr:c,clamp:function(i,s,_){return i>s?i<_?i:_:s},cleanRecursively:function E(i,s){var _={};return J(i,(function(T,S){G(i[S],!0)&&!i.nodeType&&s[S]?(T=E(i[S],s[S]),Object.keys(T).length&&(_[S]=T)):(G(i[S])||i[S]!==s[S])&&(_[S]=i[S])})),_},clearTimeout:function(i){f(i)&&clearTimeout(i)},correctFloat:n,createElement:w,css:m,defined:f,destroyObjectProperties:function(i,s){J(i,(function(_,T){_&&_!==s&&_.destroy&&_.destroy(),delete i[T]}))},discardElement:function(i){s||(s=w("div")),i&&s.appendChild(i),s.innerHTML=""},erase:function(i,s){for(var _=i.length;_--;)if(i[_]===s){i.splice(_,1);break}},error:v,extend:e,extendClass:function(i,s){var g=function(){};return e(g.prototype=new i,s),g},find:C,fireEvent:A,getMagnitude:function(i){return Math.pow(10,Math.floor(Math.log(i)/Math.LN10))},getNestedProperty:function(i,s){for(i=i.split(".");i.length&&f(s);){var _=i.shift();if(void 0===_||"__proto__"===_)return;if(!f(s=s[_])||"function"==typeof s||"number"==typeof s.nodeType||s===S)return}return s},getStyle:function l(s,_,T){var C=i.getStyle||l;if("width"===_)return _=Math.min(s.offsetWidth,s.scrollWidth),(T=s.getBoundingClientRect&&s.getBoundingClientRect().width)<_&&T>=_-1&&(_=Math.floor(T)),Math.max(0,_-(C(s,"padding-left",!0)||0)-(C(s,"padding-right",!0)||0));if("height"===_)return Math.max(0,Math.min(s.offsetHeight,s.scrollHeight)-(C(s,"padding-top",!0)||0)-(C(s,"padding-bottom",!0)||0));if(S.getComputedStyle||v(27,!0),s=S.getComputedStyle(s,void 0)){var P=s.getPropertyValue(_);t(T,"opacity"!==_)&&(P=H(P))}return P},inArray:function(i,s,_){return v(32,!1,void 0,{"Highcharts.inArray":"use Array.indexOf"}),s.indexOf(i,_)},isArray:y,isClass:q,isDOMElement:B,isFunction:function(i){return"function"==typeof i},isNumber:h,isObject:G,isString:x,keys:function(i){return v(32,!1,void 0,{"Highcharts.keys":"use Object.keys"}),Object.keys(i)},merge:function(){var i,s=arguments,_={},k=function(i,s){return"object"!=typeof i&&(i={}),J(s,(function(_,T){"__proto__"!==T&&"constructor"!==T&&(!G(_,!0)||q(_)||B(_)?i[T]=s[T]:i[T]=k(i[T]||{},_))})),i};!0===s[0]&&(_=s[1],s=Array.prototype.slice.call(s,2));var T=s.length;for(i=0;i<T;i++)_=k(_,s[i]);return _},normalizeTickInterval:function(i,s,_,T,S){var C=i,P=i/(_=t(_,1));for(s||(s=S?[1,1.2,1.5,2,2.5,3,4,5,6,8,10]:[1,2,2.5,5,10],!1===T&&(1===_?s=s.filter((function(i){return 0==i%1})):.1>=_&&(s=[1/_]))),T=0;T<s.length&&(C=s[T],!(S&&C*_>=i||!S&&P<=(s[T]+(s[T+1]||s[T]))/2));T++);return n(C*_,-Math.round(Math.log(.001)/Math.LN10))},objectEach:J,offset:function(i){var s=T.documentElement;return{top:(i=i.parentElement||i.parentNode?i.getBoundingClientRect():{top:0,left:0,width:0,height:0}).top+(S.pageYOffset||s.scrollTop)-(s.clientTop||0),left:i.left+(S.pageXOffset||s.scrollLeft)-(s.clientLeft||0),width:i.width,height:i.height}},pad:function(i,s,_){return Array((s||2)+1-String(i).replace("-","").length).join(_||"0")+i},pick:t,pInt:H,relativeLength:function(i,s,_){return/%$/.test(i)?s*parseFloat(i)/100+(_||0):parseFloat(i)},removeEvent:K,splat:function(i){return y(i)?i:[i]},stableSort:function(i,s){var _,T,S=i.length;for(T=0;T<S;T++)i[T].safeI=T;for(i.sort((function(i,T){return 0===(_=s(i,T))?i.safeI-T.safeI:_})),T=0;T<S;T++)delete i[T].safeI},syncTimeout:function(i,s,_){return 0<s?setTimeout(i,s,_):(i.call(0,_),-1)},timeUnits:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},uniqueKey:O,useSerialIds:function(i){return P=t(i,P)},wrap:function(i,s,_){var T=i[s];i[s]=function(){var i=Array.prototype.slice.call(arguments),s=arguments,S=this;return S.proceed=function(){T.apply(S,arguments.length?arguments:s)},i.unshift(T),i=_.apply(this,i),S.proceed=null,i}}}})),L(s,"Core/Color/Palette.js",[],(function(){return{colors:"#7cb5ec #434348 #90ed7d #f7a35c #8085e9 #f15c80 #e4d354 #2b908f #f45b5b #91e8e1".split(" "),backgroundColor:"#ffffff",neutralColor100:"#000000",neutralColor80:"#333333",neutralColor60:"#666666",neutralColor40:"#999999",neutralColor20:"#cccccc",neutralColor10:"#e6e6e6",neutralColor5:"#f2f2f2",neutralColor3:"#f7f7f7",highlightColor100:"#003399",highlightColor80:"#335cad",highlightColor60:"#6685c2",highlightColor20:"#ccd6eb",highlightColor10:"#e6ebf5",positiveColor:"#06b535",negativeColor:"#f21313"}})),L(s,"Core/Chart/ChartDefaults.js",[s["Core/Color/Palette.js"]],(function(i){return{panning:{enabled:!1,type:"x"},styledMode:!1,borderRadius:0,colorCount:10,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{zIndex:6},position:{align:"right",x:-10,y:10}},zoomBySingleTouch:!1,width:null,height:null,borderColor:i.highlightColor80,backgroundColor:i.backgroundColor,plotBorderColor:i.neutralColor20}})),L(s,"Core/Color/Color.js",[s["Core/Globals.js"],s["Core/Utilities.js"]],(function(i,s){var _=s.isNumber,T=s.merge,S=s.pInt;return s=function(){function u(s){this.parsers=[{regex:/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,parse:function(i){return[S(i[1]),S(i[2]),S(i[3]),parseFloat(i[4],10)]}},{regex:/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,parse:function(i){return[S(i[1]),S(i[2]),S(i[3]),1]}}],this.rgba=[];var _=i.Color;return _&&_!==u?new _(s):this instanceof u?void this.init(s):new u(s)}return u.parse=function(i){return new u(i)},u.prototype.init=function(i){var s,_;if((this.input=i=u.names[i&&i.toLowerCase?i.toLowerCase():""]||i)&&i.stops)this.stops=i.stops.map((function(i){return new u(i[1])}));else{if(i&&i.charAt&&"#"===i.charAt()){var T=i.length;i=parseInt(i.substr(1),16),7===T?s=[(16711680&i)>>16,(65280&i)>>8,255&i,1]:4===T&&(s=[(3840&i)>>4|(3840&i)>>8,(240&i)>>4|240&i,(15&i)<<4|15&i,1])}if(!s)for(_=this.parsers.length;_--&&!s;){var S=this.parsers[_];(T=S.regex.exec(i))&&(s=S.parse(T))}}this.rgba=s||[]},u.prototype.get=function(i){var s=this.input,S=this.rgba;if(void 0!==this.stops){var C=T(s);C.stops=[].concat(C.stops),this.stops.forEach((function(s,_){C.stops[_]=[C.stops[_][0],s.get(i)]}))}else C=S&&_(S[0])?"rgb"===i||!i&&1===S[3]?"rgb("+S[0]+","+S[1]+","+S[2]+")":"a"===i?S[3]:"rgba("+S.join(",")+")":s;return C},u.prototype.brighten=function(i){var s,T=this.rgba;if(this.stops)this.stops.forEach((function(s){s.brighten(i)}));else if(_(i)&&0!==i)for(s=0;3>s;s++)T[s]+=S(255*i),0>T[s]&&(T[s]=0),255<T[s]&&(T[s]=255);return this},u.prototype.setOpacity=function(i){return this.rgba[3]=i,this},u.prototype.tweenTo=function(i,s){var _=this.rgba,T=i.rgba;return s=T.length&&_&&_.length?((i=1!==T[3]||1!==_[3])?"rgba(":"rgb(")+Math.round(T[0]+(_[0]-T[0])*(1-s))+","+Math.round(T[1]+(_[1]-T[1])*(1-s))+","+Math.round(T[2]+(_[2]-T[2])*(1-s))+(i?","+(T[3]+(_[3]-T[3])*(1-s)):"")+")":i.input||"none"},u.names={white:"#ffffff",black:"#000000"},u}(),s})),L(s,"Core/Time.js",[s["Core/Globals.js"],s["Core/Utilities.js"]],(function(i,s){var _=i.win,T=s.defined,S=s.error,C=s.extend,P=s.isObject,O=s.merge,M=s.objectEach,R=s.pad,D=s.pick,j=s.splat,$=s.timeUnits,U=i.isSafari&&Intl&&Intl.DateTimeFormat.prototype.formatRange,V=i.isSafari&&Intl&&!Intl.DateTimeFormat.prototype.formatRange;return s=function(){function w(i){this.options={},this.variableTimezone=this.useUTC=!1,this.Date=_.Date,this.getTimezoneOffset=this.timezoneOffsetFunction(),this.update(i)}return w.prototype.get=function(i,s){if(this.variableTimezone||this.timezoneOffset){var _=s.getTime(),T=_-this.getTimezoneOffset(s);return s.setTime(T),i=s["getUTC"+i](),s.setTime(_),i}return this.useUTC?s["getUTC"+i]():s["get"+i]()},w.prototype.set=function(i,s,_){if(this.variableTimezone||this.timezoneOffset){if("Milliseconds"===i||"Seconds"===i||"Minutes"===i&&0==this.getTimezoneOffset(s)%36e5)return s["setUTC"+i](_);var T=this.getTimezoneOffset(s);return T=s.getTime()-T,s.setTime(T),s["setUTC"+i](_),i=this.getTimezoneOffset(s),T=s.getTime()+i,s.setTime(T)}return this.useUTC||U&&"FullYear"===i?s["setUTC"+i](_):s["set"+i](_)},w.prototype.update=function(i){var s=D(i&&i.useUTC,!0);this.options=i=O(!0,this.options||{},i),this.Date=i.Date||_.Date||Date,this.timezoneOffset=(this.useUTC=s)&&i.timezoneOffset,this.getTimezoneOffset=this.timezoneOffsetFunction(),this.variableTimezone=s&&!(!i.getTimezoneOffset&&!i.timezone)},w.prototype.makeTime=function(i,s,_,T,S,C){if(this.useUTC){var P=this.Date.UTC.apply(0,arguments),O=this.getTimezoneOffset(P);P+=O;var M=this.getTimezoneOffset(P);O!==M?P+=M-O:O-36e5!==this.getTimezoneOffset(P-36e5)||V||(P-=36e5)}else P=new this.Date(i,s,D(_,1),D(T,0),D(S,0),D(C,0)).getTime();return P},w.prototype.timezoneOffsetFunction=function(){var i=this,s=this.options,T=s.moment||_.moment;if(!this.useUTC)return function(i){return 6e4*new Date(i.toString()).getTimezoneOffset()};if(s.timezone){if(T)return function(i){return 6e4*-T.tz(i,s.timezone).utcOffset()};S(25)}return this.useUTC&&s.getTimezoneOffset?function(i){return 6e4*s.getTimezoneOffset(i.valueOf())}:function(){return 6e4*(i.timezoneOffset||0)}},w.prototype.dateFormat=function(s,_,S){if(!T(_)||isNaN(_))return i.defaultOptions.lang&&i.defaultOptions.lang.invalidDate||"";s=D(s,"%Y-%m-%d %H:%M:%S");var P=this,O=new this.Date(_),j=this.get("Hours",O),$=this.get("Day",O),U=this.get("Date",O),V=this.get("Month",O),Z=this.get("FullYear",O),Y=i.defaultOptions.lang,X=Y&&Y.weekdays,Q=Y&&Y.shortWeekdays;return O=C({a:Q?Q[$]:X[$].substr(0,3),A:X[$],d:R(U),e:R(U,2," "),w:$,b:Y.shortMonths[V],B:Y.months[V],m:R(V+1),o:V+1,y:Z.toString().substr(2,2),Y:Z,H:R(j),k:j,I:R(j%12||12),l:j%12||12,M:R(this.get("Minutes",O)),p:12>j?"AM":"PM",P:12>j?"am":"pm",S:R(O.getSeconds()),L:R(Math.floor(_%1e3),3)},i.dateFormats),M(O,(function(i,T){for(;-1!==s.indexOf("%"+T);)s=s.replace("%"+T,"function"==typeof i?i.call(P,_):i)})),S?s.substr(0,1).toUpperCase()+s.substr(1):s},w.prototype.resolveDTLFormat=function(i){return P(i,!0)?i:{main:(i=j(i))[0],from:i[1],to:i[2]}},w.prototype.getTimeTicks=function(i,s,_,S){var P,O=this,M=[],R={},j=new O.Date(s),U=i.unitRange,V=i.count||1;if(S=D(S,1),T(s)){if(O.set("Milliseconds",j,U>=$.second?0:V*Math.floor(O.get("Milliseconds",j)/V)),U>=$.second&&O.set("Seconds",j,U>=$.minute?0:V*Math.floor(O.get("Seconds",j)/V)),U>=$.minute&&O.set("Minutes",j,U>=$.hour?0:V*Math.floor(O.get("Minutes",j)/V)),U>=$.hour&&O.set("Hours",j,U>=$.day?0:V*Math.floor(O.get("Hours",j)/V)),U>=$.day&&O.set("Date",j,U>=$.month?1:Math.max(1,V*Math.floor(O.get("Date",j)/V))),U>=$.month){O.set("Month",j,U>=$.year?0:V*Math.floor(O.get("Month",j)/V));var Z=O.get("FullYear",j)}U>=$.year&&O.set("FullYear",j,Z-Z%V),U===$.week&&(Z=O.get("Day",j),O.set("Date",j,O.get("Date",j)-Z+S+(Z<S?-7:0))),Z=O.get("FullYear",j),S=O.get("Month",j);var Y=O.get("Date",j),X=O.get("Hours",j);for(s=j.getTime(),!O.variableTimezone&&O.useUTC||!T(_)||(P=_-s>4*$.month||O.getTimezoneOffset(s)!==O.getTimezoneOffset(_)),s=j.getTime(),j=1;s<_;)M.push(s),s=U===$.year?O.makeTime(Z+j*V,0):U===$.month?O.makeTime(Z,S+j*V):!P||U!==$.day&&U!==$.week?P&&U===$.hour&&1<V?O.makeTime(Z,S,Y,X+j*V):s+U*V:O.makeTime(Z,S,Y+j*V*(U===$.day?1:7)),j++;M.push(s),U<=$.hour&&1e4>M.length&&M.forEach((function(i){0==i%18e5&&"000000000"===O.dateFormat("%H%M%S%L",i)&&(R[i]="day")}))}return M.info=C(i,{higherRanks:R,totalRange:U*V}),M},w}(),s})),L(s,"Core/DefaultOptions.js",[s["Core/Globals.js"],s["Core/Chart/ChartDefaults.js"],s["Core/Color/Color.js"],s["Core/Color/Palette.js"],s["Core/Time.js"],s["Core/Utilities.js"]],(function(i,s,_,T,S,C){var P=i.isTouchDevice,O=i.svg;_=_.parse;var M=C.merge,R={colors:T.colors,symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),decimalPoint:".",numericSymbols:"kMGTPE".split(""),resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{},time:{Date:void 0,getTimezoneOffset:void 0,timezone:void 0,timezoneOffset:0,useUTC:!0},chart:s,title:{text:"Chart title",align:"center",margin:15,widthAdjust:-44},subtitle:{text:"",align:"center",widthAdjust:-44},caption:{margin:15,text:"",align:"left",verticalAlign:"bottom"},plotOptions:{},labels:{style:{position:"absolute",color:T.neutralColor80}},legend:{enabled:!0,align:"center",alignColumns:!0,className:"highcharts-no-tooltip",layout:"horizontal",labelFormatter:function(){return this.name},borderColor:T.neutralColor40,borderRadius:0,navigation:{activeColor:T.highlightColor100,inactiveColor:T.neutralColor20},itemStyle:{color:T.neutralColor80,cursor:"pointer",fontSize:"12px",fontWeight:"bold",textOverflow:"ellipsis"},itemHoverStyle:{color:T.neutralColor100},itemHiddenStyle:{color:T.neutralColor20},shadow:!1,itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},squareSymbol:!0,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:T.backgroundColor,opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:O,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},footerFormat:"",padding:8,snap:P?25:10,headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}"></span> {series.name}: <b>{point.y}</b><br/>',backgroundColor:_(T.neutralColor3).setOpacity(.85).get(),borderWidth:1,shadow:!0,style:{color:T.neutralColor80,cursor:"default",fontSize:"12px",whiteSpace:"nowrap"}},credits:{enabled:!0,href:"https://www.highcharts.com?credits",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:T.neutralColor40,fontSize:"9px"},text:"Highcharts.com"}};R.chart.styledMode=!1;var D=new S(M(R.global,R.time));return{defaultOptions:R,defaultTime:D,getOptions:function(){return R},setOptions:function(s){return M(!0,R,s),(s.time||s.global)&&(i.time?i.time.update(M(R.global,R.time,s.global,s.time)):i.time=D),R}}})),L(s,"Core/Animation/Fx.js",[s["Core/Color/Color.js"],s["Core/Globals.js"],s["Core/Utilities.js"]],(function(i,s,_){var T=i.parse,S=s.win,C=_.isNumber,P=_.objectEach;return function(){function a(i,s,_){this.pos=NaN,this.options=s,this.elem=i,this.prop=_}return a.prototype.dSetter=function(){var i=this.paths,s=i&&i[0];i=i&&i[1];var _=this.now||0,T=[];if(1!==_&&s&&i)if(s.length===i.length&&1>_)for(var S=0;S<i.length;S++){for(var P=s[S],O=i[S],M=[],R=0;R<O.length;R++){var D=P[R],j=O[R];C(D)&&C(j)&&("A"!==O[0]||4!==R&&5!==R)?M[R]=D+_*(j-D):M[R]=j}T.push(M)}else T=i;else T=this.toD||[];this.elem.attr("d",T,void 0,!0)},a.prototype.update=function(){var i=this.elem,s=this.prop,_=this.now,T=this.options.step;this[s+"Setter"]?this[s+"Setter"]():i.attr?i.element&&i.attr(s,_,null,!0):i.style[s]=_+this.unit,T&&T.call(i,_,this)},a.prototype.run=function(i,s,_){var T=this,C=T.options,t=function(i){return!t.stopped&&T.step(i)},P=S.requestAnimationFrame||function(i){setTimeout(i,13)},w=function(){for(var i=0;i<a.timers.length;i++)a.timers[i]()||a.timers.splice(i--,1);a.timers.length&&P(w)};i!==s||this.elem["forceAnimate:"+this.prop]?(this.startTime=+new Date,this.start=i,this.end=s,this.unit=_,this.now=this.start,this.pos=0,t.elem=this.elem,t.prop=this.prop,t()&&1===a.timers.push(t)&&P(w)):(delete C.curAnim[this.prop],C.complete&&0===Object.keys(C.curAnim).length&&C.complete.call(this.elem))},a.prototype.step=function(i){var s=+new Date,_=this.options,T=this.elem,S=_.complete,C=_.duration,O=_.curAnim;if(T.attr&&!T.element)i=!1;else if(i||s>=C+this.startTime){this.now=this.end,this.pos=1,this.update();var M=O[this.prop]=!0;P(O,(function(i){!0!==i&&(M=!1)})),M&&S&&S.call(T),i=!1}else this.pos=_.easing((s-this.startTime)/C),this.now=this.start+(this.end-this.start)*this.pos,this.update(),i=!0;return i},a.prototype.initPath=function(i,s,_){function c(i,s){for(;i.length<D;){var _=i[0],T=s[D-i.length];T&&"M"===_[0]&&(i[0]="C"===T[0]?["C",_[1],_[2],_[1],_[2],_[1],_[2]]:["L",_[1],_[2]]),i.unshift(_),P&&(_=i.pop(),i.push(i[i.length-1],_))}}function e(i,s){for(;i.length<D;)if("C"===(s=i[Math.floor(i.length/O)-1].slice())[0]&&(s[1]=s[5],s[2]=s[6]),P){var _=i[Math.floor(i.length/O)].slice();i.splice(i.length/2,0,s,_)}else i.push(s)}var T=i.startX,S=i.endX;_=_.slice();var P=i.isArea,O=P?2:1;if(!(s=s&&s.slice()))return[_,_];if(T&&S&&S.length){for(i=0;i<T.length;i++){if(T[i]===S[0]){var M=i;break}if(T[0]===S[S.length-T.length+i]){M=i;var R=!0;break}if(T[T.length-1]===S[S.length-T.length+i]){M=T.length-i;break}}void 0===M&&(s=[])}if(s.length&&C(M)){var D=_.length+M*O;R?(c(s,_),e(_,s)):(c(_,s),e(s,_))}return[s,_]},a.prototype.fillSetter=function(){a.prototype.strokeSetter.apply(this,arguments)},a.prototype.strokeSetter=function(){this.elem.attr(this.prop,T(this.start).tweenTo(T(this.end),this.pos),null,!0)},a.timers=[],a}()})),L(s,"Core/Animation/AnimationUtilities.js",[s["Core/Animation/Fx.js"],s["Core/Utilities.js"]],(function(i,s){function v(i){return P(i)?O({duration:500,defer:0},i):{duration:i?500:0,defer:0}}function H(s,_){for(var T=i.timers.length;T--;)i.timers[T].elem!==s||_&&_!==i.timers[T].prop||(i.timers[T].stopped=!0)}var _=s.defined,T=s.getStyle,S=s.isArray,C=s.isNumber,P=s.isObject,O=s.merge,M=s.objectEach,R=s.pick;return{animate:function(s,_,R){var D,j,$,U="";if(!P(R)){var V=arguments;R={duration:V[2],easing:V[3],complete:V[4]}}C(R.duration)||(R.duration=400),R.easing="function"==typeof R.easing?R.easing:Math[R.easing]||Math.easeInOutSine,R.curAnim=O(_),M(_,(function(C,P){H(s,P),$=new i(s,R,P),j=void 0,"d"===P&&S(_.d)?($.paths=$.initPath(s,s.pathArray,_.d),$.toD=_.d,D=0,j=1):s.attr?D=s.attr(P):(D=parseFloat(T(s,P))||0,"opacity"!==P&&(U="px")),j||(j=C),"string"==typeof j&&j.match("px")&&(j=j.replace(/px/g,"")),$.run(D,j,U)}))},animObject:v,getDeferredAnimation:function(i,s,T){var S=v(s),C=0,P=0;return(T?[T]:i.series).forEach((function(i){i=v(i.options.animation),C=s&&_(s.defer)?S.defer:Math.max(C,i.duration+i.defer),P=Math.min(S.duration,i.duration)})),i.renderer.forExport&&(C=0),{defer:Math.max(0,C-P),duration:Math.min(C,P)}},setAnimation:function(i,s){s.renderer.globalAnimation=R(i,s.options.chart.animation,!0)},stop:H}})),L(s,"Core/Renderer/HTML/AST.js",[s["Core/Globals.js"],s["Core/Utilities.js"]],(function(i,s){var _=i.SVG_NS,T=s.attr,S=s.createElement,C=s.discardElement,P=s.error,O=s.isString,M=s.objectEach,R=s.splat;try{var D=!!(new DOMParser).parseFromString("","text/html")}catch(j){D=!1}return s=function(){function c(i){this.nodes="string"==typeof i?this.parseMarkup(i):i}return c.filterUserAttributes=function(i){return M(i,(function(s,_){var T=!0;-1===c.allowedAttributes.indexOf(_)&&(T=!1),-1!==["background","dynsrc","href","lowsrc","src"].indexOf(_)&&(T=O(s)&&c.allowedReferences.some((function(i){return 0===s.indexOf(i)}))),T||(P("Highcharts warning: Invalid attribute '"+_+"' in config"),delete i[_])})),i},c.setElementHTML=function(i,s){i.innerHTML="",s&&new c(s).addToDOM(i)},c.prototype.addToDOM=function(s){return function f(s,S){var C;return R(s).forEach((function(s){var O=s.tagName,R=s.textContent?i.doc.createTextNode(s.textContent):void 0;if(O)if("#text"===O)var D=R;else if(-1!==c.allowedTags.indexOf(O)){O=i.doc.createElementNS("svg"===O?_:S.namespaceURI||_,O);var j=s.attributes||{};M(s,(function(i,s){"tagName"!==s&&"attributes"!==s&&"children"!==s&&"textContent"!==s&&(j[s]=i)})),T(O,c.filterUserAttributes(j)),R&&O.appendChild(R),f(s.children||[],O),D=O}else P("Highcharts warning: Invalid tagName '"+O+"' in config");D&&S.appendChild(D),C=D})),C}(this.nodes,s)},c.prototype.parseMarkup=function(i){var s=[];if(D)i=(new DOMParser).parseFromString(i,"text/html");else{var _=S("div");_.innerHTML=i,i={body:_}}var h=function(i,s){var _=i.nodeName.toLowerCase(),T={tagName:_};if("#text"===_){if(_=i.textContent||"",/^[\s]*$/.test(_))return;T.textContent=_}if(_=i.attributes){var S={};[].forEach.call(_,(function(i){S[i.name]=i.value})),T.attributes=S}if(i.childNodes.length){var C=[];[].forEach.call(i.childNodes,(function(i){h(i,C)})),C.length&&(T.children=C)}s.push(T)};return[].forEach.call(i.body.childNodes,(function(i){return h(i,s)})),_&&C(_),s},c.allowedTags="a b br button caption circle clipPath code dd defs div dl dt em feComponentTransfer feFuncA feFuncB feFuncG feFuncR feGaussianBlur feOffset feMerge feMergeNode filter h1 h2 h3 h4 h5 h6 hr i img li linearGradient marker ol p path pattern pre rect small span stop strong style sub sup svg table text thead tbody tspan td th tr u ul #text".split(" "),c.allowedAttributes="aria-controls aria-describedby aria-expanded aria-haspopup aria-hidden aria-label aria-labelledby aria-live aria-pressed aria-readonly aria-roledescription aria-selected class clip-path color colspan cx cy d dx dy disabled fill height href id in markerHeight markerWidth offset opacity orient padding paddingLeft paddingRight patternUnits r refX refY role scope slope src startOffset stdDeviation stroke stroke-linecap stroke-width style tableValues result rowspan summary target tabindex text-align textAnchor textLength type valign width x x1 x2 y y1 y2 zIndex".split(" "),c.allowedReferences="https:// http:// mailto: / ../ ./ #".split(" "),c}(),s})),L(s,"Core/FormatUtilities.js",[s["Core/DefaultOptions.js"],s["Core/Utilities.js"]],(function(i,s){function v(i,s,T,S){i=+i||0,s=+s;var M=_.lang,R=(i.toString().split(".")[1]||"").split("e")[0].length,D=i.toString().split("e"),j=s;if(-1===s)s=Math.min(R,20);else if(C(s)){if(s&&D[1]&&0>D[1]){var $=s+ +D[1];0<=$?(D[0]=(+D[0]).toExponential($).split("e")[0],s=$):(D[0]=D[0].split(".")[0]||0,i=20>s?(D[0]*Math.pow(10,D[1])).toFixed(s):0,D[1]=0)}}else s=2;$=(Math.abs(D[1]?D[0]:i)+Math.pow(10,-Math.max(s,R)-1)).toFixed(s);var U=3<(R=String(O($))).length?R.length%3:0;return T=P(T,M.decimalPoint),S=P(S,M.thousandsSep),i=(0>i?"-":"")+(U?R.substr(0,U)+S:""),i=0>+D[1]&&!j?"0":i+R.substr(U).replace(/(\d{3})(?=\d)/g,"$1"+S),s&&(i+=T+$.slice(-s)),D[1]&&0!=+i&&(i+="e"+D[1]),i}var _=i.defaultOptions,T=i.defaultTime,S=s.getNestedProperty,C=s.isNumber,P=s.pick,O=s.pInt;return{dateFormat:function(i,s,_){return T.dateFormat(i,s,_)},format:function(i,s,C){var P="{",O=!1,M=/f$/,R=/\.([0-9])/,D=_.lang,j=C&&C.time||T;C=C&&C.numberFormatter||v;for(var $=[];i;){var U=i.indexOf(P);if(-1===U)break;var V=i.slice(0,U);if(O){if(V=V.split(":"),P=S(V.shift()||"",s),V.length&&"number"==typeof P)if(V=V.join(":"),M.test(V)){var Z=parseInt((V.match(R)||["","-1"])[1],10);null!==P&&(P=C(P,Z,D.decimalPoint,-1<V.indexOf(",")?D.thousandsSep:""))}else P=j.dateFormat(V,P);$.push(P)}else $.push(V);i=i.slice(U+1),P=(O=!O)?"}":"{"}return $.push(i),$.join("")},numberFormat:v}})),L(s,"Core/Renderer/SVG/SVGElement.js",[s["Core/Animation/AnimationUtilities.js"],s["Core/Renderer/HTML/AST.js"],s["Core/Color/Color.js"],s["Core/Globals.js"],s["Core/Color/Palette.js"],s["Core/Utilities.js"]],(function(i,s,_,T,S,C){var P=i.animate,O=i.animObject,M=i.stop,R=T.deg2rad,D=T.doc,j=T.noop,$=T.svg,U=T.SVG_NS,V=T.win,Z=C.addEvent,Y=C.attr,X=C.createElement,Q=C.css,ee=C.defined,te=C.erase,ne=C.extend,re=C.fireEvent,ie=C.isArray,ae=C.isFunction,se=C.isNumber,oe=C.isString,le=C.merge,ce=C.objectEach,ue=C.pick,de=C.pInt,he=C.syncTimeout,pe=C.uniqueKey;return i=function(){function a(){this.element=void 0,this.onEvents={},this.opacity=1,this.renderer=void 0,this.SVG_NS=U,this.symbolCustomAttribs="x y width height r start end innerR anchorX anchorY rounded".split(" ")}return a.prototype._defaultGetter=function(i){return i=ue(this[i+"Value"],this[i],this.element?this.element.getAttribute(i):null,0),/^[\-0-9\.]+$/.test(i)&&(i=parseFloat(i)),i},a.prototype._defaultSetter=function(i,s,_){_.setAttribute(s,i)},a.prototype.add=function(i){var s=this.renderer,_=this.element;if(i&&(this.parentGroup=i),this.parentInverted=i&&i.inverted,void 0!==this.textStr&&"text"===this.element.nodeName&&s.buildText(this),this.added=!0,!i||i.handleZ||this.zIndex)var T=this.zIndexSetter();return T||(i?i.element:s.box).appendChild(_),this.onAdd&&this.onAdd(),this},a.prototype.addClass=function(i,s){var _=s?"":this.attr("class")||"";return i=(i||"").split(/ /g).reduce((function(i,s){return-1===_.indexOf(s)&&i.push(s),i}),_?[_]:[]).join(" "),i!==_&&this.attr("class",i),this},a.prototype.afterSetters=function(){this.doTransform&&(this.updateTransform(),this.doTransform=!1)},a.prototype.align=function(i,s,_){var T,S,C,P={},O=this.renderer,M=O.alignedObjects;i?(this.alignOptions=i,this.alignByTranslate=s,(!_||oe(_))&&(this.alignTo=T=_||"renderer",te(M,this),M.push(this),_=void 0)):(i=this.alignOptions,s=this.alignByTranslate,T=this.alignTo),_=ue(_,O[T],"scrollablePlotBox"===T?O.plotBox:void 0,O),T=i.align;var R=i.verticalAlign;return O=(_.x||0)+(i.x||0),M=(_.y||0)+(i.y||0),"right"===T?S=1:"center"===T&&(S=2),S&&(O+=(_.width-(i.width||0))/S),P[s?"translateX":"x"]=Math.round(O),"bottom"===R?C=1:"middle"===R&&(C=2),C&&(M+=(_.height-(i.height||0))/C),P[s?"translateY":"y"]=Math.round(M),this[this.placed?"animate":"attr"](P),this.placed=!0,this.alignAttr=P,this},a.prototype.alignSetter=function(i){var s={left:"start",center:"middle",right:"end"};s[i]&&(this.alignValue=i,this.element.setAttribute("text-anchor",s[i]))},a.prototype.animate=function(i,s,_){var T=this,S=O(ue(s,this.renderer.globalAnimation,!0));return s=S.defer,ue(D.hidden,D.msHidden,D.webkitHidden,!1)&&(S.duration=0),0!==S.duration?(_&&(S.complete=_),he((function(){T.element&&P(T,i,S)}),s)):(this.attr(i,void 0,_),ce(i,(function(i,s){S.step&&S.step.call(this,i,{prop:s,pos:1,elem:this})}),this)),this},a.prototype.applyTextOutline=function(i){var s=this.element;-1!==i.indexOf("contrast")&&(i=i.replace(/contrast/g,this.renderer.getContrast(s.style.fill)));var _=i.split(" ");if(i=_[_.length-1],(_=_[0])&&"none"!==_&&T.svg){this.fakeTS=!0,this.ySetter=this.xSetter,_=_.replace(/(^[\d\.]+)(.*?)$/g,(function(i,s,_){return 2*Number(s)+_})),this.removeTextOutline();var S=D.createElementNS(U,"tspan");Y(S,{class:"highcharts-text-outline",fill:i,stroke:i,"stroke-width":_,"stroke-linejoin":"round"}),[].forEach.call(s.childNodes,(function(i){var s=i.cloneNode(!0);s.removeAttribute&&["fill","stroke","stroke-width","stroke"].forEach((function(i){return s.removeAttribute(i)})),S.appendChild(s)}));var C=D.createElementNS(U,"tspan");C.textContent="",["x","y"].forEach((function(i){var _=s.getAttribute(i);_&&C.setAttribute(i,_)})),S.appendChild(C),s.insertBefore(S,s.firstChild)}},a.prototype.attr=function(i,s,_,T){var S,C,P,O=this.element,R=this.symbolCustomAttribs,D=this;if("string"==typeof i&&void 0!==s){var j=i;(i={})[j]=s}return"string"==typeof i?D=(this[i+"Getter"]||this._defaultGetter).call(this,i,O):(ce(i,(function(s,_){C=!1,T||M(this,_),this.symbolName&&-1!==R.indexOf(_)&&(S||(this.symbolAttr(i),S=!0),C=!0),!this.rotation||"x"!==_&&"y"!==_||(this.doTransform=!0),C||((P=this[_+"Setter"]||this._defaultSetter).call(this,s,_,O),!this.styledMode&&this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(_)&&this.updateShadows(_,s,P))}),this),this.afterSetters()),_&&_.call(this),D},a.prototype.clip=function(i){return this.attr("clip-path",i?"url("+this.renderer.url+"#"+i.id+")":"none")},a.prototype.crisp=function(i,s){s=s||i.strokeWidth||0;var _=Math.round(s)%2/2;return i.x=Math.floor(i.x||this.x||0)+_,i.y=Math.floor(i.y||this.y||0)+_,i.width=Math.floor((i.width||this.width||0)-2*_),i.height=Math.floor((i.height||this.height||0)-2*_),ee(i.strokeWidth)&&(i.strokeWidth=s),i},a.prototype.complexColor=function(i,s,T){var S,C,P,O,M,R,D,j,$,U,V,Z=this.renderer,Y=[];re(this.renderer,"complexColor",{args:arguments},(function(){if(i.radialGradient?C="radialGradient":i.linearGradient&&(C="linearGradient"),C){if(P=i[C],M=Z.gradients,R=i.stops,$=T.radialReference,ie(P)&&(i[C]=P={x1:P[0],y1:P[1],x2:P[2],y2:P[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===C&&$&&!ee(P.gradientUnits)&&(O=P,P=le(P,Z.getRadialAttr($,O),{gradientUnits:"userSpaceOnUse"})),ce(P,(function(i,s){"id"!==s&&Y.push(s,i)})),ce(R,(function(i){Y.push(i)})),Y=Y.join(","),M[Y])U=M[Y].attr("id");else{P.id=U=pe();var X=M[Y]=Z.createElement(C).attr(P).add(Z.defs);X.radAttr=O,X.stops=[],R.forEach((function(i){0===i[1].indexOf("rgba")?(S=_.parse(i[1]),D=S.get("rgb"),j=S.get("a")):(D=i[1],j=1),i=Z.createElement("stop").attr({offset:i[0],"stop-color":D,"stop-opacity":j}).add(X),X.stops.push(i)}))}V="url("+Z.url+"#"+U+")",T.setAttribute(s,V),T.gradient=Y,i.toString=function(){return V}}}))},a.prototype.css=function(i){var s=this.styles,_={},T=this.element,S=["textOutline","textOverflow","width"],C="",P=!s;if(i&&i.color&&(i.fill=i.color),s&&ce(i,(function(i,T){s&&s[T]!==i&&(_[T]=i,P=!0)})),P){if(s&&(i=ne(s,_)),i)if(null===i.width||"auto"===i.width)delete this.textWidth;else if("text"===T.nodeName.toLowerCase()&&i.width)var O=this.textWidth=de(i.width);if(this.styles=i,O&&!$&&this.renderer.forExport&&delete i.width,T.namespaceURI===this.SVG_NS){var l=function(i,s){return"-"+s.toLowerCase()};ce(i,(function(i,s){-1===S.indexOf(s)&&(C+=s.replace(/([A-Z])/g,l)+":"+i+";")})),C&&Y(T,"style",C)}else Q(T,i);this.added&&("text"===this.element.nodeName&&this.renderer.buildText(this),i&&i.textOutline&&this.applyTextOutline(i.textOutline))}return this},a.prototype.dashstyleSetter=function(i){var s=this["stroke-width"];if("inherit"===s&&(s=1),i=i&&i.toLowerCase()){var _=i.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(i=_.length;i--;)_[i]=""+de(_[i])*ue(s,NaN);i=_.join(",").replace(/NaN/g,"none"),this.element.setAttribute("stroke-dasharray",i)}},a.prototype.destroy=function(){var i=this,s=i.element||{},_=i.renderer,T=s.ownerSVGElement,S=_.isSVG&&"SPAN"===s.nodeName&&i.parentGroup||void 0;if(s.onclick=s.onmouseout=s.onmouseover=s.onmousemove=s.point=null,M(i),i.clipPath&&T){var C=i.clipPath;[].forEach.call(T.querySelectorAll("[clip-path],[CLIP-PATH]"),(function(i){-1<i.getAttribute("clip-path").indexOf(C.element.id)&&i.removeAttribute("clip-path")})),i.clipPath=C.destroy()}if(i.stops){for(T=0;T<i.stops.length;T++)i.stops[T].destroy();i.stops.length=0,i.stops=void 0}for(i.safeRemoveChild(s),_.styledMode||i.destroyShadows();S&&S.div&&0===S.div.childNodes.length;)s=S.parentGroup,i.safeRemoveChild(S.div),delete S.div,S=s;i.alignTo&&te(_.alignedObjects,i),ce(i,(function(s,_){i[_]&&i[_].parentGroup===i&&i[_].destroy&&i[_].destroy(),delete i[_]}))},a.prototype.destroyShadows=function(){(this.shadows||[]).forEach((function(i){this.safeRemoveChild(i)}),this),this.shadows=void 0},a.prototype.destroyTextPath=function(i,s){var _=i.getElementsByTagName("text")[0];if(_){if(_.removeAttribute("dx"),_.removeAttribute("dy"),s.element.setAttribute("id",""),this.textPathWrapper&&_.getElementsByTagName("textPath").length){for(i=this.textPathWrapper.element.childNodes;i.length;)_.appendChild(i[0]);_.removeChild(this.textPathWrapper.element)}}else(i.getAttribute("dx")||i.getAttribute("dy"))&&(i.removeAttribute("dx"),i.removeAttribute("dy"));this.textPathWrapper&&(this.textPathWrapper=this.textPathWrapper.destroy())},a.prototype.dSetter=function(i,s,_){ie(i)&&("string"==typeof i[0]&&(i=this.renderer.pathToSegments(i)),this.pathArray=i,i=i.reduce((function(i,s,_){return s&&s.join?(_?i+" ":"")+s.join(" "):(s||"").toString()}),"")),/(NaN| {2}|^$)/.test(i)&&(i="M 0 0"),this[s]!==i&&(_.setAttribute(s,i),this[s]=i)},a.prototype.fadeOut=function(i){var s=this;s.animate({opacity:0},{duration:ue(i,150),complete:function(){s.attr({y:-9999}).hide()}})},a.prototype.fillSetter=function(i,s,_){"string"==typeof i?_.setAttribute(s,i):i&&this.complexColor(i,s,_)},a.prototype.getBBox=function(i,s){var _=this.renderer,T=this.element,S=this.styles,C=this.textStr,P=_.cache,O=_.cacheKeys,M=T.namespaceURI===this.SVG_NS;s=ue(s,this.rotation,0);var D,j=_.styledMode?T&&a.prototype.getStyle.call(T,"font-size"):S&&S.fontSize;if(ee(C)){var $=C.toString();-1===$.indexOf("<")&&($=$.replace(/[0-9]/g,"0")),$+=["",s,j,this.textWidth,S&&S.textOverflow,S&&S.fontWeight].join()}if($&&!i&&(D=P[$]),!D){if(M||_.forExport){try{var U=this.fakeTS&&function(i){var s=T.querySelector(".highcharts-text-outline");s&&Q(s,{display:i})};ae(U)&&U("none"),D=T.getBBox?ne({},T.getBBox()):{width:T.offsetWidth,height:T.offsetHeight},ae(U)&&U("")}catch(V){}(!D||0>D.width)&&(D={width:0,height:0})}else D=this.htmlGetBBox();if(_.isSVG&&(i=D.width,_=D.height,M&&(D.height=_={"11px,17":14,"13px,20":16}[S&&S.fontSize+","+Math.round(_)]||_),s&&(S=s*R,D.width=Math.abs(_*Math.sin(S))+Math.abs(i*Math.cos(S)),D.height=Math.abs(_*Math.cos(S))+Math.abs(i*Math.sin(S)))),$&&0<D.height){for(;250<O.length;)delete P[O.shift()];P[$]||O.push($),P[$]=D}}return D},a.prototype.getStyle=function(i){return V.getComputedStyle(this.element||this,"").getPropertyValue(i)},a.prototype.hasClass=function(i){return-1!==(""+this.attr("class")).split(" ").indexOf(i)},a.prototype.hide=function(i){return i?this.attr({y:-9999}):this.attr({visibility:"hidden"}),this},a.prototype.htmlGetBBox=function(){return{height:0,width:0,x:0,y:0}},a.prototype.init=function(i,s){this.element="span"===s?X(s):D.createElementNS(this.SVG_NS,s),this.renderer=i,re(this,"afterInit")},a.prototype.invert=function(i){return this.inverted=i,this.updateTransform(),this},a.prototype.on=function(i,s){var _=this.onEvents;return _[i]&&_[i](),_[i]=Z(this.element,i,s),this},a.prototype.opacitySetter=function(i,s,_){this.opacity=i=Number(Number(i).toFixed(3)),_.setAttribute(s,i)},a.prototype.removeClass=function(i){return this.attr("class",(""+this.attr("class")).replace(oe(i)?new RegExp("(^| )"+i+"( |$)"):i," ").replace(/ +/g," ").trim())},a.prototype.removeTextOutline=function(){var i=this.element.querySelector("tspan.highcharts-text-outline");i&&this.safeRemoveChild(i)},a.prototype.safeRemoveChild=function(i){var s=i.parentNode;s&&s.removeChild(i)},a.prototype.setRadialReference=function(i){var s=this.element.gradient&&this.renderer.gradients[this.element.gradient];return this.element.radialReference=i,s&&s.radAttr&&s.animate(this.renderer.getRadialAttr(i,s.radAttr)),this},a.prototype.setTextPath=function(i,_){var T=this.element,S=this.text?this.text.element:T,C={textAnchor:"text-anchor"},P=!1,O=this.textPathWrapper,M=!O;_=le(!0,{enabled:!0,attributes:{dy:-5,startOffset:"50%",textAnchor:"middle"}},_);var R=s.filterUserAttributes(_.attributes);if(i&&_&&_.enabled){O&&null===O.element.parentNode?(M=!0,O=O.destroy()):O&&this.removeTextOutline.call(O.parentGroup),this.options&&this.options.padding&&(R.dx=-this.options.padding),O||(this.textPathWrapper=O=this.renderer.createElement("textPath"),P=!0);var D=O.element;if((_=i.element.getAttribute("id"))||i.element.setAttribute("id",_=pe()),M)for(S.setAttribute("y",0),se(R.dx)&&S.setAttribute("x",-R.dx),i=[].slice.call(S.childNodes),M=0;M<i.length;M++){var $=i[M];$.nodeType!==Node.TEXT_NODE&&"tspan"!==$.nodeName||D.appendChild($)}P&&O&&O.add({element:S}),D.setAttributeNS("http://www.w3.org/1999/xlink","href",this.renderer.url+"#"+_),ee(R.dy)&&(D.parentNode.setAttribute("dy",R.dy),delete R.dy),ee(R.dx)&&(D.parentNode.setAttribute("dx",R.dx),delete R.dx),ce(R,(function(i,s){D.setAttribute(C[s]||s,i)})),T.removeAttribute("transform"),this.removeTextOutline.call(O),this.text&&!this.renderer.styledMode&&this.attr({fill:"none","stroke-width":0}),this.applyTextOutline=this.updateTransform=j}else O&&(delete this.updateTransform,delete this.applyTextOutline,this.destroyTextPath(T,i),this.updateTransform(),this.options&&this.options.rotation&&this.applyTextOutline(this.options.style.textOutline));return this},a.prototype.shadow=function(i,s,_){var T,C=[],P=this.element,O=this.oldShadowOptions,M={color:S.neutralColor100,offsetX:this.parentInverted?-1:1,offsetY:this.parentInverted?-1:1,opacity:.15,width:3},R=!1;if(!0===i?T=M:"object"==typeof i&&(T=ne(M,i)),T&&(T&&O&&ce(T,(function(i,s){i!==O[s]&&(R=!0)})),R&&this.destroyShadows(),this.oldShadowOptions=T),T){if(!this.shadows){var D=T.opacity/T.width,j=this.parentInverted?"translate("+T.offsetY+", "+T.offsetX+")":"translate("+T.offsetX+", "+T.offsetY+")";for(M=1;M<=T.width;M++){var $=P.cloneNode(!1),U=2*T.width+1-2*M;Y($,{stroke:i.color||S.neutralColor100,"stroke-opacity":D*M,"stroke-width":U,transform:j,fill:"none"}),$.setAttribute("class",($.getAttribute("class")||"")+" highcharts-shadow"),_&&(Y($,"height",Math.max(Y($,"height")-U,0)),$.cutHeight=U),s?s.element.appendChild($):P.parentNode&&P.parentNode.insertBefore($,P),C.push($)}this.shadows=C}}else this.destroyShadows();return this},a.prototype.show=function(i){return this.attr({visibility:i?"inherit":"visible"})},a.prototype.strokeSetter=function(i,s,_){this[s]=i,this.stroke&&this["stroke-width"]?(a.prototype.fillSetter.call(this,this.stroke,"stroke",_),_.setAttribute("stroke-width",this["stroke-width"]),this.hasStroke=!0):"stroke-width"===s&&0===i&&this.hasStroke?(_.removeAttribute("stroke"),this.hasStroke=!1):this.renderer.styledMode&&this["stroke-width"]&&(_.setAttribute("stroke-width",this["stroke-width"]),this.hasStroke=!0)},a.prototype.strokeWidth=function(){if(!this.renderer.styledMode)return this["stroke-width"]||0;var i=this.getStyle("stroke-width"),s=0;if(i.indexOf("px")===i.length-2)s=de(i);else if(""!==i){var _=D.createElementNS(U,"rect");Y(_,{width:i,"stroke-width":0}),this.element.parentNode.appendChild(_),s=_.getBBox().width,_.parentNode.removeChild(_)}return s},a.prototype.symbolAttr=function(i){var s=this;"x y r start end width height innerR anchorX anchorY clockwise".split(" ").forEach((function(_){s[_]=ue(i[_],s[_])})),s.attr({d:s.renderer.symbols[s.symbolName](s.x,s.y,s.width,s.height,s)})},a.prototype.textSetter=function(i){i!==this.textStr&&(delete this.textPxLength,this.textStr=i,this.added&&this.renderer.buildText(this))},a.prototype.titleSetter=function(i){var s=this.element,_=s.getElementsByTagName("title")[0]||D.createElementNS(this.SVG_NS,"title");s.insertBefore?s.insertBefore(_,s.firstChild):s.appendChild(_),_.textContent=String(ue(i,"")).replace(/<[^>]*>/g,"").replace(/&lt;/g,"<").replace(/&gt;/g,">")},a.prototype.toFront=function(){var i=this.element;return i.parentNode.appendChild(i),this},a.prototype.translate=function(i,s){return this.attr({translateX:i,translateY:s})},a.prototype.updateShadows=function(i,s,_){var T=this.shadows;if(T)for(var S=T.length;S--;)_.call(T[S],"height"===i?Math.max(s-(T[S].cutHeight||0),0):"d"===i?this.d:s,i,T[S])},a.prototype.updateTransform=function(){var i=this.scaleX,s=this.scaleY,_=this.inverted,T=this.rotation,S=this.matrix,C=this.element,P=this.translateX||0,O=this.translateY||0;_&&(P+=this.width,O+=this.height),P=["translate("+P+","+O+")"],ee(S)&&P.push("matrix("+S.join(",")+")"),_?P.push("rotate(90) scale(-1,1)"):T&&P.push("rotate("+T+" "+ue(this.rotationOriginX,C.getAttribute("x"),0)+" "+ue(this.rotationOriginY,C.getAttribute("y")||0)+")"),(ee(i)||ee(s))&&P.push("scale("+ue(i,1)+" "+ue(s,1)+")"),P.length&&C.setAttribute("transform",P.join(" "))},a.prototype.visibilitySetter=function(i,s,_){"inherit"===i?_.removeAttribute(s):this[s]!==i&&_.setAttribute(s,i),this[s]=i},a.prototype.xGetter=function(i){return"circle"===this.element.nodeName&&("x"===i?i="cx":"y"===i&&(i="cy")),this._defaultGetter(i)},a.prototype.zIndexSetter=function(i,s){var _=this.renderer,T=this.parentGroup,S=(T||_).element||_.box,C=this.element;_=S===_.box;var P,O=!1,M=this.added;if(ee(i)?(C.setAttribute("data-z-index",i),i=+i,this[s]===i&&(M=!1)):ee(this[s])&&C.removeAttribute("data-z-index"),this[s]=i,M){for((i=this.zIndex)&&T&&(T.handleZ=!0),P=(s=S.childNodes).length-1;0<=P&&!O;P--){M=(T=s[P]).getAttribute("data-z-index");var R=!ee(M);T!==C&&(0>i&&R&&!_&&!P?(S.insertBefore(C,s[P]),O=!0):(de(M)<=i||R&&(!ee(i)||0<=i))&&(S.insertBefore(C,s[P+1]||null),O=!0))}O||(S.insertBefore(C,s[_?3:0]||null),O=!0)}return O},a}(),i.prototype["stroke-widthSetter"]=i.prototype.strokeSetter,i.prototype.yGetter=i.prototype.xGetter,i.prototype.matrixSetter=i.prototype.rotationOriginXSetter=i.prototype.rotationOriginYSetter=i.prototype.rotationSetter=i.prototype.scaleXSetter=i.prototype.scaleYSetter=i.prototype.translateXSetter=i.prototype.translateYSetter=i.prototype.verticalAlignSetter=function(i,s){this[s]=i,this.doTransform=!0},i})),L(s,"Core/Renderer/RendererRegistry.js",[s["Core/Globals.js"]],(function(i){var s;return function(s){var _;s.rendererTypes={},s.getRendererType=function(i){return void 0===i&&(i=_),s.rendererTypes[i]||s.rendererTypes[_]},s.registerRendererType=function(T,S,C){s.rendererTypes[T]=S,_&&!C||(_=T,i.Renderer=S)}}(s||(s={})),s})),L(s,"Core/Renderer/SVG/SVGLabel.js",[s["Core/Renderer/SVG/SVGElement.js"],s["Core/Utilities.js"]],(function(i,s){var _=this&&this.__extends||function(){var a=function(i,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var _ in s)s.hasOwnProperty(_)&&(i[_]=s[_])},a(i,s)};return function(i,s){function e(){this.constructor=i}a(i,s),i.prototype=null===s?Object.create(s):(e.prototype=s.prototype,new e)}}(),T=s.defined,S=s.extend,C=s.isNumber,P=s.merge,O=s.pick,M=s.removeEvent;return function(s){function f(i,_,T,S,C,P,O,M,R,D){var j,$=s.call(this)||this;return $.paddingLeftSetter=$.paddingSetter,$.paddingRightSetter=$.paddingSetter,$.init(i,"g"),$.textStr=_,$.x=T,$.y=S,$.anchorX=P,$.anchorY=O,$.baseline=R,$.className=D,$.addClass("button"===D?"highcharts-no-tooltip":"highcharts-label"),D&&$.addClass("highcharts-"+D),$.text=i.text("",0,0,M).attr({zIndex:1}),"string"==typeof C&&((j=/^url\((.*?)\)$/.test(C))||$.renderer.symbols[C])&&($.symbolKey=C),$.bBox=f.emptyBBox,$.padding=3,$.baselineOffset=0,$.needsBox=i.styledMode||j,$.deferredAttr={},$.alignFactor=0,$}return _(f,s),f.prototype.alignSetter=function(i){(i={left:0,center:.5,right:1}[i])!==this.alignFactor&&(this.alignFactor=i,this.bBox&&C(this.xSetting)&&this.attr({x:this.xSetting}))},f.prototype.anchorXSetter=function(i,s){this.anchorX=i,this.boxAttr(s,Math.round(i)-this.getCrispAdjust()-this.xSetting)},f.prototype.anchorYSetter=function(i,s){this.anchorY=i,this.boxAttr(s,i-this.ySetting)},f.prototype.boxAttr=function(i,s){this.box?this.box.attr(i,s):this.deferredAttr[i]=s},f.prototype.css=function(s){if(s){var _={};s=P(s),f.textProps.forEach((function(i){void 0!==s[i]&&(_[i]=s[i],delete s[i])})),this.text.css(_);var T="width"in _;"fontSize"in _||"fontWeight"in _?this.updateTextPadding():T&&this.updateBoxSize()}return i.prototype.css.call(this,s)},f.prototype.destroy=function(){M(this.element,"mouseenter"),M(this.element,"mouseleave"),this.text&&this.text.destroy(),this.box&&(this.box=this.box.destroy()),i.prototype.destroy.call(this)},f.prototype.fillSetter=function(i,s){i&&(this.needsBox=!0),this.fill=i,this.boxAttr(s,i)},f.prototype.getBBox=function(){this.textStr&&0===this.bBox.width&&0===this.bBox.height&&this.updateBoxSize();var i=this.padding,s=O(this.paddingLeft,i);return{width:this.width,height:this.height,x:this.bBox.x-s,y:this.bBox.y-i}},f.prototype.getCrispAdjust=function(){return this.renderer.styledMode&&this.box?this.box.strokeWidth()%2/2:(this["stroke-width"]?parseInt(this["stroke-width"],10):0)%2/2},f.prototype.heightSetter=function(i){this.heightSetting=i},f.prototype.on=function(s,_){var T=this,S=T.text,C=S&&"SPAN"===S.element.tagName?S:void 0;if(C){var n=function(i){("mouseenter"===s||"mouseleave"===s)&&i.relatedTarget instanceof Element&&(T.element.compareDocumentPosition(i.relatedTarget)&Node.DOCUMENT_POSITION_CONTAINED_BY||C.element.compareDocumentPosition(i.relatedTarget)&Node.DOCUMENT_POSITION_CONTAINED_BY)||_.call(T.element,i)};C.on(s,n)}return i.prototype.on.call(T,s,n||_),T},f.prototype.onAdd=function(){var i=this.textStr;this.text.add(this),this.attr({text:T(i)?i:"",x:this.x,y:this.y}),this.box&&T(this.anchorX)&&this.attr({anchorX:this.anchorX,anchorY:this.anchorY})},f.prototype.paddingSetter=function(i,s){C(i)?i!==this[s]&&(this[s]=i,this.updateTextPadding()):this[s]=void 0},f.prototype.rSetter=function(i,s){this.boxAttr(s,i)},f.prototype.shadow=function(i){return i&&!this.renderer.styledMode&&(this.updateBoxSize(),this.box&&this.box.shadow(i)),this},f.prototype.strokeSetter=function(i,s){this.stroke=i,this.boxAttr(s,i)},f.prototype["stroke-widthSetter"]=function(i,s){i&&(this.needsBox=!0),this["stroke-width"]=i,this.boxAttr(s,i)},f.prototype["text-alignSetter"]=function(i){this.textAlign=i},f.prototype.textSetter=function(i){void 0!==i&&this.text.attr({text:i}),this.updateTextPadding()},f.prototype.updateBoxSize=function(){var i=this.text.element.style,s={},_=this.padding,P=this.bBox=C(this.widthSetting)&&C(this.heightSetting)&&!this.textAlign||!T(this.text.textStr)?f.emptyBBox:this.text.getBBox();this.width=this.getPaddedWidth(),this.height=(this.heightSetting||P.height||0)+2*_,i=this.renderer.fontMetrics(i&&i.fontSize,this.text),this.baselineOffset=_+Math.min((this.text.firstLineMetrics||i).b,P.height||1/0),this.heightSetting&&(this.baselineOffset+=(this.heightSetting-i.h)/2),this.needsBox&&(this.box||((_=this.box=this.symbolKey?this.renderer.symbol(this.symbolKey):this.renderer.rect()).addClass(("button"===this.className?"":"highcharts-label-box")+(this.className?" highcharts-"+this.className+"-box":"")),_.add(this)),_=this.getCrispAdjust(),s.x=_,s.y=(this.baseline?-this.baselineOffset:0)+_,s.width=Math.round(this.width),s.height=Math.round(this.height),this.box.attr(S(s,this.deferredAttr)),this.deferredAttr={})},f.prototype.updateTextPadding=function(){var i=this.text;this.updateBoxSize();var s=this.baseline?0:this.baselineOffset,_=O(this.paddingLeft,this.padding);T(this.widthSetting)&&this.bBox&&("center"===this.textAlign||"right"===this.textAlign)&&(_+={center:.5,right:1}[this.textAlign]*(this.widthSetting-this.bBox.width)),_===i.x&&s===i.y||(i.attr("x",_),i.hasBoxWidthChanged&&(this.bBox=i.getBBox(!0)),void 0!==s&&i.attr("y",s)),i.x=_,i.y=s},f.prototype.widthSetter=function(i){this.widthSetting=C(i)?i:void 0},f.prototype.getPaddedWidth=function(){var i=this.padding,s=O(this.paddingLeft,i);return i=O(this.paddingRight,i),(this.widthSetting||this.bBox.width||0)+s+i},f.prototype.xSetter=function(i){this.x=i,this.alignFactor&&(i-=this.alignFactor*this.getPaddedWidth(),this["forceAnimate:x"]=!0),this.xSetting=Math.round(i),this.attr("translateX",this.xSetting)},f.prototype.ySetter=function(i){this.ySetting=this.y=Math.round(i),this.attr("translateY",this.ySetting)},f.emptyBBox={width:0,height:0,x:0,y:0},f.textProps="color direction fontFamily fontSize fontStyle fontWeight lineHeight textAlign textDecoration textOutline textOverflow width".split(" "),f}(i)})),L(s,"Core/Renderer/SVG/Symbols.js",[s["Core/Utilities.js"]],(function(i){function v(i,_,S,C,P){var O=[];if(P){var M=P.start||0,R=T(P.r,S);S=T(P.r,C||S);var D=(P.end||0)-.001;C=P.innerR;var j=T(P.open,.001>Math.abs((P.end||0)-M-2*Math.PI)),$=Math.cos(M),U=Math.sin(M),V=Math.cos(D),Z=Math.sin(D);M=T(P.longArc,.001>D-M-Math.PI?0:1),O.push(["M",i+R*$,_+S*U],["A",R,S,0,M,T(P.clockwise,1),i+R*V,_+S*Z]),s(C)&&O.push(j?["M",i+C*V,_+C*Z]:["L",i+C*V,_+C*Z],["A",C,C,0,M,s(P.clockwise)?1-P.clockwise:0,i+C*$,_+C*U]),j||O.push(["Z"])}return O}function E(i,s,_,T,S){return S&&S.r?H(i,s,_,T,S):[["M",i,s],["L",i+_,s],["L",i+_,s+T],["L",i,s+T],["Z"]]}function H(i,s,_,T,S){return[["M",i+(S=S&&S.r||0),s],["L",i+_-S,s],["C",i+_,s,i+_,s,i+_,s+S],["L",i+_,s+T-S],["C",i+_,s+T,i+_,s+T,i+_-S,s+T],["L",i+S,s+T],["C",i,s+T,i,s+T,i,s+T-S],["L",i,s+S],["C",i,s,i,s,i+S,s]]}var s=i.defined,_=i.isNumber,T=i.pick;return{arc:v,callout:function(i,s,T,S,C){var P=Math.min(C&&C.r||0,T,S),O=P+6,M=C&&C.anchorX;C=C&&C.anchorY||0;var R=H(i,s,T,S,{r:P});return _(M)?(i+M>=T?C>s+O&&C<s+S-O?R.splice(3,1,["L",i+T,C-6],["L",i+T+6,C],["L",i+T,C+6],["L",i+T,s+S-P]):R.splice(3,1,["L",i+T,S/2],["L",M,C],["L",i+T,S/2],["L",i+T,s+S-P]):0>=i+M?C>s+O&&C<s+S-O?R.splice(7,1,["L",i,C+6],["L",i-6,C],["L",i,C-6],["L",i,s+P]):R.splice(7,1,["L",i,S/2],["L",M,C],["L",i,S/2],["L",i,s+P]):C&&C>S&&M>i+O&&M<i+T-O?R.splice(5,1,["L",M+6,s+S],["L",M,s+S+6],["L",M-6,s+S],["L",i+P,s+S]):C&&0>C&&M>i+O&&M<i+T-O&&R.splice(1,1,["L",M-6,s],["L",M,s-6],["L",M+6,s],["L",T-P,s]),R):R},circle:function(i,s,_,T){return v(i+_/2,s+T/2,_/2,T/2,{start:.5*Math.PI,end:2.5*Math.PI,open:!1})},diamond:function(i,s,_,T){return[["M",i+_/2,s],["L",i+_,s+T/2],["L",i+_/2,s+T],["L",i,s+T/2],["Z"]]},rect:E,roundedRect:H,square:E,triangle:function(i,s,_,T){return[["M",i+_/2,s],["L",i+_,s+T],["L",i,s+T],["Z"]]},"triangle-down":function(i,s,_,T){return[["M",i,s],["L",i+_,s],["L",i+_/2,s+T],["Z"]]}}})),L(s,"Core/Renderer/SVG/TextBuilder.js",[s["Core/Renderer/HTML/AST.js"],s["Core/Globals.js"],s["Core/Utilities.js"]],(function(i,s,_){var T=s.doc,S=s.SVG_NS,C=_.attr,P=_.isString,O=_.objectEach,M=_.pick;return function(){function h(i){var s=i.styles;this.renderer=i.renderer,this.svgElement=i,this.width=i.textWidth,this.textLineHeight=s&&s.lineHeight,this.textOutline=s&&s.textOutline,this.ellipsis=!(!s||"ellipsis"!==s.textOverflow),this.noWrap=!(!s||"nowrap"!==s.whiteSpace),this.fontSize=s&&s.fontSize}return h.prototype.buildSVG=function(){var s=this.svgElement,_=s.element,S=s.renderer,C=M(s.textStr,"").toString(),O=-1!==C.indexOf("<"),R=_.childNodes,D=R.length;S=this.width&&!s.added&&S.box;var j=[C,this.ellipsis,this.noWrap,this.textLineHeight,this.textOutline,this.fontSize,this.width].join();if(j!==s.textCache){for(s.textCache=j,delete s.actualWidth;D--;)_.removeChild(R[D]);O||this.ellipsis||this.width||-1!==C.indexOf(" ")&&(!this.noWrap||/<br.*?>/g.test(C))?""!==C&&(S&&S.appendChild(_),C=new i(C),this.modifyTree(C.nodes),C.addToDOM(s.element),this.modifyDOM(),this.ellipsis&&-1!==(_.textContent||"").indexOf("")&&s.attr("title",this.unescapeEntities(s.textStr||"",["&lt;","&gt;"])),S&&S.removeChild(_)):_.appendChild(T.createTextNode(this.unescapeEntities(C))),P(this.textOutline)&&s.applyTextOutline&&s.applyTextOutline(this.textOutline)}},h.prototype.modifyDOM=function(){var i=this,s=this.svgElement,_=C(s.element,"x");s.firstLineMetrics=void 0,[].forEach.call(s.element.querySelectorAll("tspan.highcharts-br"),(function(T,S){T.nextSibling&&T.previousSibling&&(0===S&&1===T.previousSibling.nodeType&&(s.firstLineMetrics=s.renderer.fontMetrics(void 0,T.previousSibling)),C(T,{dy:i.getLineHeight(T.nextSibling),x:_}))}));var P=this.width||0;if(P){var m=function(O,M){var R=O.textContent||"",D=R.replace(/([^\^])-/g,"$1- ").split(" "),j=!i.noWrap&&(1<D.length||1<s.element.childNodes.length),$=i.getLineHeight(M),U=0,V=s.actualWidth;if(i.ellipsis)R&&i.truncate(O,R,void 0,0,Math.max(0,P-parseInt(i.fontSize||12,10)),(function(i,s){return i.substring(0,s)+""}));else if(j){for(R=[],j=[];M.firstChild&&M.firstChild!==O;)j.push(M.firstChild),M.removeChild(M.firstChild);for(;D.length;)D.length&&!i.noWrap&&0<U&&(R.push(O.textContent||""),O.textContent=D.join(" ").replace(/- /g,"-")),i.truncate(O,void 0,D,0===U&&V||0,P,(function(i,s){return D.slice(0,s).join(" ").replace(/- /g,"-")})),V=s.actualWidth,U++;j.forEach((function(i){M.insertBefore(i,O)})),R.forEach((function(i){M.insertBefore(T.createTextNode(i),O),(i=T.createElementNS(S,"tspan")).textContent="",C(i,{dy:$,x:_}),M.insertBefore(i,O)}))}},w=function(i){[].slice.call(i.childNodes).forEach((function(_){_.nodeType===Node.TEXT_NODE?m(_,i):(-1!==_.className.baseVal.indexOf("highcharts-br")&&(s.actualWidth=0),w(_))}))};w(s.element)}},h.prototype.getLineHeight=function(i){var s;return i=i.nodeType===Node.TEXT_NODE?i.parentElement:i,this.renderer.styledMode||(s=i&&/(px|em)$/.test(i.style.fontSize)?i.style.fontSize:this.fontSize||this.renderer.style.fontSize||12),this.textLineHeight?parseInt(this.textLineHeight.toString(),10):this.renderer.fontMetrics(s,i||this.svgElement.element).h},h.prototype.modifyTree=function(i){var s=this,e=function(_,T){var S=_.tagName,C=s.renderer.styledMode,O=_.attributes||{};"b"===S||"strong"===S?C?O.class="highcharts-strong":O.style="font-weight:bold;"+(O.style||""):"i"!==S&&"em"!==S||(C?O.class="highcharts-emphasized":O.style="font-style:italic;"+(O.style||"")),P(O.style)&&(O.style=O.style.replace(/(;| |^)color([ :])/,"$1fill$2")),"br"===S&&(O.class="highcharts-br",_.textContent="",(T=i[T+1])&&T.textContent&&(T.textContent=T.textContent.replace(/^ +/gm,""))),"#text"!==S&&"a"!==S&&(_.tagName="tspan"),_.attributes=O,_.children&&_.children.filter((function(i){return"#text"!==i.tagName})).forEach(e)};for(i.forEach(e);i[0]&&"tspan"===i[0].tagName&&!i[0].children;)i.splice(0,1)},h.prototype.truncate=function(i,s,_,T,S,C){var P,O=this.svgElement,M=O.renderer,R=O.rotation,D=[],j=_?1:0,$=(s||_||"").length,U=$,b=function(S,P){P=P||S;var R=i.parentNode;if(R&&void 0===D[P])if(R.getSubStringLength)try{D[P]=T+R.getSubStringLength(0,_?P+1:P)}catch(j){}else M.getSpanWidth&&(i.textContent=C(s||_,S),D[P]=T+M.getSpanWidth(O,i));return D[P]};O.rotation=0;var V=b(i.textContent.length);if(T+V>S){for(;j<=$;)U=Math.ceil((j+$)/2),_&&(P=C(_,U)),V=b(U,P&&P.length-1),j===$?j=$+1:V>S?$=U-1:j=U;0===$?i.textContent="":s&&$===s.length-1||(i.textContent=P||C(s||_,U))}_&&_.splice(0,U),O.actualWidth=V,O.rotation=R},h.prototype.unescapeEntities=function(i,s){return O(this.renderer.escapes,(function(_,T){s&&-1!==s.indexOf(_)||(i=i.toString().replace(new RegExp(_,"g"),T))})),i},h}()})),L(s,"Core/Renderer/SVG/SVGRenderer.js",[s["Core/Renderer/HTML/AST.js"],s["Core/Color/Color.js"],s["Core/Globals.js"],s["Core/Color/Palette.js"],s["Core/Renderer/RendererRegistry.js"],s["Core/Renderer/SVG/SVGElement.js"],s["Core/Renderer/SVG/SVGLabel.js"],s["Core/Renderer/SVG/Symbols.js"],s["Core/Renderer/SVG/TextBuilder.js"],s["Core/Utilities.js"]],(function(i,s,_,T,S,C,P,O,M,R){var D,j=_.charts,$=_.deg2rad,U=_.doc,V=_.isFirefox,Z=_.isMS,Y=_.isWebKit,X=_.noop,Q=_.SVG_NS,ee=_.symbolSizes,te=_.win,ne=R.addEvent,re=R.attr,ie=R.createElement,ae=R.css,se=R.defined,oe=R.destroyObjectProperties,le=R.extend,ce=R.isArray,ue=R.isNumber,de=R.isObject,he=R.isString,pe=R.merge,me=R.pick,fe=R.pInt,ge=R.uniqueKey;return _=function(){function z(i,s,_,T,S,C,P){this.width=this.url=this.style=this.isSVG=this.imgCount=this.height=this.gradients=this.globalAnimation=this.defs=this.chartIndex=this.cacheKeys=this.cache=this.boxWrapper=this.box=this.alignedObjects=void 0,this.init(i,s,_,T,S,C,P)}return z.prototype.init=function(i,s,_,T,S,C,P){var O,M=this.createElement("svg").attr({version:"1.1",class:"highcharts-root"}),R=M.element;P||M.css(this.getStyle(T)),i.appendChild(R),re(i,"dir","ltr"),-1===i.innerHTML.indexOf("xmlns")&&re(R,"xmlns",this.SVG_NS),this.isSVG=!0,this.box=R,this.boxWrapper=M,this.alignedObjects=[],this.url=this.getReferenceURL(),this.createElement("desc").add().element.appendChild(U.createTextNode("Created with Highcharts 9.1.2")),this.defs=this.createElement("defs").add(),this.allowHTML=C,this.forExport=S,this.styledMode=P,this.gradients={},this.cache={},this.cacheKeys=[],this.imgCount=0,this.setSize(s,_,!1),V&&i.getBoundingClientRect&&((s=function(){ae(i,{left:0,top:0}),O=i.getBoundingClientRect(),ae(i,{left:Math.ceil(O.left)-O.left+"px",top:Math.ceil(O.top)-O.top+"px"})})(),this.unSubPixelFix=ne(te,"resize",s))},z.prototype.definition=function(s){return new i([s]).addToDOM(this.defs.element)},z.prototype.getReferenceURL=function(){if((V||Y)&&U.getElementsByTagName("base").length){if(!se(D)){var s=ge();s=new i([{tagName:"svg",attributes:{width:8,height:8},children:[{tagName:"defs",children:[{tagName:"clipPath",attributes:{id:s},children:[{tagName:"rect",attributes:{width:4,height:4}}]}]},{tagName:"rect",attributes:{id:"hitme",width:8,height:8,"clip-path":"url(#"+s+")",fill:"rgba(0,0,0,0.001)"}}]}]).addToDOM(U.body),ae(s,{position:"fixed",top:0,left:0,zIndex:9e5});var _=U.elementFromPoint(6,6);D="hitme"===(_&&_.id),U.body.removeChild(s)}if(D)return te.location.href.split("#")[0].replace(/<[^>]*>/g,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20")}return""},z.prototype.getStyle=function(i){return this.style=le({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},i)},z.prototype.setStyle=function(i){this.boxWrapper.css(this.getStyle(i))},z.prototype.isHidden=function(){return!this.boxWrapper.getBBox().width},z.prototype.destroy=function(){var i=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),oe(this.gradients||{}),this.gradients=null,i&&(this.defs=i.destroy()),this.unSubPixelFix&&this.unSubPixelFix(),this.alignedObjects=null},z.prototype.createElement=function(i){var s=new this.Element;return s.init(this,i),s},z.prototype.getRadialAttr=function(i,s){return{cx:i[0]-i[2]/2+(s.cx||0)*i[2],cy:i[1]-i[2]/2+(s.cy||0)*i[2],r:(s.r||0)*i[2]}},z.prototype.buildText=function(i){new M(i).buildSVG()},z.prototype.getContrast=function(i){return(i=s.parse(i).rgba)[0]*=1,i[1]*=1.2,i[2]*=.5,459<i[0]+i[1]+i[2]?"#000000":"#FFFFFF"},z.prototype.button=function(s,_,S,C,P,O,M,R,D,j){var $=this.label(s,_,S,D,void 0,void 0,j,void 0,"button"),U=this.styledMode,V=0,Y=P?pe(P):{};if(s=Y&&Y.style||{},Y=i.filterUserAttributes(Y),$.attr(pe({padding:8,r:2},Y)),!U){var X=(Y=pe({fill:T.neutralColor3,stroke:T.neutralColor20,"stroke-width":1,style:{color:T.neutralColor80,cursor:"pointer",fontWeight:"normal"}},{style:s},Y)).style;delete Y.style;var Q=(O=pe(Y,{fill:T.neutralColor10},i.filterUserAttributes(O||{}))).style;delete O.style;var ee=(M=pe(Y,{fill:T.highlightColor10,style:{color:T.neutralColor100,fontWeight:"bold"}},i.filterUserAttributes(M||{}))).style;delete M.style;var te=(R=pe(Y,{style:{color:T.neutralColor20}},i.filterUserAttributes(R||{}))).style;delete R.style}return ne($.element,Z?"mouseover":"mouseenter",(function(){3!==V&&$.setState(1)})),ne($.element,Z?"mouseout":"mouseleave",(function(){3!==V&&$.setState(V)})),$.setState=function(i){1!==i&&($.state=V=i),$.removeClass(/highcharts-button-(normal|hover|pressed|disabled)/).addClass("highcharts-button-"+["normal","hover","pressed","disabled"][i||0]),U||$.attr([Y,O,M,R][i||0]).css([X,Q,ee,te][i||0])},U||$.attr(Y).css(le({cursor:"default"},X)),$.on("touchstart",(function(i){return i.stopPropagation()})).on("click",(function(i){3!==V&&C.call($,i)}))},z.prototype.crispLine=function(i,s,_){void 0===_&&(_="round");var T=i[0],S=i[1];return se(T[1])&&T[1]===S[1]&&(T[1]=S[1]=Math[_](T[1])-s%2/2),se(T[2])&&T[2]===S[2]&&(T[2]=S[2]=Math[_](T[2])+s%2/2),i},z.prototype.path=function(i){var s=this.styledMode?{}:{fill:"none"};return ce(i)?s.d=i:de(i)&&le(s,i),this.createElement("path").attr(s)},z.prototype.circle=function(i,s,_){return i=de(i)?i:void 0===i?{}:{x:i,y:s,r:_},(s=this.createElement("circle")).xSetter=s.ySetter=function(i,s,_){_.setAttribute("c"+s,i)},s.attr(i)},z.prototype.arc=function(i,s,_,T,S,C){return de(i)?(s=(T=i).y,_=T.r,i=T.x):T={innerR:T,start:S,end:C},(i=this.symbol("arc",i,s,_,_,T)).r=_,i},z.prototype.rect=function(i,s,_,T,S,C){S=de(i)?i.r:S;var P=this.createElement("rect");return i=de(i)?i:void 0===i?{}:{x:i,y:s,width:Math.max(_,0),height:Math.max(T,0)},this.styledMode||(void 0!==C&&(i["stroke-width"]=C,i=P.crisp(i)),i.fill="none"),S&&(i.r=S),P.rSetter=function(i,s,_){P.r=i,re(_,{rx:i,ry:i})},P.rGetter=function(){return P.r||0},P.attr(i)},z.prototype.setSize=function(i,s,_){this.width=i,this.height=s,this.boxWrapper.animate({width:i,height:s},{step:function(){this.attr({viewBox:"0 0 "+this.attr("width")+" "+this.attr("height")})},duration:me(_,!0)?void 0:0}),this.alignElements()},z.prototype.g=function(i){var s=this.createElement("g");return i?s.attr({class:"highcharts-"+i}):s},z.prototype.image=function(i,s,_,T,S,C){var P={preserveAspectRatio:"none"},l=function(i,s){i.setAttributeNS?i.setAttributeNS("http://www.w3.org/1999/xlink","href",s):i.setAttribute("hc-svg-href",s)};1<arguments.length&&le(P,{x:s,y:_,width:T,height:S});var O=this.createElement("image").attr(P);if(P=function(s){l(O.element,i),C.call(O,s)},C){l(O.element,"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==");var M=new te.Image;ne(M,"load",P),M.src=i,M.complete&&P({})}else l(O.element,i);return O},z.prototype.symbol=function(i,s,_,T,S,C){var P,O=this,M=/^url\((.*?)\)$/,R=M.test(i),D=!R&&(this.symbols[i]?i:"circle"),$=D&&this.symbols[D];if($){"number"==typeof s&&(P=$.call(this.symbols,Math.round(s||0),Math.round(_||0),T||0,S||0,C));var V=this.path(P);O.styledMode||V.attr("fill","none"),le(V,{symbolName:D||void 0,x:s,y:_,width:T,height:S}),C&&le(V,C)}else if(R){var Z=i.match(M)[1],Y=V=this.image(Z);Y.imgwidth=me(ee[Z]&&ee[Z].width,C&&C.width),Y.imgheight=me(ee[Z]&&ee[Z].height,C&&C.height);var m=function(i){return i.attr({width:i.width,height:i.height})};["width","height"].forEach((function(i){Y[i+"Setter"]=function(i,s){var _=this["img"+s];this[s]=i,se(_)&&(C&&"within"===C.backgroundSize&&this.width&&this.height&&(_=Math.round(_*Math.min(this.width/this.imgwidth,this.height/this.imgheight))),this.element&&this.element.setAttribute(s,_),this.alignByTranslate||(i=((this[s]||0)-_)/2,this.attr("width"===s?{translateX:i}:{translateY:i})))}})),se(s)&&Y.attr({x:s,y:_}),Y.isImg=!0,se(Y.imgwidth)&&se(Y.imgheight)?m(Y):(Y.attr({width:0,height:0}),ie("img",{onload:function(){var i=j[O.chartIndex];0===this.width&&(ae(this,{position:"absolute",top:"-999em"}),U.body.appendChild(this)),ee[Z]={width:this.width,height:this.height},Y.imgwidth=this.width,Y.imgheight=this.height,Y.element&&m(Y),this.parentNode&&this.parentNode.removeChild(this),O.imgCount--,O.imgCount||!i||i.hasLoaded||i.onload()},src:Z}),this.imgCount++)}return V},z.prototype.clipRect=function(i,s,_,T){var S=ge()+"-",C=this.createElement("clipPath").attr({id:S}).add(this.defs);return(i=this.rect(i,s,_,T,0).add(C)).id=S,i.clipPath=C,i.count=0,i},z.prototype.text=function(i,s,_,T){var S={};return!T||!this.allowHTML&&this.forExport?(S.x=Math.round(s||0),_&&(S.y=Math.round(_)),se(i)&&(S.text=i),i=this.createElement("text").attr(S),T||(i.xSetter=function(i,s,_){for(var T,S=_.getElementsByTagName("tspan"),C=_.getAttribute(s),P=0;P<S.length;P++)(T=S[P]).getAttribute(s)===C&&T.setAttribute(s,i);_.setAttribute(s,i)}),i):this.html(i,s,_)},z.prototype.fontMetrics=function(i,s){return i=!this.styledMode&&/px/.test(i)||!te.getComputedStyle?i||s&&s.style&&s.style.fontSize||this.style&&this.style.fontSize:s&&C.prototype.getStyle.call(s,"font-size"),{h:s=24>(i=/px/.test(i)?fe(i):12)?i+3:Math.round(1.2*i),b:Math.round(.8*s),f:i}},z.prototype.rotCorr=function(i,s,_){var T=i;return s&&_&&(T=Math.max(T*Math.cos(s*$),4)),{x:-i/3*Math.sin(s*$),y:T}},z.prototype.pathToSegments=function(i){for(var s=[],_=[],T={A:8,C:7,H:2,L:3,M:3,Q:5,S:5,T:3,V:2},S=0;S<i.length;S++)he(_[0])&&ue(i[S])&&_.length===T[_[0].toUpperCase()]&&i.splice(S,0,_[0].replace("M","L").replace("m","l")),"string"==typeof i[S]&&(_.length&&s.push(_.slice(0)),_.length=0),_.push(i[S]);return s.push(_.slice(0)),s},z.prototype.label=function(i,s,_,T,S,C,O,M,R){return new P(this,i,s,_,T,S,C,O,M,R)},z.prototype.alignElements=function(){this.alignedObjects.forEach((function(i){return i.align()}))},z}(),le(_.prototype,{Element:C,SVG_NS:Q,escapes:{"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},symbols:O,draw:X}),S.registerRendererType("svg",_,!0),_})),L(s,"Core/Renderer/HTML/HTMLElement.js",[s["Core/Globals.js"],s["Core/Renderer/SVG/SVGElement.js"],s["Core/Utilities.js"]],(function(i,s,_){var T=this&&this.__extends||function(){var a=function(i,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var _ in s)s.hasOwnProperty(_)&&(i[_]=s[_])},a(i,s)};return function(i,s){function f(){this.constructor=i}a(i,s),i.prototype=null===s?Object.create(s):(f.prototype=s.prototype,new f)}}(),S=i.isFirefox,C=i.isMS,P=i.isWebKit,O=i.win,M=_.css,R=_.defined,D=_.extend,j=_.pick,$=_.pInt;return function(i){function m(){return null!==i&&i.apply(this,arguments)||this}return T(m,i),m.compose=function(i){i=i.prototype;var s=m.prototype;i.getSpanCorrection=s.getSpanCorrection,i.htmlCss=s.htmlCss,i.htmlGetBBox=s.htmlGetBBox,i.htmlUpdateTransform=s.htmlUpdateTransform,i.setSpanRotation=s.setSpanRotation},m.prototype.getSpanCorrection=function(i,s,_){this.xCorr=-i*_,this.yCorr=-s},m.prototype.htmlCss=function(i){var s="SPAN"===this.element.tagName&&i&&"width"in i,_=j(s&&i.width,void 0);if(s){delete i.width,this.textWidth=_;var T=!0}return i&&"ellipsis"===i.textOverflow&&(i.whiteSpace="nowrap",i.overflow="hidden"),this.styles=D(this.styles,i),M(this.element,i),T&&this.htmlUpdateTransform(),this},m.prototype.htmlGetBBox=function(){var i=this.element;return{x:i.offsetLeft,y:i.offsetTop,width:i.offsetWidth,height:i.offsetHeight}},m.prototype.htmlUpdateTransform=function(){if(this.added){var i=this.renderer,s=this.element,_=this.translateX||0,T=this.translateY||0,S=this.x||0,C=this.y||0,P=this.textAlign||"left",O={left:0,center:.5,right:1}[P],D=this.styles;if(D=D&&D.whiteSpace,M(s,{marginLeft:_,marginTop:T}),!i.styledMode&&this.shadows&&this.shadows.forEach((function(i){M(i,{marginLeft:_+1,marginTop:T+1})})),this.inverted&&[].forEach.call(s.childNodes,(function(_){i.invertChild(_,s)})),"SPAN"===s.tagName){var j=this.rotation,U=this.textWidth&&$(this.textWidth),V=[j,P,s.innerHTML,this.textWidth,this.textAlign].join(),Z=void 0;(Z=U!==this.oldTextWidth)&&!(Z=U>this.oldTextWidth)&&((Z=this.textPxLength)||(M(s,{width:"",whiteSpace:D||"nowrap"}),Z=s.offsetWidth),Z=Z>U),Z&&(/[ \-]/.test(s.textContent||s.innerText)||"ellipsis"===s.style.textOverflow)?(M(s,{width:U+"px",display:"block",whiteSpace:D||"normal"}),this.oldTextWidth=U,this.hasBoxWidthChanged=!0):this.hasBoxWidthChanged=!1,V!==this.cTT&&(Z=i.fontMetrics(s.style.fontSize,s).b,!R(j)||j===(this.oldRotation||0)&&P===this.oldAlign||this.setSpanRotation(j,O,Z),this.getSpanCorrection(!R(j)&&this.textPxLength||s.offsetWidth,Z,O,j,P)),M(s,{left:S+(this.xCorr||0)+"px",top:C+(this.yCorr||0)+"px"}),this.cTT=V,this.oldRotation=j,this.oldAlign=P}}else this.alignOnAdd=!0},m.prototype.setSpanRotation=function(i,s,_){var T={},R=C&&!/Edge/.test(O.navigator.userAgent)?"-ms-transform":P?"-webkit-transform":S?"MozTransform":O.opera?"-o-transform":void 0;R&&(T[R]=T.transform="rotate("+i+"deg)",T[R+(S?"Origin":"-origin")]=T.transformOrigin=100*s+"% "+_+"px",M(this.element,T))},m}(s)})),L(s,"Core/Renderer/HTML/HTMLRenderer.js",[s["Core/Renderer/HTML/AST.js"],s["Core/Renderer/SVG/SVGElement.js"],s["Core/Renderer/SVG/SVGRenderer.js"],s["Core/Utilities.js"]],(function(i,s,_,T){var S=this&&this.__extends||function(){var a=function(i,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var _ in s)s.hasOwnProperty(_)&&(i[_]=s[_])},a(i,s)};return function(i,s){function e(){this.constructor=i}a(i,s),i.prototype=null===s?Object.create(s):(e.prototype=s.prototype,new e)}}(),C=T.attr,P=T.createElement,O=T.extend,M=T.pick;return function(_){function f(){return null!==_&&_.apply(this,arguments)||this}return S(f,_),f.compose=function(i){i.prototype.html=f.prototype.html},f.prototype.html=function(_,T,S){var R=this.createElement("span"),D=R.element,j=R.renderer,$=j.isSVG,t=function(i,_){["opacity","visibility"].forEach((function(T){i[T+"Setter"]=function(S,C,P){var O=i.div?i.div.style:_;s.prototype[T+"Setter"].call(this,S,C,P),O&&(O[C]=S)}})),i.addedSetters=!0};return R.textSetter=function(s){s!==this.textStr&&(delete this.bBox,delete this.oldTextWidth,i.setElementHTML(this.element,M(s,"")),this.textStr=s,R.doTransform=!0)},$&&t(R,R.element.style),R.xSetter=R.ySetter=R.alignSetter=R.rotationSetter=function(i,s){"align"===s?R.alignValue=R.textAlign=i:R[s]=i,R.doTransform=!0},R.afterSetters=function(){this.doTransform&&(this.htmlUpdateTransform(),this.doTransform=!1)},R.attr({text:_,x:Math.round(T),y:Math.round(S)}).css({position:"absolute"}),j.styledMode||R.css({fontFamily:this.style.fontFamily,fontSize:this.style.fontSize}),D.style.whiteSpace="nowrap",R.css=R.htmlCss,$&&(R.add=function(i){var s=j.box.parentNode,_=[];if(this.parentGroup=i){var T=i.div;if(!T){for(;i;)_.push(i),i=i.parentGroup;_.reverse().forEach((function(i){function b(s,_){i[_]=s,"translateX"===_?D.left=s+"px":D.top=s+"px",i.doTransform=!0}var S=C(i.element,"class"),M=i.styles||{},D=(T=i.div=i.div||P("div",S?{className:S}:void 0,{position:"absolute",left:(i.translateX||0)+"px",top:(i.translateY||0)+"px",display:i.display,opacity:i.opacity,cursor:M.cursor,pointerEvents:M.pointerEvents},T||s)).style;O(i,{classSetter:function(i){return function(s){this.element.setAttribute("class",s),i.className=s}}(T),on:function(){return _[0].div&&R.on.apply({element:_[0].div,onEvents:R.onEvents},arguments),i},translateXSetter:b,translateYSetter:b}),i.addedSetters||t(i)}))}}else T=s;return T.appendChild(D),R.added=!0,R.alignOnAdd&&R.htmlUpdateTransform(),R}),R},f}(_)})),L(s,"Core/Foundation.js",[s["Core/Utilities.js"]],(function(i){var s=i.addEvent,_=i.isFunction,T=i.objectEach,S=i.removeEvent;return{registerEventOptions:function(i,C){i.eventOptions=i.eventOptions||{},T(C.events,(function(T,C){_(T)&&i.eventOptions[C]!==T&&(_(i.eventOptions[C])&&S(i,C,i.eventOptions[C]),i.eventOptions[C]=T,s(i,C,T))}))}}})),L(s,"Core/Axis/AxisDefaults.js",[s["Core/Color/Palette.js"]],(function(i){var s;return function(s){s.defaultXAxisOptions={alignTicks:!0,allowDecimals:void 0,panningEnabled:!0,zIndex:2,zoomEnabled:!0,dateTimeLabelFormats:{millisecond:{main:"%H:%M:%S.%L",range:!1},second:{main:"%H:%M:%S",range:!1},minute:{main:"%H:%M",range:!1},hour:{main:"%H:%M",range:!1},day:{main:"%e. %b"},week:{main:"%e. %b"},month:{main:"%b '%y"},year:{main:"%Y"}},endOnTick:!1,gridLineDashStyle:"Solid",gridZIndex:1,labels:{autoRotation:void 0,autoRotationLimit:80,distance:void 0,enabled:!0,indentation:10,overflow:"justify",padding:5,reserveSpace:void 0,rotation:void 0,staggerLines:0,step:0,useHTML:!1,x:0,zIndex:7,style:{color:i.neutralColor60,cursor:"default",fontSize:"11px"}},maxPadding:.01,minorGridLineDashStyle:"Solid",minorTickLength:2,minorTickPosition:"outside",minPadding:.01,offset:void 0,opposite:!1,reversed:void 0,reversedStacks:!1,showEmpty:!0,showFirstLabel:!0,showLastLabel:!0,startOfWeek:1,startOnTick:!1,tickLength:10,tickPixelInterval:100,tickmarkPlacement:"between",tickPosition:"outside",title:{align:"middle",rotation:0,useHTML:!1,x:0,y:0,style:{color:i.neutralColor60}},type:"linear",uniqueNames:!0,visible:!0,minorGridLineColor:i.neutralColor5,minorGridLineWidth:1,minorTickColor:i.neutralColor40,lineColor:i.highlightColor20,lineWidth:1,gridLineColor:i.neutralColor10,gridLineWidth:void 0,tickColor:i.highlightColor20},s.defaultYAxisOptions={reversedStacks:!0,endOnTick:!0,maxPadding:.05,minPadding:.05,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8},startOnTick:!0,title:{rotation:270,text:"Values"},stackLabels:{animation:{},allowOverlap:!1,enabled:!1,crop:!0,overflow:"justify",formatter:function(){return(0,this.axis.chart.numberFormatter)(this.total,-1)},style:{color:i.neutralColor100,fontSize:"11px",fontWeight:"bold",textOutline:"1px contrast"}},gridLineWidth:1,lineWidth:0},s.defaultLeftAxisOptions={labels:{x:-15},title:{rotation:270}},s.defaultRightAxisOptions={labels:{x:15},title:{rotation:90}},s.defaultBottomAxisOptions={labels:{autoRotation:[-45],x:0},margin:15,title:{rotation:0}},s.defaultTopAxisOptions={labels:{autoRotation:[-45],x:0},margin:15,title:{rotation:0}}}(s||(s={})),s})),L(s,"Core/Axis/Tick.js",[s["Core/FormatUtilities.js"],s["Core/Globals.js"],s["Core/Utilities.js"]],(function(i,s,_){var T=s.deg2rad,S=_.clamp,C=_.correctFloat,P=_.defined,O=_.destroyObjectProperties,M=_.extend,R=_.fireEvent,D=_.isNumber,j=_.merge,$=_.objectEach,U=_.pick;return s=function(){function m(i,s,_,T,S){this.isNewLabel=this.isNew=!0,this.axis=i,this.pos=s,this.type=_||"",this.parameters=S||{},this.tickmarkOffset=this.parameters.tickmarkOffset,this.options=this.parameters.options,R(this,"init"),_||T||this.addLabel()}return m.prototype.addLabel=function(){var s=this,_=s.axis,T=_.options,S=_.chart,O=_.categories,j=_.logarithmic,$=_.names,V=s.pos,Z=U(s.options&&s.options.labels,T.labels),Y=_.tickPositions,X=V===Y[0],Q=V===Y[Y.length-1],ee=(!Z.step||1===Z.step)&&1===_.tickInterval;Y=Y.info;var te,ne=s.label;if(O=this.parameters.category||(O?U(O[V],$[V],V):V),j&&D(O)&&(O=C(j.lin2log(O))),_.dateTime&&Y)var re=S.time.resolveDTLFormat(T.dateTimeLabelFormats[!T.grid&&Y.higherRanks[V]||Y.unitName]),ie=re.main;s.isFirst=X,s.isLast=Q;var ae={axis:_,chart:S,dateTimeLabelFormat:ie,isFirst:X,isLast:Q,pos:V,tick:s,tickPositionInfo:Y,value:O};R(this,"labelFormat",ae);var W=function(s){return Z.formatter?Z.formatter.call(s,s):Z.format?(s.text=_.defaultLabelFormatter.call(s),i.format(Z.format,s,S)):_.defaultLabelFormatter.call(s,s)};T=W.call(ae,ae);var se=re&&re.list;s.shortenLabel=se?function(){for(te=0;te<se.length;te++)if(M(ae,{dateTimeLabelFormat:se[te]}),ne.attr({text:W.call(ae,ae)}),ne.getBBox().width<_.getSlotWidth(s)-2*Z.padding)return;ne.attr({text:""})}:void 0,ee&&_._addedPlotLB&&s.moveLabel(T,Z),P(ne)||s.movedLabel?ne&&ne.textStr!==T&&!ee&&(!ne.textWidth||Z.style.width||ne.styles.width||ne.css({width:null}),ne.attr({text:T}),ne.textPxLength=ne.getBBox().width):(s.label=ne=s.createLabel({x:0,y:0},T,Z),s.rotation=0)},m.prototype.createLabel=function(i,s,_){var T=this.axis,S=T.chart;return(i=P(s)&&_.enabled?S.renderer.text(s,i.x,i.y,_.useHTML).add(T.labelGroup):null)&&(S.styledMode||i.css(j(_.style)),i.textPxLength=i.getBBox().width),i},m.prototype.destroy=function(){O(this,this.axis)},m.prototype.getPosition=function(i,s,_,T){var P=this.axis,O=P.chart,M=T&&O.oldChartHeight||O.chartHeight;return(i={x:i?C(P.translate(s+_,null,null,T)+P.transB):P.left+P.offset+(P.opposite?(T&&O.oldChartWidth||O.chartWidth)-P.right-P.left:0),y:i?M-P.bottom+P.offset-(P.opposite?P.height:0):C(M-P.translate(s+_,null,null,T)-P.transB)}).y=S(i.y,-1e5,1e5),R(this,"afterGetPosition",{pos:i}),i},m.prototype.getLabelPosition=function(i,s,_,S,C,O,M,D){var j=this.axis,$=j.transA,U=j.isLinked&&j.linkedParent?j.linkedParent.reversed:j.reversed,V=j.staggerLines,Z=j.tickRotCorr||{x:0,y:0},Y=S||j.reserveSpaceDefault?0:-j.labelOffset*("center"===j.labelAlign?.5:1),X={},Q=C.y;return P(Q)||(Q=0===j.side?_.rotation?-8:-_.getBBox().height:2===j.side?Z.y+8:Math.cos(_.rotation*T)*(Z.y-_.getBBox(!1,0).height/2)),i=i+C.x+Y+Z.x-(O&&S?O*$*(U?-1:1):0),s=s+Q-(O&&!S?O*$*(U?1:-1):0),V&&(_=M/(D||1)%V,j.opposite&&(_=V-_-1),s+=j.labelOffset/V*_),X.x=i,X.y=Math.round(s),R(this,"afterGetLabelPosition",{pos:X,tickmarkOffset:O,index:M}),X},m.prototype.getLabelSize=function(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0},m.prototype.getMarkPath=function(i,s,_,T,S,C){return C.crispLine([["M",i,s],["L",i+(S?0:-_),s+(S?_:0)]],T)},m.prototype.handleOverflow=function(i){var s=this.axis,_=s.options.labels,S=i.x,C=s.chart.chartWidth,P=s.chart.spacing,O=U(s.labelLeft,Math.min(s.pos,P[3]));P=U(s.labelRight,Math.max(s.isRadial?0:s.pos+s.len,C-P[1]));var M,R=this.label,D=this.rotation,j={left:0,center:.5,right:1}[s.labelAlign||R.attr("align")],$=R.getBBox().width,V=s.getSlotWidth(this),Z={},Y=V,X=1;D||"justify"!==_.overflow?0>D&&S-j*$<O?M=Math.round(S/Math.cos(D*T)-O):0<D&&S+j*$>P&&(M=Math.round((C-S)/Math.cos(D*T))):(C=S+(1-j)*$,S-j*$<O?Y=i.x+Y*(1-j)-O:C>P&&(Y=P-i.x+Y*j,X=-1),(Y=Math.min(V,Y))<V&&"center"===s.labelAlign&&(i.x+=X*(V-Y-j*(V-Math.min($,Y)))),($>Y||s.autoRotation&&(R.styles||{}).width)&&(M=Y)),M&&(this.shortenLabel?this.shortenLabel():(Z.width=Math.floor(M)+"px",(_.style||{}).textOverflow||(Z.textOverflow="ellipsis"),R.css(Z)))},m.prototype.moveLabel=function(i,s){var _=this,T=_.label,S=_.axis,C=S.reversed,P=!1;if(T&&T.textStr===i?(_.movedLabel=T,P=!0,delete _.label):$(S.ticks,(function(s){P||s.isNew||s===_||!s.label||s.label.textStr!==i||(_.movedLabel=s.label,P=!0,s.labelPos=_.movedLabel.xy,delete s.label)})),!P&&(_.labelPos||T)){var O=_.labelPos||T.xy;T=S.horiz?C?0:S.width+S.left:O.x,S=S.horiz?O.y:C?S.width+S.left:0,_.movedLabel=_.createLabel({x:T,y:S},i,s),_.movedLabel&&_.movedLabel.attr({opacity:0})}},m.prototype.render=function(i,s,_){var T=this.axis,S=T.horiz,C=this.pos,P=U(this.tickmarkOffset,T.tickmarkOffset);P=(C=this.getPosition(S,C,P,s)).x;var O=C.y;T=S&&P===T.pos+T.len||!S&&O===T.pos?-1:1,S=U(_,this.label&&this.label.newOpacity,1),_=U(_,1),this.isActive=!0,this.renderGridLine(s,_,T),this.renderMark(C,_,T),this.renderLabel(C,s,S,i),this.isNew=!1,R(this,"afterRender")},m.prototype.renderGridLine=function(i,s,_){var T=this.axis,S=T.options,C={},P=this.pos,O=this.type,M=U(this.tickmarkOffset,T.tickmarkOffset),R=T.chart.renderer,D=this.gridLine,j=S.gridLineWidth,$=S.gridLineColor,V=S.gridLineDashStyle;"minor"===this.type&&(j=S.minorGridLineWidth,$=S.minorGridLineColor,V=S.minorGridLineDashStyle),D||(T.chart.styledMode||(C.stroke=$,C["stroke-width"]=j||0,C.dashstyle=V),O||(C.zIndex=1),i&&(s=0),this.gridLine=D=R.path().attr(C).addClass("highcharts-"+(O?O+"-":"")+"grid-line").add(T.gridGroup)),D&&(_=T.getPlotLinePath({value:P+M,lineWidth:D.strokeWidth()*_,force:"pass",old:i}))&&D[i||this.isNew?"attr":"animate"]({d:_,opacity:s})},m.prototype.renderMark=function(i,s,_){var T=this.axis,S=T.options,C=T.chart.renderer,P=this.type,O=T.tickSize(P?P+"Tick":"tick"),M=i.x;i=i.y;var R=U(S["minor"!==P?"tickWidth":"minorTickWidth"],!P&&T.isXAxis?1:0);S=S["minor"!==P?"tickColor":"minorTickColor"];var D=this.mark,j=!D;O&&(T.opposite&&(O[0]=-O[0]),D||(this.mark=D=C.path().addClass("highcharts-"+(P?P+"-":"")+"tick").add(T.axisGroup),T.chart.styledMode||D.attr({stroke:S,"stroke-width":R})),D[j?"attr":"animate"]({d:this.getMarkPath(M,i,O[0],D.strokeWidth()*_,T.horiz,C),opacity:s}))},m.prototype.renderLabel=function(i,s,_,T){var S=this.axis,C=S.horiz,P=S.options,O=this.label,M=P.labels,R=M.step;S=U(this.tickmarkOffset,S.tickmarkOffset);var j=i.x;i=i.y;var $=!0;O&&D(j)&&(O.xy=i=this.getLabelPosition(j,i,O,C,M,S,T,R),this.isFirst&&!this.isLast&&!P.showFirstLabel||this.isLast&&!this.isFirst&&!P.showLastLabel?$=!1:!C||M.step||M.rotation||s||0===_||this.handleOverflow(i),R&&T%R&&($=!1),$&&D(i.y)?(i.opacity=_,O[this.isNewLabel?"attr":"animate"](i),this.isNewLabel=!1):(O.attr("y",-9999),this.isNewLabel=!0))},m.prototype.replaceMovedLabel=function(){var i=this.label,s=this.axis,_=s.reversed;if(i&&!this.isNew){var T=s.horiz?_?s.left:s.width+s.left:i.xy.x;_=s.horiz?i.xy.y:_?s.width+s.top:s.top,i.animate({x:T,y:_,opacity:0},void 0,i.destroy),delete this.label}s.isDirty=!0,this.label=this.movedLabel,delete this.movedLabel},m}(),s})),L(s,"Core/Axis/Axis.js",[s["Core/Animation/AnimationUtilities.js"],s["Core/Color/Color.js"],s["Core/Color/Palette.js"],s["Core/DefaultOptions.js"],s["Core/Foundation.js"],s["Core/Globals.js"],s["Core/Utilities.js"],s["Core/Axis/AxisDefaults.js"],s["Core/Axis/Tick.js"]],(function(i,s,_,T,S,C,P,O,M){var R=i.animObject,D=S.registerEventOptions,j=C.deg2rad,$=T.defaultOptions,U=P.arrayMax,V=P.arrayMin,Z=P.clamp,Y=P.correctFloat,X=P.defined,Q=P.destroyObjectProperties,ee=P.erase,te=P.error,ne=P.extend,re=P.fireEvent,ie=P.getMagnitude,ae=P.isArray,se=P.isNumber,oe=P.isString,le=P.merge,ce=P.normalizeTickInterval,ue=P.objectEach,de=P.pick,he=P.relativeLength,pe=P.removeEvent,me=P.splat,fe=P.syncTimeout;return i=function(){function a(i,s){this.zoomEnabled=this.width=this.visible=this.userOptions=this.translationSlope=this.transB=this.transA=this.top=this.ticks=this.tickRotCorr=this.tickPositions=this.tickmarkOffset=this.tickInterval=this.tickAmount=this.side=this.series=this.right=this.positiveValuesOnly=this.pos=this.pointRangePadding=this.pointRange=this.plotLinesAndBandsGroups=this.plotLinesAndBands=this.paddedTicks=this.overlap=this.options=this.offset=this.names=this.minPixelPadding=this.minorTicks=this.minorTickInterval=this.min=this.maxLabelLength=this.max=this.len=this.left=this.labelFormatter=this.labelEdge=this.isLinked=this.height=this.hasVisibleSeries=this.hasNames=this.eventOptions=this.coll=this.closestPointRange=this.chart=this.categories=this.bottom=this.alternateBands=void 0,this.init(i,s)}return a.prototype.init=function(i,s){var _=s.isX;this.chart=i,this.horiz=i.inverted&&!this.isZAxis?!_:_,this.isXAxis=_,this.coll=this.coll||(_?"xAxis":"yAxis"),re(this,"init",{userOptions:s}),this.opposite=de(s.opposite,this.opposite),this.side=de(s.side,this.side,this.horiz?this.opposite?0:2:this.opposite?1:3),this.setOptions(s);var T=this.options,S=T.labels,C=T.type;this.userOptions=s,this.minPixelPadding=0,this.reversed=de(T.reversed,this.reversed),this.visible=T.visible,this.zoomEnabled=T.zoomEnabled,this.hasNames="category"===C||!0===T.categories,this.categories=T.categories||this.hasNames,this.names||(this.names=[],this.names.keys={}),this.plotLinesAndBandsGroups={},this.positiveValuesOnly=!!this.logarithmic,this.isLinked=X(T.linkedTo),this.ticks={},this.labelEdge=[],this.minorTicks={},this.plotLinesAndBands=[],this.alternateBands={},this.len=0,this.minRange=this.userMinRange=T.minRange||T.maxZoom,this.range=T.range,this.offset=T.offset||0,this.min=this.max=null,s=de(T.crosshair,me(i.options.tooltip.crosshairs)[_?0:1]),this.crosshair=!0===s?{}:s,-1===i.axes.indexOf(this)&&(_?i.axes.splice(i.xAxis.length,0,this):i.axes.push(this),i[this.coll].push(this)),this.series=this.series||[],i.inverted&&!this.isZAxis&&_&&void 0===this.reversed&&(this.reversed=!0),this.labelRotation=se(S.rotation)?S.rotation:void 0,D(this,T),re(this,"afterInit")},a.prototype.setOptions=function(i){this.options=le(O.defaultXAxisOptions,"yAxis"===this.coll&&O.defaultYAxisOptions,[O.defaultTopAxisOptions,O.defaultRightAxisOptions,O.defaultBottomAxisOptions,O.defaultLeftAxisOptions][this.side],le($[this.coll],i)),re(this,"afterSetOptions",{userOptions:i})},a.prototype.defaultLabelFormatter=function(i){var s=this.axis;i=this.chart.numberFormatter;var _=se(this.value)?this.value:NaN,T=s.chart.time,S=this.dateTimeLabelFormat,C=$.lang,P=C.numericSymbols;C=C.numericSymbolMagnitude||1e3;var O=s.logarithmic?Math.abs(_):s.tickInterval,M=P&&P.length;if(s.categories)var R=""+this.value;else if(S)R=T.dateFormat(S,_);else if(M&&1e3<=O)for(;M--&&void 0===R;)O>=(s=Math.pow(C,M+1))&&0==10*_%s&&null!==P[M]&&0!==_&&(R=i(_/s,-1)+P[M]);return void 0===R&&(R=1e4<=Math.abs(_)?i(_,-1):i(_,-1,void 0,"")),R},a.prototype.getSeriesExtremes=function(){var i,s=this,_=s.chart;re(this,"getSeriesExtremes",null,(function(){s.hasVisibleSeries=!1,s.dataMin=s.dataMax=s.threshold=null,s.softThreshold=!s.isXAxis,s.stacking&&s.stacking.buildStacks(),s.series.forEach((function(T){if(T.visible||!_.options.chart.ignoreHiddenSeries){var S=T.options,C=S.threshold;if(s.hasVisibleSeries=!0,s.positiveValuesOnly&&0>=C&&(C=null),s.isXAxis){if((S=T.xData).length){S=s.logarithmic?S.filter(s.validatePositiveValue):S;var P=(i=T.getXExtremes(S)).min,O=i.max;se(P)||P instanceof Date||(S=S.filter(se),P=(i=T.getXExtremes(S)).min,O=i.max),S.length&&(s.dataMin=Math.min(de(s.dataMin,P),P),s.dataMax=Math.max(de(s.dataMax,O),O))}}else T=T.applyExtremes(),se(T.dataMin)&&(P=T.dataMin,s.dataMin=Math.min(de(s.dataMin,P),P)),se(T.dataMax)&&(O=T.dataMax,s.dataMax=Math.max(de(s.dataMax,O),O)),X(C)&&(s.threshold=C),(!S.softThreshold||s.positiveValuesOnly)&&(s.softThreshold=!1)}}))})),re(this,"afterGetSeriesExtremes")},a.prototype.translate=function(i,s,_,T,S,C){var P=this.linkedParent||this,O=T&&P.old?P.old.min:P.min,M=P.minPixelPadding;S=(P.isOrdinal||P.brokenAxis&&P.brokenAxis.hasBreaks||P.logarithmic&&S)&&P.lin2val;var R=1,D=0;return(T=T&&P.old?P.old.transA:P.transA)||(T=P.transA),_&&(R*=-1,D=P.len),P.reversed&&(D-=(R*=-1)*(P.sector||P.len)),s?(i=(i*R+D-M)/T+O,S&&(i=P.lin2val(i))):(S&&(i=P.val2lin(i)),i=se(O)?R*(i-O)*T+D+R*M+(se(C)?T*C:0):void 0),i},a.prototype.toPixels=function(i,s){return this.translate(i,!1,!this.horiz,null,!0)+(s?0:this.pos)},a.prototype.toValue=function(i,s){return this.translate(i-(s?0:this.pos),!0,!this.horiz,null,!0)},a.prototype.getPlotLinePath=function(i){function a(i,s,_){return("pass"!==Q&&i<s||i>_)&&(Q?i=Z(i,s,_):C=!0),i}var s,_,T,S,C,P=this,O=P.chart,M=P.left,R=P.top,D=i.old,j=i.value,$=i.lineWidth,U=D&&O.oldChartHeight||O.chartHeight,V=D&&O.oldChartWidth||O.chartWidth,Y=P.transB,X=i.translatedValue,Q=i.force;return i={value:j,lineWidth:$,old:D,force:Q,acrossPanes:i.acrossPanes,translatedValue:X},re(this,"getPlotLinePath",i,(function(i){X=de(X,P.translate(j,null,null,D)),X=Z(X,-1e5,1e5),s=T=Math.round(X+Y),_=S=Math.round(U-X-Y),se(X)?P.horiz?(_=R,S=U-P.bottom,s=T=a(s,M,M+P.width)):(s=M,T=V-P.right,_=S=a(_,R,R+P.height)):(C=!0,Q=!1),i.path=C&&!Q?null:O.renderer.crispLine([["M",s,_],["L",T,S]],$||1)})),i.path},a.prototype.getLinearTickPositions=function(i,s,_){var T=Y(Math.floor(s/i)*i);_=Y(Math.ceil(_/i)*i);var S,C=[];if(Y(T+i)===T&&(S=20),this.single)return[s];for(s=T;s<=_&&(C.push(s),(s=Y(s+i,S))!==P);)var P=s;return C},a.prototype.getMinorTickInterval=function(){var i=this.options;return!0===i.minorTicks?de(i.minorTickInterval,"auto"):!1===i.minorTicks?null:i.minorTickInterval},a.prototype.getMinorTickPositions=function(){var i=this.options,s=this.tickPositions,_=this.minorTickInterval,T=this.pointRangePadding||0,S=this.min-T,C=(T=this.max+T)-S,P=[];if(C&&C/_<this.len/3){var O=this.logarithmic;if(O)this.paddedTicks.forEach((function(i,s,T){s&&P.push.apply(P,O.getLogTickPositions(_,T[s-1],T[s],!0))}));else if(this.dateTime&&"auto"===this.getMinorTickInterval())P=P.concat(this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(_),S,T,i.startOfWeek));else for(i=S+(s[0]-S)%_;i<=T&&i!==P[0];i+=_)P.push(i)}return 0!==P.length&&this.trimTicks(P),P},a.prototype.adjustForMinRange=function(){var i,s,_,T,S=this.options,C=this.logarithmic,P=this.min,O=this.max,M=0;if(this.isXAxis&&void 0===this.minRange&&!C&&(X(S.min)||X(S.max)?this.minRange=null:(this.series.forEach((function(S){if(_=S.xData,T=S.xIncrement?1:_.length-1,1<_.length)for(i=T;0<i;i--)s=_[i]-_[i-1],(!M||s<M)&&(M=s)})),this.minRange=Math.min(5*M,this.dataMax-this.dataMin))),O-P<this.minRange){var R=this.dataMax-this.dataMin>=this.minRange,D=this.minRange,j=(D-O+P)/2;j=[P-j,de(S.min,P-j)],R&&(j[2]=this.logarithmic?this.logarithmic.log2lin(this.dataMin):this.dataMin),O=[(P=U(j))+D,de(S.max,P+D)],R&&(O[2]=C?C.log2lin(this.dataMax):this.dataMax),(O=V(O))-P<D&&(j[0]=O-D,j[1]=de(S.min,O-D),P=U(j))}this.min=P,this.max=O},a.prototype.getClosest=function(){var i;return this.categories?i=1:this.series.forEach((function(s){var _=s.closestPointRange,T=s.visible||!s.chart.options.chart.ignoreHiddenSeries;!s.noSharedTooltip&&X(_)&&T&&(i=X(i)?Math.min(i,_):_)})),i},a.prototype.nameToX=function(i){var s=ae(this.categories),_=s?this.categories:this.names,T=i.options.x;if(i.series.requireSorting=!1,X(T)||(T=this.options.uniqueNames?s?_.indexOf(i.name):de(_.keys[i.name],-1):i.series.autoIncrement()),-1===T){if(!s)var S=_.length}else S=T;return void 0!==S&&(this.names[S]=i.name,this.names.keys[i.name]=S),S},a.prototype.updateNames=function(){var i=this,s=this.names;0<s.length&&(Object.keys(s.keys).forEach((function(i){delete s.keys[i]})),s.length=0,this.minRange=this.userMinRange,(this.series||[]).forEach((function(s){s.xIncrement=null,s.points&&!s.isDirtyData||(i.max=Math.max(i.max,s.xData.length-1),s.processData(),s.generatePoints()),s.data.forEach((function(_,T){if(_&&_.options&&void 0!==_.name){var S=i.nameToX(_);void 0!==S&&S!==_.x&&(_.x=S,s.xData[T]=S)}}))})))},a.prototype.setAxisTranslation=function(){var i=this,s=i.max-i.min,_=i.linkedParent,T=!!i.categories,S=i.isXAxis,C=i.axisPointRange||0,P=0,O=0,M=i.transA;if(S||T||C){var R=i.getClosest();_?(P=_.minPointOffset,O=_.pointRangePadding):i.series.forEach((function(s){var _=T?1:S?de(s.options.pointRange,R,0):i.axisPointRange||0,M=s.options.pointPlacement;C=Math.max(C,_),i.single&&!T||(s=s.is("xrange")?!S:S,P=Math.max(P,s&&oe(M)?0:_/2),O=Math.max(O,s&&"on"===M?0:_))})),_=i.ordinal&&i.ordinal.slope&&R?i.ordinal.slope/R:1,i.minPointOffset=P*=_,i.pointRangePadding=O*=_,i.pointRange=Math.min(C,i.single&&T?1:s),S&&(i.closestPointRange=R)}i.translationSlope=i.transA=M=i.staticScale||i.len/(s+O||1),i.transB=i.horiz?i.left:i.bottom,i.minPixelPadding=M*P,re(this,"afterSetAxisTranslation")},a.prototype.minFromRange=function(){return this.max-this.range},a.prototype.setTickInterval=function(i){var s=this,_=s.chart,T=s.logarithmic,S=s.options,C=s.isXAxis,P=s.isLinked,O=S.tickPixelInterval,M=s.categories,R=s.softThreshold,D=S.maxPadding,j=S.minPadding,$=S.tickInterval,U=se(s.threshold)?s.threshold:null;s.dateTime||M||P||this.getTickAmount();var V=de(s.userMin,S.min),Z=de(s.userMax,S.max);if(P){s.linkedParent=_[s.coll][S.linkedTo];var Q=s.linkedParent.getExtremes();s.min=de(Q.min,Q.dataMin),s.max=de(Q.max,Q.dataMax),S.type!==s.linkedParent.options.type&&te(11,1,_)}else{if(R&&X(U))if(s.dataMin>=U)Q=U,j=0;else if(s.dataMax<=U){var ee=U;D=0}s.min=de(V,Q,s.dataMin),s.max=de(Z,ee,s.dataMax)}T&&(s.positiveValuesOnly&&!i&&0>=Math.min(s.min,de(s.dataMin,s.min))&&te(10,1,_),s.min=Y(T.log2lin(s.min),16),s.max=Y(T.log2lin(s.max),16)),s.range&&X(s.max)&&(s.userMin=s.min=V=Math.max(s.dataMin,s.minFromRange()),s.userMax=Z=s.max,s.range=null),re(s,"foundExtremes"),s.beforePadding&&s.beforePadding(),s.adjustForMinRange(),!(M||s.axisPointRange||s.stacking&&s.stacking.usePercentage||P)&&X(s.min)&&X(s.max)&&(_=s.max-s.min)&&(!X(V)&&j&&(s.min-=_*j),!X(Z)&&D&&(s.max+=_*D)),se(s.userMin)||(se(S.softMin)&&S.softMin<s.min&&(s.min=V=S.softMin),se(S.floor)&&(s.min=Math.max(s.min,S.floor))),se(s.userMax)||(se(S.softMax)&&S.softMax>s.max&&(s.max=Z=S.softMax),se(S.ceiling)&&(s.max=Math.min(s.max,S.ceiling))),R&&X(s.dataMin)&&(U=U||0,!X(V)&&s.min<U&&s.dataMin>=U?s.min=s.options.minRange?Math.min(U,s.max-s.minRange):U:!X(Z)&&s.max>U&&s.dataMax<=U&&(s.max=s.options.minRange?Math.max(U,s.min+s.minRange):U)),se(s.min)&&se(s.max)&&!this.chart.polar&&s.min>s.max&&(X(s.options.min)?s.max=s.min:X(s.options.max)&&(s.min=s.max)),s.tickInterval=s.min===s.max||void 0===s.min||void 0===s.max?1:P&&s.linkedParent&&!$&&O===s.linkedParent.options.tickPixelInterval?$=s.linkedParent.tickInterval:de($,this.tickAmount?(s.max-s.min)/Math.max(this.tickAmount-1,1):void 0,M?1:(s.max-s.min)*O/Math.max(s.len,O)),C&&!i&&s.series.forEach((function(i){i.processData(s.min!==(s.old&&s.old.min)||s.max!==(s.old&&s.old.max))})),s.setAxisTranslation(),re(this,"initialAxisTranslation"),s.pointRange&&!$&&(s.tickInterval=Math.max(s.pointRange,s.tickInterval)),i=de(S.minTickInterval,s.dateTime&&!s.series.some((function(i){return i.noSharedTooltip}))?s.closestPointRange:0),!$&&s.tickInterval<i&&(s.tickInterval=i),s.dateTime||s.logarithmic||$||(s.tickInterval=ce(s.tickInterval,void 0,ie(s.tickInterval),de(S.allowDecimals,.5>s.tickInterval||void 0!==this.tickAmount),!!this.tickAmount)),this.tickAmount||(s.tickInterval=s.unsquish()),this.setTickPositions()},a.prototype.setTickPositions=function(){var i=this.options,s=i.tickPositions,_=this.getMinorTickInterval(),T=this.hasVerticalPanning(),S="colorAxis"===this.coll,C=(S||!T)&&i.startOnTick;T=(S||!T)&&i.endOnTick,S=i.tickPositioner,this.tickmarkOffset=this.categories&&"between"===i.tickmarkPlacement&&1===this.tickInterval?.5:0,this.minorTickInterval="auto"===_&&this.tickInterval?this.tickInterval/5:_,this.single=this.min===this.max&&X(this.min)&&!this.tickAmount&&(parseInt(this.min,10)===this.min||!1!==i.allowDecimals),this.tickPositions=_=s&&s.slice(),!_&&(this.ordinal&&this.ordinal.positions||!((this.max-this.min)/this.tickInterval>Math.max(2*this.len,200))?_=this.dateTime?this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(this.tickInterval,i.units),this.min,this.max,i.startOfWeek,this.ordinal&&this.ordinal.positions,this.closestPointRange,!0):this.logarithmic?this.logarithmic.getLogTickPositions(this.tickInterval,this.min,this.max):this.getLinearTickPositions(this.tickInterval,this.min,this.max):(_=[this.min,this.max],te(19,!1,this.chart)),_.length>this.len&&(_=[_[0],_.pop()])[0]===_[1]&&(_.length=1),this.tickPositions=_,S&&(S=S.apply(this,[this.min,this.max])))&&(this.tickPositions=_=S),this.paddedTicks=_.slice(0),this.trimTicks(_,C,T),this.isLinked||(this.single&&2>_.length&&!this.categories&&!this.series.some((function(i){return i.is("heatmap")&&"between"===i.options.pointPlacement}))&&(this.min-=.5,this.max+=.5),s||S||this.adjustTickAmount()),re(this,"afterSetTickPositions")},a.prototype.trimTicks=function(i,s,_){var T=i[0],S=i[i.length-1],C=!this.isOrdinal&&this.minPointOffset||0;if(re(this,"trimTicks"),!this.isLinked){if(s&&-1/0!==T)this.min=T;else for(;this.min-C>i[0];)i.shift();if(_)this.max=S;else for(;this.max+C<i[i.length-1];)i.pop();0===i.length&&X(T)&&!this.options.tickPositions&&i.push((S+T)/2)}},a.prototype.alignToOthers=function(){var i,s={},_=this.options;return!1!==this.chart.options.chart.alignTicks&&_.alignTicks&&!1!==_.startOnTick&&!1!==_.endOnTick&&!this.logarithmic&&this.chart[this.coll].forEach((function(_){var T=_.options;T=[_.horiz?T.left:T.top,T.width,T.height,T.pane].join(),_.series.length&&(s[T]?i=!0:s[T]=1)})),i},a.prototype.getTickAmount=function(){var i=this.options,s=i.tickPixelInterval,_=i.tickAmount;!X(i.tickInterval)&&!_&&this.len<s&&!this.isRadial&&!this.logarithmic&&i.startOnTick&&i.endOnTick&&(_=2),!_&&this.alignToOthers()&&(_=Math.ceil(this.len/s)+1),4>_&&(this.finalTickAmt=_,_=5),this.tickAmount=_},a.prototype.adjustTickAmount=function(){var i=this.options,s=this.tickInterval,_=this.tickPositions,T=this.tickAmount,S=this.finalTickAmt,C=_&&_.length,P=de(this.threshold,this.softThreshold?0:null);if(this.hasData()&&se(this.min)&&se(this.max)){if(C<T){for(;_.length<T;)_.length%2||this.min===P?_.push(Y(_[_.length-1]+s)):_.unshift(Y(_[0]-s));this.transA*=(C-1)/(T-1),this.min=i.startOnTick?_[0]:Math.min(this.min,_[0]),this.max=i.endOnTick?_[_.length-1]:Math.max(this.max,_[_.length-1])}else C>T&&(this.tickInterval*=2,this.setTickPositions());if(X(S)){for(s=i=_.length;s--;)(3===S&&1==s%2||2>=S&&0<s&&s<i-1)&&_.splice(s,1);this.finalTickAmt=void 0}}},a.prototype.setScale=function(){var i=!1,s=!1;this.series.forEach((function(_){i=i||_.isDirtyData||_.isDirty,s=s||_.xAxis&&_.xAxis.isDirty||!1})),this.setAxisSize();var _=this.len!==(this.old&&this.old.len);_||i||s||this.isLinked||this.forceRedraw||this.userMin!==(this.old&&this.old.userMin)||this.userMax!==(this.old&&this.old.userMax)||this.alignToOthers()?(this.stacking&&this.stacking.resetStacks(),this.forceRedraw=!1,this.getSeriesExtremes(),this.setTickInterval(),this.isDirty||(this.isDirty=_||this.min!==(this.old&&this.old.min)||this.max!==(this.old&&this.old.max))):this.stacking&&this.stacking.cleanStacks(),i&&this.panningState&&(this.panningState.isDirty=!0),re(this,"afterSetScale")},a.prototype.setExtremes=function(i,s,_,T,S){var C=this,P=C.chart;_=de(_,!0),C.series.forEach((function(i){delete i.kdTree})),S=ne(S,{min:i,max:s}),re(C,"setExtremes",S,(function(){C.userMin=i,C.userMax=s,C.eventArgs=S,_&&P.redraw(T)}))},a.prototype.zoom=function(i,s){var _=this,T=this.dataMin,S=this.dataMax,C=this.options,P=Math.min(T,de(C.min,T)),O=Math.max(S,de(C.max,S));return re(this,"zoom",i={newMin:i,newMax:s},(function(i){var s=i.newMin,C=i.newMax;s===_.min&&C===_.max||(_.allowZoomOutside||(X(T)&&(s<P&&(s=P),s>O&&(s=O)),X(S)&&(C<P&&(C=P),C>O&&(C=O))),_.displayBtn=void 0!==s||void 0!==C,_.setExtremes(s,C,!1,void 0,{trigger:"zoom"})),i.zoomed=!0})),i.zoomed},a.prototype.setAxisSize=function(){var i=this.chart,s=this.options,_=s.offsets||[0,0,0,0],T=this.horiz,S=this.width=Math.round(he(de(s.width,i.plotWidth-_[3]+_[1]),i.plotWidth)),C=this.height=Math.round(he(de(s.height,i.plotHeight-_[0]+_[2]),i.plotHeight)),P=this.top=Math.round(he(de(s.top,i.plotTop+_[0]),i.plotHeight,i.plotTop));s=this.left=Math.round(he(de(s.left,i.plotLeft+_[3]),i.plotWidth,i.plotLeft)),this.bottom=i.chartHeight-C-P,this.right=i.chartWidth-S-s,this.len=Math.max(T?S:C,0),this.pos=T?s:P},a.prototype.getExtremes=function(){var i=this.logarithmic;return{min:i?Y(i.lin2log(this.min)):this.min,max:i?Y(i.lin2log(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}},a.prototype.getThreshold=function(i){var s=this.logarithmic,_=s?s.lin2log(this.min):this.min;return s=s?s.lin2log(this.max):this.max,null===i||-1/0===i?i=_:1/0===i?i=s:_>i?i=_:s<i&&(i=s),this.translate(i,0,1,0,1)},a.prototype.autoLabelAlign=function(i){var s=(de(i,0)-90*this.side+720)%360;return re(this,"autoLabelAlign",i={align:"center"},(function(i){15<s&&165>s?i.align="right":195<s&&345>s&&(i.align="left")})),i.align},a.prototype.tickSize=function(i){var s=this.options,_=de(s["tick"===i?"tickWidth":"minorTickWidth"],"tick"===i&&this.isXAxis&&!this.categories?1:0),T=s["tick"===i?"tickLength":"minorTickLength"];if(_&&T){"inside"===s[i+"Position"]&&(T=-T);var S=[T,_]}return re(this,"afterTickSize",i={tickSize:S}),i.tickSize},a.prototype.labelMetrics=function(){var i=this.tickPositions&&this.tickPositions[0]||0;return this.chart.renderer.fontMetrics(this.options.labels.style.fontSize,this.ticks[i]&&this.ticks[i].label)},a.prototype.unsquish=function(){var i,s,_=this.options.labels,T=this.horiz,S=this.tickInterval,C=this.len/(((this.categories?1:0)+this.max-this.min)/S),P=_.rotation,O=this.labelMetrics(),M=Math.max(this.max-this.min,0),f=function(i){var s=i/(C||1);return(s=1<s?Math.ceil(s):1)*S>M&&1/0!==i&&1/0!==C&&M&&(s=Math.ceil(M/S)),Y(s*S)},R=S,D=Number.MAX_VALUE;if(T){if(!_.staggerLines&&!_.step)if(se(P))var $=[P];else C<_.autoRotationLimit&&($=_.autoRotation);$&&$.forEach((function(_){if(_===P||_&&-90<=_&&90>=_){var T=(s=f(Math.abs(O.h/Math.sin(j*_))))+Math.abs(_/360);T<D&&(D=T,i=_,R=s)}}))}else _.step||(R=f(O.h));return this.autoRotation=$,this.labelRotation=de(i,se(P)?P:0),R},a.prototype.getSlotWidth=function(i){var s=this.chart,_=this.horiz,T=this.options.labels,S=Math.max(this.tickPositions.length-(this.categories?0:1),1),C=s.margin[3];if(i&&se(i.slotWidth))return i.slotWidth;if(_&&2>T.step)return T.rotation?0:(this.staggerLines||1)*this.len/S;if(!_){if(void 0!==(i=T.style.width))return parseInt(String(i),10);if(C)return C-s.spacing[3]}return.33*s.chartWidth},a.prototype.renderUnsquish=function(){var i=this.chart,s=i.renderer,_=this.tickPositions,T=this.ticks,S=this.options.labels,C=S.style,P=this.horiz,O=this.getSlotWidth(),M=Math.max(1,Math.round(O-2*S.padding)),R={},D=this.labelMetrics(),j=C.textOverflow,$=0;if(oe(S.rotation)||(R.rotation=S.rotation||0),_.forEach((function(i){(i=T[i]).movedLabel&&i.replaceMovedLabel(),i&&i.label&&i.label.textPxLength>$&&($=i.label.textPxLength)})),this.maxLabelLength=$,this.autoRotation)$>M&&$>D.h?R.rotation=this.labelRotation:this.labelRotation=0;else if(O){var U=M;if(!j){var V="clip";for(M=_.length;!P&&M--;){var Z=_[M];(Z=T[Z].label)&&(Z.styles&&"ellipsis"===Z.styles.textOverflow?Z.css({textOverflow:"clip"}):Z.textPxLength>O&&Z.css({width:O+"px"}),Z.getBBox().height>this.len/_.length-(D.h-D.f)&&(Z.specificTextOverflow="ellipsis"))}}}R.rotation&&(U=$>.5*i.chartHeight?.33*i.chartHeight:$,j||(V="ellipsis")),(this.labelAlign=S.align||this.autoLabelAlign(this.labelRotation))&&(R.align=this.labelAlign),_.forEach((function(i){var s=(i=T[i])&&i.label,_=C.width,S={};s&&(s.attr(R),i.shortenLabel?i.shortenLabel():U&&!_&&"nowrap"!==C.whiteSpace&&(U<s.textPxLength||"SPAN"===s.element.tagName)?(S.width=U+"px",j||(S.textOverflow=s.specificTextOverflow||V),s.css(S)):s.styles&&s.styles.width&&!S.width&&!_&&s.css({width:null}),delete s.specificTextOverflow,i.rotation=R.rotation)}),this),this.tickRotCorr=s.rotCorr(D.b,this.labelRotation||0,0!==this.side)},a.prototype.hasData=function(){return this.series.some((function(i){return i.hasData()}))||this.options.showEmpty&&X(this.min)&&X(this.max)},a.prototype.addTitle=function(i){var s,_=this.chart.renderer,T=this.horiz,S=this.opposite,C=this.options.title,P=this.chart.styledMode;this.axisTitle||((s=C.textAlign)||(s=(T?{low:"left",middle:"center",high:"right"}:{low:S?"right":"left",middle:"center",high:S?"left":"right"})[C.align]),this.axisTitle=_.text(C.text||"",0,0,C.useHTML).attr({zIndex:7,rotation:C.rotation,align:s}).addClass("highcharts-axis-title"),P||this.axisTitle.css(le(C.style)),this.axisTitle.add(this.axisGroup),this.axisTitle.isNew=!0),P||C.style.width||this.isRadial||this.axisTitle.css({width:this.len+"px"}),this.axisTitle[i?"show":"hide"](i)},a.prototype.generateTick=function(i){var s=this.ticks;s[i]?s[i].addLabel():s[i]=new M(this,i)},a.prototype.getOffset=function(){var i=this,s=this,_=s.chart,T=_.renderer,S=s.options,C=s.tickPositions,P=s.ticks,O=s.horiz,M=s.side,R=_.inverted&&!s.isZAxis?[1,0,3,2][M]:M,D=s.hasData(),j=S.title,$=S.labels,U=_.axisOffset;_=_.clipOffset;var V,Z=[-1,1,1,-1][M],Y=S.className,Q=s.axisParent,ee=0,te=0,ne=0;if(s.showAxis=V=D||S.showEmpty,s.staggerLines=s.horiz&&$.staggerLines||void 0,!s.axisGroup){var J=function(s,_,S){return T.g(s).attr({zIndex:S}).addClass("highcharts-"+i.coll.toLowerCase()+_+" "+(i.isRadial?"highcharts-radial-axis"+_+" ":"")+(Y||"")).add(Q)};s.gridGroup=J("grid","-grid",S.gridZIndex),s.axisGroup=J("axis","",S.zIndex),s.labelGroup=J("axis-labels","-labels",$.zIndex)}if(D||s.isLinked?(C.forEach((function(i){s.generateTick(i)})),s.renderUnsquish(),s.reserveSpaceDefault=0===M||2===M||{1:"left",3:"right"}[M]===s.labelAlign,de($.reserveSpace,"center"===s.labelAlign||null,s.reserveSpaceDefault)&&C.forEach((function(i){ne=Math.max(P[i].getLabelSize(),ne)})),s.staggerLines&&(ne*=s.staggerLines),s.labelOffset=ne*(s.opposite?-1:1)):ue(P,(function(i,s){i.destroy(),delete P[s]})),j&&j.text&&!1!==j.enabled&&(s.addTitle(V),V&&!1!==j.reserveSpace)){s.titleOffset=ee=s.axisTitle.getBBox()[O?"height":"width"];var ie=j.offset;te=X(ie)?0:de(j.margin,O?5:10)}s.renderLine(),s.offset=Z*de(S.offset,U[M]?U[M]+(S.margin||0):0),s.tickRotCorr=s.tickRotCorr||{x:0,y:0},j=0===M?-s.labelMetrics().h:2===M?s.tickRotCorr.y:0,D=Math.abs(ne)+te,ne&&(D=D-j+Z*(O?de($.y,s.tickRotCorr.y+8*Z):$.x)),s.axisTitleMargin=de(ie,D),s.getMaxLabelDimensions&&(s.maxLabelDimensions=s.getMaxLabelDimensions(P,C)),O=this.tickSize("tick"),U[M]=Math.max(U[M],(s.axisTitleMargin||0)+ee+Z*s.offset,D,C&&C.length&&O?O[0]+Z*s.offset:0),S=S.offset?0:2*Math.floor(s.axisLine.strokeWidth()/2),_[R]=Math.max(_[R],S),re(this,"afterGetOffset")},a.prototype.getLinePath=function(i){var s=this.chart,_=this.opposite,T=this.offset,S=this.horiz,C=this.left+(_?this.width:0)+T;return T=s.chartHeight-this.bottom-(_?this.height:0)+T,_&&(i*=-1),s.renderer.crispLine([["M",S?this.left:C,S?T:this.top],["L",S?s.chartWidth-this.right:C,S?T:s.chartHeight-this.bottom]],i)},a.prototype.renderLine=function(){this.axisLine||(this.axisLine=this.chart.renderer.path().addClass("highcharts-axis-line").add(this.axisGroup),this.chart.styledMode||this.axisLine.attr({stroke:this.options.lineColor,"stroke-width":this.options.lineWidth,zIndex:7}))},a.prototype.getTitlePosition=function(){var i=this.horiz,s=this.left,_=this.top,T=this.len,S=this.options.title,C=i?s:_,P=this.opposite,O=this.offset,M=S.x,R=S.y,D=this.axisTitle,j=this.chart.renderer.fontMetrics(S.style.fontSize,D);return D=Math.max(D.getBBox(null,0).height-j.h-1,0),T={low:C+(i?0:T),middle:C+T/2,high:C+(i?T:0)}[S.align],s=(i?_+this.height:s)+(i?1:-1)*(P?-1:1)*this.axisTitleMargin+[-D,D,j.f,-D][this.side],i={x:i?T+M:s+(P?this.width:0)+O+M,y:i?s+R-(P?this.height:0)+O:T+R},re(this,"afterGetTitlePosition",{titlePosition:i}),i},a.prototype.renderMinorTick=function(i,s){var _=this.minorTicks;_[i]||(_[i]=new M(this,i,"minor")),s&&_[i].isNew&&_[i].render(null,!0),_[i].render(null,!1,1)},a.prototype.renderTick=function(i,s,_){var T=this.ticks;(!this.isLinked||i>=this.min&&i<=this.max||this.grid&&this.grid.isColumn)&&(T[i]||(T[i]=new M(this,i)),_&&T[i].isNew&&T[i].render(s,!0,-1),T[i].render(s))},a.prototype.render=function(){var i,s,_=this,T=_.chart,S=_.logarithmic,P=_.options,O=_.isLinked,D=_.tickPositions,j=_.axisTitle,$=_.ticks,U=_.minorTicks,V=_.alternateBands,Z=P.stackLabels,Y=P.alternateGridColor,X=_.tickmarkOffset,Q=_.axisLine,ee=_.showAxis,te=R(T.renderer.globalAnimation);if(_.labelEdge.length=0,_.overlap=!1,[$,U,V].forEach((function(i){ue(i,(function(i){i.isActive=!1}))})),_.hasData()||O){var ne=_.chart.hasRendered&&_.old&&se(_.old.min);_.minorTickInterval&&!_.categories&&_.getMinorTickPositions().forEach((function(i){_.renderMinorTick(i,ne)})),D.length&&(D.forEach((function(i,s){_.renderTick(i,s,ne)})),X&&(0===_.min||_.single)&&($[-1]||($[-1]=new M(_,-1,null,!0)),$[-1].render(-1))),Y&&D.forEach((function(P,O){s=void 0!==D[O+1]?D[O+1]+X:_.max-X,0==O%2&&P<_.max&&s<=_.max+(T.polar?-X:X)&&(V[P]||(V[P]=new C.PlotLineOrBand(_)),i=P+X,V[P].options={from:S?S.lin2log(i):i,to:S?S.lin2log(s):s,color:Y,className:"highcharts-alternate-grid"},V[P].render(),V[P].isActive=!0)})),_._addedPlotLB||(_._addedPlotLB=!0,(P.plotLines||[]).concat(P.plotBands||[]).forEach((function(i){_.addPlotBandOrLine(i)})))}[$,U,V].forEach((function(i){var s=[],_=te.duration;ue(i,(function(i,_){i.isActive||(i.render(_,!1,0),i.isActive=!1,s.push(_))})),fe((function(){for(var _=s.length;_--;)i[s[_]]&&!i[s[_]].isActive&&(i[s[_]].destroy(),delete i[s[_]])}),i!==V&&T.hasRendered&&_?_:0)})),Q&&(Q[Q.isPlaced?"animate":"attr"]({d:this.getLinePath(Q.strokeWidth())}),Q.isPlaced=!0,Q[ee?"show":"hide"](ee)),j&&ee&&(P=_.getTitlePosition(),se(P.y)?(j[j.isNew?"attr":"animate"](P),j.isNew=!1):(j.attr("y",-9999),j.isNew=!0)),Z&&Z.enabled&&_.stacking&&_.stacking.renderStackTotals(),_.old={len:_.len,max:_.max,min:_.min,transA:_.transA,userMax:_.userMax,userMin:_.userMin},_.isDirty=!1,re(this,"afterRender")},a.prototype.redraw=function(){this.visible&&(this.render(),this.plotLinesAndBands.forEach((function(i){i.render()}))),this.series.forEach((function(i){i.isDirty=!0}))},a.prototype.getKeepProps=function(){return this.keepProps||a.keepProps},a.prototype.destroy=function(i){var s=this,_=s.plotLinesAndBands,T=this.eventOptions;if(re(this,"destroy",{keepEvents:i}),i||pe(s),[s.ticks,s.minorTicks,s.alternateBands].forEach((function(i){Q(i)})),_)for(i=_.length;i--;)_[i].destroy();for(var S in"axisLine axisTitle axisGroup gridGroup labelGroup cross scrollbar".split(" ").forEach((function(i){s[i]&&(s[i]=s[i].destroy())})),s.plotLinesAndBandsGroups)s.plotLinesAndBandsGroups[S]=s.plotLinesAndBandsGroups[S].destroy();ue(s,(function(i,_){-1===s.getKeepProps().indexOf(_)&&delete s[_]})),this.eventOptions=T},a.prototype.drawCrosshair=function(i,T){var S,C=this.crosshair,P=de(C&&C.snap,!0),O=this.chart,M=this.cross;if(re(this,"drawCrosshair",{e:i,point:T}),i||(i=this.cross&&this.cross.e),C&&!1!==(X(T)||!P)){if(P?X(T)&&(S=de("colorAxis"!==this.coll?T.crosshairPos:null,this.isXAxis?T.plotX:this.len-T.plotY)):S=i&&(this.horiz?i.chartX-this.pos:this.len-i.chartY+this.pos),X(S)){var R={value:T&&(this.isXAxis?T.x:de(T.stackY,T.y)),translatedValue:S};O.polar&&ne(R,{isCrosshair:!0,chartX:i&&i.chartX,chartY:i&&i.chartY,point:T}),R=this.getPlotLinePath(R)||null}if(!X(R))return void this.hideCrosshair();P=this.categories&&!this.isRadial,M||(this.cross=M=O.renderer.path().addClass("highcharts-crosshair highcharts-crosshair-"+(P?"category ":"thin ")+(C.className||"")).attr({zIndex:de(C.zIndex,2)}).add(),O.styledMode||(M.attr({stroke:C.color||(P?s.parse(_.highlightColor20).setOpacity(.25).get():_.neutralColor20),"stroke-width":de(C.width,1)}).css({"pointer-events":"none"}),C.dashStyle&&M.attr({dashstyle:C.dashStyle}))),M.show().attr({d:R}),P&&!C.width&&M.attr({"stroke-width":this.transA}),this.cross.e=i}else this.hideCrosshair();re(this,"afterDrawCrosshair",{e:i,point:T})},a.prototype.hideCrosshair=function(){this.cross&&this.cross.hide(),re(this,"afterHideCrosshair")},a.prototype.hasVerticalPanning=function(){var i=this.chart.options.chart.panning;return!!(i&&i.enabled&&/y/.test(i.type))},a.prototype.validatePositiveValue=function(i){return se(i)&&0<i},a.prototype.update=function(i,s){var _=this.chart;i=le(this.userOptions,i),this.destroy(!0),this.init(_,i),_.isDirtyBox=!0,de(s,!0)&&_.redraw()},a.prototype.remove=function(i){for(var s=this.chart,_=this.coll,T=this.series,S=T.length;S--;)T[S]&&T[S].remove(!1);ee(s.axes,this),ee(s[_],this),s[_].forEach((function(i,s){i.options.index=i.userOptions.index=s})),this.destroy(),s.isDirtyBox=!0,de(i,!0)&&s.redraw()},a.prototype.setTitle=function(i,s){this.update({title:i},s)},a.prototype.setCategories=function(i,s){this.update({categories:i},s)},a.defaultOptions=O.defaultXAxisOptions,a.keepProps="extKey hcEvents names series userMax userMin".split(" "),a}(),i})),L(s,"Core/Axis/DateTimeAxis.js",[s["Core/Axis/Axis.js"],s["Core/Utilities.js"]],(function(i,s){var _=s.addEvent,T=s.getMagnitude,S=s.normalizeTickInterval,C=s.timeUnits,P=function(){function a(i){this.axis=i}return a.prototype.normalizeTimeTickInterval=function(i,s){var _=s||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]];s=_[_.length-1];var P,O=C[s[0]],M=s[1];for(P=0;P<_.length&&(s=_[P],O=C[s[0]],M=s[1],!(_[P+1]&&i<=(O*M[M.length-1]+C[_[P+1][0]])/2));P++);return O===C.year&&i<5*O&&(M=[1,2,5]),{unitRange:O,count:i=S(i/O,M,"year"===s[0]?Math.max(T(i/O),1):1),unitName:s[0]}},a}();return s=function(){function a(){}return a.compose=function(i){i.keepProps.push("dateTime"),i.prototype.getTimeTicks=function(){return this.chart.time.getTimeTicks.apply(this.chart.time,arguments)},_(i,"init",(function(i){"datetime"!==i.userOptions.type?this.dateTime=void 0:this.dateTime||(this.dateTime=new P(this))}))},a.AdditionsClass=P,a}(),s.compose(i),s})),L(s,"Core/Axis/LogarithmicAxis.js",[s["Core/Axis/Axis.js"],s["Core/Utilities.js"]],(function(i,s){var _=s.addEvent,T=s.getMagnitude,S=s.normalizeTickInterval,C=s.pick,P=function(){function a(i){this.axis=i}return a.prototype.getLogTickPositions=function(i,s,_,P){var O=this.axis,M=O.len,R=O.options,D=[];if(P||(this.minorAutoInterval=void 0),.5<=i)i=Math.round(i),D=O.getLinearTickPositions(i,s,_);else if(.08<=i){var j,$=Math.floor(s),U=R=void 0;for(M=.3<i?[1,2,4]:.15<i?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];$<_+1&&!U;$++){var V=M.length;for(j=0;j<V&&!U;j++){var Z=this.log2lin(this.lin2log($)*M[j]);Z>s&&(!P||R<=_)&&void 0!==R&&D.push(R),R>_&&(U=!0),R=Z}}}else s=this.lin2log(s),_=this.lin2log(_),i=P?O.getMinorTickInterval():R.tickInterval,i=C("auto"===i?null:i,this.minorAutoInterval,R.tickPixelInterval/(P?5:1)*(_-s)/((P?M/O.tickPositions.length:M)||1)),i=S(i,void 0,T(i)),D=O.getLinearTickPositions(i,s,_).map(this.log2lin),P||(this.minorAutoInterval=i/5);return P||(O.tickInterval=i),D},a.prototype.lin2log=function(i){return Math.pow(10,i)},a.prototype.log2lin=function(i){return Math.log(i)/Math.LN10},a}();return s=function(){function a(){}return a.compose=function(i){i.keepProps.push("logarithmic"),_(i,"init",(function(i){var s=this.logarithmic;"logarithmic"!==i.userOptions.type?this.logarithmic=void 0:s||(this.logarithmic=new P(this))})),_(i,"afterInit",(function(){var i=this.logarithmic;i&&(this.lin2val=function(s){return i.lin2log(s)},this.val2lin=function(s){return i.log2lin(s)})}))},a}(),s.compose(i),s})),L(s,"Core/Axis/PlotLineOrBand.js",[s["Core/Axis/Axis.js"],s["Core/Color/Palette.js"],s["Core/Utilities.js"]],(function(i,s,_){var T=_.arrayMax,S=_.arrayMin,C=_.defined,P=_.destroyObjectProperties,O=_.erase,M=_.extend,R=_.fireEvent,D=_.isNumber,j=_.merge,$=_.objectEach,U=_.pick,V=function(){function a(i,s){this.axis=i,s&&(this.options=s,this.id=s.id)}return a.prototype.render=function(){R(this,"render");var i=this,_=i.axis,T=_.horiz,S=_.logarithmic,P=i.options,O=P.label,M=i.label,D=P.to,V=P.from,Z=P.value,Y=C(V)&&C(D),X=C(Z),Q=i.svgElem,ee=!Q,te=[],ne=P.color,re=U(P.zIndex,0),ie=P.events;te={class:"highcharts-plot-"+(Y?"band ":"line ")+(P.className||"")};var ae={},se=_.chart.renderer,oe=Y?"bands":"lines";if(S&&(V=S.log2lin(V),D=S.log2lin(D),Z=S.log2lin(Z)),_.chart.styledMode||(X?(te.stroke=ne||s.neutralColor40,te["stroke-width"]=U(P.width,1),P.dashStyle&&(te.dashstyle=P.dashStyle)):Y&&(te.fill=ne||s.highlightColor10,P.borderWidth&&(te.stroke=P.borderColor,te["stroke-width"]=P.borderWidth))),ae.zIndex=re,oe+="-"+re,(S=_.plotLinesAndBandsGroups[oe])||(_.plotLinesAndBandsGroups[oe]=S=se.g("plot-"+oe).attr(ae).add()),ee&&(i.svgElem=Q=se.path().attr(te).add(S)),X)te=_.getPlotLinePath({value:Z,lineWidth:Q.strokeWidth(),acrossPanes:P.acrossPanes});else{if(!Y)return;te=_.getPlotBandPath(V,D,P)}return!i.eventsAdded&&ie&&($(ie,(function(s,_){Q.on(_,(function(s){ie[_].apply(i,[s])}))})),i.eventsAdded=!0),(ee||!Q.d)&&te&&te.length?Q.attr({d:te}):Q&&(te?(Q.show(!0),Q.animate({d:te})):Q.d&&(Q.hide(),M&&(i.label=M=M.destroy()))),O&&(C(O.text)||C(O.formatter))&&te&&te.length&&0<_.width&&0<_.height&&!te.isFlat?(O=j({align:T&&Y&&"center",x:T?!Y&&4:10,verticalAlign:!T&&Y&&"middle",y:T?Y?16:10:Y?6:-4,rotation:T&&!Y&&90},O),this.renderLabel(O,te,Y,re)):M&&M.hide(),i},a.prototype.renderLabel=function(i,s,_,C){var P=this.label,O=this.axis.chart.renderer;P||((P={align:i.textAlign||i.align,rotation:i.rotation,class:"highcharts-plot-"+(_?"band":"line")+"-label "+(i.className||"")}).zIndex=C,C=this.getLabelText(i),this.label=P=O.text(C,0,0,i.useHTML).attr(P).add(),this.axis.chart.styledMode||P.css(i.style)),O=s.xBounds||[s[0][1],s[1][1],_?s[2][1]:s[0][1]],s=s.yBounds||[s[0][2],s[1][2],_?s[2][2]:s[0][2]],_=S(O),C=S(s),P.align(i,!1,{x:_,y:C,width:T(O)-_,height:T(s)-C}),P.show(!0)},a.prototype.getLabelText=function(i){return C(i.formatter)?i.formatter.call(this):i.text},a.prototype.destroy=function(){O(this.axis.plotLinesAndBands,this),delete this.axis,P(this)},a}();return M(i.prototype,{getPlotBandPath:function(i,s,_){void 0===_&&(_=this.options);var T=this.getPlotLinePath({value:s,force:!0,acrossPanes:_.acrossPanes});_=this.getPlotLinePath({value:i,force:!0,acrossPanes:_.acrossPanes});var S=[],C=this.horiz,P=1;if(i=!D(this.min)||!D(this.max)||i<this.min&&s<this.min||i>this.max&&s>this.max,_&&T){if(i){var O=_.toString()===T.toString();P=0}for(i=0;i<_.length;i+=2){s=_[i];var M=_[i+1],R=T[i],j=T[i+1];"M"!==s[0]&&"L"!==s[0]||"M"!==M[0]&&"L"!==M[0]||"M"!==R[0]&&"L"!==R[0]||"M"!==j[0]&&"L"!==j[0]||(C&&R[1]===s[1]?(R[1]+=P,j[1]+=P):C||R[2]!==s[2]||(R[2]+=P,j[2]+=P),S.push(["M",s[1],s[2]],["L",M[1],M[2]],["L",j[1],j[2]],["L",R[1],R[2]],["Z"])),S.isFlat=O}}return S},addPlotBand:function(i){return this.addPlotBandOrLine(i,"plotBands")},addPlotLine:function(i){return this.addPlotBandOrLine(i,"plotLines")},addPlotBandOrLine:function(i,s){var _=this,T=new V(this,i),S=this.userOptions;if(this.visible&&(T=T.render()),T){if(this._addedPlotLB||(this._addedPlotLB=!0,(S.plotLines||[]).concat(S.plotBands||[]).forEach((function(i){_.addPlotBandOrLine(i)}))),s){var C=S[s]||[];C.push(i),S[s]=C}this.plotLinesAndBands.push(T)}return T},removePlotBandOrLine:function(i){var s=this.plotLinesAndBands,_=this.options,T=this.userOptions;if(s){for(var S=s.length;S--;)s[S].id===i&&s[S].destroy();[_.plotLines||[],T.plotLines||[],_.plotBands||[],T.plotBands||[]].forEach((function(s){for(S=s.length;S--;)(s[S]||{}).id===i&&O(s,s[S])}))}},removePlotBand:function(i){this.removePlotBandOrLine(i)},removePlotLine:function(i){this.removePlotBandOrLine(i)}}),V})),L(s,"Core/Tooltip.js",[s["Core/FormatUtilities.js"],s["Core/Globals.js"],s["Core/Color/Palette.js"],s["Core/Renderer/RendererRegistry.js"],s["Core/Utilities.js"]],(function(i,s,_,T,S){var C=i.format,P=s.doc,O=S.clamp,M=S.css,R=S.defined,D=S.discardElement,j=S.extend,$=S.fireEvent,U=S.isArray,V=S.isNumber,Z=S.isString,Y=S.merge,X=S.pick,Q=S.splat,ee=S.syncTimeout,te=S.timeUnits;return i=function(){function a(i,s){this.container=void 0,this.crosshairs=[],this.distance=0,this.isHidden=!0,this.isSticky=!1,this.now={},this.options={},this.outside=!1,this.chart=i,this.init(i,s)}return a.prototype.applyFilter=function(){var i=this.chart;i.renderer.definition({tagName:"filter",attributes:{id:"drop-shadow-"+i.index,opacity:.5},children:[{tagName:"feGaussianBlur",attributes:{in:"SourceAlpha",stdDeviation:1}},{tagName:"feOffset",attributes:{dx:1,dy:1}},{tagName:"feComponentTransfer",children:[{tagName:"feFuncA",attributes:{type:"linear",slope:.3}}]},{tagName:"feMerge",children:[{tagName:"feMergeNode"},{tagName:"feMergeNode",attributes:{in:"SourceGraphic"}}]}]})},a.prototype.bodyFormatter=function(i){return i.map((function(i){var s=i.series.tooltipOptions;return(s[(i.point.formatPrefix||"point")+"Formatter"]||i.point.tooltipFormatter).call(i.point,s[(i.point.formatPrefix||"point")+"Format"]||"")}))},a.prototype.cleanSplit=function(i){this.chart.series.forEach((function(s){var _=s&&s.tt;_&&(!_.isActive||i?s.tt=_.destroy():_.isActive=!1)}))},a.prototype.defaultFormatter=function(i){var s=this.points||Q(this),_=[i.tooltipFooterHeaderFormatter(s[0])];return(_=_.concat(i.bodyFormatter(s))).push(i.tooltipFooterHeaderFormatter(s[0],!0)),_},a.prototype.destroy=function(){this.label&&(this.label=this.label.destroy()),this.split&&this.tt&&(this.cleanSplit(this.chart,!0),this.tt=this.tt.destroy()),this.renderer&&(this.renderer=this.renderer.destroy(),D(this.container)),S.clearTimeout(this.hideTimer),S.clearTimeout(this.tooltipTimeout)},a.prototype.getAnchor=function(i,s){var _,T,S=this.chart,C=S.pointer,P=S.inverted,O=S.plotTop,M=S.plotLeft,R=0,D=0;return i=Q(i),this.followPointer&&s?(void 0===s.chartX&&(s=C.normalize(s)),C=[s.chartX-M,s.chartY-O]):i[0].tooltipPos?C=i[0].tooltipPos:(i.forEach((function(i){_=i.series.yAxis,T=i.series.xAxis,R+=i.plotX||0,D+=i.plotLow?(i.plotLow+(i.plotHigh||0))/2:i.plotY||0,T&&_&&(P?(R+=O+S.plotHeight-T.len-T.pos,D+=M+S.plotWidth-_.len-_.pos):(R+=T.pos-M,D+=_.pos-O))})),R/=i.length,D/=i.length,C=[P?S.plotWidth-D:R,P?S.plotHeight-R:D],this.shared&&1<i.length&&s&&(P?C[0]=s.chartX-M:C[1]=s.chartY-O)),C.map(Math.round)},a.prototype.getDateFormat=function(i,s,_,T){var S=this.chart.time,C=S.dateFormat("%m-%d %H:%M:%S.%L",s),P={millisecond:15,second:12,minute:9,hour:6,day:3},O="millisecond";for(M in te){if(i===te.week&&+S.dateFormat("%w",s)===_&&"00:00:00.000"===C.substr(6)){var M="week";break}if(te[M]>i){M=O;break}if(P[M]&&C.substr(P[M])!=="01-01 00:00:00.000".substr(P[M]))break;"week"!==M&&(O=M)}if(M)var R=S.resolveDTLFormat(T[M]).main;return R},a.prototype.getLabel=function(){var i,_=this,S=this.chart.renderer,C=this.chart.styledMode,P=this.options,O="tooltip"+(R(P.className)?" "+P.className:""),D=P.style&&P.style.pointerEvents||(!this.followPointer&&P.stickOnContact?"auto":"none");if(!this.label){if(this.outside){var j=this.chart.options.chart.style,$=T.getRendererType();this.container=i=s.doc.createElement("div"),i.className="highcharts-tooltip-container",M(i,{position:"absolute",top:"1px",pointerEvents:D,zIndex:Math.max(this.options.style&&this.options.style.zIndex||0,(j&&j.zIndex||0)+3)}),s.doc.body.appendChild(i),this.renderer=S=new $(i,0,0,j,void 0,void 0,S.styledMode)}if(this.split?this.label=S.g(O):(this.label=S.label("",0,0,P.shape||"callout",null,null,P.useHTML,null,O).attr({padding:P.padding,r:P.borderRadius}),C||this.label.attr({fill:P.backgroundColor,"stroke-width":P.borderWidth}).css(P.style).css({pointerEvents:D}).shadow(P.shadow)),C&&P.shadow&&(this.applyFilter(),this.label.attr({filter:"url(#drop-shadow-"+this.chart.index+")"})),_.outside&&!_.split){var U=this.label,V=U.xSetter,Z=U.ySetter;U.xSetter=function(s){V.call(U,_.distance),i.style.left=s+"px"},U.ySetter=function(s){Z.call(U,_.distance),i.style.top=s+"px"}}this.label.on("mouseenter",(function(){_.inContact=!0})).on("mouseleave",(function(){var i=_.chart.hoverSeries;_.inContact=!1,i&&i.onMouseOut&&i.onMouseOut()})).attr({zIndex:8}).add()}return this.label},a.prototype.getPosition=function(i,s,_){var T,S=this.chart,C=this.distance,O={},M=S.inverted&&_.h||0,R=this.outside,D=R?P.documentElement.clientWidth-2*C:S.chartWidth,j=R?Math.max(P.body.scrollHeight,P.documentElement.scrollHeight,P.body.offsetHeight,P.documentElement.offsetHeight,P.documentElement.clientHeight):S.chartHeight,$=S.pointer.getChartPosition(),n=function(T){var P="x"===T;return[T,P?D:j,P?i:s].concat(R?[P?i*$.scaleX:s*$.scaleY,P?$.left-C+(_.plotX+S.plotLeft)*$.scaleX:$.top-C+(_.plotY+S.plotTop)*$.scaleY,0,P?D:j]:[P?i:s,P?_.plotX+S.plotLeft:_.plotY+S.plotTop,P?S.plotLeft:S.plotTop,P?S.plotLeft+S.plotWidth:S.plotTop+S.plotHeight])},U=n("y"),V=n("x"),Z=!this.followPointer&&X(_.ttBelow,!S.inverted==!!_.negative),A=function(i,s,_,T,S,P,D){var j=R?"y"===i?C*$.scaleY:C*$.scaleX:C,U=(_-T)/2,V=T<S-C,Y=S+C+T<s,X=S-j-_+U;if(S=S+j-U,Z&&Y)O[i]=S;else if(!Z&&V)O[i]=X;else if(V)O[i]=Math.min(D-T,0>X-M?X:X-M);else{if(!Y)return!1;O[i]=Math.max(P,S+M+_>s?S:S+M)}},J=function(i,s,_,T,S){var P;return S<C||S>s-C?P=!1:O[i]=S<_/2?1:S>s-T/2?s-T-2:S-_/2,P},u=function(i){var s=U;U=V,V=s,T=i},I=function(){!1!==A.apply(0,U)?!1!==J.apply(0,V)||T||(u(!0),I()):T?O.x=O.y=0:(u(!0),I())};return(S.inverted||1<this.len)&&u(),I(),O},a.prototype.getXDateFormat=function(i,s,_){s=s.dateTimeLabelFormats;var T=_&&_.closestPointRange;return(T?this.getDateFormat(T,i.x,_.options.startOfWeek,s):s.day)||s.year},a.prototype.hide=function(i){var s=this;S.clearTimeout(this.hideTimer),i=X(i,this.options.hideDelay,500),this.isHidden||(this.hideTimer=ee((function(){s.getLabel().fadeOut(i?void 0:i),s.isHidden=!0}),i))},a.prototype.init=function(i,s){this.chart=i,this.options=s,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.split=s.split&&!i.inverted&&!i.polar,this.shared=s.shared||this.split,this.outside=X(s.outside,!(!i.scrollablePixelsX&&!i.scrollablePixelsY))},a.prototype.isStickyOnContact=function(){return!(this.followPointer||!this.options.stickOnContact||!this.inContact)},a.prototype.move=function(i,s,_,T){var C=this,P=C.now,O=!1!==C.options.animation&&!C.isHidden&&(1<Math.abs(i-P.x)||1<Math.abs(s-P.y)),M=C.followPointer||1<C.len;j(P,{x:O?(2*P.x+i)/3:i,y:O?(P.y+s)/2:s,anchorX:M?void 0:O?(2*P.anchorX+_)/3:_,anchorY:M?void 0:O?(P.anchorY+T)/2:T}),C.getLabel().attr(P),C.drawTracker(),O&&(S.clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout((function(){C&&C.move(i,s,_,T)}),32))},a.prototype.refresh=function(i,s){var T=this.chart,C=this.options,P=Q(i),O=P[0],M={},R=[],D=C.formatter||this.defaultFormatter;M=this.shared;var j=T.styledMode;if(C.enabled){S.clearTimeout(this.hideTimer),this.followPointer=!this.split&&O.series.tooltipOptions.followPointer;var V=this.getAnchor(i,s),Z=V[0],Y=V[1];if(!M||!U(i)&&i.series&&i.series.noSharedTooltip?M=O.getLabelConfig():(T.pointer.applyInactiveState(P),P.forEach((function(i){i.setState("hover"),R.push(i.getLabelConfig())})),(M={x:O.category,y:O.y}).points=R),this.len=R.length,i=D.call(M,this),D=O.series,this.distance=X(D.tooltipOptions.distance,16),!1===i)this.hide();else{if(this.split)this.renderSplit(i,P);else{if(P=Z,M=Y,s&&T.pointer.isDirectTouch&&(P=s.chartX-T.plotLeft,M=s.chartY-T.plotTop),!T.polar&&!1!==D.options.clip&&!D.shouldShowTooltip(P,M))return void this.hide();s=this.getLabel(),C.style.width&&!j||s.css({width:this.chart.spacingBox.width+"px"}),s.attr({text:i&&i.join?i.join(""):i}),s.removeClass(/highcharts-color-[\d]+/g).addClass("highcharts-color-"+X(O.colorIndex,D.colorIndex)),j||s.attr({stroke:C.borderColor||O.color||D.color||_.neutralColor60}),this.updatePosition({plotX:Z,plotY:Y,negative:O.negative,ttBelow:O.ttBelow,h:V[2]||0})}this.isHidden&&this.label&&this.label.attr({opacity:1}).show(),this.isHidden=!1}$(this,"refresh")}},a.prototype.renderSplit=function(i,T){function b(i,s,_,T,C){return void 0===C&&(C=!0),_?(s=ue?0:me,i=O(i-T/2,oe.left,oe.right-T-(S.outside?de:0))):(s-=he,i=O(i=C?i-T-ie:i+ie,C?i:oe.left,oe.right)),{x:i,y:s}}var S=this,C=S.chart,M=S.chart,R=M.chartWidth,D=M.chartHeight,$=M.plotHeight,U=M.plotLeft,V=M.plotTop,Y=M.pointer,Q=M.scrollablePixelsY;Q=void 0===Q?0:Q;var ee=M.scrollablePixelsX,te=M.scrollingContainer,ne=(te=void 0===te?{scrollLeft:0,scrollTop:0}:te).scrollLeft;te=te.scrollTop;var re=M.styledMode,ie=S.distance,ae=S.options,se=S.options.positioner,oe=S.outside&&"number"!=typeof ee?P.documentElement.getBoundingClientRect():{left:ne,right:ne+R,top:te,bottom:te+D},le=S.getLabel(),ce=this.renderer||C.renderer,ue=!(!C.xAxis[0]||!C.xAxis[0].opposite),de=(C=Y.getChartPosition()).left;C=C.top;var he=V+te,pe=0,me=$-Q;Z(i)&&(i=[!1,i]),i=i.slice(0,T.length+1).reduce((function(i,s,C){if(!1!==s&&""!==s){var P=(C=T[C-1]||{isHeader:!0,plotX:T[0].plotX,plotY:$,series:{}}).isHeader,M=P?S:C.series;s=s.toString();var R=M.tt,D=C.isHeader,j=C.series,Z="highcharts-color-"+X(C.colorIndex,j.colorIndex,"none");if(R||(R={padding:ae.padding,r:ae.borderRadius},re||(R.fill=ae.backgroundColor,R["stroke-width"]=ae.borderWidth),R=ce.label("",0,0,ae[D?"headerShape":"shape"]||"callout",void 0,void 0,ae.useHTML).addClass((D?"highcharts-tooltip-header ":"")+"highcharts-tooltip-box "+Z).attr(R).add(le)),R.isActive=!0,R.attr({text:s}),re||R.css(ae.style).shadow(ae.shadow).attr({stroke:ae.borderColor||C.color||j.color||_.neutralColor80}),s=(D=(M=M.tt=R).getBBox()).width+M.strokeWidth(),P&&(pe=D.height,me+=pe,ue&&(he-=pe)),j=void 0===(j=C.plotX)?0:j,Z=void 0===(Z=C.plotY)?0:Z,R=C.series,C.isHeader){j=U+j;var Y=V+$/2}else{var Q=R.xAxis,ee=R.yAxis;j=Q.pos+O(j,-ie,Q.len+ie),R.shouldShowTooltip(0,ee.pos-V+Z,{ignoreX:!0})&&(Y=ee.pos+Z)}j=O(j,oe.left-ie,oe.right+ie),"number"==typeof Y?(D=D.height+1,Z=se?se.call(S,s,D,C):b(j,Y,P,s),i.push({align:se?0:void 0,anchorX:j,anchorY:Y,boxWidth:s,point:C,rank:X(Z.rank,P?1:0),size:D,target:Z.y,tt:M,x:Z.x})):M.isActive=!1}return i}),[]),!se&&i.some((function(i){var s=(S.outside?de:0)+i.anchorX;return s<oe.left&&s+i.boxWidth<oe.right||s<de-oe.left+i.boxWidth&&oe.right-s>s}))&&(i=i.map((function(i){var s=b(i.anchorX,i.anchorY,i.point.isHeader,i.boxWidth,!1);return j(i,{target:s.y,x:s.x})}))),S.cleanSplit(),s.distribute(i,me);var fe=de,ge=de;i.forEach((function(i){var s=i.x,_=i.boxWidth;(i=i.isHeader)||(S.outside&&de+s<fe&&(fe=de+s),!i&&S.outside&&fe+_>ge&&(ge=de+s))})),i.forEach((function(i){var s=i.x,_=i.anchorX,T=i.pos,C=i.point.isHeader;if(T={visibility:void 0===T?"hidden":"inherit",x:s,y:T+he,anchorX:_,anchorY:i.anchorY},S.outside&&s<_){var P=de-fe;0<P&&(C||(T.x=s+P,T.anchorX=_+P),C&&(T.x=(ge-fe)/2,T.anchorX=_+P))}i.tt.attr(T)})),i=S.container,Q=S.renderer,S.outside&&i&&Q&&(M=le.getBBox(),Q.setSize(M.width+M.x,M.height+M.y,!1),i.style.left=fe+"px",i.style.top=C+"px")},a.prototype.drawTracker=function(){if(this.followPointer||!this.options.stickOnContact)this.tracker&&this.tracker.destroy();else{var i=this.chart,s=this.label,_=this.shared?i.hoverPoints:i.hoverPoint;if(s&&_){var T={x:0,y:0,width:0,height:0};_=this.getAnchor(_);var S=s.getBBox();_[0]+=i.plotLeft-s.translateX,_[1]+=i.plotTop-s.translateY,T.x=Math.min(0,_[0]),T.y=Math.min(0,_[1]),T.width=0>_[0]?Math.max(Math.abs(_[0]),S.width-_[0]):Math.max(Math.abs(_[0]),S.width),T.height=0>_[1]?Math.max(Math.abs(_[1]),S.height-Math.abs(_[1])):Math.max(Math.abs(_[1]),S.height),this.tracker?this.tracker.attr(T):(this.tracker=s.renderer.rect(T).addClass("highcharts-tracker").add(s),i.styledMode||this.tracker.attr({fill:"rgba(0,0,0,0)"}))}}},a.prototype.styledModeFormat=function(i){return i.replace('style="font-size: 10px"','class="highcharts-header"').replace(/style="color:{(point|series)\.color}"/g,'class="highcharts-color-{$1.colorIndex}"')},a.prototype.tooltipFooterHeaderFormatter=function(i,s){var _=s?"footer":"header",T=i.series,S=T.tooltipOptions,P=S.xDateFormat,O=T.xAxis,M=O&&"datetime"===O.options.type&&V(i.key),R=S[_+"Format"];return $(this,"headerFormatter",s={isFooter:s,labelConfig:i},(function(s){M&&!P&&(P=this.getXDateFormat(i,S,O)),M&&P&&(i.point&&i.point.tooltipDateKeys||["key"]).forEach((function(i){R=R.replace("{point."+i+"}","{point."+i+":"+P+"}")})),T.chart.styledMode&&(R=this.styledModeFormat(R)),s.text=C(R,{point:i,series:T},this.chart)})),s.text},a.prototype.update=function(i){this.destroy(),Y(!0,this.chart.options.tooltip.userOptions,i),this.init(this.chart,Y(!0,this.options,i))},a.prototype.updatePosition=function(i){var s=this.chart,_=s.pointer,T=this.getLabel(),S=i.plotX+s.plotLeft;if(s=i.plotY+s.plotTop,_=_.getChartPosition(),i=(this.options.positioner||this.getPosition).call(this,T.width,T.height,i),this.outside){var C=(this.options.borderWidth||0)+2*this.distance;this.renderer.setSize(T.width+C,T.height+C,!1),1===_.scaleX&&1===_.scaleY||(M(this.container,{transform:"scale("+_.scaleX+", "+_.scaleY+")"}),S*=_.scaleX,s*=_.scaleY),S+=_.left-i.x,s+=_.top-i.y}this.move(Math.round(i.x),Math.round(i.y||0),S,s)},a}(),s.Tooltip=i,s.Tooltip})),L(s,"Core/Pointer.js",[s["Core/Color/Color.js"],s["Core/Globals.js"],s["Core/Color/Palette.js"],s["Core/Tooltip.js"],s["Core/Utilities.js"]],(function(i,s,_,T,S){var C=i.parse,P=s.charts,O=s.noop,M=S.addEvent,R=S.attr,D=S.css,j=S.defined,$=S.extend,U=S.find,V=S.fireEvent,Z=S.isNumber,Y=S.isObject,X=S.objectEach,Q=S.offset,ee=S.pick,te=S.splat;return i=function(){function a(i,s){this.lastValidTouch={},this.pinchDown=[],this.runChartClick=!1,this.eventsToUnbind=[],this.chart=i,this.hasDragged=!1,this.options=s,this.init(i,s)}return a.prototype.applyInactiveState=function(i){var s,_=[];(i||[]).forEach((function(i){s=i.series,_.push(s),s.linkedParent&&_.push(s.linkedParent),s.linkedSeries&&(_=_.concat(s.linkedSeries)),s.navigatorSeries&&_.push(s.navigatorSeries)})),this.chart.series.forEach((function(i){-1===_.indexOf(i)?i.setState("inactive",!0):i.options.inactiveOtherPoints&&i.setAllPointsToState("inactive")}))},a.prototype.destroy=function(){var i=this;this.eventsToUnbind.forEach((function(i){return i()})),this.eventsToUnbind=[],s.chartCount||(a.unbindDocumentMouseUp&&(a.unbindDocumentMouseUp=a.unbindDocumentMouseUp()),a.unbindDocumentTouchEnd&&(a.unbindDocumentTouchEnd=a.unbindDocumentTouchEnd())),clearInterval(i.tooltipTimeout),X(i,(function(s,_){i[_]=void 0}))},a.prototype.drag=function(i){var s=this.chart,T=s.options.chart,S=this.zoomHor,P=this.zoomVert,O=s.plotLeft,M=s.plotTop,R=s.plotWidth,D=s.plotHeight,j=this.mouseDownX||0,$=this.mouseDownY||0,U=Y(T.panning)?T.panning&&T.panning.enabled:T.panning,V=T.panKey&&i[T.panKey+"Key"],Z=i.chartX,X=i.chartY,Q=this.selectionMarker;if((!Q||!Q.touch)&&(Z<O?Z=O:Z>O+R&&(Z=O+R),X<M?X=M:X>M+D&&(X=M+D),this.hasDragged=Math.sqrt(Math.pow(j-Z,2)+Math.pow($-X,2)),10<this.hasDragged)){var ee=s.isInsidePlot(j-O,$-M,{visiblePlotOnly:!0});s.hasCartesianSeries&&(this.zoomX||this.zoomY)&&ee&&!V&&!Q&&(this.selectionMarker=Q=s.renderer.rect(O,M,S?1:R,P?1:D,0).attr({class:"highcharts-selection-marker",zIndex:7}).add(),s.styledMode||Q.attr({fill:T.selectionMarkerFill||C(_.highlightColor80).setOpacity(.25).get()})),Q&&S&&(S=Z-j,Q.attr({width:Math.abs(S),x:(0<S?0:S)+j})),Q&&P&&(S=X-$,Q.attr({height:Math.abs(S),y:(0<S?0:S)+$})),ee&&!Q&&U&&s.pan(i,T.panning)}},a.prototype.dragStart=function(i){var s=this.chart;s.mouseIsDown=i.type,s.cancelClick=!1,s.mouseDownX=this.mouseDownX=i.chartX,s.mouseDownY=this.mouseDownY=i.chartY},a.prototype.drop=function(i){var s=this,_=this.chart,T=this.hasPinched;if(this.selectionMarker){var S,C={originalEvent:i,xAxis:[],yAxis:[]},P=this.selectionMarker,O=P.attr?P.attr("x"):P.x,M=P.attr?P.attr("y"):P.y,R=P.attr?P.attr("width"):P.width,U=P.attr?P.attr("height"):P.height;(this.hasDragged||T)&&(_.axes.forEach((function(_){if(_.zoomEnabled&&j(_.min)&&(T||s[{xAxis:"zoomX",yAxis:"zoomY"}[_.coll]])&&Z(O)&&Z(M)){var P=_.horiz,D="touchend"===i.type?_.minPixelPadding:0,$=_.toValue((P?O:M)+D);P=_.toValue((P?O+R:M+U)-D),C[_.coll].push({axis:_,min:Math.min($,P),max:Math.max($,P)}),S=!0}})),S&&V(_,"selection",C,(function(i){_.zoom($(i,T?{animation:!1}:null))}))),Z(_.index)&&(this.selectionMarker=this.selectionMarker.destroy()),T&&this.scaleGroups()}_&&Z(_.index)&&(D(_.container,{cursor:_._cursor}),_.cancelClick=10<this.hasDragged,_.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},a.prototype.findNearestKDPoint=function(i,s,_){var T,S=this.chart,C=S.hoverPoint;return S=S.tooltip,C&&S&&S.isStickyOnContact()?C:(i.forEach((function(i){var S=!(i.noSharedTooltip&&s)&&0>i.options.findNearestPointBy.indexOf("y");if(i=i.searchPoint(_,S),(S=Y(i,!0)&&i.series)&&!(S=!Y(T,!0))){S=T.distX-i.distX;var C=T.dist-i.dist,P=(i.series.group&&i.series.group.zIndex)-(T.series.group&&T.series.group.zIndex);S=0<(0!==S&&s?S:0!==C?C:0!==P?P:T.series.index>i.series.index?-1:1)}S&&(T=i)})),T)},a.prototype.getChartCoordinatesFromPoint=function(i,s){var _=i.series,T=_.xAxis;_=_.yAxis;var S=i.shapeArgs;if(T&&_){var C=ee(i.clientX,i.plotX),P=i.plotY||0;return i.isNode&&S&&Z(S.x)&&Z(S.y)&&(C=S.x,P=S.y),s?{chartX:_.len+_.pos-P,chartY:T.len+T.pos-C}:{chartX:C+T.pos,chartY:P+_.pos}}if(S&&S.x&&S.y)return{chartX:S.x,chartY:S.y}},a.prototype.getChartPosition=function(){if(this.chartPosition)return this.chartPosition;var i=this.chart.container,s=Q(i);this.chartPosition={left:s.left,top:s.top,scaleX:1,scaleY:1};var _=i.offsetWidth;return i=i.offsetHeight,2<_&&2<i&&(this.chartPosition.scaleX=s.width/_,this.chartPosition.scaleY=s.height/i),this.chartPosition},a.prototype.getCoordinates=function(i){var s={xAxis:[],yAxis:[]};return this.chart.axes.forEach((function(_){s[_.isXAxis?"xAxis":"yAxis"].push({axis:_,value:_.toValue(i[_.horiz?"chartX":"chartY"])})})),s},a.prototype.getHoverData=function(i,s,_,T,S,C){var P=[];T=!(!T||!i);var O={chartX:C?C.chartX:void 0,chartY:C?C.chartY:void 0,shared:S};V(this,"beforeGetHoverData",O);var M=s&&!s.stickyTracking?[s]:_.filter((function(i){return O.filter?O.filter(i):i.visible&&!(!S&&i.directTouch)&&ee(i.options.enableMouseTracking,!0)&&i.stickyTracking})),R=T||!C?i:this.findNearestKDPoint(M,S,C);return s=R&&R.series,R&&(S&&!s.noSharedTooltip?(M=_.filter((function(i){return O.filter?O.filter(i):i.visible&&!(!S&&i.directTouch)&&ee(i.options.enableMouseTracking,!0)&&!i.noSharedTooltip}))).forEach((function(i){var s=U(i.points,(function(i){return i.x===R.x&&!i.isNull}));Y(s)&&(i.chart.isBoosting&&(s=i.getPoint(s)),P.push(s))})):P.push(R)),V(this,"afterGetHoverData",O={hoverPoint:R}),{hoverPoint:O.hoverPoint,hoverSeries:s,hoverPoints:P}},a.prototype.getPointFromEvent=function(i){i=i.target;for(var s;i&&!s;)s=i.point,i=i.parentNode;return s},a.prototype.onTrackerMouseOut=function(i){i=i.relatedTarget||i.toElement;var s=this.chart.hoverSeries;this.isDirectTouch=!1,!s||!i||s.stickyTracking||this.inClass(i,"highcharts-tooltip")||this.inClass(i,"highcharts-series-"+s.index)&&this.inClass(i,"highcharts-tracker")||s.onMouseOut()},a.prototype.inClass=function(i,s){for(var _;i;){if(_=R(i,"class")){if(-1!==_.indexOf(s))return!0;if(-1!==_.indexOf("highcharts-container"))return!1}i=i.parentNode}},a.prototype.init=function(i,s){this.options=s,this.chart=i,this.runChartClick=!(!s.chart.events||!s.chart.events.click),this.pinchDown=[],this.lastValidTouch={},T&&(i.tooltip=new T(i,s.tooltip),this.followTouchMove=ee(s.tooltip.followTouchMove,!0)),this.setDOMEvents()},a.prototype.normalize=function(i,s){var _=i.touches,T=_?_.length?_.item(0):ee(_.changedTouches,i.changedTouches)[0]:i;return s||(s=this.getChartPosition()),_=T.pageX-s.left,T=T.pageY-s.top,_/=s.scaleX,T/=s.scaleY,$(i,{chartX:Math.round(_),chartY:Math.round(T)})},a.prototype.onContainerClick=function(i){var s=this.chart,_=s.hoverPoint;i=this.normalize(i);var T=s.plotLeft,S=s.plotTop;s.cancelClick||(_&&this.inClass(i.target,"highcharts-tracker")?(V(_.series,"click",$(i,{point:_})),s.hoverPoint&&_.firePointEvent("click",i)):($(i,this.getCoordinates(i)),s.isInsidePlot(i.chartX-T,i.chartY-S,{visiblePlotOnly:!0})&&V(s,"click",i)))},a.prototype.onContainerMouseDown=function(i){var _=1==(1&(i.buttons||i.button));i=this.normalize(i),s.isFirefox&&0!==i.button&&this.onContainerMouseMove(i),(void 0===i.button||_)&&(this.zoomOption(i),_&&i.preventDefault&&i.preventDefault(),this.dragStart(i))},a.prototype.onContainerMouseLeave=function(i){var s=P[ee(a.hoverChartIndex,-1)],_=this.chart.tooltip;i=this.normalize(i),s&&(i.relatedTarget||i.toElement)&&(s.pointer.reset(),s.pointer.chartPosition=void 0),_&&!_.isHidden&&this.reset()},a.prototype.onContainerMouseEnter=function(i){delete this.chartPosition},a.prototype.onContainerMouseMove=function(i){var s=this.chart;i=this.normalize(i),this.setHoverChartIndex(),i.preventDefault||(i.returnValue=!1),("mousedown"===s.mouseIsDown||this.touchSelect(i))&&this.drag(i),s.openMenu||!this.inClass(i.target,"highcharts-tracker")&&!s.isInsidePlot(i.chartX-s.plotLeft,i.chartY-s.plotTop,{visiblePlotOnly:!0})||(this.inClass(i.target,"highcharts-no-tooltip")?this.reset(!1,0):this.runPointActions(i))},a.prototype.onDocumentTouchEnd=function(i){var s=P[ee(a.hoverChartIndex,-1)];s&&s.pointer.drop(i)},a.prototype.onContainerTouchMove=function(i){this.touchSelect(i)?this.onContainerMouseMove(i):this.touch(i)},a.prototype.onContainerTouchStart=function(i){this.touchSelect(i)?this.onContainerMouseDown(i):(this.zoomOption(i),this.touch(i,!0))},a.prototype.onDocumentMouseMove=function(i){var s=this.chart,_=this.chartPosition;i=this.normalize(i,_);var T=s.tooltip;!_||T&&T.isStickyOnContact()||s.isInsidePlot(i.chartX-s.plotLeft,i.chartY-s.plotTop,{visiblePlotOnly:!0})||this.inClass(i.target,"highcharts-tracker")||this.reset()},a.prototype.onDocumentMouseUp=function(i){var s=P[ee(a.hoverChartIndex,-1)];s&&s.pointer.drop(i)},a.prototype.pinch=function(i){var s=this,_=s.chart,T=s.pinchDown,S=i.touches||[],C=S.length,P=s.lastValidTouch,M=s.hasZoom,R={},D=1===C&&(s.inClass(i.target,"highcharts-tracker")&&_.runTrackerClick||s.runChartClick),j={},U=s.selectionMarker;1<C&&(s.initiated=!0),M&&s.initiated&&!D&&!1!==i.cancelable&&i.preventDefault(),[].map.call(S,(function(i){return s.normalize(i)})),"touchstart"===i.type?([].forEach.call(S,(function(i,s){T[s]={chartX:i.chartX,chartY:i.chartY}})),P.x=[T[0].chartX,T[1]&&T[1].chartX],P.y=[T[0].chartY,T[1]&&T[1].chartY],_.axes.forEach((function(i){if(i.zoomEnabled){var s=_.bounds[i.horiz?"h":"v"],T=i.minPixelPadding,S=i.toPixels(Math.min(ee(i.options.min,i.dataMin),i.dataMin)),C=i.toPixels(Math.max(ee(i.options.max,i.dataMax),i.dataMax)),P=Math.max(S,C);s.min=Math.min(i.pos,Math.min(S,C)-T),s.max=Math.max(i.pos+i.len,P+T)}})),s.res=!0):s.followTouchMove&&1===C?this.runPointActions(s.normalize(i)):T.length&&(U||(s.selectionMarker=U=$({destroy:O,touch:!0},_.plotBox)),s.pinchTranslate(T,S,R,U,j,P),s.hasPinched=M,s.scaleGroups(R,j),s.res&&(s.res=!1,this.reset(!1,0)))},a.prototype.pinchTranslate=function(i,s,_,T,S,C){this.zoomHor&&this.pinchTranslateDirection(!0,i,s,_,T,S,C),this.zoomVert&&this.pinchTranslateDirection(!1,i,s,_,T,S,C)},a.prototype.pinchTranslateDirection=function(i,s,_,T,S,C,P,O){var M=this.chart,R=i?"x":"y",D=i?"X":"Y",j="chart"+D,$=i?"width":"height",U=M["plot"+(i?"Left":"Top")],V=M.inverted,Z=M.bounds[i?"h":"v"],Y=1===s.length,X=s[0][j],Q=!Y&&s[1][j];s=function(){"number"==typeof ie&&20<Math.abs(X-Q)&&(ne=O||Math.abs(re-ie)/Math.abs(X-Q)),te=(U-re)/ne+X,ee=M["plot"+(i?"Width":"Height")]/ne};var ee,te,ne=O||1,re=_[0][j],ie=!Y&&_[1][j];if(s(),(_=te)<Z.min){_=Z.min;var ae=!0}else _+ee>Z.max&&(_=Z.max-ee,ae=!0);ae?(re-=.8*(re-P[R][0]),"number"==typeof ie&&(ie-=.8*(ie-P[R][1])),s()):P[R]=[re,ie],V||(C[R]=te-U,C[$]=ee),C=V?1/ne:ne,S[$]=ee,S[R]=_,T[V?i?"scaleY":"scaleX":"scale"+D]=ne,T["translate"+D]=C*U+(re-C*X)},a.prototype.reset=function(i,s){var _=this.chart,T=_.hoverSeries,S=_.hoverPoint,C=_.hoverPoints,P=_.tooltip,O=P&&P.shared?C:S;i&&O&&te(O).forEach((function(s){s.series.isCartesian&&void 0===s.plotX&&(i=!1)})),i?P&&O&&te(O).length&&(P.refresh(O),P.shared&&C?C.forEach((function(i){i.setState(i.state,!0),i.series.isCartesian&&(i.series.xAxis.crosshair&&i.series.xAxis.drawCrosshair(null,i),i.series.yAxis.crosshair&&i.series.yAxis.drawCrosshair(null,i))})):S&&(S.setState(S.state,!0),_.axes.forEach((function(i){i.crosshair&&S.series[i.coll]===i&&i.drawCrosshair(null,S)})))):(S&&S.onMouseOut(),C&&C.forEach((function(i){i.setState()})),T&&T.onMouseOut(),P&&P.hide(s),this.unDocMouseMove&&(this.unDocMouseMove=this.unDocMouseMove()),_.axes.forEach((function(i){i.hideCrosshair()})),this.hoverX=_.hoverPoints=_.hoverPoint=null)},a.prototype.runPointActions=function(i,s){var _=this.chart,T=_.tooltip&&_.tooltip.options.enabled?_.tooltip:void 0,S=!!T&&T.shared,C=s||_.hoverPoint,O=C&&C.series||_.hoverSeries;C=(s=this.getHoverData(C,O,_.series,(!i||"touchmove"!==i.type)&&(!!s||O&&O.directTouch&&this.isDirectTouch),S,i)).hoverPoint,O=s.hoverSeries;var R=s.hoverPoints;if(s=O&&O.tooltipOptions.followPointer&&!O.tooltipOptions.split,S=S&&O&&!O.noSharedTooltip,C&&(C!==_.hoverPoint||T&&T.isHidden)){if((_.hoverPoints||[]).forEach((function(i){-1===R.indexOf(i)&&i.setState()})),_.hoverSeries!==O&&O.onMouseOver(),this.applyInactiveState(R),(R||[]).forEach((function(i){i.setState("hover")})),_.hoverPoint&&_.hoverPoint.firePointEvent("mouseOut"),!C.series)return;_.hoverPoints=R,_.hoverPoint=C,C.firePointEvent("mouseOver"),T&&T.refresh(S?R:C,i)}else s&&T&&!T.isHidden&&(C=T.getAnchor([{}],i),_.isInsidePlot(C[0],C[1],{visiblePlotOnly:!0})&&T.updatePosition({plotX:C[0],plotY:C[1]}));this.unDocMouseMove||(this.unDocMouseMove=M(_.container.ownerDocument,"mousemove",(function(i){var s=P[a.hoverChartIndex];s&&s.pointer.onDocumentMouseMove(i)})),this.eventsToUnbind.push(this.unDocMouseMove)),_.axes.forEach((function(s){var T,S=ee((s.crosshair||{}).snap,!0);S&&((T=_.hoverPoint)&&T.series[s.coll]===s||(T=U(R,(function(i){return i.series[s.coll]===s})))),T||!S?s.drawCrosshair(i,T):s.hideCrosshair()}))},a.prototype.scaleGroups=function(i,s){var _=this.chart;_.series.forEach((function(T){var S=i||T.getPlotBox();T.xAxis&&T.xAxis.zoomEnabled&&T.group&&(T.group.attr(S),T.markerGroup&&(T.markerGroup.attr(S),T.markerGroup.clip(s?_.clipRect:null)),T.dataLabelsGroup&&T.dataLabelsGroup.attr(S))})),_.clipRect.attr(s||_.clipBox)},a.prototype.setDOMEvents=function(){var i=this,_=this.chart.container,T=_.ownerDocument;_.onmousedown=this.onContainerMouseDown.bind(this),_.onmousemove=this.onContainerMouseMove.bind(this),_.onclick=this.onContainerClick.bind(this),this.eventsToUnbind.push(M(_,"mouseenter",this.onContainerMouseEnter.bind(this))),this.eventsToUnbind.push(M(_,"mouseleave",this.onContainerMouseLeave.bind(this))),a.unbindDocumentMouseUp||(a.unbindDocumentMouseUp=M(T,"mouseup",this.onDocumentMouseUp.bind(this)));for(var S=this.chart.renderTo.parentElement;S&&"BODY"!==S.tagName;)this.eventsToUnbind.push(M(S,"scroll",(function(){delete i.chartPosition}))),S=S.parentElement;s.hasTouch&&(this.eventsToUnbind.push(M(_,"touchstart",this.onContainerTouchStart.bind(this),{passive:!1})),this.eventsToUnbind.push(M(_,"touchmove",this.onContainerTouchMove.bind(this),{passive:!1})),a.unbindDocumentTouchEnd||(a.unbindDocumentTouchEnd=M(T,"touchend",this.onDocumentTouchEnd.bind(this),{passive:!1})))},a.prototype.setHoverChartIndex=function(){var i=this.chart,_=s.charts[ee(a.hoverChartIndex,-1)];_&&_!==i&&_.pointer.onContainerMouseLeave({relatedTarget:!0}),_&&_.mouseIsDown||(a.hoverChartIndex=i.index)},a.prototype.touch=function(i,s){var _=this.chart;if(this.setHoverChartIndex(),1===i.touches.length)if(i=this.normalize(i),_.isInsidePlot(i.chartX-_.plotLeft,i.chartY-_.plotTop,{visiblePlotOnly:!0})&&!_.openMenu){if(s&&this.runPointActions(i),"touchmove"===i.type)var T=!!(s=this.pinchDown)[0]&&4<=Math.sqrt(Math.pow(s[0].chartX-i.chartX,2)+Math.pow(s[0].chartY-i.chartY,2));ee(T,!0)&&this.pinch(i)}else s&&this.reset();else 2===i.touches.length&&this.pinch(i)},a.prototype.touchSelect=function(i){return!(!this.chart.options.chart.zoomBySingleTouch||!i.touches||1!==i.touches.length)},a.prototype.zoomOption=function(i){var s=this.chart,_=s.options.chart;s=s.inverted;var T=_.zoomType||"";/touch/.test(i.type)&&(T=ee(_.pinchType,T)),this.zoomX=i=/x/.test(T),this.zoomY=_=/y/.test(T),this.zoomHor=i&&!s||_&&s,this.zoomVert=_&&!s||i&&s,this.hasZoom=i||_},a}(),i})),L(s,"Core/MSPointer.js",[s["Core/Globals.js"],s["Core/Pointer.js"],s["Core/Utilities.js"]],(function(i,s,_){function v(){var i=[];return i.item=function(i){return this[i]},D($,(function(s){i.push({pageX:s.pageX,pageY:s.pageY,target:s.target})})),i}function x(i,_,T,C){var O=S[s.hoverChartIndex||NaN];"touch"!==i.pointerType&&i.pointerType!==i.MSPOINTER_TYPE_TOUCH||!O||(O=O.pointer,C(i),O[_]({type:T,target:i.currentTarget,preventDefault:P,touches:v()}))}var T=this&&this.__extends||function(){var a=function(i,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var _ in s)s.hasOwnProperty(_)&&(i[_]=s[_])},a(i,s)};return function(i,s){function f(){this.constructor=i}a(i,s),i.prototype=null===s?Object.create(s):(f.prototype=s.prototype,new f)}}(),S=i.charts,C=i.doc,P=i.noop,O=i.win,M=_.addEvent,R=_.css,D=_.objectEach,j=_.removeEvent,$={},U=!!O.PointerEvent;return function(s){function l(){return null!==s&&s.apply(this,arguments)||this}return T(l,s),l.isRequired=function(){return!(i.hasTouch||!O.PointerEvent&&!O.MSPointerEvent)},l.prototype.batchMSEvents=function(i){i(this.chart.container,U?"pointerdown":"MSPointerDown",this.onContainerPointerDown),i(this.chart.container,U?"pointermove":"MSPointerMove",this.onContainerPointerMove),i(C,U?"pointerup":"MSPointerUp",this.onDocumentPointerUp)},l.prototype.destroy=function(){this.batchMSEvents(j),s.prototype.destroy.call(this)},l.prototype.init=function(i,_){s.prototype.init.call(this,i,_),this.hasZoom&&R(i.container,{"-ms-touch-action":"none","touch-action":"none"})},l.prototype.onContainerPointerDown=function(i){x(i,"onContainerTouchStart","touchstart",(function(i){$[i.pointerId]={pageX:i.pageX,pageY:i.pageY,target:i.currentTarget}}))},l.prototype.onContainerPointerMove=function(i){x(i,"onContainerTouchMove","touchmove",(function(i){$[i.pointerId]={pageX:i.pageX,pageY:i.pageY},$[i.pointerId].target||($[i.pointerId].target=i.currentTarget)}))},l.prototype.onDocumentPointerUp=function(i){x(i,"onDocumentTouchEnd","touchend",(function(i){delete $[i.pointerId]}))},l.prototype.setDOMEvents=function(){s.prototype.setDOMEvents.call(this),(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(M)},l}(s)})),L(s,"Core/Series/Point.js",[s["Core/Renderer/HTML/AST.js"],s["Core/Animation/AnimationUtilities.js"],s["Core/FormatUtilities.js"],s["Core/Globals.js"],s["Core/DefaultOptions.js"],s["Core/Utilities.js"]],(function(i,s,_,T,S,C){var P=s.animObject,O=_.format,M=S.defaultOptions,R=C.addEvent,D=C.defined,j=C.erase,$=C.extend,U=C.fireEvent,V=C.getNestedProperty,Z=C.isArray,Y=C.isFunction,X=C.isNumber,Q=C.isObject,ee=C.merge,te=C.objectEach,ne=C.pick,re=C.syncTimeout,ie=C.removeEvent,ae=C.uniqueKey;return s=function(){function g(){this.colorIndex=this.category=void 0,this.formatPrefix="point",this.id=void 0,this.isNull=!1,this.percentage=this.options=this.name=void 0,this.selected=!1,this.total=this.series=void 0,this.visible=!0,this.x=void 0}return g.prototype.animateBeforeDestroy=function(){var i,s=this,_={x:s.startXPos,opacity:0},T=s.getGraphicalProps();T.singular.forEach((function(T){i="dataLabel"===T,s[T]=s[T].animate(i?{x:s[T].startXPos,y:s[T].startYPos,opacity:0}:_)})),T.plural.forEach((function(i){s[i].forEach((function(i){i.element&&i.animate($({x:s.startXPos},i.startYPos?{x:i.startXPos,y:i.startYPos}:{}))}))}))},g.prototype.applyOptions=function(i,s){var _=this.series,T=_.options.pointValKey||_.pointValKey;return i=g.prototype.optionsToObject.call(this,i),$(this,i),this.options=this.options?$(this.options,i):i,i.group&&delete this.group,i.dataLabels&&delete this.dataLabels,T&&(this.y=g.prototype.getNestedProperty.call(this,T)),this.formatPrefix=(this.isNull=ne(this.isValid&&!this.isValid(),null===this.x||!X(this.y)))?"null":"point",this.selected&&(this.state="select"),"name"in this&&void 0===s&&_.xAxis&&_.xAxis.hasNames&&(this.x=_.xAxis.nameToX(this)),void 0===this.x&&_&&(this.x=void 0===s?_.autoIncrement(this):s),this},g.prototype.destroy=function(){function a(){for(T in(i.graphic||i.dataLabel||i.dataLabels)&&(ie(i),i.destroyElements()),i)i[T]=null}var i=this,s=i.series,_=s.chart;s=s.options.dataSorting;var T,S=_.hoverPoints,C=P(i.series.chart.renderer.globalAnimation);i.legendItem&&_.legend.destroyItem(i),S&&(i.setState(),j(S,i),S.length||(_.hoverPoints=null)),i===_.hoverPoint&&i.onMouseOut(),s&&s.enabled?(this.animateBeforeDestroy(),re(a,C.duration)):a(),_.pointCount--},g.prototype.destroyElements=function(i){var s=this;(i=s.getGraphicalProps(i)).singular.forEach((function(i){s[i]=s[i].destroy()})),i.plural.forEach((function(i){s[i].forEach((function(i){i.element&&i.destroy()})),delete s[i]}))},g.prototype.firePointEvent=function(i,s,_){var T=this,S=this.series.options;(S.point.events[i]||T.options&&T.options.events&&T.options.events[i])&&T.importEvents(),"click"===i&&S.allowPointSelect&&(_=function(i){T.select&&T.select(null,i.ctrlKey||i.metaKey||i.shiftKey)}),U(T,i,s,_)},g.prototype.getClassName=function(){return"highcharts-point"+(this.selected?" highcharts-point-select":"")+(this.negative?" highcharts-negative":"")+(this.isNull?" highcharts-null-point":"")+(void 0!==this.colorIndex?" highcharts-color-"+this.colorIndex:"")+(this.options.className?" "+this.options.className:"")+(this.zone&&this.zone.className?" "+this.zone.className.replace("highcharts-negative",""):"")},g.prototype.getGraphicalProps=function(i){var s,_=this,T=[],S={singular:[],plural:[]};for((i=i||{graphic:1,dataLabel:1}).graphic&&T.push("graphic","upperGraphic","shadowGroup"),i.dataLabel&&T.push("dataLabel","dataLabelUpper","connector"),s=T.length;s--;){var C=T[s];_[C]&&S.singular.push(C)}return["dataLabel","connector"].forEach((function(s){var T=s+"s";i[s]&&_[T]&&S.plural.push(T)})),S},g.prototype.getLabelConfig=function(){return{x:this.category,y:this.y,color:this.color,colorIndex:this.colorIndex,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},g.prototype.getNestedProperty=function(i){if(i)return 0===i.indexOf("custom.")?V(i,this.options):this[i]},g.prototype.getZone=function(){var i=this.series,s=i.zones;i=i.zoneAxis||"y";var _,T=0;for(_=s[T];this[i]>=_.value;)_=s[++T];return this.nonZonedColor||(this.nonZonedColor=this.color),this.color=_&&_.color&&!this.options.color?_.color:this.nonZonedColor,_},g.prototype.hasNewShapeType=function(){return(this.graphic&&(this.graphic.symbolName||this.graphic.element.nodeName))!==this.shapeType},g.prototype.init=function(i,s,_){return this.series=i,this.applyOptions(s,_),this.id=D(this.id)?this.id:ae(),this.resolveColor(),i.chart.pointCount++,U(this,"afterInit"),this},g.prototype.optionsToObject=function(i){var s={},_=this.series,T=_.options.keys,S=T||_.pointArrayMap||["y"],C=S.length,P=0,O=0;if(X(i)||null===i)s[S[0]]=i;else if(Z(i))for(!T&&i.length>C&&("string"==(_=typeof i[0])?s.name=i[0]:"number"===_&&(s.x=i[0]),P++);O<C;)T&&void 0===i[P]||(0<S[O].indexOf(".")?g.prototype.setNestedProperty(s,i[P],S[O]):s[S[O]]=i[P]),P++,O++;else"object"==typeof i&&(s=i,i.dataLabels&&(_._hasPointLabels=!0),i.marker&&(_._hasPointMarkers=!0));return s},g.prototype.resolveColor=function(){var i=this.series,s=i.chart.options.chart.colorCount,_=i.chart.styledMode;if(delete this.nonZonedColor,i.options.colorByPoint){if(!_){var T=(s=i.options.colors||i.chart.options.colors)[i.colorCounter];s=s.length}_=i.colorCounter,i.colorCounter++,i.colorCounter===s&&(i.colorCounter=0)}else _||(T=i.color),_=i.colorIndex;this.colorIndex=ne(this.options.colorIndex,_),this.color=ne(this.options.color,T)},g.prototype.setNestedProperty=function(i,s,_){return _.split(".").reduce((function(i,_,T,S){return i[_]=S.length-1===T?s:Q(i[_],!0)?i[_]:{},i[_]}),i),i},g.prototype.tooltipFormatter=function(i){var s=this.series,_=s.tooltipOptions,T=ne(_.valueDecimals,""),S=_.valuePrefix||"",C=_.valueSuffix||"";return s.chart.styledMode&&(i=s.chart.tooltip.styledModeFormat(i)),(s.pointArrayMap||["y"]).forEach((function(s){s="{point."+s,(S||C)&&(i=i.replace(RegExp(s+"}","g"),S+s+"}"+C)),i=i.replace(RegExp(s+"}","g"),s+":,."+T+"f}")})),O(i,{point:this,series:this.series},s.chart)},g.prototype.update=function(i,s,_,T){function g(){C.applyOptions(i);var T=O&&C.hasDummyGraphic;T=null===C.y?!T:T,O&&T&&(C.graphic=O.destroy(),delete C.hasDummyGraphic),Q(i,!0)&&(O&&O.element&&i&&i.marker&&void 0!==i.marker.symbol&&(C.graphic=O.destroy()),i&&i.dataLabels&&C.dataLabel&&(C.dataLabel=C.dataLabel.destroy()),C.connector&&(C.connector=C.connector.destroy())),S=C.index,P.updateParallelArrays(C,S),R.data[S]=Q(R.data[S],!0)||Q(i,!0)?C.options:ne(i,R.data[S]),P.isDirty=P.isDirtyData=!0,!P.fixedBox&&P.hasCartesianSeries&&(M.isDirtyBox=!0),"point"===R.legendType&&(M.isDirtyLegend=!0),s&&M.redraw(_)}var S,C=this,P=C.series,O=C.graphic,M=P.chart,R=P.options;s=ne(s,!0),!1===T?g():C.firePointEvent("update",{options:i},g)},g.prototype.remove=function(i,s){this.series.removePoint(this.series.data.indexOf(this),i,s)},g.prototype.select=function(i,s){var _=this,T=_.series,S=T.chart;this.selectedStaging=i=ne(i,!_.selected),_.firePointEvent(i?"select":"unselect",{accumulate:s},(function(){_.selected=_.options.selected=i,T.options.data[T.data.indexOf(_)]=_.options,_.setState(i&&"select"),s||S.getSelectedPoints().forEach((function(i){var s=i.series;i.selected&&i!==_&&(i.selected=i.options.selected=!1,s.options.data[s.data.indexOf(i)]=i.options,i.setState(S.hoverPoints&&s.options.inactiveOtherPoints?"inactive":""),i.firePointEvent("unselect"))}))})),delete this.selectedStaging},g.prototype.onMouseOver=function(i){var s=this.series.chart,_=s.pointer;i=i?_.normalize(i):_.getChartCoordinatesFromPoint(this,s.inverted),_.runPointActions(i,this)},g.prototype.onMouseOut=function(){var i=this.series.chart;this.firePointEvent("mouseOut"),this.series.options.inactiveOtherPoints||(i.hoverPoints||[]).forEach((function(i){i.setState()})),i.hoverPoints=i.hoverPoint=null},g.prototype.importEvents=function(){if(!this.hasImportedEvents){var i=this,s=ee(i.series.options.point,i.options).events;i.events=s,te(s,(function(s,_){Y(s)&&R(i,_,s)})),this.hasImportedEvents=!0}},g.prototype.setState=function(s,_){var T,S=this.series,C=this.state,P=S.options.states[s||"normal"]||{},O=M.plotOptions[S.type].marker&&S.options.marker,R=O&&!1===O.enabled,D=O&&O.states&&O.states[s||"normal"]||{},j=!1===D.enabled,V=S.stateMarkerGraphic,Z=this.marker||{},Y=S.chart,Q=S.halo,ee=O&&S.markerAttribs;if(!((s=s||"")===this.state&&!_||this.selected&&"select"!==s||!1===P.enabled||s&&(j||R&&!1===D.enabled)||s&&Z.states&&Z.states[s]&&!1===Z.states[s].enabled)){if(this.state=s,ee&&(T=S.markerAttribs(this,s)),this.graphic&&!this.hasDummyGraphic){if(C&&this.graphic.removeClass("highcharts-point-"+C),s&&this.graphic.addClass("highcharts-point-"+s),!Y.styledMode){var te=S.pointAttribs(this,s),re=ne(Y.options.chart.animation,P.animation);S.options.inactiveOtherPoints&&X(te.opacity)&&((this.dataLabels||[]).forEach((function(i){i&&i.animate({opacity:te.opacity},re)})),this.connector&&this.connector.animate({opacity:te.opacity},re)),this.graphic.animate(te,re)}T&&this.graphic.animate(T,ne(Y.options.chart.animation,D.animation,O.animation)),V&&V.hide()}else s&&D&&(C=Z.symbol||S.symbol,V&&V.currentSymbol!==C&&(V=V.destroy()),T&&(V?V[_?"animate":"attr"]({x:T.x,y:T.y}):C&&(S.stateMarkerGraphic=V=Y.renderer.symbol(C,T.x,T.y,T.width,T.height).add(S.markerGroup),V.currentSymbol=C)),!Y.styledMode&&V&&V.attr(S.pointAttribs(this,s))),V&&(V[s&&this.isInside?"show":"hide"](),V.element.point=this);P=P.halo,T=(V=this.graphic||V)&&V.visibility||"inherit",P&&P.size&&V&&"hidden"!==T&&!this.isCluster?(Q||(S.halo=Q=Y.renderer.path().add(V.parentGroup)),Q.show()[_?"animate":"attr"]({d:this.haloPath(P.size)}),Q.attr({class:"highcharts-halo highcharts-color-"+ne(this.colorIndex,S.colorIndex)+(this.className?" "+this.className:""),visibility:T,zIndex:-1}),Q.point=this,Y.styledMode||Q.attr($({fill:this.color||S.color,"fill-opacity":P.opacity},i.filterUserAttributes(P.attributes||{})))):Q&&Q.point&&Q.point.haloPath&&Q.animate({d:Q.point.haloPath(0)},null,Q.hide),U(this,"afterSetState",{state:s})}},g.prototype.haloPath=function(i){return this.series.chart.renderer.symbols.circle(Math.floor(this.plotX)-i,this.plotY-i,2*i,2*i)},g}(),T.Point=s})),L(s,"Core/Legend.js",[s["Core/Animation/AnimationUtilities.js"],s["Core/FormatUtilities.js"],s["Core/Globals.js"],s["Core/Series/Point.js"],s["Core/Utilities.js"]],(function(i,s,_,T,S){var C=i.animObject,P=i.setAnimation,O=s.format;i=_.isFirefox;var M=_.marginNames;s=_.win;var R=S.addEvent,D=S.createElement,j=S.css,$=S.defined,U=S.discardElement,V=S.find,Z=S.fireEvent,Y=S.isNumber,X=S.merge,Q=S.pick,ee=S.relativeLength,te=S.stableSort,ne=S.syncTimeout;S=S.wrap;var re=function(){function a(i,s){this.allItems=[],this.contentGroup=this.box=void 0,this.display=!1,this.group=void 0,this.offsetWidth=this.maxLegendWidth=this.maxItemWidth=this.legendWidth=this.legendHeight=this.lastLineHeight=this.lastItemY=this.itemY=this.itemX=this.itemMarginTop=this.itemMarginBottom=this.itemHeight=this.initialItemY=0,this.options={},this.padding=0,this.pages=[],this.proximate=!1,this.scrollGroup=void 0,this.widthOption=this.totalItemWidth=this.titleHeight=this.symbolWidth=this.symbolHeight=0,this.chart=i,this.init(i,s)}return a.prototype.init=function(i,s){this.chart=i,this.setOptions(s),s.enabled&&(this.render(),R(this.chart,"endResize",(function(){this.legend.positionCheckboxes()})),this.proximate?this.unchartrender=R(this.chart,"render",(function(){this.legend.proximatePositions(),this.legend.positionItems()})):this.unchartrender&&this.unchartrender())},a.prototype.setOptions=function(i){var s=Q(i.padding,8);this.options=i,this.chart.styledMode||(this.itemStyle=i.itemStyle,this.itemHiddenStyle=X(this.itemStyle,i.itemHiddenStyle)),this.itemMarginTop=i.itemMarginTop||0,this.itemMarginBottom=i.itemMarginBottom||0,this.padding=s,this.initialItemY=s-5,this.symbolWidth=Q(i.symbolWidth,16),this.pages=[],this.proximate="proximate"===i.layout&&!this.chart.inverted,this.baseline=void 0},a.prototype.update=function(i,s){var _=this.chart;this.setOptions(X(!0,this.options,i)),this.destroy(),_.isDirtyLegend=_.isDirtyBox=!0,Q(s,!0)&&_.redraw(),Z(this,"afterUpdate")},a.prototype.colorizeItem=function(i,s){if(i.legendGroup[s?"removeClass":"addClass"]("highcharts-legend-item-hidden"),!this.chart.styledMode){var _=this.options,T=i.legendItem,S=i.legendLine,C=i.legendSymbol,P=this.itemHiddenStyle.color;_=s?_.itemStyle.color:P;var O=s&&i.color||P,M=i.options&&i.options.marker,R={fill:O};T&&T.css({fill:_,color:_}),S&&S.attr({stroke:O}),C&&(M&&C.isMarker&&(R=i.pointAttribs(),s||(R.stroke=R.fill=P)),C.attr(R))}Z(this,"afterColorizeItem",{item:i,visible:s})},a.prototype.positionItems=function(){this.allItems.forEach(this.positionItem,this),this.chart.isResizing||this.positionCheckboxes()},a.prototype.positionItem=function(i){var s=this,_=this.options,T=_.symbolPadding,S=!_.rtl,C=i._legendItemPos;_=C[0],C=C[1];var P=i.checkbox,O=i.legendGroup;O&&O.element&&(T={translateX:S?_:this.legendWidth-_-2*T-4,translateY:C},S=function(){Z(s,"afterPositionItem",{item:i})},$(O.translateY)?O.animate(T,void 0,S):(O.attr(T),S())),P&&(P.x=_,P.y=C)},a.prototype.destroyItem=function(i){var s=i.checkbox;["legendItem","legendLine","legendSymbol","legendGroup"].forEach((function(s){i[s]&&(i[s]=i[s].destroy())})),s&&U(i.checkbox)},a.prototype.destroy=function(){function a(i){this[i]&&(this[i]=this[i].destroy())}this.getAllItems().forEach((function(i){["legendItem","legendGroup"].forEach(a,i)})),"clipRect up down pager nav box title group".split(" ").forEach(a,this),this.display=null},a.prototype.positionCheckboxes=function(){var i=this.group&&this.group.alignAttr,s=this.clipHeight||this.legendHeight,_=this.titleHeight;if(i){var T=i.translateY;this.allItems.forEach((function(S){var C=S.checkbox;if(C){var P=T+_+C.y+(this.scrollOffset||0)+3;j(C,{left:i.translateX+S.checkboxOffset+C.x-20+"px",top:P+"px",display:this.proximate||P>T-6&&P<T+s-6?"":"none"})}}),this)}},a.prototype.renderTitle=function(){var i=this.options,s=this.padding,_=i.title,T=0;_.text&&(this.title||(this.title=this.chart.renderer.label(_.text,s-3,s-4,null,null,null,i.useHTML,null,"legend-title").attr({zIndex:1}),this.chart.styledMode||this.title.css(_.style),this.title.add(this.group)),_.width||this.title.css({width:this.maxLegendWidth+"px"}),T=(i=this.title.getBBox()).height,this.offsetWidth=i.width,this.contentGroup.attr({translateY:T})),this.titleHeight=T},a.prototype.setText=function(i){var s=this.options;i.legendItem.attr({text:s.labelFormat?O(s.labelFormat,i,this.chart):s.labelFormatter.call(i)})},a.prototype.renderItem=function(i){var s=this.chart,_=s.renderer,T=this.options,S=this.symbolWidth,C=T.symbolPadding||0,P=this.itemStyle,O=this.itemHiddenStyle,M="horizontal"===T.layout?Q(T.itemDistance,20):0,R=!T.rtl,D=i.legendItem,j=!i.series,$=!j&&i.series.drawLegendSymbol?i.series:i,U=$.options,V=this.createCheckboxForItem&&U&&U.showCheckbox;U=S+C+M+(V?20:0);var Z=T.useHTML,Y=i.options.className;D||(i.legendGroup=_.g("legend-item").addClass("highcharts-"+$.type+"-series highcharts-color-"+i.colorIndex+(Y?" "+Y:"")+(j?" highcharts-series-"+i.index:"")).attr({zIndex:1}).add(this.scrollGroup),i.legendItem=D=_.text("",R?S+C:-C,this.baseline||0,Z),s.styledMode||D.css(X(i.visible?P:O)),D.attr({align:R?"left":"right",zIndex:2}).add(i.legendGroup),this.baseline||(this.fontMetrics=_.fontMetrics(s.styledMode?12:P.fontSize,D),this.baseline=this.fontMetrics.f+3+this.itemMarginTop,D.attr("y",this.baseline),this.symbolHeight=T.symbolHeight||this.fontMetrics.f,T.squareSymbol&&(this.symbolWidth=Q(T.symbolWidth,Math.max(this.symbolHeight,16)),U=this.symbolWidth+C+M+(V?20:0),R&&D.attr("x",this.symbolWidth+C))),$.drawLegendSymbol(this,i),this.setItemEvents&&this.setItemEvents(i,D,Z)),V&&!i.checkbox&&this.createCheckboxForItem&&this.createCheckboxForItem(i),this.colorizeItem(i,i.visible),!s.styledMode&&P.width||D.css({width:(T.itemWidth||this.widthOption||s.spacingBox.width)-U+"px"}),this.setText(i),s=D.getBBox(),i.itemWidth=i.checkboxOffset=T.itemWidth||i.legendItemWidth||s.width+U,this.maxItemWidth=Math.max(this.maxItemWidth,i.itemWidth),this.totalItemWidth+=i.itemWidth,this.itemHeight=i.itemHeight=Math.round(i.legendItemHeight||s.height||this.symbolHeight)},a.prototype.layoutItem=function(i){var s=this.options,_=this.padding,T="horizontal"===s.layout,S=i.itemHeight,C=this.itemMarginBottom,P=this.itemMarginTop,O=T?Q(s.itemDistance,20):0,M=this.maxLegendWidth;s=s.alignColumns&&this.totalItemWidth>M?this.maxItemWidth:i.itemWidth,T&&this.itemX-_+s>M&&(this.itemX=_,this.lastLineHeight&&(this.itemY+=P+this.lastLineHeight+C),this.lastLineHeight=0),this.lastItemY=P+this.itemY+C,this.lastLineHeight=Math.max(S,this.lastLineHeight),i._legendItemPos=[this.itemX,this.itemY],T?this.itemX+=s:(this.itemY+=P+S+C,this.lastLineHeight=S),this.offsetWidth=this.widthOption||Math.max((T?this.itemX-_-(i.checkbox?0:O):s)+_,this.offsetWidth)},a.prototype.getAllItems=function(){var i=[];return this.chart.series.forEach((function(s){var _=s&&s.options;s&&Q(_.showInLegend,!$(_.linkedTo)&&void 0,!0)&&(i=i.concat(s.legendItems||("point"===_.legendType?s.data:s)))})),Z(this,"afterGetAllItems",{allItems:i}),i},a.prototype.getAlignment=function(){var i=this.options;return this.proximate?i.align.charAt(0)+"tv":i.floating?"":i.align.charAt(0)+i.verticalAlign.charAt(0)+i.layout.charAt(0)},a.prototype.adjustMargins=function(i,s){var _=this.chart,T=this.options,S=this.getAlignment();S&&[/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/].forEach((function(C,P){C.test(S)&&!$(i[P])&&(_[M[P]]=Math.max(_[M[P]],_.legend[(P+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][P]*T[P%2?"x":"y"]+Q(T.margin,12)+s[P]+(_.titleOffset[P]||0)))}))},a.prototype.proximatePositions=function(){var i=this.chart,s=[],T="left"===this.options.align;this.allItems.forEach((function(_){var S,C=T;if(_.yAxis){_.xAxis.options.reversed&&(C=!C),_.points&&(S=V(C?_.points:_.points.slice(0).reverse(),(function(i){return Y(i.plotY)}))),C=this.itemMarginTop+_.legendItem.getBBox().height+this.itemMarginBottom;var P=_.yAxis.top-i.plotTop;_.visible?(S=S?S.plotY:_.yAxis.height,S+=P-.3*C):S=P+_.yAxis.height,s.push({target:S,size:C,item:_})}}),this),_.distribute(s,i.plotHeight),s.forEach((function(s){s.item._legendItemPos[1]=i.plotTop-i.spacing[0]+s.pos}))},a.prototype.render=function(){var i=this.chart,s=i.renderer,_=this.group,T=this.box,S=this.options,C=this.padding;this.itemX=C,this.itemY=this.initialItemY,this.lastItemY=this.offsetWidth=0,this.widthOption=ee(S.width,i.spacingBox.width-C);var P=i.spacingBox.width-2*C-S.x;-1<["rm","lm"].indexOf(this.getAlignment().substring(0,2))&&(P/=2),this.maxLegendWidth=this.widthOption||P,_||(this.group=_=s.g("legend").addClass(S.className||"").attr({zIndex:7}).add(),this.contentGroup=s.g().attr({zIndex:1}).add(_),this.scrollGroup=s.g().add(this.contentGroup)),this.renderTitle();var O=this.getAllItems();te(O,(function(i,s){return(i.options&&i.options.legendIndex||0)-(s.options&&s.options.legendIndex||0)})),S.reversed&&O.reverse(),this.allItems=O,this.display=P=!!O.length,this.itemHeight=this.totalItemWidth=this.maxItemWidth=this.lastLineHeight=0,O.forEach(this.renderItem,this),O.forEach(this.layoutItem,this),O=(this.widthOption||this.offsetWidth)+C;var M=this.lastItemY+this.lastLineHeight+this.titleHeight;M=this.handleOverflow(M),M+=C,T||(this.box=T=s.rect().addClass("highcharts-legend-box").attr({r:S.borderRadius}).add(_),T.isNew=!0),i.styledMode||T.attr({stroke:S.borderColor,"stroke-width":S.borderWidth||0,fill:S.backgroundColor||"none"}).shadow(S.shadow),0<O&&0<M&&(T[T.isNew?"attr":"animate"](T.crisp.call({},{x:0,y:0,width:O,height:M},T.strokeWidth())),T.isNew=!1),T[P?"show":"hide"](),i.styledMode&&"none"===_.getStyle("display")&&(O=M=0),this.legendWidth=O,this.legendHeight=M,P&&this.align(),this.proximate||this.positionItems(),Z(this,"afterRender")},a.prototype.align=function(i){void 0===i&&(i=this.chart.spacingBox);var s=this.chart,_=this.options,T=i.y;/(lth|ct|rth)/.test(this.getAlignment())&&0<s.titleOffset[0]?T+=s.titleOffset[0]:/(lbh|cb|rbh)/.test(this.getAlignment())&&0<s.titleOffset[2]&&(T-=s.titleOffset[2]),T!==i.y&&(i=X(i,{y:T})),this.group.align(X(_,{width:this.legendWidth,height:this.legendHeight,verticalAlign:this.proximate?"top":_.verticalAlign}),!0,i)},a.prototype.handleOverflow=function(i){var s=this,_=this.chart,T=_.renderer,S=this.options,C=S.y,P=this.padding;C=_.spacingBox.height+("top"===S.verticalAlign?-C:C)-P;var O,M,R=S.maxHeight,D=this.clipRect,j=S.navigation,$=Q(j.animation,!0),U=j.arrowSize||12,V=this.nav,Z=this.pages,Y=this.allItems,I=function(i){"number"==typeof i?D.attr({height:i}):D&&(s.clipRect=D.destroy(),s.contentGroup.clip()),s.contentGroup.div&&(s.contentGroup.div.style.clip=i?"rect("+P+"px,9999px,"+(P+i)+"px,0)":"auto")},N=function(i){return s[i]=T.circle(0,0,1.3*U).translate(U/2,U/2).add(V),_.styledMode||s[i].attr("fill","rgba(0,0,0,0.0001)"),s[i]};return"horizontal"!==S.layout||"middle"===S.verticalAlign||S.floating||(C/=2),R&&(C=Math.min(C,R)),Z.length=0,i&&0<C&&i>C&&!1!==j.enabled?(this.clipHeight=O=Math.max(C-20-this.titleHeight-P,0),this.currentPage=Q(this.currentPage,1),this.fullHeight=i,Y.forEach((function(i,s){var _=i._legendItemPos[1],T=Math.round(i.legendItem.getBBox().height),S=Z.length;(!S||_-Z[S-1]>O&&(M||_)!==Z[S-1])&&(Z.push(M||_),S++),i.pageIx=S-1,M&&(Y[s-1].pageIx=S-1),s===Y.length-1&&_+T-Z[S-1]>O&&_!==M&&(Z.push(_),i.pageIx=S),_!==M&&(M=_)})),D||(D=s.clipRect=T.clipRect(0,P,9999,0),s.contentGroup.clip(D)),I(O),V||(this.nav=V=T.g().attr({zIndex:1}).add(this.group),this.up=T.symbol("triangle",0,0,U,U).add(V),N("upTracker").on("click",(function(){s.scroll(-1,$)})),this.pager=T.text("",15,10).addClass("highcharts-legend-navigation"),_.styledMode||this.pager.css(j.style),this.pager.add(V),this.down=T.symbol("triangle-down",0,0,U,U).add(V),N("downTracker").on("click",(function(){s.scroll(1,$)}))),s.scroll(0),i=C):V&&(I(),this.nav=V.destroy(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),i},a.prototype.scroll=function(i,s){var _=this,T=this.chart,S=this.pages,O=S.length,M=this.currentPage+i;i=this.clipHeight;var R=this.options.navigation,D=this.pager,j=this.padding;M>O&&(M=O),0<M&&(void 0!==s&&P(s,T),this.nav.attr({translateX:j,translateY:i+this.padding+7+this.titleHeight,visibility:"visible"}),[this.up,this.upTracker].forEach((function(i){i.attr({class:1===M?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})})),D.attr({text:M+"/"+O}),[this.down,this.downTracker].forEach((function(i){i.attr({x:18+this.pager.getBBox().width,class:M===O?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})}),this),T.styledMode||(this.up.attr({fill:1===M?R.inactiveColor:R.activeColor}),this.upTracker.css({cursor:1===M?"default":"pointer"}),this.down.attr({fill:M===O?R.inactiveColor:R.activeColor}),this.downTracker.css({cursor:M===O?"default":"pointer"})),this.scrollOffset=-S[M-1]+this.initialItemY,this.scrollGroup.animate({translateY:this.scrollOffset}),this.currentPage=M,this.positionCheckboxes(),s=C(Q(s,T.renderer.globalAnimation,!0)),ne((function(){Z(_,"afterScroll",{currentPage:M})}),s.duration))},a.prototype.setItemEvents=function(i,s,_){var S=this,C=S.chart.renderer.boxWrapper,P=i instanceof T,O="highcharts-legend-"+(P?"point":"series")+"-active",M=S.chart.styledMode;(_?[s,i.legendSymbol]:[i.legendGroup]).forEach((function(_){_&&_.on("mouseover",(function(){i.visible&&S.allItems.forEach((function(s){i!==s&&s.setState("inactive",!P)})),i.setState("hover"),i.visible&&C.addClass(O),M||s.css(S.options.itemHoverStyle)})).on("mouseout",(function(){S.chart.styledMode||s.css(X(i.visible?S.itemStyle:S.itemHiddenStyle)),S.allItems.forEach((function(s){i!==s&&s.setState("",!P)})),C.removeClass(O),i.setState()})).on("click",(function(s){var c=function(){i.setVisible&&i.setVisible(),S.allItems.forEach((function(s){i!==s&&s.setState(i.visible?"inactive":"",!P)}))};C.removeClass(O),s={browserEvent:s},i.firePointEvent?i.firePointEvent("legendItemClick",s,c):Z(i,"legendItemClick",s,c)}))}))},a.prototype.createCheckboxForItem=function(i){i.checkbox=D("input",{type:"checkbox",className:"highcharts-legend-checkbox",checked:i.selected,defaultChecked:i.selected},this.options.itemCheckboxStyle,this.chart.container),R(i.checkbox,"click",(function(s){Z(i.series||i,"checkboxClick",{checked:s.target.checked,item:i},(function(){i.select()}))}))},a}();return(/Trident\/7\.0/.test(s.navigator&&s.navigator.userAgent)||i)&&S(re.prototype,"positionItem",(function(i,s){var _=this,c=function(){s._legendItemPos&&i.call(_,s)};c(),_.bubbleLegend||setTimeout(c)})),_.Legend=re,_.Legend})),L(s,"Core/Series/SeriesRegistry.js",[s["Core/Globals.js"],s["Core/DefaultOptions.js"],s["Core/Series/Point.js"],s["Core/Utilities.js"]],(function(i,s,_,T){var S,C=s.defaultOptions,P=T.error,O=T.extendClass,M=T.merge;return function(s){function f(i,T){var S=C.plotOptions||{},P=T.defaultOptions;T.prototype.pointClass||(T.prototype.pointClass=_),T.prototype.type=i,P&&(S[i]=P),s.seriesTypes[i]=T}s.seriesTypes=i.seriesTypes,s.getSeries=function(i,_){void 0===_&&(_={});var T=i.options.chart;T=_.type||T.type||T.defaultSeriesType||"";var S=s.seriesTypes[T];return s||P(17,!0,i,{missingModuleFor:T}),"function"==typeof(T=new S).init&&T.init(i,_),T},s.registerSeriesType=f,s.seriesType=function(i,T,S,P,R){var D=C.plotOptions||{};return T=T||"",D[i]=M(D[T],S),f(i,O(s.seriesTypes[T]||function(){},P)),s.seriesTypes[i].prototype.type=i,R&&(s.seriesTypes[i].prototype.pointClass=O(_,R)),s.seriesTypes[i]}}(S||(S={})),i.seriesType=S.seriesType,S})),L(s,"Core/Chart/Chart.js",[s["Core/Animation/AnimationUtilities.js"],s["Core/Axis/Axis.js"],s["Core/FormatUtilities.js"],s["Core/Foundation.js"],s["Core/Globals.js"],s["Core/Legend.js"],s["Core/MSPointer.js"],s["Core/DefaultOptions.js"],s["Core/Color/Palette.js"],s["Core/Pointer.js"],s["Core/Renderer/RendererRegistry.js"],s["Core/Series/SeriesRegistry.js"],s["Core/Time.js"],s["Core/Utilities.js"],s["Core/Renderer/HTML/AST.js"]],(function(i,s,_,T,S,C,P,O,M,R,D,j,$,U,V){var Z=i.animate,Y=i.animObject,X=i.setAnimation,Q=_.numberFormat,ee=T.registerEventOptions,te=S.charts,ne=S.doc,re=S.marginNames,ie=S.win,ae=O.defaultOptions,se=O.defaultTime,oe=j.seriesTypes,le=U.addEvent,ce=U.attr,ue=U.cleanRecursively,de=U.createElement,he=U.css,pe=U.defined,me=U.discardElement,fe=U.erase,ge=U.error,ve=U.extend,be=U.find,ye=U.fireEvent,_e=U.getStyle,we=U.isArray,ke=U.isNumber,Te=U.isObject,Se=U.isString,Ce=U.merge,xe=U.objectEach,Ee=U.pick,Pe=U.pInt,Ae=U.relativeLength,Oe=U.removeEvent,Me=U.splat,ze=U.syncTimeout,Ie=U.uniqueKey;return i=function(){function a(i,s,_){this.series=this.renderTo=this.renderer=this.pointer=this.pointCount=this.plotWidth=this.plotTop=this.plotLeft=this.plotHeight=this.plotBox=this.options=this.numberFormatter=this.margin=this.legend=this.labelCollectors=this.isResizing=this.index=this.eventOptions=this.container=this.colorCounter=this.clipBox=this.chartWidth=this.chartHeight=this.bounds=this.axisOffset=this.axes=void 0,this.sharedClips={},this.yAxis=this.xAxis=this.userOptions=this.titleOffset=this.time=this.symbolCounter=this.spacingBox=this.spacing=void 0,this.getArgs(i,s,_)}return a.chart=function(i,s,_){return new a(i,s,_)},a.prototype.getArgs=function(i,s,_){Se(i)||i.nodeName?(this.renderTo=i,this.init(s,_)):this.init(i,s)},a.prototype.init=function(i,s){var _=i.plotOptions||{};ye(this,"init",{args:arguments},(function(){var T=Ce(ae,i),C=T.chart;xe(T.plotOptions,(function(i,s){Te(i)&&(i.tooltip=_[s]&&Ce(_[s].tooltip)||void 0)})),T.tooltip.userOptions=i.chart&&i.chart.forExport&&i.tooltip.userOptions||i.tooltip,this.userOptions=i,this.margin=[],this.spacing=[],this.bounds={h:{},v:{}},this.labelCollectors=[],this.callback=s,this.isResizing=0,this.options=T,this.axes=[],this.series=[],this.time=i.time&&Object.keys(i.time).length?new $(i.time):S.time,this.numberFormatter=C.numberFormatter||Q,this.styledMode=C.styledMode,this.hasCartesianSeries=C.showAxes,this.index=te.length,te.push(this),S.chartCount++,ee(this,C),this.xAxis=[],this.yAxis=[],this.pointCount=this.colorCounter=this.symbolCounter=0,ye(this,"afterInit"),this.firstRender()}))},a.prototype.initSeries=function(i){var s=this.options.chart;s=i.type||s.type||s.defaultSeriesType;var _=oe[s];return _||ge(17,!0,this,{missingModuleFor:s}),"function"==typeof(s=new _).init&&s.init(this,i),s},a.prototype.setSeriesData=function(){this.getSeriesOrderByLinks().forEach((function(i){i.points||i.data||!i.enabledDataSorting||i.setData(i.options.data,!1)}))},a.prototype.getSeriesOrderByLinks=function(){return this.series.concat().sort((function(i,s){return i.linkedSeries.length||s.linkedSeries.length?s.linkedSeries.length-i.linkedSeries.length:0}))},a.prototype.orderSeries=function(i){var s=this.series;i=i||0;for(var _=s.length;i<_;++i)s[i]&&(s[i].index=i,s[i].name=s[i].getName())},a.prototype.isInsidePlot=function(i,s,_){void 0===_&&(_={});var T=this.inverted,S=this.plotBox,C=this.plotLeft,P=this.plotTop,O=this.scrollablePlotBox,M=0,R=0;_.visiblePlotOnly&&this.scrollingContainer&&(M=(R=this.scrollingContainer).scrollLeft,R=R.scrollTop);var D=_.series;if(S=_.visiblePlotOnly&&O||S,i={x:O=_.inverted?s:i,y:s=_.inverted?i:s,isInsidePlot:!0},!_.ignoreX){var j=D&&(T?D.yAxis:D.xAxis)||{pos:C,len:1/0};(O=_.paneCoordinates?j.pos+O:C+O)>=Math.max(M+C,j.pos)&&O<=Math.min(M+C+S.width,j.pos+j.len)||(i.isInsidePlot=!1)}return!_.ignoreY&&i.isInsidePlot&&(T=D&&(T?D.xAxis:D.yAxis)||{pos:P,len:1/0},(_=_.paneCoordinates?T.pos+s:P+s)>=Math.max(R+P,T.pos)&&_<=Math.min(R+P+S.height,T.pos+T.len)||(i.isInsidePlot=!1)),ye(this,"afterIsInsidePlot",i),i.isInsidePlot},a.prototype.redraw=function(i){ye(this,"beforeRedraw");var s=this.hasCartesianSeries?this.axes:this.colorAxis||[],_=this.series,T=this.pointer,S=this.legend,C=this.userOptions.legend,P=this.renderer,O=P.isHidden(),M=[],R=this.isDirtyBox,D=this.isDirtyLegend;for(this.setResponsive&&this.setResponsive(!1),X(!!this.hasRendered&&i,this),O&&this.temporaryDisplay(),this.layOutTitles(),i=_.length;i--;){var j=_[i];if(j.options.stacking||j.options.centerInCategory){var $=!0;if(j.isDirty){var U=!0;break}}}if(U)for(i=_.length;i--;)(j=_[i]).options.stacking&&(j.isDirty=!0);_.forEach((function(i){i.isDirty&&("point"===i.options.legendType?("function"==typeof i.updateTotals&&i.updateTotals(),D=!0):C&&(C.labelFormatter||C.labelFormat)&&(D=!0)),i.isDirtyData&&ye(i,"updatedData")})),D&&S&&S.options.enabled&&(S.render(),this.isDirtyLegend=!1),$&&this.getStacks(),s.forEach((function(i){i.updateNames(),i.setScale()})),this.getMargins(),s.forEach((function(i){i.isDirty&&(R=!0)})),s.forEach((function(i){var s=i.min+","+i.max;i.extKey!==s&&(i.extKey=s,M.push((function(){ye(i,"afterSetExtremes",ve(i.eventArgs,i.getExtremes())),delete i.eventArgs}))),(R||$)&&i.redraw()})),R&&this.drawChartBox(),ye(this,"predraw"),_.forEach((function(i){(R||i.isDirty)&&i.visible&&i.redraw(),i.isDirtyData=!1})),T&&T.reset(!0),P.draw(),ye(this,"redraw"),ye(this,"render"),O&&this.temporaryDisplay(!0),M.forEach((function(i){i.call()}))},a.prototype.get=function(i){function b(s){return s.id===i||s.options&&s.options.id===i}for(var s=this.series,_=be(this.axes,b)||be(this.series,b),T=0;!_&&T<s.length;T++)_=be(s[T].points||[],b);return _},a.prototype.getAxes=function(){var i=this,_=this.options,T=_.xAxis=Me(_.xAxis||{});_=_.yAxis=Me(_.yAxis||{}),ye(this,"getAxes"),T.forEach((function(i,s){i.index=s,i.isX=!0})),_.forEach((function(i,s){i.index=s})),T.concat(_).forEach((function(_){new s(i,_)})),ye(this,"afterGetAxes")},a.prototype.getSelectedPoints=function(){var i=[];return this.series.forEach((function(s){i=i.concat(s.getPointsCollection().filter((function(i){return Ee(i.selectedStaging,i.selected)})))})),i},a.prototype.getSelectedSeries=function(){return this.series.filter((function(i){return i.selected}))},a.prototype.setTitle=function(i,s,_){this.applyDescription("title",i),this.applyDescription("subtitle",s),this.applyDescription("caption",void 0),this.layOutTitles(_)},a.prototype.applyDescription=function(i,s){var _=this,T="title"===i?{color:M.neutralColor80,fontSize:this.options.isStock?"16px":"18px"}:{color:M.neutralColor60};T=this.options[i]=Ce(!this.styledMode&&{style:T},this.options[i],s);var S=this[i];S&&s&&(this[i]=S=S.destroy()),T&&!S&&((S=this.renderer.text(T.text,0,0,T.useHTML).attr({align:T.align,class:"highcharts-"+i,zIndex:T.zIndex||4}).add()).update=function(s){_[{title:"setTitle",subtitle:"setSubtitle",caption:"setCaption"}[i]](s)},this.styledMode||S.css(T.style),this[i]=S)},a.prototype.layOutTitles=function(i){var s=[0,0,0],_=this.renderer,T=this.spacingBox;["title","subtitle","caption"].forEach((function(i){var S,C=this[i],P=this.options[i],O=P.verticalAlign||"top";if(i="title"===i?"top"===O?-3:0:"top"===O?s[0]+2:0,C){this.styledMode||(S=P.style&&P.style.fontSize),S=_.fontMetrics(S,C).b,C.css({width:(P.width||T.width+(P.widthAdjust||0))+"px"});var M=Math.round(C.getBBox(P.useHTML).height);C.align(ve({y:"bottom"===O?S:i+S,height:M},P),!1,"spacingBox"),P.floating||("top"===O?s[0]=Math.ceil(s[0]+M):"bottom"===O&&(s[2]=Math.ceil(s[2]+M)))}}),this),s[0]&&"top"===(this.options.title.verticalAlign||"top")&&(s[0]+=this.options.title.margin),s[2]&&"bottom"===this.options.caption.verticalAlign&&(s[2]+=this.options.caption.margin);var S=!this.titleOffset||this.titleOffset.join(",")!==s.join(",");this.titleOffset=s,ye(this,"afterLayOutTitles"),!this.isDirtyBox&&S&&(this.isDirtyBox=this.isDirtyLegend=S,this.hasRendered&&Ee(i,!0)&&this.isDirtyBox&&this.redraw())},a.prototype.getChartSize=function(){var i=this.options.chart,s=i.width;i=i.height;var _=this.renderTo;pe(s)||(this.containerWidth=_e(_,"width")),pe(i)||(this.containerHeight=_e(_,"height")),this.chartWidth=Math.max(0,s||this.containerWidth||600),this.chartHeight=Math.max(0,Ae(i,this.chartWidth)||(1<this.containerHeight?this.containerHeight:400))},a.prototype.temporaryDisplay=function(i){var s=this.renderTo;if(i)for(;s&&s.style;)s.hcOrigStyle&&(he(s,s.hcOrigStyle),delete s.hcOrigStyle),s.hcOrigDetached&&(ne.body.removeChild(s),s.hcOrigDetached=!1),s=s.parentNode;else for(;s&&s.style&&(ne.body.contains(s)||s.parentNode||(s.hcOrigDetached=!0,ne.body.appendChild(s)),("none"===_e(s,"display",!1)||s.hcOricDetached)&&(s.hcOrigStyle={display:s.style.display,height:s.style.height,overflow:s.style.overflow},i={display:"block",overflow:"hidden"},s!==this.renderTo&&(i.height=0),he(s,i),s.offsetWidth||s.style.setProperty("display","block","important")),(s=s.parentNode)!==ne.body););},a.prototype.setClassName=function(i){this.container.className="highcharts-container "+(i||"")},a.prototype.getContainer=function(){var i,s=this.options,_=s.chart,T=Ie(),S=this.renderTo;S||(this.renderTo=S=_.renderTo),Se(S)&&(this.renderTo=S=ne.getElementById(S)),S||ge(13,!0,this);var C=Pe(ce(S,"data-highcharts-chart"));ke(C)&&te[C]&&te[C].hasRendered&&te[C].destroy(),ce(S,"data-highcharts-chart",this.index),S.innerHTML="",_.skipClone||S.offsetWidth||this.temporaryDisplay(),this.getChartSize(),C=this.chartWidth;var P=this.chartHeight;if(he(S,{overflow:"hidden"}),this.styledMode||(i=ve({position:"relative",overflow:"hidden",width:C+"px",height:P+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)",userSelect:"none","touch-action":"manipulation",outline:"none"},_.style||{})),this.container=T=de("div",{id:T},i,S),this._cursor=T.style.cursor,this.renderer=new(D.getRendererType(_.renderer))(T,C,P,void 0,_.forExport,s.exporting&&s.exporting.allowHTML,this.styledMode),X(void 0,this),this.setClassName(_.className),this.styledMode)for(var O in s.defs)this.renderer.definition(s.defs[O]);else this.renderer.setStyle(_.style);this.renderer.chartIndex=this.index,ye(this,"afterGetContainer")},a.prototype.getMargins=function(i){var s=this.spacing,_=this.margin,T=this.titleOffset;this.resetMargins(),T[0]&&!pe(_[0])&&(this.plotTop=Math.max(this.plotTop,T[0]+s[0])),T[2]&&!pe(_[2])&&(this.marginBottom=Math.max(this.marginBottom,T[2]+s[2])),this.legend&&this.legend.display&&this.legend.adjustMargins(_,s),ye(this,"getMargins"),i||this.getAxisMargins()},a.prototype.getAxisMargins=function(){var i=this,s=i.axisOffset=[0,0,0,0],_=i.colorAxis,T=i.margin,g=function(i){i.forEach((function(i){i.visible&&i.getOffset()}))};i.hasCartesianSeries?g(i.axes):_&&_.length&&g(_),re.forEach((function(_,S){pe(T[S])||(i[_]+=s[S])})),i.setChartSize()},a.prototype.reflow=function(i){var s=this,_=s.options.chart,T=s.renderTo,S=pe(_.width)&&pe(_.height),C=_.width||_e(T,"width");_=_.height||_e(T,"height"),T=i?i.target:ie,delete s.pointer.chartPosition,S||s.isPrinting||!C||!_||T!==ie&&T!==ne||(C===s.containerWidth&&_===s.containerHeight||(U.clearTimeout(s.reflowTimeout),s.reflowTimeout=ze((function(){s.container&&s.setSize(void 0,void 0,!1)}),i?100:0)),s.containerWidth=C,s.containerHeight=_)},a.prototype.setReflow=function(i){var s=this;!1===i||this.unbindReflow?!1===i&&this.unbindReflow&&(this.unbindReflow=this.unbindReflow()):(this.unbindReflow=le(ie,"resize",(function(i){s.options&&s.reflow(i)})),le(this,"destroy",this.unbindReflow))},a.prototype.setSize=function(i,s,_){var T=this,S=T.renderer;T.isResizing+=1,X(_,T),_=S.globalAnimation,T.oldChartHeight=T.chartHeight,T.oldChartWidth=T.chartWidth,void 0!==i&&(T.options.chart.width=i),void 0!==s&&(T.options.chart.height=s),T.getChartSize(),T.styledMode||(_?Z:he)(T.container,{width:T.chartWidth+"px",height:T.chartHeight+"px"},_),T.setChartSize(!0),S.setSize(T.chartWidth,T.chartHeight,_),T.axes.forEach((function(i){i.isDirty=!0,i.setScale()})),T.isDirtyLegend=!0,T.isDirtyBox=!0,T.layOutTitles(),T.getMargins(),T.redraw(_),T.oldChartHeight=null,ye(T,"resize"),ze((function(){T&&ye(T,"endResize",null,(function(){--T.isResizing}))}),Y(_).duration)},a.prototype.setChartSize=function(i){var s,_,T,S,C=this.inverted,P=this.renderer,O=this.chartWidth,M=this.chartHeight,R=this.options.chart,D=this.spacing,j=this.clipOffset;this.plotLeft=s=Math.round(this.plotLeft),this.plotTop=_=Math.round(this.plotTop),this.plotWidth=T=Math.max(0,Math.round(O-s-this.marginRight)),this.plotHeight=S=Math.max(0,Math.round(M-_-this.marginBottom)),this.plotSizeX=C?S:T,this.plotSizeY=C?T:S,this.plotBorderWidth=R.plotBorderWidth||0,this.spacingBox=P.spacingBox={x:D[3],y:D[0],width:O-D[3]-D[1],height:M-D[0]-D[2]},this.plotBox=P.plotBox={x:s,y:_,width:T,height:S},C=2*Math.floor(this.plotBorderWidth/2),O=Math.ceil(Math.max(C,j[3])/2),M=Math.ceil(Math.max(C,j[0])/2),this.clipBox={x:O,y:M,width:Math.floor(this.plotSizeX-Math.max(C,j[1])/2-O),height:Math.max(0,Math.floor(this.plotSizeY-Math.max(C,j[2])/2-M))},i||(this.axes.forEach((function(i){i.setAxisSize(),i.setAxisTranslation()})),P.alignElements()),ye(this,"afterSetChartSize",{skipAxes:i})},a.prototype.resetMargins=function(){ye(this,"resetMargins");var i=this,s=i.options.chart;["margin","spacing"].forEach((function(_){var T=s[_],S=Te(T)?T:[T,T,T,T];["Top","Right","Bottom","Left"].forEach((function(T,C){i[_][C]=Ee(s[_+T],S[C])}))})),re.forEach((function(s,_){i[s]=Ee(i.margin[_],i.spacing[_])})),i.axisOffset=[0,0,0,0],i.clipOffset=[0,0,0,0]},a.prototype.drawChartBox=function(){var i,s=this.options.chart,_=this.renderer,T=this.chartWidth,S=this.chartHeight,C=this.styledMode,P=this.plotBGImage,O=s.backgroundColor,M=s.plotBackgroundColor,R=s.plotBackgroundImage,D=this.plotLeft,j=this.plotTop,$=this.plotWidth,U=this.plotHeight,V=this.plotBox,Z=this.clipRect,Y=this.clipBox,X=this.chartBackground,Q=this.plotBackground,ee=this.plotBorder,te="animate";if(X||(this.chartBackground=X=_.rect().addClass("highcharts-background").add(),te="attr"),C)var ne=i=X.strokeWidth();else i=(ne=s.borderWidth||0)+(s.shadow?8:0),O={fill:O||"none"},(ne||X["stroke-width"])&&(O.stroke=s.borderColor,O["stroke-width"]=ne),X.attr(O).shadow(s.shadow);X[te]({x:i/2,y:i/2,width:T-i-ne%2,height:S-i-ne%2,r:s.borderRadius}),te="animate",Q||(te="attr",this.plotBackground=Q=_.rect().addClass("highcharts-plot-background").add()),Q[te](V),C||(Q.attr({fill:M||"none"}).shadow(s.plotShadow),R&&(P?(R!==P.attr("href")&&P.attr("href",R),P.animate(V)):this.plotBGImage=_.image(R,D,j,$,U).add())),Z?Z.animate({width:Y.width,height:Y.height}):this.clipRect=_.clipRect(Y),te="animate",ee||(te="attr",this.plotBorder=ee=_.rect().addClass("highcharts-plot-border").attr({zIndex:1}).add()),C||ee.attr({stroke:s.plotBorderColor,"stroke-width":s.plotBorderWidth||0,fill:"none"}),ee[te](ee.crisp({x:D,y:j,width:$,height:U},-ee.strokeWidth())),this.isDirtyBox=!1,ye(this,"afterDrawChartBox")},a.prototype.propFromSeries=function(){var i,s,_,T=this,S=T.options.chart,C=T.options.series;["inverted","angular","polar"].forEach((function(P){for(s=oe[S.type||S.defaultSeriesType],_=S[P]||s&&s.prototype[P],i=C&&C.length;!_&&i--;)(s=oe[C[i].type])&&s.prototype[P]&&(_=!0);T[P]=_}))},a.prototype.linkSeries=function(){var i=this,s=i.series;s.forEach((function(i){i.linkedSeries.length=0})),s.forEach((function(s){var _=s.options.linkedTo;Se(_)&&(_=":previous"===_?i.series[s.index-1]:i.get(_))&&_.linkedParent!==s&&(_.linkedSeries.push(s),s.linkedParent=_,_.enabledDataSorting&&s.setDataSortingOptions(),s.visible=Ee(s.options.visible,_.options.visible,s.visible))})),ye(this,"afterLinkSeries")},a.prototype.renderSeries=function(){this.series.forEach((function(i){i.translate(),i.render()}))},a.prototype.renderLabels=function(){var i=this,s=i.options.labels;s.items&&s.items.forEach((function(_){var T=ve(s.style,_.style),S=Pe(T.left)+i.plotLeft,C=Pe(T.top)+i.plotTop+12;delete T.left,delete T.top,i.renderer.text(_.html,S,C).attr({zIndex:2}).css(T).add()}))},a.prototype.render=function(){var i=this.axes,s=this.colorAxis,_=this.renderer,T=this.options,e=function(i){i.forEach((function(i){i.visible&&i.render()}))},S=0;this.setTitle(),this.legend=new C(this,T.legend),this.getStacks&&this.getStacks(),this.getMargins(!0),this.setChartSize(),T=this.plotWidth,i.some((function(i){if(i.horiz&&i.visible&&i.options.labels.enabled&&i.series.length)return S=21,!0}));var P=this.plotHeight=Math.max(this.plotHeight-S,0);i.forEach((function(i){i.setScale()})),this.getAxisMargins();var O=1.1<T/this.plotWidth,M=1.05<P/this.plotHeight;(O||M)&&(i.forEach((function(i){(i.horiz&&O||!i.horiz&&M)&&i.setTickInterval(!0)})),this.getMargins()),this.drawChartBox(),this.hasCartesianSeries?e(i):s&&s.length&&e(s),this.seriesGroup||(this.seriesGroup=_.g("series-group").attr({zIndex:3}).add()),this.renderSeries(),this.renderLabels(),this.addCredits(),this.setResponsive&&this.setResponsive(),this.hasRendered=!0},a.prototype.addCredits=function(i){var s=this,_=Ce(!0,this.options.credits,i);_.enabled&&!this.credits&&(this.credits=this.renderer.text(_.text+(this.mapCredits||""),0,0).addClass("highcharts-credits").on("click",(function(){_.href&&(ie.location.href=_.href)})).attr({align:_.position.align,zIndex:8}),s.styledMode||this.credits.css(_.style),this.credits.add().align(_.position),this.credits.update=function(i){s.credits=s.credits.destroy(),s.addCredits(i)})},a.prototype.destroy=function(){var i,s=this,_=s.axes,T=s.series,C=s.container,P=C&&C.parentNode;for(ye(s,"destroy"),s.renderer.forExport?fe(te,s):te[s.index]=void 0,S.chartCount--,s.renderTo.removeAttribute("data-highcharts-chart"),Oe(s),i=_.length;i--;)_[i]=_[i].destroy();for(this.scroller&&this.scroller.destroy&&this.scroller.destroy(),i=T.length;i--;)T[i]=T[i].destroy();"title subtitle chartBackground plotBackground plotBGImage plotBorder seriesGroup clipRect credits pointer rangeSelector legend resetZoomButton tooltip renderer".split(" ").forEach((function(i){var _=s[i];_&&_.destroy&&(s[i]=_.destroy())})),C&&(C.innerHTML="",Oe(C),P&&me(C)),xe(s,(function(i,_){delete s[_]}))},a.prototype.firstRender=function(){var i=this,s=i.options;i.isReadyToRender&&!i.isReadyToRender()||(i.getContainer(),i.resetMargins(),i.setChartSize(),i.propFromSeries(),i.getAxes(),(we(s.series)?s.series:[]).forEach((function(s){i.initSeries(s)})),i.linkSeries(),i.setSeriesData(),ye(i,"beforeRender"),R&&(P.isRequired()?i.pointer=new P(i,s):i.pointer=new R(i,s)),i.render(),i.pointer.getChartPosition(),i.renderer.imgCount||i.hasLoaded||i.onload(),i.temporaryDisplay(!0))},a.prototype.onload=function(){this.callbacks.concat([this.callback]).forEach((function(i){i&&void 0!==this.index&&i.apply(this,[this])}),this),ye(this,"load"),ye(this,"render"),pe(this.index)&&this.setReflow(this.options.chart.reflow),this.hasLoaded=!0},a.prototype.addSeries=function(i,s,_){var T,S=this;return i&&(s=Ee(s,!0),ye(S,"addSeries",{options:i},(function(){T=S.initSeries(i),S.isDirtyLegend=!0,S.linkSeries(),T.enabledDataSorting&&T.setData(i.data,!1),ye(S,"afterAddSeries",{series:T}),s&&S.redraw(_)}))),T},a.prototype.addAxis=function(i,s,_,T){return this.createAxis(s?"xAxis":"yAxis",{axis:i,redraw:_,animation:T})},a.prototype.addColorAxis=function(i,s,_){return this.createAxis("colorAxis",{axis:i,redraw:s,animation:_})},a.prototype.createAxis=function(i,_){var T="colorAxis"===i,C=_.redraw,P=_.animation;return i=Ce(_.axis,{index:this[i].length,isX:"xAxis"===i}),i=T?new S.ColorAxis(this,i):new s(this,i),T&&(this.isDirtyLegend=!0,this.axes.forEach((function(i){i.series=[]})),this.series.forEach((function(i){i.bindAxes(),i.isDirtyData=!0}))),Ee(C,!0)&&this.redraw(P),i},a.prototype.showLoading=function(i){var s=this,_=s.options,T=_.loading,e=function(){S&&he(S,{left:s.plotLeft+"px",top:s.plotTop+"px",width:s.plotWidth+"px",height:s.plotHeight+"px"})},S=s.loadingDiv,C=s.loadingSpan;S||(s.loadingDiv=S=de("div",{className:"highcharts-loading highcharts-loading-hidden"},null,s.container)),C||(s.loadingSpan=C=de("span",{className:"highcharts-loading-inner"},null,S),le(s,"redraw",e)),S.className="highcharts-loading",V.setElementHTML(C,Ee(i,_.lang.loading,"")),s.styledMode||(he(S,ve(T.style,{zIndex:10})),he(C,T.labelStyle),s.loadingShown||(he(S,{opacity:0,display:""}),Z(S,{opacity:T.style.opacity||.5},{duration:T.showDuration||0}))),s.loadingShown=!0,e()},a.prototype.hideLoading=function(){var i=this.options,s=this.loadingDiv;s&&(s.className="highcharts-loading highcharts-loading-hidden",this.styledMode||Z(s,{opacity:0},{duration:i.loading.hideDuration||100,complete:function(){he(s,{display:"none"})}})),this.loadingShown=!1},a.prototype.update=function(i,s,_,T){var S,C,P=this,O={credits:"addCredits",title:"setTitle",subtitle:"setSubtitle",caption:"setCaption"},M=i.isResponsiveOptions,R=[];ye(P,"update",{options:i}),M||P.setResponsive(!1,!0),i=ue(i,P.options),P.userOptions=Ce(P.userOptions,i);var D=i.chart;if(D){if(Ce(!0,P.options.chart,D),"className"in D&&P.setClassName(D.className),"reflow"in D&&P.setReflow(D.reflow),"inverted"in D||"polar"in D||"type"in D){P.propFromSeries();var j=!0}"alignTicks"in D&&(j=!0),"events"in D&&ee(this,D),xe(D,(function(i,s){-1!==P.propsRequireUpdateSeries.indexOf("chart."+s)&&(S=!0),-1!==P.propsRequireDirtyBox.indexOf(s)&&(P.isDirtyBox=!0),-1!==P.propsRequireReflow.indexOf(s)&&(M?P.isDirtyBox=!0:C=!0)})),!P.styledMode&&"style"in D&&P.renderer.setStyle(D.style)}!P.styledMode&&i.colors&&(this.options.colors=i.colors),i.time&&(this.time===se&&(this.time=new $(i.time)),Ce(!0,P.options.time,i.time)),xe(i,(function(s,_){P[_]&&"function"==typeof P[_].update?P[_].update(s,!1):"function"==typeof P[O[_]]?P[O[_]](s):"colors"!==_&&-1===P.collectionsWithUpdate.indexOf(_)&&Ce(!0,P.options[_],i[_]),"chart"!==_&&-1!==P.propsRequireUpdateSeries.indexOf(_)&&(S=!0)})),this.collectionsWithUpdate.forEach((function(s){if(i[s]){var T=[];P[s].forEach((function(i,s){i.options.isInternal||T.push(Ee(i.options.index,s))})),Me(i[s]).forEach((function(i,S){var C,O=pe(i.id);O&&(C=P.get(i.id)),!C&&P[s]&&(C=P[s][T?T[S]:S])&&O&&pe(C.options.id)&&(C=void 0),C&&C.coll===s&&(C.update(i,!1),_&&(C.touched=!0)),!C&&_&&P.collectionsWithInit[s]&&(P.collectionsWithInit[s][0].apply(P,[i].concat(P.collectionsWithInit[s][1]||[]).concat([!1])).touched=!0)})),_&&P[s].forEach((function(i){i.touched||i.options.isInternal?delete i.touched:R.push(i)}))}})),R.forEach((function(i){i.chart&&i.remove(!1)})),j&&P.axes.forEach((function(i){i.update({},!1)})),S&&P.getSeriesOrderByLinks().forEach((function(i){i.chart&&i.update({},!1)}),this),j=D&&D.width,D=D&&(Se(D.height)?Ae(D.height,j||P.chartWidth):D.height),C||ke(j)&&j!==P.chartWidth||ke(D)&&D!==P.chartHeight?P.setSize(j,D,T):Ee(s,!0)&&P.redraw(T),ye(P,"afterUpdate",{options:i,redraw:s,animation:T})},a.prototype.setSubtitle=function(i,s){this.applyDescription("subtitle",i),this.layOutTitles(s)},a.prototype.setCaption=function(i,s){this.applyDescription("caption",i),this.layOutTitles(s)},a.prototype.showResetZoom=function(){function a(){i.zoomOut()}var i=this,s=ae.lang,_=i.options.chart.resetZoomButton,T=_.theme,S=T.states,C="chart"===_.relativeTo||"spacingBox"===_.relativeTo?null:"scrollablePlotBox";ye(this,"beforeShowResetZoom",null,(function(){i.resetZoomButton=i.renderer.button(s.resetZoom,null,null,a,T,S&&S.hover).attr({align:_.position.align,title:s.resetZoomTitle}).addClass("highcharts-reset-zoom").add().align(_.position,!1,C)})),ye(this,"afterShowResetZoom")},a.prototype.zoomOut=function(){ye(this,"selection",{resetSelection:!0},this.zoom)},a.prototype.zoom=function(i){var s,_=this,T=_.pointer,S=_.inverted?T.mouseDownX:T.mouseDownY,C=!1;!i||i.resetSelection?(_.axes.forEach((function(i){s=i.zoom()})),T.initiated=!1):i.xAxis.concat(i.yAxis).forEach((function(i){var P=i.axis,O=_.inverted?P.left:P.top,M=_.inverted?O+P.width:O+P.height,R=P.isXAxis,D=!1;(!R&&S>=O&&S<=M||R||!pe(S))&&(D=!0),T[R?"zoomX":"zoomY"]&&D&&(s=P.zoom(i.min,i.max),P.displayBtn&&(C=!0))}));var P=_.resetZoomButton;C&&!P?_.showResetZoom():!C&&Te(P)&&(_.resetZoomButton=P.destroy()),s&&_.redraw(Ee(_.options.chart.animation,i&&i.animation,100>_.pointCount))},a.prototype.pan=function(i,s){var _=this,T=_.hoverPoints;s="object"==typeof s?s:{enabled:s,type:"x"};var S=_.options.chart,C=_.options.mapNavigation&&_.options.mapNavigation.enabled;S&&S.panning&&(S.panning=s);var P,O=s.type;ye(this,"pan",{originalEvent:i},(function(){T&&T.forEach((function(i){i.setState()}));var s=_.xAxis;"xy"===O?s=s.concat(_.yAxis):"y"===O&&(s=_.yAxis);var S={};s.forEach((function(s){if(s.options.panningEnabled&&!s.options.isInternal){var T=s.horiz,M=i[T?"chartX":"chartY"],R=_[T=T?"mouseDownX":"mouseDownY"],D=s.minPointOffset||0,j=s.reversed&&!_.inverted||!s.reversed&&_.inverted?-1:1,$=s.getExtremes(),U=s.toValue(R-M,!0)+D*j,V=s.toValue(R+s.len-M,!0)-(D*j||s.isXAxis&&s.pointRangePadding||0),Z=V<U;j=s.hasVerticalPanning(),R=Z?V:U,U=Z?U:V;var Y=s.panningState;!j||s.isXAxis||Y&&!Y.isDirty||s.series.forEach((function(i){var s=i.getProcessedData(!0);s=i.getExtremes(s.yData,!0),Y||(Y={startMin:Number.MAX_VALUE,startMax:-Number.MAX_VALUE}),ke(s.dataMin)&&ke(s.dataMax)&&(Y.startMin=Math.min(Ee(i.options.threshold,1/0),s.dataMin,Y.startMin),Y.startMax=Math.max(Ee(i.options.threshold,-1/0),s.dataMax,Y.startMax))})),j=Math.min(Ee(Y&&Y.startMin,$.dataMin),D?$.min:s.toValue(s.toPixels($.min)-s.minPixelPadding)),V=Math.max(Ee(Y&&Y.startMax,$.dataMax),D?$.max:s.toValue(s.toPixels($.max)+s.minPixelPadding)),s.panningState=Y,s.isOrdinal||(0<(D=j-R)&&(U+=D,R=j),0<(D=U-V)&&(U=V,R-=D),s.series.length&&R!==$.min&&U!==$.max&&R>=j&&U<=V&&(s.setExtremes(R,U,!1,!1,{trigger:"pan"}),_.resetZoomButton||C||R===j||U===V||!O.match("y")||(_.showResetZoom(),s.displayBtn=!1),P=!0),S[T]=M)}})),xe(S,(function(i,s){_[s]=i})),P&&_.redraw(!1),he(_.container,{cursor:"move"})}))},a}(),ve(i.prototype,{callbacks:[],collectionsWithInit:{xAxis:[i.prototype.addAxis,[!0]],yAxis:[i.prototype.addAxis,[!1]],series:[i.prototype.addSeries]},collectionsWithUpdate:["xAxis","yAxis","zAxis","series"],propsRequireDirtyBox:"backgroundColor borderColor borderWidth borderRadius plotBackgroundColor plotBackgroundImage plotBorderColor plotBorderWidth plotShadow shadow".split(" "),propsRequireReflow:"margin marginTop marginRight marginBottom marginLeft spacing spacingTop spacingRight spacingBottom spacingLeft".split(" "),propsRequireUpdateSeries:"chart.inverted chart.polar chart.ignoreHiddenSeries chart.type colors plotOptions time tooltip".split(" ")}),i})),L(s,"Mixins/LegendSymbol.js",[s["Core/Globals.js"],s["Core/Utilities.js"]],(function(i,s){var _=s.merge,T=s.pick;return i.LegendSymbolMixin={drawRectangle:function(i,s){var _=i.symbolHeight,S=i.options.squareSymbol;s.legendSymbol=this.chart.renderer.rect(S?(i.symbolWidth-_)/2:0,i.baseline-_+1,S?_:i.symbolWidth,_,T(i.options.symbolRadius,_/2)).addClass("highcharts-point").attr({zIndex:3}).add(s.legendGroup)},drawLineMarker:function(i){var s=this.options,S=s.marker,C=i.symbolWidth,P=i.symbolHeight,O=P/2,M=this.chart.renderer,R=this.legendGroup;i=i.baseline-Math.round(.3*i.fontMetrics.b);var D={};this.chart.styledMode||(D={"stroke-width":s.lineWidth||0},s.dashStyle&&(D.dashstyle=s.dashStyle)),this.legendLine=M.path([["M",0,i],["L",C,i]]).addClass("highcharts-graph").attr(D).add(R),S&&!1!==S.enabled&&C&&(s=Math.min(T(S.radius,O),O),0===this.symbol.indexOf("url")&&(S=_(S,{width:P,height:P}),s=0),this.legendSymbol=S=M.symbol(this.symbol,C/2-s,i-s,2*s,2*s,S).addClass("highcharts-point").add(R),S.isMarker=!0)}}})),L(s,"Core/Series/Series.js",[s["Core/Animation/AnimationUtilities.js"],s["Core/Foundation.js"],s["Core/Globals.js"],s["Mixins/LegendSymbol.js"],s["Core/DefaultOptions.js"],s["Core/Color/Palette.js"],s["Core/Series/Point.js"],s["Core/Series/SeriesRegistry.js"],s["Core/Renderer/SVG/SVGElement.js"],s["Core/Utilities.js"]],(function(i,s,_,T,S,C,P,O,M,R){var D=i.animObject,j=i.setAnimation,$=s.registerEventOptions,U=_.hasTouch,V=_.svg,Z=_.win,Y=S.defaultOptions,X=O.seriesTypes,Q=R.addEvent,ee=R.arrayMax,te=R.arrayMin,ne=R.clamp,re=R.cleanRecursively,ie=R.correctFloat,ae=R.defined,se=R.erase,oe=R.error,le=R.extend,ce=R.find,ue=R.fireEvent,de=R.getNestedProperty,he=R.isArray,pe=R.isNumber,me=R.isString,fe=R.merge,ge=R.objectEach,ve=R.pick,be=R.removeEvent,ye=R.splat,_e=R.syncTimeout;return i=function(){function a(){this.zones=this.yAxis=this.xAxis=this.userOptions=this.tooltipOptions=this.processedYData=this.processedXData=this.points=this.options=this.linkedSeries=this.index=this.eventsToUnbind=this.eventOptions=this.data=this.chart=this._i=void 0}return a.prototype.init=function(i,s){ue(this,"init",{options:s});var _=this,T=i.series;this.eventsToUnbind=[],_.chart=i,_.options=_.setOptions(s),s=_.options,_.linkedSeries=[],_.bindAxes(),le(_,{name:s.name,state:"",visible:!1!==s.visible,selected:!0===s.selected}),$(this,s);var S,C=s.events;(C&&C.click||s.point&&s.point.events&&s.point.events.click||s.allowPointSelect)&&(i.runTrackerClick=!0),_.getColor(),_.getSymbol(),_.parallelArrays.forEach((function(i){_[i+"Data"]||(_[i+"Data"]=[])})),_.isCartesian&&(i.hasCartesianSeries=!0),T.length&&(S=T[T.length-1]),_._i=ve(S&&S._i,-1)+1,_.opacity=_.options.opacity,i.orderSeries(this.insert(T)),s.dataSorting&&s.dataSorting.enabled?_.setDataSortingOptions():_.points||_.data||_.setData(s.data,!1),ue(this,"afterInit")},a.prototype.is=function(i){return X[i]&&this instanceof X[i]},a.prototype.insert=function(i){var s,_=this.options.index;if(pe(_)){for(s=i.length;s--;)if(_>=ve(i[s].options.index,i[s]._i)){i.splice(s+1,0,this);break}-1===s&&i.unshift(this),s+=1}else i.push(this);return ve(s,i.length-1)},a.prototype.bindAxes=function(){var i,s=this,_=s.options,T=s.chart;ue(this,"bindAxes",null,(function(){(s.axisTypes||[]).forEach((function(S){var C=0;T[S].forEach((function(T){i=T.options,(_[S]===C&&!i.isInternal||void 0!==_[S]&&_[S]===i.id||void 0===_[S]&&0===i.index)&&(s.insert(T.series),s[S]=T,T.isDirty=!0),i.isInternal||C++})),s[S]||s.optionalAxis===S||oe(18,!0,T)}))})),ue(this,"afterBindAxes")},a.prototype.updateParallelArrays=function(i,s){var _=i.series,T=arguments,S=pe(s)?function(T){var S="y"===T&&_.toYData?_.toYData(i):i[T];_[T+"Data"][s]=S}:function(i){Array.prototype[s].apply(_[i+"Data"],Array.prototype.slice.call(T,2))};_.parallelArrays.forEach(S)},a.prototype.hasData=function(){return this.visible&&void 0!==this.dataMax&&void 0!==this.dataMin||this.visible&&this.yData&&0<this.yData.length},a.prototype.autoIncrement=function(){var i,s=this.options,_=this.xIncrement,T=s.pointIntervalUnit,S=this.chart.time;return _=ve(_,s.pointStart,0),this.pointInterval=i=ve(this.pointInterval,s.pointInterval,1),T&&(s=new S.Date(_),"day"===T?S.set("Date",s,S.get("Date",s)+i):"month"===T?S.set("Month",s,S.get("Month",s)+i):"year"===T&&S.set("FullYear",s,S.get("FullYear",s)+i),i=s.getTime()-_),this.xIncrement=_+i,_},a.prototype.setDataSortingOptions=function(){var i=this.options;le(this,{requireSorting:!1,sorted:!1,enabledDataSorting:!0,allowDG:!1}),ae(i.pointRange)||(i.pointRange=1)},a.prototype.setOptions=function(i){var s=this.chart,_=s.options,T=_.plotOptions,S=s.userOptions||{};i=fe(i),s=s.styledMode;var C={plotOptions:T,userOptions:i};ue(this,"setOptions",C);var P=C.plotOptions[this.type],O=S.plotOptions||{};return this.userOptions=C.userOptions,S=fe(P,T.series,S.plotOptions&&S.plotOptions[this.type],i),this.tooltipOptions=fe(Y.tooltip,Y.plotOptions.series&&Y.plotOptions.series.tooltip,Y.plotOptions[this.type].tooltip,_.tooltip.userOptions,T.series&&T.series.tooltip,T[this.type].tooltip,i.tooltip),this.stickyTracking=ve(i.stickyTracking,O[this.type]&&O[this.type].stickyTracking,O.series&&O.series.stickyTracking,!(!this.tooltipOptions.shared||this.noSharedTooltip)||S.stickyTracking),null===P.marker&&delete S.marker,this.zoneAxis=S.zoneAxis,_=this.zones=(S.zones||[]).slice(),!S.negativeColor&&!S.negativeFillColor||S.zones||(T={value:S[this.zoneAxis+"Threshold"]||S.threshold||0,className:"highcharts-negative"},s||(T.color=S.negativeColor,T.fillColor=S.negativeFillColor),_.push(T)),_.length&&ae(_[_.length-1].value)&&_.push(s?{}:{color:this.color,fillColor:this.fillColor}),ue(this,"afterSetOptions",{options:S}),S},a.prototype.getName=function(){return ve(this.options.name,"Series "+(this.index+1))},a.prototype.getCyclic=function(i,s,_){var T=this.chart,S=this.userOptions,C=i+"Index",P=i+"Counter",O=_?_.length:ve(T.options.chart[i+"Count"],T[i+"Count"]);if(!s){var M=ve(S[C],S["_"+C]);ae(M)||(T.series.length||(T[P]=0),S["_"+C]=M=T[P]%O,T[P]+=1),_&&(s=_[M])}void 0!==M&&(this[C]=M),this[i]=s},a.prototype.getColor=function(){this.chart.styledMode?this.getCyclic("color"):this.options.colorByPoint?this.color=C.neutralColor20:this.getCyclic("color",this.options.color||Y.plotOptions[this.type].color,this.chart.options.colors)},a.prototype.getPointsCollection=function(){return(this.hasGroupedData?this.points:this.data)||[]},a.prototype.getSymbol=function(){this.getCyclic("symbol",this.options.marker.symbol,this.chart.options.symbols)},a.prototype.findPointIndex=function(i,s){var _,T=i.id,S=i.x,C=this.points,P=this.options.dataSorting;if(T)var O=this.chart.get(T);else if(this.linkedParent||this.enabledDataSorting){var M=P&&P.matchByName?"name":"index";if(O=ce(C,(function(s){return!s.touched&&s[M]===i[M]})),!O)return}if(O){var R=O&&O.index;void 0!==R&&(_=!0)}return void 0===R&&pe(S)&&(R=this.xData.indexOf(S,s)),-1!==R&&void 0!==R&&this.cropped&&(R=R>=this.cropStart?R-this.cropStart:R),!_&&C[R]&&C[R].touched&&(R=void 0),R},a.prototype.updateData=function(i,s){var _,T,S,C=this.options,P=C.dataSorting,O=this.points,M=[],R=this.requireSorting,D=i.length===O.length,j=!0;if(this.xIncrement=null,i.forEach((function(i,s){var T=ae(i)&&this.pointClass.prototype.optionsToObject.call({series:this},i)||{},j=T.x;T.id||pe(j)?(-1===(j=this.findPointIndex(T,S))||void 0===j?M.push(i):O[j]&&i!==C.data[j]?(O[j].update(i,!1,null,!1),O[j].touched=!0,R&&(S=j+1)):O[j]&&(O[j].touched=!0),(!D||s!==j||P&&P.enabled||this.hasDerivedData)&&(_=!0)):M.push(i)}),this),_)for(i=O.length;i--;)(T=O[i])&&!T.touched&&T.remove&&T.remove(!1,s);else!D||P&&P.enabled?j=!1:(i.forEach((function(i,s){i!==O[s].y&&O[s].update&&O[s].update(i,!1,null,!1)})),M.length=0);return O.forEach((function(i){i&&(i.touched=!1)})),!!j&&(M.forEach((function(i){this.addPoint(i,!1,null,null,!1)}),this),null===this.xIncrement&&this.xData&&this.xData.length&&(this.xIncrement=ee(this.xData),this.autoIncrement()),!0)},a.prototype.setData=function(i,s,_,T){var S,C=this,P=C.points,O=P&&P.length||0,M=C.options,R=C.chart,D=M.dataSorting,j=null,$=C.xAxis;j=M.turboThreshold;var U,V=this.xData,Z=this.yData,Y=(S=C.pointArrayMap)&&S.length,X=M.keys,Q=0,ee=1;if(S=(i=i||[]).length,s=ve(s,!0),D&&D.enabled&&(i=this.sortData(i)),!1!==T&&S&&O&&!C.cropped&&!C.hasGroupedData&&C.visible&&!C.isSeriesBoosting&&(U=this.updateData(i,_)),!U){if(C.xIncrement=null,C.colorCounter=0,this.parallelArrays.forEach((function(i){C[i+"Data"].length=0})),j&&S>j)if(j=C.getFirstValidPoint(i),pe(j))for(_=0;_<S;_++)V[_]=this.autoIncrement(),Z[_]=i[_];else if(he(j))if(Y)for(_=0;_<S;_++)T=i[_],V[_]=T[0],Z[_]=T.slice(1,Y+1);else for(X&&(Q=0<=(Q=X.indexOf("x"))?Q:0,ee=0<=(ee=X.indexOf("y"))?ee:1),_=0;_<S;_++)T=i[_],V[_]=T[Q],Z[_]=T[ee];else oe(12,!1,R);else for(_=0;_<S;_++)void 0!==i[_]&&(T={series:C},C.pointClass.prototype.applyOptions.apply(T,[i[_]]),C.updateParallelArrays(T,_));for(Z&&me(Z[0])&&oe(14,!0,R),C.data=[],C.options.data=C.userOptions.data=i,_=O;_--;)P[_]&&P[_].destroy&&P[_].destroy();$&&($.minRange=$.userMinRange),C.isDirty=R.isDirtyBox=!0,C.isDirtyData=!!P,_=!1}"point"===M.legendType&&(this.processData(),this.generatePoints()),s&&R.redraw(_)},a.prototype.sortData=function(i){var s=this,_=s.options.dataSorting.sortKey||"y",e=function(i,s){return ae(s)&&i.pointClass.prototype.optionsToObject.call({series:i},s)||{}};return i.forEach((function(_,T){i[T]=e(s,_),i[T].index=T}),this),i.concat().sort((function(i,s){return i=de(_,i),(s=de(_,s))<i?-1:s>i?1:0})).forEach((function(i,s){i.x=s}),this),s.linkedSeries&&s.linkedSeries.forEach((function(s){var _=s.options,T=_.data;_.dataSorting&&_.dataSorting.enabled||!T||(T.forEach((function(_,S){T[S]=e(s,_),i[S]&&(T[S].x=i[S].x,T[S].index=S)})),s.setData(T,!1))})),i},a.prototype.getProcessedData=function(i){var s=this.xData,_=this.yData,T=s.length,S=0,C=this.xAxis,P=this.options,O=P.cropThreshold,M=i||this.getExtremesFromAll||P.getExtremesFromAll,R=this.isCartesian;i=C&&C.val2lin,P=!(!C||!C.logarithmic);var D=this.requireSorting;if(C)var j=(C=C.getExtremes()).min,$=C.max;if(R&&this.sorted&&!M&&(!O||T>O||this.forceCrop))if(s[T-1]<j||s[0]>$)s=[],_=[];else if(this.yData&&(s[0]<j||s[T-1]>$)){s=(S=this.cropData(this.xData,this.yData,j,$)).xData,_=S.yData,S=S.start;var U=!0}for(O=s.length||1;--O;)if(0<(T=P?i(s[O])-i(s[O-1]):s[O]-s[O-1])&&(void 0===V||T<V))var V=T;else 0>T&&D&&(oe(15,!1,this.chart),D=!1);return{xData:s,yData:_,cropped:U,cropStart:S,closestPointRange:V}},a.prototype.processData=function(i){var s=this.xAxis;if(this.isCartesian&&!this.isDirty&&!s.isDirty&&!this.yAxis.isDirty&&!i)return!1;i=this.getProcessedData(),this.cropped=i.cropped,this.cropStart=i.cropStart,this.processedXData=i.xData,this.processedYData=i.yData,this.closestPointRange=this.basePointRange=i.closestPointRange},a.prototype.cropData=function(i,s,_,T,S){var C,P=i.length,O=0,M=P;for(S=ve(S,this.cropShoulder),C=0;C<P;C++)if(i[C]>=_){O=Math.max(0,C-S);break}for(_=C;_<P;_++)if(i[_]>T){M=_+S;break}return{xData:i.slice(O,M),yData:s.slice(O,M),start:O,end:M}},a.prototype.generatePoints=function(){var i,s,_=this.options,T=_.data,S=this.data,C=this.processedXData,P=this.processedYData,O=this.pointClass,M=C.length,R=this.cropStart||0,D=this.hasGroupedData,j=_.keys,$=[];for(_=_.dataGrouping&&_.dataGrouping.groupAll?R:0,S||D||((S=[]).length=T.length,S=this.data=S),j&&D&&(this.options.keys=!1),s=0;s<M;s++){var U=R+s;if(D){var V=(new O).init(this,[C[s]].concat(ye(P[s])));V.dataGroup=this.groupMap[_+s],V.dataGroup.options&&(V.options=V.dataGroup.options,le(V,V.dataGroup.options),delete V.dataLabels)}else(V=S[U])||void 0===T[U]||(S[U]=V=(new O).init(this,T[U],C[s]));V&&(V.index=D?_+s:U,$[s]=V)}if(this.options.keys=j,S&&(M!==(i=S.length)||D))for(s=0;s<i;s++)s!==R||D||(s+=M),S[s]&&(S[s].destroyElements(),S[s].plotX=void 0);this.data=S,this.points=$,ue(this,"afterGeneratePoints")},a.prototype.getXExtremes=function(i){return{min:te(i),max:ee(i)}},a.prototype.getExtremes=function(i,s){var _,T=this.xAxis,S=this.yAxis,C=this.processedXData||this.xData,P=[],O=0,M=0,R=0,D=this.requireSorting?this.cropShoulder:0,j=!!S&&S.positiveValuesOnly;for(S=(i=i||this.stackedYData||this.processedYData||[]).length,T&&(M=(R=T.getExtremes()).min,R=R.max),_=0;_<S;_++){var $=C[_],U=i[_],V=(pe(U)||he(U))&&(U.length||0<U||!j);if($=s||this.getExtremesFromAll||this.options.getExtremesFromAll||this.cropped||!T||(C[_+D]||$)>=M&&(C[_-D]||$)<=R,V&&$)if(V=U.length)for(;V--;)pe(U[V])&&(P[O++]=U[V]);else P[O++]=U}return i={dataMin:te(P),dataMax:ee(P)},ue(this,"afterGetExtremes",{dataExtremes:i}),i},a.prototype.applyExtremes=function(){var i=this.getExtremes();return this.dataMin=i.dataMin,this.dataMax=i.dataMax,i},a.prototype.getFirstValidPoint=function(i){for(var s=null,_=i.length,T=0;null===s&&T<_;)s=i[T],T++;return s},a.prototype.translate=function(){this.processedXData||this.processData(),this.generatePoints();var i,s,_=this.options,T=_.stacking,S=this.xAxis,C=S.categories,P=this.enabledDataSorting,O=this.yAxis,M=this.points,R=M.length,D=!!this.modifyValue,j=this.pointPlacementToXValue(),$=!!j,U=_.threshold,V=_.startFromThreshold?U:0,Z=this.zoneAxis||"y",Y=Number.MAX_VALUE;for(i=0;i<R;i++){var X=M[i],Q=X.x,ee=X.y,te=X.low,re=T&&O.stacking&&O.stacking.stacks[(this.negStacks&&ee<(V?0:U)?"-":"")+this.stackKey],se=void 0,oe=void 0;if((O.positiveValuesOnly&&!O.validatePositiveValue(ee)||S.positiveValuesOnly&&!S.validatePositiveValue(Q))&&(X.isNull=!0),X.plotX=s=ie(ne(S.translate(Q,0,0,0,1,j,"flags"===this.type),-1e5,1e5)),T&&this.visible&&re&&re[Q]){var le=this.getStackIndicator(le,Q,this.index);X.isNull||(oe=(se=re[Q]).points[le.key])}if(he(oe)&&(te=oe[0],ee=oe[1],te===V&&le.key===re[Q].base&&(te=ve(pe(U)&&U,O.min)),O.positiveValuesOnly&&0>=te&&(te=null),X.total=X.stackTotal=se.total,X.percentage=se.total&&X.y/se.total*100,X.stackY=ee,this.irregularWidths||se.setOffset(this.pointXOffset||0,this.barW||0)),X.yBottom=ae(te)?ne(O.translate(te,0,1,0,1),-1e5,1e5):null,D&&(ee=this.modifyValue(ee,X)),X.plotY=void 0,pe(ee)&&void 0!==(ee=O.translate(ee,!1,!0,!1,!0))&&(X.plotY=ne(ee,-1e5,1e5)),X.isInside=this.isPointInside(X),X.clientX=$?ie(S.translate(Q,0,0,0,1,j)):s,X.negative=X[Z]<(_[Z+"Threshold"]||U||0),X.category=C&&void 0!==C[X.x]?C[X.x]:X.x,!X.isNull&&!1!==X.visible){void 0!==ce&&(Y=Math.min(Y,Math.abs(s-ce)));var ce=s}X.zone=this.zones.length&&X.getZone(),!X.graphic&&this.group&&P&&(X.isNew=!0)}this.closestPointRangePx=Y,ue(this,"afterTranslate")},a.prototype.getValidPoints=function(i,s,_){var T=this.chart;return(i||this.points||[]).filter((function(i){return!(s&&!T.isInsidePlot(i.plotX,i.plotY,{inverted:T.inverted}))&&!1!==i.visible&&(_||!i.isNull)}))},a.prototype.getClipBox=function(i,s){var _=this.options,T=this.chart,S=T.inverted,C=this.xAxis,P=C&&this.yAxis,O=T.options.chart.scrollablePlotArea||{};return i&&!1===_.clip&&P?i=S?{y:-T.chartWidth+P.len+P.pos,height:T.chartWidth,width:T.chartHeight,x:-T.chartHeight+C.len+C.pos}:{y:-P.pos,height:T.chartHeight,width:T.chartWidth,x:-C.pos}:(i=this.clipBox||T.clipBox,s&&(i.width=T.plotSizeX,i.x=(T.scrollablePixelsX||0)*(O.scrollPositionX||0))),s?{width:i.width,x:i.x}:i},a.prototype.getSharedClipKey=function(i){if(this.sharedClipKey)return this.sharedClipKey;var s=[i&&i.duration,i&&i.easing,i&&i.defer,this.getClipBox(i).height,this.options.xAxis,this.options.yAxis].join();return(!1!==this.options.clip||i)&&(this.sharedClipKey=s),s},a.prototype.setClip=function(i){var s=this.chart,_=this.options,T=s.renderer,S=s.inverted,C=this.clipBox,P=this.getClipBox(i),O=this.getSharedClipKey(i),M=s.sharedClips[O],R=s.sharedClips[O+"m"];i&&(P.width=0,S&&(P.x=s.plotHeight+(!1!==_.clip?0:s.plotTop))),M?s.hasLoaded||M.attr(P):(i&&(s.sharedClips[O+"m"]=R=T.clipRect(S?(s.plotSizeX||0)+99:-99,S?-s.plotLeft:-s.plotTop,99,S?s.chartWidth:s.chartHeight)),s.sharedClips[O]=M=T.clipRect(P),M.count={length:0}),i&&!M.count[this.index]&&(M.count[this.index]=!0,M.count.length+=1),(!1!==_.clip||i)&&(this.group.clip(i||C?M:s.clipRect),this.markerGroup.clip(R)),i||(M.count[this.index]&&(delete M.count[this.index],--M.count.length),0===M.count.length&&(C||(s.sharedClips[O]=M.destroy()),R&&(s.sharedClips[O+"m"]=R.destroy())))},a.prototype.animate=function(i){var s=this.chart,_=D(this.options.animation),T=this.sharedClipKey;if(i)this.setClip(_);else if(T){i=s.sharedClips[T],T=s.sharedClips[T+"m"];var S=this.getClipBox(_,!0);i&&i.animate(S,_),T&&T.animate({width:S.width+99,x:S.x-(s.inverted?0:99)},_)}},a.prototype.afterAnimate=function(){this.setClip(),ue(this,"afterAnimate"),this.finishedAnimating=!0},a.prototype.drawPoints=function(){var i,s,_=this.points,T=this.chart,S=this.options.marker,C=this[this.specialGroup]||this.markerGroup,P=this.xAxis,O=ve(S.enabled,!(P&&!P.isRadial)||null,this.closestPointRangePx>=S.enabledThreshold*S.radius);if(!1!==S.enabled||this._hasPointMarkers)for(i=0;i<_.length;i++){var M=_[i],R=(s=M.graphic)?"animate":"attr",D=M.marker||{},j=!!M.marker;if((O&&void 0===D.enabled||D.enabled)&&!M.isNull&&!1!==M.visible){var $=ve(D.symbol,this.symbol,"rect"),U=this.markerAttribs(M,M.selected&&"select");this.enabledDataSorting&&(M.startXPos=P.reversed?-(U.width||0):P.width);var V=!1!==M.isInside;s?s[V?"show":"hide"](V).animate(U):V&&(0<(U.width||0)||M.hasImage)&&(M.graphic=s=T.renderer.symbol($,U.x,U.y,U.width,U.height,j?D:S).add(C),this.enabledDataSorting&&T.hasRendered&&(s.attr({x:M.startXPos}),R="animate")),s&&"animate"===R&&s[V?"show":"hide"](V).animate(U),s&&!T.styledMode&&s[R](this.pointAttribs(M,M.selected&&"select")),s&&s.addClass(M.getClassName(),!0)}else s&&(M.graphic=s.destroy())}},a.prototype.markerAttribs=function(i,s){var _=this.options,T=_.marker,S=i.marker||{},C=S.symbol||T.symbol,P=ve(S.radius,T.radius);return s&&(T=T.states[s],s=S.states&&S.states[s],P=ve(s&&s.radius,T&&T.radius,P+(T&&T.radiusPlus||0))),i.hasImage=C&&0===C.indexOf("url"),i.hasImage&&(P=0),i={x:_.crisp?Math.floor(i.plotX-P):i.plotX-P,y:i.plotY-P},P&&(i.width=i.height=2*P),i},a.prototype.pointAttribs=function(i,s){var _=this.options.marker,T=i&&i.options,S=T&&T.marker||{},C=this.color,P=T&&T.color,O=i&&i.color;T=ve(S.lineWidth,_.lineWidth);var M=i&&i.zone&&i.zone.color;return i=1,C=P||M||O||C,P=S.fillColor||_.fillColor||C,C=S.lineColor||_.lineColor||C,s=s||"normal",_=_.states[s],s=S.states&&S.states[s]||{},T=ve(s.lineWidth,_.lineWidth,T+ve(s.lineWidthPlus,_.lineWidthPlus,0)),P=s.fillColor||_.fillColor||P,{stroke:C=s.lineColor||_.lineColor||C,"stroke-width":T,fill:P,opacity:i=ve(s.opacity,_.opacity,i)}},a.prototype.destroy=function(i){var s,_,T,S=this,C=S.chart,P=/AppleWebKit\/533/.test(Z.navigator.userAgent),O=S.data||[];for(ue(S,"destroy"),this.removeEvents(i),(S.axisTypes||[]).forEach((function(i){(T=S[i])&&T.series&&(se(T.series,S),T.isDirty=T.forceRedraw=!0)})),S.legendItem&&S.chart.legend.destroyItem(S),s=O.length;s--;)(_=O[s])&&_.destroy&&_.destroy();S.clips&&S.clips.forEach((function(i){return i.destroy()})),R.clearTimeout(S.animationTimeout),ge(S,(function(i,s){i instanceof M&&!i.survive&&i[P&&"group"===s?"hide":"destroy"]()})),C.hoverSeries===S&&(C.hoverSeries=void 0),se(C.series,S),C.orderSeries(),ge(S,(function(s,_){i&&"hcEvents"===_||delete S[_]}))},a.prototype.applyZones=function(){var i,s,_,T,S,C,P,O,M=this,R=this.chart,D=R.renderer,j=this.zones,$=this.clips||[],U=this.graph,V=this.area,Z=Math.max(R.chartWidth,R.chartHeight),Y=this[(this.zoneAxis||"y")+"Axis"],X=R.inverted,Q=!1;if(j.length&&(U||V)&&Y&&void 0!==Y.min){var ee=Y.reversed,te=Y.horiz;U&&!this.showLine&&U.hide(),V&&V.hide();var re=Y.getExtremes();j.forEach((function(j,ie){i=ee?te?R.plotWidth:0:te?0:Y.toPixels(re.min)||0,i=ne(ve(s,i),0,Z),s=ne(Math.round(Y.toPixels(ve(j.value,re.max),!0)||0),0,Z),Q&&(i=s=Y.toPixels(re.max)),T=Math.abs(i-s),S=Math.min(i,s),C=Math.max(i,s),Y.isXAxis?(_={x:X?C:S,y:0,width:T,height:Z},te||(_.x=R.plotHeight-_.x)):(_={x:0,y:X?C:S,width:Z,height:T},te&&(_.y=R.plotWidth-_.y)),X&&D.isVML&&(_=Y.isXAxis?{x:0,y:ee?S:C,height:_.width,width:R.chartWidth}:{x:_.y-R.plotLeft-R.spacingBox.x,y:0,width:_.height,height:R.chartHeight}),$[ie]?$[ie].animate(_):$[ie]=D.clipRect(_),P=M["zone-area-"+ie],O=M["zone-graph-"+ie],U&&O&&O.clip($[ie]),V&&P&&P.clip($[ie]),Q=j.value>re.max,M.resetZones&&0===s&&(s=void 0)})),this.clips=$}else M.visible&&(U&&U.show(!0),V&&V.show(!0))},a.prototype.invertGroups=function(i){function b(){["group","markerGroup"].forEach((function(T){s[T]&&(_.renderer.isVML&&s[T].attr({width:s.yAxis.len,height:s.xAxis.len}),s[T].width=s.yAxis.len,s[T].height=s.xAxis.len,s[T].invert(!s.isRadialSeries&&i))}))}var s=this,_=s.chart;s.xAxis&&(s.eventsToUnbind.push(Q(_,"resize",b)),b(),s.invertGroups=b)},a.prototype.plotGroup=function(i,s,_,T,S){var C=this[i],P=!C;return _={visibility:_,zIndex:T||.1},void 0===this.opacity||this.chart.styledMode||"inactive"===this.state||(_.opacity=this.opacity),P&&(this[i]=C=this.chart.renderer.g().add(S)),C.addClass("highcharts-"+s+" highcharts-series-"+this.index+" highcharts-"+this.type+"-series "+(ae(this.colorIndex)?"highcharts-color-"+this.colorIndex+" ":"")+(this.options.className||"")+(C.hasClass("highcharts-tracker")?" highcharts-tracker":""),!0),C.attr(_)[P?"attr":"animate"](this.getPlotBox()),C},a.prototype.getPlotBox=function(){var i=this.chart,s=this.xAxis,_=this.yAxis;return i.inverted&&(s=_,_=this.xAxis),{translateX:s?s.left:i.plotLeft,translateY:_?_.top:i.plotTop,scaleX:1,scaleY:1}},a.prototype.removeEvents=function(i){i||be(this),this.eventsToUnbind.length&&(this.eventsToUnbind.forEach((function(i){i()})),this.eventsToUnbind.length=0)},a.prototype.render=function(){var i=this,s=i.chart,_=i.options,T=D(_.animation),S=!i.finishedAnimating&&s.renderer.isSVG&&T.duration,C=i.visible?"inherit":"hidden",P=_.zIndex,O=i.hasRendered,M=s.seriesGroup,R=s.inverted;ue(this,"render");var j=i.plotGroup("group","series",C,P,M);i.markerGroup=i.plotGroup("markerGroup","markers",C,P,M),S&&i.animate&&i.animate(!0),j.inverted=!!ve(i.invertible,i.isCartesian)&&R,i.drawGraph&&(i.drawGraph(),i.applyZones()),i.visible&&i.drawPoints(),i.drawDataLabels&&i.drawDataLabels(),i.redrawPoints&&i.redrawPoints(),i.drawTracker&&!1!==i.options.enableMouseTracking&&i.drawTracker(),i.invertGroups(R),!1===_.clip||i.sharedClipKey||O||j.clip(s.clipRect),S&&i.animate&&i.animate(),O||(S&&T.defer&&(S+=T.defer),i.animationTimeout=_e((function(){i.afterAnimate()}),S||0)),i.isDirty=!1,i.hasRendered=!0,ue(i,"afterRender")},a.prototype.redraw=function(){var i=this.chart,s=this.isDirty||this.isDirtyData,_=this.group,T=this.xAxis,S=this.yAxis;_&&(i.inverted&&_.attr({width:i.plotWidth,height:i.plotHeight}),_.animate({translateX:ve(T&&T.left,i.plotLeft),translateY:ve(S&&S.top,i.plotTop)})),this.translate(),this.render(),s&&delete this.kdTree},a.prototype.searchPoint=function(i,s){var _=this.xAxis,T=this.yAxis,S=this.chart.inverted;return this.searchKDTree({clientX:S?_.len-i.chartY+_.pos:i.chartX-_.pos,plotY:S?T.len-i.chartX+T.pos:i.chartY-T.pos},s,i)},a.prototype.buildKDTree=function(i){function b(i,_,T){var S;if(S=i&&i.length){var C=s.kdAxisArray[_%T];return i.sort((function(i,s){return i[C]-s[C]})),{point:i[S=Math.floor(S/2)],left:b(i.slice(0,S),_+1,T),right:b(i.slice(S+1),_+1,T)}}}this.buildingKdTree=!0;var s=this,_=-1<s.options.findNearestPointBy.indexOf("y")?2:1;delete s.kdTree,_e((function(){s.kdTree=b(s.getValidPoints(null,!s.directTouch),_,_),s.buildingKdTree=!1}),s.options.kdNow||i&&"touchstart"===i.type?0:1)},a.prototype.searchKDTree=function(i,s,_){var T=this,S=this.kdAxisArray[0],C=this.kdAxisArray[1],P=s?"distX":"dist";if(s=-1<T.options.findNearestPointBy.indexOf("y")?2:1,this.kdTree||this.buildingKdTree||this.buildKDTree(_),this.kdTree)return function e(i,s,_,O){var M=s.point,R=T.kdAxisArray[_%O],D=M,j=ae(i[S])&&ae(M[S])?Math.pow(i[S]-M[S],2):null,$=ae(i[C])&&ae(M[C])?Math.pow(i[C]-M[C],2):null;return $=(j||0)+($||0),M.dist=ae($)?Math.sqrt($):Number.MAX_VALUE,M.distX=ae(j)?Math.sqrt(j):Number.MAX_VALUE,j=0>(R=i[R]-M[R])?"right":"left",s[$=0>R?"left":"right"]&&(D=($=e(i,s[$],_+1,O))[P]<D[P]?$:M),s[j]&&Math.sqrt(R*R)<D[P]&&(D=(i=e(i,s[j],_+1,O))[P]<D[P]?i:D),D}(i,this.kdTree,s,s)},a.prototype.pointPlacementToXValue=function(){var i=this.options,s=i.pointRange,_=this.xAxis;return"between"===(i=i.pointPlacement)&&(i=_.reversed?-.5:.5),pe(i)?i*(s||_.pointRange):0},a.prototype.isPointInside=function(i){return void 0!==i.plotY&&void 0!==i.plotX&&0<=i.plotY&&i.plotY<=this.yAxis.len&&0<=i.plotX&&i.plotX<=this.xAxis.len},a.prototype.drawTracker=function(){var i=this,s=i.options,_=s.trackByArea,T=[].concat(_?i.areaPath:i.graphPath),S=i.chart,C=S.pointer,P=S.renderer,O=S.options.tooltip.snap,M=i.tracker,h=function(s){S.hoverSeries!==i&&i.onMouseOver()},R="rgba(192,192,192,"+(V?1e-4:.002)+")";M?M.attr({d:T}):i.graph&&(i.tracker=P.path(T).attr({visibility:i.visible?"visible":"hidden",zIndex:2}).addClass(_?"highcharts-tracker-area":"highcharts-tracker-line").add(i.group),S.styledMode||i.tracker.attr({"stroke-linecap":"round","stroke-linejoin":"round",stroke:R,fill:_?R:"none","stroke-width":i.graph.strokeWidth()+(_?0:2*O)}),[i.tracker,i.markerGroup,i.dataLabelsGroup].forEach((function(i){i&&(i.addClass("highcharts-tracker").on("mouseover",h).on("mouseout",(function(i){C.onTrackerMouseOut(i)})),s.cursor&&!S.styledMode&&i.css({cursor:s.cursor}),U)&&i.on("touchstart",h)}))),ue(this,"afterDrawTracker")},a.prototype.addPoint=function(i,s,_,T,S){var C=this.options,P=this.data,O=this.chart,M=this.xAxis;M=M&&M.hasNames&&M.names;var R,D=C.data,j=this.xData;s=ve(s,!0);var $={series:this};this.pointClass.prototype.applyOptions.apply($,[i]);var U=$.x,V=j.length;if(this.requireSorting&&U<j[V-1])for(R=!0;V&&j[V-1]>U;)V--;this.updateParallelArrays($,"splice",V,0,0),this.updateParallelArrays($,V),M&&$.name&&(M[U]=$.name),D.splice(V,0,i),R&&(this.data.splice(V,0,null),this.processData()),"point"===C.legendType&&this.generatePoints(),_&&(P[0]&&P[0].remove?P[0].remove(!1):(P.shift(),this.updateParallelArrays($,"shift"),D.shift())),!1!==S&&ue(this,"addPoint",{point:$}),this.isDirtyData=this.isDirty=!0,s&&O.redraw(T)},a.prototype.removePoint=function(i,s,_){var T=this,S=T.data,C=S[i],P=T.points,O=T.chart,h=function(){P&&P.length===S.length&&P.splice(i,1),S.splice(i,1),T.options.data.splice(i,1),T.updateParallelArrays(C||{series:T},"splice",i,1),C&&C.destroy(),T.isDirty=!0,T.isDirtyData=!0,s&&O.redraw()};j(_,O),s=ve(s,!0),C?C.firePointEvent("remove",null,h):h()},a.prototype.remove=function(i,s,_,T){function e(){S.destroy(T),C.isDirtyLegend=C.isDirtyBox=!0,C.linkSeries(),ve(i,!0)&&C.redraw(s)}var S=this,C=S.chart;!1!==_?ue(S,"remove",null,e):e()},a.prototype.update=function(i,s){i=re(i,this.userOptions),ue(this,"update",{options:i});var _,T=this,S=T.chart,C=T.userOptions,P=T.initialType||T.type,O=S.options.plotOptions,M=i.type||C.type||S.options.chart.type,R=!(this.hasDerivedData||M&&M!==this.type||void 0!==i.pointStart||void 0!==i.pointInterval||T.hasOptionChanged("dataGrouping")||T.hasOptionChanged("pointStart")||T.hasOptionChanged("pointInterval")||T.hasOptionChanged("pointIntervalUnit")||T.hasOptionChanged("keys")),D=X[P].prototype,j=["eventOptions","navigatorSeries","baseSeries"],$=T.finishedAnimating&&{animation:!1},U={};if(M=M||P,R&&(j.push("data","isDirtyData","points","processedXData","processedYData","xIncrement","cropped","_hasPointMarkers","_hasPointLabels","clips","nodes","layout","mapMap","mapData","minY","maxY","minX","maxX"),!1!==i.visible&&j.push("area","graph"),T.parallelArrays.forEach((function(i){j.push(i+"Data")})),i.data&&(i.dataSorting&&le(T.options.dataSorting,i.dataSorting),this.setData(i.data,!1))),i=fe(C,$,{index:void 0===C.index?T.index:C.index,pointStart:ve(O&&O.series&&O.series.pointStart,C.pointStart,T.xData[0])},!R&&{data:T.options.data},i),R&&i.data&&(i.data=T.options.data),(j=["group","markerGroup","dataLabelsGroup","transformGroup"].concat(j)).forEach((function(i){j[i]=T[i],delete T[i]})),C=!1,X[M]){if(C=M!==T.type,T.remove(!1,!1,!1,!0),C)if(Object.setPrototypeOf)Object.setPrototypeOf(T,X[M].prototype);else{for(_ in O=Object.hasOwnProperty.call(T,"hcEvents")&&T.hcEvents,D)T[_]=void 0;le(T,X[M].prototype),O?T.hcEvents=O:delete T.hcEvents}}else oe(17,!0,S,{missingModuleFor:M});if(j.forEach((function(i){T[i]=j[i]})),T.init(S,i),R&&this.points){var V=T.options;!1===V.visible?(U.graphic=1,U.dataLabel=1):T._hasPointLabels||(i=V.marker,M=V.dataLabels,i&&(!1===i.enabled||"symbol"in i)&&(U.graphic=1),M&&!1===M.enabled&&(U.dataLabel=1)),this.points.forEach((function(i){i&&i.series&&(i.resolveColor(),Object.keys(U).length&&i.destroyElements(U),!1===V.showInLegend&&i.legendItem&&S.legend.destroyItem(i))}),this)}T.initialType=P,S.linkSeries(),C&&T.linkedSeries.length&&(T.isDirtyData=!0),ue(this,"afterUpdate"),ve(s,!0)&&S.redraw(!!R&&void 0)},a.prototype.setName=function(i){this.name=this.options.name=this.userOptions.name=i,this.chart.isDirtyLegend=!0},a.prototype.hasOptionChanged=function(i){var s=this.options[i],_=this.chart.options.plotOptions,T=this.userOptions[i];return T?s!==T:s!==ve(_&&_[this.type]&&_[this.type][i],_&&_.series&&_.series[i],s)},a.prototype.onMouseOver=function(){var i=this.chart,s=i.hoverSeries;i.pointer.setHoverChartIndex(),s&&s!==this&&s.onMouseOut(),this.options.events.mouseOver&&ue(this,"mouseOver"),this.setState("hover"),i.hoverSeries=this},a.prototype.onMouseOut=function(){var i=this.options,s=this.chart,_=s.tooltip,T=s.hoverPoint;s.hoverSeries=null,T&&T.onMouseOut(),this&&i.events.mouseOut&&ue(this,"mouseOut"),!_||this.stickyTracking||_.shared&&!this.noSharedTooltip||_.hide(),s.series.forEach((function(i){i.setState("",!0)}))},a.prototype.setState=function(i,s){var _=this,T=_.options,S=_.graph,C=T.inactiveOtherPoints,P=T.states,O=T.lineWidth,M=T.opacity,R=ve(P[i||"normal"]&&P[i||"normal"].animation,_.chart.options.chart.animation);if(T=0,i=i||"",_.state!==i&&([_.group,_.markerGroup,_.dataLabelsGroup].forEach((function(s){s&&(_.state&&s.removeClass("highcharts-series-"+_.state),i&&s.addClass("highcharts-series-"+i))})),_.state=i,!_.chart.styledMode)){if(P[i]&&!1===P[i].enabled)return;if(i&&(O=P[i].lineWidth||O+(P[i].lineWidthPlus||0),M=ve(P[i].opacity,M)),S&&!S.dashstyle)for(P={"stroke-width":O},S.animate(P,R);_["zone-graph-"+T];)_["zone-graph-"+T].animate(P,R),T+=1;C||[_.group,_.markerGroup,_.dataLabelsGroup,_.labelBySeries].forEach((function(i){i&&i.animate({opacity:M},R)}))}s&&C&&_.points&&_.setAllPointsToState(i||void 0)},a.prototype.setAllPointsToState=function(i){this.points.forEach((function(s){s.setState&&s.setState(i)}))},a.prototype.setVisible=function(i,s){var _=this,T=_.chart,S=_.legendItem,C=T.options.chart.ignoreHiddenSeries,P=_.visible,O=(_.visible=i=_.options.visible=_.userOptions.visible=void 0===i?!P:i)?"show":"hide";["group","dataLabelsGroup","markerGroup","tracker","tt"].forEach((function(i){_[i]&&_[i][O]()})),T.hoverSeries!==_&&(T.hoverPoint&&T.hoverPoint.series)!==_||_.onMouseOut(),S&&T.legend.colorizeItem(_,i),_.isDirty=!0,_.options.stacking&&T.series.forEach((function(i){i.options.stacking&&i.visible&&(i.isDirty=!0)})),_.linkedSeries.forEach((function(s){s.setVisible(i,!1)})),C&&(T.isDirtyBox=!0),ue(_,O),!1!==s&&T.redraw()},a.prototype.show=function(){this.setVisible(!0)},a.prototype.hide=function(){this.setVisible(!1)},a.prototype.select=function(i){this.selected=i=this.options.selected=void 0===i?!this.selected:i,this.checkbox&&(this.checkbox.checked=i),ue(this,i?"select":"unselect")},a.prototype.shouldShowTooltip=function(i,s,_){return void 0===_&&(_={}),_.series=this,_.visiblePlotOnly=!0,this.chart.isInsidePlot(i,s,_)},a.defaultOptions={lineWidth:2,allowPointSelect:!1,crisp:!0,showCheckbox:!1,animation:{duration:1e3},events:{},marker:{enabledThreshold:2,lineColor:C.backgroundColor,lineWidth:0,radius:4,states:{normal:{animation:!0},hover:{animation:{duration:50},enabled:!0,radiusPlus:2,lineWidthPlus:1},select:{fillColor:C.neutralColor20,lineColor:C.neutralColor100,lineWidth:2}}},point:{events:{}},dataLabels:{animation:{},align:"center",defer:!0,formatter:function(){var i=this.series.chart.numberFormatter;return"number"!=typeof this.y?"":i(this.y,-1)},padding:5,style:{fontSize:"11px",fontWeight:"bold",color:"contrast",textOutline:"1px contrast"},verticalAlign:"bottom",x:0,y:0},cropThreshold:300,opacity:1,pointRange:0,softThreshold:!0,states:{normal:{animation:!0},hover:{animation:{duration:50},lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{animation:{duration:0}},inactive:{animation:{duration:50},opacity:.2}},stickyTracking:!0,turboThreshold:1e3,findNearestPointBy:"x"},a}(),le(i.prototype,{axisTypes:["xAxis","yAxis"],coll:"series",colorCounter:0,cropShoulder:1,directTouch:!1,drawLegendSymbol:T.drawLineMarker,isCartesian:!0,kdAxisArray:["clientX","plotY"],parallelArrays:["x","y"],pointClass:P,requireSorting:!0,sorted:!0}),O.series=i,i})),L(s,"Extensions/ScrollablePlotArea.js",[s["Core/Animation/AnimationUtilities.js"],s["Core/Axis/Axis.js"],s["Core/Chart/Chart.js"],s["Core/Series/Series.js"],s["Core/Renderer/RendererRegistry.js"],s["Core/Utilities.js"]],(function(i,s,_,T,S,C){var P=i.stop,O=C.addEvent,M=C.createElement,R=C.merge,D=C.pick;O(_,"afterSetChartSize",(function(i){var _=this.options.chart.scrollablePlotArea,T=_&&_.minWidth;if(_=_&&_.minHeight,!this.renderer.forExport){if(T){if(this.scrollablePixelsX=T=Math.max(0,T-this.chartWidth)){this.scrollablePlotBox=this.renderer.scrollablePlotBox=R(this.plotBox),this.plotBox.width=this.plotWidth+=T,this.inverted?this.clipBox.height+=T:this.clipBox.width+=T;var S={1:{name:"right",value:T}}}}else _&&(this.scrollablePixelsY=T=Math.max(0,_-this.chartHeight))&&(this.scrollablePlotBox=this.renderer.scrollablePlotBox=R(this.plotBox),this.plotBox.height=this.plotHeight+=T,this.inverted?this.clipBox.width+=T:this.clipBox.height+=T,S={2:{name:"bottom",value:T}});S&&!i.skipAxes&&this.axes.forEach((function(i){S[i.side]?i.getPlotLinePath=function(){var _=S[i.side].name,T=this[_];this[_]=T-S[i.side].value;var C=s.prototype.getPlotLinePath.apply(this,arguments);return this[_]=T,C}:(i.setAxisSize(),i.setAxisTranslation())}))}})),O(_,"render",(function(){this.scrollablePixelsX||this.scrollablePixelsY?(this.setUpScrolling&&this.setUpScrolling(),this.applyFixed()):this.fixedDiv&&this.applyFixed()})),_.prototype.setUpScrolling=function(){var i=this,s={WebkitOverflowScrolling:"touch",overflowX:"hidden",overflowY:"hidden"};this.scrollablePixelsX&&(s.overflowX="auto"),this.scrollablePixelsY&&(s.overflowY="auto"),this.scrollingParent=M("div",{className:"highcharts-scrolling-parent"},{position:"relative"},this.renderTo),this.scrollingContainer=M("div",{className:"highcharts-scrolling"},s,this.scrollingParent),O(this.scrollingContainer,"scroll",(function(){i.pointer&&delete i.pointer.chartPosition})),this.innerContainer=M("div",{className:"highcharts-inner-container"},null,this.scrollingContainer),this.innerContainer.appendChild(this.container),this.setUpScrolling=null},_.prototype.moveFixedElements=function(){var i,s=this.container,_=this.fixedRenderer,T=".highcharts-contextbutton .highcharts-credits .highcharts-legend .highcharts-legend-checkbox .highcharts-navigator-series .highcharts-navigator-xaxis .highcharts-navigator-yaxis .highcharts-navigator .highcharts-reset-zoom .highcharts-drillup-button .highcharts-scrollbar .highcharts-subtitle .highcharts-title".split(" ");this.scrollablePixelsX&&!this.inverted?i=".highcharts-yaxis":this.scrollablePixelsX&&this.inverted||this.scrollablePixelsY&&!this.inverted?i=".highcharts-xaxis":this.scrollablePixelsY&&this.inverted&&(i=".highcharts-yaxis"),i&&T.push(i+":not(.highcharts-radial-axis)",i+"-labels:not(.highcharts-radial-axis-labels)"),T.forEach((function(i){[].forEach.call(s.querySelectorAll(i),(function(i){(i.namespaceURI===_.SVG_NS?_.box:_.box.parentNode).appendChild(i),i.style.pointerEvents="auto"}))}))},_.prototype.applyFixed=function(){var i=!this.fixedDiv,s=this.options.chart,_=s.scrollablePlotArea,T=S.getRendererType();i?(this.fixedDiv=M("div",{className:"highcharts-fixed"},{position:"absolute",overflow:"hidden",pointerEvents:"none",zIndex:(s.style&&s.style.zIndex||0)+2,top:0},null,!0),this.scrollingContainer&&this.scrollingContainer.parentNode.insertBefore(this.fixedDiv,this.scrollingContainer),this.renderTo.style.overflow="visible",this.fixedRenderer=s=new T(this.fixedDiv,this.chartWidth,this.chartHeight,this.options.chart.style),this.scrollableMask=s.path().attr({fill:this.options.chart.backgroundColor||"#fff","fill-opacity":D(_.opacity,.85),zIndex:-1}).addClass("highcharts-scrollable-mask").add(),O(this,"afterShowResetZoom",this.moveFixedElements),O(this,"afterDrilldown",this.moveFixedElements),O(this,"afterLayOutTitles",this.moveFixedElements)):this.fixedRenderer.setSize(this.chartWidth,this.chartHeight),(this.scrollableDirty||i)&&(this.scrollableDirty=!1,this.moveFixedElements()),s=this.chartWidth+(this.scrollablePixelsX||0),T=this.chartHeight+(this.scrollablePixelsY||0),P(this.container),this.container.style.width=s+"px",this.container.style.height=T+"px",this.renderer.boxWrapper.attr({width:s,height:T,viewBox:[0,0,s,T].join(" ")}),this.chartBackground.attr({width:s,height:T}),this.scrollingContainer.style.height=this.chartHeight+"px",i&&(_.scrollPositionX&&(this.scrollingContainer.scrollLeft=this.scrollablePixelsX*_.scrollPositionX),_.scrollPositionY&&(this.scrollingContainer.scrollTop=this.scrollablePixelsY*_.scrollPositionY)),T=this.axisOffset,i=this.plotTop-T[0]-1,_=this.plotLeft-T[3]-1,s=this.plotTop+this.plotHeight+T[2]+1,T=this.plotLeft+this.plotWidth+T[1]+1;var C=this.plotLeft+this.plotWidth-(this.scrollablePixelsX||0),R=this.plotTop+this.plotHeight-(this.scrollablePixelsY||0);i=this.scrollablePixelsX?[["M",0,i],["L",this.plotLeft-1,i],["L",this.plotLeft-1,s],["L",0,s],["Z"],["M",C,i],["L",this.chartWidth,i],["L",this.chartWidth,s],["L",C,s],["Z"]]:this.scrollablePixelsY?[["M",_,0],["L",_,this.plotTop-1],["L",T,this.plotTop-1],["L",T,0],["Z"],["M",_,R],["L",_,this.chartHeight],["L",T,this.chartHeight],["L",T,R],["Z"]]:[["M",0,0]],"adjustHeight"!==this.redrawTrigger&&this.scrollableMask.attr({d:i})},O(s,"afterInit",(function(){this.chart.scrollableDirty=!0})),O(T,"show",(function(){this.chart.scrollableDirty=!0}))})),L(s,"Core/Axis/StackingAxis.js",[s["Core/Animation/AnimationUtilities.js"],s["Core/Utilities.js"]],(function(i,s){var _=i.getDeferredAnimation,T=s.addEvent,S=s.destroyObjectProperties,C=s.fireEvent,P=s.isNumber,O=s.objectEach,M=function(){function a(i){this.oldStacks={},this.stacks={},this.stacksTouched=0,this.axis=i}return a.prototype.buildStacks=function(){var i,s=this.axis,_=s.series,T=s.options.reversedStacks,S=_.length;if(!s.isXAxis){for(this.usePercentage=!1,i=S;i--;){var P=_[T?i:S-i-1];P.setStackedPoints(),P.setGroupedPoints()}for(i=0;i<S;i++)_[i].modifyStacks();C(s,"afterBuildStacks")}},a.prototype.cleanStacks=function(){if(!this.axis.isXAxis){if(this.oldStacks)var i=this.stacks=this.oldStacks;O(i,(function(i){O(i,(function(i){i.cumulative=i.total}))}))}},a.prototype.resetStacks=function(){var i=this,s=this.stacks;this.axis.isXAxis||O(s,(function(s){O(s,(function(_,T){P(_.touched)&&_.touched<i.stacksTouched?(_.destroy(),delete s[T]):(_.total=null,_.cumulative=null)}))}))},a.prototype.renderStackTotals=function(){var i=this.axis,s=i.chart,T=s.renderer,S=this.stacks;i=_(s,i.options.stackLabels&&i.options.stackLabels.animation||!1);var C=this.stackTotalGroup=this.stackTotalGroup||T.g("stack-labels").attr({visibility:"visible",zIndex:6,opacity:0}).add();C.translate(s.plotLeft,s.plotTop),O(S,(function(i){O(i,(function(i){i.render(C)}))})),C.animate({opacity:1},i)},a}();return function(){function a(){}return a.compose=function(i){T(i,"init",a.onInit),T(i,"destroy",a.onDestroy)},a.onDestroy=function(){var i=this.stacking;if(i){var s=i.stacks;O(s,(function(i,_){S(i),s[_]=null})),i&&i.stackTotalGroup&&i.stackTotalGroup.destroy()}},a.onInit=function(){this.stacking||(this.stacking=new M(this))},a}()})),L(s,"Extensions/Stacking.js",[s["Core/Axis/Axis.js"],s["Core/Chart/Chart.js"],s["Core/FormatUtilities.js"],s["Core/Globals.js"],s["Core/Series/Series.js"],s["Core/Axis/StackingAxis.js"],s["Core/Utilities.js"]],(function(i,s,_,T,S,C,P){var O=_.format,M=P.correctFloat,R=P.defined,D=P.destroyObjectProperties,j=P.isArray,$=P.isNumber,U=P.objectEach,V=P.pick,Z=function(){function a(i,s,_,T,S){var C=i.chart.inverted;this.axis=i,this.isNegative=_,this.options=s=s||{},this.x=T,this.total=null,this.points={},this.hasValidPoints=!1,this.stack=S,this.rightCliff=this.leftCliff=0,this.alignOptions={align:s.align||(C?_?"left":"right":"center"),verticalAlign:s.verticalAlign||(C?"middle":_?"bottom":"top"),y:s.y,x:s.x},this.textAlign=s.textAlign||(C?_?"right":"left":"center")}return a.prototype.destroy=function(){D(this,this.axis)},a.prototype.render=function(i){var s=this.axis.chart,_=this.options,T=_.format;T=T?O(T,this,s):_.formatter.call(this),this.label?this.label.attr({text:T,visibility:"hidden"}):(this.label=s.renderer.label(T,null,null,_.shape,null,null,_.useHTML,!1,"stack-labels"),T={r:_.borderRadius||0,text:T,rotation:_.rotation,padding:V(_.padding,5),visibility:"hidden"},s.styledMode||(T.fill=_.backgroundColor,T.stroke=_.borderColor,T["stroke-width"]=_.borderWidth,this.label.css(_.style)),this.label.attr(T),this.label.added||this.label.add(i)),this.label.labelrank=s.plotSizeY},a.prototype.setOffset=function(i,s,_,T,C){var P=this.axis,O=P.chart;T=P.translate(P.stacking.usePercentage?100:T||this.total,0,0,0,1),_=P.translate(_||0),_=R(T)&&Math.abs(T-_),i=V(C,O.xAxis[0].translate(this.x))+i,P=R(T)&&this.getStackBox(O,this,i,T,s,_,P),s=this.label,_=this.isNegative,i="justify"===V(this.options.overflow,"justify");var M=this.textAlign;s&&P&&(C=s.getBBox(),T=s.padding,M="left"===M?O.inverted?-T:T:"right"===M?C.width:O.inverted&&"center"===M?C.width/2:O.inverted?_?C.width+T:-T:C.width/2,_=O.inverted?C.height/2:_?-T:C.height,this.alignOptions.x=V(this.options.x,0),this.alignOptions.y=V(this.options.y,0),P.x-=M,P.y-=_,s.align(this.alignOptions,null,P),O.isInsidePlot(s.alignAttr.x+M-this.alignOptions.x,s.alignAttr.y+_-this.alignOptions.y)?s.show():(s.alignAttr.y=-9999,i=!1),i&&S.prototype.justifyDataLabel.call(this.axis,s,this.alignOptions,s.alignAttr,C,P),s.attr({x:s.alignAttr.x,y:s.alignAttr.y}),V(!i&&this.options.crop,!0)&&((O=$(s.x)&&$(s.y)&&O.isInsidePlot(s.x-T+s.width,s.y)&&O.isInsidePlot(s.x+T,s.y))||s.hide()))},a.prototype.getStackBox=function(i,s,_,T,S,C,P){var O=s.axis.reversed,M=i.inverted,R=P.height+P.pos-(M?i.plotLeft:i.plotTop);return s=s.isNegative&&!O||!s.isNegative&&O,{x:M?s?T-P.right:T-C+P.pos-i.plotLeft:_+i.xAxis[0].transB-i.plotLeft,y:M?P.height-_-S:s?R-T-C:R-T,width:M?C:S,height:M?S:C}},a}();return s.prototype.getStacks=function(){var i=this,s=i.inverted;i.yAxis.forEach((function(i){i.stacking&&i.stacking.stacks&&i.hasVisibleSeries&&(i.stacking.oldStacks=i.stacking.stacks)})),i.series.forEach((function(_){var T=_.xAxis&&_.xAxis.options||{};!_.options.stacking||!0!==_.visible&&!1!==i.options.chart.ignoreHiddenSeries||(_.stackKey=[_.type,V(_.options.stack,""),s?T.top:T.left,s?T.height:T.width].join())}))},C.compose(i),S.prototype.setGroupedPoints=function(){var i=this.yAxis.stacking;this.options.centerInCategory&&(this.is("column")||this.is("columnrange"))&&!this.options.stacking&&1<this.chart.series.length?S.prototype.setStackedPoints.call(this,"group"):i&&U(i.stacks,(function(s,_){"group"===_.slice(-5)&&(U(s,(function(i){return i.destroy()})),delete i.stacks[_])}))},S.prototype.setStackedPoints=function(i){var s=i||this.options.stacking;if(s&&(!0===this.visible||!1===this.chart.options.chart.ignoreHiddenSeries)){var _=this.processedXData,T=this.processedYData,S=[],C=T.length,P=this.options,O=P.threshold,D=V(P.startFromThreshold&&O,0);P=P.stack;var $,U,Y="-"+(i=i?this.type+","+s:this.stackKey),X=this.negStacks,Q=this.yAxis,ee=Q.stacking.stacks,te=Q.stacking.oldStacks;for(Q.stacking.stacksTouched+=1,U=0;U<C;U++){var ne=_[U],re=T[U],ie=this.getStackIndicator(ie,ne,this.index),ae=ie.key,se=($=X&&re<(D?0:O))?Y:i;ee[se]||(ee[se]={}),ee[se][ne]||(te[se]&&te[se][ne]?(ee[se][ne]=te[se][ne],ee[se][ne].total=null):ee[se][ne]=new Z(Q,Q.options.stackLabels,$,ne,P)),se=ee[se][ne],null!==re?(se.points[ae]=se.points[this.index]=[V(se.cumulative,D)],R(se.cumulative)||(se.base=ae),se.touched=Q.stacking.stacksTouched,0<ie.index&&!1===this.singleStacks&&(se.points[ae][0]=se.points[this.index+","+ne+",0"][0])):se.points[ae]=se.points[this.index]=null,"percent"===s?($=$?i:Y,X&&ee[$]&&ee[$][ne]?($=ee[$][ne],se.total=$.total=Math.max($.total,se.total)+Math.abs(re)||0):se.total=M(se.total+(Math.abs(re)||0))):"group"===s?(j(re)&&(re=re[0]),null!==re&&(se.total=(se.total||0)+1)):se.total=M(se.total+(re||0)),se.cumulative="group"===s?(se.total||1)-1:V(se.cumulative,D)+(re||0),null!==re&&(se.points[ae].push(se.cumulative),S[U]=se.cumulative,se.hasValidPoints=!0)}"percent"===s&&(Q.stacking.usePercentage=!0),"group"!==s&&(this.stackedYData=S),Q.stacking.oldStacks={}}},S.prototype.modifyStacks=function(){var i,s=this,_=s.stackKey,T=s.yAxis.stacking.stacks,S=s.processedXData,C=s.options.stacking;s[C+"Stacker"]&&[_,"-"+_].forEach((function(_){for(var P,O,M=S.length;M--;)P=S[M],i=s.getStackIndicator(i,P,s.index,_),(O=(P=T[_]&&T[_][P])&&P.points[i.key])&&s[C+"Stacker"](O,P,M)}))},S.prototype.percentStacker=function(i,s,_){s=s.total?100/s.total:0,i[0]=M(i[0]*s),i[1]=M(i[1]*s),this.stackedYData[_]=i[1]},S.prototype.getStackIndicator=function(i,s,_,T){return!R(i)||i.x!==s||T&&i.key!==T?i={x:s,index:0,key:T}:i.index++,i.key=[_,s,i.index].join(),i},T.StackItem=Z,T.StackItem})),L(s,"Series/Line/LineSeries.js",[s["Core/Color/Palette.js"],s["Core/Series/Series.js"],s["Core/Series/SeriesRegistry.js"],s["Core/Utilities.js"]],(function(i,s,_,T){var S=this&&this.__extends||function(){var a=function(i,s){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var _ in s)s.hasOwnProperty(_)&&(i[_]=s[_])})(i,s)};return function(i,s){function f(){this.constructor=i}a(i,s),i.prototype=null===s?Object.create(s):(f.prototype=s.prototype,new f)}}(),C=T.defined,P=T.merge;return T=function(_){function q(){var i=null!==_&&_.apply(this,arguments)||this;return i.data=void 0,i.options=void 0,i.points=void 0,i}return S(q,_),q.prototype.drawGraph=function(){var s=this,_=this.options,T=(this.gappedPath||this.getGraphPath).call(this),S=this.chart.styledMode,C=[["graph","highcharts-graph"]];S||C[0].push(_.lineColor||this.color||i.neutralColor20,_.dashStyle),(C=s.getZonesGraphs(C)).forEach((function(i,C){var P=i[0],O=s[P],M=O?"animate":"attr";O?(O.endX=s.preventGraphAnimation?null:T.xMap,O.animate({d:T})):T.length&&(s[P]=O=s.chart.renderer.path(T).addClass(i[1]).attr({zIndex:1}).add(s.group)),O&&!S&&(P={stroke:i[2],"stroke-width":_.lineWidth,fill:s.fillGraph&&s.color||"none"},i[3]?P.dashstyle=i[3]:"square"!==_.linecap&&(P["stroke-linecap"]=P["stroke-linejoin"]="round"),O[M](P).shadow(2>C&&_.shadow)),O&&(O.startX=T.xMap,O.isArea=T.isArea)}))},q.prototype.getGraphPath=function(i,s,_){var T,S,P=this,O=P.options,M=O.step,R=[],D=[];return(T=(i=i||P.points).reversed)&&i.reverse(),(M={right:1,center:2}[M]||M&&3)&&T&&(M=4-M),(i=this.getValidPoints(i,!1,!(O.connectNulls&&!s&&!_))).forEach((function(T,j){var $=T.plotX,U=T.plotY,V=i[j-1];(T.leftCliff||V&&V.rightCliff)&&!_&&(S=!0),T.isNull&&!C(s)&&0<j?S=!O.connectNulls:T.isNull&&!s?S=!0:(0===j||S?j=[["M",T.plotX,T.plotY]]:P.getPointSpline?j=[P.getPointSpline(i,T,j)]:M?(j=1===M?[["L",V.plotX,U]]:2===M?[["L",(V.plotX+$)/2,V.plotY],["L",(V.plotX+$)/2,U]]:[["L",$,V.plotY]]).push(["L",$,U]):j=[["L",$,U]],D.push(T.x),M&&(D.push(T.x),2===M&&D.push(T.x)),R.push.apply(R,j),S=!1)})),R.xMap=D,P.graphPath=R},q.prototype.getZonesGraphs=function(i){return this.zones.forEach((function(s,_){_=["zone-graph-"+_,"highcharts-graph highcharts-zone-graph-"+_+" "+(s.className||"")],this.chart.styledMode||_.push(s.color||this.color,s.dashStyle||this.options.dashStyle),i.push(_)}),this),i},q.defaultOptions=P(s.defaultOptions,{}),q}(s),_.registerSeriesType("line",T),T})),L(s,"Series/Area/AreaSeries.js",[s["Core/Color/Color.js"],s["Mixins/LegendSymbol.js"],s["Core/Series/SeriesRegistry.js"],s["Core/Utilities.js"]],(function(i,s,_,T){var S=this&&this.__extends||function(){var a=function(i,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var _ in s)s.hasOwnProperty(_)&&(i[_]=s[_])},a(i,s)};return function(i,s){function f(){this.constructor=i}a(i,s),i.prototype=null===s?Object.create(s):(f.prototype=s.prototype,new f)}}(),C=i.parse,P=_.seriesTypes.line;i=T.extend;var O=T.merge,M=T.objectEach,R=T.pick;return T=function(i){function c(){var s=null!==i&&i.apply(this,arguments)||this;return s.data=void 0,s.options=void 0,s.points=void 0,s}return S(c,i),c.prototype.drawGraph=function(){this.areaPath=[],i.prototype.drawGraph.apply(this);var s=this,_=this.areaPath,T=this.options,S=[["area","highcharts-area",this.color,T.fillColor]];this.zones.forEach((function(i,_){S.push(["zone-area-"+_,"highcharts-area highcharts-zone-area-"+_+" "+i.className,i.color||s.color,i.fillColor||T.fillColor])})),S.forEach((function(i){var S=i[0],P=s[S],O=P?"animate":"attr",M={};P?(P.endX=s.preventGraphAnimation?null:_.xMap,P.animate({d:_})):(M.zIndex=0,(P=s[S]=s.chart.renderer.path(_).addClass(i[1]).add(s.group)).isArea=!0),s.chart.styledMode||(M.fill=R(i[3],C(i[2]).setOpacity(R(T.fillOpacity,.75)).get())),P[O](M),P.startX=_.xMap,P.shiftUnit=T.step?2:1}))},c.prototype.getGraphPath=function(i){var s,_=P.prototype.getGraphPath,T=this.options,S=T.stacking,C=this.yAxis,O=[],M=[],D=this.index,j=C.stacking.stacks[this.stackKey],$=T.threshold,U=Math.round(C.getThreshold(T.threshold));T=R(T.connectNulls,"percent"===S);var b=function(s,_,T){var P=i[s];s=S&&j[P.x].points[D];var R=P[T+"Null"]||0;if(T=P[T+"Cliff"]||0,P=!0,T||R){var V=(R?s[0]:s[1])+T,Y=s[0]+T;P=!!R}else!S&&i[_]&&i[_].isNull&&(V=Y=$);void 0!==V&&(M.push({plotX:Z,plotY:null===V?U:C.getThreshold(V),isNull:P,isCliff:!0}),O.push({plotX:Z,plotY:null===Y?U:C.getThreshold(Y),doCurve:!1}))};for(i=i||this.points,S&&(i=this.getStackPoints(i)),s=0;s<i.length;s++){S||(i[s].leftCliff=i[s].rightCliff=i[s].leftNull=i[s].rightNull=void 0);var V=i[s].isNull,Z=R(i[s].rectPlotX,i[s].plotX),Y=S?R(i[s].yBottom,U):U;V&&!T||(T||b(s,s-1,"left"),V&&!S&&T||(M.push(i[s]),O.push({x:s,plotX:Z,plotY:Y})),T||b(s,s+1,"right"))}return s=_.call(this,M,!0,!0),O.reversed=!0,(Y=(V=_.call(this,O,!0,!0))[0])&&"M"===Y[0]&&(V[0]=["L",Y[1],Y[2]]),(V=s.concat(V)).length&&V.push(["Z"]),_=_.call(this,M,!1,T),V.xMap=s.xMap,this.areaPath=V,_},c.prototype.getStackPoints=function(i){var s=this,_=[],T=[],S=this.xAxis,C=this.yAxis,P=C.stacking.stacks[this.stackKey],O={},D=C.series,j=D.length,$=C.options.reversedStacks?1:-1,U=D.indexOf(s);if(i=i||this.points,this.options.stacking){for(var V=0;V<i.length;V++)i[V].leftNull=i[V].rightNull=void 0,O[i[V].x]=i[V];M(P,(function(i,s){null!==i.total&&T.push(s)})),T.sort((function(i,s){return i-s}));var Z=D.map((function(i){return i.visible}));T.forEach((function(i,M){var V,Y,X=0;if(O[i]&&!O[i].isNull)_.push(O[i]),[-1,1].forEach((function(_){var S=1===_?"rightNull":"leftNull",C=0,R=P[T[M+_]];if(R)for(var X=U;0<=X&&X<j;){var Q=D[X].index;(V=R.points[Q])||(Q===s.index?O[i][S]=!0:Z[X]&&(Y=P[i].points[Q])&&(C-=Y[1]-Y[0])),X+=$}O[i][1===_?"rightCliff":"leftCliff"]=C}));else{for(var Q=U;0<=Q&&Q<j;){if(V=P[i].points[D[Q].index]){X=V[1];break}Q+=$}X=R(X,0),X=C.translate(X,0,1,0,1),_.push({isNull:!0,plotX:S.translate(i,0,0,0,1),x:i,plotY:X,yBottom:X})}}))}return _},c.defaultOptions=O(P.defaultOptions,{threshold:0}),c}(P),i(T.prototype,{singleStacks:!1,drawLegendSymbol:s.drawRectangle}),_.registerSeriesType("area",T),T})),L(s,"Series/Spline/SplineSeries.js",[s["Core/Series/SeriesRegistry.js"],s["Core/Utilities.js"]],(function(i,s){var _=this&&this.__extends||function(){var a=function(i,s){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var _ in s)s.hasOwnProperty(_)&&(i[_]=s[_])})(i,s)};return function(i,s){function h(){this.constructor=i}a(i,s),i.prototype=null===s?Object.create(s):(h.prototype=s.prototype,new h)}}(),T=i.seriesTypes.line,S=s.merge,C=s.pick;return s=function(i){function u(){var s=null!==i&&i.apply(this,arguments)||this;return s.data=void 0,s.options=void 0,s.points=void 0,s}return _(u,i),u.prototype.getPointSpline=function(i,s,_){var T=s.plotX||0,S=s.plotY||0,P=i[_-1];if(_=i[_+1],P&&!P.isNull&&!1!==P.doCurve&&!s.isCliff&&_&&!_.isNull&&!1!==_.doCurve&&!s.isCliff){i=P.plotY||0;var O=_.plotX||0;_=_.plotY||0;var M=0,R=(1.5*T+(P.plotX||0))/2.5,D=(1.5*S+i)/2.5,j=(1.5*S+_)/2.5;(O=(1.5*T+O)/2.5)!==R&&(M=(j-D)*(O-T)/(O-R)+S-j),j+=M,(D+=M)>i&&D>S?j=2*S-(D=Math.max(i,S)):D<i&&D<S&&(j=2*S-(D=Math.min(i,S))),j>_&&j>S?D=2*S-(j=Math.max(_,S)):j<_&&j<S&&(D=2*S-(j=Math.min(_,S))),s.rightContX=O,s.rightContY=j}return s=["C",C(P.rightContX,P.plotX,0),C(P.rightContY,P.plotY,0),C(R,T,0),C(D,S,0),T,S],P.rightContX=P.rightContY=void 0,s},u.defaultOptions=S(T.defaultOptions),u}(T),i.registerSeriesType("spline",s),s})),L(s,"Series/AreaSpline/AreaSplineSeries.js",[s["Series/Area/AreaSeries.js"],s["Series/Spline/SplineSeries.js"],s["Mixins/LegendSymbol.js"],s["Core/Series/SeriesRegistry.js"],s["Core/Utilities.js"]],(function(i,s,_,T,S){var C=this&&this.__extends||function(){var a=function(i,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var _ in s)s.hasOwnProperty(_)&&(i[_]=s[_])},a(i,s)};return function(i,s){function e(){this.constructor=i}a(i,s),i.prototype=null===s?Object.create(s):(e.prototype=s.prototype,new e)}}(),P=i.prototype,O=S.extend,M=S.merge;return S=function(_){function f(){var i=null!==_&&_.apply(this,arguments)||this;return i.data=void 0,i.points=void 0,i.options=void 0,i}return C(f,_),f.defaultOptions=M(s.defaultOptions,i.defaultOptions),f}(s),O(S.prototype,{getGraphPath:P.getGraphPath,getStackPoints:P.getStackPoints,drawGraph:P.drawGraph,drawLegendSymbol:_.drawRectangle}),T.registerSeriesType("areaspline",S),S})),L(s,"Series/Column/ColumnSeries.js",[s["Core/Animation/AnimationUtilities.js"],s["Core/Color/Color.js"],s["Core/Globals.js"],s["Mixins/LegendSymbol.js"],s["Core/Color/Palette.js"],s["Core/Series/Series.js"],s["Core/Series/SeriesRegistry.js"],s["Core/Utilities.js"]],(function(i,s,_,T,S,C,P,O){var M=this&&this.__extends||function(){var a=function(i,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var _ in s)s.hasOwnProperty(_)&&(i[_]=s[_])},a(i,s)};return function(i,s){function c(){this.constructor=i}a(i,s),i.prototype=null===s?Object.create(s):(c.prototype=s.prototype,new c)}}(),R=i.animObject,D=s.parse,j=_.hasTouch;i=_.noop;var $=O.clamp,U=O.css,V=O.defined,Z=O.extend,Y=O.fireEvent,X=O.isArray,Q=O.isNumber,ee=O.merge,te=O.pick,ne=O.objectEach;return O=function(i){function d(){var s=null!==i&&i.apply(this,arguments)||this;return s.borderWidth=void 0,s.data=void 0,s.group=void 0,s.options=void 0,s.points=void 0,s}return M(d,i),d.prototype.animate=function(i){var s=this,_=this.yAxis,T=s.options,S=this.chart.inverted,C={},P=S?"translateX":"translateY";if(i)C.scaleY=.001,i=$(_.toPixels(T.threshold),_.pos,_.pos+_.len),S?C.translateX=i-_.len:C.translateY=i,s.clipBox&&s.setClip(),s.group.attr(C);else{var O=Number(s.group.attr(P));s.group.animate({scaleY:1},Z(R(s.options.animation),{step:function(i,T){s.group&&(C[P]=O+T.pos*(_.pos-O),s.group.attr(C))}}))}},d.prototype.init=function(s,_){i.prototype.init.apply(this,arguments);var T=this;(s=T.chart).hasRendered&&s.series.forEach((function(i){i.type===T.type&&(i.isDirty=!0)}))},d.prototype.getColumnMetrics=function(){var i=this,s=i.options,_=i.xAxis,T=i.yAxis,S=_.options.reversedStacks;S=_.reversed&&!S||!_.reversed&&S;var C,P={},O=0;!1===s.grouping?O=1:i.chart.series.forEach((function(s){var _=s.yAxis,S=s.options;if(s.type===i.type&&(s.visible||!i.chart.options.chart.ignoreHiddenSeries)&&T.len===_.len&&T.pos===_.pos){if(S.stacking&&"group"!==S.stacking){C=s.stackKey,void 0===P[C]&&(P[C]=O++);var M=P[C]}else!1!==S.grouping&&(M=O++);s.columnIndex=M}}));var M=Math.min(Math.abs(_.transA)*(_.ordinal&&_.ordinal.slope||s.pointRange||_.closestPointRange||_.tickInterval||1),_.len),R=M*s.groupPadding,D=(M-2*R)/(O||1);return s=Math.min(s.maxPointWidth||_.len,te(s.pointWidth,D*(1-2*s.pointPadding))),i.columnMetrics={width:s,offset:(D-s)/2+(R+((i.columnIndex||0)+(S?1:0))*D-M/2)*(S?-1:1),paddedWidth:D,columnCount:O},i.columnMetrics},d.prototype.crispCol=function(i,s,_,T){var S=this.chart,C=this.borderWidth,P=-(C%2?.5:0);return C=C%2?.5:1,S.inverted&&S.renderer.isVML&&(C+=1),this.options.crisp&&(_=Math.round(i+_)+P,_-=i=Math.round(i)+P),T=Math.round(s+T)+C,P=.5>=Math.abs(s)&&.5<T,T-=s=Math.round(s)+C,P&&T&&(--s,T+=1),{x:i,y:s,width:_,height:T}},d.prototype.adjustForMissingColumns=function(i,s,_,T){var S=this,C=this.options.stacking;if(!_.isNull&&1<T.columnCount){var P=0,O=0;ne(this.yAxis.stacking&&this.yAxis.stacking.stacks,(function(i){if("number"==typeof _.x&&(i=i[_.x.toString()])){var s=i.points[S.index],T=i.total;C?(s&&(P=O),i.hasValidPoints&&O++):X(s)&&(P=s[1],O=T||0)}})),i=(_.plotX||0)+((O-1)*T.paddedWidth+s)/2-s-P*T.paddedWidth}return i},d.prototype.translate=function(){var i=this,s=i.chart,_=i.options,T=i.dense=2>i.closestPointRange*i.xAxis.transA;T=i.borderWidth=te(_.borderWidth,T?0:1);var S=i.xAxis,P=i.yAxis,O=_.threshold,M=i.translatedThreshold=P.getThreshold(O),R=te(_.minPointLength,5),D=i.getColumnMetrics(),j=D.width,U=i.barW=Math.max(j,1+2*T),Z=i.pointXOffset=D.offset,Y=i.dataMin,X=i.dataMax;s.inverted&&(M-=.5),_.pointPadding&&(U=Math.ceil(U)),C.prototype.translate.apply(i),i.points.forEach((function(T){var C=te(T.yBottom,M),ee=999+Math.abs(C),ne=j,re=T.plotX||0;ee=$(T.plotY,-ee,P.len+ee),re+=Z;var ie=U,ae=Math.min(ee,C),se=Math.max(ee,C)-ae;if(R&&Math.abs(se)<R){se=R;var oe=!P.reversed&&!T.negative||P.reversed&&T.negative;Q(O)&&Q(X)&&T.y===O&&X<=O&&(P.min||0)<O&&(Y!==X||(P.max||0)<=O)&&(oe=!oe),ae=Math.abs(ae-M)>R?C-R:M-(oe?R:0)}V(T.options.pointWidth)&&(ne=ie=Math.ceil(T.options.pointWidth),re-=Math.round((ne-j)/2)),_.centerInCategory&&(re=i.adjustForMissingColumns(re,ne,T,D)),T.barX=re,T.pointWidth=ne,T.tooltipPos=s.inverted?[$(P.len+P.pos-s.plotLeft-ee,P.pos-s.plotLeft,P.len+P.pos-s.plotLeft),S.len+S.pos-s.plotTop-re-ie/2,se]:[S.left-s.plotLeft+re+ie/2,$(ee+P.pos-s.plotTop,P.pos-s.plotTop,P.len+P.pos-s.plotTop),se],T.shapeType=i.pointClass.prototype.shapeType||"rect",T.shapeArgs=i.crispCol.apply(i,T.isNull?[re,M,ie,0]:[re,ae,ie,se])}))},d.prototype.drawGraph=function(){this.group[this.dense?"addClass":"removeClass"]("highcharts-dense-data")},d.prototype.pointAttribs=function(i,s){var _=this.options,T=this.pointAttrToOptions||{},S=T.stroke||"borderColor",C=T["stroke-width"]||"borderWidth",P=i&&i.color||this.color,O=i&&i[S]||_[S]||P,M=i&&i[C]||_[C]||this[C]||0;T=i&&i.options.dashStyle||_.dashStyle;var R=te(i&&i.opacity,_.opacity,1);if(i&&this.zones.length){var j=i.getZone();P=i.options.color||j&&(j.color||i.nonZonedColor)||this.color,j&&(O=j.borderColor||O,T=j.dashStyle||T,M=j.borderWidth||M)}return s&&i&&(s=(i=ee(_.states[s],i.options.states&&i.options.states[s]||{})).brightness,P=i.color||void 0!==s&&D(P).brighten(i.brightness).get()||P,O=i[S]||O,M=i[C]||M,T=i.dashStyle||T,R=te(i.opacity,R)),S={fill:P,stroke:O,"stroke-width":M,opacity:R},T&&(S.dashstyle=T),S},d.prototype.drawPoints=function(){var i,s=this,_=this.chart,T=s.options,S=_.renderer,C=T.animationLimit||250;s.points.forEach((function(P){var O=P.graphic,M=!!O,R=O&&_.pointCount<C?"animate":"attr";Q(P.plotY)&&null!==P.y?(i=P.shapeArgs,O&&P.hasNewShapeType()&&(O=O.destroy()),s.enabledDataSorting&&(P.startXPos=s.xAxis.reversed?-(i&&i.width||0):s.xAxis.width),O||(P.graphic=O=S[P.shapeType](i).add(P.group||s.group))&&s.enabledDataSorting&&_.hasRendered&&_.pointCount<C&&(O.attr({x:P.startXPos}),M=!0,R="animate"),O&&M&&O[R](ee(i)),T.borderRadius&&O[R]({r:T.borderRadius}),_.styledMode||O[R](s.pointAttribs(P,P.selected&&"select")).shadow(!1!==P.allowShadow&&T.shadow,null,T.stacking&&!T.borderRadius),O&&(O.addClass(P.getClassName(),!0),O.attr({visibility:P.visible?"inherit":"hidden"}))):O&&(P.graphic=O.destroy())}))},d.prototype.drawTracker=function(){var i,s=this,_=s.chart,T=_.pointer,f=function(i){var s=T.getPointFromEvent(i);void 0!==s&&(T.isDirectTouch=!0,s.onMouseOver(i))};s.points.forEach((function(s){i=X(s.dataLabels)?s.dataLabels:s.dataLabel?[s.dataLabel]:[],s.graphic&&(s.graphic.element.point=s),i.forEach((function(i){i.div?i.div.point=s:i.element.point=s}))})),s._hasTracking||(s.trackerGroups.forEach((function(i){s[i]&&(s[i].addClass("highcharts-tracker").on("mouseover",f).on("mouseout",(function(i){T.onTrackerMouseOut(i)})),j&&s[i].on("touchstart",f),!_.styledMode&&s.options.cursor&&s[i].css(U).css({cursor:s.options.cursor}))})),s._hasTracking=!0),Y(this,"afterDrawTracker")},d.prototype.remove=function(){var i=this,s=i.chart;s.hasRendered&&s.series.forEach((function(s){s.type===i.type&&(s.isDirty=!0)})),C.prototype.remove.apply(i,arguments)},d.defaultOptions=ee(C.defaultOptions,{borderRadius:0,centerInCategory:!1,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{halo:!1,brightness:.1},select:{color:S.neutralColor20,borderColor:S.neutralColor100}},dataLabels:{align:void 0,verticalAlign:void 0,y:void 0},startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0,borderColor:S.backgroundColor}),d}(C),Z(O.prototype,{cropShoulder:0,directTouch:!0,drawLegendSymbol:T.drawRectangle,getSymbol:i,negStacks:!0,trackerGroups:["group","dataLabelsGroup"]}),P.registerSeriesType("column",O),O})),L(s,"Series/Bar/BarSeries.js",[s["Series/Column/ColumnSeries.js"],s["Core/Series/SeriesRegistry.js"],s["Core/Utilities.js"]],(function(i,s,_){var T=this&&this.__extends||function(){var a=function(i,s){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var _ in s)s.hasOwnProperty(_)&&(i[_]=s[_])})(i,s)};return function(i,s){function h(){this.constructor=i}a(i,s),i.prototype=null===s?Object.create(s):(h.prototype=s.prototype,new h)}}(),S=_.extend,C=_.merge;return _=function(s){function x(){var i=null!==s&&s.apply(this,arguments)||this;return i.data=void 0,i.options=void 0,i.points=void 0,i}return T(x,s),x.defaultOptions=C(i.defaultOptions,{}),x}(i),S(_.prototype,{inverted:!0}),s.registerSeriesType("bar",_),_})),L(s,"Series/Scatter/ScatterSeries.js",[s["Series/Column/ColumnSeries.js"],s["Series/Line/LineSeries.js"],s["Core/Series/SeriesRegistry.js"],s["Core/Utilities.js"]],(function(i,s,_,T){var S=this&&this.__extends||function(){var a=function(i,s){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var _ in s)s.hasOwnProperty(_)&&(i[_]=s[_])})(i,s)};return function(i,s){function c(){this.constructor=i}a(i,s),i.prototype=null===s?Object.create(s):(c.prototype=s.prototype,new c)}}(),C=T.addEvent,P=T.extend,O=T.merge;return T=function(i){function h(){var s=null!==i&&i.apply(this,arguments)||this;return s.data=void 0,s.options=void 0,s.points=void 0,s}return S(h,i),h.prototype.applyJitter=function(){var i=this,s=this.options.jitter,_=this.points.length;s&&this.points.forEach((function(T,S){["x","y"].forEach((function(C,P){var O="plot"+C.toUpperCase();if(s[C]&&!T.isNull){var M=i[C+"Axis"],R=s[C]*M.transA;if(M&&!M.isLog){var D=Math.max(0,T[O]-R);M=Math.min(M.len,T[O]+R),P=1e4*Math.sin(S+P*_),T[O]=D+(M-D)*(P-Math.floor(P)),"x"===C&&(T.clientX=T.plotX)}}}))}))},h.prototype.drawGraph=function(){this.options.lineWidth?i.prototype.drawGraph.call(this):this.graph&&(this.graph=this.graph.destroy())},h.defaultOptions=O(s.defaultOptions,{lineWidth:0,findNearestPointBy:"xy",jitter:{x:0,y:0},marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}"></span> <span style="font-size: 10px"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}}),h}(s),P(T.prototype,{drawTracker:i.prototype.drawTracker,sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"],takeOrdinalPosition:!1}),C(T,"afterTranslate",(function(){this.applyJitter()})),_.registerSeriesType("scatter",T),T})),L(s,"Mixins/CenteredSeries.js",[s["Core/Globals.js"],s["Core/Series/Series.js"],s["Core/Utilities.js"]],(function(i,s,_){var T=_.isNumber,S=_.pick,C=_.relativeLength,P=i.deg2rad;return i.CenteredSeriesMixin={getCenter:function(){var i=this.options,_=this.chart,T=2*(i.slicedOffset||0),P=_.plotWidth-2*T,O=_.plotHeight-2*T,M=i.center,R=Math.min(P,O),D=i.size,j=i.innerSize||0;for("string"==typeof D&&(D=parseFloat(D)),"string"==typeof j&&(j=parseFloat(j)),i=[S(M[0],"50%"),S(M[1],"50%"),S(D&&0>D?void 0:i.size,"100%"),S(j&&0>j?void 0:i.innerSize||0,"0%")],!_.angular||this instanceof s||(i[3]=0),M=0;4>M;++M)D=i[M],_=2>M||2===M&&/%$/.test(D),i[M]=C(D,[P,O,R,i[2]][M])+(_?T:0);return i[3]>i[2]&&(i[3]=i[2]),i},getStartAndEndRadians:function(i,s){return i=T(i)?i:0,s=T(s)&&s>i&&360>s-i?s:i+360,{start:P*(i+-90),end:P*(s+-90)}}}})),L(s,"Series/Pie/PiePoint.js",[s["Core/Animation/AnimationUtilities.js"],s["Core/Series/Point.js"],s["Core/Utilities.js"]],(function(i,s,_){var T=this&&this.__extends||function(){var a=function(i,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var _ in s)s.hasOwnProperty(_)&&(i[_]=s[_])},a(i,s)};return function(i,s){function f(){this.constructor=i}a(i,s),i.prototype=null===s?Object.create(s):(f.prototype=s.prototype,new f)}}(),S=i.setAnimation,C=_.addEvent,P=_.defined;i=_.extend;var O=_.isNumber,M=_.pick,R=_.relativeLength;return _=function(i){function c(){var s=null!==i&&i.apply(this,arguments)||this;return s.labelDistance=void 0,s.options=void 0,s.series=void 0,s}return T(c,i),c.prototype.getConnectorPath=function(){var i=this.labelPosition,s=this.series.options.dataLabels,_=s.connectorShape,T=this.connectorShapes;return T[_]&&(_=T[_]),_.call(this,{x:i.final.x,y:i.final.y,alignment:i.alignment},i.connectorPosition,s)},c.prototype.getTranslate=function(){return this.sliced?this.slicedTranslation:{translateX:0,translateY:0}},c.prototype.haloPath=function(i){var s=this.shapeArgs;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(s.x,s.y,s.r+i,s.r+i,{innerR:s.r-1,start:s.start,end:s.end})},c.prototype.init=function(){s.prototype.init.apply(this,arguments);var i=this;i.name=M(i.name,"Slice");var c=function(s){i.slice("select"===s.type)};return C(i,"select",c),C(i,"unselect",c),i},c.prototype.isValid=function(){return O(this.y)&&0<=this.y},c.prototype.setVisible=function(i,s){var _=this,T=_.series,S=T.chart,C=T.options.ignoreHiddenPoint;s=M(s,C),i!==_.visible&&(_.visible=_.options.visible=i=void 0===i?!_.visible:i,T.options.data[T.data.indexOf(_)]=_.options,["graphic","dataLabel","connector","shadowGroup"].forEach((function(s){_[s]&&_[s][i?"show":"hide"](i)})),_.legendItem&&S.legend.colorizeItem(_,i),i||"hover"!==_.state||_.setState(""),C&&(T.isDirty=!0),s&&S.redraw())},c.prototype.slice=function(i,s,_){var T=this.series;S(_,T.chart),M(s,!0),this.sliced=this.options.sliced=P(i)?i:!this.sliced,T.options.data[T.data.indexOf(this)]=this.options,this.graphic&&this.graphic.animate(this.getTranslate()),this.shadowGroup&&this.shadowGroup.animate(this.getTranslate())},c}(s),i(_.prototype,{connectorShapes:{fixedOffset:function(i,s,_){var T=s.breakAt;return s=s.touchingSliceAt,[["M",i.x,i.y],_.softConnector?["C",i.x+("left"===i.alignment?-5:5),i.y,2*T.x-s.x,2*T.y-s.y,T.x,T.y]:["L",T.x,T.y],["L",s.x,s.y]]},straight:function(i,s){return s=s.touchingSliceAt,[["M",i.x,i.y],["L",s.x,s.y]]},crookedLine:function(i,s,_){s=s.touchingSliceAt;var T=this.series,S=T.center[0],C=T.chart.plotWidth,P=T.chart.plotLeft;T=i.alignment;var O=this.shapeArgs.r;return _=R(_.crookDistance,1),_=["L",C="left"===T?S+O+(C+P-S-O)*(1-_):P+(S-O)*_,i.y],S=!0,("left"===T?C>i.x||C<s.x:C<i.x||C>s.x)&&(S=!1),i=[["M",i.x,i.y]],S&&i.push(_),i.push(["L",s.x,s.y]),i}}}),_})),L(s,"Series/Pie/PieSeries.js",[s["Mixins/CenteredSeries.js"],s["Series/Column/ColumnSeries.js"],s["Core/Globals.js"],s["Mixins/LegendSymbol.js"],s["Core/Color/Palette.js"],s["Series/Pie/PiePoint.js"],s["Core/Series/Series.js"],s["Core/Series/SeriesRegistry.js"],s["Core/Renderer/SVG/Symbols.js"],s["Core/Utilities.js"]],(function(i,s,_,T,S,C,P,O,M,R){var D=this&&this.__extends||function(){var a=function(i,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var _ in s)s.hasOwnProperty(_)&&(i[_]=s[_])},a(i,s)};return function(i,s){function f(){this.constructor=i}a(i,s),i.prototype=null===s?Object.create(s):(f.prototype=s.prototype,new f)}}(),j=i.getStartAndEndRadians;_=_.noop;var $=R.clamp,U=R.extend,V=R.fireEvent,Z=R.merge,Y=R.pick,X=R.relativeLength;return R=function(i){function h(){var s=null!==i&&i.apply(this,arguments)||this;return s.center=void 0,s.data=void 0,s.maxLabelDistance=void 0,s.options=void 0,s.points=void 0,s}return D(h,i),h.prototype.animate=function(i){var s=this,_=s.points,T=s.startAngleRad;i||_.forEach((function(i){var _=i.graphic,S=i.shapeArgs;_&&S&&(_.attr({r:Y(i.startR,s.center&&s.center[3]/2),start:T,end:T}),_.animate({r:S.r,start:S.start,end:S.end},s.options.animation))}))},h.prototype.drawEmpty=function(){var i=this.startAngleRad,s=this.endAngleRad,_=this.options;if(0===this.total&&this.center){var T=this.center[0],C=this.center[1];this.graph||(this.graph=this.chart.renderer.arc(T,C,this.center[1]/2,0,i,s).addClass("highcharts-empty-series").add(this.group)),this.graph.attr({d:M.arc(T,C,this.center[2]/2,0,{start:i,end:s,innerR:this.center[3]/2})}),this.chart.styledMode||this.graph.attr({"stroke-width":_.borderWidth,fill:_.fillColor||"none",stroke:_.color||S.neutralColor20})}else this.graph&&(this.graph=this.graph.destroy())},h.prototype.drawPoints=function(){var i=this.chart.renderer;this.points.forEach((function(s){s.graphic&&s.hasNewShapeType()&&(s.graphic=s.graphic.destroy()),s.graphic||(s.graphic=i[s.shapeType](s.shapeArgs).add(s.series.group),s.delayedRendering=!0)}))},h.prototype.generatePoints=function(){i.prototype.generatePoints.call(this),this.updateTotals()},h.prototype.getX=function(i,s,_){var T=this.center,S=this.radii?this.radii[_.index]||0:T[2]/2;return i=Math.asin($((i-T[1])/(S+_.labelDistance),-1,1)),T[0]+(s?-1:1)*Math.cos(i)*(S+_.labelDistance)+(0<_.labelDistance?(s?-1:1)*this.options.dataLabels.padding:0)},h.prototype.hasData=function(){return!!this.processedXData.length},h.prototype.redrawPoints=function(){var i,s,_,T,S=this,C=S.chart,P=C.renderer,O=S.options.shadow;this.drawEmpty(),!O||S.shadowGroup||C.styledMode||(S.shadowGroup=P.g("shadow").attr({zIndex:-1}).add(S.group)),S.points.forEach((function(M){var R={};if(s=M.graphic,!M.isNull&&s){var D=void 0;T=M.shapeArgs,i=M.getTranslate(),C.styledMode||(D=M.shadowGroup,O&&!D&&(D=M.shadowGroup=P.g("shadow").add(S.shadowGroup)),D&&D.attr(i),_=S.pointAttribs(M,M.selected&&"select")),M.delayedRendering?(s.setRadialReference(S.center).attr(T).attr(i),C.styledMode||s.attr(_).attr({"stroke-linejoin":"round"}).shadow(O,D),M.delayedRendering=!1):(s.setRadialReference(S.center),C.styledMode||Z(!0,R,_),Z(!0,R,T,i),s.animate(R)),s.attr({visibility:M.visible?"inherit":"hidden"}),s.addClass(M.getClassName(),!0)}else s&&(M.graphic=s.destroy())}))},h.prototype.sortByAngle=function(i,s){i.sort((function(i,_){return void 0!==i.angle&&(_.angle-i.angle)*s}))},h.prototype.translate=function(i){this.generatePoints();var s=0,_=this.options,T=_.slicedOffset,S=T+(_.borderWidth||0),C=j(_.startAngle,_.endAngle),P=this.startAngleRad=C.start;C=(this.endAngleRad=C.end)-P;var O=this.points,M=_.dataLabels.distance;_=_.ignoreHiddenPoint;var R,D=O.length;for(i||(this.center=i=this.getCenter()),R=0;R<D;R++){var $=O[R],U=P+s*C;!$.isValid()||_&&!$.visible||(s+=$.percentage/100);var Z=P+s*C,Q={x:i[0],y:i[1],r:i[2]/2,innerR:i[3]/2,start:Math.round(1e3*U)/1e3,end:Math.round(1e3*Z)/1e3};$.shapeType="arc",$.shapeArgs=Q,$.labelDistance=Y($.options.dataLabels&&$.options.dataLabels.distance,M),$.labelDistance=X($.labelDistance,Q.r),this.maxLabelDistance=Math.max(this.maxLabelDistance||0,$.labelDistance),(Z=(Z+U)/2)>1.5*Math.PI?Z-=2*Math.PI:Z<-Math.PI/2&&(Z+=2*Math.PI),$.slicedTranslation={translateX:Math.round(Math.cos(Z)*T),translateY:Math.round(Math.sin(Z)*T)},Q=Math.cos(Z)*i[2]/2;var ee=Math.sin(Z)*i[2]/2;$.tooltipPos=[i[0]+.7*Q,i[1]+.7*ee],$.half=Z<-Math.PI/2||Z>Math.PI/2?1:0,$.angle=Z,U=Math.min(S,$.labelDistance/5),$.labelPosition={natural:{x:i[0]+Q+Math.cos(Z)*$.labelDistance,y:i[1]+ee+Math.sin(Z)*$.labelDistance},final:{},alignment:0>$.labelDistance?"center":$.half?"right":"left",connectorPosition:{breakAt:{x:i[0]+Q+Math.cos(Z)*U,y:i[1]+ee+Math.sin(Z)*U},touchingSliceAt:{x:i[0]+Q,y:i[1]+ee}}}}V(this,"afterTranslate")},h.prototype.updateTotals=function(){var i,s=0,_=this.points,T=_.length,S=this.options.ignoreHiddenPoint;for(i=0;i<T;i++){var C=_[i];!C.isValid()||S&&!C.visible||(s+=C.y)}for(this.total=s,i=0;i<T;i++)(C=_[i]).percentage=0<s&&(C.visible||!S)?C.y/s*100:0,C.total=s},h.defaultOptions=Z(P.defaultOptions,{center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{allowOverlap:!0,connectorPadding:5,connectorShape:"fixedOffset",crookDistance:"70%",distance:30,enabled:!0,formatter:function(){return this.point.isNull?void 0:this.point.name},softConnector:!0,x:0},fillColor:void 0,ignoreHiddenPoint:!0,inactiveOtherPoints:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,stickyTracking:!1,tooltip:{followPointer:!0},borderColor:S.backgroundColor,borderWidth:1,lineWidth:void 0,states:{hover:{brightness:.1}}}),h}(P),U(R.prototype,{axisTypes:[],directTouch:!0,drawGraph:void 0,drawLegendSymbol:T.drawRectangle,drawTracker:s.prototype.drawTracker,getCenter:i.getCenter,getSymbol:_,isCartesian:!1,noSharedTooltip:!0,pointAttribs:s.prototype.pointAttribs,pointClass:C,requireSorting:!1,searchPoint:_,trackerGroups:["group","dataLabelsGroup"]}),O.registerSeriesType("pie",R),R})),L(s,"Core/Series/DataLabels.js",[s["Core/Animation/AnimationUtilities.js"],s["Core/FormatUtilities.js"],s["Core/Globals.js"],s["Core/Color/Palette.js"],s["Core/Series/Series.js"],s["Core/Series/SeriesRegistry.js"],s["Core/Utilities.js"]],(function(i,s,_,T,S,C,P){var O=i.getDeferredAnimation,M=s.format;i=_.noop,C=C.seriesTypes;var R=P.arrayMax,D=P.clamp,j=P.defined,$=P.extend,U=P.fireEvent,V=P.isArray,Z=P.merge,Y=P.objectEach,X=P.pick,Q=P.relativeLength,ee=P.splat,te=P.stableSort;_.distribute=function(i,s,T){function b(i,s){return i.target-s.target}var S,C=!0,P=i,O=[],M=0,R=P.reducedLen||s;for(S=i.length;S--;)M+=i[S].size;if(M>R){for(te(i,(function(i,s){return(s.rank||0)-(i.rank||0)})),M=S=0;M<=R;)M+=i[S].size,S++;O=i.splice(S-1,i.length)}for(te(i,b),i=i.map((function(i){return{size:i.size,targets:[i.target],align:X(i.align,.5)}}));C;){for(S=i.length;S--;)C=i[S],M=(Math.min.apply(0,C.targets)+Math.max.apply(0,C.targets))/2,C.pos=D(M-C.size*C.align,0,s-C.size);for(S=i.length,C=!1;S--;)0<S&&i[S-1].pos+i[S-1].size>i[S].pos&&(i[S-1].size+=i[S].size,i[S-1].targets=i[S-1].targets.concat(i[S].targets),i[S-1].align=.5,i[S-1].pos+i[S-1].size>s&&(i[S-1].pos=s-i[S-1].size),i.splice(S,1),C=!0)}P.push.apply(P,O),S=0,i.some((function(i){var C=0;if(i.targets.some((function(){if(P[S].pos=i.pos+C,void 0!==T&&Math.abs(P[S].pos-P[S].target)>T)return P.slice(0,S+1).forEach((function(i){delete i.pos})),P.reducedLen=(P.reducedLen||s)-.1*s,P.reducedLen>.1*s&&_.distribute(P,s,T),!0;C+=P[S].size,S++})))return!0})),te(P,b)},S.prototype.drawDataLabels=function(){function d(i,s){var _,T=[];if(V(i)&&!V(s))T=i.map((function(i){return Z(i,s)}));else if(V(s)&&!V(i))T=s.map((function(s){return Z(i,s)}));else if(V(i)||V(s))for(_=Math.max(i.length,s.length);_--;)T[_]=Z(i[_],s[_]);else T=Z(i,s);return T}var i=this,s=i.chart,_=i.options,S=_.dataLabels,C=i.points,P=i.hasRendered||0,R=S.animation;R=S.defer?O(s,R,i):{defer:0,duration:0};var D=s.renderer;if(S=d(d(s.options.plotOptions&&s.options.plotOptions.series&&s.options.plotOptions.series.dataLabels,s.options.plotOptions&&s.options.plotOptions[i.type]&&s.options.plotOptions[i.type].dataLabels),S),U(this,"drawDataLabels"),V(S)||S.enabled||i._hasPointLabels){var $=i.plotGroup("dataLabelsGroup","data-labels",P?"inherit":"hidden",S.zIndex||6);$.attr({opacity:+P}),!P&&(P=i.dataLabelsGroup)&&(i.visible&&$.show(!0),P[_.animation?"animate":"attr"]({opacity:1},R)),C.forEach((function(C){ee(d(S,C.dlOptions||C.options&&C.options.dataLabels)).forEach((function(S,P){var O=S.enabled&&(!C.isNull||C.dataLabelOnNull)&&function a(i,s){var _=s.filter;return!_||(s=_.operator,i=i[_.property],_=_.value,">"===s&&i>_||"<"===s&&i<_||">="===s&&i>=_||"<="===s&&i<=_||"=="===s&&i==_||"==="===s&&i===_)}(C,S),R=C.dataLabels?C.dataLabels[P]:C.dataLabel,U=C.connectors?C.connectors[P]:C.connector,V=X(S.distance,C.labelDistance),Z=!R;if(O){var Q=C.getLabelConfig(),ee=X(S[C.formatPrefix+"Format"],S.format);Q=j(ee)?M(ee,Q,s):(S[C.formatPrefix+"Formatter"]||S.formatter).call(Q,S),ee=S.style;var te=S.rotation;s.styledMode||(ee.color=X(S.color,ee.color,i.color,T.neutralColor100),"contrast"===ee.color?(C.contrastColor=D.getContrast(C.color||i.color),ee.color=!j(V)&&S.inside||0>V||_.stacking?C.contrastColor:T.neutralColor100):delete C.contrastColor,_.cursor&&(ee.cursor=_.cursor));var ne={r:S.borderRadius||0,rotation:te,padding:S.padding,zIndex:1};s.styledMode||(ne.fill=S.backgroundColor,ne.stroke=S.borderColor,ne["stroke-width"]=S.borderWidth),Y(ne,(function(i,s){void 0===i&&delete ne[s]}))}!R||O&&j(Q)?O&&j(Q)&&(R?ne.text=Q:(C.dataLabels=C.dataLabels||[],R=C.dataLabels[P]=te?D.text(Q,0,-9999,S.useHTML).addClass("highcharts-data-label"):D.label(Q,0,-9999,S.shape,null,null,S.useHTML,null,"data-label"),P||(C.dataLabel=R),R.addClass(" highcharts-data-label-color-"+C.colorIndex+" "+(S.className||"")+(S.useHTML?" highcharts-tracker":""))),R.options=S,R.attr(ne),s.styledMode||R.css(ee).shadow(S.shadow),R.added||R.add($),S.textPath&&!S.useHTML&&(R.setTextPath(C.getDataLabelPath&&C.getDataLabelPath(R)||C.graphic,S.textPath),C.dataLabelPath&&!S.textPath.enabled&&(C.dataLabelPath=C.dataLabelPath.destroy())),i.alignDataLabel(C,R,S,null,Z)):(C.dataLabel=C.dataLabel&&C.dataLabel.destroy(),C.dataLabels&&(1===C.dataLabels.length?delete C.dataLabels:delete C.dataLabels[P]),P||delete C.dataLabel,U&&(C.connector=C.connector.destroy(),C.connectors&&(1===C.connectors.length?delete C.connectors:delete C.connectors[P])))}))}))}U(this,"afterDrawDataLabels")},S.prototype.alignDataLabel=function(i,s,_,T,S){var C=this,P=this.chart,O=this.isCartesian&&P.inverted,M=this.enabledDataSorting,R=X(i.dlBox&&i.dlBox.centerX,i.plotX,-9999),D=X(i.plotY,-9999),j=s.getBBox(),U=_.rotation,V=_.align,Z=P.isInsidePlot(R,Math.round(D),{inverted:O,paneCoordinates:!0,series:C}),Y="justify"===X(_.overflow,M?"none":"justify"),Q=this.visible&&!1!==i.visible&&(i.series.forceDL||M&&!Y||Z||X(_.inside,!!this.options.stacking)&&T&&P.isInsidePlot(R,O?T.x+1:T.y+T.height-1,{inverted:O,paneCoordinates:!0,series:C})),A=function(_){M&&C.xAxis&&!Y&&C.setDataLabelStartPos(i,s,S,Z,_)};if(Q){var ee=P.renderer.fontMetrics(P.styledMode?void 0:_.style.fontSize,s).b;T=$({x:O?this.yAxis.len-D:R,y:Math.round(O?this.xAxis.len-R:D),width:0,height:0},T),$(_,{width:j.width,height:j.height}),U?(Y=!1,R=P.renderer.rotCorr(ee,U),A(R={x:T.x+(_.x||0)+T.width/2+R.x,y:T.y+(_.y||0)+{top:0,middle:.5,bottom:1}[_.verticalAlign]*T.height}),s[S?"attr":"animate"](R).attr({align:V}),A=180<(A=(U+720)%360)&&360>A,"left"===V?R.y-=A?j.height:0:"center"===V?(R.x-=j.width/2,R.y-=j.height/2):"right"===V&&(R.x-=j.width,R.y-=A?0:j.height),s.placed=!0,s.alignAttr=R):(A(T),s.align(_,void 0,T),R=s.alignAttr),Y&&0<=T.height?this.justifyDataLabel(s,_,R,j,T,S):X(_.crop,!0)&&(Q=P.isInsidePlot(R.x,R.y,{paneCoordinates:!0,series:C})&&P.isInsidePlot(R.x+j.width,R.y+j.height,{paneCoordinates:!0,series:C})),_.shape&&!U&&s[S?"attr":"animate"]({anchorX:O?P.plotWidth-i.plotY:i.plotX,anchorY:O?P.plotHeight-i.plotX:i.plotY})}S&&M&&(s.placed=!1),Q||M&&!Y||(s.hide(!0),s.placed=!1)},S.prototype.setDataLabelStartPos=function(i,s,_,T,S){var C=this.chart,P=C.inverted,O=this.xAxis,M=O.reversed,R=P?s.height/2:s.width/2;i=(i=i.pointWidth)?i/2:0,O=P?S.x:M?-R-i:O.width-R+i,S=P?M?this.yAxis.height-R+i:-R-i:S.y,s.startXPos=O,s.startYPos=S,T?"hidden"===s.visibility&&(s.show(),s.attr({opacity:0}).animate({opacity:1})):s.attr({opacity:1}).animate({opacity:0},void 0,s.hide),C.hasRendered&&(_&&s.attr({x:s.startXPos,y:s.startYPos}),s.placed=!0)},S.prototype.justifyDataLabel=function(i,s,_,T,S,C){var P=this.chart,O=s.align,M=s.verticalAlign,R=i.box?0:i.padding||0,D=s.x;D=void 0===D?0:D;var j=s.y,$=void 0===j?0:j;if(0>(j=(_.x||0)+R)){"right"===O&&0<=D?(s.align="left",s.inside=!0):D-=j;var U=!0}return(j=(_.x||0)+T.width-R)>P.plotWidth&&("left"===O&&0>=D?(s.align="right",s.inside=!0):D+=P.plotWidth-j,U=!0),0>(j=_.y+R)&&("bottom"===M&&0<=$?(s.verticalAlign="top",s.inside=!0):$-=j,U=!0),(j=(_.y||0)+T.height-R)>P.plotHeight&&("top"===M&&0>=$?(s.verticalAlign="bottom",s.inside=!0):$+=P.plotHeight-j,U=!0),U&&(s.x=D,s.y=$,i.placed=!C,i.align(s,void 0,S)),U},C.pie&&(C.pie.prototype.dataLabelPositioners={radialDistributionY:function(i){return i.top+i.distributeBox.pos},radialDistributionX:function(i,s,_,T){return i.getX(_<s.top+2||_>s.bottom-2?T:_,s.half,s)},justify:function(i,s,_){return _[0]+(i.half?-1:1)*(s+i.labelDistance)},alignToPlotEdges:function(i,s,_,T){return i=i.getBBox().width,s?i+T:_-i-T},alignToConnectors:function(i,s,_,T){var S,C=0;return i.forEach((function(i){(S=i.dataLabel.getBBox().width)>C&&(C=S)})),s?C+T:_-C-T}},C.pie.prototype.drawDataLabels=function(){var i,s,C,P,O,M,D,$,U,V,Y,Q,ee=this,te=ee.data,ne=ee.chart,re=ee.options.dataLabels||{},ie=re.connectorPadding,ae=ne.plotWidth,se=ne.plotHeight,oe=ne.plotLeft,le=Math.round(ne.chartWidth/3),ce=ee.center,ue=ce[2]/2,de=ce[1],he=[[],[]],pe=[0,0,0,0],me=ee.dataLabelPositioners;ee.visible&&(re.enabled||ee._hasPointLabels)&&(te.forEach((function(i){i.dataLabel&&i.visible&&i.dataLabel.shortened&&(i.dataLabel.attr({width:"auto"}).css({width:"auto",textOverflow:"clip"}),i.dataLabel.shortened=!1)})),S.prototype.drawDataLabels.apply(ee),te.forEach((function(i){i.dataLabel&&(i.visible?(he[i.half].push(i),i.dataLabel._pos=null,!j(re.style.width)&&!j(i.options.dataLabels&&i.options.dataLabels.style&&i.options.dataLabels.style.width)&&i.dataLabel.getBBox().width>le&&(i.dataLabel.css({width:Math.round(.7*le)+"px"}),i.dataLabel.shortened=!0)):(i.dataLabel=i.dataLabel.destroy(),i.dataLabels&&1===i.dataLabels.length&&delete i.dataLabels))})),he.forEach((function(s,T){var S,C=s.length,R=[];if(C){if(ee.sortByAngle(s,T-.5),0<ee.maxLabelDistance){var Z=Math.max(0,de-ue-ee.maxLabelDistance),te=Math.min(de+ue+ee.maxLabelDistance,ne.plotHeight);s.forEach((function(i){0<i.labelDistance&&i.dataLabel&&(i.top=Math.max(0,de-ue-i.labelDistance),i.bottom=Math.min(de+ue+i.labelDistance,ne.plotHeight),S=i.dataLabel.getBBox().height||21,i.distributeBox={target:i.labelPosition.natural.y-i.top+S/2,size:S,rank:i.y},R.push(i.distributeBox))})),Z=te+S-Z,_.distribute(R,Z,Z/5)}for(Y=0;Y<C;Y++){if(i=s[Y],M=i.labelPosition,P=i.dataLabel,V=!1===i.visible?"hidden":"inherit",U=Z=M.natural.y,R&&j(i.distributeBox)&&(void 0===i.distributeBox.pos?V="hidden":(D=i.distributeBox.size,U=me.radialDistributionY(i))),delete i.positionIndex,re.justify)$=me.justify(i,ue,ce);else switch(re.alignTo){case"connectors":$=me.alignToConnectors(s,T,ae,oe);break;case"plotEdges":$=me.alignToPlotEdges(P,T,ae,oe);break;default:$=me.radialDistributionX(ee,i,U,Z)}P._attr={visibility:V,align:M.alignment},Q=i.options.dataLabels||{},P._pos={x:$+X(Q.x,re.x)+({left:ie,right:-ie}[M.alignment]||0),y:U+X(Q.y,re.y)-10},M.final.x=$,M.final.y=U,X(re.crop,!0)&&(O=P.getBBox().width,Z=null,$-O<ie&&1===T?(Z=Math.round(O-$+ie),pe[3]=Math.max(Z,pe[3])):$+O>ae-ie&&0===T&&(Z=Math.round($+O-ae+ie),pe[1]=Math.max(Z,pe[1])),0>U-D/2?pe[0]=Math.max(Math.round(D/2-U),pe[0]):U+D/2>se&&(pe[2]=Math.max(Math.round(U+D/2-se),pe[2])),P.sideOverflow=Z)}}})),0===R(pe)||this.verifyDataLabelOverflow(pe))&&(this.placeDataLabels(),this.points.forEach((function(i){var _;Q=Z(re,i.options.dataLabels),(s=X(Q.connectorWidth,1))&&(C=i.connector,(P=i.dataLabel)&&P._pos&&i.visible&&0<i.labelDistance?(V=P._attr.visibility,(_=!C)&&(i.connector=C=ne.renderer.path().addClass("highcharts-data-label-connector  highcharts-color-"+i.colorIndex+(i.className?" "+i.className:"")).add(ee.dataLabelsGroup),ne.styledMode||C.attr({"stroke-width":s,stroke:Q.connectorColor||i.color||T.neutralColor60})),C[_?"attr":"animate"]({d:i.getConnectorPath()}),C.attr("visibility",V)):C&&(i.connector=C.destroy()))})))},C.pie.prototype.placeDataLabels=function(){this.points.forEach((function(i){var s,_=i.dataLabel;_&&i.visible&&((s=_._pos)?(_.sideOverflow&&(_._attr.width=Math.max(_.getBBox().width-_.sideOverflow,0),_.css({width:_._attr.width+"px",textOverflow:(this.options.dataLabels.style||{}).textOverflow||"ellipsis"}),_.shortened=!0),_.attr(_._attr),_[_.moved?"animate":"attr"](s),_.moved=!0):_&&_.attr({y:-9999})),delete i.distributeBox}),this)},C.pie.prototype.alignDataLabel=i,C.pie.prototype.verifyDataLabelOverflow=function(i){var s=this.center,_=this.options,T=_.center,S=_.minSize||80,C=null!==_.size;if(!C){if(null!==T[0])var P=Math.max(s[2]-Math.max(i[1],i[3]),S);else P=Math.max(s[2]-i[1]-i[3],S),s[0]+=(i[3]-i[1])/2;null!==T[1]?P=D(P,S,s[2]-Math.max(i[0],i[2])):(P=D(P,S,s[2]-i[0]-i[2]),s[1]+=(i[0]-i[2])/2),P<s[2]?(s[2]=P,s[3]=Math.min(Q(_.innerSize||0,P),P),this.translate(s),this.drawDataLabels&&this.drawDataLabels()):C=!0}return C}),C.column&&(C.column.prototype.alignDataLabel=function(i,s,_,T,C){var P=this.chart.inverted,O=i.series,M=i.dlBox||i.shapeArgs,R=X(i.below,i.plotY>X(this.translatedThreshold,O.yAxis.len)),D=X(_.inside,!!this.options.stacking);M&&(0>(T=Z(M)).y&&(T.height+=T.y,T.y=0),0<(M=T.y+T.height-O.yAxis.len)&&M<T.height&&(T.height-=M),P&&(T={x:O.yAxis.len-T.y-T.height,y:O.xAxis.len-T.x-T.width,width:T.height,height:T.width}),D||(P?(T.x+=R?0:T.width,T.width=0):(T.y+=R?T.height:0,T.height=0))),_.align=X(_.align,!P||D?"center":R?"right":"left"),_.verticalAlign=X(_.verticalAlign,P||D?"middle":R?"top":"bottom"),S.prototype.alignDataLabel.call(this,i,s,_,T,C),_.inside&&i.contrastColor&&s.css({color:i.contrastColor})})})),L(s,"Extensions/OverlappingDataLabels.js",[s["Core/Chart/Chart.js"],s["Core/Utilities.js"]],(function(i,s){function v(i,s){var _=!1;if(i){var S=i.newOpacity;i.oldOpacity!==S&&(i.alignAttr&&i.placed?(i[S?"removeClass":"addClass"]("highcharts-data-label-hidden"),_=!0,i.alignAttr.opacity=S,i[i.isOld?"animate":"attr"](i.alignAttr,null,(function(){s.styledMode||i.css({pointerEvents:S?"auto":"none"})})),T(s,"afterHideOverlappingLabel")):i.attr({opacity:S})),i.isOld=!0}return _}var _=s.addEvent,T=s.fireEvent,S=s.isArray,C=s.isNumber,P=s.objectEach,O=s.pick;_(i,"render",(function(){var i=this,s=[];(this.labelCollectors||[]).forEach((function(i){s=s.concat(i())})),(this.yAxis||[]).forEach((function(i){i.stacking&&i.options.stackLabels&&!i.options.stackLabels.allowOverlap&&P(i.stacking.stacks,(function(i){P(i,(function(i){i.label&&"hidden"!==i.label.visibility&&s.push(i.label)}))}))})),(this.series||[]).forEach((function(_){var T=_.options.dataLabels;_.visible&&(!1!==T.enabled||_._hasPointLabels)&&(T=function(_){return _.forEach((function(_){_.visible&&(S(_.dataLabels)?_.dataLabels:_.dataLabel?[_.dataLabel]:[]).forEach((function(T){var S=T.options;T.labelrank=O(S.labelrank,_.labelrank,_.shapeArgs&&_.shapeArgs.height),S.allowOverlap?(T.oldOpacity=T.opacity,T.newOpacity=1,v(T,i)):s.push(T)}))}))},T(_.nodes||[]),T(_.points))})),this.hideOverlappingLabels(s)})),i.prototype.hideOverlappingLabels=function(i){var s,_,S,P=this,O=i.length,M=P.renderer,R=!1,l=function(i){var s,_,T=i.box?0:i.padding||0,S=s=0;if(i&&(!i.alignAttr||i.placed)){var P=i.alignAttr||{x:i.attr("x"),y:i.attr("y")},O=i.parentGroup;i.width||(s=i.getBBox(),i.width=s.width,i.height=s.height,s=M.fontMetrics(null,i.element).h);var R=i.width-2*T;return(_={left:"0",center:"0.5",right:"1"}[i.alignValue])?S=+_*R:C(i.x)&&Math.round(i.x)!==i.translateX&&(S=i.x-i.translateX),{x:P.x+(O.translateX||0)+T-(S||0),y:P.y+(O.translateY||0)+T-s,width:i.width-2*T,height:i.height-2*T}}};for(_=0;_<O;_++)(s=i[_])&&(s.oldOpacity=s.opacity,s.newOpacity=1,s.absoluteBox=l(s));for(i.sort((function(i,s){return(s.labelrank||0)-(i.labelrank||0)})),_=0;_<O;_++){var D=(l=i[_])&&l.absoluteBox;for(s=_+1;s<O;++s){var j=(S=i[s])&&S.absoluteBox;!D||!j||l===S||0===l.newOpacity||0===S.newOpacity||j.x>=D.x+D.width||j.x+j.width<=D.x||j.y>=D.y+D.height||j.y+j.height<=D.y||((l.labelrank<S.labelrank?l:S).newOpacity=0)}}i.forEach((function(i){v(i,P)&&(R=!0)})),R&&T(P,"afterHideAllOverlappingLabels")}})),L(s,"Core/Responsive.js",[s["Core/Utilities.js"]],(function(i){var s=i.extend,_=i.find,T=i.isArray,S=i.isObject,C=i.merge,P=i.objectEach,O=i.pick,M=i.splat,R=i.uniqueKey,D=function(){function a(){}return a.prototype.currentOptions=function(i){var s=this,_={};return function c(i,_,C,O){var R;P(i,(function(i,P){if(!O&&-1<s.collectionsWithUpdate.indexOf(P)&&_[P])for(i=M(i),C[P]=[],R=0;R<Math.max(i.length,_[P].length);R++)_[P][R]&&(void 0===i[R]?C[P][R]=_[P][R]:(C[P][R]={},c(i[R],_[P][R],C[P][R],O+1)));else S(i)?(C[P]=T(i)?[]:{},c(i,_[P]||{},C[P],O+1)):C[P]=void 0===_[P]?null:_[P]}))}(i,this.options,_,0),_},a.prototype.matchResponsiveRule=function(i,s){var _=i.condition;(_.callback||function(){return this.chartWidth<=O(_.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=O(_.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=O(_.minWidth,0)&&this.chartHeight>=O(_.minHeight,0)}).call(this)&&s.push(i._id)},a.prototype.setResponsive=function(i,s){var T=this.options.responsive,S=this.currentResponsive,P=[];!s&&T&&T.rules&&T.rules.forEach((function(i){void 0===i._id&&(i._id=R()),this.matchResponsiveRule(i,P)}),this),s=C.apply(void 0,P.map((function(i){return _((T||{}).rules||[],(function(s){return s._id===i}))})).map((function(i){return i&&i.chartOptions}))),s.isResponsiveOptions=!0,(P=P.toString()||void 0)!==(S&&S.ruleIds)&&(S&&this.update(S.undoOptions,i,!0),P?((S=this.currentOptions(s)).isResponsiveOptions=!0,this.currentResponsive={ruleIds:P,mergedOptions:s,undoOptions:S},this.update(s,i,!0)):this.currentResponsive=void 0)},a}();return i=function(){function a(){}return a.compose=function(i){return s(i.prototype,D.prototype),i},a}()})),L(s,"masters/highcharts.src.js",[s["Core/Globals.js"],s["Core/Utilities.js"],s["Core/DefaultOptions.js"],s["Core/Animation/Fx.js"],s["Core/Animation/AnimationUtilities.js"],s["Core/Renderer/HTML/AST.js"],s["Core/FormatUtilities.js"],s["Core/Renderer/SVG/SVGElement.js"],s["Core/Renderer/SVG/SVGRenderer.js"],s["Core/Renderer/HTML/HTMLElement.js"],s["Core/Renderer/HTML/HTMLRenderer.js"],s["Core/Axis/Axis.js"],s["Core/Axis/PlotLineOrBand.js"],s["Core/Axis/Tick.js"],s["Core/Pointer.js"],s["Core/MSPointer.js"],s["Core/Chart/Chart.js"],s["Core/Series/Series.js"],s["Core/Responsive.js"],s["Core/Color/Color.js"],s["Core/Time.js"]],(function(i,s,_,T,S,C,P,O,M,R,D,j,$,U,V,Z,Y,X,Q,ee,te){return i.animate=S.animate,i.animObject=S.animObject,i.getDeferredAnimation=S.getDeferredAnimation,i.setAnimation=S.setAnimation,i.stop=S.stop,i.timers=T.timers,i.AST=C,i.Axis=j,i.Chart=Y,i.chart=Y.chart,i.Fx=T,i.PlotLineOrBand=$,i.Pointer=Z.isRequired()?Z:V,i.Series=X,i.SVGElement=O,i.SVGRenderer=M,i.Tick=U,i.Time=te,i.Color=ee,i.color=ee.parse,D.compose(M),R.compose(O),i.defaultOptions=_.defaultOptions,i.getOptions=_.getOptions,i.time=_.defaultTime,i.setOptions=_.setOptions,i.dateFormat=P.dateFormat,i.format=P.format,i.numberFormat=P.numberFormat,i.addEvent=s.addEvent,i.arrayMax=s.arrayMax,i.arrayMin=s.arrayMin,i.attr=s.attr,i.clearTimeout=s.clearTimeout,i.correctFloat=s.correctFloat,i.createElement=s.createElement,i.css=s.css,i.defined=s.defined,i.destroyObjectProperties=s.destroyObjectProperties,i.discardElement=s.discardElement,i.erase=s.erase,i.error=s.error,i.extend=s.extend,i.extendClass=s.extendClass,i.find=s.find,i.fireEvent=s.fireEvent,i.getMagnitude=s.getMagnitude,i.getStyle=s.getStyle,i.inArray=s.inArray,i.isArray=s.isArray,i.isClass=s.isClass,i.isDOMElement=s.isDOMElement,i.isFunction=s.isFunction,i.isNumber=s.isNumber,i.isObject=s.isObject,i.isString=s.isString,i.keys=s.keys,i.merge=s.merge,i.normalizeTickInterval=s.normalizeTickInterval,i.objectEach=s.objectEach,i.offset=s.offset,i.pad=s.pad,i.pick=s.pick,i.pInt=s.pInt,i.relativeLength=s.relativeLength,i.removeEvent=s.removeEvent,i.splat=s.splat,i.stableSort=s.stableSort,i.syncTimeout=s.syncTimeout,i.timeUnits=s.timeUnits,i.uniqueKey=s.uniqueKey,i.useSerialIds=s.useSerialIds,i.wrap=s.wrap,Q.compose(Y),i})),s["masters/highcharts.src.js"]._modules=s,s["masters/highcharts.src.js"]},i.exports?(C.default=C,i.exports=S.document?C(S):C):void 0===(T=function(){return C(S)}.call(s,_,s,i))||(i.exports=T)},27376:function(i){i.exports=function isFunction(i){if(!i)return!1;var _=s.call(i);return"[object Function]"===_||"function"==typeof i&&"[object RegExp]"!==_||"undefined"!=typeof window&&(i===window.setTimeout||i===window.alert||i===window.confirm||i===window.prompt)};var s=Object.prototype.toString},27537:function(i,s){function keyCode(i){if(i&&"object"==typeof i){var s=i.which||i.keyCode||i.charCode;s&&(i=s)}if("number"==typeof i)return C[i];var S,P=String(i);return(S=_[P.toLowerCase()])?S:(S=T[P.toLowerCase()])||(1===P.length?P.charCodeAt(0):void 0)}keyCode.isEventKey=function isEventKey(i,s){if(i&&"object"==typeof i){var S=i.which||i.keyCode||i.charCode;if(null==S)return!1;if("string"==typeof s){var C;if(C=_[s.toLowerCase()])return C===S;if(C=T[s.toLowerCase()])return C===S}else if("number"==typeof s)return s===S;return!1}};var _=(s=i.exports=keyCode).code=s.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},T=s.aliases={windows:91,"":16,"":18,"":17,"":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};
/*!
 * Programatically add the following
 */
for(S=97;S<123;S++)_[String.fromCharCode(S)]=S-32;for(var S=48;S<58;S++)_[S-48]=S;for(S=1;S<13;S++)_["f"+S]=S+111;for(S=0;S<10;S++)_["numpad "+S]=S+96;var C=s.names=s.title={};for(S in _)C[_[S]]=S;for(var P in T)_[P]=T[P]},85220:function(i){"use strict";var s=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],parseId3TagSize=function(i,s){var _=i[s+6]<<21|i[s+7]<<14|i[s+8]<<7|i[s+9];return _=_>=0?_:0,(16&i[s+5])>>4?_+20:_+10},getId3Offset=function(i,s){return i.length-s<10||i[s]!=="I".charCodeAt(0)||i[s+1]!=="D".charCodeAt(0)||i[s+2]!=="3".charCodeAt(0)?s:(s+=parseId3TagSize(i,s),getId3Offset(i,s))},parseSyncSafeInteger=function(i){return i[0]<<21|i[1]<<14|i[2]<<7|i[3]};i.exports={isLikelyAacData:function(i){var s=getId3Offset(i,0);return i.length>=s+2&&255==(255&i[s])&&240==(240&i[s+1])&&16==(22&i[s+1])},parseId3TagSize:parseId3TagSize,parseAdtsSize:function(i,s){var _=(224&i[s+5])>>5,T=i[s+4]<<3;return 6144&i[s+3]|T|_},parseType:function(i,s){return i[s]==="I".charCodeAt(0)&&i[s+1]==="D".charCodeAt(0)&&i[s+2]==="3".charCodeAt(0)?"timed-metadata":!0&i[s]&&240==(240&i[s+1])?"audio":null},parseSampleRate:function(i){for(var _=0;_+5<i.length;){if(255===i[_]&&240==(246&i[_+1]))return s[(60&i[_+2])>>>2];_++}return null},parseAacTimestamp:function(i){var s,_,T;s=10,64&i[5]&&(s+=4,s+=parseSyncSafeInteger(i.subarray(10,14)));do{if((_=parseSyncSafeInteger(i.subarray(s+4,s+8)))<1)return null;if("PRIV"===String.fromCharCode(i[s],i[s+1],i[s+2],i[s+3])){T=i.subarray(s+10,s+_+10);for(var S=0;S<T.byteLength;S++)if(0===T[S]){var C=unescape(function(i,s,_){var T,S="";for(T=s;T<_;T++)S+="%"+("00"+i[T].toString(16)).slice(-2);return S}(T,0,S));if("com.apple.streaming.transportStreamTimestamp"===C){var P=T.subarray(S+1),O=(1&P[3])<<30|P[4]<<22|P[5]<<14|P[6]<<6|P[7]>>>2;return O*=4,O+=3&P[7]}break}}s+=10,s+=_}while(s<i.byteLength);return null}}},34149:function(i,s,_){"use strict";var T=_(25215),parsePid=function(i){var s=31&i[1];return s<<=8,s|=i[2]},parsePayloadUnitStartIndicator=function(i){return!!(64&i[1])},parseAdaptionField=function(i){var s=0;return(48&i[3])>>>4>1&&(s+=i[4]+1),s},parseNalUnitType=function(i){switch(i){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}};i.exports={parseType:function(i,s){var _=parsePid(i);return 0===_?"pat":_===s?"pmt":s?"pes":null},parsePat:function(i){var s=parsePayloadUnitStartIndicator(i),_=4+parseAdaptionField(i);return s&&(_+=i[_]+1),(31&i[_+10])<<8|i[_+11]},parsePmt:function(i){var s={},_=parsePayloadUnitStartIndicator(i),T=4+parseAdaptionField(i);if(_&&(T+=i[T]+1),1&i[T+5]){var S;S=3+((15&i[T+1])<<8|i[T+2])-4;for(var C=12+((15&i[T+10])<<8|i[T+11]);C<S;){var P=T+C;s[(31&i[P+1])<<8|i[P+2]]=i[P],C+=5+((15&i[P+3])<<8|i[P+4])}return s}},parsePayloadUnitStartIndicator:parsePayloadUnitStartIndicator,parsePesType:function(i,s){switch(s[parsePid(i)]){case T.H264_STREAM_TYPE:return"video";case T.ADTS_STREAM_TYPE:return"audio";case T.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(i){if(!parsePayloadUnitStartIndicator(i))return null;var s=4+parseAdaptionField(i);if(s>=i.byteLength)return null;var _,T=null;return 192&(_=i[s+7])&&((T={}).pts=(14&i[s+9])<<27|(255&i[s+10])<<20|(254&i[s+11])<<12|(255&i[s+12])<<5|(254&i[s+13])>>>3,T.pts*=4,T.pts+=(6&i[s+13])>>>1,T.dts=T.pts,64&_&&(T.dts=(14&i[s+14])<<27|(255&i[s+15])<<20|(254&i[s+16])<<12|(255&i[s+17])<<5|(254&i[s+18])>>>3,T.dts*=4,T.dts+=(6&i[s+18])>>>1)),T},videoPacketContainsKeyFrame:function(i){for(var s=4+parseAdaptionField(i),_=i.subarray(s),T=0,S=0,C=!1;S<_.byteLength-3;S++)if(1===_[S+2]){T=S+5;break}for(;T<_.byteLength;)switch(_[T]){case 0:if(0!==_[T-1]){T+=2;break}if(0!==_[T-2]){T++;break}S+3!==T-2&&"slice_layer_without_partitioning_rbsp_idr"===parseNalUnitType(31&_[S+3])&&(C=!0);do{T++}while(1!==_[T]&&T<_.length);S=T-2,T+=3;break;case 1:if(0!==_[T-1]||0!==_[T-2]){T+=3;break}"slice_layer_without_partitioning_rbsp_idr"===parseNalUnitType(31&_[S+3])&&(C=!0),S=T-2,T+=3;break;default:T+=3}return _=_.subarray(S),T-=S,S=0,_&&_.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===parseNalUnitType(31&_[S+3])&&(C=!0),C}}},25215:function(i){"use strict";i.exports={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21}},10817:function(i,s,_){"use strict";var T=_(71961),S="shared",handleRollover=function(i,s){var _=1;for(i>s&&(_=-1);Math.abs(s-i)>4294967296;)i+=8589934592*_;return i},TimestampRolloverStream=function(i){var s,_;TimestampRolloverStream.prototype.init.call(this),this.type_=i||S,this.push=function(i){this.type_!==S&&i.type!==this.type_||(void 0===_&&(_=i.dts),i.dts=handleRollover(i.dts,_),i.pts=handleRollover(i.pts,_),s=i.dts,this.trigger("data",i))},this.flush=function(){_=s,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){_=void 0,s=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};TimestampRolloverStream.prototype=new T,i.exports={TimestampRolloverStream:TimestampRolloverStream,handleRollover:handleRollover}},37088:function(i,s,_){var T=_(71976).toUnsigned,S=_(90002),findBox=function(i,s){var _,C,P,O,M,R=[];if(!s.length)return null;for(_=0;_<i.byteLength;)C=T(i[_]<<24|i[_+1]<<16|i[_+2]<<8|i[_+3]),P=S(i.subarray(_+4,_+8)),O=C>1?_+C:i.byteLength,P===s[0]&&(1===s.length?R.push(i.subarray(_+8,O)):(M=findBox(i.subarray(_+8,O),s.slice(1))).length&&(R=R.concat(M))),_=O;return R};i.exports=findBox},90002:function(i){i.exports=function(i){var s="";return s+=String.fromCharCode(i[0]),s+=String.fromCharCode(i[1]),s+=String.fromCharCode(i[2]),s+=String.fromCharCode(i[3])}},47661:function(i,s,_){"use strict";var T,S,C,P,O,M,R=_(71976).toUnsigned,D=_(71976).toHexString,j=_(37088),$=_(90002),U=_(65654),V=_(62459),Z=_(83389);T=function(i){return j(i,["moov","trak"]).reduce((function(i,s){var _,T,S,C,P;return(_=j(s,["tkhd"])[0])?(T=_[0],C=R(_[S=0===T?12:20]<<24|_[S+1]<<16|_[S+2]<<8|_[S+3]),(P=j(s,["mdia","mdhd"])[0])?(S=0===(T=P[0])?12:20,i[C]=R(P[S]<<24|P[S+1]<<16|P[S+2]<<8|P[S+3]),i):null):null}),{})},S=function(i,s){var _,T,S;return _=j(s,["moof","traf"]),T=[].concat.apply([],_.map((function(s){return j(s,["tfhd"]).map((function(_){var T,S,C;return T=R(_[4]<<24|_[5]<<16|_[6]<<8|_[7]),S=i[T]||9e4,C=j(s,["tfdt"]).map((function(i){var s,_;return s=i[0],_=R(i[4]<<24|i[5]<<16|i[6]<<8|i[7]),1===s&&(_*=Math.pow(2,32),_+=R(i[8]<<24|i[9]<<16|i[10]<<8|i[11])),_}))[0],(C="number"!=typeof C||isNaN(C)?1/0:C)/S}))}))),S=Math.min.apply(null,T),isFinite(S)?S:0},C=function(i,s){var _,T=j(s,["moof","traf"]),S=0,C=0;if(T&&T.length){var P=j(T[0],["tfhd"])[0],O=j(T[0],["trun"])[0],M=j(T[0],["tfdt"])[0];if(P)_=U(P).trackId;if(M)S=Z(M).baseMediaDecodeTime;if(O){var R=V(O);R.samples&&R.samples.length&&(C=R.samples[0].compositionTimeOffset||0)}}return(S+C)/(i[_]||9e4)},P=function(i){var s=j(i,["moov","trak"]),_=[];return s.forEach((function(i){var s=j(i,["mdia","hdlr"]),T=j(i,["tkhd"]);s.forEach((function(i,s){var S,C,P=$(i.subarray(8,12)),O=T[s];"vide"===P&&(C=0===(S=new DataView(O.buffer,O.byteOffset,O.byteLength)).getUint8(0)?S.getUint32(12):S.getUint32(20),_.push(C))}))})),_},M=function(i){var s=0===i[0]?12:20;return R(i[s]<<24|i[s+1]<<16|i[s+2]<<8|i[s+3])},O=function(i){var s=j(i,["moov","trak"]),_=[];return s.forEach((function(i){var s,T,S={},C=j(i,["tkhd"])[0];C&&(T=(s=new DataView(C.buffer,C.byteOffset,C.byteLength)).getUint8(0),S.id=0===T?s.getUint32(12):s.getUint32(20));var P=j(i,["mdia","hdlr"])[0];if(P){var O=$(P.subarray(8,12));S.type="vide"===O?"video":"soun"===O?"audio":O}var R=j(i,["mdia","minf","stbl","stsd"])[0];if(R){var U=R.subarray(8);S.codec=$(U.subarray(4,8));var V,Z=j(U,[S.codec])[0];Z&&(/^[a-z]vc[1-9]$/i.test(S.codec)?(V=Z.subarray(78),"avcC"===$(V.subarray(4,8))&&V.length>11?(S.codec+=".",S.codec+=D(V[9]),S.codec+=D(V[10]),S.codec+=D(V[11])):S.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(S.codec)?(V=Z.subarray(28),"esds"===$(V.subarray(4,8))&&V.length>20&&0!==V[19]?(S.codec+="."+D(V[19]),S.codec+="."+D(V[20]>>>2&63).replace(/^0/,"")):S.codec="mp4a.40.2"):S.codec=S.codec.toLowerCase())}var Y=j(i,["mdia","mdhd"])[0];Y&&(S.timescale=M(Y)),_.push(S)})),_},i.exports={findBox:j,parseType:$,timescale:T,startTime:S,compositionStartTime:C,videoTrackIds:P,tracks:O,getTimescaleFromMediaHeader:M}},64633:function(i){i.exports=function(i){return{isLeading:(12&i[0])>>>2,dependsOn:3&i[0],isDependedOn:(192&i[1])>>>6,hasRedundancy:(48&i[1])>>>4,paddingValue:(14&i[1])>>>1,isNonSyncSample:1&i[1],degradationPriority:i[2]<<8|i[3]}}},84221:function(i){var s=Math.pow(2,32);i.exports=function(i){var _=new DataView(i.buffer,i.byteOffset,i.byteLength),T={version:i[0],flags:new Uint8Array(i.subarray(1,4)),references:[],referenceId:_.getUint32(4),timescale:_.getUint32(8)},S=12;0===T.version?(T.earliestPresentationTime=_.getUint32(S),T.firstOffset=_.getUint32(S+4),S+=8):(T.earliestPresentationTime=_.getUint32(S)*s+_.getUint32(S+4),T.firstOffset=_.getUint32(S+8)*s+_.getUint32(S+12),S+=16),S+=2;var C=_.getUint16(S);for(S+=2;C>0;S+=12,C--)T.references.push({referenceType:(128&i[S])>>>7,referencedSize:2147483647&_.getUint32(S),subsegmentDuration:_.getUint32(S+4),startsWithSap:!!(128&i[S+8]),sapType:(112&i[S+8])>>>4,sapDeltaTime:268435455&_.getUint32(S+8)});return T}},83389:function(i,s,_){var T=_(71976).toUnsigned;i.exports=function(i){var s={version:i[0],flags:new Uint8Array(i.subarray(1,4)),baseMediaDecodeTime:T(i[4]<<24|i[5]<<16|i[6]<<8|i[7])};return 1===s.version&&(s.baseMediaDecodeTime*=Math.pow(2,32),s.baseMediaDecodeTime+=T(i[8]<<24|i[9]<<16|i[10]<<8|i[11])),s}},65654:function(i){i.exports=function(i){var s,_=new DataView(i.buffer,i.byteOffset,i.byteLength),T={version:i[0],flags:new Uint8Array(i.subarray(1,4)),trackId:_.getUint32(4)},S=1&T.flags[2],C=2&T.flags[2],P=8&T.flags[2],O=16&T.flags[2],M=32&T.flags[2],R=65536&T.flags[0],D=131072&T.flags[0];return s=8,S&&(s+=4,T.baseDataOffset=_.getUint32(12),s+=4),C&&(T.sampleDescriptionIndex=_.getUint32(s),s+=4),P&&(T.defaultSampleDuration=_.getUint32(s),s+=4),O&&(T.defaultSampleSize=_.getUint32(s),s+=4),M&&(T.defaultSampleFlags=_.getUint32(s)),R&&(T.durationIsEmpty=!0),!S&&D&&(T.baseDataOffsetIsMoof=!0),T}},62459:function(i,s,_){var T=_(64633);i.exports=function(i){var s,_={version:i[0],flags:new Uint8Array(i.subarray(1,4)),samples:[]},S=new DataView(i.buffer,i.byteOffset,i.byteLength),C=1&_.flags[2],P=4&_.flags[2],O=1&_.flags[1],M=2&_.flags[1],R=4&_.flags[1],D=8&_.flags[1],j=S.getUint32(4),$=8;for(C&&(_.dataOffset=S.getInt32($),$+=4),P&&j&&(s={flags:T(i.subarray($,$+4))},$+=4,O&&(s.duration=S.getUint32($),$+=4),M&&(s.size=S.getUint32($),$+=4),D&&(1===_.version?s.compositionTimeOffset=S.getInt32($):s.compositionTimeOffset=S.getUint32($),$+=4),_.samples.push(s),j--);j--;)s={},O&&(s.duration=S.getUint32($),$+=4),M&&(s.size=S.getUint32($),$+=4),R&&(s.flags=T(i.subarray($,$+4)),$+=4),D&&(1===_.version?s.compositionTimeOffset=S.getInt32($):s.compositionTimeOffset=S.getUint32($),$+=4),_.samples.push(s);return _}},65547:function(i,s,_){"use strict";var T=_(25215),S=_(10817).handleRollover,C={};C.ts=_(34149),C.aac=_(85220);var P=_(51489).ONE_SECOND_IN_TS,O=188,M=71,parseAudioPes_=function(i,s,_){for(var T,S,P,R,D=0,j=O,$=!1;j<=i.byteLength;)if(i[D]!==M||i[j]!==M&&j!==i.byteLength)D++,j++;else{if(T=i.subarray(D,j),"pes"===C.ts.parseType(T,s.pid))S=C.ts.parsePesType(T,s.table),P=C.ts.parsePayloadUnitStartIndicator(T),"audio"===S&&P&&(R=C.ts.parsePesTime(T))&&(R.type="audio",_.audio.push(R),$=!0);if($)break;D+=O,j+=O}for(D=(j=i.byteLength)-O,$=!1;D>=0;)if(i[D]!==M||i[j]!==M&&j!==i.byteLength)D--,j--;else{if(T=i.subarray(D,j),"pes"===C.ts.parseType(T,s.pid))S=C.ts.parsePesType(T,s.table),P=C.ts.parsePayloadUnitStartIndicator(T),"audio"===S&&P&&(R=C.ts.parsePesTime(T))&&(R.type="audio",_.audio.push(R),$=!0);if($)break;D-=O,j-=O}},parseVideoPes_=function(i,s,_){for(var T,S,P,R,D,j,$,U=0,V=O,Z=!1,Y={data:[],size:0};V<i.byteLength;)if(i[U]!==M||i[V]!==M)U++,V++;else{if(T=i.subarray(U,V),"pes"===C.ts.parseType(T,s.pid))if(S=C.ts.parsePesType(T,s.table),P=C.ts.parsePayloadUnitStartIndicator(T),"video"===S&&(P&&!Z&&(R=C.ts.parsePesTime(T))&&(R.type="video",_.video.push(R),Z=!0),!_.firstKeyFrame)){if(P&&0!==Y.size){for(D=new Uint8Array(Y.size),j=0;Y.data.length;)$=Y.data.shift(),D.set($,j),j+=$.byteLength;if(C.ts.videoPacketContainsKeyFrame(D)){var X=C.ts.parsePesTime(D);X?(_.firstKeyFrame=X,_.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}Y.size=0}Y.data.push(T),Y.size+=T.byteLength}if(Z&&_.firstKeyFrame)break;U+=O,V+=O}for(U=(V=i.byteLength)-O,Z=!1;U>=0;)if(i[U]!==M||i[V]!==M)U--,V--;else{if(T=i.subarray(U,V),"pes"===C.ts.parseType(T,s.pid))S=C.ts.parsePesType(T,s.table),P=C.ts.parsePayloadUnitStartIndicator(T),"video"===S&&P&&(R=C.ts.parsePesTime(T))&&(R.type="video",_.video.push(R),Z=!0);if(Z)break;U-=O,V-=O}},inspectTs_=function(i){var s={pid:null,table:null},_={};for(var S in function(i,s){for(var _,T=0,S=O;S<i.byteLength;)if(i[T]!==M||i[S]!==M)T++,S++;else{switch(_=i.subarray(T,S),C.ts.parseType(_,s.pid)){case"pat":s.pid||(s.pid=C.ts.parsePat(_));break;case"pmt":s.table||(s.table=C.ts.parsePmt(_))}if(s.pid&&s.table)return;T+=O,S+=O}}(i,s),s.table){if(s.table.hasOwnProperty(S))switch(s.table[S]){case T.H264_STREAM_TYPE:_.video=[],parseVideoPes_(i,s,_),0===_.video.length&&delete _.video;break;case T.ADTS_STREAM_TYPE:_.audio=[],parseAudioPes_(i,s,_),0===_.audio.length&&delete _.audio}}return _};i.exports={inspect:function(i,s){var _;return _=C.aac.isLikelyAacData(i)?function(i){for(var s,_=!1,T=0,S=null,O=null,M=0,R=0;i.length-R>=3;){switch(C.aac.parseType(i,R)){case"timed-metadata":if(i.length-R<10){_=!0;break}if((M=C.aac.parseId3TagSize(i,R))>i.length){_=!0;break}null===O&&(s=i.subarray(R,R+M),O=C.aac.parseAacTimestamp(s)),R+=M;break;case"audio":if(i.length-R<7){_=!0;break}if((M=C.aac.parseAdtsSize(i,R))>i.length){_=!0;break}null===S&&(s=i.subarray(R,R+M),S=C.aac.parseSampleRate(s)),T++,R+=M;break;default:R++}if(_)return null}if(null===S||null===O)return null;var D=P/S;return{audio:[{type:"audio",dts:O,pts:O},{type:"audio",dts:O+1024*T*D,pts:O+1024*T*D}]}}(i):inspectTs_(i),_&&(_.audio||_.video)?(function(i,s){if(i.audio&&i.audio.length){var _=s;void 0===_&&(_=i.audio[0].dts),i.audio.forEach((function(i){i.dts=S(i.dts,_),i.pts=S(i.pts,_),i.dtsTime=i.dts/P,i.ptsTime=i.pts/P}))}if(i.video&&i.video.length){var T=s;if(void 0===T&&(T=i.video[0].dts),i.video.forEach((function(i){i.dts=S(i.dts,T),i.pts=S(i.pts,T),i.dtsTime=i.dts/P,i.ptsTime=i.pts/P})),i.firstKeyFrame){var C=i.firstKeyFrame;C.dts=S(C.dts,T),C.pts=S(C.pts,T),C.dtsTime=C.dts/P,C.ptsTime=C.dts/P}}}(_,s),_):null},parseAudioPes_:parseAudioPes_}},71976:function(i){i.exports={toUnsigned:function(i){return i>>>0},toHexString:function(i){return("00"+i.toString(16)).slice(-2)}}},51489:function(i){var s,_,T,S,C,P,O,M=9e4;s=function(i){return i*M},_=function(i,s){return i*s},T=function(i){return i/M},S=function(i,s){return i/s},C=function(i,_){return s(S(i,_))},P=function(i,s){return _(T(i),s)},O=function(i,s,_){return T(_?i:i-s)},i.exports={ONE_SECOND_IN_TS:M,secondsToVideoTs:s,secondsToAudioTs:_,videoTsToSeconds:T,audioTsToSeconds:S,audioTsToVideoTs:C,videoTsToAudioTs:P,metadataTsToSeconds:O}},71961:function(i){"use strict";var Stream=function(){this.init=function(){var i={};this.on=function(s,_){i[s]||(i[s]=[]),i[s]=i[s].concat(_)},this.off=function(s,_){var T;return!!i[s]&&(T=i[s].indexOf(_),i[s]=i[s].slice(),i[s].splice(T,1),T>-1)},this.trigger=function(s){var _,T,S,C;if(_=i[s])if(2===arguments.length)for(S=_.length,T=0;T<S;++T)_[T].call(this,arguments[1]);else{for(C=[],T=arguments.length,T=1;T<arguments.length;++T)C.push(arguments[T]);for(S=_.length,T=0;T<S;++T)_[T].apply(this,C)}},this.dispose=function(){i={}}}};Stream.prototype.pipe=function(i){return this.on("data",(function(s){i.push(s)})),this.on("done",(function(s){i.flush(s)})),this.on("partialdone",(function(s){i.partialFlush(s)})),this.on("endedtimeline",(function(s){i.endTimeline(s)})),this.on("reset",(function(s){i.reset(s)})),i},Stream.prototype.push=function(i){this.trigger("data",i)},Stream.prototype.flush=function(i){this.trigger("done",i)},Stream.prototype.partialFlush=function(i){this.trigger("partialdone",i)},Stream.prototype.endTimeline=function(i){this.trigger("endedtimeline",i)},Stream.prototype.reset=function(i){this.trigger("reset",i)},i.exports=Stream},34155:function(i){var s,_,T=i.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(i){if(s===setTimeout)return setTimeout(i,0);if((s===defaultSetTimout||!s)&&setTimeout)return s=setTimeout,setTimeout(i,0);try{return s(i,0)}catch(_){try{return s.call(null,i,0)}catch(_){return s.call(this,i,0)}}}!function(){try{s="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(i){s=defaultSetTimout}try{_="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(i){_=defaultClearTimeout}}();var S,C=[],P=!1,O=-1;function cleanUpNextTick(){P&&S&&(P=!1,S.length?C=S.concat(C):O=-1,C.length&&drainQueue())}function drainQueue(){if(!P){var i=runTimeout(cleanUpNextTick);P=!0;for(var s=C.length;s;){for(S=C,C=[];++O<s;)S&&S[O].run();O=-1,s=C.length}S=null,P=!1,function runClearTimeout(i){if(_===clearTimeout)return clearTimeout(i);if((_===defaultClearTimeout||!_)&&clearTimeout)return _=clearTimeout,clearTimeout(i);try{return _(i)}catch(s){try{return _.call(null,i)}catch(s){return _.call(this,i)}}}(i)}}function Item(i,s){this.fun=i,this.array=s}function noop(){}T.nextTick=function(i){var s=new Array(arguments.length-1);if(arguments.length>1)for(var _=1;_<arguments.length;_++)s[_-1]=arguments[_];C.push(new Item(i,s)),1!==C.length||P||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},T.title="browser",T.browser=!0,T.env={},T.argv=[],T.version="",T.versions={},T.on=noop,T.addListener=noop,T.once=noop,T.off=noop,T.removeListener=noop,T.removeAllListeners=noop,T.emit=noop,T.prependListener=noop,T.prependOnceListener=noop,T.listeners=function(i){return[]},T.binding=function(i){throw new Error("process.binding is not supported")},T.cwd=function(){return"/"},T.chdir=function(i){throw new Error("process.chdir is not supported")},T.umask=function(){return 0}},35666:function(i){var s=function(i){"use strict";var s,_=Object.prototype,T=_.hasOwnProperty,S="function"==typeof Symbol?Symbol:{},C=S.iterator||"@@iterator",P=S.asyncIterator||"@@asyncIterator",O=S.toStringTag||"@@toStringTag";function define(i,s,_){return Object.defineProperty(i,s,{value:_,enumerable:!0,configurable:!0,writable:!0}),i[s]}try{define({},"")}catch(X){define=function(i,s,_){return i[s]=_}}function wrap(i,s,_,T){var S=s&&s.prototype instanceof Generator?s:Generator,C=Object.create(S.prototype),P=new Context(T||[]);return C._invoke=function makeInvokeMethod(i,s,_){var T=M;return function invoke(S,C){if(T===D)throw new Error("Generator is already running");if(T===j){if("throw"===S)throw C;return doneResult()}for(_.method=S,_.arg=C;;){var P=_.delegate;if(P){var O=maybeInvokeDelegate(P,_);if(O){if(O===$)continue;return O}}if("next"===_.method)_.sent=_._sent=_.arg;else if("throw"===_.method){if(T===M)throw T=j,_.arg;_.dispatchException(_.arg)}else"return"===_.method&&_.abrupt("return",_.arg);T=D;var U=tryCatch(i,s,_);if("normal"===U.type){if(T=_.done?j:R,U.arg===$)continue;return{value:U.arg,done:_.done}}"throw"===U.type&&(T=j,_.method="throw",_.arg=U.arg)}}}(i,_,P),C}function tryCatch(i,s,_){try{return{type:"normal",arg:i.call(s,_)}}catch(X){return{type:"throw",arg:X}}}i.wrap=wrap;var M="suspendedStart",R="suspendedYield",D="executing",j="completed",$={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var U={};define(U,C,(function(){return this}));var V=Object.getPrototypeOf,Z=V&&V(V(values([])));Z&&Z!==_&&T.call(Z,C)&&(U=Z);var Y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(U);function defineIteratorMethods(i){["next","throw","return"].forEach((function(s){define(i,s,(function(i){return this._invoke(s,i)}))}))}function AsyncIterator(i,s){function invoke(_,S,C,P){var O=tryCatch(i[_],i,S);if("throw"!==O.type){var M=O.arg,R=M.value;return R&&"object"==typeof R&&T.call(R,"__await")?s.resolve(R.__await).then((function(i){invoke("next",i,C,P)}),(function(i){invoke("throw",i,C,P)})):s.resolve(R).then((function(i){M.value=i,C(M)}),(function(i){return invoke("throw",i,C,P)}))}P(O.arg)}var _;this._invoke=function enqueue(i,T){function callInvokeWithMethodAndArg(){return new s((function(s,_){invoke(i,T,s,_)}))}return _=_?_.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(i,_){var T=i.iterator[_.method];if(T===s){if(_.delegate=null,"throw"===_.method){if(i.iterator.return&&(_.method="return",_.arg=s,maybeInvokeDelegate(i,_),"throw"===_.method))return $;_.method="throw",_.arg=new TypeError("The iterator does not provide a 'throw' method")}return $}var S=tryCatch(T,i.iterator,_.arg);if("throw"===S.type)return _.method="throw",_.arg=S.arg,_.delegate=null,$;var C=S.arg;return C?C.done?(_[i.resultName]=C.value,_.next=i.nextLoc,"return"!==_.method&&(_.method="next",_.arg=s),_.delegate=null,$):C:(_.method="throw",_.arg=new TypeError("iterator result is not an object"),_.delegate=null,$)}function pushTryEntry(i){var s={tryLoc:i[0]};1 in i&&(s.catchLoc=i[1]),2 in i&&(s.finallyLoc=i[2],s.afterLoc=i[3]),this.tryEntries.push(s)}function resetTryEntry(i){var s=i.completion||{};s.type="normal",delete s.arg,i.completion=s}function Context(i){this.tryEntries=[{tryLoc:"root"}],i.forEach(pushTryEntry,this),this.reset(!0)}function values(i){if(i){var _=i[C];if(_)return _.call(i);if("function"==typeof i.next)return i;if(!isNaN(i.length)){var S=-1,P=function next(){for(;++S<i.length;)if(T.call(i,S))return next.value=i[S],next.done=!1,next;return next.value=s,next.done=!0,next};return P.next=P}}return{next:doneResult}}function doneResult(){return{value:s,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(Y,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,O,"GeneratorFunction"),i.isGeneratorFunction=function(i){var s="function"==typeof i&&i.constructor;return!!s&&(s===GeneratorFunction||"GeneratorFunction"===(s.displayName||s.name))},i.mark=function(i){return Object.setPrototypeOf?Object.setPrototypeOf(i,GeneratorFunctionPrototype):(i.__proto__=GeneratorFunctionPrototype,define(i,O,"GeneratorFunction")),i.prototype=Object.create(Y),i},i.awrap=function(i){return{__await:i}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,P,(function(){return this})),i.AsyncIterator=AsyncIterator,i.async=function(s,_,T,S,C){void 0===C&&(C=Promise);var P=new AsyncIterator(wrap(s,_,T,S),C);return i.isGeneratorFunction(_)?P:P.next().then((function(i){return i.done?i.value:P.next()}))},defineIteratorMethods(Y),define(Y,O,"Generator"),define(Y,C,(function(){return this})),define(Y,"toString",(function(){return"[object Generator]"})),i.keys=function(i){var s=[];for(var _ in i)s.push(_);return s.reverse(),function next(){for(;s.length;){var _=s.pop();if(_ in i)return next.value=_,next.done=!1,next}return next.done=!0,next}},i.values=values,Context.prototype={constructor:Context,reset:function(i){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(resetTryEntry),!i)for(var _ in this)"t"===_.charAt(0)&&T.call(this,_)&&!isNaN(+_.slice(1))&&(this[_]=s)},stop:function(){this.done=!0;var i=this.tryEntries[0].completion;if("throw"===i.type)throw i.arg;return this.rval},dispatchException:function(i){if(this.done)throw i;var _=this;function handle(T,S){return P.type="throw",P.arg=i,_.next=T,S&&(_.method="next",_.arg=s),!!S}for(var S=this.tryEntries.length-1;S>=0;--S){var C=this.tryEntries[S],P=C.completion;if("root"===C.tryLoc)return handle("end");if(C.tryLoc<=this.prev){var O=T.call(C,"catchLoc"),M=T.call(C,"finallyLoc");if(O&&M){if(this.prev<C.catchLoc)return handle(C.catchLoc,!0);if(this.prev<C.finallyLoc)return handle(C.finallyLoc)}else if(O){if(this.prev<C.catchLoc)return handle(C.catchLoc,!0)}else{if(!M)throw new Error("try statement without catch or finally");if(this.prev<C.finallyLoc)return handle(C.finallyLoc)}}}},abrupt:function(i,s){for(var _=this.tryEntries.length-1;_>=0;--_){var S=this.tryEntries[_];if(S.tryLoc<=this.prev&&T.call(S,"finallyLoc")&&this.prev<S.finallyLoc){var C=S;break}}C&&("break"===i||"continue"===i)&&C.tryLoc<=s&&s<=C.finallyLoc&&(C=null);var P=C?C.completion:{};return P.type=i,P.arg=s,C?(this.method="next",this.next=C.finallyLoc,$):this.complete(P)},complete:function(i,s){if("throw"===i.type)throw i.arg;return"break"===i.type||"continue"===i.type?this.next=i.arg:"return"===i.type?(this.rval=this.arg=i.arg,this.method="return",this.next="end"):"normal"===i.type&&s&&(this.next=s),$},finish:function(i){for(var s=this.tryEntries.length-1;s>=0;--s){var _=this.tryEntries[s];if(_.finallyLoc===i)return this.complete(_.completion,_.afterLoc),resetTryEntry(_),$}},catch:function(i){for(var s=this.tryEntries.length-1;s>=0;--s){var _=this.tryEntries[s];if(_.tryLoc===i){var T=_.completion;if("throw"===T.type){var S=T.arg;resetTryEntry(_)}return S}}throw new Error("illegal catch attempt")},delegateYield:function(i,_,T){return this.delegate={iterator:values(i),resultName:_,nextLoc:T},"next"===this.method&&(this.arg=s),$}},i}(i.exports);try{regeneratorRuntime=s}catch(_){"object"==typeof globalThis?globalThis.regeneratorRuntime=s:Function("r","regeneratorRuntime = r")(s)}},75974:function(i){i.exports=function SafeParseTuple(i,s){var _,T=null;try{_=JSON.parse(i,s)}catch(S){T=S}return[T,_]}},74279:function(i){function E(){}E.prototype={on:function(i,s,_){var T=this.e||(this.e={});return(T[i]||(T[i]=[])).push({fn:s,ctx:_}),this},once:function(i,s,_){var T=this;function listener(){T.off(i,listener),s.apply(_,arguments)}return listener._=s,this.on(i,listener,_)},emit:function(i){for(var s=[].slice.call(arguments,1),_=((this.e||(this.e={}))[i]||[]).slice(),T=0,S=_.length;T<S;T++)_[T].fn.apply(_[T].ctx,s);return this},off:function(i,s){var _=this.e||(this.e={}),T=_[i],S=[];if(T&&s)for(var C=0,P=T.length;C<P;C++)T[C].fn!==s&&T[C].fn._!==s&&S.push(T[C]);return S.length?_[i]=S:delete _[i],this}},i.exports=E,i.exports.TinyEmitter=E},40372:function(i,s,_){"use strict";var T=_(36060);i.exports=function(i){if("function"!=typeof i)return!1;if(!hasOwnProperty.call(i,"length"))return!1;try{if("number"!=typeof i.length)return!1;if("function"!=typeof i.call)return!1;if("function"!=typeof i.apply)return!1}catch(s){return!1}return!T(i)}},13940:function(i,s,_){"use strict";var T=_(75618),S={object:!0,function:!0,undefined:!0};i.exports=function(i){return!!T(i)&&hasOwnProperty.call(S,typeof i)}},17205:function(i,s,_){"use strict";var T=_(40372),S=/^\s*class[\s{/}]/,C=Function.prototype.toString;i.exports=function(i){return!!T(i)&&!S.test(C.call(i))}},36060:function(i,s,_){"use strict";var T=_(13940);i.exports=function(i){if(!T(i))return!1;try{return!!i.constructor&&i.constructor.prototype===i}catch(s){return!1}}},75618:function(i){"use strict";i.exports=function(i){return null!=i}},54752:function(i){i.exports=function uid(i){return i=i||7,Math.random().toString(35).substr(2,i)}},49945:function(i){var s,_,T,S,C;s=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,_=/^(?=([^\/?#]*))\1([^]*)$/,T=/(?:\/|^)\.(?=\/)/g,S=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,C={buildAbsoluteURL:function(i,s,T){if(T=T||{},i=i.trim(),!(s=s.trim())){if(!T.alwaysNormalize)return i;var S=C.parseURL(i);if(!S)throw new Error("Error trying to parse base URL.");return S.path=C.normalizePath(S.path),C.buildURLFromParts(S)}var P=C.parseURL(s);if(!P)throw new Error("Error trying to parse relative URL.");if(P.scheme)return T.alwaysNormalize?(P.path=C.normalizePath(P.path),C.buildURLFromParts(P)):s;var O=C.parseURL(i);if(!O)throw new Error("Error trying to parse base URL.");if(!O.netLoc&&O.path&&"/"!==O.path[0]){var M=_.exec(O.path);O.netLoc=M[1],O.path=M[2]}O.netLoc&&!O.path&&(O.path="/");var R={scheme:O.scheme,netLoc:P.netLoc,path:null,params:P.params,query:P.query,fragment:P.fragment};if(!P.netLoc&&(R.netLoc=O.netLoc,"/"!==P.path[0]))if(P.path){var D=O.path,j=D.substring(0,D.lastIndexOf("/")+1)+P.path;R.path=C.normalizePath(j)}else R.path=O.path,P.params||(R.params=O.params,P.query||(R.query=O.query));return null===R.path&&(R.path=T.alwaysNormalize?C.normalizePath(P.path):P.path),C.buildURLFromParts(R)},parseURL:function(i){var _=s.exec(i);return _?{scheme:_[1]||"",netLoc:_[2]||"",path:_[3]||"",params:_[4]||"",query:_[5]||"",fragment:_[6]||""}:null},normalizePath:function(i){for(i=i.split("").reverse().join("").replace(T,"");i.length!==(i=i.replace(S,"")).length;);return i.split("").reverse().join("")},buildURLFromParts:function(i){return i.scheme+i.netLoc+i.path+i.params+i.query+i.fragment}},i.exports=C},93633:function(i,s,_){"use strict";_.r(s),_.d(s,{default:function(){return gl}});var T=_(58908),S=_.n(T),C=_(89144),P=_.n(C);function _extends(){return _extends=Object.assign||function(i){for(var s=1;s<arguments.length;s++){var _=arguments[s];for(var T in _)Object.prototype.hasOwnProperty.call(_,T)&&(i[T]=_[T])}return i},_extends.apply(this,arguments)}var O=_(97326),M=_(89611);function _inheritsLoose(i,s){i.prototype=Object.create(s.prototype),i.prototype.constructor=i,(0,M.Z)(i,s)}var R=_(75974),D=_.n(R),j=_(27537),$=_.n(j),U=_(23316),V=_.n(U),Z=_(13407),Y=_.n(Z),X=_(98852),Q=_(60136),ee=_(49972),te=_.n(ee),ne=_(17388),re=_.n(ne),ie=_(47927),ae=_.n(ie),se=function(i){function LineStream(){var s;return(s=i.call(this)||this).buffer="",s}return _inheritsLoose(LineStream,i),LineStream.prototype.push=function push(i){var s;for(this.buffer+=i,s=this.buffer.indexOf("\n");s>-1;s=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,s)),this.buffer=this.buffer.substring(s+1)},LineStream}(re()),oe=function parseAttributes(i){for(var s,_=i.split(function attributeSeparator(){return new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')}()),T={},S=_.length;S--;)""!==_[S]&&((s=/([^=]*)=(.*)/.exec(_[S]).slice(1))[0]=s[0].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^['"](.*)['"]$/g,"$1"),T[s[0]]=s[1]);return T},le=function(i){function ParseStream(){var s;return(s=i.call(this)||this).customParsers=[],s.tagMappers=[],s}_inheritsLoose(ParseStream,i);var s=ParseStream.prototype;return s.push=function push(i){var s,_,T=this;0!==(i=i.trim()).length&&("#"===i[0]?this.tagMappers.reduce((function(s,_){var T=_(i);return T===i?s:s.concat([T])}),[i]).forEach((function(i){for(var S=0;S<T.customParsers.length;S++)if(T.customParsers[S].call(T,i))return;if(0===i.indexOf("#EXT"))if(i=i.replace("\r",""),s=/^#EXTM3U/.exec(i))T.trigger("data",{type:"tag",tagType:"m3u"});else{if(s=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(i))return _={type:"tag",tagType:"inf"},s[1]&&(_.duration=parseFloat(s[1])),s[2]&&(_.title=s[2]),void T.trigger("data",_);if(s=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(i))return _={type:"tag",tagType:"targetduration"},s[1]&&(_.duration=parseInt(s[1],10)),void T.trigger("data",_);if(s=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(i))return _={type:"tag",tagType:"totalduration"},s[1]&&(_.duration=parseInt(s[1],10)),void T.trigger("data",_);if(s=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(i))return _={type:"tag",tagType:"version"},s[1]&&(_.version=parseInt(s[1],10)),void T.trigger("data",_);if(s=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(i))return _={type:"tag",tagType:"media-sequence"},s[1]&&(_.number=parseInt(s[1],10)),void T.trigger("data",_);if(s=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(i))return _={type:"tag",tagType:"discontinuity-sequence"},s[1]&&(_.number=parseInt(s[1],10)),void T.trigger("data",_);if(s=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(i))return _={type:"tag",tagType:"playlist-type"},s[1]&&(_.playlistType=s[1]),void T.trigger("data",_);if(s=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(i))return _={type:"tag",tagType:"byterange"},s[1]&&(_.length=parseInt(s[1],10)),s[2]&&(_.offset=parseInt(s[2],10)),void T.trigger("data",_);if(s=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(i))return _={type:"tag",tagType:"allow-cache"},s[1]&&(_.allowed=!/NO/.test(s[1])),void T.trigger("data",_);if(s=/^#EXT-X-MAP:?(.*)$/.exec(i)){if(_={type:"tag",tagType:"map"},s[1]){var C=oe(s[1]);if(C.URI&&(_.uri=C.URI),C.BYTERANGE){var P=C.BYTERANGE.split("@"),O=P[0],M=P[1];_.byterange={},O&&(_.byterange.length=parseInt(O,10)),M&&(_.byterange.offset=parseInt(M,10))}}T.trigger("data",_)}else if(s=/^#EXT-X-STREAM-INF:?(.*)$/.exec(i)){if(_={type:"tag",tagType:"stream-inf"},s[1]){if(_.attributes=oe(s[1]),_.attributes.RESOLUTION){var R=_.attributes.RESOLUTION.split("x"),D={};R[0]&&(D.width=parseInt(R[0],10)),R[1]&&(D.height=parseInt(R[1],10)),_.attributes.RESOLUTION=D}_.attributes.BANDWIDTH&&(_.attributes.BANDWIDTH=parseInt(_.attributes.BANDWIDTH,10)),_.attributes["PROGRAM-ID"]&&(_.attributes["PROGRAM-ID"]=parseInt(_.attributes["PROGRAM-ID"],10))}T.trigger("data",_)}else{if(s=/^#EXT-X-MEDIA:?(.*)$/.exec(i))return _={type:"tag",tagType:"media"},s[1]&&(_.attributes=oe(s[1])),void T.trigger("data",_);if(s=/^#EXT-X-ENDLIST/.exec(i))T.trigger("data",{type:"tag",tagType:"endlist"});else if(s=/^#EXT-X-DISCONTINUITY/.exec(i))T.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(s=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(i))return _={type:"tag",tagType:"program-date-time"},s[1]&&(_.dateTimeString=s[1],_.dateTimeObject=new Date(s[1])),void T.trigger("data",_);if(s=/^#EXT-X-KEY:?(.*)$/.exec(i))return _={type:"tag",tagType:"key"},s[1]&&(_.attributes=oe(s[1]),_.attributes.IV&&("0x"===_.attributes.IV.substring(0,2).toLowerCase()&&(_.attributes.IV=_.attributes.IV.substring(2)),_.attributes.IV=_.attributes.IV.match(/.{8}/g),_.attributes.IV[0]=parseInt(_.attributes.IV[0],16),_.attributes.IV[1]=parseInt(_.attributes.IV[1],16),_.attributes.IV[2]=parseInt(_.attributes.IV[2],16),_.attributes.IV[3]=parseInt(_.attributes.IV[3],16),_.attributes.IV=new Uint32Array(_.attributes.IV))),void T.trigger("data",_);if(s=/^#EXT-X-START:?(.*)$/.exec(i))return _={type:"tag",tagType:"start"},s[1]&&(_.attributes=oe(s[1]),_.attributes["TIME-OFFSET"]=parseFloat(_.attributes["TIME-OFFSET"]),_.attributes.PRECISE=/YES/.test(_.attributes.PRECISE)),void T.trigger("data",_);if(s=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(i))return _={type:"tag",tagType:"cue-out-cont"},s[1]?_.data=s[1]:_.data="",void T.trigger("data",_);if(s=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(i))return _={type:"tag",tagType:"cue-out"},s[1]?_.data=s[1]:_.data="",void T.trigger("data",_);if(s=/^#EXT-X-CUE-IN:?(.*)?$/.exec(i))return _={type:"tag",tagType:"cue-in"},s[1]?_.data=s[1]:_.data="",void T.trigger("data",_);T.trigger("data",{type:"tag",data:i.slice(4)})}}}else T.trigger("data",{type:"comment",text:i.slice(1)})})):this.trigger("data",{type:"uri",uri:i}))},s.addParser=function addParser(i){var s=this,_=i.expression,T=i.customType,S=i.dataParser,C=i.segment;"function"!=typeof S&&(S=function dataParser(i){return i}),this.customParsers.push((function(i){if(_.exec(i))return s.trigger("data",{type:"custom",data:S(i),customType:T,segment:C}),!0}))},s.addTagMapper=function addTagMapper(i){var s=i.expression,_=i.map;this.tagMappers.push((function mapFn(i){return s.test(i)?_(i):i}))},ParseStream}(re()),ce=function(i){function Parser(){var s;(s=i.call(this)||this).lineStream=new se,s.parseStream=new le,s.lineStream.pipe(s.parseStream);var _,T,S=(0,O.Z)(s),C=[],P={},M=function noop(){},R={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},D=0;s.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var j=0;return s.parseStream.on("data",(function(i){var s,O;({tag:function tag(){({"allow-cache":function allowCache(){this.manifest.allowCache=i.allowed,"allowed"in i||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function byterange(){var byterange={};"length"in i&&(P.byterange=byterange,byterange.length=i.length,"offset"in i||(i.offset=j)),"offset"in i&&(P.byterange=byterange,byterange.offset=i.offset),j=byterange.offset+byterange.length},endlist:function endlist(){this.manifest.endList=!0},inf:function inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),i.duration>0&&(P.duration=i.duration),0===i.duration&&(P.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=C},key:function key(){if(i.attributes)if("NONE"!==i.attributes.METHOD)if(i.attributes.URI){if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===i.attributes.KEYFORMAT){return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(i.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===i.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==i.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):i.attributes.KEYID&&"0x"===i.attributes.KEYID.substring(0,2)?void(this.manifest.contentProtection={"com.widevine.alpha":{attributes:{schemeIdUri:i.attributes.KEYFORMAT,keyId:i.attributes.KEYID.substring(2)},pssh:ae()(i.attributes.URI.split(",")[1])}}):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}))}i.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),T={method:i.attributes.METHOD||"AES-128",uri:i.attributes.URI},void 0!==i.attributes.IV&&(T.iv=i.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else T=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function mediaSequence(){isFinite(i.number)?this.manifest.mediaSequence=i.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+i.number})},"discontinuity-sequence":function discontinuitySequence(){isFinite(i.number)?(this.manifest.discontinuitySequence=i.number,D=i.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+i.number})},"playlist-type":function playlistType(){/VOD|EVENT/.test(i.playlistType)?this.manifest.playlistType=i.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+i.playlist})},map:function map(){_={},i.uri&&(_.uri=i.uri),i.byterange&&(_.byterange=i.byterange)},"stream-inf":function streamInf(){this.manifest.playlists=C,this.manifest.mediaGroups=this.manifest.mediaGroups||R,i.attributes?(P.attributes||(P.attributes={}),_extends(P.attributes,i.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||R,i.attributes&&i.attributes.TYPE&&i.attributes["GROUP-ID"]&&i.attributes.NAME){var _=this.manifest.mediaGroups[i.attributes.TYPE];_[i.attributes["GROUP-ID"]]=_[i.attributes["GROUP-ID"]]||{},s=_[i.attributes["GROUP-ID"]],(O={default:/yes/i.test(i.attributes.DEFAULT)}).default?O.autoselect=!0:O.autoselect=/yes/i.test(i.attributes.AUTOSELECT),i.attributes.LANGUAGE&&(O.language=i.attributes.LANGUAGE),i.attributes.URI&&(O.uri=i.attributes.URI),i.attributes["INSTREAM-ID"]&&(O.instreamId=i.attributes["INSTREAM-ID"]),i.attributes.CHARACTERISTICS&&(O.characteristics=i.attributes.CHARACTERISTICS),i.attributes.FORCED&&(O.forced=/yes/i.test(i.attributes.FORCED)),s[i.attributes.NAME]=O}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function discontinuity(){D+=1,P.discontinuity=!0,this.manifest.discontinuityStarts.push(C.length)},"program-date-time":function programDateTime(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=i.dateTimeString,this.manifest.dateTimeObject=i.dateTimeObject),P.dateTimeString=i.dateTimeString,P.dateTimeObject=i.dateTimeObject},targetduration:function targetduration(){!isFinite(i.duration)||i.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+i.duration}):this.manifest.targetDuration=i.duration},totalduration:function totalduration(){!isFinite(i.duration)||i.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+i.duration}):this.manifest.totalDuration=i.duration},start:function start(){i.attributes&&!isNaN(i.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:i.attributes["TIME-OFFSET"],precise:i.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function cueOut(){P.cueOut=i.data},"cue-out-cont":function cueOutCont(){P.cueOutCont=i.data},"cue-in":function cueIn(){P.cueIn=i.data}}[i.tagType]||M).call(S)},uri:function uri(){P.uri=i.uri,C.push(P),this.manifest.targetDuration&&!("duration"in P)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),P.duration=this.manifest.targetDuration),T&&(P.key=T),P.timeline=D,_&&(P.map=_),P={}},comment:function comment(){},custom:function custom(){i.segment?(P.custom=P.custom||{},P.custom[i.customType]=i.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[i.customType]=i.data)}})[i.type].call(S)})),s}_inheritsLoose(Parser,i);var s=Parser.prototype;return s.push=function push(i){this.lineStream.push(i)},s.end=function end(){this.lineStream.push("\n")},s.addParser=function addParser(i){this.parseStream.addParser(i)},s.addTagMapper=function addTagMapper(i){this.parseStream.addTagMapper(i)},Parser}(re()),ue=_(74810),de=_(86150),he=function isObject(i){return!!i&&"object"==typeof i},pe=function merge(){for(var i=arguments.length,s=new Array(i),_=0;_<i;_++)s[_]=arguments[_];return s.reduce((function(i,s){return"object"!=typeof s||Object.keys(s).forEach((function(_){Array.isArray(i[_])&&Array.isArray(s[_])?i[_]=i[_].concat(s[_]):he(i[_])&&he(s[_])?i[_]=merge(i[_],s[_]):i[_]=s[_]})),i}),{})},me=function flatten(i){return i.reduce((function(i,s){return i.concat(s)}),[])},fe=function from(i){if(!i.length)return[];for(var s=[],_=0;_<i.length;_++)s.push(i[_]);return s},ge="INVALID_NUMBER_OF_PERIOD",ve="DASH_EMPTY_MANIFEST",be="DASH_INVALID_XML",ye="NO_BASE_URL",_e="SEGMENT_TIME_UNSPECIFIED",we="UNSUPPORTED_UTC_TIMING_SCHEME",ke=function urlTypeToSegment(i){var s=i.baseUrl,_=void 0===s?"":s,T=i.source,S=void 0===T?"":T,C=i.range,P=void 0===C?"":C,O=i.indexRange,M=void 0===O?"":O,R={uri:S,resolvedUri:te()(_||"",S)};if(P||M){var D=(P||M).split("-"),j=parseInt(D[0],10),$=parseInt(D[1],10);R.byterange={length:$-j+1,offset:j}}return R},Te=function byteRangeToString(i){var s=i.offset+i.length-1;return i.offset+"-"+s},Se={static:function _static(i){var s=i.duration,_=i.timescale,T=void 0===_?1:_,S=i.sourceDuration;return{start:0,end:Math.ceil(S/(s/T))}},dynamic:function dynamic(i){var s=i.NOW,_=i.clientOffset,T=i.availabilityStartTime,S=i.timescale,C=void 0===S?1:S,P=i.duration,O=i.start,M=void 0===O?0:O,R=i.minimumUpdatePeriod,D=void 0===R?0:R,j=i.timeShiftBufferDepth,$=void 0===j?1/0:j,U=(s+_)/1e3,V=T+M,Z=U+D-V,Y=Math.ceil(Z*C/P),X=Math.floor((U-V-$)*C/P),Q=Math.floor((U-V)*C/P);return{start:Math.max(0,X),end:Math.min(Y,Q)}}},Ce=function parseByDuration(i){var s=i.type,_=void 0===s?"static":s,T=i.duration,S=i.timescale,C=void 0===S?1:S,P=i.sourceDuration,O=Se[_](i),M=function range(i,s){for(var _=[],T=i;T<s;T++)_.push(T);return _}(O.start,O.end).map(function toSegments(i){return function(s,_){var T=i.duration,S=i.timescale,C=void 0===S?1:S,P=i.periodIndex,O=i.startNumber;return{number:(void 0===O?1:O)+s,duration:T/C,timeline:P,time:_*T}}}(i));if("static"===_){var R=M.length-1;M[R].duration=P-T/C*R}return M},xe=function segmentsFromBase(i){var s=i.baseUrl,_=i.initialization,T=void 0===_?{}:_,S=i.sourceDuration,C=i.indexRange,P=void 0===C?"":C,O=i.duration;if(!s)throw new Error(ye);var M=ke({baseUrl:s,source:T.sourceURL,range:T.range}),R=ke({baseUrl:s,source:s,indexRange:P});if(R.map=M,O){var D=Ce(i);D.length&&(R.duration=D[0].duration,R.timeline=D[0].timeline)}else S&&(R.duration=S,R.timeline=0);return R.number=0,[R]},Ee=function addSegmentsToPlaylist(i,s,_){for(var T=i.sidx.map?i.sidx.map:null,S=i.sidx.duration,C=i.timeline||0,P=i.sidx.byterange,O=P.offset+P.length,M=s.timescale,R=s.references.filter((function(i){return 1!==i.referenceType})),D=[],j=O+s.firstOffset,$=0;$<R.length;$++){var U=s.references[$],V=U.referencedSize,Z=U.subsegmentDuration,Y=xe({baseUrl:_,timescale:M,timeline:C,periodIndex:C,duration:Z,sourceDuration:S,indexRange:j+"-"+(j+V-1)})[0];T&&(Y.map=T),D.push(Y),j+=V}return i.segments=D,i},Pe=function mergeDiscontiguousPlaylists(i){return function values(i){return Object.keys(i).map((function(s){return i[s]}))}(i.reduce((function(i,s){var _,T=s.attributes.id+(s.attributes.lang||"");i[T]?(s.segments[0]&&(s.segments[0].discontinuity=!0),(_=i[T].segments).push.apply(_,s.segments),s.attributes.contentProtection&&(i[T].attributes.contentProtection=s.attributes.contentProtection)):i[T]=s;return i}),{})).map((function(i){return i.discontinuityStarts=function findIndexes(i,s){return i.reduce((function(i,_,T){return _[s]&&i.push(T),i}),[])}(i.segments,"discontinuity"),i}))},Ae=function addSegmentInfoFromSidx(i,s){if(void 0===s&&(s={}),!Object.keys(s).length)return i;for(var _ in i){var T=i[_];if(T.sidx){var S=T.sidx.uri+"-"+Te(T.sidx.byterange),C=s[S]&&s[S].sidx;T.sidx&&C&&Ee(T,C,T.sidx.resolvedUri)}}return i},Oe=function formatAudioPlaylist(i){var s,_=i.attributes,T=i.segments,S=i.sidx,C={attributes:(s={NAME:_.id,BANDWIDTH:_.bandwidth,CODECS:_.codecs},s["PROGRAM-ID"]=1,s),uri:"",endList:"static"===(_.type||"static"),timeline:_.periodIndex,resolvedUri:"",targetDuration:_.duration,segments:T,mediaSequence:T.length?T[0].number:1};return _.contentProtection&&(C.contentProtection=_.contentProtection),S&&(C.sidx=S),C},Me=function formatVttPlaylist(i){var s,_=i.attributes,T=i.segments;void 0===T&&(T=[{uri:_.baseUrl,timeline:_.periodIndex,resolvedUri:_.baseUrl||"",duration:_.sourceDuration,number:0}],_.duration=_.sourceDuration);var S=((s={NAME:_.id,BANDWIDTH:_.bandwidth})["PROGRAM-ID"]=1,s);return _.codecs&&(S.CODECS=_.codecs),{attributes:S,uri:"",endList:"static"===(_.type||"static"),timeline:_.periodIndex,resolvedUri:_.baseUrl||"",targetDuration:_.duration,segments:T,mediaSequence:T.length?T[0].number:1}},ze=function formatVideoPlaylist(i){var s,_=i.attributes,T=i.segments,S=i.sidx,C={attributes:(s={NAME:_.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:_.width,height:_.height},CODECS:_.codecs,BANDWIDTH:_.bandwidth},s["PROGRAM-ID"]=1,s),uri:"",endList:"static"===(_.type||"static"),timeline:_.periodIndex,resolvedUri:"",targetDuration:_.duration,segments:T,mediaSequence:T.length?T[0].number:1};return _.contentProtection&&(C.contentProtection=_.contentProtection),S&&(C.sidx=S),C},Ie=function toM3u8(i,s,_){var T;if(void 0===_&&(_={}),!i.length)return{};var S=i[0].attributes,C=S.sourceDuration,P=S.type,O=void 0===P?"static":P,M=S.suggestedPresentationDelay,R=S.minimumUpdatePeriod,D=Pe(i.filter((function videoOnly(i){var s=i.attributes;return"video/mp4"===s.mimeType||"video/webm"===s.mimeType||"video"===s.contentType}))).map(ze),j=Pe(i.filter((function audioOnly(i){var s=i.attributes;return"audio/mp4"===s.mimeType||"audio/webm"===s.mimeType||"audio"===s.contentType}))),$=i.filter((function vttOnly(i){var s=i.attributes;return"text/vtt"===s.mimeType||"text"===s.contentType})),U={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(T={AUDIO:{},VIDEO:{}},T["CLOSED-CAPTIONS"]={},T.SUBTITLES={},T),uri:"",duration:C,playlists:Ae(D,_)};return R>=0&&(U.minimumUpdatePeriod=1e3*R),s&&(U.locations=s),"dynamic"===O&&(U.suggestedPresentationDelay=M),j.length&&(U.mediaGroups.AUDIO.audio=function organizeAudioPlaylists(i,s){var _;void 0===s&&(s={});var T=i.reduce((function(i,T){var S=T.attributes.role&&T.attributes.role.value||"",C=T.attributes.lang||"",P="main";if(C){var O=S?" ("+S+")":"";P=""+T.attributes.lang+O}return i[P]&&i[P].playlists[0].attributes.BANDWIDTH>T.attributes.bandwidth||(i[P]={language:C,autoselect:!0,default:"main"===S,playlists:Ae([Oe(T)],s),uri:""},void 0===_&&"main"===S&&((_=T).default=!0)),i}),{});return _||(T[Object.keys(T)[0]].default=!0),T}(j,_)),$.length&&(U.mediaGroups.SUBTITLES.subs=function organizeVttPlaylists(i,s){return void 0===s&&(s={}),i.reduce((function(i,_){var T=_.attributes.lang||"text";return i[T]||(i[T]={language:T,default:!1,autoselect:!1,playlists:Ae([Me(_)],s),uri:""}),i}),{})}($,_)),U},Le=function getLiveRValue(i,s,_){var T=i.NOW,S=i.clientOffset,C=i.availabilityStartTime,P=i.timescale,O=void 0===P?1:P,M=i.start,R=void 0===M?0:M,D=i.minimumUpdatePeriod,j=(T+S)/1e3+(void 0===D?0:D)-(C+R);return Math.ceil((j*O-s)/_)},Re=function parseByTimeline(i,s){for(var _=i.type,T=void 0===_?"static":_,S=i.minimumUpdatePeriod,C=void 0===S?0:S,P=i.media,O=void 0===P?"":P,M=i.sourceDuration,R=i.timescale,D=void 0===R?1:R,j=i.startNumber,$=void 0===j?1:j,U=i.periodIndex,V=[],Z=-1,Y=0;Y<s.length;Y++){var X=s[Y],Q=X.d,ee=X.r||0,te=X.t||0;Z<0&&(Z=te),te&&te>Z&&(Z=te);var ne=void 0;if(ee<0){var re=Y+1;ne=re===s.length?"dynamic"===T&&C>0&&O.indexOf("$Number$")>0?Le(i,Z,Q):(M*D-Z)/Q:(s[re].t-Z)/Q}else ne=ee+1;for(var ie=$+V.length+ne,ae=$+V.length;ae<ie;)V.push({number:ae,duration:Q/D,time:Z,timeline:U}),Z+=Q,ae++}return V},Ne=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,De=function constructTemplateUrl(i,s){return i.replace(Ne,function identifierReplacement(i){return function(s,_,T,S){if("$$"===s)return"$";if(void 0===i[_])return s;var C=""+i[_];return"RepresentationID"===_?C:(S=T?parseInt(S,10):1,C.length>=S?C:""+new Array(S-C.length+1).join("0")+C)}}(s))},je=function segmentsFromTemplate(i,s){var _={RepresentationID:i.id,Bandwidth:i.bandwidth||0},T=i.initialization,S=void 0===T?{sourceURL:"",range:""}:T,C=ke({baseUrl:i.baseUrl,source:De(S.sourceURL,_),range:S.range}),P=function parseTemplateInfo(i,s){return i.duration||s?i.duration?Ce(i):Re(i,s):[{number:i.startNumber||1,duration:i.sourceDuration,time:0,timeline:i.periodIndex}]}(i,s);return P.map((function(s){_.Number=s.number,_.Time=s.time;var T=De(i.media||"",_);return{uri:T,timeline:s.timeline,duration:s.duration,resolvedUri:te()(i.baseUrl||"",T),map:C,number:s.number}}))},Be=function segmentsFromList(i,s){var _=i.duration,T=i.segmentUrls,S=void 0===T?[]:T;if(!_&&!s||_&&s)throw new Error(_e);var C,P=S.map((function(s){return function SegmentURLToSegmentObject(i,s){var _=i.baseUrl,T=i.initialization,S=void 0===T?{}:T,C=ke({baseUrl:_,source:S.sourceURL,range:S.range}),P=ke({baseUrl:_,source:s.media,range:s.mediaRange});return P.map=C,P}(i,s)}));return _&&(C=Ce(i)),s&&(C=Re(i,s)),C.map((function(i,s){if(P[s]){var _=P[s];return _.timeline=i.timeline,_.duration=i.duration,_.number=i.number,_}})).filter((function(i){return i}))},$e=function generateSegments(i){var s,_,T=i.attributes,S=i.segmentInfo;S.template?(_=je,s=pe(T,S.template)):S.base?(_=xe,s=pe(T,S.base)):S.list&&(_=Be,s=pe(T,S.list));var C={attributes:T};if(!_)return C;var P=_(s,S.timeline);if(s.duration){var O=s,M=O.duration,R=O.timescale,D=void 0===R?1:R;s.duration=M/D}else P.length?s.duration=P.reduce((function(i,s){return Math.max(i,Math.ceil(s.duration))}),0):s.duration=0;return C.attributes=s,C.segments=P,S.base&&s.indexRange&&(C.sidx=P[0],C.segments=[]),C},Ue=function findChildren(i,s){return fe(i.childNodes).filter((function(i){return i.tagName===s}))},Fe=function getContent(i){return i.textContent.trim()},He=function parseDuration(i){var s=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(i);if(!s)return 0;var _=s.slice(1),T=_[0],S=_[1],C=_[2],P=_[3],O=_[4],M=_[5];return 31536e3*parseFloat(T||0)+2592e3*parseFloat(S||0)+86400*parseFloat(C||0)+3600*parseFloat(P||0)+60*parseFloat(O||0)+parseFloat(M||0)},qe={mediaPresentationDuration:function mediaPresentationDuration(i){return He(i)},availabilityStartTime:function availabilityStartTime(i){return function parseDate(i){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(i)&&(i+="Z"),Date.parse(i)}(i)/1e3},minimumUpdatePeriod:function minimumUpdatePeriod(i){return He(i)},suggestedPresentationDelay:function suggestedPresentationDelay(i){return He(i)},type:function type(i){return i},timeShiftBufferDepth:function timeShiftBufferDepth(i){return He(i)},start:function start(i){return He(i)},width:function width(i){return parseInt(i,10)},height:function height(i){return parseInt(i,10)},bandwidth:function bandwidth(i){return parseInt(i,10)},startNumber:function startNumber(i){return parseInt(i,10)},timescale:function timescale(i){return parseInt(i,10)},duration:function duration(i){var s=parseInt(i,10);return isNaN(s)?He(i):s},d:function d(i){return parseInt(i,10)},t:function t(i){return parseInt(i,10)},r:function r(i){return parseInt(i,10)},DEFAULT:function DEFAULT(i){return i}},Ve=function parseAttributes(i){return i&&i.attributes?fe(i.attributes).reduce((function(i,s){var _=qe[s.name]||qe.DEFAULT;return i[s.name]=_(s.value),i}),{}):{}},Ge={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},Ze=function buildBaseUrls(i,s){return s.length?me(i.map((function(i){return s.map((function(s){return te()(i,Fe(s))}))}))):i},We=function getSegmentInformation(i){var s=Ue(i,"SegmentTemplate")[0],_=Ue(i,"SegmentList")[0],T=_&&Ue(_,"SegmentURL").map((function(i){return pe({tag:"SegmentURL"},Ve(i))})),S=Ue(i,"SegmentBase")[0],C=_||s,P=C&&Ue(C,"SegmentTimeline")[0],O=_||S||s,M=O&&Ue(O,"Initialization")[0],R=s&&Ve(s);R&&M?R.initialization=M&&Ve(M):R&&R.initialization&&(R.initialization={sourceURL:R.initialization});var D={template:R,timeline:P&&Ue(P,"S").map((function(i){return Ve(i)})),list:_&&pe(Ve(_),{segmentUrls:T,initialization:Ve(M)}),base:S&&pe(Ve(S),{initialization:Ve(M)})};return Object.keys(D).forEach((function(i){D[i]||delete D[i]})),D},Ke=function toRepresentations(i,s,_){return function(T){var S=Ve(T),C=Ze(s,Ue(T,"BaseURL")),P=Ue(T,"Role")[0],O={role:Ve(P)},M=pe(i,S,O),R=function generateKeySystemInformation(i){return i.reduce((function(i,s){var _=Ve(s),T=Ge[_.schemeIdUri];if(T){i[T]={attributes:_};var S=Ue(s,"cenc:pssh")[0];if(S){var C=Fe(S),P=C&&ae()(C);i[T].pssh=P}}return i}),{})}(Ue(T,"ContentProtection"));Object.keys(R).length&&(M=pe(M,{contentProtection:R}));var D=We(T),j=Ue(T,"Representation"),$=pe(_,D);return me(j.map(function inheritBaseUrls(i,s,_){return function(T){var S=Ue(T,"BaseURL"),C=Ze(s,S),P=pe(i,Ve(T)),O=We(T);return C.map((function(i){return{segmentInfo:pe(_,O),attributes:pe(P,{baseUrl:i})}}))}}(M,C,$)))}},Ye=function toAdaptationSets(i,s){return function(_,T){var C=Ze(s,Ue(_,"BaseURL")),P=Ve(_),O=parseInt(P.id,10),M=S().isNaN(O)?T:O,R=pe(i,{periodIndex:M}),D=Ue(_,"AdaptationSet"),j=We(_);return me(D.map(Ke(R,C,j)))}},Xe=function stringToMpdXml(i){if(""===i)throw new Error(ve);var s,_,T=new de.a;try{_=(s=T.parseFromString(i,"application/xml"))&&"MPD"===s.documentElement.tagName?s.documentElement:null}catch(S){}if(!_||_&&_.getElementsByTagName("parsererror").length>0)throw new Error(be);return _},Qe=function parse(i,s){void 0===s&&(s={});var _=function inheritAttributes(i,s){void 0===s&&(s={});var _=s,T=_.manifestUri,S=void 0===T?"":T,C=_.NOW,P=void 0===C?Date.now():C,O=_.clientOffset,M=void 0===O?0:O,R=Ue(i,"Period");if(!R.length)throw new Error(ge);var D=Ue(i,"Location"),j=Ve(i),$=Ze([S],Ue(i,"BaseURL"));return j.sourceDuration=j.mediaPresentationDuration||0,j.NOW=P,j.clientOffset=M,D.length&&(j.locations=D.map(Fe)),{locations:j.locations,representationInfo:me(R.map(Ye(j,$)))}}(Xe(i),s),T=function toPlaylists(i){return i.map($e)}(_.representationInfo);return Ie(T,_.locations,s.sidxMapping)},Je=function parseUTCTiming(i){return function parseUTCTimingScheme(i){var s=Ue(i,"UTCTiming")[0];if(!s)return null;var _=Ve(s);switch(_.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":_.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":_.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":_.method="DIRECT",_.value=Date.parse(_.value);break;default:throw new Error(we)}return _}(Xe(i))},et=Ee,tt=_(84221),nt=_.n(tt),rt=_(49352),it=_(40185),at=_(65547),st=_.n(at),ot=_(51489),lt=_(47661),ct=_.n(lt),ut=_(78044),dt="7.11.4",ht=[];var pt=function createLogger(i){var s,_="info",T=function log(){for(var i=arguments.length,T=new Array(i),S=0;S<i;S++)T[S]=arguments[S];s("log",_,T)};return s=function LogByTypeFactory(i,s){return function(_,T,C){var P=s.levels[T],O=new RegExp("^("+P+")$");if("log"!==_&&C.unshift(_.toUpperCase()+":"),C.unshift(i+":"),ht){ht.push([].concat(C));var M=ht.length-1e3;ht.splice(0,M>0?M:0)}if(S().console){var R=S().console[_];R||"debug"!==_||(R=S().console.info||S().console.log),R&&P&&O.test(_)&&R[Array.isArray(C)?"apply":"call"](S().console,C)}}}(i,T),T.createLogger=function(s){return createLogger(i+": "+s)},T.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:_},T.level=function(i){if("string"==typeof i){if(!T.levels.hasOwnProperty(i))throw new Error('"'+i+'" in not a valid log level');_=i}return _},(T.history=function(){return ht?[].concat(ht):[]}).filter=function(i){return(ht||[]).filter((function(s){return new RegExp(".*"+i+".*").test(s[0])}))},T.history.clear=function(){ht&&(ht.length=0)},T.history.disable=function(){null!==ht&&(ht.length=0,ht=null)},T.history.enable=function(){null===ht&&(ht=[])},T.error=function(){for(var i=arguments.length,T=new Array(i),S=0;S<i;S++)T[S]=arguments[S];return s("error",_,T)},T.warn=function(){for(var i=arguments.length,T=new Array(i),S=0;S<i;S++)T[S]=arguments[S];return s("warn",_,T)},T.debug=function(){for(var i=arguments.length,T=new Array(i),S=0;S<i;S++)T[S]=arguments[S];return s("debug",_,T)},T}("VIDEOJS"),mt=pt.createLogger,ft=Object.prototype.toString,gt=function keys(i){return video_es_isObject(i)?Object.keys(i):[]};function each(i,s){gt(i).forEach((function(_){return s(i[_],_)}))}function video_es_assign(i){for(var s=arguments.length,_=new Array(s>1?s-1:0),T=1;T<s;T++)_[T-1]=arguments[T];return Object.assign?_extends.apply(void 0,[i].concat(_)):(_.forEach((function(s){s&&each(s,(function(s,_){i[_]=s}))})),i)}function video_es_isObject(i){return!!i&&"object"==typeof i}function isPlain(i){return video_es_isObject(i)&&"[object Object]"===ft.call(i)&&i.constructor===Object}function computedStyle(i,s){if(!i||!s)return"";if("function"==typeof S().getComputedStyle){var _=S().getComputedStyle(i);return _?_.getPropertyValue(s)||_[s]:""}return""}function isNonBlankString(i){return"string"==typeof i&&Boolean(i.trim())}function throwIfWhitespace(i){if(i.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function isReal(){return P()===S().document}function isEl(i){return video_es_isObject(i)&&1===i.nodeType}function isInFrame(){try{return S().parent!==S().self}catch(i){return!0}}function createQuerier(i){return function(s,_){if(!isNonBlankString(s))return P()[i](null);isNonBlankString(_)&&(_=P().querySelector(_));var T=isEl(_)?_:P();return T[i]&&T[i](s)}}function createEl(i,s,_,T){void 0===i&&(i="div"),void 0===s&&(s={}),void 0===_&&(_={});var S=P().createElement(i);return Object.getOwnPropertyNames(s).forEach((function(i){var _=s[i];-1!==i.indexOf("aria-")||"role"===i||"type"===i?(pt.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+i+" to "+_+"."),S.setAttribute(i,_)):"textContent"===i?textContent(S,_):S[i]===_&&"tabIndex"!==i||(S[i]=_)})),Object.getOwnPropertyNames(_).forEach((function(i){S.setAttribute(i,_[i])})),T&&appendContent(S,T),S}function textContent(i,s){return void 0===i.textContent?i.innerText=s:i.textContent=s,i}function prependTo(i,s){s.firstChild?s.insertBefore(i,s.firstChild):s.appendChild(i)}function hasClass(i,s){return throwIfWhitespace(s),i.classList?i.classList.contains(s):function classRegExp(i){return new RegExp("(^|\\s)"+i+"($|\\s)")}(s).test(i.className)}function addClass(i,s){return i.classList?i.classList.add(s):hasClass(i,s)||(i.className=(i.className+" "+s).trim()),i}function removeClass(i,s){return i.classList?i.classList.remove(s):(throwIfWhitespace(s),i.className=i.className.split(/\s+/).filter((function(i){return i!==s})).join(" ")),i}function toggleClass(i,s,_){var T=hasClass(i,s);if("function"==typeof _&&(_=_(i,s)),"boolean"!=typeof _&&(_=!T),_!==T)return _?addClass(i,s):removeClass(i,s),i}function setAttributes(i,s){Object.getOwnPropertyNames(s).forEach((function(_){var T=s[_];null==T||!1===T?i.removeAttribute(_):i.setAttribute(_,!0===T?"":T)}))}function getAttributes(i){var s={},_=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(i&&i.attributes&&i.attributes.length>0)for(var T=i.attributes,S=T.length-1;S>=0;S--){var C=T[S].name,P=T[S].value;"boolean"!=typeof i[C]&&-1===_.indexOf(","+C+",")||(P=null!==P),s[C]=P}return s}function getAttribute(i,s){return i.getAttribute(s)}function setAttribute(i,s,_){i.setAttribute(s,_)}function removeAttribute(i,s){i.removeAttribute(s)}function blockTextSelection(){P().body.focus(),P().onselectstart=function(){return!1}}function unblockTextSelection(){P().onselectstart=function(){return!0}}function getBoundingClientRect(i){if(i&&i.getBoundingClientRect&&i.parentNode){var s=i.getBoundingClientRect(),_={};return["bottom","height","left","right","top","width"].forEach((function(i){void 0!==s[i]&&(_[i]=s[i])})),_.height||(_.height=parseFloat(computedStyle(i,"height"))),_.width||(_.width=parseFloat(computedStyle(i,"width"))),_}}function findPosition(i){if(!i||i&&!i.offsetParent)return{left:0,top:0,width:0,height:0};var s=i.offsetWidth,_=i.offsetHeight,T=0,S=0;do{T+=i.offsetLeft,S+=i.offsetTop,i=i.offsetParent}while(i);return{left:T,top:S,width:s,height:_}}function getPointerPosition(i,s){var _={},T=findPosition(s.target),S=findPosition(i),C=S.width,P=S.height,O=s.offsetY-(S.top-T.top),M=s.offsetX-(S.left-T.left);return s.changedTouches&&(M=s.changedTouches[0].pageX-S.left,O=s.changedTouches[0].pageY+S.top),_.y=1-Math.max(0,Math.min(1,O/P)),_.x=Math.max(0,Math.min(1,M/C)),_}function isTextNode(i){return video_es_isObject(i)&&3===i.nodeType}function emptyEl(i){for(;i.firstChild;)i.removeChild(i.firstChild);return i}function normalizeContent(i){return"function"==typeof i&&(i=i()),(Array.isArray(i)?i:[i]).map((function(i){return"function"==typeof i&&(i=i()),isEl(i)||isTextNode(i)?i:"string"==typeof i&&/\S/.test(i)?P().createTextNode(i):void 0})).filter((function(i){return i}))}function appendContent(i,s){return normalizeContent(s).forEach((function(s){return i.appendChild(s)})),i}function insertContent(i,s){return appendContent(emptyEl(i),s)}function isSingleLeftClick(i){return void 0===i.button&&void 0===i.buttons||(0===i.button&&void 0===i.buttons||("mouseup"===i.type&&0===i.button&&0===i.buttons||0===i.button&&1===i.buttons))}var vt,bt=createQuerier("querySelector"),yt=createQuerier("querySelectorAll"),_t=Object.freeze({__proto__:null,isReal:isReal,isEl:isEl,isInFrame:isInFrame,createEl:createEl,textContent:textContent,prependTo:prependTo,hasClass:hasClass,addClass:addClass,removeClass:removeClass,toggleClass:toggleClass,setAttributes:setAttributes,getAttributes:getAttributes,getAttribute:getAttribute,setAttribute:setAttribute,removeAttribute:removeAttribute,blockTextSelection:blockTextSelection,unblockTextSelection:unblockTextSelection,getBoundingClientRect:getBoundingClientRect,findPosition:findPosition,getPointerPosition:getPointerPosition,isTextNode:isTextNode,emptyEl:emptyEl,normalizeContent:normalizeContent,appendContent:appendContent,insertContent:insertContent,isSingleLeftClick:isSingleLeftClick,$:bt,$$:yt}),wt=!1,kt=function autoSetup(){if(isReal()&&!1!==vt.options.autoSetup){var i=Array.prototype.slice.call(P().getElementsByTagName("video")),s=Array.prototype.slice.call(P().getElementsByTagName("audio")),_=Array.prototype.slice.call(P().getElementsByTagName("video-js")),T=i.concat(s,_);if(T&&T.length>0)for(var S=0,C=T.length;S<C;S++){var O=T[S];if(!O||!O.getAttribute){autoSetupTimeout(1);break}void 0===O.player&&null!==O.getAttribute("data-setup")&&vt(O)}else wt||autoSetupTimeout(1)}};function autoSetupTimeout(i,s){s&&(vt=s),S().setTimeout(kt,i)}function setWindowLoaded(){wt=!0,S().removeEventListener("load",setWindowLoaded)}isReal()&&("complete"===P().readyState?setWindowLoaded():S().addEventListener("load",setWindowLoaded));var Tt,St=function createStyleElement(i){var s=P().createElement("style");return s.className=i,s},Ct=function setTextContent(i,s){i.styleSheet?i.styleSheet.cssText=s:i.textContent=s},xt=3;function newGUID(){return xt++}S().WeakMap||(Tt=function(){function FakeWeakMap(){this.vdata="vdata"+Math.floor(S().performance&&S().performance.now()||Date.now()),this.data={}}var i=FakeWeakMap.prototype;return i.set=function set(i,s){var _=i[this.vdata]||newGUID();return i[this.vdata]||(i[this.vdata]=_),this.data[_]=s,this},i.get=function get(i){var s=i[this.vdata];if(s)return this.data[s];pt("We have no data for this element",i)},i.has=function has(i){return i[this.vdata]in this.data},i.delete=function _delete(i){var s=i[this.vdata];s&&(delete this.data[s],delete i[this.vdata])},FakeWeakMap}());var Et,Pt=S().WeakMap?new WeakMap:new Tt;function _cleanUpEvents(i,s){if(Pt.has(i)){var _=Pt.get(i);0===_.handlers[s].length&&(delete _.handlers[s],i.removeEventListener?i.removeEventListener(s,_.dispatcher,!1):i.detachEvent&&i.detachEvent("on"+s,_.dispatcher)),Object.getOwnPropertyNames(_.handlers).length<=0&&(delete _.handlers,delete _.dispatcher,delete _.disabled),0===Object.getOwnPropertyNames(_).length&&Pt.delete(i)}}function _handleMultipleEvents(i,s,_,T){_.forEach((function(_){i(s,_,T)}))}function fixEvent(i){if(i.fixed_)return i;function returnTrue(){return!0}function returnFalse(){return!1}if(!i||!i.isPropagationStopped){var s=i||S().event;for(var _ in i={},s)"layerX"!==_&&"layerY"!==_&&"keyLocation"!==_&&"webkitMovementX"!==_&&"webkitMovementY"!==_&&("returnValue"===_&&s.preventDefault||(i[_]=s[_]));if(i.target||(i.target=i.srcElement||P()),i.relatedTarget||(i.relatedTarget=i.fromElement===i.target?i.toElement:i.fromElement),i.preventDefault=function(){s.preventDefault&&s.preventDefault(),i.returnValue=!1,s.returnValue=!1,i.defaultPrevented=!0},i.defaultPrevented=!1,i.stopPropagation=function(){s.stopPropagation&&s.stopPropagation(),i.cancelBubble=!0,s.cancelBubble=!0,i.isPropagationStopped=returnTrue},i.isPropagationStopped=returnFalse,i.stopImmediatePropagation=function(){s.stopImmediatePropagation&&s.stopImmediatePropagation(),i.isImmediatePropagationStopped=returnTrue,i.stopPropagation()},i.isImmediatePropagationStopped=returnFalse,null!==i.clientX&&void 0!==i.clientX){var T=P().documentElement,C=P().body;i.pageX=i.clientX+(T&&T.scrollLeft||C&&C.scrollLeft||0)-(T&&T.clientLeft||C&&C.clientLeft||0),i.pageY=i.clientY+(T&&T.scrollTop||C&&C.scrollTop||0)-(T&&T.clientTop||C&&C.clientTop||0)}i.which=i.charCode||i.keyCode,null!==i.button&&void 0!==i.button&&(i.button=1&i.button?0:4&i.button?1:2&i.button?2:0)}return i.fixed_=!0,i}var At=["touchstart","touchmove"];function on(i,s,_){if(Array.isArray(s))return _handleMultipleEvents(on,i,s,_);Pt.has(i)||Pt.set(i,{});var T=Pt.get(i);if(T.handlers||(T.handlers={}),T.handlers[s]||(T.handlers[s]=[]),_.guid||(_.guid=newGUID()),T.handlers[s].push(_),T.dispatcher||(T.disabled=!1,T.dispatcher=function(s,_){if(!T.disabled){s=fixEvent(s);var S=T.handlers[s.type];if(S)for(var C=S.slice(0),P=0,O=C.length;P<O&&!s.isImmediatePropagationStopped();P++)try{C[P].call(i,s,_)}catch(M){pt.error(M)}}}),1===T.handlers[s].length)if(i.addEventListener){var C=!1;(function supportsPassive(){if("boolean"!=typeof Et){Et=!1;try{var i=Object.defineProperty({},"passive",{get:function get(){Et=!0}});S().addEventListener("test",null,i),S().removeEventListener("test",null,i)}catch(s){}}return Et})()&&At.indexOf(s)>-1&&(C={passive:!0}),i.addEventListener(s,T.dispatcher,C)}else i.attachEvent&&i.attachEvent("on"+s,T.dispatcher)}function off(i,s,_){if(Pt.has(i)){var T=Pt.get(i);if(T.handlers){if(Array.isArray(s))return _handleMultipleEvents(off,i,s,_);var S=function removeType(i,s){T.handlers[s]=[],_cleanUpEvents(i,s)};if(void 0!==s){var C=T.handlers[s];if(C)if(_){if(_.guid)for(var P=0;P<C.length;P++)C[P].guid===_.guid&&C.splice(P--,1);_cleanUpEvents(i,s)}else S(i,s)}else for(var O in T.handlers)Object.prototype.hasOwnProperty.call(T.handlers||{},O)&&S(i,O)}}}function trigger(i,s,_){var T=Pt.has(i)?Pt.get(i):{},S=i.parentNode||i.ownerDocument;if("string"==typeof s?s={type:s,target:i}:s.target||(s.target=i),s=fixEvent(s),T.dispatcher&&T.dispatcher.call(i,s,_),S&&!s.isPropagationStopped()&&!0===s.bubbles)trigger.call(null,S,s,_);else if(!S&&!s.defaultPrevented&&s.target&&s.target[s.type]){Pt.has(s.target)||Pt.set(s.target,{});var C=Pt.get(s.target);s.target[s.type]&&(C.disabled=!0,"function"==typeof s.target[s.type]&&s.target[s.type](),C.disabled=!1)}return!s.defaultPrevented}function one(i,s,_){if(Array.isArray(s))return _handleMultipleEvents(one,i,s,_);var T=function func(){off(i,s,func),_.apply(this,arguments)};T.guid=_.guid=_.guid||newGUID(),on(i,s,T)}function any(i,s,_){var T=function func(){off(i,s,func),_.apply(this,arguments)};T.guid=_.guid=_.guid||newGUID(),on(i,s,T)}var Ot,Mt=Object.freeze({__proto__:null,fixEvent:fixEvent,on:on,off:off,trigger:trigger,one:one,any:any}),zt=30,It=function bind(i,s,_){s.guid||(s.guid=newGUID());var T=s.bind(i);return T.guid=_?_+"_"+s.guid:s.guid,T},Lt=function throttle(i,s){var _=S().performance.now();return function throttled(){var T=S().performance.now();T-_>=s&&(i.apply(void 0,arguments),_=T)}},Rt=function EventTarget(){};Rt.prototype.allowedEvents_={},Rt.prototype.on=function(i,s){var _=this.addEventListener;this.addEventListener=function(){},on(this,i,s),this.addEventListener=_},Rt.prototype.addEventListener=Rt.prototype.on,Rt.prototype.off=function(i,s){off(this,i,s)},Rt.prototype.removeEventListener=Rt.prototype.off,Rt.prototype.one=function(i,s){var _=this.addEventListener;this.addEventListener=function(){},one(this,i,s),this.addEventListener=_},Rt.prototype.any=function(i,s){var _=this.addEventListener;this.addEventListener=function(){},any(this,i,s),this.addEventListener=_},Rt.prototype.trigger=function(i){var s=i.type||i;"string"==typeof i&&(i={type:s}),i=fixEvent(i),this.allowedEvents_[s]&&this["on"+s]&&this["on"+s](i),trigger(this,i)},Rt.prototype.dispatchEvent=Rt.prototype.trigger,Rt.prototype.queueTrigger=function(i){var s=this;Ot||(Ot=new Map);var _=i.type||i,T=Ot.get(this);T||(T=new Map,Ot.set(this,T));var C=T.get(_);T.delete(_),S().clearTimeout(C);var P=S().setTimeout((function(){0===T.size&&(T=null,Ot.delete(s)),s.trigger(i)}),0);T.set(_,P)};var Nt=function objName(i){return"function"==typeof i.name?i.name():"string"==typeof i.name?i.name:i.name_?i.name_:i.constructor&&i.constructor.name?i.constructor.name:typeof i},Dt=function isEvented(i){return i instanceof Rt||!!i.eventBusEl_&&["on","one","off","trigger"].every((function(s){return"function"==typeof i[s]}))},jt=function isValidEventType(i){return"string"==typeof i&&/\S/.test(i)||Array.isArray(i)&&!!i.length},Bt=function validateTarget(i,s,_){if(!i||!i.nodeName&&!Dt(i))throw new Error("Invalid target for "+Nt(s)+"#"+_+"; must be a DOM node or evented object.")},$t=function validateEventType(i,s,_){if(!jt(i))throw new Error("Invalid event type for "+Nt(s)+"#"+_+"; must be a non-empty string or array.")},Ut=function validateListener(i,s,_){if("function"!=typeof i)throw new Error("Invalid listener for "+Nt(s)+"#"+_+"; must be a function.")},Ft=function normalizeListenArgs(i,s,_){var T,S,C,P=s.length<3||s[0]===i||s[0]===i.eventBusEl_;return P?(T=i.eventBusEl_,s.length>=3&&s.shift(),S=s[0],C=s[1]):(T=s[0],S=s[1],C=s[2]),Bt(T,i,_),$t(S,i,_),Ut(C,i,_),{isTargetingSelf:P,target:T,type:S,listener:C=It(i,C)}},Ht=function listen(i,s,_,T){Bt(i,i,s),i.nodeName?Mt[s](i,_,T):i[s](_,T)},qt={on:function on(){for(var i=this,s=arguments.length,_=new Array(s),T=0;T<s;T++)_[T]=arguments[T];var S=Ft(this,_,"on"),C=S.isTargetingSelf,P=S.target,O=S.type,M=S.listener;if(Ht(P,"on",O,M),!C){var R=function removeListenerOnDispose(){return i.off(P,O,M)};R.guid=M.guid;var D=function removeRemoverOnTargetDispose(){return i.off("dispose",R)};D.guid=M.guid,Ht(this,"on","dispose",R),Ht(P,"on","dispose",D)}},one:function one(){for(var i=this,s=arguments.length,_=new Array(s),T=0;T<s;T++)_[T]=arguments[T];var S=Ft(this,_,"one"),C=S.isTargetingSelf,P=S.target,O=S.type,M=S.listener;if(C)Ht(P,"one",O,M);else{var R=function wrapper(){i.off(P,O,wrapper);for(var s=arguments.length,_=new Array(s),T=0;T<s;T++)_[T]=arguments[T];M.apply(null,_)};R.guid=M.guid,Ht(P,"one",O,R)}},any:function any(){for(var i=this,s=arguments.length,_=new Array(s),T=0;T<s;T++)_[T]=arguments[T];var S=Ft(this,_,"any"),C=S.isTargetingSelf,P=S.target,O=S.type,M=S.listener;if(C)Ht(P,"any",O,M);else{var R=function wrapper(){i.off(P,O,wrapper);for(var s=arguments.length,_=new Array(s),T=0;T<s;T++)_[T]=arguments[T];M.apply(null,_)};R.guid=M.guid,Ht(P,"any",O,R)}},off:function off$1(i,s,_){if(!i||jt(i))off(this.eventBusEl_,i,s);else{var T=i,S=s;Bt(T,this,"off"),$t(S,this,"off"),Ut(_,this,"off"),_=It(this,_),this.off("dispose",_),T.nodeName?(off(T,S,_),off(T,"dispose",_)):Dt(T)&&(T.off(S,_),T.off("dispose",_))}},trigger:function trigger$1(i,s){Bt(this.eventBusEl_,this,"trigger");var _=i&&"string"!=typeof i?i.type:i;if(!jt(_)){var T="Invalid event type for "+Nt(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(!i)throw new Error(T);(this.log||pt).error(T)}return trigger(this.eventBusEl_,i,s)}};function evented(i,s){void 0===s&&(s={});var _=s.eventBusKey;if(_){if(!i[_].nodeName)throw new Error('The eventBusKey "'+_+'" does not refer to an element.');i.eventBusEl_=i[_]}else i.eventBusEl_=createEl("span",{className:"vjs-event-bus"});return video_es_assign(i,qt),i.eventedCallbacks&&i.eventedCallbacks.forEach((function(i){i()})),i.on("dispose",(function(){i.off(),S().setTimeout((function(){i.eventBusEl_=null}),0)})),i}var Vt={state:{},setState:function setState(i){var s,_=this;return"function"==typeof i&&(i=i()),each(i,(function(i,T){_.state[T]!==i&&((s=s||{})[T]={from:_.state[T],to:i}),_.state[T]=i})),s&&Dt(this)&&this.trigger({changes:s,type:"statechanged"}),s}};function stateful(i,s){return video_es_assign(i,Vt),i.state=video_es_assign({},i.state,s),"function"==typeof i.handleStateChanged&&Dt(i)&&i.on("statechanged",i.handleStateChanged),i}var Gt=function toLowerCase(i){return"string"!=typeof i?i:i.replace(/./,(function(i){return i.toLowerCase()}))},Zt=function toTitleCase(i){return"string"!=typeof i?i:i.replace(/./,(function(i){return i.toUpperCase()}))};function mergeOptions(){for(var i={},s=arguments.length,_=new Array(s),T=0;T<s;T++)_[T]=arguments[T];return _.forEach((function(s){s&&each(s,(function(s,_){isPlain(s)?(isPlain(i[_])||(i[_]={}),i[_]=mergeOptions(i[_],s)):i[_]=s}))})),i}var Wt=function(){function MapSham(){this.map_={}}var i=MapSham.prototype;return i.has=function has(i){return i in this.map_},i.delete=function _delete(i){var s=this.has(i);return delete this.map_[i],s},i.set=function set(i,s){return this.map_[i]=s,this},i.forEach=function forEach(i,s){for(var _ in this.map_)i.call(s,this.map_[_],_,this)},MapSham}(),Kt=S().Map?S().Map:Wt,Yt=function(){function SetSham(){this.set_={}}var i=SetSham.prototype;return i.has=function has(i){return i in this.set_},i.delete=function _delete(i){var s=this.has(i);return delete this.set_[i],s},i.add=function add(i){return this.set_[i]=1,this},i.forEach=function forEach(i,s){for(var _ in this.set_)i.call(s,_,_,this)},SetSham}(),Xt=S().Set?S().Set:Yt,Qt=function(){function Component(i,s,_){if(!i&&this.play?this.player_=i=this:this.player_=i,this.isDisposed_=!1,this.parentComponent_=null,this.options_=mergeOptions({},this.options_),s=this.options_=mergeOptions(this.options_,s),this.id_=s.id||s.el&&s.el.id,!this.id_){var T=i&&i.id&&i.id()||"no_player";this.id_=T+"_component_"+newGUID()}this.name_=s.name||null,s.el?this.el_=s.el:!1!==s.createEl&&(this.el_=this.createEl()),!1!==s.evented&&(evented(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),stateful(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Xt,this.setIntervalIds_=new Xt,this.rafIds_=new Xt,this.namedRafs_=new Kt,this.clearingTimersOnDispose_=!1,!1!==s.initChildren&&this.initChildren(),this.ready(_),!1!==s.reportTouchActivity&&this.enableTouchActivity()}var i=Component.prototype;return i.dispose=function dispose(){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var i=this.children_.length-1;i>=0;i--)this.children_[i].dispose&&this.children_[i].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),Pt.has(this.el_)&&Pt.delete(this.el_),this.el_=null),this.player_=null}},i.isDisposed=function isDisposed(){return Boolean(this.isDisposed_)},i.player=function player(){return this.player_},i.options=function options(i){return i?(this.options_=mergeOptions(this.options_,i),this.options_):this.options_},i.el=function el(){return this.el_},i.createEl=function createEl$1(i,s,_){return createEl(i,s,_)},i.localize=function localize(i,s,_){void 0===_&&(_=i);var T=this.player_.language&&this.player_.language(),S=this.player_.languages&&this.player_.languages(),C=S&&S[T],P=T&&T.split("-")[0],O=S&&S[P],M=_;return C&&C[i]?M=C[i]:O&&O[i]&&(M=O[i]),s&&(M=M.replace(/\{(\d+)\}/g,(function(i,_){var T=s[_-1],S=T;return void 0===T&&(S=i),S}))),M},i.handleLanguagechange=function handleLanguagechange(){},i.contentEl=function contentEl(){return this.contentEl_||this.el_},i.id=function id(){return this.id_},i.name=function name(){return this.name_},i.children=function children(){return this.children_},i.getChildById=function getChildById(i){return this.childIndex_[i]},i.getChild=function getChild(i){if(i)return this.childNameIndex_[i]},i.getDescendant=function getDescendant(){for(var i=arguments.length,s=new Array(i),_=0;_<i;_++)s[_]=arguments[_];s=s.reduce((function(i,s){return i.concat(s)}),[]);for(var T=this,S=0;S<s.length;S++)if(!(T=T.getChild(s[S]))||!T.getChild)return;return T},i.addChild=function addChild(i,s,_){var T,S;if(void 0===s&&(s={}),void 0===_&&(_=this.children_.length),"string"==typeof i){S=Zt(i);var C=s.componentClass||S;s.name=S;var P=Component.getComponent(C);if(!P)throw new Error("Component "+C+" does not exist");if("function"!=typeof P)return null;T=new P(this.player_||this,s)}else T=i;if(T.parentComponent_&&T.parentComponent_.removeChild(T),this.children_.splice(_,0,T),T.parentComponent_=this,"function"==typeof T.id&&(this.childIndex_[T.id()]=T),(S=S||T.name&&Zt(T.name()))&&(this.childNameIndex_[S]=T,this.childNameIndex_[Gt(S)]=T),"function"==typeof T.el&&T.el()){var O=null;this.children_[_+1]&&(this.children_[_+1].el_?O=this.children_[_+1].el_:isEl(this.children_[_+1])&&(O=this.children_[_+1])),this.contentEl().insertBefore(T.el(),O)}return T},i.removeChild=function removeChild(i){if("string"==typeof i&&(i=this.getChild(i)),i&&this.children_){for(var s=!1,_=this.children_.length-1;_>=0;_--)if(this.children_[_]===i){s=!0,this.children_.splice(_,1);break}if(s){i.parentComponent_=null,this.childIndex_[i.id()]=null,this.childNameIndex_[Zt(i.name())]=null,this.childNameIndex_[Gt(i.name())]=null;var T=i.el();T&&T.parentNode===this.contentEl()&&this.contentEl().removeChild(i.el())}}},i.initChildren=function initChildren(){var i=this,s=this.options_.children;if(s){var _,T=this.options_,S=Component.getComponent("Tech");(_=Array.isArray(s)?s:Object.keys(s)).concat(Object.keys(this.options_).filter((function(i){return!_.some((function(s){return"string"==typeof s?i===s:i===s.name}))}))).map((function(_){var T,S;return"string"==typeof _?S=s[T=_]||i.options_[T]||{}:(T=_.name,S=_),{name:T,opts:S}})).filter((function(i){var s=Component.getComponent(i.opts.componentClass||Zt(i.name));return s&&!S.isTech(s)})).forEach((function handleAdd(s){var _=s.name,S=s.opts;if(void 0!==T[_]&&(S=T[_]),!1!==S){!0===S&&(S={}),S.playerOptions=i.options_.playerOptions;var C=i.addChild(_,S);C&&(i[_]=C)}}))}},i.buildCSSClass=function buildCSSClass(){return""},i.ready=function ready(i,s){if(void 0===s&&(s=!1),i)return this.isReady_?void(s?i.call(this):this.setTimeout(i,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(i))},i.triggerReady=function triggerReady(){this.isReady_=!0,this.setTimeout((function(){var i=this.readyQueue_;this.readyQueue_=[],i&&i.length>0&&i.forEach((function(i){i.call(this)}),this),this.trigger("ready")}),1)},i.$=function $$1(i,s){return bt(i,s||this.contentEl())},i.$$=function $$$1(i,s){return yt(i,s||this.contentEl())},i.hasClass=function hasClass$1(i){return hasClass(this.el_,i)},i.addClass=function addClass$1(i){addClass(this.el_,i)},i.removeClass=function removeClass$1(i){removeClass(this.el_,i)},i.toggleClass=function toggleClass$1(i,s){toggleClass(this.el_,i,s)},i.show=function show(){this.removeClass("vjs-hidden")},i.hide=function hide(){this.addClass("vjs-hidden")},i.lockShowing=function lockShowing(){this.addClass("vjs-lock-showing")},i.unlockShowing=function unlockShowing(){this.removeClass("vjs-lock-showing")},i.getAttribute=function getAttribute$1(i){return getAttribute(this.el_,i)},i.setAttribute=function setAttribute$1(i,s){setAttribute(this.el_,i,s)},i.removeAttribute=function removeAttribute$1(i){removeAttribute(this.el_,i)},i.width=function width(i,s){return this.dimension("width",i,s)},i.height=function height(i,s){return this.dimension("height",i,s)},i.dimensions=function dimensions(i,s){this.width(i,!0),this.height(s)},i.dimension=function dimension(i,s,_){if(void 0!==s)return null!==s&&s==s||(s=0),-1!==(""+s).indexOf("%")||-1!==(""+s).indexOf("px")?this.el_.style[i]=s:this.el_.style[i]="auto"===s?"":s+"px",void(_||this.trigger("componentresize"));if(!this.el_)return 0;var T=this.el_.style[i],S=T.indexOf("px");return-1!==S?parseInt(T.slice(0,S),10):parseInt(this.el_["offset"+Zt(i)],10)},i.currentDimension=function currentDimension(i){var s=0;if("width"!==i&&"height"!==i)throw new Error("currentDimension only accepts width or height value");if(s=computedStyle(this.el_,i),0===(s=parseFloat(s))||isNaN(s)){var _="offset"+Zt(i);s=this.el_[_]}return s},i.currentDimensions=function currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},i.currentWidth=function currentWidth(){return this.currentDimension("width")},i.currentHeight=function currentHeight(){return this.currentDimension("height")},i.focus=function focus(){this.el_.focus()},i.blur=function blur(){this.el_.blur()},i.handleKeyDown=function handleKeyDown(i){this.player_&&(i.stopPropagation(),this.player_.handleKeyDown(i))},i.handleKeyPress=function handleKeyPress(i){this.handleKeyDown(i)},i.emitTapEvents=function emitTapEvents(){var i,s=0,_=null;this.on("touchstart",(function(T){1===T.touches.length&&(_={pageX:T.touches[0].pageX,pageY:T.touches[0].pageY},s=S().performance.now(),i=!0)})),this.on("touchmove",(function(s){if(s.touches.length>1)i=!1;else if(_){var T=s.touches[0].pageX-_.pageX,S=s.touches[0].pageY-_.pageY;Math.sqrt(T*T+S*S)>10&&(i=!1)}}));var T=function noTap(){i=!1};this.on("touchleave",T),this.on("touchcancel",T),this.on("touchend",(function(T){(_=null,!0===i)&&(S().performance.now()-s<200&&(T.preventDefault(),this.trigger("tap")))}))},i.enableTouchActivity=function enableTouchActivity(){if(this.player()&&this.player().reportUserActivity){var i,s=It(this.player(),this.player().reportUserActivity);this.on("touchstart",(function(){s(),this.clearInterval(i),i=this.setInterval(s,250)}));var _=function touchEnd(_){s(),this.clearInterval(i)};this.on("touchmove",s),this.on("touchend",_),this.on("touchcancel",_)}},i.setTimeout=function setTimeout(i,s){var _,T=this;return i=It(this,i),this.clearTimersOnDispose_(),_=S().setTimeout((function(){T.setTimeoutIds_.has(_)&&T.setTimeoutIds_.delete(_),i()}),s),this.setTimeoutIds_.add(_),_},i.clearTimeout=function clearTimeout(i){return this.setTimeoutIds_.has(i)&&(this.setTimeoutIds_.delete(i),S().clearTimeout(i)),i},i.setInterval=function setInterval(i,s){i=It(this,i),this.clearTimersOnDispose_();var _=S().setInterval(i,s);return this.setIntervalIds_.add(_),_},i.clearInterval=function clearInterval(i){return this.setIntervalIds_.has(i)&&(this.setIntervalIds_.delete(i),S().clearInterval(i)),i},i.requestAnimationFrame=function requestAnimationFrame(i){var s,_=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),i=It(this,i),s=S().requestAnimationFrame((function(){_.rafIds_.has(s)&&_.rafIds_.delete(s),i()})),this.rafIds_.add(s),s):this.setTimeout(i,1e3/60)},i.requestNamedAnimationFrame=function requestNamedAnimationFrame(i,s){var _=this;if(!this.namedRafs_.has(i)){this.clearTimersOnDispose_(),s=It(this,s);var T=this.requestAnimationFrame((function(){s(),_.namedRafs_.has(i)&&_.namedRafs_.delete(i)}));return this.namedRafs_.set(i,T),i}},i.cancelNamedAnimationFrame=function cancelNamedAnimationFrame(i){this.namedRafs_.has(i)&&(this.cancelAnimationFrame(this.namedRafs_.get(i)),this.namedRafs_.delete(i))},i.cancelAnimationFrame=function cancelAnimationFrame(i){return this.supportsRaf_?(this.rafIds_.has(i)&&(this.rafIds_.delete(i),S().cancelAnimationFrame(i)),i):this.clearTimeout(i)},i.clearTimersOnDispose_=function clearTimersOnDispose_(){var i=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",(function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach((function(s){var _=s[0],T=s[1];i[_].forEach((function(s,_){return i[T](_)}))})),i.clearingTimersOnDispose_=!1})))},Component.registerComponent=function registerComponent(i,s){if("string"!=typeof i||!i)throw new Error('Illegal component name, "'+i+'"; must be a non-empty string.');var _,T=Component.getComponent("Tech"),S=T&&T.isTech(s),C=Component===s||Component.prototype.isPrototypeOf(s.prototype);if(S||!C)throw _=S?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error('Illegal component, "'+i+'"; '+_+".");i=Zt(i),Component.components_||(Component.components_={});var P=Component.getComponent("Player");if("Player"===i&&P&&P.players){var O=P.players,M=Object.keys(O);if(O&&M.length>0&&M.map((function(i){return O[i]})).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return Component.components_[i]=s,Component.components_[Gt(i)]=s,s},Component.getComponent=function getComponent(i){if(i&&Component.components_)return Component.components_[i]},Component}();Qt.prototype.supportsRaf_="function"==typeof S().requestAnimationFrame&&"function"==typeof S().cancelAnimationFrame,Qt.registerComponent("Component",Qt);var Jt,en=S().navigator&&S().navigator.userAgent||"",tn=/AppleWebKit\/([\d.]+)/i.exec(en),nn=tn?parseFloat(tn.pop()):null,rn=/iPod/i.test(en),an=(Jt=en.match(/OS (\d+)_/i))&&Jt[1]?Jt[1]:null,sn=/Android/i.test(en),ln=function(){var i=en.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!i)return null;var s=i[1]&&parseFloat(i[1]),_=i[2]&&parseFloat(i[2]);return s&&_?parseFloat(i[1]+"."+i[2]):s||null}(),cn=sn&&ln<5&&nn<537,un=/Firefox/i.test(en),dn=/Edg/i.test(en),hn=!dn&&(/Chrome/i.test(en)||/CriOS/i.test(en)),pn=function(){var i=en.match(/(Chrome|CriOS)\/(\d+)/);return i&&i[2]?parseFloat(i[2]):null}(),mn=function(){var i=/MSIE\s(\d+)\.\d/.exec(en),s=i&&parseFloat(i[1]);return!s&&/Trident\/7.0/i.test(en)&&/rv:11.0/.test(en)&&(s=11),s}(),fn=/Safari/i.test(en)&&!hn&&!sn&&!dn,gn=/Windows/i.test(en),vn=Boolean(isReal()&&("ontouchstart"in S()||S().navigator.maxTouchPoints||S().DocumentTouch&&S().document instanceof S().DocumentTouch)),bn=/iPad/i.test(en)||fn&&vn&&!/iPhone/i.test(en),yn=/iPhone/i.test(en)&&!bn,_n=yn||bn||rn,wn=(fn||_n)&&!hn,kn=Object.freeze({__proto__:null,IS_IPOD:rn,IOS_VERSION:an,IS_ANDROID:sn,ANDROID_VERSION:ln,IS_NATIVE_ANDROID:cn,IS_FIREFOX:un,IS_EDGE:dn,IS_CHROME:hn,CHROME_VERSION:pn,IE_VERSION:mn,IS_SAFARI:fn,IS_WINDOWS:gn,TOUCH_ENABLED:vn,IS_IPAD:bn,IS_IPHONE:yn,IS_IOS:_n,IS_ANY_SAFARI:wn});function getRange(i,s,_,T){return function rangeCheck(i,s,_){if("number"!=typeof s||s<0||s>_)throw new Error("Failed to execute '"+i+"' on 'TimeRanges': The index provided ("+s+") is non-numeric or out of bounds (0-"+_+").")}(i,T,_.length-1),_[T][s]}function createTimeRangesObj(i){return void 0===i||0===i.length?{length:0,start:function start(){throw new Error("This TimeRanges object is empty")},end:function end(){throw new Error("This TimeRanges object is empty")}}:{length:i.length,start:getRange.bind(null,"start",0,i),end:getRange.bind(null,"end",1,i)}}function createTimeRanges(i,s){return Array.isArray(i)?createTimeRangesObj(i):void 0===i||void 0===s?createTimeRangesObj():createTimeRangesObj([[i,s]])}function bufferedPercent(i,s){var _,T,S=0;if(!s)return 0;i&&i.length||(i=createTimeRanges(0,0));for(var C=0;C<i.length;C++)_=i.start(C),(T=i.end(C))>s&&(T=s),S+=T-_;return S/s}for(var Tn,Sn={prefixed:!0},Cn=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],xn=Cn[0],En=0;En<Cn.length;En++)if(Cn[En][1]in P()){Tn=Cn[En];break}if(Tn){for(var Pn=0;Pn<Tn.length;Pn++)Sn[xn[Pn]]=Tn[Pn];Sn.prefixed=Tn[0]!==xn[0]}function MediaError(i){if(i instanceof MediaError)return i;"number"==typeof i?this.code=i:"string"==typeof i?this.message=i:video_es_isObject(i)&&("number"==typeof i.code&&(this.code=i.code),video_es_assign(this,i)),this.message||(this.message=MediaError.defaultMessages[this.code]||"")}MediaError.prototype.code=0,MediaError.prototype.message="",MediaError.prototype.status=null,MediaError.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],MediaError.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var An=0;An<MediaError.errorTypes.length;An++)MediaError[MediaError.errorTypes[An]]=An,MediaError.prototype[MediaError.errorTypes[An]]=An;function isPromise(i){return null!=i&&"function"==typeof i.then}function silencePromise(i){isPromise(i)&&i.then(null,(function(i){}))}var On=function trackToJson_(i){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((function(s,_,T){return i[_]&&(s[_]=i[_]),s}),{cues:i.cues&&Array.prototype.map.call(i.cues,(function(i){return{startTime:i.startTime,endTime:i.endTime,text:i.text,id:i.id}}))})},Mn=function textTracksToJson(i){var s=i.$$("track"),_=Array.prototype.map.call(s,(function(i){return i.track}));return Array.prototype.map.call(s,(function(i){var s=On(i.track);return i.src&&(s.src=i.src),s})).concat(Array.prototype.filter.call(i.textTracks(),(function(i){return-1===_.indexOf(i)})).map(On))},zn=function jsonToTextTracks(i,s){return i.forEach((function(i){var _=s.addRemoteTextTrack(i).track;!i.src&&i.cues&&i.cues.forEach((function(i){return _.addCue(i)}))})),s.textTracks()},In=function(i){function ModalDialog(s,_){var T;return(T=i.call(this,s,_)||this).opened_=T.hasBeenOpened_=T.hasBeenFilled_=!1,T.closeable(!T.options_.uncloseable),T.content(T.options_.content),T.contentEl_=createEl("div",{className:"vjs-modal-dialog-content"},{role:"document"}),T.descEl_=createEl("p",{className:"vjs-modal-dialog-description vjs-control-text",id:T.el().getAttribute("aria-describedby")}),textContent(T.descEl_,T.description()),T.el_.appendChild(T.descEl_),T.el_.appendChild(T.contentEl_),T}_inheritsLoose(ModalDialog,i);var s=ModalDialog.prototype;return s.createEl=function createEl(){return i.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},s.dispose=function dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,i.prototype.dispose.call(this)},s.buildCSSClass=function buildCSSClass(){return"vjs-modal-dialog vjs-hidden "+i.prototype.buildCSSClass.call(this)},s.label=function label(){return this.localize(this.options_.label||"Modal Window")},s.description=function description(){var i=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(i+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),i},s.open=function open(){if(!this.opened_){var i=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!i.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&i.pause(),this.on("keydown",this.handleKeyDown),this.hadControls_=i.controls(),i.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},s.opened=function opened(i){return"boolean"==typeof i&&this[i?"open":"close"](),this.opened_},s.close=function close(){if(this.opened_){var i=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&i.play(),this.off("keydown",this.handleKeyDown),this.hadControls_&&i.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},s.closeable=function closeable(i){if("boolean"==typeof i){var closeable=this.closeable_=!!i,s=this.getChild("closeButton");if(closeable&&!s){var _=this.contentEl_;this.contentEl_=this.el_,s=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=_,this.on(s,"close",this.close)}!closeable&&s&&(this.off(s,"close",this.close),this.removeChild(s),s.dispose())}return this.closeable_},s.fill=function fill(){this.fillWith(this.content())},s.fillWith=function fillWith(i){var s=this.contentEl(),_=s.parentNode,T=s.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,_.removeChild(s),this.empty(),insertContent(s,i),this.trigger("modalfill"),T?_.insertBefore(s,T):_.appendChild(s);var S=this.getChild("closeButton");S&&_.appendChild(S.el_)},s.empty=function empty(){this.trigger("beforemodalempty"),emptyEl(this.contentEl()),this.trigger("modalempty")},s.content=function content(i){return void 0!==i&&(this.content_=i),this.content_},s.conditionalFocus_=function conditionalFocus_(){var i=P().activeElement,s=this.player_.el_;this.previouslyActiveEl_=null,(s.contains(i)||s===i)&&(this.previouslyActiveEl_=i,this.focus())},s.conditionalBlur_=function conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},s.handleKeyDown=function handleKeyDown(i){if(i.stopPropagation(),$().isEventKey(i,"Escape")&&this.closeable())return i.preventDefault(),void this.close();if($().isEventKey(i,"Tab")){for(var s,_=this.focusableEls_(),T=this.el_.querySelector(":focus"),S=0;S<_.length;S++)if(T===_[S]){s=S;break}P().activeElement===this.el_&&(s=0),i.shiftKey&&0===s?(_[_.length-1].focus(),i.preventDefault()):i.shiftKey||s!==_.length-1||(_[0].focus(),i.preventDefault())}},s.focusableEls_=function focusableEls_(){var i=this.el_.querySelectorAll("*");return Array.prototype.filter.call(i,(function(i){return(i instanceof S().HTMLAnchorElement||i instanceof S().HTMLAreaElement)&&i.hasAttribute("href")||(i instanceof S().HTMLInputElement||i instanceof S().HTMLSelectElement||i instanceof S().HTMLTextAreaElement||i instanceof S().HTMLButtonElement)&&!i.hasAttribute("disabled")||i instanceof S().HTMLIFrameElement||i instanceof S().HTMLObjectElement||i instanceof S().HTMLEmbedElement||i.hasAttribute("tabindex")&&-1!==i.getAttribute("tabindex")||i.hasAttribute("contenteditable")}))},ModalDialog}(Qt);In.prototype.options_={pauseOnOpen:!0,temporary:!0},Qt.registerComponent("ModalDialog",In);var Ln=function(i){function TrackList(s){var _;void 0===s&&(s=[]),(_=i.call(this)||this).tracks_=[],Object.defineProperty((0,O.Z)(_),"length",{get:function get(){return this.tracks_.length}});for(var T=0;T<s.length;T++)_.addTrack(s[T]);return _}_inheritsLoose(TrackList,i);var s=TrackList.prototype;return s.addTrack=function addTrack(i){var s=this,_=this.tracks_.length;""+_ in this||Object.defineProperty(this,_,{get:function get(){return this.tracks_[_]}}),-1===this.tracks_.indexOf(i)&&(this.tracks_.push(i),this.trigger({track:i,type:"addtrack",target:this})),i.labelchange_=function(){s.trigger({track:i,type:"labelchange",target:s})},Dt(i)&&i.addEventListener("labelchange",i.labelchange_)},s.removeTrack=function removeTrack(i){for(var s,_=0,T=this.length;_<T;_++)if(this[_]===i){(s=this[_]).off&&s.off(),this.tracks_.splice(_,1);break}s&&this.trigger({track:s,type:"removetrack",target:this})},s.getTrackById=function getTrackById(i){for(var s=null,_=0,T=this.length;_<T;_++){var S=this[_];if(S.id===i){s=S;break}}return s},TrackList}(Rt);for(var Rn in Ln.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},Ln.prototype.allowedEvents_)Ln.prototype["on"+Rn]=null;var Nn=function disableOthers(i,s){for(var _=0;_<i.length;_++)Object.keys(i[_]).length&&s.id!==i[_].id&&(i[_].enabled=!1)},Dn=function(i){function AudioTrackList(s){var _;void 0===s&&(s=[]);for(var T=s.length-1;T>=0;T--)if(s[T].enabled){Nn(s,s[T]);break}return(_=i.call(this,s)||this).changing_=!1,_}_inheritsLoose(AudioTrackList,i);var s=AudioTrackList.prototype;return s.addTrack=function addTrack(s){var _=this;s.enabled&&Nn(this,s),i.prototype.addTrack.call(this,s),s.addEventListener&&(s.enabledChange_=function(){_.changing_||(_.changing_=!0,Nn(_,s),_.changing_=!1,_.trigger("change"))},s.addEventListener("enabledchange",s.enabledChange_))},s.removeTrack=function removeTrack(s){i.prototype.removeTrack.call(this,s),s.removeEventListener&&s.enabledChange_&&(s.removeEventListener("enabledchange",s.enabledChange_),s.enabledChange_=null)},AudioTrackList}(Ln),jn=function disableOthers(i,s){for(var _=0;_<i.length;_++)Object.keys(i[_]).length&&s.id!==i[_].id&&(i[_].selected=!1)},Bn=function(i){function VideoTrackList(s){var _;void 0===s&&(s=[]);for(var T=s.length-1;T>=0;T--)if(s[T].selected){jn(s,s[T]);break}return(_=i.call(this,s)||this).changing_=!1,Object.defineProperty((0,O.Z)(_),"selectedIndex",{get:function get(){for(var i=0;i<this.length;i++)if(this[i].selected)return i;return-1},set:function set(){}}),_}_inheritsLoose(VideoTrackList,i);var s=VideoTrackList.prototype;return s.addTrack=function addTrack(s){var _=this;s.selected&&jn(this,s),i.prototype.addTrack.call(this,s),s.addEventListener&&(s.selectedChange_=function(){_.changing_||(_.changing_=!0,jn(_,s),_.changing_=!1,_.trigger("change"))},s.addEventListener("selectedchange",s.selectedChange_))},s.removeTrack=function removeTrack(s){i.prototype.removeTrack.call(this,s),s.removeEventListener&&s.selectedChange_&&(s.removeEventListener("selectedchange",s.selectedChange_),s.selectedChange_=null)},VideoTrackList}(Ln),$n=function(i){function TextTrackList(){return i.apply(this,arguments)||this}_inheritsLoose(TextTrackList,i);var s=TextTrackList.prototype;return s.addTrack=function addTrack(s){var _=this;i.prototype.addTrack.call(this,s),this.queueChange_||(this.queueChange_=function(){return _.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return _.trigger("selectedlanguagechange")}),s.addEventListener("modechange",this.queueChange_);-1===["metadata","chapters"].indexOf(s.kind)&&s.addEventListener("modechange",this.triggerSelectedlanguagechange_)},s.removeTrack=function removeTrack(s){i.prototype.removeTrack.call(this,s),s.removeEventListener&&(this.queueChange_&&s.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&s.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},TextTrackList}(Ln),Un=function(){function HtmlTrackElementList(i){void 0===i&&(i=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function get(){return this.trackElements_.length}});for(var s=0,_=i.length;s<_;s++)this.addTrackElement_(i[s])}var i=HtmlTrackElementList.prototype;return i.addTrackElement_=function addTrackElement_(i){var s=this.trackElements_.length;""+s in this||Object.defineProperty(this,s,{get:function get(){return this.trackElements_[s]}}),-1===this.trackElements_.indexOf(i)&&this.trackElements_.push(i)},i.getTrackElementByTrack_=function getTrackElementByTrack_(i){for(var s,_=0,T=this.trackElements_.length;_<T;_++)if(i===this.trackElements_[_].track){s=this.trackElements_[_];break}return s},i.removeTrackElement_=function removeTrackElement_(i){for(var s=0,_=this.trackElements_.length;s<_;s++)if(i===this.trackElements_[s]){this.trackElements_[s].track&&"function"==typeof this.trackElements_[s].track.off&&this.trackElements_[s].track.off(),"function"==typeof this.trackElements_[s].off&&this.trackElements_[s].off(),this.trackElements_.splice(s,1);break}},HtmlTrackElementList}(),Fn=function(){function TextTrackCueList(i){TextTrackCueList.prototype.setCues_.call(this,i),Object.defineProperty(this,"length",{get:function get(){return this.length_}})}var i=TextTrackCueList.prototype;return i.setCues_=function setCues_(i){var s=this.length||0,_=0,T=i.length;this.cues_=i,this.length_=i.length;var S=function defineProp(i){""+i in this||Object.defineProperty(this,""+i,{get:function get(){return this.cues_[i]}})};if(s<T)for(_=s;_<T;_++)S.call(this,_)},i.getCueById=function getCueById(i){for(var s=null,_=0,T=this.length;_<T;_++){var S=this[_];if(S.id===i){s=S;break}}return s},TextTrackCueList}(),Hn={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},qn={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Vn={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Gn={disabled:"disabled",hidden:"hidden",showing:"showing"},Zn=function(i){function Track(s){var _;void 0===s&&(s={}),_=i.call(this)||this;var T={id:s.id||"vjs_track_"+newGUID(),kind:s.kind||"",language:s.language||""},S=s.label||"",C=function _loop(i){Object.defineProperty((0,O.Z)(_),i,{get:function get(){return T[i]},set:function set(){}})};for(var P in T)C(P);return Object.defineProperty((0,O.Z)(_),"label",{get:function get(){return S},set:function set(i){i!==S&&(S=i,this.trigger("labelchange"))}}),_}return _inheritsLoose(Track,i),Track}(Rt),Wn=function parseUrl(i){var s=["protocol","hostname","port","pathname","search","hash","host"],_=P().createElement("a");_.href=i;var T,C=""===_.host&&"file:"!==_.protocol;C&&((T=P().createElement("div")).innerHTML='<a href="'+i+'"></a>',_=T.firstChild,T.setAttribute("style","display:none; position:absolute;"),P().body.appendChild(T));for(var O={},M=0;M<s.length;M++)O[s[M]]=_[s[M]];return"http:"===O.protocol&&(O.host=O.host.replace(/:80$/,"")),"https:"===O.protocol&&(O.host=O.host.replace(/:443$/,"")),O.protocol||(O.protocol=S().location.protocol),C&&P().body.removeChild(T),O},Kn=function getAbsoluteURL(i){if(!i.match(/^https?:\/\//)){var s=P().createElement("div");s.innerHTML='<a href="'+i+'">x</a>',i=s.firstChild.href}return i},Yn=function getFileExtension(i){if("string"==typeof i){var s=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(i);if(s)return s.pop().toLowerCase()}return""},Xn=function isCrossOrigin(i,s){void 0===s&&(s=S().location);var _=Wn(i);return(":"===_.protocol?s.protocol:_.protocol)+_.host!==s.protocol+s.host},Qn=Object.freeze({__proto__:null,parseUrl:Wn,getAbsoluteURL:Kn,getFileExtension:Yn,isCrossOrigin:Xn}),Jn=function parseCues(i,s){var _=new(S().WebVTT.Parser)(S(),S().vttjs,S().WebVTT.StringDecoder()),T=[];_.oncue=function(i){s.addCue(i)},_.onparsingerror=function(i){T.push(i)},_.onflush=function(){s.trigger({type:"loadeddata",target:s})},_.parse(i),T.length>0&&(S().console&&S().console.groupCollapsed&&S().console.groupCollapsed("Text Track parsing errors for "+s.src),T.forEach((function(i){return pt.error(i)})),S().console&&S().console.groupEnd&&S().console.groupEnd()),_.flush()},er=function loadTrack(i,s){var _={uri:i},T=Xn(i);T&&(_.cors=T);var C="use-credentials"===s.tech_.crossOrigin();C&&(_.withCredentials=C),V()(_,It(this,(function(i,_,T){if(i)return pt.error(i,_);s.loaded_=!0,"function"!=typeof S().WebVTT?s.tech_&&s.tech_.any(["vttjsloaded","vttjserror"],(function(i){if("vttjserror"!==i.type)return Jn(T,s);pt.error("vttjs failed to load, stopping trying to process "+s.src)})):Jn(T,s)})))},tr=function(i){function TextTrack(s){var _;if(void 0===s&&(s={}),!s.tech)throw new Error("A tech was not provided.");var T=mergeOptions(s,{kind:Vn[s.kind]||"subtitles",language:s.language||s.srclang||""}),S=Gn[T.mode]||"disabled",C=T.default;"metadata"!==T.kind&&"chapters"!==T.kind||(S="hidden"),(_=i.call(this,T)||this).tech_=T.tech,_.cues_=[],_.activeCues_=[],_.preload_=!1!==_.tech_.preloadTextTracks;var P=new Fn(_.cues_),M=new Fn(_.activeCues_),R=!1,D=It((0,O.Z)(_),(function(){this.tech_.isReady_&&!this.tech_.isDisposed()&&(this.activeCues=this.activeCues,R&&(this.trigger("cuechange"),R=!1))}));return _.tech_.one("dispose",(function disposeHandler(){_.tech_.off("timeupdate",D)})),"disabled"!==S&&_.tech_.on("timeupdate",D),Object.defineProperties((0,O.Z)(_),{default:{get:function get(){return C},set:function set(){}},mode:{get:function get(){return S},set:function set(i){Gn[i]&&S!==i&&(S=i,this.preload_||"disabled"===S||0!==this.cues.length||er(this.src,this),this.tech_.off("timeupdate",D),"disabled"!==S&&this.tech_.on("timeupdate",D),this.trigger("modechange"))}},cues:{get:function get(){return this.loaded_?P:null},set:function set(){}},activeCues:{get:function get(){if(!this.loaded_)return null;if(0===this.cues.length)return M;for(var i=this.tech_.currentTime(),s=[],_=0,T=this.cues.length;_<T;_++){var S=this.cues[_];(S.startTime<=i&&S.endTime>=i||S.startTime===S.endTime&&S.startTime<=i&&S.startTime+.5>=i)&&s.push(S)}if(R=!1,s.length!==this.activeCues_.length)R=!0;else for(var C=0;C<s.length;C++)-1===this.activeCues_.indexOf(s[C])&&(R=!0);return this.activeCues_=s,M.setCues_(this.activeCues_),M},set:function set(){}}}),T.src?(_.src=T.src,_.preload_||(_.loaded_=!0),(_.preload_||C||"subtitles"!==T.kind&&"captions"!==T.kind)&&er(_.src,(0,O.Z)(_))):_.loaded_=!0,_}_inheritsLoose(TextTrack,i);var s=TextTrack.prototype;return s.addCue=function addCue(i){var s=i;if(S().vttjs&&!(i instanceof S().vttjs.VTTCue)){for(var _ in s=new(S().vttjs.VTTCue)(i.startTime,i.endTime,i.text),i)_ in s||(s[_]=i[_]);s.id=i.id,s.originalCue_=i}for(var T=this.tech_.textTracks(),C=0;C<T.length;C++)T[C]!==this&&T[C].removeCue(s);this.cues_.push(s),this.cues.setCues_(this.cues_)},s.removeCue=function removeCue(i){for(var s=this.cues_.length;s--;){var _=this.cues_[s];if(_===i||_.originalCue_&&_.originalCue_===i){this.cues_.splice(s,1),this.cues.setCues_(this.cues_);break}}},TextTrack}(Zn);tr.prototype.allowedEvents_={cuechange:"cuechange"};var nr=function(i){function AudioTrack(s){var _;void 0===s&&(s={});var T=mergeOptions(s,{kind:qn[s.kind]||""});_=i.call(this,T)||this;var S=!1;return Object.defineProperty((0,O.Z)(_),"enabled",{get:function get(){return S},set:function set(i){"boolean"==typeof i&&i!==S&&(S=i,this.trigger("enabledchange"))}}),T.enabled&&(_.enabled=T.enabled),_.loaded_=!0,_}return _inheritsLoose(AudioTrack,i),AudioTrack}(Zn),rr=function(i){function VideoTrack(s){var _;void 0===s&&(s={});var T=mergeOptions(s,{kind:Hn[s.kind]||""});_=i.call(this,T)||this;var S=!1;return Object.defineProperty((0,O.Z)(_),"selected",{get:function get(){return S},set:function set(i){"boolean"==typeof i&&i!==S&&(S=i,this.trigger("selectedchange"))}}),T.selected&&(_.selected=T.selected),_}return _inheritsLoose(VideoTrack,i),VideoTrack}(Zn),ir=function(i){function HTMLTrackElement(s){var _,T;void 0===s&&(s={}),_=i.call(this)||this;var S=new tr(s);return _.kind=S.kind,_.src=S.src,_.srclang=S.language,_.label=S.label,_.default=S.default,Object.defineProperties((0,O.Z)(_),{readyState:{get:function get(){return T}},track:{get:function get(){return S}}}),T=0,S.addEventListener("loadeddata",(function(){T=2,_.trigger({type:"load",target:(0,O.Z)(_)})})),_}return _inheritsLoose(HTMLTrackElement,i),HTMLTrackElement}(Rt);ir.prototype.allowedEvents_={load:"load"},ir.NONE=0,ir.LOADING=1,ir.LOADED=2,ir.ERROR=3;var ar={audio:{ListClass:Dn,TrackClass:nr,capitalName:"Audio"},video:{ListClass:Bn,TrackClass:rr,capitalName:"Video"},text:{ListClass:$n,TrackClass:tr,capitalName:"Text"}};Object.keys(ar).forEach((function(i){ar[i].getterName=i+"Tracks",ar[i].privateName=i+"Tracks_"}));var sr={remoteText:{ListClass:$n,TrackClass:tr,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Un,TrackClass:ir,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},lr=_extends({},ar,sr);sr.names=Object.keys(sr),ar.names=Object.keys(ar),lr.names=[].concat(sr.names).concat(ar.names);var cr=function(i){function Tech(s,_){var T;return void 0===s&&(s={}),void 0===_&&(_=function ready(){}),s.reportTouchActivity=!1,(T=i.call(this,null,s,_)||this).hasStarted_=!1,T.on("playing",(function(){this.hasStarted_=!0})),T.on("loadstart",(function(){this.hasStarted_=!1})),lr.names.forEach((function(i){var _=lr[i];s&&s[_.getterName]&&(T[_.privateName]=s[_.getterName])})),T.featuresProgressEvents||T.manualProgressOn(),T.featuresTimeupdateEvents||T.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach((function(i){!1===s["native"+i+"Tracks"]&&(T["featuresNative"+i+"Tracks"]=!1)})),!1===s.nativeCaptions||!1===s.nativeTextTracks?T.featuresNativeTextTracks=!1:!0!==s.nativeCaptions&&!0!==s.nativeTextTracks||(T.featuresNativeTextTracks=!0),T.featuresNativeTextTracks||T.emulateTextTracks(),T.preloadTextTracks=!1!==s.preloadTextTracks,T.autoRemoteTextTracks_=new lr.text.ListClass,T.initTrackListeners(),s.nativeControlsForTouch||T.emitTapEvents(),T.constructor&&(T.name_=T.constructor.name||"Unknown Tech"),T}_inheritsLoose(Tech,i);var s=Tech.prototype;return s.triggerSourceset=function triggerSourceset(i){var s=this;this.isReady_||this.one("ready",(function(){return s.setTimeout((function(){return s.triggerSourceset(i)}),1)})),this.trigger({src:i,type:"sourceset"})},s.manualProgressOn=function manualProgressOn(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},s.manualProgressOff=function manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},s.trackProgress=function trackProgress(i){this.stopTrackingProgress(),this.progressInterval=this.setInterval(It(this,(function(){var i=this.bufferedPercent();this.bufferedPercent_!==i&&this.trigger("progress"),this.bufferedPercent_=i,1===i&&this.stopTrackingProgress()})),500)},s.onDurationChange=function onDurationChange(i){this.duration_=this.duration()},s.buffered=function buffered(){return createTimeRanges(0,0)},s.bufferedPercent=function bufferedPercent$1(){return bufferedPercent(this.buffered(),this.duration_)},s.stopTrackingProgress=function stopTrackingProgress(){this.clearInterval(this.progressInterval)},s.manualTimeUpdatesOn=function manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},s.manualTimeUpdatesOff=function manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},s.trackCurrentTime=function trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval((function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}),250)},s.stopTrackingCurrentTime=function stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},s.dispose=function dispose(){this.clearTracks(ar.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),i.prototype.dispose.call(this)},s.clearTracks=function clearTracks(i){var s=this;(i=[].concat(i)).forEach((function(i){for(var _=s[i+"Tracks"]()||[],T=_.length;T--;){var S=_[T];"text"===i&&s.removeRemoteTextTrack(S),_.removeTrack(S)}}))},s.cleanupAutoTextTracks=function cleanupAutoTextTracks(){for(var i=this.autoRemoteTextTracks_||[],s=i.length;s--;){var _=i[s];this.removeRemoteTextTrack(_)}},s.reset=function reset(){},s.crossOrigin=function crossOrigin(){},s.setCrossOrigin=function setCrossOrigin(){},s.error=function error(i){return void 0!==i&&(this.error_=new MediaError(i),this.trigger("error")),this.error_},s.played=function played(){return this.hasStarted_?createTimeRanges(0,0):createTimeRanges()},s.play=function play(){},s.setScrubbing=function setScrubbing(){},s.scrubbing=function scrubbing(){},s.setCurrentTime=function setCurrentTime(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},s.initTrackListeners=function initTrackListeners(){var i=this;ar.names.forEach((function(s){var _=ar[s],T=function trackListChanges(){i.trigger(s+"trackchange")},S=i[_.getterName]();S.addEventListener("removetrack",T),S.addEventListener("addtrack",T),i.on("dispose",(function(){S.removeEventListener("removetrack",T),S.removeEventListener("addtrack",T)}))}))},s.addWebVttScript_=function addWebVttScript_(){var i=this;if(!S().WebVTT)if(P().body.contains(this.el())){if(!this.options_["vtt.js"]&&isPlain(Y())&&Object.keys(Y()).length>0)return void this.trigger("vttjsloaded");var s=P().createElement("script");s.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",s.onload=function(){i.trigger("vttjsloaded")},s.onerror=function(){i.trigger("vttjserror")},this.on("dispose",(function(){s.onload=null,s.onerror=null})),S().WebVTT=!0,this.el().parentNode.appendChild(s)}else this.ready(this.addWebVttScript_)},s.emulateTextTracks=function emulateTextTracks(){var i=this,s=this.textTracks(),_=this.remoteTextTracks(),T=function handleAddTrack(i){return s.addTrack(i.track)},S=function handleRemoveTrack(i){return s.removeTrack(i.track)};_.on("addtrack",T),_.on("removetrack",S),this.addWebVttScript_();var C=function updateDisplay(){return i.trigger("texttrackchange")},P=function textTracksChanges(){C();for(var i=0;i<s.length;i++){var _=s[i];_.removeEventListener("cuechange",C),"showing"===_.mode&&_.addEventListener("cuechange",C)}};P(),s.addEventListener("change",P),s.addEventListener("addtrack",P),s.addEventListener("removetrack",P),this.on("dispose",(function(){_.off("addtrack",T),_.off("removetrack",S),s.removeEventListener("change",P),s.removeEventListener("addtrack",P),s.removeEventListener("removetrack",P);for(var i=0;i<s.length;i++){s[i].removeEventListener("cuechange",C)}}))},s.addTextTrack=function addTextTrack(i,s,_){if(!i)throw new Error("TextTrack kind is required but was not provided");return function createTrackHelper(i,s,_,T,S){void 0===S&&(S={});var C=i.textTracks();S.kind=s,_&&(S.label=_),T&&(S.language=T),S.tech=i;var P=new lr.text.TrackClass(S);return C.addTrack(P),P}(this,i,s,_)},s.createRemoteTextTrack=function createRemoteTextTrack(i){var s=mergeOptions(i,{tech:this});return new sr.remoteTextEl.TrackClass(s)},s.addRemoteTextTrack=function addRemoteTextTrack(i,s){var _=this;void 0===i&&(i={});var T=this.createRemoteTextTrack(i);return!0!==s&&!1!==s&&(pt.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),s=!0),this.remoteTextTrackEls().addTrackElement_(T),this.remoteTextTracks().addTrack(T.track),!0!==s&&this.ready((function(){return _.autoRemoteTextTracks_.addTrack(T.track)})),T},s.removeRemoteTextTrack=function removeRemoteTextTrack(i){var s=this.remoteTextTrackEls().getTrackElementByTrack_(i);this.remoteTextTrackEls().removeTrackElement_(s),this.remoteTextTracks().removeTrack(i),this.autoRemoteTextTracks_.removeTrack(i)},s.getVideoPlaybackQuality=function getVideoPlaybackQuality(){return{}},s.requestPictureInPicture=function requestPictureInPicture(){var i=this.options_.Promise||S().Promise;if(i)return i.reject()},s.disablePictureInPicture=function disablePictureInPicture(){return!0},s.setDisablePictureInPicture=function setDisablePictureInPicture(){},s.setPoster=function setPoster(){},s.playsinline=function playsinline(){},s.setPlaysinline=function setPlaysinline(){},s.overrideNativeAudioTracks=function overrideNativeAudioTracks(){},s.overrideNativeVideoTracks=function overrideNativeVideoTracks(){},s.canPlayType=function canPlayType(){return""},Tech.canPlayType=function canPlayType(){return""},Tech.canPlaySource=function canPlaySource(i,s){return Tech.canPlayType(i.type)},Tech.isTech=function isTech(i){return i.prototype instanceof Tech||i instanceof Tech||i===Tech},Tech.registerTech=function registerTech(i,s){if(Tech.techs_||(Tech.techs_={}),!Tech.isTech(s))throw new Error("Tech "+i+" must be a Tech");if(!Tech.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!Tech.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return i=Zt(i),Tech.techs_[i]=s,Tech.techs_[Gt(i)]=s,"Tech"!==i&&Tech.defaultTechOrder_.push(i),s},Tech.getTech=function getTech(i){if(i)return Tech.techs_&&Tech.techs_[i]?Tech.techs_[i]:(i=Zt(i),S()&&S().videojs&&S().videojs[i]?(pt.warn("The "+i+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),S().videojs[i]):void 0)},Tech}(Qt);lr.names.forEach((function(i){var s=lr[i];cr.prototype[s.getterName]=function(){return this[s.privateName]=this[s.privateName]||new s.ListClass,this[s.privateName]}})),cr.prototype.featuresVolumeControl=!0,cr.prototype.featuresMuteControl=!0,cr.prototype.featuresFullscreenResize=!1,cr.prototype.featuresPlaybackRate=!1,cr.prototype.featuresProgressEvents=!1,cr.prototype.featuresSourceset=!1,cr.prototype.featuresTimeupdateEvents=!1,cr.prototype.featuresNativeTextTracks=!1,cr.withSourceHandlers=function(i){i.registerSourceHandler=function(s,_){var T=i.sourceHandlers;T||(T=i.sourceHandlers=[]),void 0===_&&(_=T.length),T.splice(_,0,s)},i.canPlayType=function(s){for(var _,T=i.sourceHandlers||[],S=0;S<T.length;S++)if(_=T[S].canPlayType(s))return _;return""},i.selectSourceHandler=function(s,_){for(var T=i.sourceHandlers||[],S=0;S<T.length;S++)if(T[S].canHandleSource(s,_))return T[S];return null},i.canPlaySource=function(s,_){var T=i.selectSourceHandler(s,_);return T?T.canHandleSource(s,_):""};["seekable","seeking","duration"].forEach((function(i){var s=this[i];"function"==typeof s&&(this[i]=function(){return this.sourceHandler_&&this.sourceHandler_[i]?this.sourceHandler_[i].apply(this.sourceHandler_,arguments):s.apply(this,arguments)})}),i.prototype),i.prototype.setSource=function(s){var _=i.selectSourceHandler(s,this.options_);_||(i.nativeSourceHandler?_=i.nativeSourceHandler:pt.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),_!==i.nativeSourceHandler&&(this.currentSource_=s),this.sourceHandler_=_.handleSource(s,this,this.options_),this.one("dispose",this.disposeSourceHandler)},i.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},Qt.registerComponent("Tech",cr),cr.registerTech("Tech",cr),cr.defaultTechOrder_=[];var ur={},dr={},hr={};function setSource(i,s,_){i.setTimeout((function(){return setSourceHelper(s,ur[s.type],_,i)}),1)}function mediate(i,s,_,T){void 0===T&&(T=null);var S="call"+Zt(_),C=i.reduce(middlewareIterator(S),T),P=C===hr,O=P?null:s[_](C);return function executeRight(i,s,_,T){for(var S=i.length-1;S>=0;S--){var C=i[S];C[s]&&C[s](T,_)}}(i,_,O,P),O}var pr={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1},mr={setCurrentTime:1,setMuted:1,setVolume:1},fr={play:1,pause:1};function middlewareIterator(i){return function(s,_){return s===hr?hr:_[i]?_[i](s):s}}function setSourceHelper(i,s,_,T,S,C){void 0===i&&(i={}),void 0===s&&(s=[]),void 0===S&&(S=[]),void 0===C&&(C=!1);var P=s,O=P[0],M=P.slice(1);if("string"==typeof O)setSourceHelper(i,ur[O],_,T,S,C);else if(O){var R=function getOrCreateFactory(i,s){var _=dr[i.id()],T=null;if(null==_)return T=s(i),dr[i.id()]=[[s,T]],T;for(var S=0;S<_.length;S++){var C=_[S],P=C[0],O=C[1];P===s&&(T=O)}return null===T&&(T=s(i),_.push([s,T])),T}(T,O);if(!R.setSource)return S.push(R),setSourceHelper(i,M,_,T,S,C);R.setSource(video_es_assign({},i),(function(s,P){if(s)return setSourceHelper(i,M,_,T,S,C);S.push(R),setSourceHelper(P,i.type===P.type?M:ur[P.type],_,T,S,C)}))}else M.length?setSourceHelper(i,M,_,T,S,C):C?_(i,S):setSourceHelper(i,ur["*"],_,T,S,!0)}var gr={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},vr=function getMimetype(i){void 0===i&&(i="");var s=Yn(i);return gr[s.toLowerCase()]||""},br=function filterSource(i){if(Array.isArray(i)){var s=[];i.forEach((function(i){i=filterSource(i),Array.isArray(i)?s=s.concat(i):video_es_isObject(i)&&s.push(i)})),i=s}else i="string"==typeof i&&i.trim()?[fixSource({src:i})]:video_es_isObject(i)&&"string"==typeof i.src&&i.src&&i.src.trim()?[fixSource(i)]:[];return i};function fixSource(i){if(!i.type){var s=vr(i.src);s&&(i.type=s)}return i}var yr=function(i){function MediaLoader(s,_,T){var S,C=mergeOptions({createEl:!1},_);if(S=i.call(this,s,C,T)||this,_.playerOptions.sources&&0!==_.playerOptions.sources.length)s.src(_.playerOptions.sources);else for(var P=0,O=_.playerOptions.techOrder;P<O.length;P++){var M=Zt(O[P]),R=cr.getTech(M);if(M||(R=Qt.getComponent(M)),R&&R.isSupported()){s.loadTech_(M);break}}return S}return _inheritsLoose(MediaLoader,i),MediaLoader}(Qt);Qt.registerComponent("MediaLoader",yr);var _r=function(i){function ClickableComponent(s,_){var T;return(T=i.call(this,s,_)||this).emitTapEvents(),T.enable(),T}_inheritsLoose(ClickableComponent,i);var s=ClickableComponent.prototype;return s.createEl=function createEl(s,_,T){void 0===s&&(s="div"),void 0===_&&(_={}),void 0===T&&(T={}),_=video_es_assign({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},_),"button"===s&&pt.error("Creating a ClickableComponent with an HTML element of "+s+" is not supported; use a Button instead."),T=video_es_assign({role:"button"},T),this.tabIndex_=_.tabIndex;var S=i.prototype.createEl.call(this,s,_,T);return this.createControlTextEl(S),S},s.dispose=function dispose(){this.controlTextEl_=null,i.prototype.dispose.call(this)},s.createControlTextEl=function createControlTextEl(i){return this.controlTextEl_=createEl("span",{className:"vjs-control-text"},{"aria-live":"polite"}),i&&i.appendChild(this.controlTextEl_),this.controlText(this.controlText_,i),this.controlTextEl_},s.controlText=function controlText(i,s){if(void 0===s&&(s=this.el()),void 0===i)return this.controlText_||"Need Text";var _=this.localize(i);this.controlText_=i,textContent(this.controlTextEl_,_),this.nonIconControl||s.setAttribute("title",_)},s.buildCSSClass=function buildCSSClass(){return"vjs-control vjs-button "+i.prototype.buildCSSClass.call(this)},s.enable=function enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("keydown",this.handleKeyDown))},s.disable=function disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver),this.off("mouseout",this.handleMouseOut),this.off(["tap","click"],this.handleClick),this.off("keydown",this.handleKeyDown)},s.handleLanguagechange=function handleLanguagechange(){this.controlText(this.controlText_)},s.handleClick=function handleClick(i){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},s.handleKeyDown=function handleKeyDown(s){$().isEventKey(s,"Space")||$().isEventKey(s,"Enter")?(s.preventDefault(),s.stopPropagation(),this.trigger("click")):i.prototype.handleKeyDown.call(this,s)},ClickableComponent}(Qt);Qt.registerComponent("ClickableComponent",_r);var wr=function(i){function PosterImage(s,_){var T;return(T=i.call(this,s,_)||this).update(),s.on("posterchange",It((0,O.Z)(T),T.update)),T}_inheritsLoose(PosterImage,i);var s=PosterImage.prototype;return s.dispose=function dispose(){this.player().off("posterchange",this.update),i.prototype.dispose.call(this)},s.createEl=function createEl$1(){return createEl("div",{className:"vjs-poster",tabIndex:-1})},s.update=function update(i){var s=this.player().poster();this.setSrc(s),s?this.show():this.hide()},s.setSrc=function setSrc(i){var s="";i&&(s='url("'+i+'")'),this.el_.style.backgroundImage=s},s.handleClick=function handleClick(i){if(this.player_.controls()){var s=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;!this.player_.tech(!0)||(mn||dn)&&s||this.player_.tech(!0).focus(),this.player_.paused()?silencePromise(this.player_.play()):this.player_.pause()}},PosterImage}(_r);Qt.registerComponent("PosterImage",wr);var kr={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function constructColor(i,s){var _;if(4===i.length)_=i[1]+i[1]+i[2]+i[2]+i[3]+i[3];else{if(7!==i.length)throw new Error("Invalid color code provided, "+i+"; must be formatted as e.g. #f0e or #f604e2.");_=i.slice(1)}return"rgba("+parseInt(_.slice(0,2),16)+","+parseInt(_.slice(2,4),16)+","+parseInt(_.slice(4,6),16)+","+s+")"}function tryUpdateStyle(i,s,_){try{i.style[s]=_}catch(T){return}}var Tr=function(i){function TextTrackDisplay(s,_,T){var C;C=i.call(this,s,_,T)||this;var P=It((0,O.Z)(C),C.updateDisplay);return s.on("loadstart",It((0,O.Z)(C),C.toggleDisplay)),s.on("texttrackchange",P),s.on("loadedmetadata",It((0,O.Z)(C),C.preselectTrack)),s.ready(It((0,O.Z)(C),(function(){if(s.tech_&&s.tech_.featuresNativeTextTracks)this.hide();else{s.on("fullscreenchange",P),s.on("playerresize",P),S().addEventListener("orientationchange",P),s.on("dispose",(function(){return S().removeEventListener("orientationchange",P)}));for(var i=this.options_.playerOptions.tracks||[],_=0;_<i.length;_++)this.player_.addRemoteTextTrack(i[_],!0);this.preselectTrack()}}))),C}_inheritsLoose(TextTrackDisplay,i);var s=TextTrackDisplay.prototype;return s.preselectTrack=function preselectTrack(){for(var i,s,_,T={captions:1,subtitles:1},S=this.player_.textTracks(),C=this.player_.cache_.selectedLanguage,P=0;P<S.length;P++){var O=S[P];C&&C.enabled&&C.language&&C.language===O.language&&O.kind in T?O.kind===C.kind?_=O:_||(_=O):C&&!C.enabled?(_=null,i=null,s=null):O.default&&("descriptions"!==O.kind||i?O.kind in T&&!s&&(s=O):i=O)}_?_.mode="showing":s?s.mode="showing":i&&(i.mode="showing")},s.toggleDisplay=function toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},s.createEl=function createEl(){return i.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},s.clearDisplay=function clearDisplay(){"function"==typeof S().WebVTT&&S().WebVTT.processCues(S(),[],this.el_)},s.updateDisplay=function updateDisplay(){var i=this.player_.textTracks(),s=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),s){for(var _=[],T=0;T<i.length;++T){var S=i[T];"showing"===S.mode&&_.push(S)}this.updateForTrack(_)}else{for(var C=null,P=null,O=i.length;O--;){var M=i[O];"showing"===M.mode&&("descriptions"===M.kind?C=M:P=M)}P?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(P)):C&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(C))}},s.updateDisplayState=function updateDisplayState(i){for(var s=this.player_.textTrackSettings.getValues(),_=i.activeCues,T=_.length;T--;){var C=_[T];if(C){var P=C.displayState;if(s.color&&(P.firstChild.style.color=s.color),s.textOpacity&&tryUpdateStyle(P.firstChild,"color",constructColor(s.color||"#fff",s.textOpacity)),s.backgroundColor&&(P.firstChild.style.backgroundColor=s.backgroundColor),s.backgroundOpacity&&tryUpdateStyle(P.firstChild,"backgroundColor",constructColor(s.backgroundColor||"#000",s.backgroundOpacity)),s.windowColor&&(s.windowOpacity?tryUpdateStyle(P,"backgroundColor",constructColor(s.windowColor,s.windowOpacity)):P.style.backgroundColor=s.windowColor),s.edgeStyle&&("dropshadow"===s.edgeStyle?P.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===s.edgeStyle?P.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===s.edgeStyle?P.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===s.edgeStyle&&(P.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222")),s.fontPercent&&1!==s.fontPercent){var O=S().parseFloat(P.style.fontSize);P.style.fontSize=O*s.fontPercent+"px",P.style.height="auto",P.style.top="auto"}s.fontFamily&&"default"!==s.fontFamily&&("small-caps"===s.fontFamily?P.firstChild.style.fontVariant="small-caps":P.firstChild.style.fontFamily=kr[s.fontFamily])}}},s.updateForTrack=function updateForTrack(i){if(Array.isArray(i)||(i=[i]),"function"==typeof S().WebVTT&&!i.every((function(i){return!i.activeCues}))){for(var s=[],_=0;_<i.length;++_)for(var T=i[_],C=0;C<T.activeCues.length;++C)s.push(T.activeCues[C]);S().WebVTT.processCues(S(),s,this.el_);for(var P=0;P<i.length;++P){for(var O=i[P],M=0;M<O.activeCues.length;++M){var R=O.activeCues[M].displayState;addClass(R,"vjs-text-track-cue"),addClass(R,"vjs-text-track-cue-"+(O.language?O.language:P))}this.player_.textTrackSettings&&this.updateDisplayState(O)}}},TextTrackDisplay}(Qt);Qt.registerComponent("TextTrackDisplay",Tr);var Sr=function(i){function LoadingSpinner(){return i.apply(this,arguments)||this}return _inheritsLoose(LoadingSpinner,i),LoadingSpinner.prototype.createEl=function createEl$1(){var s=this.player_.isAudio(),_=this.localize(s?"Audio Player":"Video Player"),T=createEl("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[_])}),S=i.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return S.appendChild(T),S},LoadingSpinner}(Qt);Qt.registerComponent("LoadingSpinner",Sr);var Cr=function(i){function Button(){return i.apply(this,arguments)||this}_inheritsLoose(Button,i);var s=Button.prototype;return s.createEl=function createEl(i,s,_){void 0===s&&(s={}),void 0===_&&(_={}),s=video_es_assign({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},s),_=video_es_assign({type:"button"},_);var T=Qt.prototype.createEl.call(this,"button",s,_);return this.createControlTextEl(T),T},s.addChild=function addChild(i,s){void 0===s&&(s={});var _=this.constructor.name;return pt.warn("Adding an actionable (user controllable) child to a Button ("+_+") is not supported; use a ClickableComponent instead."),Qt.prototype.addChild.call(this,i,s)},s.enable=function enable(){i.prototype.enable.call(this),this.el_.removeAttribute("disabled")},s.disable=function disable(){i.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},s.handleKeyDown=function handleKeyDown(s){$().isEventKey(s,"Space")||$().isEventKey(s,"Enter")?s.stopPropagation():i.prototype.handleKeyDown.call(this,s)},Button}(_r);Qt.registerComponent("Button",Cr);var xr=function(i){function BigPlayButton(s,_){var T;return(T=i.call(this,s,_)||this).mouseused_=!1,T.on("mousedown",T.handleMouseDown),T}_inheritsLoose(BigPlayButton,i);var s=BigPlayButton.prototype;return s.buildCSSClass=function buildCSSClass(){return"vjs-big-play-button"},s.handleClick=function handleClick(i){var s=this.player_.play();if(this.mouseused_&&i.clientX&&i.clientY){var _=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;return silencePromise(s),void(!this.player_.tech(!0)||(mn||dn)&&_||this.player_.tech(!0).focus())}var T=this.player_.getChild("controlBar"),S=T&&T.getChild("playToggle");if(S){var C=function playFocus(){return S.focus()};isPromise(s)?s.then(C,(function(){})):this.setTimeout(C,1)}else this.player_.tech(!0).focus()},s.handleKeyDown=function handleKeyDown(s){this.mouseused_=!1,i.prototype.handleKeyDown.call(this,s)},s.handleMouseDown=function handleMouseDown(i){this.mouseused_=!0},BigPlayButton}(Cr);xr.prototype.controlText_="Play Video",Qt.registerComponent("BigPlayButton",xr);var Er=function(i){function CloseButton(s,_){var T;return(T=i.call(this,s,_)||this).controlText(_&&_.controlText||T.localize("Close")),T}_inheritsLoose(CloseButton,i);var s=CloseButton.prototype;return s.buildCSSClass=function buildCSSClass(){return"vjs-close-button "+i.prototype.buildCSSClass.call(this)},s.handleClick=function handleClick(i){this.trigger({type:"close",bubbles:!1})},s.handleKeyDown=function handleKeyDown(s){$().isEventKey(s,"Esc")?(s.preventDefault(),s.stopPropagation(),this.trigger("click")):i.prototype.handleKeyDown.call(this,s)},CloseButton}(Cr);Qt.registerComponent("CloseButton",Er);var Pr=function(i){function PlayToggle(s,_){var T;return void 0===_&&(_={}),T=i.call(this,s,_)||this,_.replay=void 0===_.replay||_.replay,T.on(s,"play",T.handlePlay),T.on(s,"pause",T.handlePause),_.replay&&T.on(s,"ended",T.handleEnded),T}_inheritsLoose(PlayToggle,i);var s=PlayToggle.prototype;return s.buildCSSClass=function buildCSSClass(){return"vjs-play-control "+i.prototype.buildCSSClass.call(this)},s.handleClick=function handleClick(i){this.player_.paused()?this.player_.play():this.player_.pause()},s.handleSeeked=function handleSeeked(i){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(i):this.handlePlay(i)},s.handlePlay=function handlePlay(i){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},s.handlePause=function handlePause(i){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},s.handleEnded=function handleEnded(i){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)},PlayToggle}(Cr);Pr.prototype.controlText_="Play",Qt.registerComponent("PlayToggle",Pr);var Ar=function defaultImplementation(i,s){i=i<0?0:i;var _=Math.floor(i%60),T=Math.floor(i/60%60),S=Math.floor(i/3600),C=Math.floor(s/60%60),P=Math.floor(s/3600);return(isNaN(i)||i===1/0)&&(S=T=_="-"),(S=S>0||P>0?S+":":"")+(T=((S||C>=10)&&T<10?"0"+T:T)+":")+(_=_<10?"0"+_:_)},Or=Ar;function formatTime(i,s){return void 0===s&&(s=i),Or(i,s)}var Mr=function(i){function TimeDisplay(s,_){var T;return(T=i.call(this,s,_)||this).on(s,["timeupdate","ended"],T.updateContent),T.updateTextNode_(),T}_inheritsLoose(TimeDisplay,i);var s=TimeDisplay.prototype;return s.createEl=function createEl$1(){var s=this.buildCSSClass(),_=i.prototype.createEl.call(this,"div",{className:s+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text" role="presentation">'+this.localize(this.labelText_)+"</span>"});return this.contentEl_=createEl("span",{className:s+"-display"},{"aria-live":"off",role:"presentation"}),_.appendChild(this.contentEl_),_},s.dispose=function dispose(){this.contentEl_=null,this.textNode_=null,i.prototype.dispose.call(this)},s.updateTextNode_=function updateTextNode_(i){var s=this;void 0===i&&(i=0),i=formatTime(i),this.formattedTime_!==i&&(this.formattedTime_=i,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",(function(){if(s.contentEl_){var i=s.textNode_;i&&s.contentEl_.firstChild!==i&&(i=null,pt.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),s.textNode_=P().createTextNode(s.formattedTime_),s.textNode_&&(i?s.contentEl_.replaceChild(s.textNode_,i):s.contentEl_.appendChild(s.textNode_))}})))},s.updateContent=function updateContent(i){},TimeDisplay}(Qt);Mr.prototype.labelText_="Time",Mr.prototype.controlText_="Time",Qt.registerComponent("TimeDisplay",Mr);var zr=function(i){function CurrentTimeDisplay(){return i.apply(this,arguments)||this}_inheritsLoose(CurrentTimeDisplay,i);var s=CurrentTimeDisplay.prototype;return s.buildCSSClass=function buildCSSClass(){return"vjs-current-time"},s.updateContent=function updateContent(i){var s;s=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(s)},CurrentTimeDisplay}(Mr);zr.prototype.labelText_="Current Time",zr.prototype.controlText_="Current Time",Qt.registerComponent("CurrentTimeDisplay",zr);var Ir=function(i){function DurationDisplay(s,_){var T;return(T=i.call(this,s,_)||this).on(s,"durationchange",T.updateContent),T.on(s,"loadstart",T.updateContent),T.on(s,"loadedmetadata",T.updateContent),T}_inheritsLoose(DurationDisplay,i);var s=DurationDisplay.prototype;return s.buildCSSClass=function buildCSSClass(){return"vjs-duration"},s.updateContent=function updateContent(i){var s=this.player_.duration();this.updateTextNode_(s)},DurationDisplay}(Mr);Ir.prototype.labelText_="Duration",Ir.prototype.controlText_="Duration",Qt.registerComponent("DurationDisplay",Ir);var Lr=function(i){function TimeDivider(){return i.apply(this,arguments)||this}return _inheritsLoose(TimeDivider,i),TimeDivider.prototype.createEl=function createEl(){return i.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"},{"aria-hidden":!0})},TimeDivider}(Qt);Qt.registerComponent("TimeDivider",Lr);var Rr=function(i){function RemainingTimeDisplay(s,_){var T;return(T=i.call(this,s,_)||this).on(s,"durationchange",T.updateContent),T}_inheritsLoose(RemainingTimeDisplay,i);var s=RemainingTimeDisplay.prototype;return s.buildCSSClass=function buildCSSClass(){return"vjs-remaining-time"},s.createEl=function createEl$1(){var s=i.prototype.createEl.call(this);return s.insertBefore(createEl("span",{},{"aria-hidden":!0},"-"),this.contentEl_),s},s.updateContent=function updateContent(i){var s;"number"==typeof this.player_.duration()&&(s=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(s))},RemainingTimeDisplay}(Mr);Rr.prototype.labelText_="Remaining Time",Rr.prototype.controlText_="Remaining Time",Qt.registerComponent("RemainingTimeDisplay",Rr);var Nr=function(i){function LiveDisplay(s,_){var T;return(T=i.call(this,s,_)||this).updateShowing(),T.on(T.player(),"durationchange",T.updateShowing),T}_inheritsLoose(LiveDisplay,i);var s=LiveDisplay.prototype;return s.createEl=function createEl$1(){var s=i.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=createEl("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"</span>"+this.localize("LIVE")},{"aria-live":"off"}),s.appendChild(this.contentEl_),s},s.dispose=function dispose(){this.contentEl_=null,i.prototype.dispose.call(this)},s.updateShowing=function updateShowing(i){this.player().duration()===1/0?this.show():this.hide()},LiveDisplay}(Qt);Qt.registerComponent("LiveDisplay",Nr);var Dr=function(i){function SeekToLive(s,_){var T;return(T=i.call(this,s,_)||this).updateLiveEdgeStatus(),T.player_.liveTracker&&T.on(T.player_.liveTracker,"liveedgechange",T.updateLiveEdgeStatus),T}_inheritsLoose(SeekToLive,i);var s=SeekToLive.prototype;return s.createEl=function createEl$1(){var s=i.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=createEl("span",{className:"vjs-seek-to-live-text",innerHTML:this.localize("LIVE")},{"aria-hidden":"true"}),s.appendChild(this.textEl_),s},s.updateLiveEdgeStatus=function updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},s.handleClick=function handleClick(){this.player_.liveTracker.seekToLiveEdge()},s.dispose=function dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatus),this.textEl_=null,i.prototype.dispose.call(this)},SeekToLive}(Cr);Dr.prototype.controlText_="Seek to live, currently playing live",Qt.registerComponent("SeekToLive",Dr);var jr=function clamp(i,s,_){return i=Number(i),Math.min(_,Math.max(s,isNaN(i)?s:i))},Br=function(i){function Slider(s,_){var T;return(T=i.call(this,s,_)||this).bar=T.getChild(T.options_.barName),T.vertical(!!T.options_.vertical),T.enable(),T}_inheritsLoose(Slider,i);var s=Slider.prototype;return s.enabled=function enabled(){return this.enabled_},s.enable=function enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("keydown",this.handleKeyDown),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},s.disable=function disable(){if(this.enabled()){var i=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("keydown",this.handleKeyDown),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(i,"mousemove",this.handleMouseMove),this.off(i,"mouseup",this.handleMouseUp),this.off(i,"touchmove",this.handleMouseMove),this.off(i,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},s.createEl=function createEl(s,_,T){return void 0===_&&(_={}),void 0===T&&(T={}),_.className=_.className+" vjs-slider",_=video_es_assign({tabIndex:0},_),T=video_es_assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},T),i.prototype.createEl.call(this,s,_,T)},s.handleMouseDown=function handleMouseDown(i){var s=this.bar.el_.ownerDocument;"mousedown"===i.type&&i.preventDefault(),"touchstart"!==i.type||hn||i.preventDefault(),blockTextSelection(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(s,"mousemove",this.handleMouseMove),this.on(s,"mouseup",this.handleMouseUp),this.on(s,"touchmove",this.handleMouseMove),this.on(s,"touchend",this.handleMouseUp),this.handleMouseMove(i)},s.handleMouseMove=function handleMouseMove(i){},s.handleMouseUp=function handleMouseUp(){var i=this.bar.el_.ownerDocument;unblockTextSelection(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(i,"mousemove",this.handleMouseMove),this.off(i,"mouseup",this.handleMouseUp),this.off(i,"touchmove",this.handleMouseMove),this.off(i,"touchend",this.handleMouseUp),this.update()},s.update=function update(){var i=this;if(this.el_&&this.bar){var s=this.getProgress();return s===this.progress_||(this.progress_=s,this.requestNamedAnimationFrame("Slider#update",(function(){var _=i.vertical()?"height":"width";i.bar.el().style[_]=(100*s).toFixed(2)+"%"}))),s}},s.getProgress=function getProgress(){return Number(jr(this.getPercent(),0,1).toFixed(4))},s.calculateDistance=function calculateDistance(i){var s=getPointerPosition(this.el_,i);return this.vertical()?s.y:s.x},s.handleKeyDown=function handleKeyDown(s){$().isEventKey(s,"Left")||$().isEventKey(s,"Down")?(s.preventDefault(),s.stopPropagation(),this.stepBack()):$().isEventKey(s,"Right")||$().isEventKey(s,"Up")?(s.preventDefault(),s.stopPropagation(),this.stepForward()):i.prototype.handleKeyDown.call(this,s)},s.handleClick=function handleClick(i){i.stopPropagation(),i.preventDefault()},s.vertical=function vertical(i){if(void 0===i)return this.vertical_||!1;this.vertical_=!!i,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},Slider}(Qt);Qt.registerComponent("Slider",Br);var $r=function percentify(i,s){return jr(i/s*100,0,100).toFixed(2)+"%"},Ur=function(i){function LoadProgressBar(s,_){var T;return(T=i.call(this,s,_)||this).partEls_=[],T.on(s,"progress",T.update),T}_inheritsLoose(LoadProgressBar,i);var s=LoadProgressBar.prototype;return s.createEl=function createEl$1(){var s=i.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),_=createEl("span",{className:"vjs-control-text"}),T=createEl("span",{textContent:this.localize("Loaded")}),S=P().createTextNode(": ");return this.percentageEl_=createEl("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),s.appendChild(_),_.appendChild(T),_.appendChild(S),_.appendChild(this.percentageEl_),s},s.dispose=function dispose(){this.partEls_=null,this.percentageEl_=null,i.prototype.dispose.call(this)},s.update=function update(i){var s=this;this.requestNamedAnimationFrame("LoadProgressBar#update",(function(){var i=s.player_.liveTracker,_=s.player_.buffered(),T=i&&i.isLive()?i.seekableEnd():s.player_.duration(),S=s.player_.bufferedEnd(),C=s.partEls_,P=$r(S,T);s.percent_!==P&&(s.el_.style.width=P,textContent(s.percentageEl_,P),s.percent_=P);for(var O=0;O<_.length;O++){var M=_.start(O),R=_.end(O),D=C[O];D||(D=s.el_.appendChild(createEl()),C[O]=D),D.dataset.start===M&&D.dataset.end===R||(D.dataset.start=M,D.dataset.end=R,D.style.left=$r(M,S),D.style.width=$r(R-M,S))}for(var j=C.length;j>_.length;j--)s.el_.removeChild(C[j-1]);C.length=_.length}))},LoadProgressBar}(Qt);Qt.registerComponent("LoadProgressBar",Ur);var Fr=function(i){function TimeTooltip(s,_){var T;return(T=i.call(this,s,_)||this).update=Lt(It((0,O.Z)(T),T.update),zt),T}_inheritsLoose(TimeTooltip,i);var s=TimeTooltip.prototype;return s.createEl=function createEl(){return i.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},s.update=function update(i,s,_){var T=findPosition(this.el_),S=getBoundingClientRect(this.player_.el()),C=i.width*s;if(S&&T){var P=i.left-S.left+C,O=i.width-C+(S.right-i.right),M=T.width/2;P<M?M+=M-P:O<M&&(M=O),M<0?M=0:M>T.width&&(M=T.width),M=Math.round(M),this.el_.style.right="-"+M+"px",this.write(_)}},s.write=function write(i){textContent(this.el_,i)},s.updateTime=function updateTime(i,s,_,T){var S=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",(function(){var C,P=S.player_.duration();if(S.player_.liveTracker&&S.player_.liveTracker.isLive()){var O=S.player_.liveTracker.liveWindow(),M=O-s*O;C=(M<1?"":"-")+formatTime(M,O)}else C=formatTime(_,P);S.update(i,s,C),T&&T()}))},TimeTooltip}(Qt);Qt.registerComponent("TimeTooltip",Fr);var Hr=function(i){function PlayProgressBar(s,_){var T;return(T=i.call(this,s,_)||this).update=Lt(It((0,O.Z)(T),T.update),zt),T}_inheritsLoose(PlayProgressBar,i);var s=PlayProgressBar.prototype;return s.createEl=function createEl(){return i.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},s.update=function update(i,s){var _=this.getChild("timeTooltip");if(_){var T=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();_.updateTime(i,s,T)}},PlayProgressBar}(Qt);Hr.prototype.options_={children:[]},_n||sn||Hr.prototype.options_.children.push("timeTooltip"),Qt.registerComponent("PlayProgressBar",Hr);var qr=function(i){function MouseTimeDisplay(s,_){var T;return(T=i.call(this,s,_)||this).update=Lt(It((0,O.Z)(T),T.update),zt),T}_inheritsLoose(MouseTimeDisplay,i);var s=MouseTimeDisplay.prototype;return s.createEl=function createEl(){return i.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},s.update=function update(i,s){var _=this,T=s*this.player_.duration();this.getChild("timeTooltip").updateTime(i,s,T,(function(){_.el_.style.left=i.width*s+"px"}))},MouseTimeDisplay}(Qt);qr.prototype.options_={children:["timeTooltip"]},Qt.registerComponent("MouseTimeDisplay",qr);var Vr=function(i){function SeekBar(s,_){var T;return(T=i.call(this,s,_)||this).setEventHandlers_(),T}_inheritsLoose(SeekBar,i);var s=SeekBar.prototype;return s.setEventHandlers_=function setEventHandlers_(){this.update_=It(this,this.update),this.update=Lt(this.update_,zt),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.on(this.player_,["playing"],this.enableInterval_),this.on(this.player_,["ended","pause","waiting"],this.disableInterval_),"hidden"in P()&&"visibilityState"in P()&&this.on(P(),"visibilitychange",this.toggleVisibility_)},s.toggleVisibility_=function toggleVisibility_(i){P().hidden?this.disableInterval_(i):(this.enableInterval_(),this.update())},s.enableInterval_=function enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,zt))},s.disableInterval_=function disableInterval_(i){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&i&&"ended"!==i.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},s.createEl=function createEl(){return i.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},s.update=function update(s){var _=this,T=i.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",(function(){var i=_.player_.ended()?_.player_.duration():_.getCurrentTime_(),s=_.player_.liveTracker,S=_.player_.duration();s&&s.isLive()&&(S=_.player_.liveTracker.liveCurrentTime()),_.percent_!==T&&(_.el_.setAttribute("aria-valuenow",(100*T).toFixed(2)),_.percent_=T),_.currentTime_===i&&_.duration_===S||(_.el_.setAttribute("aria-valuetext",_.localize("progress bar timing: currentTime={1} duration={2}",[formatTime(i,S),formatTime(S,S)],"{1} of {2}")),_.currentTime_=i,_.duration_=S),_.bar&&_.bar.update(getBoundingClientRect(_.el()),_.getProgress())})),T},s.getCurrentTime_=function getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},s.getPercent=function getPercent(){var i,s=this.getCurrentTime_(),_=this.player_.liveTracker;return _&&_.isLive()?(i=(s-_.seekableStart())/_.liveWindow(),_.atLiveEdge()&&(i=1)):i=s/this.player_.duration(),i},s.handleMouseDown=function handleMouseDown(s){isSingleLeftClick(s)&&(s.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),i.prototype.handleMouseDown.call(this,s))},s.handleMouseMove=function handleMouseMove(i){if(isSingleLeftClick(i)){var s,_=this.calculateDistance(i),T=this.player_.liveTracker;if(T&&T.isLive()){if(_>=.99)return void T.seekToLiveEdge();var S=T.seekableStart(),C=T.liveCurrentTime();if((s=S+_*T.liveWindow())>=C&&(s=C),s<=S&&(s=S+.1),s===1/0)return}else(s=_*this.player_.duration())===this.player_.duration()&&(s-=.1);this.player_.currentTime(s)}},s.enable=function enable(){i.prototype.enable.call(this);var s=this.getChild("mouseTimeDisplay");s&&s.show()},s.disable=function disable(){i.prototype.disable.call(this);var s=this.getChild("mouseTimeDisplay");s&&s.hide()},s.handleMouseUp=function handleMouseUp(s){i.prototype.handleMouseUp.call(this,s),s&&s.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?silencePromise(this.player_.play()):this.update_()},s.stepForward=function stepForward(){this.player_.currentTime(this.player_.currentTime()+5)},s.stepBack=function stepBack(){this.player_.currentTime(this.player_.currentTime()-5)},s.handleAction=function handleAction(i){this.player_.paused()?this.player_.play():this.player_.pause()},s.handleKeyDown=function handleKeyDown(s){if($().isEventKey(s,"Space")||$().isEventKey(s,"Enter"))s.preventDefault(),s.stopPropagation(),this.handleAction(s);else if($().isEventKey(s,"Home"))s.preventDefault(),s.stopPropagation(),this.player_.currentTime(0);else if($().isEventKey(s,"End"))s.preventDefault(),s.stopPropagation(),this.player_.currentTime(this.player_.duration());else if(/^[0-9]$/.test($()(s))){s.preventDefault(),s.stopPropagation();var _=10*($().codes[$()(s)]-$().codes[0])/100;this.player_.currentTime(this.player_.duration()*_)}else $().isEventKey(s,"PgDn")?(s.preventDefault(),s.stopPropagation(),this.player_.currentTime(this.player_.currentTime()-60)):$().isEventKey(s,"PgUp")?(s.preventDefault(),s.stopPropagation(),this.player_.currentTime(this.player_.currentTime()+60)):i.prototype.handleKeyDown.call(this,s)},s.dispose=function dispose(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableInterval_),this.off(this.player_,["ended","pause","waiting"],this.disableInterval_),"hidden"in P()&&"visibilityState"in P()&&this.off(P(),"visibilitychange",this.toggleVisibility_),i.prototype.dispose.call(this)},SeekBar}(Br);Vr.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},_n||sn||Vr.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),Qt.registerComponent("SeekBar",Vr);var Gr=function(i){function ProgressControl(s,_){var T;return(T=i.call(this,s,_)||this).handleMouseMove=Lt(It((0,O.Z)(T),T.handleMouseMove),zt),T.throttledHandleMouseSeek=Lt(It((0,O.Z)(T),T.handleMouseSeek),zt),T.enable(),T}_inheritsLoose(ProgressControl,i);var s=ProgressControl.prototype;return s.createEl=function createEl(){return i.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},s.handleMouseMove=function handleMouseMove(i){var s=this.getChild("seekBar");if(s){var _=s.getChild("playProgressBar"),T=s.getChild("mouseTimeDisplay");if(_||T){var S=s.el(),C=findPosition(S),P=getPointerPosition(S,i).x;P=jr(P,0,1),T&&T.update(C,P),_&&_.update(C,s.getProgress())}}},s.handleMouseSeek=function handleMouseSeek(i){var s=this.getChild("seekBar");s&&s.handleMouseMove(i)},s.enabled=function enabled(){return this.enabled_},s.disable=function disable(){this.children().forEach((function(i){return i.disable&&i.disable()})),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},s.enable=function enable(){this.children().forEach((function(i){return i.enable&&i.enable()})),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},s.handleMouseDown=function handleMouseDown(i){var s=this.el_.ownerDocument,_=this.getChild("seekBar");_&&_.handleMouseDown(i),this.on(s,"mousemove",this.throttledHandleMouseSeek),this.on(s,"touchmove",this.throttledHandleMouseSeek),this.on(s,"mouseup",this.handleMouseUp),this.on(s,"touchend",this.handleMouseUp)},s.handleMouseUp=function handleMouseUp(i){var s=this.el_.ownerDocument,_=this.getChild("seekBar");_&&_.handleMouseUp(i),this.off(s,"mousemove",this.throttledHandleMouseSeek),this.off(s,"touchmove",this.throttledHandleMouseSeek),this.off(s,"mouseup",this.handleMouseUp),this.off(s,"touchend",this.handleMouseUp)},ProgressControl}(Qt);Gr.prototype.options_={children:["seekBar"]},Qt.registerComponent("ProgressControl",Gr);var Zr=function(i){function PictureInPictureToggle(s,_){var T;return(T=i.call(this,s,_)||this).on(s,["enterpictureinpicture","leavepictureinpicture"],T.handlePictureInPictureChange),T.on(s,["disablepictureinpicturechanged","loadedmetadata"],T.handlePictureInPictureEnabledChange),T.disable(),T}_inheritsLoose(PictureInPictureToggle,i);var s=PictureInPictureToggle.prototype;return s.buildCSSClass=function buildCSSClass(){return"vjs-picture-in-picture-control "+i.prototype.buildCSSClass.call(this)},s.handlePictureInPictureEnabledChange=function handlePictureInPictureEnabledChange(){P().pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},s.handlePictureInPictureChange=function handlePictureInPictureChange(i){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},s.handleClick=function handleClick(i){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},PictureInPictureToggle}(Cr);Zr.prototype.controlText_="Picture-in-Picture",Qt.registerComponent("PictureInPictureToggle",Zr);var Wr=function(i){function FullscreenToggle(s,_){var T;return(T=i.call(this,s,_)||this).on(s,"fullscreenchange",T.handleFullscreenChange),!1===P()[s.fsApi_.fullscreenEnabled]&&T.disable(),T}_inheritsLoose(FullscreenToggle,i);var s=FullscreenToggle.prototype;return s.buildCSSClass=function buildCSSClass(){return"vjs-fullscreen-control "+i.prototype.buildCSSClass.call(this)},s.handleFullscreenChange=function handleFullscreenChange(i){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},s.handleClick=function handleClick(i){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},FullscreenToggle}(Cr);Wr.prototype.controlText_="Fullscreen",Qt.registerComponent("FullscreenToggle",Wr);var Kr=function(i){function VolumeLevel(){return i.apply(this,arguments)||this}return _inheritsLoose(VolumeLevel,i),VolumeLevel.prototype.createEl=function createEl(){return i.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},VolumeLevel}(Qt);Qt.registerComponent("VolumeLevel",Kr);var Yr=function(i){function VolumeBar(s,_){var T;return(T=i.call(this,s,_)||this).on("slideractive",T.updateLastVolume_),T.on(s,"volumechange",T.updateARIAAttributes),s.ready((function(){return T.updateARIAAttributes()})),T}_inheritsLoose(VolumeBar,i);var s=VolumeBar.prototype;return s.createEl=function createEl(){return i.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},s.handleMouseDown=function handleMouseDown(s){isSingleLeftClick(s)&&i.prototype.handleMouseDown.call(this,s)},s.handleMouseMove=function handleMouseMove(i){isSingleLeftClick(i)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(i)))},s.checkMuted=function checkMuted(){this.player_.muted()&&this.player_.muted(!1)},s.getPercent=function getPercent(){return this.player_.muted()?0:this.player_.volume()},s.stepForward=function stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},s.stepBack=function stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},s.updateARIAAttributes=function updateARIAAttributes(i){var s=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",s),this.el_.setAttribute("aria-valuetext",s+"%")},s.volumeAsPercentage_=function volumeAsPercentage_(){return Math.round(100*this.player_.volume())},s.updateLastVolume_=function updateLastVolume_(){var i=this,s=this.player_.volume();this.one("sliderinactive",(function(){0===i.player_.volume()&&i.player_.lastVolume_(s)}))},VolumeBar}(Br);Yr.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},Yr.prototype.playerEvent="volumechange",Qt.registerComponent("VolumeBar",Yr);var Xr=function(i){function VolumeControl(s,_){var T;return void 0===_&&(_={}),_.vertical=_.vertical||!1,(void 0===_.volumeBar||isPlain(_.volumeBar))&&(_.volumeBar=_.volumeBar||{},_.volumeBar.vertical=_.vertical),T=i.call(this,s,_)||this,function checkVolumeSupport(i,s){s.tech_&&!s.tech_.featuresVolumeControl&&i.addClass("vjs-hidden"),i.on(s,"loadstart",(function(){s.tech_.featuresVolumeControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")}))}((0,O.Z)(T),s),T.throttledHandleMouseMove=Lt(It((0,O.Z)(T),T.handleMouseMove),zt),T.on("mousedown",T.handleMouseDown),T.on("touchstart",T.handleMouseDown),T.on(T.volumeBar,["focus","slideractive"],(function(){T.volumeBar.addClass("vjs-slider-active"),T.addClass("vjs-slider-active"),T.trigger("slideractive")})),T.on(T.volumeBar,["blur","sliderinactive"],(function(){T.volumeBar.removeClass("vjs-slider-active"),T.removeClass("vjs-slider-active"),T.trigger("sliderinactive")})),T}_inheritsLoose(VolumeControl,i);var s=VolumeControl.prototype;return s.createEl=function createEl(){var s="vjs-volume-horizontal";return this.options_.vertical&&(s="vjs-volume-vertical"),i.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+s})},s.handleMouseDown=function handleMouseDown(i){var s=this.el_.ownerDocument;this.on(s,"mousemove",this.throttledHandleMouseMove),this.on(s,"touchmove",this.throttledHandleMouseMove),this.on(s,"mouseup",this.handleMouseUp),this.on(s,"touchend",this.handleMouseUp)},s.handleMouseUp=function handleMouseUp(i){var s=this.el_.ownerDocument;this.off(s,"mousemove",this.throttledHandleMouseMove),this.off(s,"touchmove",this.throttledHandleMouseMove),this.off(s,"mouseup",this.handleMouseUp),this.off(s,"touchend",this.handleMouseUp)},s.handleMouseMove=function handleMouseMove(i){this.volumeBar.handleMouseMove(i)},VolumeControl}(Qt);Xr.prototype.options_={children:["volumeBar"]},Qt.registerComponent("VolumeControl",Xr);var Qr=function(i){function MuteToggle(s,_){var T;return T=i.call(this,s,_)||this,function checkMuteSupport(i,s){s.tech_&&!s.tech_.featuresMuteControl&&i.addClass("vjs-hidden"),i.on(s,"loadstart",(function(){s.tech_.featuresMuteControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")}))}((0,O.Z)(T),s),T.on(s,["loadstart","volumechange"],T.update),T}_inheritsLoose(MuteToggle,i);var s=MuteToggle.prototype;return s.buildCSSClass=function buildCSSClass(){return"vjs-mute-control "+i.prototype.buildCSSClass.call(this)},s.handleClick=function handleClick(i){var s=this.player_.volume(),_=this.player_.lastVolume_();if(0===s){var T=_<.1?.1:_;this.player_.volume(T),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},s.update=function update(i){this.updateIcon_(),this.updateControlText_()},s.updateIcon_=function updateIcon_(){var i=this.player_.volume(),s=3;_n&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===i||this.player_.muted()?s=0:i<.33?s=1:i<.67&&(s=2);for(var _=0;_<4;_++)removeClass(this.el_,"vjs-vol-"+_);addClass(this.el_,"vjs-vol-"+s)},s.updateControlText_=function updateControlText_(){var i=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==i&&this.controlText(i)},MuteToggle}(Cr);Qr.prototype.controlText_="Mute",Qt.registerComponent("MuteToggle",Qr);var Jr=function(i){function VolumePanel(s,_){var T;return void 0===_&&(_={}),void 0!==_.inline?_.inline=_.inline:_.inline=!0,(void 0===_.volumeControl||isPlain(_.volumeControl))&&(_.volumeControl=_.volumeControl||{},_.volumeControl.vertical=!_.inline),(T=i.call(this,s,_)||this).on(s,["loadstart"],T.volumePanelState_),T.on(T.muteToggle,"keyup",T.handleKeyPress),T.on(T.volumeControl,"keyup",T.handleVolumeControlKeyUp),T.on("keydown",T.handleKeyPress),T.on("mouseover",T.handleMouseOver),T.on("mouseout",T.handleMouseOut),T.on(T.volumeControl,["slideractive"],T.sliderActive_),T.on(T.volumeControl,["sliderinactive"],T.sliderInactive_),T}_inheritsLoose(VolumePanel,i);var s=VolumePanel.prototype;return s.sliderActive_=function sliderActive_(){this.addClass("vjs-slider-active")},s.sliderInactive_=function sliderInactive_(){this.removeClass("vjs-slider-active")},s.volumePanelState_=function volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},s.createEl=function createEl(){var s="vjs-volume-panel-horizontal";return this.options_.inline||(s="vjs-volume-panel-vertical"),i.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+s})},s.dispose=function dispose(){this.handleMouseOut(),i.prototype.dispose.call(this)},s.handleVolumeControlKeyUp=function handleVolumeControlKeyUp(i){$().isEventKey(i,"Esc")&&this.muteToggle.focus()},s.handleMouseOver=function handleMouseOver(i){this.addClass("vjs-hover"),on(P(),"keyup",It(this,this.handleKeyPress))},s.handleMouseOut=function handleMouseOut(i){this.removeClass("vjs-hover"),off(P(),"keyup",It(this,this.handleKeyPress))},s.handleKeyPress=function handleKeyPress(i){$().isEventKey(i,"Esc")&&this.handleMouseOut()},VolumePanel}(Qt);Jr.prototype.options_={children:["muteToggle","volumeControl"]},Qt.registerComponent("VolumePanel",Jr);var ei=function(i){function Menu(s,_){var T;return T=i.call(this,s,_)||this,_&&(T.menuButton_=_.menuButton),T.focusedChild_=-1,T.on("keydown",T.handleKeyDown),T.boundHandleBlur_=It((0,O.Z)(T),T.handleBlur),T.boundHandleTapClick_=It((0,O.Z)(T),T.handleTapClick),T}_inheritsLoose(Menu,i);var s=Menu.prototype;return s.addEventListenerForItem=function addEventListenerForItem(i){i instanceof Qt&&(this.on(i,"blur",this.boundHandleBlur_),this.on(i,["tap","click"],this.boundHandleTapClick_))},s.removeEventListenerForItem=function removeEventListenerForItem(i){i instanceof Qt&&(this.off(i,"blur",this.boundHandleBlur_),this.off(i,["tap","click"],this.boundHandleTapClick_))},s.removeChild=function removeChild(s){"string"==typeof s&&(s=this.getChild(s)),this.removeEventListenerForItem(s),i.prototype.removeChild.call(this,s)},s.addItem=function addItem(i){var s=this.addChild(i);s&&this.addEventListenerForItem(s)},s.createEl=function createEl$1(){var s=this.options_.contentElType||"ul";this.contentEl_=createEl(s,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var _=i.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return _.appendChild(this.contentEl_),on(_,"click",(function(i){i.preventDefault(),i.stopImmediatePropagation()})),_},s.dispose=function dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,i.prototype.dispose.call(this)},s.handleBlur=function handleBlur(i){var s=i.relatedTarget||P().activeElement;if(!this.children().some((function(i){return i.el()===s}))){var _=this.menuButton_;_&&_.buttonPressed_&&s!==_.el().firstChild&&_.unpressButton()}},s.handleTapClick=function handleTapClick(i){if(this.menuButton_){this.menuButton_.unpressButton();var s=this.children();if(!Array.isArray(s))return;var _=s.filter((function(s){return s.el()===i.target}))[0];if(!_)return;"CaptionSettingsMenuItem"!==_.name()&&this.menuButton_.focus()}},s.handleKeyDown=function handleKeyDown(i){$().isEventKey(i,"Left")||$().isEventKey(i,"Down")?(i.preventDefault(),i.stopPropagation(),this.stepForward()):($().isEventKey(i,"Right")||$().isEventKey(i,"Up"))&&(i.preventDefault(),i.stopPropagation(),this.stepBack())},s.stepForward=function stepForward(){var i=0;void 0!==this.focusedChild_&&(i=this.focusedChild_+1),this.focus(i)},s.stepBack=function stepBack(){var i=0;void 0!==this.focusedChild_&&(i=this.focusedChild_-1),this.focus(i)},s.focus=function focus(i){void 0===i&&(i=0);var s=this.children().slice();s.length&&s[0].hasClass("vjs-menu-title")&&s.shift(),s.length>0&&(i<0?i=0:i>=s.length&&(i=s.length-1),this.focusedChild_=i,s[i].el_.focus())},Menu}(Qt);Qt.registerComponent("Menu",ei);var ti=function(i){function MenuButton(s,_){var T;void 0===_&&(_={}),(T=i.call(this,s,_)||this).menuButton_=new Cr(s,_),T.menuButton_.controlText(T.controlText_),T.menuButton_.el_.setAttribute("aria-haspopup","true");var S=Cr.prototype.buildCSSClass();return T.menuButton_.el_.className=T.buildCSSClass()+" "+S,T.menuButton_.removeClass("vjs-control"),T.addChild(T.menuButton_),T.update(),T.enabled_=!0,T.on(T.menuButton_,"tap",T.handleClick),T.on(T.menuButton_,"click",T.handleClick),T.on(T.menuButton_,"keydown",T.handleKeyDown),T.on(T.menuButton_,"mouseenter",(function(){T.addClass("vjs-hover"),T.menu.show(),on(P(),"keyup",It((0,O.Z)(T),T.handleMenuKeyUp))})),T.on("mouseleave",T.handleMouseLeave),T.on("keydown",T.handleSubmenuKeyDown),T}_inheritsLoose(MenuButton,i);var s=MenuButton.prototype;return s.update=function update(){var i=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=i,this.addChild(i),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},s.createMenu=function createMenu(){var i=new ei(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var s=createEl("li",{className:"vjs-menu-title",innerHTML:Zt(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;var _=new Qt(this.player_,{el:s});i.addItem(_)}if(this.items=this.createItems(),this.items)for(var T=0;T<this.items.length;T++)i.addItem(this.items[T]);return i},s.createItems=function createItems(){},s.createEl=function createEl(){return i.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},s.buildWrapperCSSClass=function buildWrapperCSSClass(){var s="vjs-menu-button";return!0===this.options_.inline?s+="-inline":s+="-popup","vjs-menu-button "+s+" "+Cr.prototype.buildCSSClass()+" "+i.prototype.buildCSSClass.call(this)},s.buildCSSClass=function buildCSSClass(){var s="vjs-menu-button";return!0===this.options_.inline?s+="-inline":s+="-popup","vjs-menu-button "+s+" "+i.prototype.buildCSSClass.call(this)},s.controlText=function controlText(i,s){return void 0===s&&(s=this.menuButton_.el()),this.menuButton_.controlText(i,s)},s.dispose=function dispose(){this.handleMouseLeave(),i.prototype.dispose.call(this)},s.handleClick=function handleClick(i){this.buttonPressed_?this.unpressButton():this.pressButton()},s.handleMouseLeave=function handleMouseLeave(i){this.removeClass("vjs-hover"),off(P(),"keyup",It(this,this.handleMenuKeyUp))},s.focus=function focus(){this.menuButton_.focus()},s.blur=function blur(){this.menuButton_.blur()},s.handleKeyDown=function handleKeyDown(i){$().isEventKey(i,"Esc")||$().isEventKey(i,"Tab")?(this.buttonPressed_&&this.unpressButton(),$().isEventKey(i,"Tab")||(i.preventDefault(),this.menuButton_.focus())):($().isEventKey(i,"Up")||$().isEventKey(i,"Down"))&&(this.buttonPressed_||(i.preventDefault(),this.pressButton()))},s.handleMenuKeyUp=function handleMenuKeyUp(i){($().isEventKey(i,"Esc")||$().isEventKey(i,"Tab"))&&this.removeClass("vjs-hover")},s.handleSubmenuKeyPress=function handleSubmenuKeyPress(i){this.handleSubmenuKeyDown(i)},s.handleSubmenuKeyDown=function handleSubmenuKeyDown(i){($().isEventKey(i,"Esc")||$().isEventKey(i,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),$().isEventKey(i,"Tab")||(i.preventDefault(),this.menuButton_.focus()))},s.pressButton=function pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),_n&&isInFrame())return;this.menu.focus()}},s.unpressButton=function unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},s.disable=function disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},s.enable=function enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},MenuButton}(Qt);Qt.registerComponent("MenuButton",ti);var ni=function(i){function TrackButton(s,_){var T,S=_.tracks;if((T=i.call(this,s,_)||this).items.length<=1&&T.hide(),!S)return(0,O.Z)(T);var C=It((0,O.Z)(T),T.update);return S.addEventListener("removetrack",C),S.addEventListener("addtrack",C),S.addEventListener("labelchange",C),T.player_.on("ready",C),T.player_.on("dispose",(function(){S.removeEventListener("removetrack",C),S.removeEventListener("addtrack",C),S.removeEventListener("labelchange",C)})),T}return _inheritsLoose(TrackButton,i),TrackButton}(ti);Qt.registerComponent("TrackButton",ni);var ri=["Tab","Esc","Up","Down","Right","Left"],ii=function(i){function MenuItem(s,_){var T;return(T=i.call(this,s,_)||this).selectable=_.selectable,T.isSelected_=_.selected||!1,T.multiSelectable=_.multiSelectable,T.selected(T.isSelected_),T.selectable?T.multiSelectable?T.el_.setAttribute("role","menuitemcheckbox"):T.el_.setAttribute("role","menuitemradio"):T.el_.setAttribute("role","menuitem"),T}_inheritsLoose(MenuItem,i);var s=MenuItem.prototype;return s.createEl=function createEl(s,_,T){return this.nonIconControl=!0,i.prototype.createEl.call(this,"li",video_es_assign({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},_),T)},s.handleKeyDown=function handleKeyDown(s){ri.some((function(i){return $().isEventKey(s,i)}))||i.prototype.handleKeyDown.call(this,s)},s.handleClick=function handleClick(i){this.selected(!0)},s.selected=function selected(i){this.selectable&&(i?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},MenuItem}(_r);Qt.registerComponent("MenuItem",ii);var ai=function(i){function TextTrackMenuItem(s,_){var T,C=_.track,M=s.textTracks();_.label=C.label||C.language||"Unknown",_.selected="showing"===C.mode,(T=i.call(this,s,_)||this).track=C,T.kinds=(_.kinds||[_.kind||T.track.kind]).filter(Boolean);var R,D=function changeHandler(){for(var i=arguments.length,s=new Array(i),_=0;_<i;_++)s[_]=arguments[_];T.handleTracksChange.apply((0,O.Z)(T),s)},j=function selectedLanguageChangeHandler(){for(var i=arguments.length,s=new Array(i),_=0;_<i;_++)s[_]=arguments[_];T.handleSelectedLanguageChange.apply((0,O.Z)(T),s)};(s.on(["loadstart","texttrackchange"],D),M.addEventListener("change",D),M.addEventListener("selectedlanguagechange",j),T.on("dispose",(function(){s.off(["loadstart","texttrackchange"],D),M.removeEventListener("change",D),M.removeEventListener("selectedlanguagechange",j)})),void 0===M.onchange)&&T.on(["tap","click"],(function(){if("object"!=typeof S().Event)try{R=new(S().Event)("change")}catch(i){}R||(R=P().createEvent("Event")).initEvent("change",!0,!0),M.dispatchEvent(R)}));return T.handleTracksChange(),T}_inheritsLoose(TextTrackMenuItem,i);var s=TextTrackMenuItem.prototype;return s.handleClick=function handleClick(s){var _=this.track,T=this.player_.textTracks();if(i.prototype.handleClick.call(this,s),T)for(var S=0;S<T.length;S++){var C=T[S];-1!==this.kinds.indexOf(C.kind)&&(C===_?"showing"!==C.mode&&(C.mode="showing"):"disabled"!==C.mode&&(C.mode="disabled"))}},s.handleTracksChange=function handleTracksChange(i){var s="showing"===this.track.mode;s!==this.isSelected_&&this.selected(s)},s.handleSelectedLanguageChange=function handleSelectedLanguageChange(i){if("showing"===this.track.mode){var s=this.player_.cache_.selectedLanguage;if(s&&s.enabled&&s.language===this.track.language&&s.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},s.dispose=function dispose(){this.track=null,i.prototype.dispose.call(this)},TextTrackMenuItem}(ii);Qt.registerComponent("TextTrackMenuItem",ai);var si=function(i){function OffTextTrackMenuItem(s,_){return _.track={player:s,kind:_.kind,kinds:_.kinds,default:!1,mode:"disabled"},_.kinds||(_.kinds=[_.kind]),_.label?_.track.label=_.label:_.track.label=_.kinds.join(" and ")+" off",_.selectable=!0,_.multiSelectable=!1,i.call(this,s,_)||this}_inheritsLoose(OffTextTrackMenuItem,i);var s=OffTextTrackMenuItem.prototype;return s.handleTracksChange=function handleTracksChange(i){for(var s=this.player().textTracks(),_=!0,T=0,S=s.length;T<S;T++){var C=s[T];if(this.options_.kinds.indexOf(C.kind)>-1&&"showing"===C.mode){_=!1;break}}_!==this.isSelected_&&this.selected(_)},s.handleSelectedLanguageChange=function handleSelectedLanguageChange(i){for(var s=this.player().textTracks(),_=!0,T=0,S=s.length;T<S;T++){var C=s[T];if(["captions","descriptions","subtitles"].indexOf(C.kind)>-1&&"showing"===C.mode){_=!1;break}}_&&(this.player_.cache_.selectedLanguage={enabled:!1})},OffTextTrackMenuItem}(ai);Qt.registerComponent("OffTextTrackMenuItem",si);var oi=function(i){function TextTrackButton(s,_){return void 0===_&&(_={}),_.tracks=s.textTracks(),i.call(this,s,_)||this}return _inheritsLoose(TextTrackButton,i),TextTrackButton.prototype.createItems=function createItems(i,s){var _;void 0===i&&(i=[]),void 0===s&&(s=ai),this.label_&&(_=this.label_+" off"),i.push(new si(this.player_,{kinds:this.kinds_,kind:this.kind_,label:_})),this.hideThreshold_+=1;var T=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var S=0;S<T.length;S++){var C=T[S];if(this.kinds_.indexOf(C.kind)>-1){var P=new s(this.player_,{track:C,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});P.addClass("vjs-"+C.kind+"-menu-item"),i.push(P)}}return i},TextTrackButton}(ni);Qt.registerComponent("TextTrackButton",oi);var li=function(i){function ChaptersTrackMenuItem(s,_){var T,S=_.track,C=_.cue,P=s.currentTime();return _.selectable=!0,_.multiSelectable=!1,_.label=C.text,_.selected=C.startTime<=P&&P<C.endTime,(T=i.call(this,s,_)||this).track=S,T.cue=C,S.addEventListener("cuechange",It((0,O.Z)(T),T.update)),T}_inheritsLoose(ChaptersTrackMenuItem,i);var s=ChaptersTrackMenuItem.prototype;return s.handleClick=function handleClick(s){i.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},s.update=function update(i){var s=this.cue,_=this.player_.currentTime();this.selected(s.startTime<=_&&_<s.endTime)},ChaptersTrackMenuItem}(ii);Qt.registerComponent("ChaptersTrackMenuItem",li);var ci=function(i){function ChaptersButton(s,_,T){return i.call(this,s,_,T)||this}_inheritsLoose(ChaptersButton,i);var s=ChaptersButton.prototype;return s.buildCSSClass=function buildCSSClass(){return"vjs-chapters-button "+i.prototype.buildCSSClass.call(this)},s.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-chapters-button "+i.prototype.buildWrapperCSSClass.call(this)},s.update=function update(s){this.track_&&(!s||"addtrack"!==s.type&&"removetrack"!==s.type)||this.setTrack(this.findChaptersTrack()),i.prototype.update.call(this)},s.setTrack=function setTrack(i){if(this.track_!==i){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var s=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);s&&s.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=i,this.track_){this.track_.mode="hidden";var _=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);_&&_.addEventListener("load",this.updateHandler_)}}},s.findChaptersTrack=function findChaptersTrack(){for(var i=this.player_.textTracks()||[],s=i.length-1;s>=0;s--){var _=i[s];if(_.kind===this.kind_)return _}},s.getMenuCaption=function getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(Zt(this.kind_))},s.createMenu=function createMenu(){return this.options_.title=this.getMenuCaption(),i.prototype.createMenu.call(this)},s.createItems=function createItems(){var i=[];if(!this.track_)return i;var s=this.track_.cues;if(!s)return i;for(var _=0,T=s.length;_<T;_++){var S=s[_],C=new li(this.player_,{track:this.track_,cue:S});i.push(C)}return i},ChaptersButton}(oi);ci.prototype.kind_="chapters",ci.prototype.controlText_="Chapters",Qt.registerComponent("ChaptersButton",ci);var ui=function(i){function DescriptionsButton(s,_,T){var S;S=i.call(this,s,_,T)||this;var C=s.textTracks(),P=It((0,O.Z)(S),S.handleTracksChange);return C.addEventListener("change",P),S.on("dispose",(function(){C.removeEventListener("change",P)})),S}_inheritsLoose(DescriptionsButton,i);var s=DescriptionsButton.prototype;return s.handleTracksChange=function handleTracksChange(i){for(var s=this.player().textTracks(),_=!1,T=0,S=s.length;T<S;T++){var C=s[T];if(C.kind!==this.kind_&&"showing"===C.mode){_=!0;break}}_?this.disable():this.enable()},s.buildCSSClass=function buildCSSClass(){return"vjs-descriptions-button "+i.prototype.buildCSSClass.call(this)},s.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-descriptions-button "+i.prototype.buildWrapperCSSClass.call(this)},DescriptionsButton}(oi);ui.prototype.kind_="descriptions",ui.prototype.controlText_="Descriptions",Qt.registerComponent("DescriptionsButton",ui);var di=function(i){function SubtitlesButton(s,_,T){return i.call(this,s,_,T)||this}_inheritsLoose(SubtitlesButton,i);var s=SubtitlesButton.prototype;return s.buildCSSClass=function buildCSSClass(){return"vjs-subtitles-button "+i.prototype.buildCSSClass.call(this)},s.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-subtitles-button "+i.prototype.buildWrapperCSSClass.call(this)},SubtitlesButton}(oi);di.prototype.kind_="subtitles",di.prototype.controlText_="Subtitles",Qt.registerComponent("SubtitlesButton",di);var hi=function(i){function CaptionSettingsMenuItem(s,_){var T;return _.track={player:s,kind:_.kind,label:_.kind+" settings",selectable:!1,default:!1,mode:"disabled"},_.selectable=!1,_.name="CaptionSettingsMenuItem",(T=i.call(this,s,_)||this).addClass("vjs-texttrack-settings"),T.controlText(", opens "+_.kind+" settings dialog"),T}return _inheritsLoose(CaptionSettingsMenuItem,i),CaptionSettingsMenuItem.prototype.handleClick=function handleClick(i){this.player().getChild("textTrackSettings").open()},CaptionSettingsMenuItem}(ai);Qt.registerComponent("CaptionSettingsMenuItem",hi);var pi=function(i){function CaptionsButton(s,_,T){return i.call(this,s,_,T)||this}_inheritsLoose(CaptionsButton,i);var s=CaptionsButton.prototype;return s.buildCSSClass=function buildCSSClass(){return"vjs-captions-button "+i.prototype.buildCSSClass.call(this)},s.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-captions-button "+i.prototype.buildWrapperCSSClass.call(this)},s.createItems=function createItems(){var s=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(s.push(new hi(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),i.prototype.createItems.call(this,s)},CaptionsButton}(oi);pi.prototype.kind_="captions",pi.prototype.controlText_="Captions",Qt.registerComponent("CaptionsButton",pi);var mi=function(i){function SubsCapsMenuItem(){return i.apply(this,arguments)||this}return _inheritsLoose(SubsCapsMenuItem,i),SubsCapsMenuItem.prototype.createEl=function createEl(s,_,T){var S='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"captions"===this.options_.track.kind&&(S+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),S+="</span>",i.prototype.createEl.call(this,s,video_es_assign({innerHTML:S},_),T)},SubsCapsMenuItem}(ai);Qt.registerComponent("SubsCapsMenuItem",mi);var fi=function(i){function SubsCapsButton(s,_){var T;return void 0===_&&(_={}),(T=i.call(this,s,_)||this).label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(T.player_.language_)>-1&&(T.label_="captions"),T.menuButton_.controlText(Zt(T.label_)),T}_inheritsLoose(SubsCapsButton,i);var s=SubsCapsButton.prototype;return s.buildCSSClass=function buildCSSClass(){return"vjs-subs-caps-button "+i.prototype.buildCSSClass.call(this)},s.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-subs-caps-button "+i.prototype.buildWrapperCSSClass.call(this)},s.createItems=function createItems(){var s=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(s.push(new hi(this.player_,{kind:this.label_})),this.hideThreshold_+=1),s=i.prototype.createItems.call(this,s,mi)},SubsCapsButton}(oi);fi.prototype.kinds_=["captions","subtitles"],fi.prototype.controlText_="Subtitles",Qt.registerComponent("SubsCapsButton",fi);var gi=function(i){function AudioTrackMenuItem(s,_){var T,S=_.track,C=s.audioTracks();_.label=S.label||S.language||"Unknown",_.selected=S.enabled,(T=i.call(this,s,_)||this).track=S,T.addClass("vjs-"+S.kind+"-menu-item");var P=function changeHandler(){for(var i=arguments.length,s=new Array(i),_=0;_<i;_++)s[_]=arguments[_];T.handleTracksChange.apply((0,O.Z)(T),s)};return C.addEventListener("change",P),T.on("dispose",(function(){C.removeEventListener("change",P)})),T}_inheritsLoose(AudioTrackMenuItem,i);var s=AudioTrackMenuItem.prototype;return s.createEl=function createEl(s,_,T){var S='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"main-desc"===this.options_.track.kind&&(S+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "),S+="</span>",i.prototype.createEl.call(this,s,video_es_assign({innerHTML:S},_),T)},s.handleClick=function handleClick(s){var _=this.player_.audioTracks();i.prototype.handleClick.call(this,s);for(var T=0;T<_.length;T++){var S=_[T];S.enabled=S===this.track}},s.handleTracksChange=function handleTracksChange(i){this.selected(this.track.enabled)},AudioTrackMenuItem}(ii);Qt.registerComponent("AudioTrackMenuItem",gi);var vi=function(i){function AudioTrackButton(s,_){return void 0===_&&(_={}),_.tracks=s.audioTracks(),i.call(this,s,_)||this}_inheritsLoose(AudioTrackButton,i);var s=AudioTrackButton.prototype;return s.buildCSSClass=function buildCSSClass(){return"vjs-audio-button "+i.prototype.buildCSSClass.call(this)},s.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-audio-button "+i.prototype.buildWrapperCSSClass.call(this)},s.createItems=function createItems(i){void 0===i&&(i=[]),this.hideThreshold_=1;for(var s=this.player_.audioTracks(),_=0;_<s.length;_++){var T=s[_];i.push(new gi(this.player_,{track:T,selectable:!0,multiSelectable:!1}))}return i},AudioTrackButton}(ni);vi.prototype.controlText_="Audio Track",Qt.registerComponent("AudioTrackButton",vi);var bi=function(i){function PlaybackRateMenuItem(s,_){var T,S=_.rate,C=parseFloat(S,10);return _.label=S,_.selected=1===C,_.selectable=!0,_.multiSelectable=!1,(T=i.call(this,s,_)||this).label=S,T.rate=C,T.on(s,"ratechange",T.update),T}_inheritsLoose(PlaybackRateMenuItem,i);var s=PlaybackRateMenuItem.prototype;return s.handleClick=function handleClick(s){i.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},s.update=function update(i){this.selected(this.player().playbackRate()===this.rate)},PlaybackRateMenuItem}(ii);bi.prototype.contentElType="button",Qt.registerComponent("PlaybackRateMenuItem",bi);var yi=function(i){function PlaybackRateMenuButton(s,_){var T;return(T=i.call(this,s,_)||this).updateVisibility(),T.updateLabel(),T.on(s,"loadstart",T.updateVisibility),T.on(s,"ratechange",T.updateLabel),T}_inheritsLoose(PlaybackRateMenuButton,i);var s=PlaybackRateMenuButton.prototype;return s.createEl=function createEl$1(){var s=i.prototype.createEl.call(this);return this.labelEl_=createEl("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),s.appendChild(this.labelEl_),s},s.dispose=function dispose(){this.labelEl_=null,i.prototype.dispose.call(this)},s.buildCSSClass=function buildCSSClass(){return"vjs-playback-rate "+i.prototype.buildCSSClass.call(this)},s.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-playback-rate "+i.prototype.buildWrapperCSSClass.call(this)},s.createMenu=function createMenu(){var i=new ei(this.player()),s=this.playbackRates();if(s)for(var _=s.length-1;_>=0;_--)i.addChild(new bi(this.player(),{rate:s[_]+"x"}));return i},s.updateARIAAttributes=function updateARIAAttributes(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},s.handleClick=function handleClick(i){for(var s=this.player().playbackRate(),_=this.playbackRates(),T=_[0],S=0;S<_.length;S++)if(_[S]>s){T=_[S];break}this.player().playbackRate(T)},s.playbackRates=function playbackRates(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},s.playbackRateSupported=function playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},s.updateVisibility=function updateVisibility(i){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},s.updateLabel=function updateLabel(i){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},PlaybackRateMenuButton}(ti);yi.prototype.controlText_="Playback Rate",Qt.registerComponent("PlaybackRateMenuButton",yi);var _i=function(i){function Spacer(){return i.apply(this,arguments)||this}_inheritsLoose(Spacer,i);var s=Spacer.prototype;return s.buildCSSClass=function buildCSSClass(){return"vjs-spacer "+i.prototype.buildCSSClass.call(this)},s.createEl=function createEl(){return i.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},Spacer}(Qt);Qt.registerComponent("Spacer",_i);var wi=function(i){function CustomControlSpacer(){return i.apply(this,arguments)||this}_inheritsLoose(CustomControlSpacer,i);var s=CustomControlSpacer.prototype;return s.buildCSSClass=function buildCSSClass(){return"vjs-custom-control-spacer "+i.prototype.buildCSSClass.call(this)},s.createEl=function createEl(){var s=i.prototype.createEl.call(this,{className:this.buildCSSClass()});return s.innerHTML="",s},CustomControlSpacer}(_i);Qt.registerComponent("CustomControlSpacer",wi);var ki=function(i){function ControlBar(){return i.apply(this,arguments)||this}return _inheritsLoose(ControlBar,i),ControlBar.prototype.createEl=function createEl(){return i.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},ControlBar}(Qt);ki.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in P()&&ki.prototype.options_.children.splice(ki.prototype.options_.children.length-1,0,"pictureInPictureToggle"),Qt.registerComponent("ControlBar",ki);var Ti=function(i){function ErrorDisplay(s,_){var T;return(T=i.call(this,s,_)||this).on(s,"error",T.open),T}_inheritsLoose(ErrorDisplay,i);var s=ErrorDisplay.prototype;return s.buildCSSClass=function buildCSSClass(){return"vjs-error-display "+i.prototype.buildCSSClass.call(this)},s.content=function content(){var i=this.player().error();return i?this.localize(i.message):""},ErrorDisplay}(In);Ti.prototype.options_=_extends({},In.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Qt.registerComponent("ErrorDisplay",Ti);var Si="vjs-text-track-settings",Ci=["#000","Black"],xi=["#00F","Blue"],Ei=["#0FF","Cyan"],Pi=["#0F0","Green"],Ai=["#F0F","Magenta"],Oi=["#F00","Red"],Mi=["#FFF","White"],zi=["#FF0","Yellow"],Ii=["1","Opaque"],Li=["0.5","Semi-Transparent"],Ri=["0","Transparent"],Ni={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Ci,Mi,Oi,Pi,xi,zi,Ai,Ei]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Ii,Li,Ri]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Mi,Ci,Oi,Pi,xi,zi,Ai,Ei]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function parser(i){return"1.00"===i?null:Number(i)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Ii,Li]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[Ri,Li,Ii]}};function parseOptionValue(i,s){if(s&&(i=s(i)),i&&"none"!==i)return i}Ni.windowColor.options=Ni.backgroundColor.options;var Di=function(i){function TextTrackSettings(s,_){var T;return _.temporary=!1,(T=i.call(this,s,_)||this).updateDisplay=It((0,O.Z)(T),T.updateDisplay),T.fill(),T.hasBeenOpened_=T.hasBeenFilled_=!0,T.endDialog=createEl("p",{className:"vjs-control-text",textContent:T.localize("End of dialog window.")}),T.el().appendChild(T.endDialog),T.setDefaults(),void 0===_.persistTextTrackSettings&&(T.options_.persistTextTrackSettings=T.options_.playerOptions.persistTextTrackSettings),T.on(T.$(".vjs-done-button"),"click",(function(){T.saveSettings(),T.close()})),T.on(T.$(".vjs-default-button"),"click",(function(){T.setDefaults(),T.updateDisplay()})),each(Ni,(function(i){T.on(T.$(i.selector),"change",T.updateDisplay)})),T.options_.persistTextTrackSettings&&T.restoreSettings(),T}_inheritsLoose(TextTrackSettings,i);var s=TextTrackSettings.prototype;return s.dispose=function dispose(){this.endDialog=null,i.prototype.dispose.call(this)},s.createElSelect_=function createElSelect_(i,s,_){var T=this;void 0===s&&(s=""),void 0===_&&(_="label");var S=Ni[i],C=S.id.replace("%s",this.id_),P=[s,C].join(" ").trim();return["<"+_+' id="'+C+'" class="'+("label"===_?"vjs-label":"")+'">',this.localize(S.label),"</"+_+">",'<select aria-labelledby="'+P+'">'].concat(S.options.map((function(i){var s=C+"-"+i[1].replace(/\W+/g,"");return['<option id="'+s+'" value="'+i[0]+'" ','aria-labelledby="'+P+" "+s+'">',T.localize(i[1]),"</option>"].join("")}))).concat("</select>").join("")},s.createElFgColor_=function createElFgColor_(){var i="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+i+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",i),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",i),"</span>","</fieldset>"].join("")},s.createElBgColor_=function createElBgColor_(){var i="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+i+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",i),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",i),"</span>","</fieldset>"].join("")},s.createElWinColor_=function createElWinColor_(){var i="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+i+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",i),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",i),"</span>","</fieldset>"].join("")},s.createElColors_=function createElColors_(){return createEl("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},s.createElFont_=function createElFont_(){return createEl("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},s.createElControls_=function createElControls_(){var i=this.localize("restore all settings to the default values");return createEl("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+i+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+i+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},s.content=function content(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},s.label=function label(){return this.localize("Caption Settings Dialog")},s.description=function description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},s.buildCSSClass=function buildCSSClass(){return i.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},s.getValues=function getValues(){var i=this;return function reduce(i,s,_){return void 0===_&&(_=0),gt(i).reduce((function(_,T){return s(_,i[T],T)}),_)}(Ni,(function(s,_,T){var S=function getSelectedOptionValue(i,s){return parseOptionValue(i.options[i.options.selectedIndex].value,s)}(i.$(_.selector),_.parser);return void 0!==S&&(s[T]=S),s}),{})},s.setValues=function setValues(i){var s=this;each(Ni,(function(_,T){!function setSelectedOption(i,s,_){if(s)for(var T=0;T<i.options.length;T++)if(parseOptionValue(i.options[T].value,_)===s){i.selectedIndex=T;break}}(s.$(_.selector),i[T],_.parser)}))},s.setDefaults=function setDefaults(){var i=this;each(Ni,(function(s){var _=s.hasOwnProperty("default")?s.default:0;i.$(s.selector).selectedIndex=_}))},s.restoreSettings=function restoreSettings(){var i;try{i=JSON.parse(S().localStorage.getItem(Si))}catch(s){pt.warn(s)}i&&this.setValues(i)},s.saveSettings=function saveSettings(){if(this.options_.persistTextTrackSettings){var i=this.getValues();try{Object.keys(i).length?S().localStorage.setItem(Si,JSON.stringify(i)):S().localStorage.removeItem(Si)}catch(s){pt.warn(s)}}},s.updateDisplay=function updateDisplay(){var i=this.player_.getChild("textTrackDisplay");i&&i.updateDisplay()},s.conditionalBlur_=function conditionalBlur_(){this.previouslyActiveEl_=null;var i=this.player_.controlBar,s=i&&i.subsCapsButton,_=i&&i.captionsButton;s?s.focus():_&&_.focus()},TextTrackSettings}(In);Qt.registerComponent("TextTrackSettings",Di);var ji=function(i){function ResizeManager(s,_){var T,C=_.ResizeObserver||S().ResizeObserver;null===_.ResizeObserver&&(C=!1);var P=mergeOptions({createEl:!C,reportTouchActivity:!1},_);return(T=i.call(this,s,P)||this).ResizeObserver=_.ResizeObserver||S().ResizeObserver,T.loadListener_=null,T.resizeObserver_=null,T.debouncedHandler_=function debounce(i,s,_,T){var C;void 0===T&&(T=S());var P=function debounced(){var S=this,P=arguments,O=function later(){C=null,O=null,_||i.apply(S,P)};!C&&_&&i.apply(S,P),T.clearTimeout(C),C=T.setTimeout(O,s)};return P.cancel=function cancel(){T.clearTimeout(C),C=null},P}((function(){T.resizeHandler()}),100,!1,(0,O.Z)(T)),C?(T.resizeObserver_=new T.ResizeObserver(T.debouncedHandler_),T.resizeObserver_.observe(s.el())):(T.loadListener_=function(){if(T.el_&&T.el_.contentWindow){var i=T.debouncedHandler_,s=T.unloadListener_=function(){off(this,"resize",i),off(this,"unload",s),s=null};on(T.el_.contentWindow,"unload",s),on(T.el_.contentWindow,"resize",i)}},T.one("load",T.loadListener_)),T}_inheritsLoose(ResizeManager,i);var s=ResizeManager.prototype;return s.createEl=function createEl(){return i.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})},s.resizeHandler=function resizeHandler(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},s.dispose=function dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,i.prototype.dispose.call(this)},ResizeManager}(Qt);Qt.registerComponent("ResizeManager",ji);var Bi={trackingThreshold:30,liveTolerance:15},$i=function(i){function LiveTracker(s,_){var T,S=mergeOptions(Bi,_,{createEl:!1});return(T=i.call(this,s,S)||this).reset_(),T.on(T.player_,"durationchange",T.handleDurationchange),mn&&"hidden"in P()&&"visibilityState"in P()&&T.on(P(),"visibilitychange",T.handleVisibilityChange),T}_inheritsLoose(LiveTracker,i);var s=LiveTracker.prototype;return s.handleVisibilityChange=function handleVisibilityChange(){this.player_.duration()===1/0&&(P().hidden?this.stopTracking():this.startTracking())},s.trackLive_=function trackLive_(){var i=this.player_.seekable();if(i&&i.length){var s=Number(S().performance.now().toFixed(4)),_=-1===this.lastTime_?0:(s-this.lastTime_)/1e3;this.lastTime_=s,this.pastSeekEnd_=this.pastSeekEnd()+_;var T=this.liveCurrentTime(),C=this.player_.currentTime(),P=this.player_.paused()||this.seekedBehindLive_||Math.abs(T-C)>this.options_.liveTolerance;this.timeupdateSeen_&&T!==1/0||(P=!1),P!==this.behindLiveEdge_&&(this.behindLiveEdge_=P,this.trigger("liveedgechange"))}},s.handleDurationchange=function handleDurationchange(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},s.startTracking=function startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLive_,zt),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLive_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked):(this.one(this.player_,"play",this.handlePlay),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate)))},s.handleFirstTimeupdate=function handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked)},s.handleSeeked=function handleSeeked(){var i=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=!this.skipNextSeeked_&&i>2,this.skipNextSeeked_=!1,this.trackLive_()},s.handlePlay=function handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge)},s.reset_=function reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.skipNextSeeked_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLive_),this.off(this.player_,"seeked",this.handleSeeked),this.off(this.player_,"play",this.handlePlay),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate),this.off(this.player_,"timeupdate",this.seekToLiveEdge)},s.stopTracking=function stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},s.seekableEnd=function seekableEnd(){for(var i=this.player_.seekable(),s=[],_=i?i.length:0;_--;)s.push(i.end(_));return s.length?s.sort()[s.length-1]:1/0},s.seekableStart=function seekableStart(){for(var i=this.player_.seekable(),s=[],_=i?i.length:0;_--;)s.push(i.start(_));return s.length?s.sort()[0]:0},s.liveWindow=function liveWindow(){var i=this.liveCurrentTime();return i===1/0?0:i-this.seekableStart()},s.isLive=function isLive(){return this.isTracking()},s.atLiveEdge=function atLiveEdge(){return!this.behindLiveEdge()},s.liveCurrentTime=function liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()},s.pastSeekEnd=function pastSeekEnd(){var i=this.seekableEnd();return-1!==this.lastSeekEnd_&&i!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=i,this.pastSeekEnd_},s.behindLiveEdge=function behindLiveEdge(){return this.behindLiveEdge_},s.isTracking=function isTracking(){return"number"==typeof this.trackingInterval_},s.seekToLiveEdge=function seekToLiveEdge(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.skipNextSeeked_=!0,this.player_.currentTime(this.liveCurrentTime()))},s.dispose=function dispose(){this.off(P(),"visibilitychange",this.handleVisibilityChange),this.stopTracking(),i.prototype.dispose.call(this)},LiveTracker}(Qt);Qt.registerComponent("LiveTracker",$i);var Ui,Fi=function sourcesetLoad(i){var s=i.el();if(s.hasAttribute("src"))return i.triggerSourceset(s.src),!0;var _=i.$$("source"),T=[],S="";if(!_.length)return!1;for(var C=0;C<_.length;C++){var P=_[C].src;P&&-1===T.indexOf(P)&&T.push(P)}return!!T.length&&(1===T.length&&(S=T[0]),i.triggerSourceset(S),!0)},Hi=Object.defineProperty({},"innerHTML",{get:function get(){return this.cloneNode(!0).innerHTML},set:function set(i){var s=P().createElement(this.nodeName.toLowerCase());s.innerHTML=i;for(var _=P().createDocumentFragment();s.childNodes.length;)_.appendChild(s.childNodes[0]);return this.innerText="",S().Element.prototype.appendChild.call(this,_),this.innerHTML}}),qi=function getDescriptor(i,s){for(var _={},T=0;T<i.length&&!((_=Object.getOwnPropertyDescriptor(i[T],s))&&_.set&&_.get);T++);return _.enumerable=!0,_.configurable=!0,_},Vi=function firstSourceWatch(i){var s=i.el();if(!s.resetSourceWatch_){var _={},T=function getInnerHTMLDescriptor(i){return qi([i.el(),S().HTMLMediaElement.prototype,S().Element.prototype,Hi],"innerHTML")}(i),C=function appendWrapper(_){return function(){for(var T=arguments.length,S=new Array(T),C=0;C<T;C++)S[C]=arguments[C];var P=_.apply(s,S);return Fi(i),P}};["append","appendChild","insertAdjacentHTML"].forEach((function(i){s[i]&&(_[i]=s[i],s[i]=C(_[i]))})),Object.defineProperty(s,"innerHTML",mergeOptions(T,{set:C(T.set)})),s.resetSourceWatch_=function(){s.resetSourceWatch_=null,Object.keys(_).forEach((function(i){s[i]=_[i]})),Object.defineProperty(s,"innerHTML",T)},i.one("sourceset",s.resetSourceWatch_)}},Gi=Object.defineProperty({},"src",{get:function get(){return this.hasAttribute("src")?Kn(S().Element.prototype.getAttribute.call(this,"src")):""},set:function set(i){return S().Element.prototype.setAttribute.call(this,"src",i),i}}),Zi=function setupSourceset(i){if(i.featuresSourceset){var s=i.el();if(!s.resetSourceset_){var _=function getSrcDescriptor(i){return qi([i.el(),S().HTMLMediaElement.prototype,Gi],"src")}(i),T=s.setAttribute,C=s.load;Object.defineProperty(s,"src",mergeOptions(_,{set:function set(T){var S=_.set.call(s,T);return i.triggerSourceset(s.src),S}})),s.setAttribute=function(_,S){var C=T.call(s,_,S);return/src/i.test(_)&&i.triggerSourceset(s.src),C},s.load=function(){var _=C.call(s);return Fi(i)||(i.triggerSourceset(""),Vi(i)),_},s.currentSrc?i.triggerSourceset(s.currentSrc):Fi(i)||Vi(i),s.resetSourceset_=function(){s.resetSourceset_=null,s.load=C,s.setAttribute=T,Object.defineProperty(s,"src",_),s.resetSourceWatch_&&s.resetSourceWatch_()}}}},Wi=function defineLazyProperty(i,s,_,T){void 0===T&&(T=!0);var S=function set(_){return Object.defineProperty(i,s,{value:_,enumerable:!0,writable:!0})},C={configurable:!0,enumerable:!0,get:function get(){var i=_();return S(i),i}};return T&&(C.set=S),Object.defineProperty(i,s,C)},Ki=function(i){function Html5(s,_){var T;T=i.call(this,s,_)||this;var S=s.source,C=!1;if(S&&(T.el_.currentSrc!==S.src||s.tag&&3===s.tag.initNetworkState_)?T.setSource(S):T.handleLateInit_(T.el_),s.enableSourceset&&T.setupSourcesetHandling_(),T.isScrubbing_=!1,T.el_.hasChildNodes()){for(var P=T.el_.childNodes,O=P.length,M=[];O--;){var R=P[O];"track"===R.nodeName.toLowerCase()&&(T.featuresNativeTextTracks?(T.remoteTextTrackEls().addTrackElement_(R),T.remoteTextTracks().addTrack(R.track),T.textTracks().addTrack(R.track),C||T.el_.hasAttribute("crossorigin")||!Xn(R.src)||(C=!0)):M.push(R))}for(var D=0;D<M.length;D++)T.el_.removeChild(M[D])}return T.proxyNativeTracks_(),T.featuresNativeTextTracks&&C&&pt.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),T.restoreMetadataTracksInIOSNativePlayer_(),(vn||yn||cn)&&!0===s.nativeControlsForTouch&&T.setControls(!0),T.proxyWebkitFullscreen_(),T.triggerReady(),T}_inheritsLoose(Html5,i);var s=Html5.prototype;return s.dispose=function dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),Html5.disposeMediaElement(this.el_),this.options_=null,i.prototype.dispose.call(this)},s.setupSourcesetHandling_=function setupSourcesetHandling_(){Zi(this)},s.restoreMetadataTracksInIOSNativePlayer_=function restoreMetadataTracksInIOSNativePlayer_(){var i,s=this.textTracks(),_=function takeMetadataTrackSnapshot(){i=[];for(var _=0;_<s.length;_++){var T=s[_];"metadata"===T.kind&&i.push({track:T,storedMode:T.mode})}};_(),s.addEventListener("change",_),this.on("dispose",(function(){return s.removeEventListener("change",_)}));var T=function restoreTrackMode(){for(var _=0;_<i.length;_++){var T=i[_];"disabled"===T.track.mode&&T.track.mode!==T.storedMode&&(T.track.mode=T.storedMode)}s.removeEventListener("change",restoreTrackMode)};this.on("webkitbeginfullscreen",(function(){s.removeEventListener("change",_),s.removeEventListener("change",T),s.addEventListener("change",T)})),this.on("webkitendfullscreen",(function(){s.removeEventListener("change",_),s.addEventListener("change",_),s.removeEventListener("change",T)}))},s.overrideNative_=function overrideNative_(i,s){var _=this;if(s===this["featuresNative"+i+"Tracks"]){var T=i.toLowerCase();this[T+"TracksListeners_"]&&Object.keys(this[T+"TracksListeners_"]).forEach((function(i){_.el()[T+"Tracks"].removeEventListener(i,_[T+"TracksListeners_"][i])})),this["featuresNative"+i+"Tracks"]=!s,this[T+"TracksListeners_"]=null,this.proxyNativeTracksForType_(T)}},s.overrideNativeAudioTracks=function overrideNativeAudioTracks(i){this.overrideNative_("Audio",i)},s.overrideNativeVideoTracks=function overrideNativeVideoTracks(i){this.overrideNative_("Video",i)},s.proxyNativeTracksForType_=function proxyNativeTracksForType_(i){var s=this,_=ar[i],T=this.el()[_.getterName],S=this[_.getterName]();if(this["featuresNative"+_.capitalName+"Tracks"]&&T&&T.addEventListener){var C={change:function change(_){var T={type:"change",target:S,currentTarget:S,srcElement:S};S.trigger(T),"text"===i&&s[sr.remoteText.getterName]().trigger(T)},addtrack:function addtrack(i){S.addTrack(i.track)},removetrack:function removetrack(i){S.removeTrack(i.track)}},P=function removeOldTracks(){for(var i=[],s=0;s<S.length;s++){for(var _=!1,C=0;C<T.length;C++)if(T[C]===S[s]){_=!0;break}_||i.push(S[s])}for(;i.length;)S.removeTrack(i.shift())};this[_.getterName+"Listeners_"]=C,Object.keys(C).forEach((function(i){var _=C[i];T.addEventListener(i,_),s.on("dispose",(function(s){return T.removeEventListener(i,_)}))})),this.on("loadstart",P),this.on("dispose",(function(i){return s.off("loadstart",P)}))}},s.proxyNativeTracks_=function proxyNativeTracks_(){var i=this;ar.names.forEach((function(s){i.proxyNativeTracksForType_(s)}))},s.createEl=function createEl(){var i=this.options_.tag;if(!i||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(i){var s=i.cloneNode(!0);i.parentNode&&i.parentNode.insertBefore(s,i),Html5.disposeMediaElement(i),i=s}else{i=P().createElement("video");var _=mergeOptions({},this.options_.tag&&getAttributes(this.options_.tag));vn&&!0===this.options_.nativeControlsForTouch||delete _.controls,setAttributes(i,video_es_assign(_,{id:this.options_.techId,class:"vjs-tech"}))}i.playerId=this.options_.playerId}void 0!==this.options_.preload&&setAttribute(i,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(i.disablePictureInPicture=this.options_.disablePictureInPicture);for(var T=["loop","muted","playsinline","autoplay"],S=0;S<T.length;S++){var C=T[S],O=this.options_[C];void 0!==O&&(O?setAttribute(i,C,C):removeAttribute(i,C),i[C]=O)}return i},s.handleLateInit_=function handleLateInit_(i){if(0!==i.networkState&&3!==i.networkState){if(0===i.readyState){var s=!1,_=function setLoadstartFired(){s=!0};this.on("loadstart",_);var T=function triggerLoadstart(){s||this.trigger("loadstart")};return this.on("loadedmetadata",T),void this.ready((function(){this.off("loadstart",_),this.off("loadedmetadata",T),s||this.trigger("loadstart")}))}var S=["loadstart"];S.push("loadedmetadata"),i.readyState>=2&&S.push("loadeddata"),i.readyState>=3&&S.push("canplay"),i.readyState>=4&&S.push("canplaythrough"),this.ready((function(){S.forEach((function(i){this.trigger(i)}),this)}))}},s.setScrubbing=function setScrubbing(i){this.isScrubbing_=i},s.scrubbing=function scrubbing(){return this.isScrubbing_},s.setCurrentTime=function setCurrentTime(i){try{this.isScrubbing_&&this.el_.fastSeek&&wn?this.el_.fastSeek(i):this.el_.currentTime=i}catch(s){pt(s,"Video is not ready. (Video.js)")}},s.duration=function duration(){var i=this;if(this.el_.duration===1/0&&sn&&hn&&0===this.el_.currentTime){return this.on("timeupdate",(function checkProgress(){i.el_.currentTime>0&&(i.el_.duration===1/0&&i.trigger("durationchange"),i.off("timeupdate",checkProgress))})),NaN}return this.el_.duration||NaN},s.width=function width(){return this.el_.offsetWidth},s.height=function height(){return this.el_.offsetHeight},s.proxyWebkitFullscreen_=function proxyWebkitFullscreen_(){var i=this;if("webkitDisplayingFullscreen"in this.el_){var s=function endFn(){this.trigger("fullscreenchange",{isFullscreen:!1})},_=function beginFn(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",s),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",_),this.on("dispose",(function(){i.off("webkitbeginfullscreen",_),i.off("webkitendfullscreen",s)}))}},s.supportsFullScreen=function supportsFullScreen(){if("function"==typeof this.el_.webkitEnterFullScreen){var i=S().navigator&&S().navigator.userAgent||"";if(/Android/.test(i)||!/Chrome|Mac OS X 10.5/.test(i))return!0}return!1},s.enterFullScreen=function enterFullScreen(){var i=this.el_;if(i.paused&&i.networkState<=i.HAVE_METADATA)silencePromise(this.el_.play()),this.setTimeout((function(){i.pause();try{i.webkitEnterFullScreen()}catch(s){this.trigger("fullscreenerror",s)}}),0);else try{i.webkitEnterFullScreen()}catch(s){this.trigger("fullscreenerror",s)}},s.exitFullScreen=function exitFullScreen(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},s.requestPictureInPicture=function requestPictureInPicture(){return this.el_.requestPictureInPicture()},s.src=function src(i){if(void 0===i)return this.el_.src;this.setSrc(i)},s.reset=function reset(){Html5.resetMediaElement(this.el_)},s.currentSrc=function currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},s.setControls=function setControls(i){this.el_.controls=!!i},s.addTextTrack=function addTextTrack(s,_,T){return this.featuresNativeTextTracks?this.el_.addTextTrack(s,_,T):i.prototype.addTextTrack.call(this,s,_,T)},s.createRemoteTextTrack=function createRemoteTextTrack(s){if(!this.featuresNativeTextTracks)return i.prototype.createRemoteTextTrack.call(this,s);var _=P().createElement("track");return s.kind&&(_.kind=s.kind),s.label&&(_.label=s.label),(s.language||s.srclang)&&(_.srclang=s.language||s.srclang),s.default&&(_.default=s.default),s.id&&(_.id=s.id),s.src&&(_.src=s.src),_},s.addRemoteTextTrack=function addRemoteTextTrack(s,_){var T=i.prototype.addRemoteTextTrack.call(this,s,_);return this.featuresNativeTextTracks&&this.el().appendChild(T),T},s.removeRemoteTextTrack=function removeRemoteTextTrack(s){if(i.prototype.removeRemoteTextTrack.call(this,s),this.featuresNativeTextTracks)for(var _=this.$$("track"),T=_.length;T--;)s!==_[T]&&s!==_[T].track||this.el().removeChild(_[T])},s.getVideoPlaybackQuality=function getVideoPlaybackQuality(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var i={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(i.droppedVideoFrames=this.el().webkitDroppedFrameCount,i.totalVideoFrames=this.el().webkitDecodedFrameCount),S().performance&&"function"==typeof S().performance.now?i.creationTime=S().performance.now():S().performance&&S().performance.timing&&"number"==typeof S().performance.timing.navigationStart&&(i.creationTime=S().Date.now()-S().performance.timing.navigationStart),i},Html5}(cr);Wi(Ki,"TEST_VID",(function(){if(isReal()){var i=P().createElement("video"),s=P().createElement("track");return s.kind="captions",s.srclang="en",s.label="English",i.appendChild(s),i}})),Ki.isSupported=function(){try{Ki.TEST_VID.volume=.5}catch(i){return!1}return!(!Ki.TEST_VID||!Ki.TEST_VID.canPlayType)},Ki.canPlayType=function(i){return Ki.TEST_VID.canPlayType(i)},Ki.canPlaySource=function(i,s){return Ki.canPlayType(i.type)},Ki.canControlVolume=function(){try{var i=Ki.TEST_VID.volume;return Ki.TEST_VID.volume=i/2+.1,i!==Ki.TEST_VID.volume}catch(s){return!1}},Ki.canMuteVolume=function(){try{var i=Ki.TEST_VID.muted;return Ki.TEST_VID.muted=!i,Ki.TEST_VID.muted?setAttribute(Ki.TEST_VID,"muted","muted"):removeAttribute(Ki.TEST_VID,"muted"),i!==Ki.TEST_VID.muted}catch(s){return!1}},Ki.canControlPlaybackRate=function(){if(sn&&hn&&pn<58)return!1;try{var i=Ki.TEST_VID.playbackRate;return Ki.TEST_VID.playbackRate=i/2+.1,i!==Ki.TEST_VID.playbackRate}catch(s){return!1}},Ki.canOverrideAttributes=function(){try{var i=function noop(){};Object.defineProperty(P().createElement("video"),"src",{get:i,set:i}),Object.defineProperty(P().createElement("audio"),"src",{get:i,set:i}),Object.defineProperty(P().createElement("video"),"innerHTML",{get:i,set:i}),Object.defineProperty(P().createElement("audio"),"innerHTML",{get:i,set:i})}catch(s){return!1}return!0},Ki.supportsNativeTextTracks=function(){return wn||_n&&hn},Ki.supportsNativeVideoTracks=function(){return!(!Ki.TEST_VID||!Ki.TEST_VID.videoTracks)},Ki.supportsNativeAudioTracks=function(){return!(!Ki.TEST_VID||!Ki.TEST_VID.audioTracks)},Ki.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresVolumeControl","canControlVolume"],["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach((function(i){var s=i[0],_=i[1];Wi(Ki.prototype,s,(function(){return Ki[_]()}),!0)})),Ki.prototype.movingMediaElementInDOM=!_n,Ki.prototype.featuresFullscreenResize=!0,Ki.prototype.featuresProgressEvents=!0,Ki.prototype.featuresTimeupdateEvents=!0,Ki.patchCanPlayType=function(){ln>=4&&!un&&!hn&&(Ui=Ki.TEST_VID&&Ki.TEST_VID.constructor.prototype.canPlayType,Ki.TEST_VID.constructor.prototype.canPlayType=function(i){return i&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(i)?"maybe":Ui.call(this,i)})},Ki.unpatchCanPlayType=function(){var i=Ki.TEST_VID.constructor.prototype.canPlayType;return Ui&&(Ki.TEST_VID.constructor.prototype.canPlayType=Ui),i},Ki.patchCanPlayType(),Ki.disposeMediaElement=function(i){if(i){for(i.parentNode&&i.parentNode.removeChild(i);i.hasChildNodes();)i.removeChild(i.firstChild);i.removeAttribute("src"),"function"==typeof i.load&&function(){try{i.load()}catch(s){}}()}},Ki.resetMediaElement=function(i){if(i){for(var s=i.querySelectorAll("source"),_=s.length;_--;)i.removeChild(s[_]);i.removeAttribute("src"),"function"==typeof i.load&&function(){try{i.load()}catch(s){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach((function(i){Ki.prototype[i]=function(){return this.el_[i]||this.el_.hasAttribute(i)}})),["muted","defaultMuted","autoplay","loop","playsinline"].forEach((function(i){Ki.prototype["set"+Zt(i)]=function(s){this.el_[i]=s,s?this.el_.setAttribute(i,i):this.el_.removeAttribute(i)}})),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach((function(i){Ki.prototype[i]=function(){return this.el_[i]}})),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach((function(i){Ki.prototype["set"+Zt(i)]=function(s){this.el_[i]=s}})),["pause","load","play"].forEach((function(i){Ki.prototype[i]=function(){return this.el_[i]()}})),cr.withSourceHandlers(Ki),Ki.nativeSourceHandler={},Ki.nativeSourceHandler.canPlayType=function(i){try{return Ki.TEST_VID.canPlayType(i)}catch(s){return""}},Ki.nativeSourceHandler.canHandleSource=function(i,s){if(i.type)return Ki.nativeSourceHandler.canPlayType(i.type);if(i.src){var _=Yn(i.src);return Ki.nativeSourceHandler.canPlayType("video/"+_)}return""},Ki.nativeSourceHandler.handleSource=function(i,s,_){s.setSrc(i.src)},Ki.nativeSourceHandler.dispose=function(){},Ki.registerSourceHandler(Ki.nativeSourceHandler),cr.registerTech("Html5",Ki);var Yi=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Xi={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Qi=["tiny","xsmall","small","medium","large","xlarge","huge"],Ji={};Qi.forEach((function(i){var s="x"===i.charAt(0)?"x-"+i.substring(1):i;Ji[i]="vjs-layout-"+s}));var ea={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},ta=function(i){function Player(s,_,T){var S;if(s.id=s.id||_.id||"vjs_video_"+newGUID(),(_=video_es_assign(Player.getTagSettings(s),_)).initChildren=!1,_.createEl=!1,_.evented=!1,_.reportTouchActivity=!1,!_.language)if("function"==typeof s.closest){var C=s.closest("[lang]");C&&C.getAttribute&&(_.language=C.getAttribute("lang"))}else for(var M=s;M&&1===M.nodeType;){if(getAttributes(M).hasOwnProperty("lang")){_.language=M.getAttribute("lang");break}M=M.parentNode}if((S=i.call(this,null,_,T)||this).boundDocumentFullscreenChange_=function(i){return S.documentFullscreenChange_(i)},S.boundFullWindowOnEscKey_=function(i){return S.fullWindowOnEscKey(i)},S.isFullscreen_=!1,S.log=mt(S.id_),S.fsApi_=Sn,S.isPosterFromTech_=!1,S.queuedCallbacks_=[],S.isReady_=!1,S.hasStarted_=!1,S.userActive_=!1,S.debugEnabled_=!1,!S.options_||!S.options_.techOrder||!S.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(S.tag=s,S.tagAttributes=s&&getAttributes(s),S.language(S.options_.language),_.languages){var R={};Object.getOwnPropertyNames(_.languages).forEach((function(i){R[i.toLowerCase()]=_.languages[i]})),S.languages_=R}else S.languages_=Player.prototype.options_.languages;S.resetCache_(),S.poster_=_.poster||"",S.controls_=!!_.controls,s.controls=!1,s.removeAttribute("controls"),S.changingSrc_=!1,S.playCallbacks_=[],S.playTerminatedQueue_=[],s.hasAttribute("autoplay")?S.autoplay(!0):S.autoplay(S.options_.autoplay),_.plugins&&Object.keys(_.plugins).forEach((function(i){if("function"!=typeof S[i])throw new Error('plugin "'+i+'" does not exist')})),S.scrubbing_=!1,S.el_=S.createEl(),evented((0,O.Z)(S),{eventBusKey:"el_"}),S.fsApi_.requestFullscreen&&(on(P(),S.fsApi_.fullscreenchange,S.boundDocumentFullscreenChange_),S.on(S.fsApi_.fullscreenchange,S.boundDocumentFullscreenChange_)),S.fluid_&&S.on(["playerreset","resize"],S.updateStyleEl_);var D=mergeOptions(S.options_);_.plugins&&Object.keys(_.plugins).forEach((function(i){S[i](_.plugins[i])})),_.debug&&S.debug(!0),S.options_.playerOptions=D,S.middleware_=[],S.initChildren(),S.isAudio("audio"===s.nodeName.toLowerCase()),S.controls()?S.addClass("vjs-controls-enabled"):S.addClass("vjs-controls-disabled"),S.el_.setAttribute("role","region"),S.isAudio()?S.el_.setAttribute("aria-label",S.localize("Audio Player")):S.el_.setAttribute("aria-label",S.localize("Video Player")),S.isAudio()&&S.addClass("vjs-audio"),S.flexNotSupported_()&&S.addClass("vjs-no-flex"),vn&&S.addClass("vjs-touch-enabled"),_n||S.addClass("vjs-workinghover"),Player.players[S.id_]=(0,O.Z)(S);var j=dt.split(".")[0];return S.addClass("vjs-v"+j),S.userActive(!0),S.reportUserActivity(),S.one("play",S.listenForUserActivity_),S.on("stageclick",S.handleStageClick_),S.on("keydown",S.handleKeyDown),S.on("languagechange",S.handleLanguagechange),S.breakpoints(S.options_.breakpoints),S.responsive(S.options_.responsive),S}_inheritsLoose(Player,i);var s=Player.prototype;return s.dispose=function dispose(){var s=this;this.trigger("dispose"),this.off("dispose"),off(P(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),off(P(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),Player.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),function clearCacheForPlayer(i){dr[i.id()]=null}(this),lr.names.forEach((function(i){var _=lr[i],T=s[_.getterName]();T&&T.off&&T.off()})),i.prototype.dispose.call(this)},s.createEl=function createEl(){var s,_=this.tag,T=this.playerElIngest_=_.parentNode&&_.parentNode.hasAttribute&&_.parentNode.hasAttribute("data-vjs-player"),C="video-js"===this.tag.tagName.toLowerCase();T?s=this.el_=_.parentNode:C||(s=this.el_=i.prototype.createEl.call(this,"div"));var O=getAttributes(_);if(C){for(s=this.el_=_,_=this.tag=P().createElement("video");s.children.length;)_.appendChild(s.firstChild);hasClass(s,"video-js")||addClass(s,"video-js"),s.appendChild(_),T=this.playerElIngest_=s,Object.keys(s).forEach((function(i){try{_[i]=s[i]}catch(T){}}))}if(_.setAttribute("tabindex","-1"),O.tabindex="-1",(mn||hn&&gn)&&(_.setAttribute("role","application"),O.role="application"),_.removeAttribute("width"),_.removeAttribute("height"),"width"in O&&delete O.width,"height"in O&&delete O.height,Object.getOwnPropertyNames(O).forEach((function(i){C&&"class"===i||s.setAttribute(i,O[i]),C&&_.setAttribute(i,O[i])})),_.playerId=_.id,_.id+="_html5_api",_.className="vjs-tech",_.player=s.player=this,this.addClass("vjs-paused"),!0!==S().VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=St("vjs-styles-dimensions");var M=bt(".vjs-styles-defaults"),R=bt("head");R.insertBefore(this.styleEl_,M?M.nextSibling:R.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var D=_.getElementsByTagName("a"),j=0;j<D.length;j++){var $=D.item(j);addClass($,"vjs-hidden"),$.setAttribute("hidden","hidden")}return _.initNetworkState_=_.networkState,_.parentNode&&!T&&_.parentNode.insertBefore(s,_),prependTo(_,s),this.children_.unshift(_),this.el_.setAttribute("lang",this.language_),this.el_=s,s},s.crossOrigin=function crossOrigin(i){if(!i)return this.techGet_("crossOrigin");"anonymous"===i||"use-credentials"===i?this.techCall_("setCrossOrigin",i):pt.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+i+'"')},s.width=function width(i){return this.dimension("width",i)},s.height=function height(i){return this.dimension("height",i)},s.dimension=function dimension(i,s){var _=i+"_";if(void 0===s)return this[_]||0;if(""===s||"auto"===s)return this[_]=void 0,void this.updateStyleEl_();var T=parseFloat(s);isNaN(T)?pt.error('Improper value "'+s+'" supplied for for '+i):(this[_]=T,this.updateStyleEl_())},s.fluid=function fluid(i){var s=this;if(void 0===i)return!!this.fluid_;this.fluid_=!!i,Dt(this)&&this.off(["playerreset","resize"],this.updateStyleEl_),i?(this.addClass("vjs-fluid"),this.fill(!1),function addEventedCallback(i,s){Dt(i)?s():(i.eventedCallbacks||(i.eventedCallbacks=[]),i.eventedCallbacks.push(s))}(this,(function(){s.on(["playerreset","resize"],s.updateStyleEl_)}))):this.removeClass("vjs-fluid"),this.updateStyleEl_()},s.fill=function fill(i){if(void 0===i)return!!this.fill_;this.fill_=!!i,i?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},s.aspectRatio=function aspectRatio(i){if(void 0===i)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(i))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=i,this.fluid(!0),this.updateStyleEl_()},s.updateStyleEl_=function updateStyleEl_(){if(!0!==S().VIDEOJS_NO_DYNAMIC_STYLE){var i,s,_,T=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),C=T[1]/T[0];i=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/C:this.videoWidth()||300,s=void 0!==this.height_?this.height_:i*C,_=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(_),Ct(this.styleEl_,"\n      ."+_+" {\n        width: "+i+"px;\n        height: "+s+"px;\n      }\n\n      ."+_+".vjs-fluid {\n        padding-top: "+100*C+"%;\n      }\n    ")}else{var P="number"==typeof this.width_?this.width_:this.options_.width,O="number"==typeof this.height_?this.height_:this.options_.height,M=this.tech_&&this.tech_.el();M&&(P>=0&&(M.width=P),O>=0&&(M.height=O))}},s.loadTech_=function loadTech_(i,s){var _=this;this.tech_&&this.unloadTech_();var T=Zt(i),S=i.charAt(0).toLowerCase()+i.slice(1);"Html5"!==T&&this.tag&&(cr.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=T,this.isReady_=!1;var C={source:s,autoplay:"string"!=typeof this.autoplay()&&this.autoplay(),nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+S+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};lr.names.forEach((function(i){var s=lr[i];C[s.getterName]=_[s.privateName]})),video_es_assign(C,this.options_[T]),video_es_assign(C,this.options_[S]),video_es_assign(C,this.options_[i.toLowerCase()]),this.tag&&(C.tag=this.tag),s&&s.src===this.cache_.src&&this.cache_.currentTime>0&&(C.startTime=this.cache_.currentTime);var P=cr.getTech(i);if(!P)throw new Error("No Tech named '"+T+"' exists! '"+T+"' should be registered using videojs.registerTech()'");this.tech_=new P(C),this.tech_.ready(It(this,this.handleTechReady_),!0),zn(this.textTracksJson_||[],this.tech_),Yi.forEach((function(i){_.on(_.tech_,i,_["handleTech"+Zt(i)+"_"])})),Object.keys(Xi).forEach((function(i){_.on(_.tech_,i,(function(s){0===_.tech_.playbackRate()&&_.tech_.seeking()?_.queuedCallbacks_.push({callback:_["handleTech"+Xi[i]+"_"].bind(_),event:s}):_["handleTech"+Xi[i]+"_"](s)}))})),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"sourceset",this.handleTechSourceset_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"fullscreenerror",this.handleTechFullscreenError_),this.on(this.tech_,"enterpictureinpicture",this.handleTechEnterPictureInPicture_),this.on(this.tech_,"leavepictureinpicture",this.handleTechLeavePictureInPicture_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===T&&this.tag||prependTo(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},s.unloadTech_=function unloadTech_(){var i=this;lr.names.forEach((function(s){var _=lr[s];i[_.privateName]=i[_.getterName]()})),this.textTracksJson_=Mn(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},s.tech=function tech(i){return void 0===i&&pt.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},s.addTechControlsListeners_=function addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"mouseup",this.handleTechClick_),this.on(this.tech_,"dblclick",this.handleTechDoubleClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},s.removeTechControlsListeners_=function removeTechControlsListeners_(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mouseup",this.handleTechClick_),this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)},s.handleTechReady_=function handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},s.handleTechLoadStart_=function handleTechLoadStart_(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay())},s.manualAutoplay_=function manualAutoplay_(i){var s=this;if(this.tech_&&"string"==typeof i){var _,T=function muted(){var i=s.muted();s.muted(!0);var _=function restoreMuted(){s.muted(i)};s.playTerminatedQueue_.push(_);var T=s.play();if(isPromise(T))return T.catch(_)};if("any"===i&&!0!==this.muted()?isPromise(_=this.play())&&(_=_.catch(T)):_="muted"===i&&!0!==this.muted()?T():this.play(),isPromise(_))return _.then((function(){s.trigger({type:"autoplay-success",autoplay:i})})).catch((function(_){s.trigger({type:"autoplay-failure",autoplay:i})}))}},s.updateSourceCaches_=function updateSourceCaches_(i){void 0===i&&(i="");var s=i,_="";"string"!=typeof s&&(s=i.src,_=i.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],s&&!_&&(_=function findMimetype(i,s){if(!s)return"";if(i.cache_.source.src===s&&i.cache_.source.type)return i.cache_.source.type;var _=i.cache_.sources.filter((function(i){return i.src===s}));if(_.length)return _[0].type;for(var T=i.$$("source"),S=0;S<T.length;S++){var C=T[S];if(C.type&&C.src&&C.src===s)return C.type}return vr(s)}(this,s)),this.cache_.source=mergeOptions({},i,{src:s,type:_});for(var T=this.cache_.sources.filter((function(i){return i.src&&i.src===s})),S=[],C=this.$$("source"),P=[],O=0;O<C.length;O++){var M=getAttributes(C[O]);S.push(M),M.src&&M.src===s&&P.push(M.src)}P.length&&!T.length?this.cache_.sources=S:T.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=s},s.handleTechSourceset_=function handleTechSourceset_(i){var s=this;if(!this.changingSrc_){var _=function updateSourceCaches(i){return s.updateSourceCaches_(i)},T=this.currentSource().src,S=i.src;T&&!/^blob:/.test(T)&&/^blob:/.test(S)&&(!this.lastSource_||this.lastSource_.tech!==S&&this.lastSource_.player!==T)&&(_=function updateSourceCaches(){}),_(S),i.src||this.tech_.any(["sourceset","loadstart"],(function(i){if("sourceset"!==i.type){var _=s.techGet("currentSrc");s.lastSource_.tech=_,s.updateSourceCaches_(_)}}))}this.lastSource_={player:this.currentSource().src,tech:i.src},this.trigger({src:i.src,type:"sourceset"})},s.hasStarted=function hasStarted(i){if(void 0===i)return this.hasStarted_;i!==this.hasStarted_&&(this.hasStarted_=i,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},s.handleTechPlay_=function handleTechPlay_(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},s.handleTechRateChange_=function handleTechRateChange_(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach((function(i){return i.callback(i.event)})),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},s.handleTechWaiting_=function handleTechWaiting_(){var i=this;this.addClass("vjs-waiting"),this.trigger("waiting");var s=this.currentTime();this.on("timeupdate",(function timeUpdateListener(){s!==i.currentTime()&&(i.removeClass("vjs-waiting"),i.off("timeupdate",timeUpdateListener))}))},s.handleTechCanPlay_=function handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")},s.handleTechCanPlayThrough_=function handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},s.handleTechPlaying_=function handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")},s.handleTechSeeking_=function handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")},s.handleTechSeeked_=function handleTechSeeked_(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},s.handleTechFirstPlay_=function handleTechFirstPlay_(){this.options_.starttime&&(pt.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},s.handleTechPause_=function handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},s.handleTechEnded_=function handleTechEnded_(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},s.handleTechDurationChange_=function handleTechDurationChange_(){this.duration(this.techGet_("duration"))},s.handleTechClick_=function handleTechClick_(i){isSingleLeftClick(i)&&this.controls_&&(this.paused()?silencePromise(this.play()):this.pause())},s.handleTechDoubleClick_=function handleTechDoubleClick_(i){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),(function(s){return s.contains(i.target)}))||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,i):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},s.handleTechTap_=function handleTechTap_(){this.userActive(!this.userActive())},s.handleTechTouchStart_=function handleTechTouchStart_(){this.userWasActive=this.userActive()},s.handleTechTouchMove_=function handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()},s.handleTechTouchEnd_=function handleTechTouchEnd_(i){i.cancelable&&i.preventDefault()},s.handleStageClick_=function handleStageClick_(){this.reportUserActivity()},s.toggleFullscreenClass_=function toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},s.documentFullscreenChange_=function documentFullscreenChange_(i){var s=i.target.player;if(!s||s===this){var _=this.el(),T=P()[this.fsApi_.fullscreenElement]===_;!T&&_.matches?T=_.matches(":"+this.fsApi_.fullscreen):!T&&_.msMatchesSelector&&(T=_.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(T)}},s.handleTechFullscreenChange_=function handleTechFullscreenChange_(i,s){s&&(s.nativeIOSFullscreen&&this.toggleClass("vjs-ios-native-fs"),this.isFullscreen(s.isFullscreen))},s.handleTechFullscreenError_=function handleTechFullscreenError_(i,s){this.trigger("fullscreenerror",s)},s.togglePictureInPictureClass_=function togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},s.handleTechEnterPictureInPicture_=function handleTechEnterPictureInPicture_(i){this.isInPictureInPicture(!0)},s.handleTechLeavePictureInPicture_=function handleTechLeavePictureInPicture_(i){this.isInPictureInPicture(!1)},s.handleTechError_=function handleTechError_(){var i=this.tech_.error();this.error(i)},s.handleTechTextData_=function handleTechTextData_(){var i=null;arguments.length>1&&(i=arguments[1]),this.trigger("textdata",i)},s.getCache=function getCache(){return this.cache_},s.resetCache_=function resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],volume:1}},s.techCall_=function techCall_(i,s){this.ready((function(){if(i in mr)return function set(i,s,_,T){return s[_](i.reduce(middlewareIterator(_),T))}(this.middleware_,this.tech_,i,s);if(i in fr)return mediate(this.middleware_,this.tech_,i,s);try{this.tech_&&this.tech_[i](s)}catch(_){throw pt(_),_}}),!0)},s.techGet_=function techGet_(i){if(this.tech_&&this.tech_.isReady_){if(i in pr)return function get(i,s,_){return i.reduceRight(middlewareIterator(_),s[_]())}(this.middleware_,this.tech_,i);if(i in fr)return mediate(this.middleware_,this.tech_,i);try{return this.tech_[i]()}catch(s){if(void 0===this.tech_[i])throw pt("Video.js: "+i+" method not defined for "+this.techName_+" playback technology.",s),s;if("TypeError"===s.name)throw pt("Video.js: "+i+" unavailable on "+this.techName_+" playback technology element.",s),this.tech_.isReady_=!1,s;throw pt(s),s}}},s.play=function play(){var i=this,s=this.options_.Promise||S().Promise;return s?new s((function(s){i.play_(s)})):this.play_()},s.play_=function play_(i){var s=this;void 0===i&&(i=silencePromise),this.playCallbacks_.push(i);var _=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!_)return this.waitToPlay_=function(i){s.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(_||!wn&&!_n||this.load());var T=this.techGet_("play");null===T?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(T)},s.runPlayTerminatedQueue_=function runPlayTerminatedQueue_(){var i=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],i.forEach((function(i){i()}))},s.runPlayCallbacks_=function runPlayCallbacks_(i){var s=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],s.forEach((function(s){s(i)}))},s.pause=function pause(){this.techCall_("pause")},s.paused=function paused(){return!1!==this.techGet_("paused")},s.played=function played(){return this.techGet_("played")||createTimeRanges(0,0)},s.scrubbing=function scrubbing(i){if(void 0===i)return this.scrubbing_;this.scrubbing_=!!i,this.techCall_("setScrubbing",this.scrubbing_),i?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},s.currentTime=function currentTime(i){return void 0!==i?(i<0&&(i=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",i),void(this.cache_.initTime=0)):(this.cache_.initTime=i,this.off("canplay",this.applyInitTime_),void this.one("canplay",this.applyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},s.applyInitTime_=function applyInitTime_(){this.currentTime(this.cache_.initTime)},s.duration=function duration(i){if(void 0===i)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(i=parseFloat(i))<0&&(i=1/0),i!==this.cache_.duration&&(this.cache_.duration=i,i===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(i)||this.trigger("durationchange"))},s.remainingTime=function remainingTime(){return this.duration()-this.currentTime()},s.remainingTimeDisplay=function remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())},s.buffered=function buffered(){var buffered=this.techGet_("buffered");return buffered&&buffered.length||(buffered=createTimeRanges(0,0)),buffered},s.bufferedPercent=function bufferedPercent$1(){return bufferedPercent(this.buffered(),this.duration())},s.bufferedEnd=function bufferedEnd(){var i=this.buffered(),s=this.duration(),_=i.end(i.length-1);return _>s&&(_=s),_},s.volume=function volume(i){var s;return void 0!==i?(s=Math.max(0,Math.min(1,parseFloat(i))),this.cache_.volume=s,this.techCall_("setVolume",s),void(s>0&&this.lastVolume_(s))):(s=parseFloat(this.techGet_("volume")),isNaN(s)?1:s)},s.muted=function muted(i){if(void 0===i)return this.techGet_("muted")||!1;this.techCall_("setMuted",i)},s.defaultMuted=function defaultMuted(i){return void 0!==i?this.techCall_("setDefaultMuted",i):this.techGet_("defaultMuted")||!1},s.lastVolume_=function lastVolume_(i){if(void 0===i||0===i)return this.cache_.lastVolume;this.cache_.lastVolume=i},s.supportsFullScreen=function supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1},s.isFullscreen=function isFullscreen(i){if(void 0!==i){var s=this.isFullscreen_;return this.isFullscreen_=Boolean(i),this.isFullscreen_!==s&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_},s.requestFullscreen=function requestFullscreen(i){var s=this.options_.Promise||S().Promise;if(s){var _=this;return new s((function(s,T){function offHandler(){_.off("fullscreenerror",errorHandler),_.off("fullscreenchange",changeHandler)}function changeHandler(){offHandler(),s()}function errorHandler(i,s){offHandler(),T(s)}_.one("fullscreenchange",changeHandler),_.one("fullscreenerror",errorHandler);var S=_.requestFullscreenHelper_(i);if(S)return S.then(offHandler,offHandler),S}))}return this.requestFullscreenHelper_()},s.requestFullscreenHelper_=function requestFullscreenHelper_(i){var s,_=this;if(this.fsApi_.prefixed||(s=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==i&&(s=i)),this.fsApi_.requestFullscreen){var T=this.el_[this.fsApi_.requestFullscreen](s);return T&&T.then((function(){return _.isFullscreen(!0)}),(function(){return _.isFullscreen(!1)})),T}this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):this.enterFullWindow()},s.exitFullscreen=function exitFullscreen(){var i=this.options_.Promise||S().Promise;if(i){var s=this;return new i((function(i,_){function offHandler(){s.off("fullscreenerror",errorHandler),s.off("fullscreenchange",changeHandler)}function changeHandler(){offHandler(),i()}function errorHandler(i,s){offHandler(),_(s)}s.one("fullscreenchange",changeHandler),s.one("fullscreenerror",errorHandler);var T=s.exitFullscreenHelper_();if(T)return T.then(offHandler,offHandler),T}))}return this.exitFullscreenHelper_()},s.exitFullscreenHelper_=function exitFullscreenHelper_(){var i=this;if(this.fsApi_.requestFullscreen){var s=P()[this.fsApi_.exitFullscreen]();return s&&s.then((function(){return i.isFullscreen(!1)})),s}this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):this.exitFullWindow()},s.enterFullWindow=function enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=P().documentElement.style.overflow,on(P(),"keydown",this.boundFullWindowOnEscKey_),P().documentElement.style.overflow="hidden",addClass(P().body,"vjs-full-window"),this.trigger("enterFullWindow")},s.fullWindowOnEscKey=function fullWindowOnEscKey(i){$().isEventKey(i,"Esc")&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},s.exitFullWindow=function exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,off(P(),"keydown",this.boundFullWindowOnEscKey_),P().documentElement.style.overflow=this.docOrigOverflow,removeClass(P().body,"vjs-full-window"),this.trigger("exitFullWindow")},s.disablePictureInPicture=function disablePictureInPicture(i){if(void 0===i)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",i),this.options_.disablePictureInPicture=i,this.trigger("disablepictureinpicturechanged")},s.isInPictureInPicture=function isInPictureInPicture(i){return void 0!==i?(this.isInPictureInPicture_=!!i,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},s.requestPictureInPicture=function requestPictureInPicture(){if("pictureInPictureEnabled"in P()&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},s.exitPictureInPicture=function exitPictureInPicture(){if("pictureInPictureEnabled"in P())return P().exitPictureInPicture()},s.handleKeyDown=function handleKeyDown(i){var s=this.options_.userActions;if(s&&s.hotkeys){(function excludeElement(i){var s=i.tagName.toLowerCase();if(i.isContentEditable)return!0;if("input"===s)return-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(i.type);return-1!==["textarea"].indexOf(s)})(this.el_.ownerDocument.activeElement)||("function"==typeof s.hotkeys?s.hotkeys.call(this,i):this.handleHotkeys(i))}},s.handleHotkeys=function handleHotkeys(i){var s=this.options_.userActions?this.options_.userActions.hotkeys:{},_=s.fullscreenKey,T=void 0===_?function(i){return $().isEventKey(i,"f")}:_,S=s.muteKey,C=void 0===S?function(i){return $().isEventKey(i,"m")}:S,O=s.playPauseKey,M=void 0===O?function(i){return $().isEventKey(i,"k")||$().isEventKey(i,"Space")}:O;if(T.call(this,i)){i.preventDefault(),i.stopPropagation();var R=Qt.getComponent("FullscreenToggle");!1!==P()[this.fsApi_.fullscreenEnabled]&&R.prototype.handleClick.call(this,i)}else if(C.call(this,i)){i.preventDefault(),i.stopPropagation(),Qt.getComponent("MuteToggle").prototype.handleClick.call(this,i)}else if(M.call(this,i)){i.preventDefault(),i.stopPropagation(),Qt.getComponent("PlayToggle").prototype.handleClick.call(this,i)}},s.canPlayType=function canPlayType(i){for(var s,_=0,T=this.options_.techOrder;_<T.length;_++){var S=T[_],C=cr.getTech(S);if(C||(C=Qt.getComponent(S)),C){if(C.isSupported()&&(s=C.canPlayType(i)))return s}else pt.error('The "'+S+'" tech is undefined. Skipped browser support check for that tech.')}return""},s.selectSource=function selectSource(i){var s=this,_=this.options_.techOrder.map((function(i){return[i,cr.getTech(i)]})).filter((function(i){var s=i[0],_=i[1];return _?_.isSupported():(pt.error('The "'+s+'" tech is undefined. Skipped browser support check for that tech.'),!1)})),T=function findFirstPassingTechSourcePair(i,s,_){var T;return i.some((function(i){return s.some((function(s){if(T=_(i,s))return!0}))})),T},S=function finder(i,_){var T=i[0];if(i[1].canPlaySource(_,s.options_[T.toLowerCase()]))return{source:_,tech:T}};return(this.options_.sourceOrder?T(i,_,function flip(i){return function(s,_){return i(_,s)}}(S)):T(_,i,S))||!1},s.src=function src(i){var s=this;if(void 0===i)return this.cache_.src||"";var _=br(i);_.length?(this.changingSrc_=!0,this.cache_.sources=_,this.updateSourceCaches_(_[0]),setSource(this,_[0],(function(i,T){if(s.middleware_=T,s.cache_.sources=_,s.updateSourceCaches_(i),s.src_(i))return _.length>1?s.src(_.slice(1)):(s.changingSrc_=!1,s.setTimeout((function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})}),0),void s.triggerReady());!function setTech(i,s){i.forEach((function(i){return i.setTech&&i.setTech(s)}))}(T,s.tech_)}))):this.setTimeout((function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})}),0)},s.src_=function src_(i){var s=this,_=this.selectSource([i]);return!_||(function titleCaseEquals(i,s){return Zt(i)===Zt(s)}(_.tech,this.techName_)?(this.ready((function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",i):this.techCall_("src",i.src),this.changingSrc_=!1}),!0),!1):(this.changingSrc_=!0,this.loadTech_(_.tech,_.source),this.tech_.ready((function(){s.changingSrc_=!1})),!1))},s.load=function load(){this.techCall_("load")},s.reset=function reset(){var i=this,s=this.options_.Promise||S().Promise;this.paused()||!s?this.doReset_():silencePromise(this.play().then((function(){return i.doReset_()})))},s.doReset_=function doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),Dt(this)&&this.trigger("playerreset")},s.resetControlBarUI_=function resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},s.resetProgressBar_=function resetProgressBar_(){this.currentTime(0);var i=this.controlBar,s=i.durationDisplay,_=i.remainingTimeDisplay;s&&s.updateContent(),_&&_.updateContent()},s.resetPlaybackRate_=function resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},s.resetVolumeBar_=function resetVolumeBar_(){this.volume(1),this.trigger("volumechange")},s.currentSources=function currentSources(){var i=this.currentSource(),s=[];return 0!==Object.keys(i).length&&s.push(i),this.cache_.sources||s},s.currentSource=function currentSource(){return this.cache_.source||{}},s.currentSrc=function currentSrc(){return this.currentSource()&&this.currentSource().src||""},s.currentType=function currentType(){return this.currentSource()&&this.currentSource().type||""},s.preload=function preload(i){return void 0!==i?(this.techCall_("setPreload",i),void(this.options_.preload=i)):this.techGet_("preload")},s.autoplay=function autoplay(i){if(void 0===i)return this.options_.autoplay||!1;var s;"string"==typeof i&&/(any|play|muted)/.test(i)?(this.options_.autoplay=i,this.manualAutoplay_(i),s=!1):this.options_.autoplay=!!i,s=void 0===s?this.options_.autoplay:s,this.tech_&&this.techCall_("setAutoplay",s)},s.playsinline=function playsinline(i){return void 0!==i?(this.techCall_("setPlaysinline",i),this.options_.playsinline=i,this):this.techGet_("playsinline")},s.loop=function loop(i){return void 0!==i?(this.techCall_("setLoop",i),void(this.options_.loop=i)):this.techGet_("loop")},s.poster=function poster(i){if(void 0===i)return this.poster_;i||(i=""),i!==this.poster_&&(this.poster_=i,this.techCall_("setPoster",i),this.isPosterFromTech_=!1,this.trigger("posterchange"))},s.handleTechPosterChange_=function handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var i=this.tech_.poster()||"";i!==this.poster_&&(this.poster_=i,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},s.controls=function controls(i){if(void 0===i)return!!this.controls_;i=!!i,this.controls_!==i&&(this.controls_=i,this.usingNativeControls()&&this.techCall_("setControls",i),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},s.usingNativeControls=function usingNativeControls(i){if(void 0===i)return!!this.usingNativeControls_;i=!!i,this.usingNativeControls_!==i&&(this.usingNativeControls_=i,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},s.error=function error(i){if(void 0===i)return this.error_||null;if(this.options_.suppressNotSupportedError&&i&&4===i.code){var s=function triggerSuppressedError(){this.error(i)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],s),void this.one("loadstart",(function(){this.off(["click","touchstart"],s)}))}if(null===i)return this.error_=i,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new MediaError(i),this.addClass("vjs-error"),pt.error("(CODE:"+this.error_.code+" "+MediaError.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error")},s.reportUserActivity=function reportUserActivity(i){this.userActivity_=!0},s.userActive=function userActive(i){if(void 0===i)return this.userActive_;if((i=!!i)!==this.userActive_){if(this.userActive_=i,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",(function(i){i.stopPropagation(),i.preventDefault()})),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},s.listenForUserActivity_=function listenForUserActivity_(){var i,s,_,T=It(this,this.reportUserActivity),S=function handleMouseUpAndMouseLeave(s){T(),this.clearInterval(i)};this.on("mousedown",(function handleMouseDown(){T(),this.clearInterval(i),i=this.setInterval(T,250)})),this.on("mousemove",(function handleMouseMove(i){i.screenX===s&&i.screenY===_||(s=i.screenX,_=i.screenY,T())})),this.on("mouseup",S),this.on("mouseleave",S);var C,P=this.getChild("controlBar");!P||_n||sn||(P.on("mouseenter",(function(i){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout,this.player().options_.inactivityTimeout=0})),P.on("mouseleave",(function(i){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout}))),this.on("keydown",T),this.on("keyup",T),this.setInterval((function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(C);var i=this.options_.inactivityTimeout;i<=0||(C=this.setTimeout((function(){this.userActivity_||this.userActive(!1)}),i))}}),250)},s.playbackRate=function playbackRate(i){if(void 0===i)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",i)},s.defaultPlaybackRate=function defaultPlaybackRate(i){return void 0!==i?this.techCall_("setDefaultPlaybackRate",i):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},s.isAudio=function isAudio(i){if(void 0===i)return!!this.isAudio_;this.isAudio_=!!i},s.addTextTrack=function addTextTrack(i,s,_){if(this.tech_)return this.tech_.addTextTrack(i,s,_)},s.addRemoteTextTrack=function addRemoteTextTrack(i,s){if(this.tech_)return this.tech_.addRemoteTextTrack(i,s)},s.removeRemoteTextTrack=function removeRemoteTextTrack(i){void 0===i&&(i={});var s=i.track;if(s||(s=i),this.tech_)return this.tech_.removeRemoteTextTrack(s)},s.getVideoPlaybackQuality=function getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")},s.videoWidth=function videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},s.videoHeight=function videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},s.language=function language(i){if(void 0===i)return this.language_;this.language_!==String(i).toLowerCase()&&(this.language_=String(i).toLowerCase(),Dt(this)&&this.trigger("languagechange"))},s.languages=function languages(){return mergeOptions(Player.prototype.options_.languages,this.languages_)},s.toJSON=function toJSON(){var i=mergeOptions(this.options_),s=i.tracks;i.tracks=[];for(var _=0;_<s.length;_++){var T=s[_];(T=mergeOptions(T)).player=void 0,i.tracks[_]=T}return i},s.createModal=function createModal(i,s){var _=this;(s=s||{}).content=i||"";var T=new In(this,s);return this.addChild(T),T.on("dispose",(function(){_.removeChild(T)})),T.open(),T},s.updateCurrentBreakpoint_=function updateCurrentBreakpoint_(){if(this.responsive())for(var i=this.currentBreakpoint(),s=this.currentWidth(),_=0;_<Qi.length;_++){var T=Qi[_];if(s<=this.breakpoints_[T]){if(i===T)return;i&&this.removeClass(Ji[i]),this.addClass(Ji[T]),this.breakpoint_=T;break}}},s.removeCurrentBreakpoint_=function removeCurrentBreakpoint_(){var i=this.currentBreakpointClass();this.breakpoint_="",i&&this.removeClass(i)},s.breakpoints=function breakpoints(i){return void 0===i||(this.breakpoint_="",this.breakpoints_=video_es_assign({},ea,i),this.updateCurrentBreakpoint_()),video_es_assign(this.breakpoints_)},s.responsive=function responsive(i){return void 0===i?this.responsive_:(i=Boolean(i))!==this.responsive_?(this.responsive_=i,i?(this.on("playerresize",this.updateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.updateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),i):void 0},s.currentBreakpoint=function currentBreakpoint(){return this.breakpoint_},s.currentBreakpointClass=function currentBreakpointClass(){return Ji[this.breakpoint_]||""},s.loadMedia=function loadMedia(i,s){var _=this;if(i&&"object"==typeof i){this.reset(),this.cache_.media=mergeOptions(i);var T=this.cache_.media,S=T.artwork,C=T.poster,P=T.src,O=T.textTracks;!S&&C&&(this.cache_.media.artwork=[{src:C,type:vr(C)}]),P&&this.src(P),C&&this.poster(C),Array.isArray(O)&&O.forEach((function(i){return _.addRemoteTextTrack(i,!1)})),this.ready(s)}},s.getMedia=function getMedia(){if(!this.cache_.media){var i=this.poster(),s={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),(function(i){return{kind:i.kind,label:i.label,language:i.language,src:i.src}}))};return i&&(s.poster=i,s.artwork=[{src:s.poster,type:vr(s.poster)}]),s}return mergeOptions(this.cache_.media)},Player.getTagSettings=function getTagSettings(i){var s={sources:[],tracks:[]},_=getAttributes(i),T=_["data-setup"];if(hasClass(i,"vjs-fill")&&(_.fill=!0),hasClass(i,"vjs-fluid")&&(_.fluid=!0),null!==T){var S=D()(T||"{}"),C=S[0],P=S[1];C&&pt.error(C),video_es_assign(_,P)}if(video_es_assign(s,_),i.hasChildNodes())for(var O=i.childNodes,M=0,R=O.length;M<R;M++){var j=O[M],$=j.nodeName.toLowerCase();"source"===$?s.sources.push(getAttributes(j)):"track"===$&&s.tracks.push(getAttributes(j))}return s},s.flexNotSupported_=function flexNotSupported_(){var i=P().createElement("i");return!("flexBasis"in i.style||"webkitFlexBasis"in i.style||"mozFlexBasis"in i.style||"msFlexBasis"in i.style||"msFlexOrder"in i.style)},s.debug=function debug(i){if(void 0===i)return this.debugEnabled_;i?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},Player}(Qt);lr.names.forEach((function(i){var s=lr[i];ta.prototype[s.getterName]=function(){return this.tech_?this.tech_[s.getterName]():(this[s.privateName]=this[s.privateName]||new s.ListClass,this[s.privateName])}})),ta.prototype.crossorigin=ta.prototype.crossOrigin,ta.players={};var na=S().navigator;ta.prototype.options_={techOrder:cr.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:na&&(na.languages&&na.languages[0]||na.userLanguage||na.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1},["ended","seeking","seekable","networkState","readyState"].forEach((function(i){ta.prototype[i]=function(){return this.techGet_(i)}})),Yi.forEach((function(i){ta.prototype["handleTech"+Zt(i)+"_"]=function(){return this.trigger(i)}})),Qt.registerComponent("Player",ta);var ra="plugin",ia={},aa=function pluginExists(i){return ia.hasOwnProperty(i)},sa=function getPlugin(i){return aa(i)?ia[i]:void 0},oa=function markPluginAsActive(i,s){i.activePlugins_=i.activePlugins_||{},i.activePlugins_[s]=!0},la=function triggerSetupEvent(i,s,_){var T=(_?"before":"")+"pluginsetup";i.trigger(T,s),i.trigger(T+":"+s.name,s)},ca=function createPluginFactory(i,s){return s.prototype.name=i,function(){la(this,{name:i,plugin:s,instance:null},!0);for(var _=arguments.length,T=new Array(_),S=0;S<_;S++)T[S]=arguments[S];var C=(0,X.Z)(s,[this].concat(T));return this[i]=function(){return C},la(this,C.getEventHash()),C}},ua=function(){function Plugin(i){if(this.constructor===Plugin)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=i,this.log||(this.log=this.player.log.createLogger(this.name)),evented(this),delete this.trigger,stateful(this,this.constructor.defaultState),oa(i,this.name),this.dispose=It(this,this.dispose),i.on("dispose",this.dispose)}var i=Plugin.prototype;return i.version=function version(){return this.constructor.VERSION},i.getEventHash=function getEventHash(i){return void 0===i&&(i={}),i.name=this.name,i.plugin=this.constructor,i.instance=this,i},i.trigger=function trigger$1(i,s){return void 0===s&&(s={}),trigger(this.eventBusEl_,i,this.getEventHash(s))},i.handleStateChanged=function handleStateChanged(i){},i.dispose=function dispose(){var i=this.name,s=this.player;this.trigger("dispose"),this.off(),s.off("dispose",this.dispose),s.activePlugins_[i]=!1,this.player=this.state=null,s[i]=ca(i,ia[i])},Plugin.isBasic=function isBasic(i){var s="string"==typeof i?sa(i):i;return"function"==typeof s&&!Plugin.prototype.isPrototypeOf(s.prototype)},Plugin.registerPlugin=function registerPlugin(i,s){if("string"!=typeof i)throw new Error('Illegal plugin name, "'+i+'", must be a string, was '+typeof i+".");if(aa(i))pt.warn('A plugin named "'+i+'" already exists. You may want to avoid re-registering plugins!');else if(ta.prototype.hasOwnProperty(i))throw new Error('Illegal plugin name, "'+i+'", cannot share a name with an existing player method!');if("function"!=typeof s)throw new Error('Illegal plugin for "'+i+'", must be a function, was '+typeof s+".");return ia[i]=s,i!==ra&&(Plugin.isBasic(s)?ta.prototype[i]=function createBasicPlugin(i,s){var _=function basicPluginWrapper(){la(this,{name:i,plugin:s,instance:null},!0);var _=s.apply(this,arguments);return oa(this,i),la(this,{name:i,plugin:s,instance:_}),_};return Object.keys(s).forEach((function(i){_[i]=s[i]})),_}(i,s):ta.prototype[i]=ca(i,s)),s},Plugin.deregisterPlugin=function deregisterPlugin(i){if(i===ra)throw new Error("Cannot de-register base plugin.");aa(i)&&(delete ia[i],delete ta.prototype[i])},Plugin.getPlugins=function getPlugins(i){var s;return void 0===i&&(i=Object.keys(ia)),i.forEach((function(i){var _=sa(i);_&&((s=s||{})[i]=_)})),s},Plugin.getPluginVersion=function getPluginVersion(i){var s=sa(i);return s&&s.VERSION||""},Plugin}();ua.getPlugin=sa,ua.BASE_PLUGIN_NAME=ra,ua.registerPlugin(ra,ua),ta.prototype.usingPlugin=function(i){return!!this.activePlugins_&&!0===this.activePlugins_[i]},ta.prototype.hasPlugin=function(i){return!!aa(i)};var da=function normalizeId(i){return 0===i.indexOf("#")?i.slice(1):i};function videojs$1(i,s,_){var T=videojs$1.getPlayer(i);if(T)return s&&pt.warn('Player "'+i+'" is already initialised. Options will not be applied.'),_&&T.ready(_),T;var S="string"==typeof i?bt("#"+da(i)):i;if(!isEl(S))throw new TypeError("The element or ID supplied is not valid. (videojs)");S.ownerDocument.defaultView&&S.ownerDocument.body.contains(S)||pt.warn("The element supplied is not included in the DOM"),s=s||{},videojs$1.hooks("beforesetup").forEach((function(i){var _=i(S,mergeOptions(s));video_es_isObject(_)&&!Array.isArray(_)?s=mergeOptions(s,_):pt.error("please return an object in beforesetup hooks")}));var C=Qt.getComponent("Player");return T=new C(S,s,_),videojs$1.hooks("setup").forEach((function(i){return i(T)})),T}if(videojs$1.hooks_={},videojs$1.hooks=function(i,s){return videojs$1.hooks_[i]=videojs$1.hooks_[i]||[],s&&(videojs$1.hooks_[i]=videojs$1.hooks_[i].concat(s)),videojs$1.hooks_[i]},videojs$1.hook=function(i,s){videojs$1.hooks(i,s)},videojs$1.hookOnce=function(i,s){videojs$1.hooks(i,[].concat(s).map((function(s){return function wrapper(){return videojs$1.removeHook(i,wrapper),s.apply(void 0,arguments)}})))},videojs$1.removeHook=function(i,s){var _=videojs$1.hooks(i).indexOf(s);return!(_<=-1)&&(videojs$1.hooks_[i]=videojs$1.hooks_[i].slice(),videojs$1.hooks_[i].splice(_,1),!0)},!0!==S().VIDEOJS_NO_DYNAMIC_STYLE&&isReal()){var ha=bt(".vjs-styles-defaults");if(!ha){ha=St("vjs-styles-defaults");var pa=bt("head");pa&&pa.insertBefore(ha,pa.firstChild),Ct(ha,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}autoSetupTimeout(1,videojs$1),videojs$1.VERSION=dt,videojs$1.options=ta.prototype.options_,videojs$1.getPlayers=function(){return ta.players},videojs$1.getPlayer=function(i){var s,_=ta.players;if("string"==typeof i){var T=da(i),S=_[T];if(S)return S;s=bt("#"+T)}else s=i;if(isEl(s)){var C=s,P=C.player,O=C.playerId;if(P||_[O])return P||_[O]}},videojs$1.getAllPlayers=function(){return Object.keys(ta.players).map((function(i){return ta.players[i]})).filter(Boolean)},videojs$1.players=ta.players,videojs$1.getComponent=Qt.getComponent,videojs$1.registerComponent=function(i,s){cr.isTech(s)&&pt.warn("The "+i+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Qt.registerComponent.call(Qt,i,s)},videojs$1.getTech=cr.getTech,videojs$1.registerTech=cr.registerTech,videojs$1.use=function use(i,s){ur[i]=ur[i]||[],ur[i].push(s)},Object.defineProperty(videojs$1,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(videojs$1.middleware,"TERMINATOR",{value:hr,writeable:!1,enumerable:!0}),videojs$1.browser=kn,videojs$1.TOUCH_ENABLED=vn,videojs$1.extend=function extend(i,s){void 0===s&&(s={});var _=function subClass(){i.apply(this,arguments)},T={};for(var S in"object"==typeof s?(s.constructor!==Object.prototype.constructor&&(_=s.constructor),T=s):"function"==typeof s&&(_=s),(0,Q.Z)(_,i),i&&(_.super_=i),T)T.hasOwnProperty(S)&&(_.prototype[S]=T[S]);return _},videojs$1.mergeOptions=mergeOptions,videojs$1.bind=It,videojs$1.registerPlugin=ua.registerPlugin,videojs$1.deregisterPlugin=ua.deregisterPlugin,videojs$1.plugin=function(i,s){return pt.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),ua.registerPlugin(i,s)},videojs$1.getPlugins=ua.getPlugins,videojs$1.getPlugin=ua.getPlugin,videojs$1.getPluginVersion=ua.getPluginVersion,videojs$1.addLanguage=function(i,s){var _;return i=(""+i).toLowerCase(),videojs$1.options.languages=mergeOptions(videojs$1.options.languages,((_={})[i]=s,_)),videojs$1.options.languages[i]},videojs$1.log=pt,videojs$1.createLogger=mt,videojs$1.createTimeRange=videojs$1.createTimeRanges=createTimeRanges,videojs$1.formatTime=formatTime,videojs$1.setFormatTime=function setFormatTime(i){Or=i},videojs$1.resetFormatTime=function resetFormatTime(){Or=Ar},videojs$1.parseUrl=Wn,videojs$1.isCrossOrigin=Xn,videojs$1.EventTarget=Rt,videojs$1.on=on,videojs$1.one=one,videojs$1.off=off,videojs$1.trigger=trigger,videojs$1.xhr=V(),videojs$1.TextTrack=tr,videojs$1.AudioTrack=nr,videojs$1.VideoTrack=rr,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach((function(i){videojs$1[i]=function(){return pt.warn("videojs."+i+"() is deprecated; use videojs.dom."+i+"() instead"),_t[i].apply(null,arguments)}})),videojs$1.computedStyle=computedStyle,videojs$1.dom=_t,videojs$1.url=Qn,videojs$1.defineLazyProperty=Wi;
/*! @name @videojs/http-streaming @version 2.4.2 @license Apache-2.0 */
var ma,fa=te(),ga=function resolveManifestRedirect(i,s,_){return i&&_&&_.responseURL&&s!==_.responseURL?_.responseURL:s},va=videojs$1.log,ba=function createPlaylistID(i,s){return i+"-"+s},ya=function parseManifest(i){var s=i.manifestString,_=i.customTagParsers,T=void 0===_?[]:_,S=i.customTagMappers,C=void 0===S?[]:S,P=new ce;return T.forEach((function(i){return P.addParser(i)})),C.forEach((function(i){return P.addTagMapper(i)})),P.push(s),P.end(),P.manifest},_a=function forEachMediaGroup(i,s){["AUDIO","SUBTITLES"].forEach((function(_){for(var T in i.mediaGroups[_])for(var S in i.mediaGroups[_][T]){var C=i.mediaGroups[_][T][S];s(C,_,T,S)}}))},wa=function setupMediaPlaylist(i){var s=i.playlist,_=i.uri,T=i.id;s.id=T,_&&(s.uri=_),s.attributes=s.attributes||{}},ka=function addPropertiesToMaster(i,s){i.uri=s;for(var _=0;_<i.playlists.length;_++)if(!i.playlists[_].uri){var T="placeholder-uri-"+_;i.playlists[_].uri=T}_a(i,(function(s,_,T,S){if(s.playlists&&s.playlists.length&&!s.playlists[0].uri){var C="placeholder-uri-"+_+"-"+T+"-"+S,P=ba(0,C);s.playlists[0].uri=C,s.playlists[0].id=P,i.playlists[P]=s.playlists[0],i.playlists[C]=s.playlists[0]}})),function setupMediaPlaylists(i){for(var s=i.playlists.length;s--;){var _=i.playlists[s];wa({playlist:_,id:ba(s,_.uri)}),_.resolvedUri=fa(i.uri,_.uri),i.playlists[_.id]=_,i.playlists[_.uri]=_,_.attributes.BANDWIDTH||va.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}(i),function resolveMediaGroupUris(i){_a(i,(function(s){s.uri&&(s.resolvedUri=fa(i.uri,s.uri))}))}(i)},Ta=videojs$1.mergeOptions,Sa=videojs$1.EventTarget,Ca=function resolveSegmentUris(i,s){i.resolvedUri||(i.resolvedUri=fa(s,i.uri)),i.key&&!i.key.resolvedUri&&(i.key.resolvedUri=fa(s,i.key.uri)),i.map&&!i.map.resolvedUri&&(i.map.resolvedUri=fa(s,i.map.uri))},xa=function updateMaster(i,s){var _=Ta(i,{}),T=_.playlists[s.id];if(!T)return null;if(T.segments&&s.segments&&T.segments.length===s.segments.length&&T.endList===s.endList&&T.mediaSequence===s.mediaSequence)return null;var S=Ta(T,s);T.segments&&(S.segments=function updateSegments(i,s,_){var T=s.slice();_=_||0;for(var S=Math.min(i.length,s.length+_),C=_;C<S;C++)T[C-_]=Ta(i[C],T[C-_]);return T}(T.segments,s.segments,s.mediaSequence-T.mediaSequence)),S.segments.forEach((function(i){Ca(i,S.resolvedUri)}));for(var C=0;C<_.playlists.length;C++)_.playlists[C].id===s.id&&(_.playlists[C]=S);return _.playlists[s.id]=S,_.playlists[s.uri]=S,_},Ea=function refreshDelay(i,s){var _=i.segments[i.segments.length-1];return s&&_&&_.duration?1e3*_.duration:500*(i.targetDuration||10)},Pa=function(i){function PlaylistLoader(s,_,T){var S;if(void 0===T&&(T={}),S=i.call(this)||this,!s)throw new Error("A non-empty playlist URL or object is required");var C=T,P=C.withCredentials,O=void 0!==P&&P,M=C.handleManifestRedirects,R=void 0!==M&&M;S.src=s,S.vhs_=_,S.withCredentials=O,S.handleManifestRedirects=R;var D=_.options_;return S.customTagParsers=D&&D.customTagParsers||[],S.customTagMappers=D&&D.customTagMappers||[],S.state="HAVE_NOTHING",S.on("mediaupdatetimeout",(function(){"HAVE_METADATA"===S.state&&(S.state="HAVE_CURRENT_METADATA",S.request=S.vhs_.xhr({uri:fa(S.master.uri,S.media().uri),withCredentials:S.withCredentials},(function(i,s){if(S.request)return i?S.playlistRequestError(S.request,S.media(),"HAVE_METADATA"):void S.haveMetadata({playlistString:S.request.responseText,url:S.media().uri,id:S.media().id})})))})),S}_inheritsLoose(PlaylistLoader,i);var s=PlaylistLoader.prototype;return s.playlistRequestError=function playlistRequestError(i,s,_){var T=s.uri,S=s.id;this.request=null,_&&(this.state=_),this.error={playlist:this.master.playlists[S],status:i.status,message:"HLS playlist request error at URL: "+T+".",responseText:i.responseText,code:i.status>=500?4:2},this.trigger("error")},s.haveMetadata=function haveMetadata(i){var s=this,_=i.playlistString,T=i.playlistObject,C=i.url,P=i.id;this.request=null,this.state="HAVE_METADATA";var O=T||ya({manifestString:_,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers});O.lastRequest=Date.now(),wa({playlist:O,uri:C,id:P});var M=xa(this.master,O);this.targetDuration=O.targetDuration,M?(this.master=M,this.media_=this.master.playlists[P]):this.trigger("playlistunchanged"),this.media().endList||(S().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=S().setTimeout((function(){s.trigger("mediaupdatetimeout")}),Ea(this.media(),!!M))),this.trigger("loadedplaylist")},s.dispose=function dispose(){this.trigger("dispose"),this.stopRequest(),S().clearTimeout(this.mediaUpdateTimeout),S().clearTimeout(this.finalRenditionTimeout),this.off()},s.stopRequest=function stopRequest(){if(this.request){var i=this.request;this.request=null,i.onreadystatechange=null,i.abort()}},s.media=function media(i,s){var _=this;if(!i)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof i){if(!this.master.playlists[i])throw new Error("Unknown playlist URI: "+i);i=this.master.playlists[i]}if(S().clearTimeout(this.finalRenditionTimeout),s){var T=i.targetDuration/2*1e3||5e3;this.finalRenditionTimeout=S().setTimeout(this.media.bind(this,i,!1),T)}else{var C=this.state,P=!this.media_||i.id!==this.media_.id;if(this.master.playlists[i.id].endList||i.endList&&i.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=i,void(P&&(this.trigger("mediachanging"),"HAVE_MASTER"===C?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(P){if(this.state="SWITCHING_MEDIA",this.request){if(i.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.vhs_.xhr({uri:i.resolvedUri,withCredentials:this.withCredentials},(function(s,T){if(_.request){if(i.lastRequest=Date.now(),i.resolvedUri=ga(_.handleManifestRedirects,i.resolvedUri,T),s)return _.playlistRequestError(_.request,i,C);_.haveMetadata({playlistString:T.responseText,url:i.uri,id:i.id}),"HAVE_MASTER"===C?_.trigger("loadedmetadata"):_.trigger("mediachange")}}))}}},s.pause=function pause(){this.stopRequest(),S().clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},s.load=function load(i){var s=this;S().clearTimeout(this.mediaUpdateTimeout);var _=this.media();if(i){var T=_?_.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=S().setTimeout((function(){return s.load()}),T)}else this.started?_&&!_.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()},s.start=function start(){var i=this;if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=S().location.href),this.src.resolvedUri=this.src.uri,void setTimeout((function(){i.setupInitialPlaylist(i.src)}),0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},(function(s,_){if(i.request){if(i.request=null,s)return i.error={status:_.status,message:"HLS playlist request error at URL: "+i.src+".",responseText:_.responseText,code:2},"HAVE_NOTHING"===i.state&&(i.started=!1),i.trigger("error");i.src=ga(i.handleManifestRedirects,i.src,_);var T=ya({manifestString:_.responseText,customTagParsers:i.customTagParsers,customTagMappers:i.customTagMappers});i.setupInitialPlaylist(T)}}))},s.srcUri=function srcUri(){return"string"==typeof this.src?this.src:this.src.uri},s.setupInitialPlaylist=function setupInitialPlaylist(i){if(this.state="HAVE_MASTER",i.playlists)return this.master=i,ka(this.master,this.srcUri()),i.playlists.forEach((function(i){i.segments&&i.segments.forEach((function(s){Ca(s,i.resolvedUri)}))})),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var s=this.srcUri()||S().location.href;this.master=function masterForMedia(i,s){var _=ba(0,s),T={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:S().location.href,resolvedUri:S().location.href,playlists:[{uri:s,id:_,resolvedUri:s,attributes:{}}]};return T.playlists[_]=T.playlists[0],T.playlists[s]=T.playlists[0],T}(0,s),this.haveMetadata({playlistObject:i,url:s,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},PlaylistLoader}(Sa),Aa=1/30,Oa=.1,Ma=function filterRanges(i,s){var _,T=[];if(i&&i.length)for(_=0;_<i.length;_++)s(i.start(_),i.end(_))&&T.push([i.start(_),i.end(_)]);return videojs$1.createTimeRanges(T)},za=function findRange(i,s){return Ma(i,(function(i,_){return i-Oa<=s&&_+Oa>=s}))},Ia=function findNextRange(i,s){return Ma(i,(function(i){return i-Aa>=s}))},La=function printableRange(i){var s=[];if(!i||!i.length)return"";for(var _=0;_<i.length;_++)s.push(i.start(_)+" => "+i.end(_));return s.join(", ")},Ra=function timeRangesToArray(i){for(var s=[],_=0;_<i.length;_++)s.push({start:i.start(_),end:i.end(_)});return s},Na=videojs$1.createTimeRange,Da=function intervalDuration(i,s,_){if(void 0===s&&(s=i.mediaSequence+i.segments.length),s<i.mediaSequence)return 0;var T=function backwardDuration(i,s){var _=0,T=s-i.mediaSequence,S=i.segments[T];if(S){if(void 0!==S.start)return{result:S.start,precise:!0};if(void 0!==S.end)return{result:S.end-S.duration,precise:!0}}for(;T--;){if(void 0!==(S=i.segments[T]).end)return{result:_+S.end,precise:!0};if(_+=S.duration,void 0!==S.start)return{result:_+S.start,precise:!0}}return{result:_,precise:!1}}(i,s);if(T.precise)return T.result;var S=function forwardDuration(i,s){for(var _,T=0,S=s-i.mediaSequence;S<i.segments.length;S++){if(void 0!==(_=i.segments[S]).start)return{result:_.start-T,precise:!0};if(T+=_.duration,void 0!==_.end)return{result:_.end-T,precise:!0}}return{result:-1,precise:!1}}(i,s);return S.precise?S.result:T.result+_},ja=function duration(i,s,_){if(!i)return 0;if("number"!=typeof _&&(_=0),void 0===s){if(i.totalDuration)return i.totalDuration;if(!i.endList)return S()[1/0]}return Da(i,s,_)},Ba=function sumDurations(i,s,_){var T=0;if(s>_){var S=[_,s];s=S[0],_=S[1]}if(s<0){for(var C=s;C<Math.min(0,_);C++)T+=i.targetDuration;s=0}for(var P=s;P<_;P++)T+=i.segments[P].duration;return T},$a=function safeLiveIndex(i,s){if(!i.segments.length)return 0;var _=i.segments.length,T=i.segments[_-1].duration||i.targetDuration,S="number"==typeof s?s:T+2*i.targetDuration;if(0===S)return _;for(var C=0;_--&&!((C+=i.segments[_].duration)>=S););return Math.max(0,_)},Ua=function playlistEnd(i,s,_,T){if(!i||!i.segments)return null;if(i.endList)return ja(i);if(null===s)return null;s=s||0;var S=_?$a(i,T):i.segments.length;return Da(i,i.mediaSequence+S,s)},Fa=function isBlacklisted(i){return i.excludeUntil&&i.excludeUntil>Date.now()},Ha=function isIncompatible(i){return i.excludeUntil&&i.excludeUntil===1/0},qa=function isEnabled(i){var s=Fa(i);return!i.disabled&&!s},Va=function hasAttribute(i,s){return s.attributes&&s.attributes[i]},Ga=function isLowestEnabledRendition(i,s){if(1===i.playlists.length)return!0;var _=s.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===i.playlists.filter((function(i){return!!qa(i)&&(i.attributes.BANDWIDTH||0)<_})).length},Za={duration:ja,seekable:function seekable(i,s,_){var T=s||0,S=Ua(i,s,!0,_);return null===S?Na():Na(T,S)},safeLiveIndex:$a,getMediaInfoForTime:function getMediaInfoForTime(i,s,_,T){var S,C=i.segments.length,P=s-T;if(P<0){if(_>0)for(S=_-1;S>=0;S--)if((P+=i.segments[S].duration+Aa)>0)return{mediaIndex:S,startTime:T-Ba(i,_,S)};return{mediaIndex:0,startTime:s}}if(_<0){for(S=_;S<0;S++)if((P-=i.targetDuration)<0)return{mediaIndex:0,startTime:s};_=0}for(S=_;S<C;S++)if((P-=i.segments[S].duration+Aa)<0)return{mediaIndex:S,startTime:T+Ba(i,_,S)};return{mediaIndex:C-1,startTime:s}},isEnabled:qa,isDisabled:function isDisabled(i){return i.disabled},isBlacklisted:Fa,isIncompatible:Ha,playlistEnd:Ua,isAes:function isAes(i){for(var s=0;s<i.segments.length;s++)if(i.segments[s].key)return!0;return!1},hasAttribute:Va,estimateSegmentRequestTime:function estimateSegmentRequestTime(i,s,_,T){return void 0===T&&(T=0),Va("BANDWIDTH",_)?(i*_.attributes.BANDWIDTH-8*T)/s:NaN},isLowestEnabledRendition:Ga},Wa=videojs$1.xhr,Ka=videojs$1.mergeOptions,Ya=function callbackWrapper(i,s,_,T){var S="arraybuffer"===i.responseType?i.response:i.responseText;!s&&S&&(i.responseTime=Date.now(),i.roundTripTime=i.responseTime-i.requestTime,i.bytesReceived=S.byteLength||S.length,i.bandwidth||(i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3))),_.headers&&(i.responseHeaders=_.headers),s&&"ETIMEDOUT"===s.code&&(i.timedout=!0),s||i.aborted||200===_.statusCode||206===_.statusCode||0===_.statusCode||(s=new Error("XHR Failed with a response of: "+(i&&(S||i.responseText)))),T(s,i)},Xa=function xhrFactory(){return function XhrFunction(i,s){i=Ka({timeout:45e3},i);var _=XhrFunction.beforeRequest||videojs$1.Vhs.xhr.beforeRequest;if(_&&"function"==typeof _){var T=_(i);T&&(i=T)}var S=Wa(i,(function(i,_){return Ya(S,i,_,s)})),C=S.abort;return S.abort=function(){return S.aborted=!0,C.apply(S,arguments)},S.uri=i.uri,S.requestTime=Date.now(),S}},Qa=function segmentXhrHeaders(i){var s={};return i.byterange&&(s.Range=function byterangeStr(i){var s=i.offset+i.length-1;return"bytes="+i.offset+"-"+s}(i.byterange)),s},Ja=function textRange(i,s){return i.start(s)+"-"+i.end(s)},es=function formatHexString(i,s){var _=i.toString(16);return"00".substring(0,2-_.length)+_+(s%2?" ":"")},ns=function formatAsciiString(i){return i>=32&&i<126?String.fromCharCode(i):"."},rs=function createTransferableMessage(i){var s={};return Object.keys(i).forEach((function(_){var T=i[_];ArrayBuffer.isView(T)?s[_]={bytes:T.buffer,byteOffset:T.byteOffset,byteLength:T.byteLength}:s[_]=T})),s},is=function initSegmentId(i){var s=i.byterange||{length:1/0,offset:0};return[s.length,s.offset,i.resolvedUri].join(",")},as=function segmentKeyId(i){return i.resolvedUri},ss=function hexDump(i){for(var s=Array.prototype.slice.call(i),_=16,T="",S=0;S<s.length/_;S++)T+=s.slice(S*_,S*_+_).map(es).join("")+" "+s.slice(S*_,S*_+_).map(ns).join("")+"\n";return T},os=Object.freeze({__proto__:null,createTransferableMessage:rs,initSegmentId:is,segmentKeyId:as,hexDump:ss,tagDump:function tagDump(i){var s=i.bytes;return ss(s)},textRanges:function textRanges(i){var s,_="";for(s=0;s<i.length;s++)_+=Ja(i,s)+" ";return _}}),ls=function getProgramTime(i){var s=i.playlist,_=i.time,T=void 0===_?void 0:_,S=i.callback;if(!S)throw new Error("getProgramTime: callback must be provided");if(!s||void 0===T)return S({message:"getProgramTime: playlist and time must be provided"});var C=function findSegmentForPlayerTime(i,s){if(!s||!s.segments||0===s.segments.length)return null;for(var _,T=0,S=0;S<s.segments.length&&!(i<=(T=(_=s.segments[S]).videoTimingInfo?_.videoTimingInfo.transmuxedPresentationEnd:T+_.duration));S++);var C=s.segments[s.segments.length-1];if(C.videoTimingInfo&&C.videoTimingInfo.transmuxedPresentationEnd<i)return null;if(i>T){if(i>T+.25*C.duration)return null;_=C}return{segment:_,estimatedStart:_.videoTimingInfo?_.videoTimingInfo.transmuxedPresentationStart:T-_.duration,type:_.videoTimingInfo?"accurate":"estimate"}}(T,s);if(!C)return S({message:"valid programTime was not found"});if("estimate"===C.type)return S({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:C.estimatedStart});var P={mediaSeconds:T},O=function playerTimeToProgramTime(i,s){if(!s.dateTimeObject)return null;var _=s.videoTimingInfo.transmuxerPrependedSeconds,T=i-(s.videoTimingInfo.transmuxedPresentationStart+_);return new Date(s.dateTimeObject.getTime()+1e3*T)}(T,C.segment);return O&&(P.programDateTime=O.toISOString()),S(null,P)},cs=function seekToProgramTime(i){var s=i.programTime,_=i.playlist,T=i.retryCount,S=void 0===T?2:T,C=i.seekTo,P=i.pauseAfterSeek,O=void 0===P||P,M=i.tech,R=i.callback;if(!R)throw new Error("seekToProgramTime: callback must be provided");if(void 0===s||!_||!C)return R({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!_.endList&&!M.hasStarted_)return R({message:"player must be playing a live stream to start buffering"});if(!function verifyProgramDateTimeTags(i){if(!i.segments||0===i.segments.length)return!1;for(var s=0;s<i.segments.length;s++)if(!i.segments[s].dateTimeObject)return!1;return!0}(_))return R({message:"programDateTime tags must be provided in the manifest "+_.resolvedUri});var D=function findSegmentForProgramTime(i,s){var _;try{_=new Date(i)}catch(M){return null}if(!s||!s.segments||0===s.segments.length)return null;var T=s.segments[0];if(_<T.dateTimeObject)return null;for(var S=0;S<s.segments.length-1&&(T=s.segments[S],!(_<s.segments[S+1].dateTimeObject));S++);var C=s.segments[s.segments.length-1],P=C.dateTimeObject,O=C.videoTimingInfo?function originalSegmentVideoDuration(i){return i.transmuxedPresentationEnd-i.transmuxedPresentationStart-i.transmuxerPrependedSeconds}(C.videoTimingInfo):C.duration+.25*C.duration;return _>new Date(P.getTime()+1e3*O)?null:(_>P&&(T=C),{segment:T,estimatedStart:T.videoTimingInfo?T.videoTimingInfo.transmuxedPresentationStart:Za.duration(s,s.mediaSequence+s.segments.indexOf(T)),type:T.videoTimingInfo?"accurate":"estimate"})}(s,_);if(!D)return R({message:s+" was not found in the stream"});var j=D.segment,$=function getOffsetFromTimestamp(i,s){var _,T;try{_=new Date(i),T=new Date(s)}catch(C){}var S=_.getTime();return(T.getTime()-S)/1e3}(j.dateTimeObject,s);if("estimate"===D.type)return 0===S?R({message:s+" is not buffered yet. Try again"}):(C(D.estimatedStart+$),void M.one("seeked",(function(){seekToProgramTime({programTime:s,playlist:_,retryCount:S-1,seekTo:C,pauseAfterSeek:O,tech:M,callback:R})})));var U=j.start+$;M.one("seeked",(function seekedCallback(){return R(null,M.currentTime())})),O&&M.pause(),C(U)},us=function callbackOnCompleted(i,s){if(4===i.readyState)return s()},ds=videojs$1.EventTarget,hs=videojs$1.mergeOptions,ps=function generateSidxKey(i){var s=i.byterange.offset+i.byterange.length-1;return i.uri+"-"+i.byterange.offset+"-"+s},ms=function equivalentSidx(i,s){return(Boolean(!i.map&&!s.map)||Boolean(i.map&&s.map&&i.map.byterange.offset===s.map.byterange.offset&&i.map.byterange.length===s.map.byterange.length))&&i.uri===s.uri&&i.byterange.offset===s.byterange.offset&&i.byterange.length===s.byterange.length},fs=function compareSidxEntry(i,s){var _={};for(var T in i){var S=i[T].sidx;if(S){var C=ps(S);if(!s[C])break;var P=s[C].sidxInfo;ms(P,S)&&(_[C]=s[C])}}return _},gs=function(i){function DashPlaylistLoader(s,_,T,S){var C;void 0===T&&(T={}),(C=i.call(this)||this).masterPlaylistLoader_=S||(0,O.Z)(C),S||(C.isMaster_=!0);var P=T,M=P.withCredentials,R=void 0!==M&&M,D=P.handleManifestRedirects,j=void 0!==D&&D;if(C.vhs_=_,C.withCredentials=R,C.handleManifestRedirects=j,!s)throw new Error("A non-empty playlist URL or object is required");return C.on("minimumUpdatePeriod",(function(){C.refreshXml_()})),C.on("mediaupdatetimeout",(function(){C.refreshMedia_(C.media().id)})),C.state="HAVE_NOTHING",C.loadedPlaylists_={},C.isMaster_?(C.masterPlaylistLoader_.srcUrl=s,C.masterPlaylistLoader_.sidxMapping_={}):C.childPlaylist_=s,C}_inheritsLoose(DashPlaylistLoader,i);var s=DashPlaylistLoader.prototype;return s.requestErrored_=function requestErrored_(i,s,_){return!this.request||(this.request=null,i?(this.error="object"!=typeof i||i instanceof Error?{status:s.status,message:"DASH request error at URL: "+s.uri,response:s.response,code:2}:i,_&&(this.state=_),this.trigger("error"),!0):void 0)},s.addSidxSegments_=function addSidxSegments_(i,s,_){var T=this,C=i.sidx&&ps(i.sidx);if(i.sidx&&C&&!this.masterPlaylistLoader_.sidxMapping_[C]){var P=ga(this.handleManifestRedirects,i.sidx.resolvedUri),O=this.masterPlaylistLoader_.sidxMapping_;O[C]={sidxInfo:i.sidx};var M=function fin(S,P){if(!T.requestErrored_(S,P,s)){var M=nt()((0,it.Ki)(P.response).subarray(8));return O[C].sidx=M,et(i,M,i.sidx.resolvedUri),_(!0)}};this.request=function containerRequest(i,s,_){var T,S=[],C=!1,P=function endRequestAndCallback(i,s,T,S){return s.abort(),C=!0,_(i,s,T,S)},O=function progressListener(i,s){if(!C){if(i)return P(i,s,"",S);var _=s.responseText.substring(S&&S.byteLength||0,s.responseText.length);if(S=(0,it.lx)(S,(0,it.qX)(_,!0)),T=T||(0,rt.cc)(S),S.length<10||T&&S.length<T+2)return us(s,(function(){return P(i,s,"",S)}));var O=(0,rt.Xm)(S);return"ts"===O&&S.length<188||!O&&S.length<376?us(s,(function(){return P(i,s,"",S)})):P(null,s,O,S)}},M={uri:i,beforeSend:function beforeSend(i){i.overrideMimeType("text/plain; charset=x-user-defined"),i.addEventListener("progress",(function(s){return s.total,s.loaded,Ya(i,null,{statusCode:i.status},O)}))}},R=s(M,(function(i,s){return Ya(R,i,s,O)}));return R}(P,this.vhs_.xhr,(function(s,_,S,C){if(s)return M(s,_);if(!S||"mp4"!==S)return M({status:_.status,message:"Unsupported "+(S||"unknown")+" container type for sidx segment at URL: "+P,response:"",playlist:i,internal:!0,blacklistDuration:1/0,code:2},_);var O=i.sidx.byterange,R=O.offset,D=O.length;if(C.length>=D+R)return M(s,{response:C.subarray(R,R+D),status:_.status,uri:_.uri});T.request=T.vhs_.xhr({uri:P,responseType:"arraybuffer",headers:Qa({byterange:i.sidx.byterange})},M)}))}else this.mediaRequest_=S().setTimeout((function(){return _(!1)}),0)},s.dispose=function dispose(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},S().clearTimeout(this.minimumUpdatePeriodTimeout_),S().clearTimeout(this.mediaRequest_),S().clearTimeout(this.mediaUpdateTimeout),this.off()},s.hasPendingRequest=function hasPendingRequest(){return this.request||this.mediaRequest_},s.stopRequest=function stopRequest(){if(this.request){var i=this.request;this.request=null,i.onreadystatechange=null,i.abort()}},s.media=function media(i){var s=this;if(!i)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var _=this.state;if("string"==typeof i){if(!this.masterPlaylistLoader_.master.playlists[i])throw new Error("Unknown playlist URI: "+i);i=this.masterPlaylistLoader_.master.playlists[i]}var T=!this.media_||i.id!==this.media_.id;if(T&&this.loadedPlaylists_[i.id]&&this.loadedPlaylists_[i.id].endList)return this.state="HAVE_METADATA",this.media_=i,void(T&&(this.trigger("mediachanging"),this.trigger("mediachange")));T&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(i,_,(function(T){s.haveMetadata({startingState:_,playlist:i})})))},s.haveMetadata=function haveMetadata(i){var s=i.startingState,_=i.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[_.id]=_,this.mediaRequest_=null,this.refreshMedia_(_.id),"HAVE_MASTER"===s?this.trigger("loadedmetadata"):this.trigger("mediachange")},s.pause=function pause(){this.stopRequest(),S().clearTimeout(this.mediaUpdateTimeout),S().clearTimeout(this.minimumUpdatePeriodTimeout_),"HAVE_NOTHING"===this.state&&(this.started=!1)},s.load=function load(i){var s=this;S().clearTimeout(this.mediaUpdateTimeout),S().clearTimeout(this.minimumUpdatePeriodTimeout_);var _=this.media();if(i){var T=_?_.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=S().setTimeout((function(){return s.load()}),T)}else this.started?_&&!_.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()},s.start=function start(){var i=this;this.started=!0,this.isMaster_?this.requestMaster_((function(s,_){i.haveMaster_(),i.hasPendingRequest()||i.media_||i.media(i.masterPlaylistLoader_.master.playlists[0])})):this.mediaRequest_=S().setTimeout((function(){return i.haveMaster_()}),0)},s.requestMaster_=function requestMaster_(i){var s=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},(function(_,T){if(!s.requestErrored_(_,T)){var S=T.responseText!==s.masterPlaylistLoader_.masterXml_;return s.masterPlaylistLoader_.masterXml_=T.responseText,T.responseHeaders&&T.responseHeaders.date?s.masterLoaded_=Date.parse(T.responseHeaders.date):s.masterLoaded_=Date.now(),s.masterPlaylistLoader_.srcUrl=ga(s.handleManifestRedirects,s.masterPlaylistLoader_.srcUrl,T),S?(s.handleMaster_(),void s.syncClientServerClock_((function(){return i(T,S)}))):i(T,S)}"HAVE_NOTHING"===s.state&&(s.started=!1)}))},s.syncClientServerClock_=function syncClientServerClock_(i){var s=this,_=Je(this.masterPlaylistLoader_.masterXml_);return null===_?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),i()):"DIRECT"===_.method?(this.masterPlaylistLoader_.clientOffset_=_.value-Date.now(),i()):void(this.request=this.vhs_.xhr({uri:fa(this.masterPlaylistLoader_.srcUrl,_.value),method:_.method,withCredentials:this.withCredentials},(function(T,S){if(s.request){if(T)return s.masterPlaylistLoader_.clientOffset_=s.masterLoaded_-Date.now(),i();var C;C="HEAD"===_.method?S.responseHeaders&&S.responseHeaders.date?Date.parse(S.responseHeaders.date):s.masterLoaded_:Date.parse(S.responseText),s.masterPlaylistLoader_.clientOffset_=C-Date.now(),i()}})))},s.haveMaster_=function haveMaster_(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},s.handleMaster_=function handleMaster_(){this.mediaRequest_=null;var i=function parseMasterXml(i){var s=i.masterXml,_=i.srcUrl,T=i.clientOffset,S=i.sidxMapping,C=Qe(s,{manifestUri:_,clientOffset:T,sidxMapping:S});return ka(C,_),C}({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_}),s=this.masterPlaylistLoader_.master;s&&(i=function updateMaster$1(i,s,_){for(var T=!0,S=hs(i,{duration:s.duration,minimumUpdatePeriod:s.minimumUpdatePeriod}),C=0;C<s.playlists.length;C++){var P=s.playlists[C];if(P.sidx){var O=ps(P.sidx);_&&_[O]&&et(P,_[O].sidx,P.sidx.resolvedUri)}var M=xa(S,P);M&&(S=M,T=!1)}return _a(s,(function(i,s,_,C){if(i.playlists&&i.playlists.length){var P=i.playlists[0].id,O=xa(S,i.playlists[0]);O&&((S=O).mediaGroups[s][_][C].playlists[0]=S.playlists[P],T=!1)}})),s.minimumUpdatePeriod!==i.minimumUpdatePeriod&&(T=!1),T?null:S}(s,i,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=i||s;var _=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return _&&_!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=_),(!s||i&&s.minimumUpdatePeriod!==i.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(i)},s.updateMinimumUpdatePeriodTimeout_=function updateMinimumUpdatePeriodTimeout_(){var i=this;S().clearTimeout(this.minimumUpdatePeriodTimeout_);var s=function createMUPTimeout(s){i.minimumUpdatePeriodTimeout_=S().setTimeout((function(){i.trigger("minimumUpdatePeriod"),createMUPTimeout(s)}),s)},_=this.masterPlaylistLoader_.master&&this.masterPlaylistLoader_.master.minimumUpdatePeriod;_>0?s(_):0===_&&(this.media()?s(1e3*this.media().targetDuration):this.one("loadedplaylist",(function(){s(1e3*i.media().targetDuration)})))},s.refreshXml_=function refreshXml_(){var i=this;this.requestMaster_((function(s,_){_&&(i.media_&&(i.media_=i.masterPlaylistLoader_.master.playlists[i.media_.id]),i.masterPlaylistLoader_.sidxMapping_=function filterChangedSidxMappings(i,s){var _=fs(i.playlists,s);return _a(i,(function(i,T,S,C){if(i.playlists&&i.playlists.length){var P=i.playlists;_=hs(_,fs(P,s))}})),_}(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.sidxMapping_),i.addSidxSegments_(i.media(),i.state,(function(s){i.refreshMedia_(i.media().id)})))}))},s.refreshMedia_=function refreshMedia_(i){var s=this;if(!i)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var _=this.masterPlaylistLoader_.master.playlists,T=!this.media_||this.media_!==_[i];T?this.media_=_[i]:this.trigger("playlistunchanged"),this.media().endList||(this.mediaUpdateTimeout=S().setTimeout((function(){s.trigger("mediaupdatetimeout")}),Ea(this.media(),Boolean(T)))),this.trigger("loadedplaylist")},DashPlaylistLoader}(ds),vs={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},bs=function stringToArrayBuffer(i){for(var s=new Uint8Array(new ArrayBuffer(i.length)),_=0;_<i.length;_++)s[_]=i.charCodeAt(_);return s.buffer},ys=[],_s=function processTransmux(i){var s=i.transmuxer,_=i.bytes,T=i.audioAppendStart,S=i.gopsToAlignWith,C=i.isPartial,P=i.remux,O=i.onData,M=i.onTrackInfo,R=i.onAudioTimingInfo,D=i.onVideoTimingInfo,j=i.onVideoSegmentTimingInfo,$=i.onAudioSegmentTimingInfo,U=i.onId3,V=i.onCaptions,Z=i.onDone,Y={isPartial:C,buffer:[]};if(s.onmessage=function handleMessage(i){ma&&("data"===i.data.action&&function handleData_(i,s,_){var T=i.data.segment,S=T.type,C=T.initSegment,P=T.captions,O=T.captionStreams,M=T.metadata,R=T.videoFrameDtsTime,D=T.videoFramePtsTime;s.buffer.push({captions:P,captionStreams:O,metadata:M});var j=i.data.segment.boxes||{data:i.data.segment.data},$={type:S,data:new Uint8Array(j.data,j.data.byteOffset,j.data.byteLength),initSegment:new Uint8Array(C.data,C.byteOffset,C.byteLength)};void 0!==R&&($.videoFrameDtsTime=R),void 0!==D&&($.videoFramePtsTime=D),_($)}(i,Y,O),"trackinfo"===i.data.action&&M(i.data.trackInfo),"gopInfo"===i.data.action&&function handleGopInfo_(i,s){s.gopInfo=i.data.gopInfo}(i,Y),"audioTimingInfo"===i.data.action&&R(i.data.audioTimingInfo),"videoTimingInfo"===i.data.action&&D(i.data.videoTimingInfo),"videoSegmentTimingInfo"===i.data.action&&j(i.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===i.data.action&&$(i.data.audioSegmentTimingInfo),"id3Frame"===i.data.action&&U([i.data.id3Frame],i.data.id3Frame.dispatchType),"caption"===i.data.action&&V(i.data.caption),"transmuxed"===i.data.type&&(s.onmessage=null,function handleDone_(i){var s=i.transmuxedData,_=i.callback;s.buffer=[],_(s)}({transmuxedData:Y,callback:Z}),ws()))},T&&s.postMessage({action:"setAudioAppendStart",appendStart:T}),Array.isArray(S)&&s.postMessage({action:"alignGopsWith",gopsToAlignWith:S}),void 0!==P&&s.postMessage({action:"setRemux",remux:P}),_.byteLength){var X=_ instanceof ArrayBuffer?_:_.buffer,Q=_ instanceof ArrayBuffer?0:_.byteOffset;s.postMessage({action:"push",data:X,byteOffset:Q,byteLength:_.byteLength},[X])}s.postMessage({action:C?"partialFlush":"flush"})},ws=function dequeue(){ma=null,ys.length&&("function"==typeof(ma=ys.shift())?ma():_s(ma))},ks=function processAction(i,s){i.postMessage({action:s}),ws()},Ts=function enqueueAction(i,s){if(!ma)return ma=i,void ks(s,i);ys.push(ks.bind(null,s,i))},Ss=function transmux(i){if(!ma)return ma=i,void _s(i);ys.push(i)},Cs=function reset(i){Ts("reset",i)},xs=function dispose(){ma=null,ys.length=0},Es=function endTimeline(i){Ts("endTimeline",i)},Ps=2,As=-101,Os=-102,Ms=function abortAll(i){i.forEach((function(i){i.abort()}))},zs=function handleErrors(i,s){return s.timedout?{status:s.status,message:"HLS request timed-out at URL: "+s.uri,code:As,xhr:s}:s.aborted?{status:s.status,message:"HLS request aborted at URL: "+s.uri,code:Os,xhr:s}:i?{status:s.status,message:"HLS request errored at URL: "+s.uri,code:Ps,xhr:s}:null},Is=function transmuxAndNotify(i){var s=i.segment,_=i.bytes,T=i.isPartial,S=i.trackInfoFn,C=i.timingInfoFn,P=i.videoSegmentTimingInfoFn,O=i.audioSegmentTimingInfoFn,M=i.id3Fn,R=i.captionsFn,D=i.dataFn,j=i.doneFn,$=s.map&&s.map.tracks||{},U=Boolean($.audio&&$.video),V=C.bind(null,s,"audio","start"),Z=C.bind(null,s,"audio","end"),Y=C.bind(null,s,"video","start"),X=C.bind(null,s,"video","end");if(!T&&!s.lastReachedChar){var Q=function probeTsSegment(i,s){var _=st().inspect(i,s*ot.ONE_SECOND_IN_TS);if(!_)return null;var T={hasVideo:_.video&&2===_.video.length||!1,hasAudio:_.audio&&2===_.audio.length||!1};return T.hasVideo&&(T.videoStart=_.video[0].ptsTime),T.hasAudio&&(T.audioStart=_.audio[0].ptsTime),T}(_,s.baseStartTime);Q&&(S(s,{hasAudio:Q.hasAudio,hasVideo:Q.hasVideo,isMuxed:U}),S=null,Q.hasAudio&&!U&&V(Q.audioStart),Q.hasVideo&&Y(Q.videoStart),V=null,Y=null)}Ss({bytes:_,transmuxer:s.transmuxer,audioAppendStart:s.audioAppendStart,gopsToAlignWith:s.gopsToAlignWith,isPartial:T,remux:U,onData:function onData(i){i.type="combined"===i.type?"video":i.type,D(s,i)},onTrackInfo:function onTrackInfo(i){S&&(U&&(i.isMuxed=!0),S(s,i))},onAudioTimingInfo:function onAudioTimingInfo(i){V&&void 0!==i.start&&(V(i.start),V=null),Z&&void 0!==i.end&&Z(i.end)},onVideoTimingInfo:function onVideoTimingInfo(i){Y&&void 0!==i.start&&(Y(i.start),Y=null),X&&void 0!==i.end&&X(i.end)},onVideoSegmentTimingInfo:function onVideoSegmentTimingInfo(i){P(i)},onAudioSegmentTimingInfo:function onAudioSegmentTimingInfo(i){O(i)},onId3:function onId3(i,_){M(s,i,_)},onCaptions:function onCaptions(i){R(s,[i])},onDone:function onDone(i){j&&!T&&(i.type="combined"===i.type?"video":i.type,j(null,s,i))}})},Ls=function handleSegmentBytes(i){var s=i.segment,_=i.bytes,T=i.isPartial,S=i.trackInfoFn,C=i.timingInfoFn,P=i.videoSegmentTimingInfoFn,O=i.audioSegmentTimingInfoFn,M=i.id3Fn,R=i.captionsFn,D=i.dataFn,j=i.doneFn,$=new Uint8Array(_);if((0,rt.cz)($)){s.isFmp4=!0;var U=s.map.tracks,V={isFmp4:!0,hasVideo:!!U.video,hasAudio:!!U.audio};U.audio&&U.audio.codec&&"enca"!==U.audio.codec&&(V.audioCodec=U.audio.codec),U.video&&U.video.codec&&"encv"!==U.video.codec&&(V.videoCodec=U.video.codec),U.video&&U.audio&&(V.isMuxed=!0),S(s,V);var Z=ct().startTime(s.map.timescales,$);V.hasAudio&&!V.isMuxed&&C(s,"audio","start",Z),V.hasVideo&&C(s,"video","start",Z);var Y=function finishLoading(i){D(s,{data:_,type:V.hasAudio&&!V.isMuxed?"audio":"video"}),i&&i.length&&R(s,i),j(null,s,{})};if(!U.video||!_.byteLength||!s.transmuxer)return void Y();var X=_ instanceof ArrayBuffer?_:_.buffer,Q=_ instanceof ArrayBuffer?0:_.byteOffset;return s.transmuxer.addEventListener("message",(function listenForCaptions(i){if("mp4Captions"===i.data.action){s.transmuxer.removeEventListener("message",listenForCaptions);var T=i.data.data;s.bytes=_=new Uint8Array(T,T.byteOffset||0,T.byteLength),Y(i.data.captions)}})),void s.transmuxer.postMessage({action:"pushMp4Captions",timescales:s.map.timescales,trackIds:[U.video.id],data:X,byteOffset:Q,byteLength:_.byteLength},[X])}if(s.transmuxer){if(void 0===s.container&&(s.container=(0,rt.Xm)($)),"ts"!==s.container&&"aac"!==s.container)return S(s,{hasAudio:!1,hasVideo:!1}),void j(null,s,{});Is({segment:s,bytes:_,isPartial:T,trackInfoFn:S,timingInfoFn:C,videoSegmentTimingInfoFn:P,audioSegmentTimingInfoFn:O,id3Fn:M,captionsFn:R,dataFn:D,doneFn:j})}else j(null,s,{})},Rs=function waitForCompletion(i){var s=i.activeXhrs,_=i.decryptionWorker,T=i.trackInfoFn,S=i.timingInfoFn,C=i.videoSegmentTimingInfoFn,P=i.audioSegmentTimingInfoFn,O=i.id3Fn,M=i.captionsFn,R=i.dataFn,D=i.doneFn,j=0,$=!1;return function(i,U){if(!$){if(i)return $=!0,Ms(s),D(i,U);if((j+=1)===s.length){if(U.endOfAllRequests=Date.now(),U.encryptedBytes)return function decryptSegment(i){var s,_=i.decryptionWorker,T=i.segment,S=i.trackInfoFn,C=i.timingInfoFn,P=i.videoSegmentTimingInfoFn,O=i.audioSegmentTimingInfoFn,M=i.id3Fn,R=i.captionsFn,D=i.dataFn,j=i.doneFn;_.addEventListener("message",(function decryptionHandler(i){if(i.data.source===T.requestId){_.removeEventListener("message",decryptionHandler);var s=i.data.decrypted;T.bytes=new Uint8Array(s.bytes,s.byteOffset,s.byteLength),Ls({segment:T,bytes:T.bytes,isPartial:!1,trackInfoFn:S,timingInfoFn:C,videoSegmentTimingInfoFn:P,audioSegmentTimingInfoFn:O,id3Fn:M,captionsFn:R,dataFn:D,doneFn:j})}})),s=T.key.bytes.slice?T.key.bytes.slice():new Uint32Array(Array.prototype.slice.call(T.key.bytes)),_.postMessage(rs({source:T.requestId,encrypted:T.encryptedBytes,key:s,iv:T.key.iv}),[T.encryptedBytes.buffer,s.buffer])}({decryptionWorker:_,segment:U,trackInfoFn:T,timingInfoFn:S,videoSegmentTimingInfoFn:C,audioSegmentTimingInfoFn:P,id3Fn:O,captionsFn:M,dataFn:R,doneFn:D});Ls({segment:U,bytes:U.bytes,isPartial:!1,trackInfoFn:T,timingInfoFn:S,videoSegmentTimingInfoFn:C,audioSegmentTimingInfoFn:P,id3Fn:O,captionsFn:M,dataFn:R,doneFn:D})}}}},Ns=function handleProgress(i){var s=i.segment,_=i.progressFn,T=i.trackInfoFn,S=i.timingInfoFn,C=i.videoSegmentTimingInfoFn,P=i.audioSegmentTimingInfoFn,O=i.id3Fn,M=i.captionsFn,R=i.dataFn,D=i.handlePartialData;return function(i){var j=i.target;if(!j.aborted){if(D&&!s.key&&j.responseText&&j.responseText.length>=8){var $=bs(j.responseText.substring(s.lastReachedChar||0));!s.lastReachedChar&&(0,rt.cz)(new Uint8Array($))||(s.lastReachedChar=j.responseText.length,Ls({segment:s,bytes:$,isPartial:!0,trackInfoFn:T,timingInfoFn:S,videoSegmentTimingInfoFn:C,audioSegmentTimingInfoFn:P,id3Fn:O,captionsFn:M,dataFn:R}))}return s.stats=videojs$1.mergeOptions(s.stats,function getProgressStats(i){var s=i.target,_={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-s.requestTime||0};return _.bytesReceived=i.loaded,_.bandwidth=Math.floor(_.bytesReceived/_.roundTripTime*8*1e3),_}(i)),!s.stats.firstBytesReceivedAt&&s.stats.bytesReceived&&(s.stats.firstBytesReceivedAt=Date.now()),_(i,s)}}},Ds=function mediaSegmentRequest(i){var s=i.xhr,_=i.xhrOptions,T=i.decryptionWorker,S=i.segment,C=i.abortFn,P=i.progressFn,O=i.trackInfoFn,M=i.timingInfoFn,R=i.videoSegmentTimingInfoFn,D=i.audioSegmentTimingInfoFn,j=i.id3Fn,$=i.captionsFn,U=i.dataFn,V=i.doneFn,Z=i.handlePartialData,Y=[],X=Rs({activeXhrs:Y,decryptionWorker:T,trackInfoFn:O,timingInfoFn:M,videoSegmentTimingInfoFn:R,audioSegmentTimingInfoFn:D,id3Fn:j,captionsFn:$,dataFn:U,doneFn:V});if(S.key&&!S.key.bytes){var Q=videojs$1.mergeOptions(_,{uri:S.key.resolvedUri,responseType:"arraybuffer"}),ee=function handleKeyResponse(i,s){return function(_,T){var S=T.response,C=zs(_,T);if(C)return s(C,i);if(16!==S.byteLength)return s({status:T.status,message:"Invalid HLS key at URL: "+T.uri,code:Ps,xhr:T},i);var P=new DataView(S);return i.key.bytes=new Uint32Array([P.getUint32(0),P.getUint32(4),P.getUint32(8),P.getUint32(12)]),s(null,i)}}(S,X),te=s(Q,ee);Y.push(te)}if(S.map&&!S.map.bytes){var ne=videojs$1.mergeOptions(_,{uri:S.map.resolvedUri,responseType:"arraybuffer",headers:Qa(S.map)}),re=function handleInitSegmentResponse(i){var s=i.segment,_=i.finishProcessingFn;return function(i,T){var S=T.response,C=zs(i,T);if(C)return _(C,s);if(0===S.byteLength)return _({status:T.status,message:"Empty HLS segment content at URL: "+T.uri,code:Ps,xhr:T},s);s.map.bytes=new Uint8Array(T.response);var P=(0,rt.Xm)(s.map.bytes);return"mp4"!==P?_({status:T.status,message:"Found unsupported "+(P||"unknown")+" container for initialization segment at URL: "+T.uri,code:Ps,internal:!0,xhr:T},s):(ct().tracks(s.map.bytes).forEach((function(i){s.map.tracks=s.map.tracks||{},s.map.tracks[i.type]||(s.map.tracks[i.type]=i,"number"==typeof i.id&&i.timescale&&(s.map.timescales=s.map.timescales||{},s.map.timescales[i.id]=i.timescale))})),_(null,s))}}({segment:S,finishProcessingFn:X}),ie=s(ne,re);Y.push(ie)}var ae=videojs$1.mergeOptions(_,{uri:S.resolvedUri,responseType:"arraybuffer",headers:Qa(S)});Z&&(ae.responseType="text",ae.beforeSend=function(i){i.overrideMimeType("text/plain; charset=x-user-defined")});var se=function handleSegmentResponse(i){var s=i.segment,_=i.finishProcessingFn,T=i.responseType;return function(i,S){var C=S.response,P=zs(i,S);if(P)return _(P,s);var O="arraybuffer"!==T&&S.responseText?bs(S.responseText.substring(s.lastReachedChar||0)):S.response;return 0===C.byteLength?_({status:S.status,message:"Empty HLS segment content at URL: "+S.uri,code:Ps,xhr:S},s):(s.stats=function getRequestStats(i){return{bandwidth:i.bandwidth,bytesReceived:i.bytesReceived||0,roundTripTime:i.roundTripTime||0}}(S),s.key?s.encryptedBytes=new Uint8Array(O):s.bytes=new Uint8Array(O),_(null,s))}}({segment:S,finishProcessingFn:X,responseType:ae.responseType}),oe=s(ae,se);oe.addEventListener("progress",Ns({segment:S,progressFn:P,trackInfoFn:O,timingInfoFn:M,videoSegmentTimingInfoFn:R,audioSegmentTimingInfoFn:D,id3Fn:j,captionsFn:$,dataFn:U,handlePartialData:Z})),Y.push(oe);var le={};return Y.forEach((function(i){i.addEventListener("loadend",function handleLoadEnd(i){var s=i.loadendState,_=i.abortFn;return function(i){i.target.aborted&&_&&!s.calledAbortFn&&(_(),s.calledAbortFn=!0)}}({loadendState:le,abortFn:C}))})),function(){return Ms(Y)}},js="undefined"!=typeof window?window:{},Bs="undefined"==typeof Symbol?"__target":Symbol(),$s=js.BlobBuilder||js.WebKitBlobBuilder||js.MozBlobBuilder||js.MSBlobBuilder,Us=js.URL||js.webkitURL||Us&&Us.msURL,Fs=js.Worker;function shimWorker(i,s){return function ShimWorker(_){var T=this;if(!s)return new Fs(i);if(Fs&&!_){var S=createSourceObject(s.toString().replace(/^function.+?{/,"").slice(0,-1));return this[Bs]=new Fs(S),function wrapTerminate(i,s){if(!i||!s)return;var _=i.terminate;i.objURL=s,i.terminate=function(){i.objURL&&Us.revokeObjectURL(i.objURL),_.call(i)}}(this[Bs],S),this[Bs]}var C={postMessage:function postMessage(i){T.onmessage&&setTimeout((function(){T.onmessage({data:i,target:C})}))}};s.call(C),this.postMessage=function(i){setTimeout((function(){C.onmessage({data:i,target:T})}))},this.isThisThread=!0}}if(Fs){var Hs,qs=createSourceObject("self.onmessage = function () {}"),Vs=new Uint8Array(1);try{(Hs=new Fs(qs)).postMessage(Vs,[Vs.buffer])}catch(vl){Fs=null}finally{Us.revokeObjectURL(qs),Hs&&Hs.terminate()}}function createSourceObject(i){try{return Us.createObjectURL(new Blob([i],{type:"application/javascript"}))}catch(vl){var s=new $s;return s.append(i),Us.createObjectURL(s.getBlob(type))}}var Gs=new shimWorker("./transmuxer-worker.worker.js",(function(i,s){var _=this;
/*! @name @videojs/http-streaming @version 2.4.2 @license Apache-2.0 */!function(){var i=function Stream(){this.init=function(){var i={};this.on=function(s,_){i[s]||(i[s]=[]),i[s]=i[s].concat(_)},this.off=function(s,_){var T;return!!i[s]&&(T=i[s].indexOf(_),i[s]=i[s].slice(),i[s].splice(T,1),T>-1)},this.trigger=function(s){var _,T,S,C;if(_=i[s])if(2===arguments.length)for(S=_.length,T=0;T<S;++T)_[T].call(this,arguments[1]);else{for(C=[],T=arguments.length,T=1;T<arguments.length;++T)C.push(arguments[T]);for(S=_.length,T=0;T<S;++T)_[T].apply(this,C)}},this.dispose=function(){i={}}}};i.prototype.pipe=function(i){return this.on("data",(function(s){i.push(s)})),this.on("done",(function(s){i.flush(s)})),this.on("partialdone",(function(s){i.partialFlush(s)})),this.on("endedtimeline",(function(s){i.endTimeline(s)})),this.on("reset",(function(s){i.reset(s)})),i},i.prototype.push=function(i){this.trigger("data",i)},i.prototype.flush=function(i){this.trigger("done",i)},i.prototype.partialFlush=function(i){this.trigger("partialdone",i)},i.prototype.endTimeline=function(i){this.trigger("endedtimeline",i)},i.prototype.reset=function(i){this.trigger("reset",i)};var s,T,S,C,P,O,M,R,D,j,$,U,V,Z,Y,X,Q,ee,te,ne,re,ie,ae,se,oe,le,ce,ue,de,he,pe,me,fe,ge,ve,be,ye,_e,we,ke,Te=i,Se=Math.pow(2,32)-1;!function(){var i;if(ie={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(i in ie)ie.hasOwnProperty(i)&&(ie[i]=[i.charCodeAt(0),i.charCodeAt(1),i.charCodeAt(2),i.charCodeAt(3)]);ae=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),oe=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),se=new Uint8Array([0,0,0,1]),le=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),ce=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),ue={video:le,audio:ce},pe=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),he=new Uint8Array([0,0,0,0,0,0,0,0]),me=new Uint8Array([0,0,0,0,0,0,0,0]),fe=me,ge=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),ve=me,de=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),s=function box(i){var s,_,T=[],S=0;for(s=1;s<arguments.length;s++)T.push(arguments[s]);for(s=T.length;s--;)S+=T[s].byteLength;for(_=new Uint8Array(S+8),new DataView(_.buffer,_.byteOffset,_.byteLength).setUint32(0,_.byteLength),_.set(i,4),s=0,S=8;s<T.length;s++)_.set(T[s],S),S+=T[s].byteLength;return _},T=function dinf(){return s(ie.dinf,s(ie.dref,pe))},S=function esds(i){return s(ie.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,i.audioobjecttype<<3|i.samplingfrequencyindex>>>1,i.samplingfrequencyindex<<7|i.channelcount<<3,6,1,2]))},Y=function hdlr(i){return s(ie.hdlr,ue[i])},Z=function mdhd(i){var _=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,i.duration>>>24&255,i.duration>>>16&255,i.duration>>>8&255,255&i.duration,85,196,0,0]);return i.samplerate&&(_[12]=i.samplerate>>>24&255,_[13]=i.samplerate>>>16&255,_[14]=i.samplerate>>>8&255,_[15]=255&i.samplerate),s(ie.mdhd,_)},V=function mdia(i){return s(ie.mdia,Z(i),Y(i.type),O(i))},P=function mfhd(i){return s(ie.mfhd,new Uint8Array([0,0,0,0,(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i]))},O=function minf(i){return s(ie.minf,"video"===i.type?s(ie.vmhd,de):s(ie.smhd,he),T(),Q(i))},M=function moof(i,_){for(var T=[],S=_.length;S--;)T[S]=te(_[S]);return s.apply(null,[ie.moof,P(i)].concat(T))},R=function moov(i){for(var _=i.length,T=[];_--;)T[_]=$(i[_]);return s.apply(null,[ie.moov,j(4294967295)].concat(T).concat(D(i)))},D=function mvex(i){for(var _=i.length,T=[];_--;)T[_]=ne(i[_]);return s.apply(null,[ie.mvex].concat(T))},j=function mvhd(i){var _=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return s(ie.mvhd,_)},X=function sdtp(i){var _,T,S=i.samples||[],C=new Uint8Array(4+S.length);for(T=0;T<S.length;T++)_=S[T].flags,C[T+4]=_.dependsOn<<4|_.isDependedOn<<2|_.hasRedundancy;return s(ie.sdtp,C)},Q=function stbl(i){return s(ie.stbl,ee(i),s(ie.stts,ve),s(ie.stsc,fe),s(ie.stsz,ge),s(ie.stco,me))},ee=function stsd(i){return s(ie.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===i.type?be(i):ye(i))},be=function videoSample(i){var _,T,S=i.sps||[],C=i.pps||[],P=[],O=[];for(_=0;_<S.length;_++)P.push((65280&S[_].byteLength)>>>8),P.push(255&S[_].byteLength),P=P.concat(Array.prototype.slice.call(S[_]));for(_=0;_<C.length;_++)O.push((65280&C[_].byteLength)>>>8),O.push(255&C[_].byteLength),O=O.concat(Array.prototype.slice.call(C[_]));if(T=[ie.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&i.width)>>8,255&i.width,(65280&i.height)>>8,255&i.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s(ie.avcC,new Uint8Array([1,i.profileIdc,i.profileCompatibility,i.levelIdc,255].concat([S.length],P,[C.length],O))),s(ie.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],i.sarRatio){var M=i.sarRatio[0],R=i.sarRatio[1];T.push(s(ie.pasp,new Uint8Array([(4278190080&M)>>24,(16711680&M)>>16,(65280&M)>>8,255&M,(4278190080&R)>>24,(16711680&R)>>16,(65280&R)>>8,255&R])))}return s.apply(null,T)},ye=function audioSample(i){return s(ie.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&i.channelcount)>>8,255&i.channelcount,(65280&i.samplesize)>>8,255&i.samplesize,0,0,0,0,(65280&i.samplerate)>>8,255&i.samplerate,0,0]),S(i))},U=function tkhd(i){var _=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&i.id)>>24,(16711680&i.id)>>16,(65280&i.id)>>8,255&i.id,0,0,0,0,(4278190080&i.duration)>>24,(16711680&i.duration)>>16,(65280&i.duration)>>8,255&i.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&i.width)>>8,255&i.width,0,0,(65280&i.height)>>8,255&i.height,0,0]);return s(ie.tkhd,_)},te=function traf(i){var _,T,S,C,P,O;return _=s(ie.tfhd,new Uint8Array([0,0,0,58,(4278190080&i.id)>>24,(16711680&i.id)>>16,(65280&i.id)>>8,255&i.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),P=Math.floor(i.baseMediaDecodeTime/(Se+1)),O=Math.floor(i.baseMediaDecodeTime%(Se+1)),T=s(ie.tfdt,new Uint8Array([1,0,0,0,P>>>24&255,P>>>16&255,P>>>8&255,255&P,O>>>24&255,O>>>16&255,O>>>8&255,255&O])),92,"audio"===i.type?(S=re(i,92),s(ie.traf,_,T,S)):(C=X(i),S=re(i,C.length+92),s(ie.traf,_,T,S,C))},$=function trak(i){return i.duration=i.duration||4294967295,s(ie.trak,U(i),V(i))},ne=function trex(i){var _=new Uint8Array([0,0,0,0,(4278190080&i.id)>>24,(16711680&i.id)>>16,(65280&i.id)>>8,255&i.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==i.type&&(_[_.length-1]=0),s(ie.trex,_)},ke=function trunHeader(i,s){var _=0,T=0,S=0,C=0;return i.length&&(void 0!==i[0].duration&&(_=1),void 0!==i[0].size&&(T=2),void 0!==i[0].flags&&(S=4),void 0!==i[0].compositionTimeOffset&&(C=8)),[0,0,_|T|S|C,1,(4278190080&i.length)>>>24,(16711680&i.length)>>>16,(65280&i.length)>>>8,255&i.length,(4278190080&s)>>>24,(16711680&s)>>>16,(65280&s)>>>8,255&s]},we=function videoTrun(i,_){var T,S,C,P,O,M;for(_+=20+16*(P=i.samples||[]).length,C=ke(P,_),(S=new Uint8Array(C.length+16*P.length)).set(C),T=C.length,M=0;M<P.length;M++)O=P[M],S[T++]=(4278190080&O.duration)>>>24,S[T++]=(16711680&O.duration)>>>16,S[T++]=(65280&O.duration)>>>8,S[T++]=255&O.duration,S[T++]=(4278190080&O.size)>>>24,S[T++]=(16711680&O.size)>>>16,S[T++]=(65280&O.size)>>>8,S[T++]=255&O.size,S[T++]=O.flags.isLeading<<2|O.flags.dependsOn,S[T++]=O.flags.isDependedOn<<6|O.flags.hasRedundancy<<4|O.flags.paddingValue<<1|O.flags.isNonSyncSample,S[T++]=61440&O.flags.degradationPriority,S[T++]=15&O.flags.degradationPriority,S[T++]=(4278190080&O.compositionTimeOffset)>>>24,S[T++]=(16711680&O.compositionTimeOffset)>>>16,S[T++]=(65280&O.compositionTimeOffset)>>>8,S[T++]=255&O.compositionTimeOffset;return s(ie.trun,S)},_e=function audioTrun(i,_){var T,S,C,P,O,M;for(_+=20+8*(P=i.samples||[]).length,C=ke(P,_),(T=new Uint8Array(C.length+8*P.length)).set(C),S=C.length,M=0;M<P.length;M++)O=P[M],T[S++]=(4278190080&O.duration)>>>24,T[S++]=(16711680&O.duration)>>>16,T[S++]=(65280&O.duration)>>>8,T[S++]=255&O.duration,T[S++]=(4278190080&O.size)>>>24,T[S++]=(16711680&O.size)>>>16,T[S++]=(65280&O.size)>>>8,T[S++]=255&O.size;return s(ie.trun,T)},re=function trun(i,s){return"audio"===i.type?_e(i,s):we(i,s)};C=function ftyp(){return s(ie.ftyp,ae,se,ae,oe)};var Ce,xe,Ee,Pe,Ae,Oe,Me,ze,Ie=function mdat(i){return s(ie.mdat,i)},Le=M,Re=function initSegment(i){var s,_=C(),T=R(i);return(s=new Uint8Array(_.byteLength+T.byteLength)).set(_),s.set(T,_.byteLength),s},Ne=function sampleForFrame(i,s){var _={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return _.dataOffset=s,_.compositionTimeOffset=i.pts-i.dts,_.duration=i.duration,_.size=4*i.length,_.size+=i.byteLength,i.keyFrame&&(_.flags.dependsOn=2,_.flags.isNonSyncSample=0),_},De=function groupNalsIntoFrames(i){var s,_,T=[],S=[];for(S.byteLength=0,S.nalCount=0,S.duration=0,T.byteLength=0,s=0;s<i.length;s++)"access_unit_delimiter_rbsp"===(_=i[s]).nalUnitType?(T.length&&(T.duration=_.dts-T.dts,S.byteLength+=T.byteLength,S.nalCount+=T.length,S.duration+=T.duration,S.push(T)),(T=[_]).byteLength=_.data.byteLength,T.pts=_.pts,T.dts=_.dts):("slice_layer_without_partitioning_rbsp_idr"===_.nalUnitType&&(T.keyFrame=!0),T.duration=_.dts-T.dts,T.byteLength+=_.data.byteLength,T.push(_));return S.length&&(!T.duration||T.duration<=0)&&(T.duration=S[S.length-1].duration),S.byteLength+=T.byteLength,S.nalCount+=T.length,S.duration+=T.duration,S.push(T),S},je=function groupFramesIntoGops(i){var s,_,T=[],S=[];for(T.byteLength=0,T.nalCount=0,T.duration=0,T.pts=i[0].pts,T.dts=i[0].dts,S.byteLength=0,S.nalCount=0,S.duration=0,S.pts=i[0].pts,S.dts=i[0].dts,s=0;s<i.length;s++)(_=i[s]).keyFrame?(T.length&&(S.push(T),S.byteLength+=T.byteLength,S.nalCount+=T.nalCount,S.duration+=T.duration),(T=[_]).nalCount=_.length,T.byteLength=_.byteLength,T.pts=_.pts,T.dts=_.dts,T.duration=_.duration):(T.duration+=_.duration,T.nalCount+=_.length,T.byteLength+=_.byteLength,T.push(_));return S.length&&T.duration<=0&&(T.duration=S[S.length-1].duration),S.byteLength+=T.byteLength,S.nalCount+=T.nalCount,S.duration+=T.duration,S.push(T),S},Be=function extendFirstKeyFrame(i){var s;return!i[0][0].keyFrame&&i.length>1&&(s=i.shift(),i.byteLength-=s.byteLength,i.nalCount-=s.nalCount,i[0][0].dts=s.dts,i[0][0].pts=s.pts,i[0][0].duration+=s.duration),i},$e=function generateSampleTable(i,s){var _,T,S,C,P,O=s||0,M=[];for(_=0;_<i.length;_++)for(C=i[_],T=0;T<C.length;T++)P=C[T],O+=(S=Ne(P,O)).size,M.push(S);return M},Ue=function concatenateNalData(i){var s,_,T,S,C,P,O=0,M=i.byteLength,R=i.nalCount,D=new Uint8Array(M+4*R),j=new DataView(D.buffer);for(s=0;s<i.length;s++)for(S=i[s],_=0;_<S.length;_++)for(C=S[_],T=0;T<C.length;T++)P=C[T],j.setUint32(O,P.data.byteLength),O+=4,D.set(P.data,O),O+=P.data.byteLength;return D},Fe=function generateSampleTableForFrame(i,s){var _,T=[];return _=Ne(i,s||0),T.push(_),T},He=function concatenateNalDataForFrame(i){var s,_,T=0,S=i.byteLength,C=i.length,P=new Uint8Array(S+4*C),O=new DataView(P.buffer);for(s=0;s<i.length;s++)_=i[s],O.setUint32(T,_.data.byteLength),T+=4,P.set(_.data,T),T+=_.data.byteLength;return P},qe=[33,16,5,32,164,27],Ve=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],Ge=function zeroFill(i){for(var s=[];i--;)s.push(0);return s},Ze=function silence_1(){if(!Ce){var i={96e3:[qe,[227,64],Ge(154),[56]],88200:[qe,[231],Ge(170),[56]],64e3:[qe,[248,192],Ge(240),[56]],48e3:[qe,[255,192],Ge(268),[55,148,128],Ge(54),[112]],44100:[qe,[255,192],Ge(268),[55,163,128],Ge(84),[112]],32e3:[qe,[255,192],Ge(268),[55,234],Ge(226),[112]],24e3:[qe,[255,192],Ge(268),[55,255,128],Ge(268),[111,112],Ge(126),[224]],16e3:[qe,[255,192],Ge(268),[55,255,128],Ge(268),[111,255],Ge(269),[223,108],Ge(195),[1,192]],12e3:[Ve,Ge(268),[3,127,248],Ge(268),[6,255,240],Ge(268),[13,255,224],Ge(268),[27,253,128],Ge(259),[56]],11025:[Ve,Ge(268),[3,127,248],Ge(268),[6,255,240],Ge(268),[13,255,224],Ge(268),[27,255,192],Ge(268),[55,175,128],Ge(108),[112]],8e3:[Ve,Ge(268),[3,121,16],Ge(47),[7]]};Ce=function makeTable(i){return Object.keys(i).reduce((function(s,_){return s[_]=new Uint8Array(i[_].reduce((function(i,s){return i.concat(s)}),[])),s}),{})}(i)}return Ce},We=9e4;Oe=function audioTsToVideoTs(i,s){return xe(Ae(i,s))},Me=function videoTsToAudioTs(i,s){return Ee(Pe(i),s)},ze=function metadataTsToSeconds(i,s,_){return Pe(_?i:i-s)};var Ke=We,Ye=xe=function secondsToVideoTs(i){return i*We},Xe=(Ee=function secondsToAudioTs(i,s){return i*s},Pe=function videoTsToSeconds(i){return i/We}),Qe=(Ae=function audioTsToSeconds(i,s){return i/s},Oe),Je=Me,et=ze,tt=function prefixWithSilence(i,s,_,T){var S,C,P,O,M,R=0,D=0,j=0;if(s.length&&(S=Qe(i.baseMediaDecodeTime,i.samplerate),C=Math.ceil(Ke/(i.samplerate/1024)),_&&T&&(R=S-Math.max(_,T),j=(D=Math.floor(R/C))*C),!(D<1||j>Ke/2))){for((P=Ze()[i.samplerate])||(P=s[0].data),O=0;O<D;O++)M=s[0],s.splice(0,0,{data:P,dts:M.dts-C,pts:M.pts-C});return i.baseMediaDecodeTime-=Math.floor(Je(j,i.samplerate)),j}},nt=function trimAdtsFramesByEarliestDts(i,s,_){return s.minSegmentDts>=_?i:(s.minSegmentDts=1/0,i.filter((function(i){return i.dts>=_&&(s.minSegmentDts=Math.min(s.minSegmentDts,i.dts),s.minSegmentPts=s.minSegmentDts,!0)})))},rt=function generateSampleTable(i){var s,_,T=[];for(s=0;s<i.length;s++)_=i[s],T.push({size:_.data.byteLength,duration:1024});return T},it=function concatenateFrameData(i){var s,_,T=0,S=new Uint8Array(function sumFrameByteLengths(i){var s,_=0;for(s=0;s<i.length;s++)_+=i[s].data.byteLength;return _}(i));for(s=0;s<i.length;s++)_=i[s],S.set(_.data,T),T+=_.data.byteLength;return S},at=Ke,st=function clearDtsInfo(i){delete i.minSegmentDts,delete i.maxSegmentDts,delete i.minSegmentPts,delete i.maxSegmentPts},ot=function calculateTrackBaseMediaDecodeTime(i,s){var _,T=i.minSegmentDts;return s||(T-=i.timelineStartInfo.dts),_=i.timelineStartInfo.baseMediaDecodeTime,_+=T,_=Math.max(0,_),"audio"===i.type&&(_*=i.samplerate/at,_=Math.floor(_)),_},lt=function collectDtsInfo(i,s){"number"==typeof s.pts&&(void 0===i.timelineStartInfo.pts&&(i.timelineStartInfo.pts=s.pts),void 0===i.minSegmentPts?i.minSegmentPts=s.pts:i.minSegmentPts=Math.min(i.minSegmentPts,s.pts),void 0===i.maxSegmentPts?i.maxSegmentPts=s.pts:i.maxSegmentPts=Math.max(i.maxSegmentPts,s.pts)),"number"==typeof s.dts&&(void 0===i.timelineStartInfo.dts&&(i.timelineStartInfo.dts=s.dts),void 0===i.minSegmentDts?i.minSegmentDts=s.dts:i.minSegmentDts=Math.min(i.minSegmentDts,s.dts),void 0===i.maxSegmentDts?i.maxSegmentDts=s.dts:i.maxSegmentDts=Math.max(i.maxSegmentDts,s.dts))},ct=function parseSei(i){for(var s=0,_={payloadType:-1,payloadSize:0},T=0,S=0;s<i.byteLength&&128!==i[s];){for(;255===i[s];)T+=255,s++;for(T+=i[s++];255===i[s];)S+=255,s++;if(S+=i[s++],!_.payload&&4===T){if("GA94"===String.fromCharCode(i[s+3],i[s+4],i[s+5],i[s+6])){_.payloadType=T,_.payloadSize=S,_.payload=i.subarray(s,s+S);break}_.payload=void 0}s+=S,T=0,S=0}return _},ut=function parseUserData(i){return 181!==i.payload[0]||49!=(i.payload[1]<<8|i.payload[2])||"GA94"!==String.fromCharCode(i.payload[3],i.payload[4],i.payload[5],i.payload[6])||3!==i.payload[7]?null:i.payload.subarray(8,i.payload.length-1)},dt=function parseCaptionPackets(i,s){var _,T,S,C,P=[];if(!(64&s[0]))return P;for(T=31&s[0],_=0;_<T;_++)C={type:3&s[(S=3*_)+2],pts:i},4&s[S+2]&&(C.ccData=s[S+3]<<8|s[S+4],P.push(C));return P},ht=function discardEmulationPreventionBytes(i){for(var s,_,T=i.byteLength,S=[],C=1;C<T-2;)0===i[C]&&0===i[C+1]&&3===i[C+2]?(S.push(C+2),C+=2):C++;if(0===S.length)return i;s=T-S.length,_=new Uint8Array(s);var P=0;for(C=0;C<s;P++,C++)P===S[0]&&(P++,S.shift()),_[C]=i[P];return _},pt=4,mt=function CaptionStream(){CaptionStream.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new St(0,0),new St(0,1),new St(1,0),new St(1,1)],this.cc708Stream_=new yt,this.reset(),this.ccStreams_.forEach((function(i){i.on("data",this.trigger.bind(this,"data")),i.on("partialdone",this.trigger.bind(this,"partialdone")),i.on("done",this.trigger.bind(this,"done"))}),this),this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done"))};(mt.prototype=new Te).push=function(i){var s,_,T;if("sei_rbsp"===i.nalUnitType&&(s=ct(i.escapedRBSP)).payload&&s.payloadType===pt&&(_=ut(s)))if(i.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(i.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));T=dt(i.pts,_),this.captionPackets_=this.captionPackets_.concat(T),this.latestDts_!==i.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=i.dts}},mt.prototype.flushCCStreams=function(i){this.ccStreams_.forEach((function(s){return"flush"===i?s.flush():s.partialFlush()}),this)},mt.prototype.flushStream=function(i){this.captionPackets_.length?(this.captionPackets_.forEach((function(i,s){i.presortIndex=s})),this.captionPackets_.sort((function(i,s){return i.pts===s.pts?i.presortIndex-s.presortIndex:i.pts-s.pts})),this.captionPackets_.forEach((function(i){i.type<2?this.dispatchCea608Packet(i):this.dispatchCea708Packet(i)}),this),this.captionPackets_.length=0,this.flushCCStreams(i)):this.flushCCStreams(i)},mt.prototype.flush=function(){return this.flushStream("flush")},mt.prototype.partialFlush=function(){return this.flushStream("partialFlush")},mt.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach((function(i){i.reset()}))},mt.prototype.dispatchCea608Packet=function(i){this.setsTextOrXDSActive(i)?this.activeCea608Channel_[i.type]=null:this.setsChannel1Active(i)?this.activeCea608Channel_[i.type]=0:this.setsChannel2Active(i)&&(this.activeCea608Channel_[i.type]=1),null!==this.activeCea608Channel_[i.type]&&this.ccStreams_[(i.type<<1)+this.activeCea608Channel_[i.type]].push(i)},mt.prototype.setsChannel1Active=function(i){return 4096==(30720&i.ccData)},mt.prototype.setsChannel2Active=function(i){return 6144==(30720&i.ccData)},mt.prototype.setsTextOrXDSActive=function(i){return 256==(28928&i.ccData)||4138==(30974&i.ccData)||6186==(30974&i.ccData)},mt.prototype.dispatchCea708Packet=function(i){this.cc708Stream_.push(i)};var ft={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},gt=function within708TextBlock(i){return 32<=i&&i<=127||160<=i&&i<=255},vt=function Cea708Window(i){this.windowNum=i,this.reset()};vt.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},vt.prototype.getText=function(){return this.rows.join("\n")},vt.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},vt.prototype.newLine=function(i){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(i),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},vt.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},vt.prototype.addText=function(i){this.rows[this.rowIdx]+=i},vt.prototype.backspace=function(){if(!this.isEmpty()){var i=this.rows[this.rowIdx];this.rows[this.rowIdx]=i.substr(0,i.length-1)}};var bt=function Cea708Service(i){this.serviceNum=i,this.text="",this.currentWindow=new vt(-1),this.windows=[]};bt.prototype.init=function(i,s){this.startPts=i;for(var _=0;_<8;_++)this.windows[_]=new vt(_),"function"==typeof s&&(this.windows[_].beforeRowOverflow=s)},bt.prototype.setCurrentWindow=function(i){this.currentWindow=this.windows[i]};var yt=function Cea708Stream(){Cea708Stream.prototype.init.call(this);var i=this;this.current708Packet=null,this.services={},this.push=function(s){3===s.type?(i.new708Packet(),i.add708Bytes(s)):(null===i.current708Packet&&i.new708Packet(),i.add708Bytes(s))}};yt.prototype=new Te,yt.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},yt.prototype.add708Bytes=function(i){var s=i.ccData,_=s>>>8,T=255&s;this.current708Packet.ptsVals.push(i.pts),this.current708Packet.data.push(_),this.current708Packet.data.push(T)},yt.prototype.push708Packet=function(){var i=this.current708Packet,s=i.data,_=null,T=null,S=0,C=s[S++];for(i.seq=C>>6,i.sizeCode=63&C;S<s.length;S++)T=31&(C=s[S++]),7===(_=C>>5)&&T>0&&(_=C=s[S++]),this.pushServiceBlock(_,S,T),T>0&&(S+=T-1)},yt.prototype.pushServiceBlock=function(i,s,_){var T,S=s,C=this.current708Packet.data,P=this.services[i];for(P||(P=this.initService(i,S));S<s+_&&S<C.length;S++)T=C[S],gt(T)?S=this.handleText(S,P):16===T?S=this.extendedCommands(S,P):128<=T&&T<=135?S=this.setCurrentWindow(S,P):152<=T&&T<=159?S=this.defineWindow(S,P):136===T?S=this.clearWindows(S,P):140===T?S=this.deleteWindows(S,P):137===T?S=this.displayWindows(S,P):138===T?S=this.hideWindows(S,P):139===T?S=this.toggleWindows(S,P):151===T?S=this.setWindowAttributes(S,P):144===T?S=this.setPenAttributes(S,P):145===T?S=this.setPenColor(S,P):146===T?S=this.setPenLocation(S,P):143===T?P=this.reset(S,P):8===T?P.currentWindow.backspace():12===T?P.currentWindow.clearText():13===T?P.currentWindow.pendingNewLine=!0:14===T?P.currentWindow.clearText():141===T&&S++},yt.prototype.extendedCommands=function(i,s){var _=this.current708Packet.data[++i];return gt(_)&&(i=this.handleText(i,s,!0)),i},yt.prototype.getPts=function(i){return this.current708Packet.ptsVals[Math.floor(i/2)]},yt.prototype.initService=function(i,s){var _=this;return this.services[i]=new bt(i),this.services[i].init(this.getPts(s),(function(s){_.flushDisplayed(s,_.services[i])})),this.services[i]},yt.prototype.handleText=function(i,s,_){var T=function get708CharFromCode(i){var s=ft[i]||i;return 4096&i&&i===s?"":String.fromCharCode(s)}((_?4096:0)|this.current708Packet.data[i]),S=s.currentWindow;return S.pendingNewLine&&!S.isEmpty()&&S.newLine(this.getPts(i)),S.pendingNewLine=!1,S.addText(T),i},yt.prototype.setCurrentWindow=function(i,s){var _=7&this.current708Packet.data[i];return s.setCurrentWindow(_),i},yt.prototype.defineWindow=function(i,s){var _=this.current708Packet.data,T=_[i],S=7&T;s.setCurrentWindow(S);var C=s.currentWindow;return T=_[++i],C.visible=(32&T)>>5,C.rowLock=(16&T)>>4,C.columnLock=(8&T)>>3,C.priority=7&T,T=_[++i],C.relativePositioning=(128&T)>>7,C.anchorVertical=127&T,T=_[++i],C.anchorHorizontal=T,T=_[++i],C.anchorPoint=(240&T)>>4,C.rowCount=15&T,T=_[++i],C.columnCount=63&T,T=_[++i],C.windowStyle=(56&T)>>3,C.penStyle=7&T,C.virtualRowCount=C.rowCount+1,i},yt.prototype.setWindowAttributes=function(i,s){var _=this.current708Packet.data,T=_[i],S=s.currentWindow.winAttr;return T=_[++i],S.fillOpacity=(192&T)>>6,S.fillRed=(48&T)>>4,S.fillGreen=(12&T)>>2,S.fillBlue=3&T,T=_[++i],S.borderType=(192&T)>>6,S.borderRed=(48&T)>>4,S.borderGreen=(12&T)>>2,S.borderBlue=3&T,T=_[++i],S.borderType+=(128&T)>>5,S.wordWrap=(64&T)>>6,S.printDirection=(48&T)>>4,S.scrollDirection=(12&T)>>2,S.justify=3&T,T=_[++i],S.effectSpeed=(240&T)>>4,S.effectDirection=(12&T)>>2,S.displayEffect=3&T,i},yt.prototype.flushDisplayed=function(i,s){for(var _=[],T=0;T<8;T++)s.windows[T].visible&&!s.windows[T].isEmpty()&&_.push(s.windows[T].getText());s.endPts=i,s.text=_.join("\n\n"),this.pushCaption(s),s.startPts=i},yt.prototype.pushCaption=function(i){""!==i.text&&(this.trigger("data",{startPts:i.startPts,endPts:i.endPts,text:i.text,stream:"cc708_"+i.serviceNum}),i.text="",i.startPts=i.endPts)},yt.prototype.displayWindows=function(i,s){var _=this.current708Packet.data[++i],T=this.getPts(i);this.flushDisplayed(T,s);for(var S=0;S<8;S++)_&1<<S&&(s.windows[S].visible=1);return i},yt.prototype.hideWindows=function(i,s){var _=this.current708Packet.data[++i],T=this.getPts(i);this.flushDisplayed(T,s);for(var S=0;S<8;S++)_&1<<S&&(s.windows[S].visible=0);return i},yt.prototype.toggleWindows=function(i,s){var _=this.current708Packet.data[++i],T=this.getPts(i);this.flushDisplayed(T,s);for(var S=0;S<8;S++)_&1<<S&&(s.windows[S].visible^=1);return i},yt.prototype.clearWindows=function(i,s){var _=this.current708Packet.data[++i],T=this.getPts(i);this.flushDisplayed(T,s);for(var S=0;S<8;S++)_&1<<S&&s.windows[S].clearText();return i},yt.prototype.deleteWindows=function(i,s){var _=this.current708Packet.data[++i],T=this.getPts(i);this.flushDisplayed(T,s);for(var S=0;S<8;S++)_&1<<S&&s.windows[S].reset();return i},yt.prototype.setPenAttributes=function(i,s){var _=this.current708Packet.data,T=_[i],S=s.currentWindow.penAttr;return T=_[++i],S.textTag=(240&T)>>4,S.offset=(12&T)>>2,S.penSize=3&T,T=_[++i],S.italics=(128&T)>>7,S.underline=(64&T)>>6,S.edgeType=(56&T)>>3,S.fontStyle=7&T,i},yt.prototype.setPenColor=function(i,s){var _=this.current708Packet.data,T=_[i],S=s.currentWindow.penColor;return T=_[++i],S.fgOpacity=(192&T)>>6,S.fgRed=(48&T)>>4,S.fgGreen=(12&T)>>2,S.fgBlue=3&T,T=_[++i],S.bgOpacity=(192&T)>>6,S.bgRed=(48&T)>>4,S.bgGreen=(12&T)>>2,S.bgBlue=3&T,T=_[++i],S.edgeRed=(48&T)>>4,S.edgeGreen=(12&T)>>2,S.edgeBlue=3&T,i},yt.prototype.setPenLocation=function(i,s){var _=this.current708Packet.data,T=_[i],S=s.currentWindow.penLoc;return s.currentWindow.pendingNewLine=!0,T=_[++i],S.row=15&T,T=_[++i],S.column=63&T,i},yt.prototype.reset=function(i,s){var _=this.getPts(i);return this.flushDisplayed(_,s),this.initService(s.serviceNum,i)};var _t={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},wt=function getCharFromCode(i){return null===i?"":(i=_t[i]||i,String.fromCharCode(i))},kt=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Tt=function createDisplayBuffer(){for(var i=[],s=15;s--;)i.push("");return i},St=function Cea608Stream(i,s){Cea608Stream.prototype.init.call(this),this.field_=i||0,this.dataChannel_=s||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(i){var s,_,T,S,C;if((s=32639&i.ccData)!==this.lastControlCode_){if(4096==(61440&s)?this.lastControlCode_=s:s!==this.PADDING_&&(this.lastControlCode_=null),T=s>>>8,S=255&s,s!==this.PADDING_)if(s===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(s===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(i.pts),this.flushDisplayed(i.pts),_=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=_,this.startPts_=i.pts;else if(s===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(i.pts);else if(s===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(i.pts);else if(s===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(i.pts);else if(s===this.CARRIAGE_RETURN_)this.clearFormatting(i.pts),this.flushDisplayed(i.pts),this.shiftRowsUp_(),this.startPts_=i.pts;else if(s===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(s===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(i.pts),this.displayed_=Tt();else if(s===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Tt();else if(s===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(i.pts),this.displayed_=Tt()),this.mode_="paintOn",this.startPts_=i.pts;else if(this.isSpecialCharacter(T,S))C=wt((T=(3&T)<<8)|S),this[this.mode_](i.pts,C),this.column_++;else if(this.isExtCharacter(T,S))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),C=wt((T=(3&T)<<8)|S),this[this.mode_](i.pts,C),this.column_++;else if(this.isMidRowCode(T,S))this.clearFormatting(i.pts),this[this.mode_](i.pts," "),this.column_++,14==(14&S)&&this.addFormatting(i.pts,["i"]),1==(1&S)&&this.addFormatting(i.pts,["u"]);else if(this.isOffsetControlCode(T,S))this.column_+=3&S;else if(this.isPAC(T,S)){var P=kt.indexOf(7968&s);"rollUp"===this.mode_&&(P-this.rollUpRows_+1<0&&(P=this.rollUpRows_-1),this.setRollUp(i.pts,P)),P!==this.row_&&(this.clearFormatting(i.pts),this.row_=P),1&S&&-1===this.formatting_.indexOf("u")&&this.addFormatting(i.pts,["u"]),16==(16&s)&&(this.column_=4*((14&s)>>1)),this.isColorPAC(S)&&14==(14&S)&&this.addFormatting(i.pts,["i"])}else this.isNormalChar(T)&&(0===S&&(S=null),C=wt(T),C+=wt(S),this[this.mode_](i.pts,C),this.column_+=C.length)}else this.lastControlCode_=null}};St.prototype=new Te,St.prototype.flushDisplayed=function(i){var s=this.displayed_.map((function(i){try{return i.trim()}catch(vl){return console.error("Skipping malformed caption."),""}})).join("\n").replace(/^\n+|\n+$/g,"");s.length&&this.trigger("data",{startPts:this.startPts_,endPts:i,text:s,stream:this.name_})},St.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Tt(),this.nonDisplayed_=Tt(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},St.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},St.prototype.isSpecialCharacter=function(i,s){return i===this.EXT_&&s>=48&&s<=63},St.prototype.isExtCharacter=function(i,s){return(i===this.EXT_+1||i===this.EXT_+2)&&s>=32&&s<=63},St.prototype.isMidRowCode=function(i,s){return i===this.EXT_&&s>=32&&s<=47},St.prototype.isOffsetControlCode=function(i,s){return i===this.OFFSET_&&s>=33&&s<=35},St.prototype.isPAC=function(i,s){return i>=this.BASE_&&i<this.BASE_+8&&s>=64&&s<=127},St.prototype.isColorPAC=function(i){return i>=64&&i<=79||i>=96&&i<=127},St.prototype.isNormalChar=function(i){return i>=32&&i<=127},St.prototype.setRollUp=function(i,s){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(i),this.nonDisplayed_=Tt(),this.displayed_=Tt()),void 0!==s&&s!==this.row_)for(var _=0;_<this.rollUpRows_;_++)this.displayed_[s-_]=this.displayed_[this.row_-_],this.displayed_[this.row_-_]="";void 0===s&&(s=this.row_),this.topRow_=s-this.rollUpRows_+1},St.prototype.addFormatting=function(i,s){this.formatting_=this.formatting_.concat(s);var _=s.reduce((function(i,s){return i+"<"+s+">"}),"");this[this.mode_](i,_)},St.prototype.clearFormatting=function(i){if(this.formatting_.length){var s=this.formatting_.reverse().reduce((function(i,s){return i+"</"+s+">"}),"");this.formatting_=[],this[this.mode_](i,s)}},St.prototype.popOn=function(i,s){var _=this.nonDisplayed_[this.row_];_+=s,this.nonDisplayed_[this.row_]=_},St.prototype.rollUp=function(i,s){var _=this.displayed_[this.row_];_+=s,this.displayed_[this.row_]=_},St.prototype.shiftRowsUp_=function(){var i;for(i=0;i<this.topRow_;i++)this.displayed_[i]="";for(i=this.row_+1;i<15;i++)this.displayed_[i]="";for(i=this.topRow_;i<this.row_;i++)this.displayed_[i]=this.displayed_[i+1];this.displayed_[this.row_]=""},St.prototype.paintOn=function(i,s){var _=this.displayed_[this.row_];_+=s,this.displayed_[this.row_]=_};var Ct={CaptionStream:mt,Cea608Stream:St,Cea708Stream:yt},xt={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Et="shared",Pt=function handleRollover(i,s){var _=1;for(i>s&&(_=-1);Math.abs(s-i)>4294967296;)i+=8589934592*_;return i},At=function TimestampRolloverStream(i){var s,_;TimestampRolloverStream.prototype.init.call(this),this.type_=i||Et,this.push=function(i){this.type_!==Et&&i.type!==this.type_||(void 0===_&&(_=i.dts),i.dts=Pt(i.dts,_),i.pts=Pt(i.pts,_),s=i.dts,this.trigger("data",i))},this.flush=function(){_=s,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){_=void 0,s=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};At.prototype=new Te;var Ot,Mt=At,zt=function percentEncode(i,s,_){var T,S="";for(T=s;T<_;T++)S+="%"+("00"+i[T].toString(16)).slice(-2);return S},It=function parseUtf8(i,s,_){return decodeURIComponent(zt(i,s,_))},Lt=function parseIso88591(i,s,_){return unescape(zt(i,s,_))},Rt=function parseSyncSafeInteger(i){return i[0]<<21|i[1]<<14|i[2]<<7|i[3]},Nt={TXXX:function TXXX(i){var s;if(3===i.data[0]){for(s=1;s<i.data.length;s++)if(0===i.data[s]){i.description=It(i.data,1,s),i.value=It(i.data,s+1,i.data.length).replace(/\0*$/,"");break}i.data=i.value}},WXXX:function WXXX(i){var s;if(3===i.data[0])for(s=1;s<i.data.length;s++)if(0===i.data[s]){i.description=It(i.data,1,s),i.url=It(i.data,s+1,i.data.length);break}},PRIV:function PRIV(i){var s;for(s=0;s<i.data.length;s++)if(0===i.data[s]){i.owner=Lt(i.data,0,s);break}i.privateData=i.data.subarray(s+1),i.data=i.privateData}};Ot=function MetadataStream(i){var s,_={debug:!(!i||!i.debug),descriptor:i&&i.descriptor},T=0,S=[],C=0;if(Ot.prototype.init.call(this),this.dispatchType=xt.METADATA_STREAM_TYPE.toString(16),_.descriptor)for(s=0;s<_.descriptor.length;s++)this.dispatchType+=("00"+_.descriptor[s].toString(16)).slice(-2);this.push=function(i){var s,P,O,M,R;if("timed-metadata"===i.type)if(i.dataAlignmentIndicator&&(C=0,S.length=0),0===S.length&&(i.data.length<10||i.data[0]!=="I".charCodeAt(0)||i.data[1]!=="D".charCodeAt(0)||i.data[2]!=="3".charCodeAt(0)))_.debug&&console.log("Skipping unrecognized metadata packet");else if(S.push(i),C+=i.data.byteLength,1===S.length&&(T=Rt(i.data.subarray(6,10)),T+=10),!(C<T)){for(s={data:new Uint8Array(T),frames:[],pts:S[0].pts,dts:S[0].dts},R=0;R<T;)s.data.set(S[0].data.subarray(0,T-R),R),R+=S[0].data.byteLength,C-=S[0].data.byteLength,S.shift();P=10,64&s.data[5]&&(P+=4,P+=Rt(s.data.subarray(10,14)),T-=Rt(s.data.subarray(16,20)));do{if((O=Rt(s.data.subarray(P+4,P+8)))<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");if((M={id:String.fromCharCode(s.data[P],s.data[P+1],s.data[P+2],s.data[P+3]),data:s.data.subarray(P+10,P+O+10)}).key=M.id,Nt[M.id]&&(Nt[M.id](M),"com.apple.streaming.transportStreamTimestamp"===M.owner)){var D=M.data,j=(1&D[3])<<30|D[4]<<22|D[5]<<14|D[6]<<6|D[7]>>>2;j*=4,j+=3&D[7],M.timeStamp=j,void 0===s.pts&&void 0===s.dts&&(s.pts=M.timeStamp,s.dts=M.timeStamp),this.trigger("timestamp",M)}s.frames.push(M),P+=10,P+=O}while(P<T);this.trigger("data",s)}}},Ot.prototype=new Te;var Dt,jt,Bt,$t=Ot,Ut=Mt,Ft=188;(Dt=function TransportPacketStream(){var i=new Uint8Array(Ft),s=0;Dt.prototype.init.call(this),this.push=function(_){var T,S=0,C=Ft;for(s?((T=new Uint8Array(_.byteLength+s)).set(i.subarray(0,s)),T.set(_,s),s=0):T=_;C<T.byteLength;)71!==T[S]||71!==T[C]?(S++,C++):(this.trigger("data",T.subarray(S,C)),S+=Ft,C+=Ft);S<T.byteLength&&(i.set(T.subarray(S),0),s=T.byteLength-S)},this.flush=function(){s===Ft&&71===i[0]&&(this.trigger("data",i),s=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){s=0,this.trigger("reset")}}).prototype=new Te,jt=function TransportParseStream(){var i,s,_,T;jt.prototype.init.call(this),T=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,i=function parsePsi(i,T){var S=0;T.payloadUnitStartIndicator&&(S+=i[S]+1),"pat"===T.type?s(i.subarray(S),T):_(i.subarray(S),T)},s=function parsePat(i,s){s.section_number=i[7],s.last_section_number=i[8],T.pmtPid=(31&i[10])<<8|i[11],s.pmtPid=T.pmtPid},_=function parsePmt(i,s){var _,S;if(1&i[5]){for(T.programMapTable={video:null,audio:null,"timed-metadata":{}},_=3+((15&i[1])<<8|i[2])-4,S=12+((15&i[10])<<8|i[11]);S<_;){var C=i[S],P=(31&i[S+1])<<8|i[S+2];C===xt.H264_STREAM_TYPE&&null===T.programMapTable.video?T.programMapTable.video=P:C===xt.ADTS_STREAM_TYPE&&null===T.programMapTable.audio?T.programMapTable.audio=P:C===xt.METADATA_STREAM_TYPE&&(T.programMapTable["timed-metadata"][P]=C),S+=5+((15&i[S+3])<<8|i[S+4])}s.programMapTable=T.programMapTable}},this.push=function(s){var _={},T=4;if(_.payloadUnitStartIndicator=!!(64&s[1]),_.pid=31&s[1],_.pid<<=8,_.pid|=s[2],(48&s[3])>>>4>1&&(T+=s[T]+1),0===_.pid)_.type="pat",i(s.subarray(T),_),this.trigger("data",_);else if(_.pid===this.pmtPid)for(_.type="pmt",i(s.subarray(T),_),this.trigger("data",_);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([s,T,_]):this.processPes_(s,T,_)},this.processPes_=function(i,s,_){_.pid===this.programMapTable.video?_.streamType=xt.H264_STREAM_TYPE:_.pid===this.programMapTable.audio?_.streamType=xt.ADTS_STREAM_TYPE:_.streamType=this.programMapTable["timed-metadata"][_.pid],_.type="pes",_.data=i.subarray(s),this.trigger("data",_)}},jt.prototype=new Te,jt.STREAM_TYPES={h264:27,adts:15},Bt=function ElementaryStream(){var i,s=this,_={data:[],size:0},T={data:[],size:0},S={data:[],size:0},C=function flushStream(i,_,T){var S,C,P=new Uint8Array(i.size),O={type:_},M=0,R=0;if(i.data.length&&!(i.size<9)){for(O.trackId=i.data[0].pid,M=0;M<i.data.length;M++)C=i.data[M],P.set(C.data,R),R+=C.data.byteLength;!function parsePes(i,s){var _;s.packetLength=6+(i[4]<<8|i[5]),s.dataAlignmentIndicator=0!=(4&i[6]),192&(_=i[7])&&(s.pts=(14&i[9])<<27|(255&i[10])<<20|(254&i[11])<<12|(255&i[12])<<5|(254&i[13])>>>3,s.pts*=4,s.pts+=(6&i[13])>>>1,s.dts=s.pts,64&_&&(s.dts=(14&i[14])<<27|(255&i[15])<<20|(254&i[16])<<12|(255&i[17])<<5|(254&i[18])>>>3,s.dts*=4,s.dts+=(6&i[18])>>>1)),s.data=i.subarray(9+i[8])}(P,O),S="video"===_||O.packetLength<=i.size,(T||S)&&(i.size=0,i.data.length=0),S&&s.trigger("data",O)}};Bt.prototype.init.call(this),this.push=function(P){({pat:function pat(){},pes:function pes(){var i,s;switch(P.streamType){case xt.H264_STREAM_TYPE:i=_,s="video";break;case xt.ADTS_STREAM_TYPE:i=T,s="audio";break;case xt.METADATA_STREAM_TYPE:i=S,s="timed-metadata";break;default:return}P.payloadUnitStartIndicator&&C(i,s,!0),i.data.push(P),i.size+=P.data.byteLength},pmt:function pmt(){var _={type:"metadata",tracks:[]};null!==(i=P.programMapTable).video&&_.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+i.video,codec:"avc",type:"video"}),null!==i.audio&&_.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+i.audio,codec:"adts",type:"audio"}),s.trigger("data",_)}})[P.type]()},this.reset=function(){_.size=0,_.data.length=0,T.size=0,T.data.length=0,this.trigger("reset")},this.flushStreams_=function(){C(_,"video"),C(T,"audio"),C(S,"timed-metadata")},this.flush=function(){this.flushStreams_(),this.trigger("done")}},Bt.prototype=new Te;var Ht={PAT_PID:0,MP2T_PACKET_LENGTH:Ft,TransportPacketStream:Dt,TransportParseStream:jt,ElementaryStream:Bt,TimestampRolloverStream:Ut,CaptionStream:Ct.CaptionStream,Cea608Stream:Ct.Cea608Stream,Cea708Stream:Ct.Cea708Stream,MetadataStream:$t};for(var qt in xt)xt.hasOwnProperty(qt)&&(Ht[qt]=xt[qt]);var Vt,Gt=Ht,Zt=Ke,Wt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Vt=function AdtsStream(i){var s,_=0;Vt.prototype.init.call(this),this.push=function(T){var S,C,P,O,M,R,D=0;if(i||(_=0),"audio"===T.type)for(s?(O=s,(s=new Uint8Array(O.byteLength+T.data.byteLength)).set(O),s.set(T.data,O.byteLength)):s=T.data;D+5<s.length;)if(255===s[D]&&240==(246&s[D+1])){if(C=2*(1&~s[D+1]),S=(3&s[D+3])<<11|s[D+4]<<3|(224&s[D+5])>>5,R=(M=1024*(1+(3&s[D+6])))*Zt/Wt[(60&s[D+2])>>>2],P=D+S,s.byteLength<P)return;if(this.trigger("data",{pts:T.pts+_*R,dts:T.dts+_*R,sampleCount:M,audioobjecttype:1+(s[D+2]>>>6&3),channelcount:(1&s[D+2])<<2|(192&s[D+3])>>>6,samplerate:Wt[(60&s[D+2])>>>2],samplingfrequencyindex:(60&s[D+2])>>>2,samplesize:16,data:s.subarray(D+7+C,P)}),_++,s.byteLength===P)return void(s=void 0);s=s.subarray(P)}else D++},this.flush=function(){_=0,this.trigger("done")},this.reset=function(){s=void 0,this.trigger("reset")},this.endTimeline=function(){s=void 0,this.trigger("endedtimeline")}},Vt.prototype=new Te;var Kt,Yt,Xt,Qt=Vt,Jt=function ExpGolomb(i){var s=i.byteLength,_=0,T=0;this.length=function(){return 8*s},this.bitsAvailable=function(){return 8*s+T},this.loadWord=function(){var S=i.byteLength-s,C=new Uint8Array(4),P=Math.min(4,s);if(0===P)throw new Error("no bytes available");C.set(i.subarray(S,S+P)),_=new DataView(C.buffer).getUint32(0),T=8*P,s-=P},this.skipBits=function(i){var S;T>i?(_<<=i,T-=i):(i-=T,i-=8*(S=Math.floor(i/8)),s-=S,this.loadWord(),_<<=i,T-=i)},this.readBits=function(i){var S=Math.min(T,i),C=_>>>32-S;return(T-=S)>0?_<<=S:s>0&&this.loadWord(),(S=i-S)>0?C<<S|this.readBits(S):C},this.skipLeadingZeros=function(){var i;for(i=0;i<T;++i)if(0!=(_&2147483648>>>i))return _<<=i,T-=i,i;return this.loadWord(),i+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var i=this.skipLeadingZeros();return this.readBits(i+1)-1},this.readExpGolomb=function(){var i=this.readUnsignedExpGolomb();return 1&i?1+i>>>1:-1*(i>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};Yt=function NalByteStream(){var i,s,_=0;Yt.prototype.init.call(this),this.push=function(T){var S;s?((S=new Uint8Array(s.byteLength+T.data.byteLength)).set(s),S.set(T.data,s.byteLength),s=S):s=T.data;for(var C=s.byteLength;_<C-3;_++)if(1===s[_+2]){i=_+5;break}for(;i<C;)switch(s[i]){case 0:if(0!==s[i-1]){i+=2;break}if(0!==s[i-2]){i++;break}_+3!==i-2&&this.trigger("data",s.subarray(_+3,i-2));do{i++}while(1!==s[i]&&i<C);_=i-2,i+=3;break;case 1:if(0!==s[i-1]||0!==s[i-2]){i+=3;break}this.trigger("data",s.subarray(_+3,i-2)),_=i-2,i+=3;break;default:i+=3}s=s.subarray(_),i-=_,_=0},this.reset=function(){s=null,_=0,this.trigger("reset")},this.flush=function(){s&&s.byteLength>3&&this.trigger("data",s.subarray(_+3)),s=null,_=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},Yt.prototype=new Te,Xt={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},Kt=function H264Stream(){var i,s,_,T,S,C,P,O=new Yt;Kt.prototype.init.call(this),i=this,this.push=function(i){"video"===i.type&&(s=i.trackId,_=i.pts,T=i.dts,O.push(i))},O.on("data",(function(P){var O={trackId:s,pts:_,dts:T,data:P};switch(31&P[0]){case 5:O.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:O.nalUnitType="sei_rbsp",O.escapedRBSP=S(P.subarray(1));break;case 7:O.nalUnitType="seq_parameter_set_rbsp",O.escapedRBSP=S(P.subarray(1)),O.config=C(O.escapedRBSP);break;case 8:O.nalUnitType="pic_parameter_set_rbsp";break;case 9:O.nalUnitType="access_unit_delimiter_rbsp"}i.trigger("data",O)})),O.on("done",(function(){i.trigger("done")})),O.on("partialdone",(function(){i.trigger("partialdone")})),O.on("reset",(function(){i.trigger("reset")})),O.on("endedtimeline",(function(){i.trigger("endedtimeline")})),this.flush=function(){O.flush()},this.partialFlush=function(){O.partialFlush()},this.reset=function(){O.reset()},this.endTimeline=function(){O.endTimeline()},P=function skipScalingList(i,s){var _,T=8,S=8;for(_=0;_<i;_++)0!==S&&(S=(T+s.readExpGolomb()+256)%256),T=0===S?T:S},S=function discardEmulationPreventionBytes(i){for(var s,_,T=i.byteLength,S=[],C=1;C<T-2;)0===i[C]&&0===i[C+1]&&3===i[C+2]?(S.push(C+2),C+=2):C++;if(0===S.length)return i;s=T-S.length,_=new Uint8Array(s);var P=0;for(C=0;C<s;P++,C++)P===S[0]&&(P++,S.shift()),_[C]=i[P];return _},C=function readSequenceParameterSet(i){var s,_,T,S,C,O,M,R,D,j,$,U,V,Z=0,Y=0,X=0,Q=0,ee=1;if(_=(s=new Jt(i)).readUnsignedByte(),S=s.readUnsignedByte(),T=s.readUnsignedByte(),s.skipUnsignedExpGolomb(),Xt[_]&&(3===(C=s.readUnsignedExpGolomb())&&s.skipBits(1),s.skipUnsignedExpGolomb(),s.skipUnsignedExpGolomb(),s.skipBits(1),s.readBoolean()))for($=3!==C?8:12,V=0;V<$;V++)s.readBoolean()&&P(V<6?16:64,s);if(s.skipUnsignedExpGolomb(),0===(O=s.readUnsignedExpGolomb()))s.readUnsignedExpGolomb();else if(1===O)for(s.skipBits(1),s.skipExpGolomb(),s.skipExpGolomb(),M=s.readUnsignedExpGolomb(),V=0;V<M;V++)s.skipExpGolomb();if(s.skipUnsignedExpGolomb(),s.skipBits(1),R=s.readUnsignedExpGolomb(),D=s.readUnsignedExpGolomb(),0===(j=s.readBits(1))&&s.skipBits(1),s.skipBits(1),s.readBoolean()&&(Z=s.readUnsignedExpGolomb(),Y=s.readUnsignedExpGolomb(),X=s.readUnsignedExpGolomb(),Q=s.readUnsignedExpGolomb()),s.readBoolean()&&s.readBoolean()){switch(s.readUnsignedByte()){case 1:U=[1,1];break;case 2:U=[12,11];break;case 3:U=[10,11];break;case 4:U=[16,11];break;case 5:U=[40,33];break;case 6:U=[24,11];break;case 7:U=[20,11];break;case 8:U=[32,11];break;case 9:U=[80,33];break;case 10:U=[18,11];break;case 11:U=[15,11];break;case 12:U=[64,33];break;case 13:U=[160,99];break;case 14:U=[4,3];break;case 15:U=[3,2];break;case 16:U=[2,1];break;case 255:U=[s.readUnsignedByte()<<8|s.readUnsignedByte(),s.readUnsignedByte()<<8|s.readUnsignedByte()]}U&&(ee=U[0]/U[1])}return{profileIdc:_,levelIdc:T,profileCompatibility:S,width:Math.ceil((16*(R+1)-2*Z-2*Y)*ee),height:(2-j)*(D+1)*16-2*X-2*Q,sarRatio:U}}},Kt.prototype=new Te;var en,tn={H264Stream:Kt,NalByteStream:Yt},nn=function parseId3TagSize(i,s){var _=i[s+6]<<21|i[s+7]<<14|i[s+8]<<7|i[s+9];return _=_>=0?_:0,(16&i[s+5])>>4?_+20:_+10},rn=function getId3Offset(i,s){return i.length-s<10||i[s]!=="I".charCodeAt(0)||i[s+1]!=="D".charCodeAt(0)||i[s+2]!=="3".charCodeAt(0)?s:getId3Offset(i,s+=nn(i,s))},an=function isLikelyAacData(i){var s=rn(i,0);return i.length>=s+2&&255==(255&i[s])&&240==(240&i[s+1])&&16==(22&i[s+1])},sn=nn,ln=function parseAdtsSize(i,s){var _=(224&i[s+5])>>5,T=i[s+4]<<3;return 6144&i[s+3]|T|_};(en=function AacStream(){var i=new Uint8Array,s=0;en.prototype.init.call(this),this.setTimestamp=function(i){s=i},this.push=function(_){var T,S,C,P,O=0,M=0;for(i.length?(P=i.length,(i=new Uint8Array(_.byteLength+P)).set(i.subarray(0,P)),i.set(_,P)):i=_;i.length-M>=3;)if(i[M]!=="I".charCodeAt(0)||i[M+1]!=="D".charCodeAt(0)||i[M+2]!=="3".charCodeAt(0))if(255!=(255&i[M])||240!=(240&i[M+1]))M++;else{if(i.length-M<7)break;if(M+(O=ln(i,M))>i.length)break;C={type:"audio",data:i.subarray(M,M+O),pts:s,dts:s},this.trigger("data",C),M+=O}else{if(i.length-M<10)break;if(M+(O=sn(i,M))>i.length)break;S={type:"timed-metadata",data:i.subarray(M,M+O)},this.trigger("data",S),M+=O}T=i.length-M,i=T>0?i.subarray(M):new Uint8Array},this.reset=function(){i=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){i=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new Te;var cn,un,dn,hn,pn=en,mn=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],fn=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],gn=tn.H264Stream,vn=an,bn=Ke,yn=function arrayEquals(i,s){var _;if(i.length!==s.length)return!1;for(_=0;_<i.length;_++)if(i[_]!==s[_])return!1;return!0},_n=function generateSegmentTimingInfo(i,s,_,T,S,C){return{start:{dts:i,pts:i+(_-s)},end:{dts:i+(T-s),pts:i+(S-_)},prependedContentDuration:C,baseMediaDecodeTime:i}};un=function AudioSegmentStream(i,s){var _=[],T=0,S=0,C=0,P=1/0;s=s||{},un.prototype.init.call(this),this.push=function(s){lt(i,s),i&&mn.forEach((function(_){i[_]=s[_]})),_.push(s)},this.setEarliestDts=function(i){S=i},this.setVideoBaseMediaDecodeTime=function(i){P=i},this.setAudioAppendStart=function(i){C=i},this.flush=function(){var O,M,R,D,j,$,U;0!==_.length?(O=nt(_,i,S),i.baseMediaDecodeTime=ot(i,s.keepOriginalTimestamps),U=tt(i,O,C,P),i.samples=rt(O),R=Ie(it(O)),_=[],M=Le(T,[i]),D=new Uint8Array(M.byteLength+R.byteLength),T++,D.set(M),D.set(R,M.byteLength),st(i),j=Math.ceil(1024*bn/i.samplerate),O.length&&($=O.length*j,this.trigger("segmentTimingInfo",_n(Qe(i.baseMediaDecodeTime,i.samplerate),O[0].dts,O[0].pts,O[0].dts+$,O[0].pts+$,U||0)),this.trigger("timingInfo",{start:O[0].pts,end:O[0].pts+$})),this.trigger("data",{track:i,boxes:D}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){st(i),_=[],this.trigger("reset")}},un.prototype=new Te,cn=function VideoSegmentStream(i,s){var _,T,S=0,C=[],P=[];s=s||{},cn.prototype.init.call(this),delete i.minPTS,this.gopCache_=[],this.push=function(s){lt(i,s),"seq_parameter_set_rbsp"!==s.nalUnitType||_||(_=s.config,i.sps=[s.data],fn.forEach((function(s){i[s]=_[s]}),this)),"pic_parameter_set_rbsp"!==s.nalUnitType||T||(T=s.data,i.pps=[s.data]),C.push(s)},this.flush=function(){for(var _,T,O,M,R,D,j,$,U=0;C.length&&"access_unit_delimiter_rbsp"!==C[0].nalUnitType;)C.shift();if(0===C.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(_=De(C),(O=je(_))[0][0].keyFrame||((T=this.getGopForFusion_(C[0],i))?(U=T.duration,O.unshift(T),O.byteLength+=T.byteLength,O.nalCount+=T.nalCount,O.pts=T.pts,O.dts=T.dts,O.duration+=T.duration):O=Be(O)),P.length){var V;if(!(V=s.alignGopsAtEnd?this.alignGopsAtEnd_(O):this.alignGopsAtStart_(O)))return this.gopCache_.unshift({gop:O.pop(),pps:i.pps,sps:i.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),C=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");st(i),O=V}lt(i,O),i.samples=$e(O),R=Ie(Ue(O)),i.baseMediaDecodeTime=ot(i,s.keepOriginalTimestamps),this.trigger("processedGopsInfo",O.map((function(i){return{pts:i.pts,dts:i.dts,byteLength:i.byteLength}}))),j=O[0],$=O[O.length-1],this.trigger("segmentTimingInfo",_n(i.baseMediaDecodeTime,j.dts,j.pts,$.dts+$.duration,$.pts+$.duration,U)),this.trigger("timingInfo",{start:O[0].pts,end:O[O.length-1].pts+O[O.length-1].duration}),this.gopCache_.unshift({gop:O.pop(),pps:i.pps,sps:i.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),C=[],this.trigger("baseMediaDecodeTime",i.baseMediaDecodeTime),this.trigger("timelineStartInfo",i.timelineStartInfo),M=Le(S,[i]),D=new Uint8Array(M.byteLength+R.byteLength),S++,D.set(M),D.set(R,M.byteLength),this.trigger("data",{track:i,boxes:D}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),C=[],this.gopCache_.length=0,P.length=0,this.trigger("reset")},this.resetStream_=function(){st(i),_=void 0,T=void 0},this.getGopForFusion_=function(s){var _,T,S,C,P,O=1/0;for(P=0;P<this.gopCache_.length;P++)S=(C=this.gopCache_[P]).gop,i.pps&&yn(i.pps[0],C.pps[0])&&i.sps&&yn(i.sps[0],C.sps[0])&&(S.dts<i.timelineStartInfo.dts||(_=s.dts-S.dts-S.duration)>=-1e4&&_<=45e3&&(!T||O>_)&&(T=C,O=_));return T?T.gop:null},this.alignGopsAtStart_=function(i){var s,_,T,S,C,O,M,R;for(C=i.byteLength,O=i.nalCount,M=i.duration,s=_=0;s<P.length&&_<i.length&&(T=P[s],S=i[_],T.pts!==S.pts);)S.pts>T.pts?s++:(_++,C-=S.byteLength,O-=S.nalCount,M-=S.duration);return 0===_?i:_===i.length?null:((R=i.slice(_)).byteLength=C,R.duration=M,R.nalCount=O,R.pts=R[0].pts,R.dts=R[0].dts,R)},this.alignGopsAtEnd_=function(i){var s,_,T,S,C,O,M;for(s=P.length-1,_=i.length-1,C=null,O=!1;s>=0&&_>=0;){if(T=P[s],S=i[_],T.pts===S.pts){O=!0;break}T.pts>S.pts?s--:(s===P.length-1&&(C=_),_--)}if(!O&&null===C)return null;if(0===(M=O?_:C))return i;var R=i.slice(M),D=R.reduce((function(i,s){return i.byteLength+=s.byteLength,i.duration+=s.duration,i.nalCount+=s.nalCount,i}),{byteLength:0,duration:0,nalCount:0});return R.byteLength=D.byteLength,R.duration=D.duration,R.nalCount=D.nalCount,R.pts=R[0].pts,R.dts=R[0].dts,R},this.alignGopsWith=function(i){P=i}},cn.prototype=new Te,hn=function CoalesceStream(i,s){this.numberOfTracks=0,this.metadataStream=s,void 0!==(i=i||{}).remux?this.remuxTracks=!!i.remux:this.remuxTracks=!0,"boolean"==typeof i.keepOriginalTimestamps?this.keepOriginalTimestamps=i.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,hn.prototype.init.call(this),this.push=function(i){return i.text?this.pendingCaptions.push(i):i.frames?this.pendingMetadata.push(i):(this.pendingTracks.push(i.track),this.pendingBytes+=i.boxes.byteLength,"video"===i.track.type&&(this.videoTrack=i.track,this.pendingBoxes.push(i.boxes)),void("audio"===i.track.type&&(this.audioTrack=i.track,this.pendingBoxes.unshift(i.boxes))))}},hn.prototype=new Te,hn.prototype.flush=function(i){var s,_,T,S,C=0,P={captions:[],captionStreams:{},metadata:[],info:{}},O=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==i&&"AudioSegmentStream"!==i)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(O=this.videoTrack.timelineStartInfo.pts,fn.forEach((function(i){P.info[i]=this.videoTrack[i]}),this)):this.audioTrack&&(O=this.audioTrack.timelineStartInfo.pts,mn.forEach((function(i){P.info[i]=this.audioTrack[i]}),this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?P.type=this.pendingTracks[0].type:P.type="combined",this.emittedTracks+=this.pendingTracks.length,T=Re(this.pendingTracks),P.initSegment=new Uint8Array(T.byteLength),P.initSegment.set(T),P.data=new Uint8Array(this.pendingBytes),S=0;S<this.pendingBoxes.length;S++)P.data.set(this.pendingBoxes[S],C),C+=this.pendingBoxes[S].byteLength;for(S=0;S<this.pendingCaptions.length;S++)(s=this.pendingCaptions[S]).startTime=et(s.startPts,O,this.keepOriginalTimestamps),s.endTime=et(s.endPts,O,this.keepOriginalTimestamps),P.captionStreams[s.stream]=!0,P.captions.push(s);for(S=0;S<this.pendingMetadata.length;S++)(_=this.pendingMetadata[S]).cueTime=et(_.pts,O,this.keepOriginalTimestamps),P.metadata.push(_);for(P.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",P),S=0;S<P.captions.length;S++)s=P.captions[S],this.trigger("caption",s);for(S=0;S<P.metadata.length;S++)_=P.metadata[S],this.trigger("id3Frame",_)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},hn.prototype.setRemux=function(i){this.remuxTracks=i},dn=function Transmuxer(i){var s,_,T=this,S=!0;dn.prototype.init.call(this),i=i||{},this.baseMediaDecodeTime=i.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var S={};this.transmuxPipeline_=S,S.type="aac",S.metadataStream=new Gt.MetadataStream,S.aacStream=new pn,S.audioTimestampRolloverStream=new Gt.TimestampRolloverStream("audio"),S.timedMetadataTimestampRolloverStream=new Gt.TimestampRolloverStream("timed-metadata"),S.adtsStream=new Qt,S.coalesceStream=new hn(i,S.metadataStream),S.headOfPipeline=S.aacStream,S.aacStream.pipe(S.audioTimestampRolloverStream).pipe(S.adtsStream),S.aacStream.pipe(S.timedMetadataTimestampRolloverStream).pipe(S.metadataStream).pipe(S.coalesceStream),S.metadataStream.on("timestamp",(function(i){S.aacStream.setTimestamp(i.timeStamp)})),S.aacStream.on("data",(function(C){"timed-metadata"!==C.type&&"audio"!==C.type||S.audioSegmentStream||(_=_||{timelineStartInfo:{baseMediaDecodeTime:T.baseMediaDecodeTime},codec:"adts",type:"audio"},S.coalesceStream.numberOfTracks++,S.audioSegmentStream=new un(_,i),S.audioSegmentStream.on("timingInfo",T.trigger.bind(T,"audioTimingInfo")),S.adtsStream.pipe(S.audioSegmentStream).pipe(S.coalesceStream),T.trigger("trackinfo",{hasAudio:!!_,hasVideo:!!s}))})),S.coalesceStream.on("data",this.trigger.bind(this,"data")),S.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var S={};this.transmuxPipeline_=S,S.type="ts",S.metadataStream=new Gt.MetadataStream,S.packetStream=new Gt.TransportPacketStream,S.parseStream=new Gt.TransportParseStream,S.elementaryStream=new Gt.ElementaryStream,S.timestampRolloverStream=new Gt.TimestampRolloverStream,S.adtsStream=new Qt,S.h264Stream=new gn,S.captionStream=new Gt.CaptionStream,S.coalesceStream=new hn(i,S.metadataStream),S.headOfPipeline=S.packetStream,S.packetStream.pipe(S.parseStream).pipe(S.elementaryStream).pipe(S.timestampRolloverStream),S.timestampRolloverStream.pipe(S.h264Stream),S.timestampRolloverStream.pipe(S.adtsStream),S.timestampRolloverStream.pipe(S.metadataStream).pipe(S.coalesceStream),S.h264Stream.pipe(S.captionStream).pipe(S.coalesceStream),S.elementaryStream.on("data",(function(C){var P;if("metadata"===C.type){for(P=C.tracks.length;P--;)s||"video"!==C.tracks[P].type?_||"audio"!==C.tracks[P].type||((_=C.tracks[P]).timelineStartInfo.baseMediaDecodeTime=T.baseMediaDecodeTime):(s=C.tracks[P]).timelineStartInfo.baseMediaDecodeTime=T.baseMediaDecodeTime;s&&!S.videoSegmentStream&&(S.coalesceStream.numberOfTracks++,S.videoSegmentStream=new cn(s,i),S.videoSegmentStream.on("timelineStartInfo",(function(s){_&&!i.keepOriginalTimestamps&&(_.timelineStartInfo=s,S.audioSegmentStream.setEarliestDts(s.dts-T.baseMediaDecodeTime))})),S.videoSegmentStream.on("processedGopsInfo",T.trigger.bind(T,"gopInfo")),S.videoSegmentStream.on("segmentTimingInfo",T.trigger.bind(T,"videoSegmentTimingInfo")),S.videoSegmentStream.on("baseMediaDecodeTime",(function(i){_&&S.audioSegmentStream.setVideoBaseMediaDecodeTime(i)})),S.videoSegmentStream.on("timingInfo",T.trigger.bind(T,"videoTimingInfo")),S.h264Stream.pipe(S.videoSegmentStream).pipe(S.coalesceStream)),_&&!S.audioSegmentStream&&(S.coalesceStream.numberOfTracks++,S.audioSegmentStream=new un(_,i),S.audioSegmentStream.on("timingInfo",T.trigger.bind(T,"audioTimingInfo")),S.audioSegmentStream.on("segmentTimingInfo",T.trigger.bind(T,"audioSegmentTimingInfo")),S.adtsStream.pipe(S.audioSegmentStream).pipe(S.coalesceStream)),T.trigger("trackinfo",{hasAudio:!!_,hasVideo:!!s})}})),S.coalesceStream.on("data",this.trigger.bind(this,"data")),S.coalesceStream.on("id3Frame",(function(i){i.dispatchType=S.metadataStream.dispatchType,T.trigger("id3Frame",i)})),S.coalesceStream.on("caption",this.trigger.bind(this,"caption")),S.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(T){var S=this.transmuxPipeline_;i.keepOriginalTimestamps||(this.baseMediaDecodeTime=T),_&&(_.timelineStartInfo.dts=void 0,_.timelineStartInfo.pts=void 0,st(_),S.audioTimestampRolloverStream&&S.audioTimestampRolloverStream.discontinuity()),s&&(S.videoSegmentStream&&(S.videoSegmentStream.gopCache_=[]),s.timelineStartInfo.dts=void 0,s.timelineStartInfo.pts=void 0,st(s),S.captionStream.reset()),S.timestampRolloverStream&&S.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(i){_&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(i)},this.setRemux=function(s){var _=this.transmuxPipeline_;i.remux=s,_&&_.coalesceStream&&_.coalesceStream.setRemux(s)},this.alignGopsWith=function(i){s&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(i)},this.push=function(i){if(S){var s=vn(i);s&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():s||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),S=!1}this.transmuxPipeline_.headOfPipeline.push(i)},this.flush=function(){S=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},dn.prototype=new Te;var wn={Transmuxer:dn,VideoSegmentStream:cn,AudioSegmentStream:un,AUDIO_PROPERTIES:mn,VIDEO_PROPERTIES:fn,generateSegmentTimingInfo:_n},kn={Adts:Qt,h264:tn},Tn=Ke,Sn=function AudioSegmentStream(i,s){var _=[],T=0,S=0,C=0,P=1/0,O=null,M=null;s=s||{},AudioSegmentStream.prototype.init.call(this),this.push=function(s){lt(i,s),i&&mn.forEach((function(_){i[_]=s[_]})),_.push(s)},this.setEarliestDts=function(i){S=i},this.setVideoBaseMediaDecodeTime=function(i){P=i},this.setAudioAppendStart=function(i){C=i},this.processFrames_=function(){var R,D,j,$,U;0!==_.length&&0!==(R=nt(_,i,S)).length&&(i.baseMediaDecodeTime=ot(i,s.keepOriginalTimestamps),tt(i,R,C,P),i.samples=rt(R),j=Ie(it(R)),_=[],D=Le(T,[i]),T++,i.initSegment=Re([i]),($=new Uint8Array(D.byteLength+j.byteLength)).set(D),$.set(j,D.byteLength),st(i),null===O&&(M=O=R[0].pts),M+=R.length*(1024*Tn/i.samplerate),U={start:O},this.trigger("timingInfo",U),this.trigger("data",{track:i,boxes:$}))},this.flush=function(){this.processFrames_(),this.trigger("timingInfo",{start:O,end:M}),this.resetTiming_(),this.trigger("done","AudioSegmentStream")},this.partialFlush=function(){this.processFrames_(),this.trigger("partialdone","AudioSegmentStream")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline","AudioSegmentStream")},this.resetTiming_=function(){st(i),O=null,M=null},this.reset=function(){this.resetTiming_(),_=[],this.trigger("reset")}};Sn.prototype=new Te;var Cn=Sn,xn=function VideoSegmentStream(i,s){var _,T,S,C=0,P=[],O=[],M=null,R=null,D=!0;s=s||{},VideoSegmentStream.prototype.init.call(this),this.push=function(s){lt(i,s),void 0===i.timelineStartInfo.dts&&(i.timelineStartInfo.dts=s.dts),"seq_parameter_set_rbsp"!==s.nalUnitType||_||(_=s.config,i.sps=[s.data],fn.forEach((function(s){i[s]=_[s]}),this)),"pic_parameter_set_rbsp"!==s.nalUnitType||T||(T=s.data,i.pps=[s.data]),P.push(s)},this.processNals_=function(_){var T;for(P=O.concat(P);P.length&&"access_unit_delimiter_rbsp"!==P[0].nalUnitType;)P.shift();if(0!==P.length){var j=De(P);if(j.length)if(O=j[j.length-1],_&&(j.pop(),j.duration-=O.duration,j.nalCount-=O.length,j.byteLength-=O.byteLength),j.length){if(this.trigger("timelineStartInfo",i.timelineStartInfo),D){if(!(S=je(j))[0][0].keyFrame){if(!(S=Be(S))[0][0].keyFrame)return P=[].concat.apply([],j).concat(O),void(O=[]);(j=[].concat.apply([],S)).duration=S.duration}D=!1}for(null===M&&(M=j[0].pts,R=M),R+=j.duration,this.trigger("timingInfo",{start:M,end:R}),T=0;T<j.length;T++){var $=j[T];i.samples=Fe($);var U=Ie(He($));st(i),lt(i,$),i.baseMediaDecodeTime=ot(i,s.keepOriginalTimestamps);var V=Le(C,[i]);C++,i.initSegment=Re([i]);var Z=new Uint8Array(V.byteLength+U.byteLength);Z.set(V),Z.set(U,V.byteLength),this.trigger("data",{track:i,boxes:Z,sequence:C,videoFrameDts:$.dts,videoFramePts:$.pts})}P=[]}else P=[]}},this.resetTimingAndConfig_=function(){_=void 0,T=void 0,M=null,R=null},this.partialFlush=function(){this.processNals_(!0),this.trigger("partialdone","VideoSegmentStream")},this.flush=function(){this.processNals_(!1),this.resetTimingAndConfig_(),this.trigger("done","VideoSegmentStream")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline","VideoSegmentStream")},this.reset=function(){this.resetTimingAndConfig_(),O=[],P=[],D=!0,this.trigger("reset")}};xn.prototype=new Te;var En=xn,Pn=an,An=function createPipeline(i){return i.prototype=new Te,i.prototype.init.call(i),i},On=function setupPipelineListeners(i,s){i.on("data",s.trigger.bind(s,"data")),i.on("done",s.trigger.bind(s,"done")),i.on("partialdone",s.trigger.bind(s,"partialdone")),i.on("endedtimeline",s.trigger.bind(s,"endedtimeline")),i.on("audioTimingInfo",s.trigger.bind(s,"audioTimingInfo")),i.on("videoTimingInfo",s.trigger.bind(s,"videoTimingInfo")),i.on("trackinfo",s.trigger.bind(s,"trackinfo")),i.on("id3Frame",(function(_){_.dispatchType=i.metadataStream.dispatchType,_.cueTime=Xe(_.pts),s.trigger("id3Frame",_)})),i.on("caption",(function(i){s.trigger("caption",i)}))},Mn=function Transmuxer(i){var s=null,_=!0;i=i||{},Transmuxer.prototype.init.call(this),i.baseMediaDecodeTime=i.baseMediaDecodeTime||0,this.push=function(T){if(_){var S=Pn(T);!S||s&&"aac"===s.type?S||s&&"ts"===s.type||(s=function tsPipeline(i){var s={type:"ts",tracks:{audio:null,video:null},packet:new Gt.TransportPacketStream,parse:new Gt.TransportParseStream,elementary:new Gt.ElementaryStream,timestampRollover:new Gt.TimestampRolloverStream,adts:new kn.Adts,h264:new kn.h264.H264Stream,captionStream:new Gt.CaptionStream,metadataStream:new Gt.MetadataStream};return s.headOfPipeline=s.packet,s.packet.pipe(s.parse).pipe(s.elementary).pipe(s.timestampRollover),s.timestampRollover.pipe(s.h264),s.h264.pipe(s.captionStream),s.timestampRollover.pipe(s.metadataStream),s.timestampRollover.pipe(s.adts),s.elementary.on("data",(function(_){if("metadata"===_.type){for(var T=0;T<_.tracks.length;T++)s.tracks[_.tracks[T].type]||(s.tracks[_.tracks[T].type]=_.tracks[T],s.tracks[_.tracks[T].type].timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime);s.tracks.video&&!s.videoSegmentStream&&(s.videoSegmentStream=new En(s.tracks.video,i),s.videoSegmentStream.on("timelineStartInfo",(function(_){s.tracks.audio&&!i.keepOriginalTimestamps&&s.audioSegmentStream.setEarliestDts(_.dts-i.baseMediaDecodeTime)})),s.videoSegmentStream.on("timingInfo",s.trigger.bind(s,"videoTimingInfo")),s.videoSegmentStream.on("data",(function(i){s.trigger("data",{type:"video",data:i})})),s.videoSegmentStream.on("done",s.trigger.bind(s,"done")),s.videoSegmentStream.on("partialdone",s.trigger.bind(s,"partialdone")),s.videoSegmentStream.on("endedtimeline",s.trigger.bind(s,"endedtimeline")),s.h264.pipe(s.videoSegmentStream)),s.tracks.audio&&!s.audioSegmentStream&&(s.audioSegmentStream=new Cn(s.tracks.audio,i),s.audioSegmentStream.on("data",(function(i){s.trigger("data",{type:"audio",data:i})})),s.audioSegmentStream.on("done",s.trigger.bind(s,"done")),s.audioSegmentStream.on("partialdone",s.trigger.bind(s,"partialdone")),s.audioSegmentStream.on("endedtimeline",s.trigger.bind(s,"endedtimeline")),s.audioSegmentStream.on("timingInfo",s.trigger.bind(s,"audioTimingInfo")),s.adts.pipe(s.audioSegmentStream)),s.trigger("trackinfo",{hasAudio:!!s.tracks.audio,hasVideo:!!s.tracks.video})}})),s.captionStream.on("data",(function(_){var T;T=s.tracks.video&&s.tracks.video.timelineStartInfo.pts||0,_.startTime=et(_.startPts,T,i.keepOriginalTimestamps),_.endTime=et(_.endPts,T,i.keepOriginalTimestamps),s.trigger("caption",_)})),(s=An(s)).metadataStream.on("data",s.trigger.bind(s,"id3Frame")),s}(i),On(s,this)):(s=function aacPipeline(i){var s={type:"aac",tracks:{audio:null},metadataStream:new Gt.MetadataStream,aacStream:new pn,audioRollover:new Gt.TimestampRolloverStream("audio"),timedMetadataRollover:new Gt.TimestampRolloverStream("timed-metadata"),adtsStream:new Qt(!0)};return s.headOfPipeline=s.aacStream,s.aacStream.pipe(s.audioRollover).pipe(s.adtsStream),s.aacStream.pipe(s.timedMetadataRollover).pipe(s.metadataStream),s.metadataStream.on("timestamp",(function(i){s.aacStream.setTimestamp(i.timeStamp)})),s.aacStream.on("data",(function(_){"timed-metadata"!==_.type&&"audio"!==_.type||s.audioSegmentStream||(s.tracks.audio=s.tracks.audio||{timelineStartInfo:{baseMediaDecodeTime:i.baseMediaDecodeTime},codec:"adts",type:"audio"},s.audioSegmentStream=new Cn(s.tracks.audio,i),s.audioSegmentStream.on("data",(function(i){s.trigger("data",{type:"audio",data:i})})),s.audioSegmentStream.on("partialdone",s.trigger.bind(s,"partialdone")),s.audioSegmentStream.on("done",s.trigger.bind(s,"done")),s.audioSegmentStream.on("endedtimeline",s.trigger.bind(s,"endedtimeline")),s.audioSegmentStream.on("timingInfo",s.trigger.bind(s,"audioTimingInfo")),s.adtsStream.pipe(s.audioSegmentStream),s.trigger("trackinfo",{hasAudio:!!s.tracks.audio,hasVideo:!!s.tracks.video}))})),(s=An(s)).metadataStream.on("data",s.trigger.bind(s,"id3Frame")),s}(i),On(s,this)),_=!1}s.headOfPipeline.push(T)},this.flush=function(){s&&(_=!0,s.headOfPipeline.flush())},this.partialFlush=function(){s&&s.headOfPipeline.partialFlush()},this.endTimeline=function(){s&&s.headOfPipeline.endTimeline()},this.reset=function(){s&&s.headOfPipeline.reset()},this.setBaseMediaDecodeTime=function(_){i.keepOriginalTimestamps||(i.baseMediaDecodeTime=_),s&&(s.tracks.audio&&(s.tracks.audio.timelineStartInfo.dts=void 0,s.tracks.audio.timelineStartInfo.pts=void 0,st(s.tracks.audio),s.audioRollover&&s.audioRollover.discontinuity()),s.tracks.video&&(s.videoSegmentStream&&(s.videoSegmentStream.gopCache_=[]),s.tracks.video.timelineStartInfo.dts=void 0,s.tracks.video.timelineStartInfo.pts=void 0,st(s.tracks.video)),s.timestampRollover&&s.timestampRollover.discontinuity())},this.setRemux=function(_){i.remux=_,s&&s.coalesceStream&&s.coalesceStream.setRemux(_)},this.setAudioAppendStart=function(i){s&&s.tracks.audio&&s.audioSegmentStream&&s.audioSegmentStream.setAudioAppendStart(i)},this.alignGopsWith=function(i){}};Mn.prototype=new Te;var zn=Mn,In=function toUnsigned(i){return i>>>0},Ln=function parseType(i){var s="";return s+=String.fromCharCode(i[0]),s+=String.fromCharCode(i[1]),s+=String.fromCharCode(i[2]),s+=String.fromCharCode(i[3])},Rn=In,Nn=function findBox(i,s){var _,T,S,C,P,O=[];if(!s.length)return null;for(_=0;_<i.byteLength;)T=Rn(i[_]<<24|i[_+1]<<16|i[_+2]<<8|i[_+3]),S=Ln(i.subarray(_+4,_+8)),C=T>1?_+T:i.byteLength,S===s[0]&&(1===s.length?O.push(i.subarray(_+8,C)):(P=findBox(i.subarray(_+8,C),s.slice(1))).length&&(O=O.concat(P))),_=C;return O},Dn=In,jn=function tfdt(i){var s={version:i[0],flags:new Uint8Array(i.subarray(1,4)),baseMediaDecodeTime:Dn(i[4]<<24|i[5]<<16|i[6]<<8|i[7])};return 1===s.version&&(s.baseMediaDecodeTime*=Math.pow(2,32),s.baseMediaDecodeTime+=Dn(i[8]<<24|i[9]<<16|i[10]<<8|i[11])),s},Bn=function parseSampleFlags(i){return{isLeading:(12&i[0])>>>2,dependsOn:3&i[0],isDependedOn:(192&i[1])>>>6,hasRedundancy:(48&i[1])>>>4,paddingValue:(14&i[1])>>>1,isNonSyncSample:1&i[1],degradationPriority:i[2]<<8|i[3]}},$n=function trun(i){var s,_={version:i[0],flags:new Uint8Array(i.subarray(1,4)),samples:[]},T=new DataView(i.buffer,i.byteOffset,i.byteLength),S=1&_.flags[2],C=4&_.flags[2],P=1&_.flags[1],O=2&_.flags[1],M=4&_.flags[1],R=8&_.flags[1],D=T.getUint32(4),j=8;for(S&&(_.dataOffset=T.getInt32(j),j+=4),C&&D&&(s={flags:Bn(i.subarray(j,j+4))},j+=4,P&&(s.duration=T.getUint32(j),j+=4),O&&(s.size=T.getUint32(j),j+=4),R&&(1===_.version?s.compositionTimeOffset=T.getInt32(j):s.compositionTimeOffset=T.getUint32(j),j+=4),_.samples.push(s),D--);D--;)s={},P&&(s.duration=T.getUint32(j),j+=4),O&&(s.size=T.getUint32(j),j+=4),M&&(s.flags=Bn(i.subarray(j,j+4)),j+=4),R&&(1===_.version?s.compositionTimeOffset=T.getInt32(j):s.compositionTimeOffset=T.getUint32(j),j+=4),_.samples.push(s);return _},Un=function tfhd(i){var s,_=new DataView(i.buffer,i.byteOffset,i.byteLength),T={version:i[0],flags:new Uint8Array(i.subarray(1,4)),trackId:_.getUint32(4)},S=1&T.flags[2],C=2&T.flags[2],P=8&T.flags[2],O=16&T.flags[2],M=32&T.flags[2],R=65536&T.flags[0],D=131072&T.flags[0];return s=8,S&&(s+=4,T.baseDataOffset=_.getUint32(12),s+=4),C&&(T.sampleDescriptionIndex=_.getUint32(s),s+=4),P&&(T.defaultSampleDuration=_.getUint32(s),s+=4),O&&(T.defaultSampleSize=_.getUint32(s),s+=4),M&&(T.defaultSampleFlags=_.getUint32(s)),R&&(T.durationIsEmpty=!0),!S&&D&&(T.baseDataOffsetIsMoof=!0),T},Fn=ht,Hn=Ct.CaptionStream,qn=function mapToSample(i,s){for(var _=i,T=0;T<s.length;T++){var S=s[T];if(_<S.size)return S;_-=S.size}return null},Vn=function parseCaptionNals(i,s){var _=Nn(i,["moof","traf"]),T=Nn(i,["mdat"]),S={},C=[];return T.forEach((function(i,s){var T=_[s];C.push({mdat:i,traf:T})})),C.forEach((function(i){var _,T,C=i.mdat,P=i.traf,O=Nn(P,["tfhd"]),M=Un(O[0]),R=M.trackId,D=Nn(P,["tfdt"]),j=D.length>0?jn(D[0]).baseMediaDecodeTime:0,$=Nn(P,["trun"]);s===R&&$.length>0&&(_=function parseSamples(i,s,_){var T=s,S=_.defaultSampleDuration||0,C=_.defaultSampleSize||0,P=_.trackId,O=[];return i.forEach((function(i){var s=$n(i).samples;s.forEach((function(i){void 0===i.duration&&(i.duration=S),void 0===i.size&&(i.size=C),i.trackId=P,i.dts=T,void 0===i.compositionTimeOffset&&(i.compositionTimeOffset=0),i.pts=T+i.compositionTimeOffset,T+=i.duration})),O=O.concat(s)})),O}($,j,M),T=function findSeiNals(i,s,_){var T,S,C,P,O=new DataView(i.buffer,i.byteOffset,i.byteLength),M=[];for(S=0;S+4<i.length;S+=C)if(C=O.getUint32(S),S+=4,!(C<=0))switch(31&i[S]){case 6:var R=i.subarray(S+1,S+1+C),D=qn(S,s);if(T={nalUnitType:"sei_rbsp",size:C,data:R,escapedRBSP:Fn(R),trackId:_},D)T.pts=D.pts,T.dts=D.dts,P=D;else{if(!P){console.log("We've encountered a nal unit without data. See mux.js#233.");break}T.pts=P.pts,T.dts=P.dts}M.push(T)}return M}(C,_,R),S[R]||(S[R]=[]),S[R]=S[R].concat(T))})),S},Gn=function CaptionParser(){var i,s,_,T,S,C,P=!1;this.isInitialized=function(){return P},this.init=function(s){i=new Hn,P=!0,C=!!s&&s.isPartial,i.on("data",(function(i){i.startTime=i.startPts/T,i.endTime=i.endPts/T,S.captions.push(i),S.captionStreams[i.stream]=!0}))},this.isNewInit=function(i,s){return!(i&&0===i.length||s&&"object"==typeof s&&0===Object.keys(s).length)&&(_!==i[0]||T!==s[_])},this.parse=function(i,C,P){var O;if(!this.isInitialized())return null;if(!C||!P)return null;if(this.isNewInit(C,P))_=C[0],T=P[_];else if(null===_||!T)return s.push(i),null;for(;s.length>0;){var M=s.shift();this.parse(M,C,P)}return O=function parseEmbeddedCaptions(i,s,_){return null===s?null:{seiNals:Vn(i,s)[s],timescale:_}}(i,_,T),null!==O&&O.seiNals?(this.pushNals(O.seiNals),this.flushStream(),S):null},this.pushNals=function(s){if(!this.isInitialized()||!s||0===s.length)return null;s.forEach((function(s){i.push(s)}))},this.flushStream=function(){if(!this.isInitialized())return null;C?i.partialFlush():i.flush()},this.clearParsedCaptions=function(){S.captions=[],S.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;i.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){s=[],_=null,T=null,S?this.clearParsedCaptions():S={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()},Zn=function typeFromStreamString(i){return"AudioSegmentStream"===i?"audio":"VideoSegmentStream"===i?"video":""},Wn=function(){function MessageHandlers(i,s){this.options=s||{},this.self=i,this.init()}var i=MessageHandlers.prototype;return i.init=function init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=this.options.handlePartialData?new zn(this.options):new wn.Transmuxer(this.options),this.options.handlePartialData?function wirePartialTransmuxerEvents(i,s){s.on("data",(function(s){var _={data:s.data.track.initSegment.buffer,byteOffset:s.data.track.initSegment.byteOffset,byteLength:s.data.track.initSegment.byteLength},T={boxes:{data:s.data.boxes.buffer,byteOffset:s.data.boxes.byteOffset,byteLength:s.data.boxes.byteLength},initSegment:_,type:s.type,sequence:s.data.sequence};void 0!==s.data.videoFrameDts&&(T.videoFrameDtsTime=Xe(s.data.videoFrameDts)),void 0!==s.data.videoFramePts&&(T.videoFramePtsTime=Xe(s.data.videoFramePts)),i.postMessage({action:"data",segment:T},[T.boxes.data,T.initSegment.data])})),s.on("id3Frame",(function(s){i.postMessage({action:"id3Frame",id3Frame:s})})),s.on("caption",(function(s){i.postMessage({action:"caption",caption:s})})),s.on("done",(function(s){i.postMessage({action:"done",type:Zn(s)})})),s.on("partialdone",(function(s){i.postMessage({action:"partialdone",type:Zn(s)})})),s.on("endedsegment",(function(s){i.postMessage({action:"endedSegment",type:Zn(s)})})),s.on("trackinfo",(function(s){i.postMessage({action:"trackinfo",trackInfo:s})})),s.on("audioTimingInfo",(function(s){if(null!==s.start){var _={start:Xe(s.start)};s.end&&(_.end=Xe(s.end)),i.postMessage({action:"audioTimingInfo",audioTimingInfo:_})}else i.postMessage({action:"audioTimingInfo",audioTimingInfo:s})})),s.on("videoTimingInfo",(function(s){var _={start:Xe(s.start)};s.end&&(_.end=Xe(s.end)),i.postMessage({action:"videoTimingInfo",videoTimingInfo:_})}))}(this.self,this.transmuxer):function wireFullTransmuxerEvents(i,s){s.on("data",(function(s){var _=s.initSegment;s.initSegment={data:_.buffer,byteOffset:_.byteOffset,byteLength:_.byteLength};var T=s.data;s.data=T.buffer,i.postMessage({action:"data",segment:s,byteOffset:T.byteOffset,byteLength:T.byteLength},[s.data])})),s.on("done",(function(s){i.postMessage({action:"done"})})),s.on("gopInfo",(function(s){i.postMessage({action:"gopInfo",gopInfo:s})})),s.on("videoSegmentTimingInfo",(function(s){var _={start:{decode:Xe(s.start.dts),presentation:Xe(s.start.pts)},end:{decode:Xe(s.end.dts),presentation:Xe(s.end.pts)},baseMediaDecodeTime:Xe(s.baseMediaDecodeTime)};s.prependedContentDuration&&(_.prependedContentDuration=Xe(s.prependedContentDuration)),i.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:_})})),s.on("audioSegmentTimingInfo",(function(s){var _={start:{decode:Xe(s.start.dts),presentation:Xe(s.start.pts)},end:{decode:Xe(s.end.dts),presentation:Xe(s.end.pts)},baseMediaDecodeTime:Xe(s.baseMediaDecodeTime)};s.prependedContentDuration&&(_.prependedContentDuration=Xe(s.prependedContentDuration)),i.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:_})})),s.on("id3Frame",(function(s){i.postMessage({action:"id3Frame",id3Frame:s})})),s.on("caption",(function(s){i.postMessage({action:"caption",caption:s})})),s.on("trackinfo",(function(s){i.postMessage({action:"trackinfo",trackInfo:s})})),s.on("audioTimingInfo",(function(s){i.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:Xe(s.start),end:Xe(s.end)}})})),s.on("videoTimingInfo",(function(s){i.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:Xe(s.start),end:Xe(s.end)}})}))}(this.self,this.transmuxer)},i.pushMp4Captions=function pushMp4Captions(i){this.captionParser||(this.captionParser=new Gn,this.captionParser.init());var s=new Uint8Array(i.data,i.byteOffset,i.byteLength),_=this.captionParser.parse(s,i.trackIds,i.timescales);this.self.postMessage({action:"mp4Captions",captions:_&&_.captions||[],data:s.buffer},[s.buffer])},i.clearAllMp4Captions=function clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()},i.clearParsedMp4Captions=function clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()},i.push=function push(i){var s=new Uint8Array(i.data,i.byteOffset,i.byteLength);this.transmuxer.push(s)},i.reset=function reset(){this.transmuxer.reset()},i.setTimestampOffset=function setTimestampOffset(i){var s=i.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(Ye(s)))},i.setAudioAppendStart=function setAudioAppendStart(i){this.transmuxer.setAudioAppendStart(Math.ceil(Ye(i.appendStart)))},i.setRemux=function setRemux(i){this.transmuxer.setRemux(i.remux)},i.flush=function flush(i){this.transmuxer.flush(),_.postMessage({action:"done",type:"transmuxed"})},i.partialFlush=function partialFlush(i){this.transmuxer.partialFlush(),_.postMessage({action:"partialdone",type:"transmuxed"})},i.endTimeline=function endTimeline(){this.transmuxer.endTimeline(),_.postMessage({action:"endedtimeline",type:"transmuxed"})},i.alignGopsWith=function alignGopsWith(i){this.transmuxer.alignGopsWith(i.gopsToAlignWith.slice())},MessageHandlers}(),Kn=new function TransmuxerWorker(i){i.onmessage=function(s){"init"===s.data.action&&s.data.options?this.messageHandlers=new Wn(i,s.data.options):(this.messageHandlers||(this.messageHandlers=new Wn(i)),s.data&&s.data.action&&"init"!==s.data.action&&this.messageHandlers[s.data.action]&&this.messageHandlers[s.data.action](s.data))}}(_)}()})),Zs=function isMaat(i,s){var _=s.attributes||{};return i&&i.mediaGroups&&i.mediaGroups.AUDIO&&_.AUDIO&&i.mediaGroups.AUDIO[_.AUDIO]},Ws=function codecsForPlaylist(i,s){var _=s.attributes||{},T=function getCodecs(i){var s=i.attributes||{};if(s.CODECS)return(0,ut.kS)(s.CODECS)}(s)||{};if(Zs(i,s)&&!T.audio&&!function isMuxed(i,s){if(!Zs(i,s))return!0;var _=s.attributes||{},T=i.mediaGroups.AUDIO[_.AUDIO];for(var S in T)if(!T[S].uri&&!T[S].playlists)return!0;return!1}(i,s)){var S=(0,ut.Jg)(i,_.AUDIO);S&&(T.audio=S.audio)}var C={};return T.video&&(C.video=(0,ut.ws)(""+T.video.type+T.video.details)),T.audio&&(C.audio=(0,ut.ws)(""+T.audio.type+T.audio.details)),T.text&&(C.text=T.text.type),T.unknown&&(C.unknown=T.unknown),C},Ks=function logger(i){return videojs$1.log.debug?videojs$1.log.debug.bind(videojs$1,"VHS:",i+" >"):function(){}},Ys=Ks("PlaylistSelector"),Xs=function representationToString(i){if(i&&i.playlist){var s=i.playlist;return JSON.stringify({id:s.id,bandwidth:i.bandwidth,width:i.width,height:i.height,codecs:s.attributes&&s.attributes.CODECS||""})}},Qs=function safeGetComputedStyle(i,s){if(!i)return"";var _=S().getComputedStyle(i);return _?_[s]:""},Js=function stableSort(i,s){var _=i.slice();i.sort((function(i,T){var S=s(i,T);return 0===S?_.indexOf(i)-_.indexOf(T):S}))},eo=function comparePlaylistBandwidth(i,s){var _,T;return i.attributes.BANDWIDTH&&(_=i.attributes.BANDWIDTH),_=_||S().Number.MAX_VALUE,s.attributes.BANDWIDTH&&(T=s.attributes.BANDWIDTH),_-(T=T||S().Number.MAX_VALUE)},to=function simpleSelector(i,s,_,T,C){if(i){var P={bandwidth:s,width:_,height:T,limitRenditionByPlayerDimensions:C},O=i.playlists.map((function(i){var s=i.attributes.RESOLUTION&&i.attributes.RESOLUTION.width,_=i.attributes.RESOLUTION&&i.attributes.RESOLUTION.height;return{bandwidth:i.attributes.BANDWIDTH||S().Number.MAX_VALUE,width:s,height:_,playlist:i}}));Js(O,(function(i,s){return i.bandwidth-s.bandwidth}));var M=(O=O.filter((function(i){return!Za.isIncompatible(i.playlist)}))).filter((function(i){return Za.isEnabled(i.playlist)}));M.length||(M=O.filter((function(i){return!Za.isDisabled(i.playlist)})));var R=M.filter((function(i){return i.bandwidth*vs.BANDWIDTH_VARIANCE<s})),D=R[R.length-1],j=R.filter((function(i){return i.bandwidth===D.bandwidth}))[0];if(!1===C){var $=j||M[0]||O[0];if($&&$.playlist){var U="sortedPlaylistReps";return j&&(U="bandwidthBestRep"),M[0]&&(U="enabledPlaylistReps"),Ys("choosing "+Xs($)+" using "+U+" with options",P),$.playlist}return Ys("could not choose a playlist with options",P),null}var V=R.filter((function(i){return i.width&&i.height}));Js(V,(function(i,s){return i.width-s.width}));var Z=V.filter((function(i){return i.width===_&&i.height===T}));D=Z[Z.length-1];var Y,X,Q,ee=Z.filter((function(i){return i.bandwidth===D.bandwidth}))[0];ee||(X=(Y=V.filter((function(i){return i.width>_||i.height>T}))).filter((function(i){return i.width===Y[0].width&&i.height===Y[0].height})),D=X[X.length-1],Q=X.filter((function(i){return i.bandwidth===D.bandwidth}))[0]);var te=Q||ee||j||M[0]||O[0];if(te&&te.playlist){var ne="sortedPlaylistReps";return Q?ne="resolutionPlusOneRep":ee?ne="resolutionBestRep":j?ne="bandwidthBestRep":M[0]&&(ne="enabledPlaylistReps"),Ys("choosing "+Xs(te)+" using "+ne+" with options",P),te.playlist}return Ys("could not choose a playlist with options",P),null}},no=function lastBandwidthSelector(){var i=this.useDevicePixelRatio&&S().devicePixelRatio||1;return to(this.playlists.master,this.systemBandwidth,parseInt(Qs(this.tech_.el(),"width"),10)*i,parseInt(Qs(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions)},ro=function addMetadata(i){var s=i.inbandTextTracks,_=i.metadataArray,T=i.timestampOffset,C=i.videoDuration;if(_){var P=S().WebKitDataCue||S().VTTCue,O=s.metadataTrack_;if(O&&(_.forEach((function(i){var s=i.cueTime+T;!("number"!=typeof s||S().isNaN(s)||s<0)&&s<1/0&&i.frames.forEach((function(i){var _=new P(s,s,i.value||i.url||i.data||"");_.frame=i,_.value=i,function deprecateOldCue(i){Object.defineProperties(i.frame,{id:{get:function get(){return videojs$1.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),i.value.key}},value:{get:function get(){return videojs$1.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),i.value.data}},privateData:{get:function get(){return videojs$1.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),i.value.data}}})}(_),O.addCue(_)}))})),O.cues&&O.cues.length)){for(var M=O.cues,R=[],D=0;D<M.length;D++)M[D]&&R.push(M[D]);var j=R.reduce((function(i,s){var _=i[s.startTime]||[];return _.push(s),i[s.startTime]=_,i}),{}),$=Object.keys(j).sort((function(i,s){return Number(i)-Number(s)}));$.forEach((function(i,s){var _=j[i],T=Number($[s+1])||C;_.forEach((function(i){i.endTime=T}))}))}}},io=function removeCuesFromTrack(i,s,_){var T,S;if(_&&_.cues)for(T=_.cues.length;T--;)(S=_.cues[T]).startTime>=i&&S.endTime<=s&&_.removeCue(S)},ao=function finite(i){return"number"==typeof i&&isFinite(i)},so=1/60,oo=function timingInfoPropertyForMedia(i){return i+"TimingInfo"},lo=function timestampOffsetForSegment(i){var s=i.segmentTimeline,_=i.currentTimeline,T=i.startOfSegment,S=i.buffered;return i.overrideCheck||s!==_?s<_?T:S.length?S.end(S.length-1):T:null},co=function shouldWaitForTimelineChange(i){var s=i.timelineChangeController,_=i.currentTimeline,T=i.segmentTimeline,S=i.loaderType,C=i.audioDisabled;if(_===T)return!1;if("audio"===S){var P=s.lastTimelineChange({type:"main"});return!P||P.to!==T}if("main"===S&&C){var O=s.pendingTimelineChange({type:"audio"});return!O||O.to!==T}return!1},uo=function segmentTooLong(i){var s=i.segmentDuration,_=i.maxDuration;return!!s&&Math.round(s)>_+Aa},ho=function getTroublesomeSegmentDurationMessage(i,s){if("hls"!==s)return null;var _=function mediaDuration(i,s){var _=i&&"number"==typeof i.start&&"number"==typeof i.end?i.end-i.start:0,T=s&&"number"==typeof s.start&&"number"==typeof s.end?s.end-s.start:0;return Math.max(_,T)}(i.audioTimingInfo,i.videoTimingInfo);if(!_)return null;var T=i.playlist.targetDuration,S=uo({segmentDuration:_,maxDuration:2*T}),C=uo({segmentDuration:_,maxDuration:T}),P="Segment with index "+i.mediaIndex+" from playlist "+i.playlist.id+" has a duration of "+_+" when the reported duration is "+i.duration+" and the target duration is "+T+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return S||C?{severity:S?"warn":"info",message:P}:null},po=function(i){function SegmentLoader(s,_){var T;if(T=i.call(this)||this,!s)throw new TypeError("Initialization settings are required");if("function"!=typeof s.currentTime)throw new TypeError("No currentTime getter specified");if(!s.mediaSource)throw new TypeError("No MediaSource specified");return T.bandwidth=s.bandwidth,T.throughput={rate:0,count:0},T.roundTrip=NaN,T.resetStats_(),T.mediaIndex=null,T.hasPlayed_=s.hasPlayed,T.currentTime_=s.currentTime,T.seekable_=s.seekable,T.seeking_=s.seeking,T.duration_=s.duration,T.mediaSource_=s.mediaSource,T.vhs_=s.vhs,T.loaderType_=s.loaderType,T.currentMediaInfo_=void 0,T.startingMediaInfo_=void 0,T.segmentMetadataTrack_=s.segmentMetadataTrack,T.goalBufferLength_=s.goalBufferLength,T.sourceType_=s.sourceType,T.sourceUpdater_=s.sourceUpdater,T.inbandTextTracks_=s.inbandTextTracks,T.state_="INIT",T.handlePartialData_=s.handlePartialData,T.timelineChangeController_=s.timelineChangeController,T.shouldSaveSegmentTimingInfo_=!0,T.checkBufferTimeout_=null,T.error_=void 0,T.currentTimeline_=-1,T.pendingSegment_=null,T.xhrOptions_=null,T.pendingSegments_=[],T.audioDisabled_=!1,T.isPendingTimestampOffset_=!1,T.gopBuffer_=[],T.timeMapping_=0,T.safeAppend_=videojs$1.browser.IE_VERSION>=11,T.appendInitSegment_={audio:!0,video:!0},T.playlistOfLastInitSegment_={audio:null,video:null},T.callQueue_=[],T.loadQueue_=[],T.metadataQueue_={id3:[],caption:[]},T.activeInitSegmentId_=null,T.initSegments_={},T.cacheEncryptionKeys_=s.cacheEncryptionKeys,T.keyCache_={},T.decrypter_=s.decrypter,T.syncController_=s.syncController,T.syncPoint_={segmentIndex:0,time:0},T.transmuxer_=T.createTransmuxer_(),T.triggerSyncInfoUpdate_=function(){return T.trigger("syncinfoupdate")},T.syncController_.on("syncinfoupdate",T.triggerSyncInfoUpdate_),T.mediaSource_.addEventListener("sourceopen",(function(){T.isEndOfStream_()||(T.ended_=!1)})),T.fetchAtBuffer_=!1,T.logger_=Ks("SegmentLoader["+T.loaderType_+"]"),Object.defineProperty((0,O.Z)(T),"state",{get:function get(){return this.state_},set:function set(i){i!==this.state_&&(this.logger_(this.state_+" -> "+i),this.state_=i,this.trigger("statechange"))}}),T.sourceUpdater_.on("ready",(function(){T.hasEnoughInfoToAppend_()&&T.processCallQueue_()})),"main"===T.loaderType_&&T.timelineChangeController_.on("pendingtimelinechange",(function(){T.hasEnoughInfoToAppend_()&&T.processCallQueue_()})),"audio"===T.loaderType_&&T.timelineChangeController_.on("timelinechange",(function(){T.hasEnoughInfoToLoad_()&&T.processLoadQueue_(),T.hasEnoughInfoToAppend_()&&T.processCallQueue_()})),T}_inheritsLoose(SegmentLoader,i);var s=SegmentLoader.prototype;return s.createTransmuxer_=function createTransmuxer_(){var i=new Gs;return i.postMessage({action:"init",options:{remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,handlePartialData:this.handlePartialData_}}),i},s.resetStats_=function resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0},s.dispose=function dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&(this.transmuxer_.terminate(),xs()),this.resetStats_(),this.checkBufferTimeout_&&S().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},s.setAudio=function setAudio(i){this.audioDisabled_=!i,i?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},s.abort=function abort(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},s.abort_=function abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_)},s.checkForAbort_=function checkForAbort_(i){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==i:(this.state="READY",!0)},s.error=function error(i){return void 0!==i&&(this.logger_("error occurred:",i),this.error_=i),this.pendingSegment_=null,this.error_},s.endOfStream=function endOfStream(){this.ended_=!0,this.transmuxer_&&Cs(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},s.buffered_=function buffered_(){if(!this.sourceUpdater_||!this.startingMediaInfo_)return videojs$1.createTimeRanges();if("main"===this.loaderType_){var i=this.startingMediaInfo_,s=i.hasAudio,_=i.hasVideo,T=i.isMuxed;if(_&&s&&!this.audioDisabled_&&!T)return this.sourceUpdater_.buffered();if(_)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},s.initSegmentForMap=function initSegmentForMap(i,s){if(void 0===s&&(s=!1),!i)return null;var _=is(i),T=this.initSegments_[_];return s&&!T&&i.bytes&&(this.initSegments_[_]=T={resolvedUri:i.resolvedUri,byterange:i.byterange,bytes:i.bytes,tracks:i.tracks,timescales:i.timescales}),T||i},s.segmentKey=function segmentKey(i,s){if(void 0===s&&(s=!1),!i)return null;var _=as(i),T=this.keyCache_[_];this.cacheEncryptionKeys_&&s&&!T&&i.bytes&&(this.keyCache_[_]=T={resolvedUri:i.resolvedUri,bytes:i.bytes});var S={resolvedUri:(T||i).resolvedUri};return T&&(S.bytes=T.bytes),S},s.couldBeginLoading_=function couldBeginLoading_(){return this.playlist_&&!this.paused()},s.load=function load(){if(this.monitorBuffer_(),this.playlist_){if(this.syncController_.setDateTimeMapping(this.playlist_),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}},s.init_=function init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},s.playlist=function playlist(i,s){if(void 0===s&&(s={}),i){var _=this.playlist_,T=this.pendingSegment_;this.playlist_=i,this.xhrOptions_=s,"INIT"===this.state&&(i.syncInfo={mediaSequence:i.mediaSequence,time:0});var S=null;if(_&&(_.id?S=_.id:_.uri&&(S=_.uri)),this.logger_("playlist update ["+S+" => "+(i.id||i.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!_||_.uri!==i.uri)return(null!==this.mediaIndex||this.handlePartialData_)&&this.resyncLoader(),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");var C=i.mediaSequence-_.mediaSequence;this.logger_("live window shift ["+C+"]"),null!==this.mediaIndex&&(this.mediaIndex-=C),T&&(T.mediaIndex-=C,T.mediaIndex>=0&&(T.segment=i.segments[T.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(_,i)}},s.pause=function pause(){this.checkBufferTimeout_&&(S().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},s.paused=function paused(){return null===this.checkBufferTimeout_},s.resetEverything=function resetEverything(i){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,i),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"})},s.resetLoader=function resetLoader(){this.fetchAtBuffer_=!1,this.resyncLoader()},s.resyncLoader=function resyncLoader(){this.transmuxer_&&Cs(this.transmuxer_),this.mediaIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},s.remove=function remove(i,s,_){if(void 0===_&&(_=function done(){}),s===1/0&&(s=this.duration_()),this.sourceUpdater_&&this.currentMediaInfo_){var T=1,S=function removeFinished(){0===--T&&_()};for(var C in this.audioDisabled_||(T++,this.sourceUpdater_.removeAudio(i,s,S)),"main"===this.loaderType_&&this.currentMediaInfo_&&this.currentMediaInfo_.hasVideo&&(this.gopBuffer_=function removeGopBuffer(i,s,_,T){for(var S=Math.ceil((s-T)*ot.ONE_SECOND_IN_TS),C=Math.ceil((_-T)*ot.ONE_SECOND_IN_TS),P=i.slice(),O=i.length;O--&&!(i[O].pts<=C););if(-1===O)return P;for(var M=O+1;M--&&!(i[M].pts<=S););return M=Math.max(M,0),P.splice(M,O-M+1),P}(this.gopBuffer_,i,s,this.timeMapping_),T++,this.sourceUpdater_.removeVideo(i,s,S)),this.inbandTextTracks_)io(i,s,this.inbandTextTracks_[C]);io(i,s,this.segmentMetadataTrack_),S()}},s.monitorBuffer_=function monitorBuffer_(){this.checkBufferTimeout_&&S().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=S().setTimeout(this.monitorBufferTick_.bind(this),1)},s.monitorBufferTick_=function monitorBufferTick_(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&S().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=S().setTimeout(this.monitorBufferTick_.bind(this),500)},s.fillBuffer_=function fillBuffer_(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var i=this.buffered_(),s=this.checkBuffer_(i,this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);s&&(s.timestampOffset=lo({segmentTimeline:s.timeline,currentTimeline:this.currentTimeline_,startOfSegment:s.startOfSegment,buffered:i,overrideCheck:this.isPendingTimestampOffset_}),this.isPendingTimestampOffset_=!1,"number"==typeof s.timestampOffset&&this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:s.timeline}),this.loadSegment_(s))}},s.isEndOfStream_=function isEndOfStream_(i,s){if(void 0===i&&(i=this.mediaIndex),void 0===s&&(s=this.playlist_),!s||!this.mediaSource_)return!1;var _=i+1===s.segments.length;return s.endList&&"open"===this.mediaSource_.readyState&&_},s.checkBuffer_=function checkBuffer_(i,s,_,T,S,C){var P=0;i.length&&(P=i.end(i.length-1));var O=Math.max(0,P-S);if(!s.segments.length)return null;if(O>=this.goalBufferLength_())return null;if(!T&&O>=1)return null;var M,R=null,D=!1;if(null===C)R=this.getSyncSegmentCandidate_(s),D=!0;else if(null!==_){var j=s.segments[_];M=j&&j.end?j.end:P,R=_+1}else if(this.fetchAtBuffer_){var $=Za.getMediaInfoForTime(s,P,C.segmentIndex,C.time);R=$.mediaIndex,M=$.startTime}else{var U=Za.getMediaInfoForTime(s,S,C.segmentIndex,C.time);R=U.mediaIndex,M=U.startTime}var V=this.generateSegmentInfo_(s,R,M,D);return!V||this.mediaSource_&&this.playlist_&&V.mediaIndex===this.playlist_.segments.length-1&&"ended"===this.mediaSource_.readyState&&!this.seeking_()?void 0:(this.logger_("checkBuffer_ returning "+V.uri,{segmentInfo:V,playlist:s,currentMediaIndex:_,nextMediaIndex:R,startOfSegment:M,isSyncRequest:D}),V)},s.getSyncSegmentCandidate_=function getSyncSegmentCandidate_(i){var s=this;if(-1===this.currentTimeline_)return 0;var _=i.segments.map((function(i,s){return{timeline:i.timeline,segmentIndex:s}})).filter((function(i){return i.timeline===s.currentTimeline_}));return _.length?_[Math.min(_.length-1,1)].segmentIndex:Math.max(i.segments.length-1,0)},s.generateSegmentInfo_=function generateSegmentInfo_(i,s,_,T){if(s<0||s>=i.segments.length)return null;var S,C,P=i.segments[s],O=this.sourceUpdater_.audioBuffered(),M=this.sourceUpdater_.videoBuffered();return O.length&&(S=O.end(O.length-1)-this.sourceUpdater_.audioTimestampOffset()),M.length&&(C=function gopsSafeToAlignWith(i,s,_){if(null==s||!i.length)return[];var T,S=Math.ceil((s-_+3)*ot.ONE_SECOND_IN_TS);for(T=0;T<i.length&&!(i[T].pts>S);T++);return i.slice(T)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),{requestId:"segment-loader-"+Math.random(),uri:P.resolvedUri,mediaIndex:s,isSyncRequest:T,startOfSegment:_,playlist:i,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:P.timeline,duration:P.duration,segment:P,byteLength:0,transmuxer:this.transmuxer_,audioAppendStart:S,gopsToAlignWith:C}},s.earlyAbortWhenNeeded_=function earlyAbortWhenNeeded_(i){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(i.firstBytesReceivedAt||Date.now())<1e3)){var s=this.currentTime_(),_=i.bandwidth,T=this.pendingSegment_.duration,S=Za.estimateSegmentRequestTime(T,_,this.playlist_,i.bytesReceived),C=function timeUntilRebuffer(i,s,_){return void 0===_&&(_=1),((i.length?i.end(i.length-1):0)-s)/_}(this.buffered_(),s,this.vhs_.tech_.playbackRate())-1;if(!(S<=C)){var P=function minRebufferMaxBandwidthSelector(i){var s=i.master,_=i.currentTime,T=i.bandwidth,S=i.duration,C=i.segmentDuration,P=i.timeUntilRebuffer,O=i.currentTimeline,M=i.syncController,R=s.playlists.filter((function(i){return!Za.isIncompatible(i)})),D=R.filter(Za.isEnabled);D.length||(D=R.filter((function(i){return!Za.isDisabled(i)})));var j=D.filter(Za.hasAttribute.bind(null,"BANDWIDTH")).map((function(i){var s=M.getSyncPoint(i,S,O,_)?1:2;return{playlist:i,rebufferingImpact:Za.estimateSegmentRequestTime(C,T,i)*s-P}})),$=j.filter((function(i){return i.rebufferingImpact<=0}));return Js($,(function(i,s){return eo(s.playlist,i.playlist)})),$.length?$[0]:(Js(j,(function(i,s){return i.rebufferingImpact-s.rebufferingImpact})),j[0]||null)}({master:this.vhs_.playlists.master,currentTime:s,bandwidth:_,duration:this.duration_(),segmentDuration:T,timeUntilRebuffer:C,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(P){var O=S-C-P.rebufferingImpact,M=.5;C<=Aa&&(M=1),!P.playlist||P.playlist.uri===this.playlist_.uri||O<M||(this.bandwidth=P.playlist.attributes.BANDWIDTH*vs.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},s.handleAbort_=function handleAbort_(){this.mediaRequestsAborted+=1},s.handleProgress_=function handleProgress_(i,s){this.earlyAbortWhenNeeded_(s.stats),this.checkForAbort_(s.requestId)||this.trigger("progress")},s.handleTrackInfo_=function handleTrackInfo_(i,s){this.earlyAbortWhenNeeded_(i.stats),this.checkForAbort_(i.requestId)||this.checkForIllegalMediaSwitch(s)||(s=s||{},function shallowEqual(i,s){if(!i&&!s||!i&&s||i&&!s)return!1;if(i===s)return!0;var _=Object.keys(i).sort(),T=Object.keys(s).sort();if(_.length!==T.length)return!1;for(var S=0;S<_.length;S++){var C=_[S];if(C!==T[S])return!1;if(i[C]!==s[C])return!1}return!0}(this.currentMediaInfo_,s)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=s,this.currentMediaInfo_=s,this.logger_("trackinfo update",s),this.trigger("trackinfo")),this.checkForAbort_(i.requestId)||(this.pendingSegment_.trackInfo=s,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))},s.handleTimingInfo_=function handleTimingInfo_(i,s,_,T){if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)){var S=this.pendingSegment_,C=oo(s);S[C]=S[C]||{},S[C][_]=T,this.logger_("timinginfo: "+s+" - "+_+" - "+T),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},s.handleCaptions_=function handleCaptions_(i,s){var _=this;if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId))if(0!==s.length)if(this.pendingSegment_.hasAppendedData_){var T=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),C={};s.forEach((function(i){C[i.stream]=C[i.stream]||{startTime:1/0,captions:[],endTime:0};var s=C[i.stream];s.startTime=Math.min(s.startTime,i.startTime+T),s.endTime=Math.max(s.endTime,i.endTime+T),s.captions.push(i)})),Object.keys(C).forEach((function(i){var s=C[i],P=s.startTime,O=s.endTime,M=s.captions,R=_.inbandTextTracks_;_.logger_("adding cues from "+P+" -> "+O+" for "+i),function createCaptionsTrackIfNotExists(i,s,_){if(!i[_]){s.trigger({type:"usage",name:"vhs-608"}),s.trigger({type:"usage",name:"hls-608"});var T=s.textTracks().getTrackById(_);i[_]=T||s.addRemoteTextTrack({kind:"captions",id:_,label:_},!1).track}}(R,_.vhs_.tech_,i),io(P,O,R[i]),function addCaptionData(i){var s=i.inbandTextTracks,_=i.captionArray,T=i.timestampOffset;if(_){var C=S().WebKitDataCue||S().VTTCue;_.forEach((function(i){var _=i.stream;s[_].addCue(new C(i.startTime+T,i.endTime+T,i.text))}))}}({captionArray:M,inbandTextTracks:R,timestampOffset:T})})),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}else this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,i,s));else this.logger_("SegmentLoader received no captions from a caption event")},s.handleId3_=function handleId3_(i,s,_){if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId))if(this.pendingSegment_.hasAppendedData_){var T=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();!function createMetadataTrackIfNotExists(i,s,_){i.metadataTrack_||(i.metadataTrack_=_.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,i.metadataTrack_.inBandMetadataTrackDispatchType=s)}(this.inbandTextTracks_,_,this.vhs_.tech_),ro({inbandTextTracks:this.inbandTextTracks_,metadataArray:s,timestampOffset:T,videoDuration:this.duration_()})}else this.metadataQueue_.id3.push(this.handleId3_.bind(this,i,s,_))},s.processMetadataQueue_=function processMetadataQueue_(){this.metadataQueue_.id3.forEach((function(i){return i()})),this.metadataQueue_.caption.forEach((function(i){return i()})),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},s.processCallQueue_=function processCallQueue_(){var i=this.callQueue_;this.callQueue_=[],i.forEach((function(i){return i()}))},s.processLoadQueue_=function processLoadQueue_(){var i=this.loadQueue_;this.loadQueue_=[],i.forEach((function(i){return i()}))},s.hasEnoughInfoToLoad_=function hasEnoughInfoToLoad_(){if("audio"!==this.loaderType_)return!0;var i=this.pendingSegment_;return!!i&&(!this.currentMediaInfo_||!co({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:i.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},s.hasEnoughInfoToAppend_=function hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready())return!1;var i=this.pendingSegment_;if(!i||!i.trackInfo)return!1;if(!this.handlePartialData_){var s=this.currentMediaInfo_,_=s.hasAudio,T=s.hasVideo,S=s.isMuxed;if(T&&!i.videoTimingInfo)return!1;if(_&&!this.audioDisabled_&&!S&&!i.audioTimingInfo)return!1}return!co({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:i.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_})},s.handleData_=function handleData_(i,s){if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId))if(!this.callQueue_.length&&this.hasEnoughInfoToAppend_()){var _=this.pendingSegment_;if(this.setTimeMapping_(_.timeline),this.updateMediaSecondsLoaded_(_.segment),"closed"!==this.mediaSource_.readyState){if(i.map&&(i.map=this.initSegmentForMap(i.map,!0),_.segment.map=i.map),i.key&&this.segmentKey(i.key,!0),_.isFmp4=i.isFmp4,_.timingInfo=_.timingInfo||{},_.isFmp4)this.trigger("fmp4"),_.timingInfo.start=_[oo(s.type)].start;else{var T,S="main"===this.loaderType_&&this.currentMediaInfo_.hasVideo;S&&(T=this.handlePartialData_?s.videoFramePtsTime:_.videoTimingInfo.start),_.timingInfo.start=this.trueSegmentStart_({currentStart:_.timingInfo.start,playlist:_.playlist,mediaIndex:_.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:S,firstVideoFrameTimeForData:T,videoTimingInfo:_.videoTimingInfo,audioTimingInfo:_.audioTimingInfo})}this.updateAppendInitSegmentStatus(_,s.type),this.updateSourceBufferTimestampOffset_(_),_.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(_,s)}}else this.callQueue_.push(this.handleData_.bind(this,i,s))},s.updateAppendInitSegmentStatus=function updateAppendInitSegmentStatus(i,s){"main"!==this.loaderType_||"number"!=typeof i.timestampOffset||i.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[s]!==i.playlist&&(this.appendInitSegment_[s]=!0)},s.getInitSegmentAndUpdateState_=function getInitSegmentAndUpdateState_(i){var s=i.type,_=i.initSegment,T=i.map,S=i.playlist;if(T){var C=is(T);if(this.activeInitSegmentId_===C)return null;_=this.initSegmentForMap(T,!0).bytes,this.activeInitSegmentId_=C}return _&&this.appendInitSegment_[s]?(this.playlistOfLastInitSegment_[s]=S,this.appendInitSegment_[s]=!!T,this.activeInitSegmentId_=null,_):null},s.appendToSourceBuffer_=function appendToSourceBuffer_(i){var s=this,_=i.segmentInfo,T=i.type,S=i.initSegment,C=i.data,P=[C],O=C.byteLength;S&&(P.unshift(S),O+=S.byteLength);var M=function concatSegments(i){var s,_=0;return i.bytes&&(s=new Uint8Array(i.bytes),i.segments.forEach((function(i){s.set(i,_),_+=i.byteLength}))),s}({bytes:O,segments:P});this.sourceUpdater_.appendBuffer({segmentInfo:_,type:T,bytes:M},(function(i){i&&(s.error(T+" append of "+M.length+"b failed for segment #"+_.mediaIndex+" in playlist "+_.playlist.id),s.trigger("appenderror"))}))},s.handleSegmentTimingInfo_=function handleSegmentTimingInfo_(i,s,_){if(this.pendingSegment_&&s===this.pendingSegment_.requestId){var T=this.pendingSegment_.segment,S=i+"TimingInfo";T[S]||(T[S]={}),T[S].transmuxerPrependedSeconds=_.prependedContentDuration||0,T[S].transmuxedPresentationStart=_.start.presentation,T[S].transmuxedDecodeStart=_.start.decode,T[S].transmuxedPresentationEnd=_.end.presentation,T[S].transmuxedDecodeEnd=_.end.decode,T[S].baseMediaDecodeTime=_.baseMediaDecodeTime}},s.appendData_=function appendData_(i,s){var _=s.type,T=s.data;if(T&&T.byteLength&&("audio"!==_||!this.audioDisabled_)){var S=this.getInitSegmentAndUpdateState_({type:_,initSegment:s.initSegment,playlist:i.playlist,map:i.isFmp4?i.segment.map:null});this.appendToSourceBuffer_({segmentInfo:i,type:_,initSegment:S,data:T})}},s.loadSegment_=function loadSegment_(i){var s=this;this.state="WAITING",this.pendingSegment_=i,this.trimBackBuffer_(i),"number"==typeof i.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(i):this.loadQueue_.push((function(){var _=s.buffered_();"number"==typeof i.timestampOffset&&(i.timestampOffset=lo({segmentTimeline:i.timeline,currentTimeline:s.currentTimeline_,startOfSegment:i.startOfSegment,buffered:_,overrideCheck:!0})),delete i.audioAppendStart;var T=s.sourceUpdater_.audioBuffered();T.length&&(i.audioAppendStart=T.end(T.length-1)-s.sourceUpdater_.audioTimestampOffset()),s.updateTransmuxerAndRequestSegment_(i)}))},s.updateTransmuxerAndRequestSegment_=function updateTransmuxerAndRequestSegment_(i){this.shouldUpdateTransmuxerTimestampOffset_(i.timestampOffset)&&(this.gopBuffer_.length=0,i.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:i.timestampOffset}));var s=this.createSimplifiedSegmentObj_(i);i.abortRequests=Ds({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:s,handlePartialData:this.handlePartialData_,abortFn:this.handleAbort_.bind(this),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",i.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",i.requestId),captionsFn:this.handleCaptions_.bind(this),id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this)})},s.trimBackBuffer_=function trimBackBuffer_(i){var s=function safeBackBufferTrimTime(i,s,_){var T=s-vs.BACK_BUFFER_LENGTH;i.length&&(T=Math.max(T,i.start(0)));var S=s-_;return Math.min(S,T)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);s>0&&this.remove(0,s)},s.createSimplifiedSegmentObj_=function createSimplifiedSegmentObj_(i){var s=i.segment,_={resolvedUri:s.resolvedUri,byterange:s.byterange,requestId:i.requestId,transmuxer:i.transmuxer,audioAppendStart:i.audioAppendStart,gopsToAlignWith:i.gopsToAlignWith},T=i.playlist.segments[i.mediaIndex-1];if(T&&T.timeline===s.timeline&&(T.videoTimingInfo?_.baseStartTime=T.videoTimingInfo.transmuxedDecodeEnd:T.audioTimingInfo&&(_.baseStartTime=T.audioTimingInfo.transmuxedDecodeEnd)),s.key){var S=s.key.iv||new Uint32Array([0,0,0,i.mediaIndex+i.playlist.mediaSequence]);_.key=this.segmentKey(s.key),_.key.iv=S}return s.map&&(_.map=this.initSegmentForMap(s.map)),_},s.saveTransferStats_=function saveTransferStats_(i){this.mediaRequests+=1,i&&(this.mediaBytesTransferred+=i.bytesReceived,this.mediaTransferDuration+=i.roundTripTime)},s.saveBandwidthRelatedStats_=function saveBandwidthRelatedStats_(i,s){this.pendingSegment_.byteLength=s.bytesReceived,i<so?this.logger_("Ignoring segment's bandwidth because its duration of "+i+" is less than the min to record 0.016666666666666666"):(this.bandwidth=s.bandwidth,this.roundTrip=s.roundTripTime)},s.handleTimeout_=function handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")},s.segmentRequestFinished_=function segmentRequestFinished_(i,s,_){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,i,s,_));else if(this.saveTransferStats_(s.stats),this.pendingSegment_&&s.requestId===this.pendingSegment_.requestId){if(i){if(this.pendingSegment_=null,this.state="READY",i.code===Os)return;return this.pause(),i.code===As?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(i),void this.trigger("error"))}var T=this.pendingSegment_;this.saveBandwidthRelatedStats_(T.duration,s.stats),T.endOfAllRequests=s.endOfAllRequests,_.gopInfo&&(this.gopBuffer_=function updateGopBuffer(i,s,_){if(!s.length)return i;if(_)return s.slice();for(var T=s[0].pts,S=0;S<i.length&&!(i[S].pts>=T);S++);return i.slice(0,S).concat(s)}(this.gopBuffer_,_.gopInfo,this.safeAppend_)),this.state="APPENDING";var S=this.isEndOfStream_(T.mediaIndex,T.playlist),C=null!==this.mediaIndex,P=T.timeline!==this.currentTimeline_&&T.timeline>0;!T.isFmp4&&(S||C&&P)&&Es(this.transmuxer_),this.trigger("appending"),this.waitForAppendsToComplete_(T)}},s.setTimeMapping_=function setTimeMapping_(i){var s=this.syncController_.mappingForTimeline(i);null!==s&&(this.timeMapping_=s)},s.updateMediaSecondsLoaded_=function updateMediaSecondsLoaded_(i){"number"==typeof i.start&&"number"==typeof i.end?this.mediaSecondsLoaded+=i.end-i.start:this.mediaSecondsLoaded+=i.duration},s.shouldUpdateTransmuxerTimestampOffset_=function shouldUpdateTransmuxerTimestampOffset_(i){return null!==i&&("main"===this.loaderType_&&i!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&i!==this.sourceUpdater_.audioTimestampOffset())},s.trueSegmentStart_=function trueSegmentStart_(i){var s=i.currentStart,_=i.playlist,T=i.mediaIndex,S=i.firstVideoFrameTimeForData,C=i.currentVideoTimestampOffset,P=i.useVideoTimingInfo,O=i.videoTimingInfo,M=i.audioTimingInfo;if(void 0!==s)return s;if(!P)return M.start;var R=_.segments[T-1];return 0!==T&&R&&void 0!==R.start&&R.end===S+C?O.start:S},s.waitForAppendsToComplete_=function waitForAppendsToComplete_(i){if(!this.currentMediaInfo_)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var s=this.currentMediaInfo_,_=s.hasAudio,T=s.hasVideo,S=s.isMuxed,C="main"===this.loaderType_&&T,P=!this.audioDisabled_&&_&&!S;if(i.waitingOnAppends=0,!i.hasAppendedData_)return i.timingInfo||"number"!=typeof i.timestampOffset||(this.isPendingTimestampOffset_=!0),i.timingInfo={start:0},i.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(i),this.processMetadataQueue_()),void this.checkAppendsDone_(i);C&&i.waitingOnAppends++,P&&i.waitingOnAppends++,C&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,i)),P&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,i))},s.checkAppendsDone_=function checkAppendsDone_(i){this.checkForAbort_(i.requestId)||(i.waitingOnAppends--,0===i.waitingOnAppends&&this.handleAppendsDone_())},s.checkForIllegalMediaSwitch=function checkForIllegalMediaSwitch(i){var s=function illegalMediaSwitch(i,s,_){return"main"===i&&s&&_?_.hasAudio||_.hasVideo?s.hasVideo&&!_.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!s.hasVideo&&_.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null}(this.loaderType_,this.currentMediaInfo_,i);return!!s&&(this.error({message:s,blacklistDuration:1/0}),this.trigger("error"),!0)},s.updateSourceBufferTimestampOffset_=function updateSourceBufferTimestampOffset_(i){if(null!==i.timestampOffset&&"number"==typeof i.timingInfo.start&&!i.changedTimestampOffset&&"main"===this.loaderType_){var s=!1;i.timestampOffset-=i.timingInfo.start,i.changedTimestampOffset=!0,i.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(i.timestampOffset),s=!0),i.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(i.timestampOffset),s=!0),s&&this.trigger("timestampoffset")}},s.updateTimingInfoEnd_=function updateTimingInfoEnd_(i){i.timingInfo=i.timingInfo||{};var s="main"===this.loaderType_&&this.currentMediaInfo_.hasVideo&&i.videoTimingInfo?i.videoTimingInfo:i.audioTimingInfo;s&&(i.timingInfo.end="number"==typeof s.end?s.end:s.start+i.duration)},s.handleAppendsDone_=function handleAppendsDone_(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var i=this.pendingSegment_;this.updateTimingInfoEnd_(i),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:i,shouldSaveTimelineMapping:"main"===this.loaderType_}),this.logger_(function segmentInfoString(i){var s=i.segment,_=s.start,T=s.end,S=i.playlist,C=S.mediaSequence,P=S.id,O=S.segments,M=void 0===O?[]:O,R=i.mediaIndex,D=i.timeline;return["appending ["+R+"] of ["+C+", "+(C+M.length)+"] from playlist ["+P+"]","["+_+" => "+T+"] in timeline ["+D+"]"].join(" ")}(i));var s=ho(i,this.sourceType_);if(s&&("warn"===s.severity?videojs$1.log.warn(s.message):this.logger_(s.message)),this.recordThroughput_(i),this.pendingSegment_=null,this.state="READY",i.isSyncRequest)this.trigger("syncinfoupdate");else{this.addSegmentMetadataCue_(i),this.fetchAtBuffer_=!0,this.currentTimeline_!==i.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:i.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:i.timeline})),this.currentTimeline_=i.timeline,this.trigger("syncinfoupdate");var _=i.segment;if(_.end&&this.currentTime_()-_.end>3*i.playlist.targetDuration)this.resetEverything();else null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=i.mediaIndex,this.isEndOfStream_(i.mediaIndex,i.playlist)&&this.endOfStream(),this.trigger("appended"),this.paused()||this.monitorBuffer_()}},s.recordThroughput_=function recordThroughput_(i){if(i.duration<so)this.logger_("Ignoring segment's throughput because its duration of "+i.duration+" is less than the min to record 0.016666666666666666");else{var s=this.throughput.rate,_=Date.now()-i.endOfAllRequests+1,T=Math.floor(i.byteLength/_*8*1e3);this.throughput.rate+=(T-s)/++this.throughput.count}},s.addSegmentMetadataCue_=function addSegmentMetadataCue_(i){if(this.segmentMetadataTrack_){var s=i.segment,_=s.start,T=s.end;if(ao(_)&&ao(T)){io(_,T,this.segmentMetadataTrack_);var C=S().WebKitDataCue||S().VTTCue,P={custom:s.custom,dateTimeObject:s.dateTimeObject,dateTimeString:s.dateTimeString,bandwidth:i.playlist.attributes.BANDWIDTH,resolution:i.playlist.attributes.RESOLUTION,codecs:i.playlist.attributes.CODECS,byteLength:i.byteLength,uri:i.uri,timeline:i.timeline,playlist:i.playlist.id,start:_,end:T},O=new C(_,T,JSON.stringify(P));O.value=P,this.segmentMetadataTrack_.addCue(O)}}},SegmentLoader}(videojs$1.EventTarget);function noop(){}var mo,fo=function toTitleCase(i){return"string"!=typeof i?i:i.replace(/./,(function(i){return i.toUpperCase()}))},vo=["video","audio"],bo=function updating(i,s){var _=s[i+"Buffer"];return _&&_.updating||s.queuePending[i]},yo=function shiftQueue(i,s){if(0!==s.queue.length){var _=0,T=s.queue[_];if("mediaSource"!==T.type){if("mediaSource"!==i&&s.ready()&&"closed"!==s.mediaSource.readyState&&!bo(i,s)){if(T.type!==i){if(_=function nextQueueIndexOfType(i,s){for(var _=0;_<s.length;_++){var T=s[_];if("mediaSource"===T.type)return null;if(T.type===i)return _}return null}(i,s.queue),null===_)return;T=s.queue[_]}s.queue.splice(_,1),T.action(i,s),T.doneFn?s.queuePending[i]=T:shiftQueue(i,s)}}else s.updating()||"closed"===s.mediaSource.readyState||(s.queue.shift(),T.action(s),T.doneFn&&T.doneFn(),shiftQueue("audio",s),shiftQueue("video",s))}},_o=function cleanupBuffer(i,s){var _=s[i+"Buffer"],T=fo(i);_&&(_.removeEventListener("updateend",s["on"+T+"UpdateEnd_"]),_.removeEventListener("error",s["on"+T+"Error_"]),s.codecs[i]=null,s[i+"Buffer"]=null)},wo=function inSourceBuffers(i,s){return i&&s&&-1!==Array.prototype.indexOf.call(i.sourceBuffers,s)},ko=function appendBuffer(i,s){return function(_,T){var S=T[_+"Buffer"];wo(T.mediaSource,S)&&(T.logger_("Appending segment "+s.mediaIndex+"'s "+i.length+" bytes to "+_+"Buffer"),S.appendBuffer(i))}},To=function remove(i,s){return function(_,T){var S=T[_+"Buffer"];wo(T.mediaSource,S)&&(T.logger_("Removing "+i+" to "+s+" from "+_+"Buffer"),S.remove(i,s))}},So=function timestampOffset(i){return function(s,_){var T=_[s+"Buffer"];wo(_.mediaSource,T)&&(_.logger_("Setting "+s+"timestampOffset to "+i),T.timestampOffset=i)}},Co=function callback(i){return function(s,_){i()}},xo=function endOfStream(i){return function(s){if("open"===s.mediaSource.readyState){s.logger_("Calling mediaSource endOfStream("+(i||"")+")");try{s.mediaSource.endOfStream(i)}catch(vl){videojs$1.log.warn("Failed to call media source endOfStream",vl)}}}},Eo=function duration(i){return function(s){s.logger_("Setting mediaSource duration to "+i);try{s.mediaSource.duration=i}catch(vl){videojs$1.log.warn("Failed to set media source duration",vl)}}},Po=function abort(){return function(i,s){if("open"===s.mediaSource.readyState){var _=s[i+"Buffer"];if(wo(s.mediaSource,_)){s.logger_("calling abort on "+i+"Buffer");try{_.abort()}catch(vl){videojs$1.log.warn("Failed to abort on "+i+"Buffer",vl)}}}}},Ao=function addSourceBuffer(i,s){return function(_){var T=fo(i),S=(0,ut._5)(s);_.logger_("Adding "+i+"Buffer with codec "+s+" to mediaSource");var C=_.mediaSource.addSourceBuffer(S);C.addEventListener("updateend",_["on"+T+"UpdateEnd_"]),C.addEventListener("error",_["on"+T+"Error_"]),_.codecs[i]=s,_[i+"Buffer"]=C}},Oo=function removeSourceBuffer(i){return function(s){var _=s[i+"Buffer"];if(_o(i,s),wo(s.mediaSource,_)){s.logger_("Removing "+i+"Buffer with codec "+s.codecs[i]+" from mediaSource");try{s.mediaSource.removeSourceBuffer(_)}catch(vl){videojs$1.log.warn("Failed to removeSourceBuffer "+i+"Buffer",vl)}}}},Mo=function changeType(i){return function(s,_){var T=_[s+"Buffer"],S=(0,ut._5)(i);wo(_.mediaSource,T)&&_.codecs[s]!==i&&(_.logger_("changing "+s+"Buffer codec from "+_.codecs[s]+" to "+i),T.changeType(S),_.codecs[s]=i)}},zo=function pushQueue(i){var s=i.type,_=i.sourceUpdater,T=i.action,S=i.doneFn,C=i.name;_.queue.push({type:s,action:T,doneFn:S,name:C}),yo(s,_)},Io=function onUpdateend(i,s){return function(_){if(s.queuePending[i]){var T=s.queuePending[i].doneFn;s.queuePending[i]=null,T&&T(s[i+"Error_"])}yo(i,s)}},Lo=function(i){function SourceUpdater(s){var _;return(_=i.call(this)||this).mediaSource=s,_.sourceopenListener_=function(){return yo("mediaSource",(0,O.Z)(_))},_.mediaSource.addEventListener("sourceopen",_.sourceopenListener_),_.logger_=Ks("SourceUpdater"),_.audioTimestampOffset_=0,_.videoTimestampOffset_=0,_.queue=[],_.queuePending={audio:null,video:null},_.delayedAudioAppendQueue_=[],_.videoAppendQueued_=!1,_.codecs={},_.onVideoUpdateEnd_=Io("video",(0,O.Z)(_)),_.onAudioUpdateEnd_=Io("audio",(0,O.Z)(_)),_.onVideoError_=function(i){_.videoError_=i},_.onAudioError_=function(i){_.audioError_=i},_.createdSourceBuffers_=!1,_.initializedEme_=!1,_.triggeredReady_=!1,_}_inheritsLoose(SourceUpdater,i);var s=SourceUpdater.prototype;return s.initializedEme=function initializedEme(){this.initializedEme_=!0,this.triggerReady()},s.hasCreatedSourceBuffers=function hasCreatedSourceBuffers(){return this.createdSourceBuffers_},s.hasInitializedAnyEme=function hasInitializedAnyEme(){return this.initializedEme_},s.ready=function ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},s.createSourceBuffers=function createSourceBuffers(i){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(i),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},s.triggerReady=function triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},s.addSourceBuffer=function addSourceBuffer(i,s){zo({type:"mediaSource",sourceUpdater:this,action:Ao(i,s),name:"addSourceBuffer"})},s.abort=function abort(i){zo({type:i,sourceUpdater:this,action:Po(i),name:"abort"})},s.removeSourceBuffer=function removeSourceBuffer(i){this.canRemoveSourceBuffer()?zo({type:"mediaSource",sourceUpdater:this,action:Oo(i),name:"removeSourceBuffer"}):videojs$1.log.error("removeSourceBuffer is not supported!")},s.canRemoveSourceBuffer=function canRemoveSourceBuffer(){return!videojs$1.browser.IE_VERSION&&!videojs$1.browser.IS_FIREFOX&&S().MediaSource&&S().MediaSource.prototype&&"function"==typeof S().MediaSource.prototype.removeSourceBuffer},SourceUpdater.canChangeType=function canChangeType(){return S().SourceBuffer&&S().SourceBuffer.prototype&&"function"==typeof S().SourceBuffer.prototype.changeType},s.canChangeType=function canChangeType(){return this.constructor.canChangeType()},s.changeType=function changeType(i,s){this.canChangeType()?zo({type:i,sourceUpdater:this,action:Mo(s),name:"changeType"}):videojs$1.log.error("changeType is not supported!")},s.addOrChangeSourceBuffers=function addOrChangeSourceBuffers(i){var s=this;if(!i||"object"!=typeof i||0===Object.keys(i).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(i).forEach((function(_){var T=i[_];if(!s.hasCreatedSourceBuffers())return s.addSourceBuffer(_,T);s.canChangeType()&&s.changeType(_,T)}))},s.appendBuffer=function appendBuffer(i,s){var _=this,T=i.segmentInfo,S=i.type,C=i.bytes;if(this.processedAppend_=!0,"audio"===S&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([i,s]),void this.logger_("delayed audio append of "+C.length+" until video append");if(zo({type:S,sourceUpdater:this,action:ko(C,T||{mediaIndex:-1}),doneFn:s,name:"appendBuffer"}),"video"===S){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var P=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+P.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,P.forEach((function(i){_.appendBuffer.apply(_,i)}))}},s.audioBuffered=function audioBuffered(){return wo(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:videojs$1.createTimeRange()},s.videoBuffered=function videoBuffered(){return wo(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:videojs$1.createTimeRange()},s.buffered=function buffered(){var i=wo(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,s=wo(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return s&&!i?this.audioBuffered():i&&!s?this.videoBuffered():function bufferIntersection(i,s){var _=null,T=null,S=0,C=[],P=[];if(!(i&&i.length&&s&&s.length))return videojs$1.createTimeRange();for(var O=i.length;O--;)C.push({time:i.start(O),type:"start"}),C.push({time:i.end(O),type:"end"});for(O=s.length;O--;)C.push({time:s.start(O),type:"start"}),C.push({time:s.end(O),type:"end"});for(C.sort((function(i,s){return i.time-s.time})),O=0;O<C.length;O++)"start"===C[O].type?2==++S&&(_=C[O].time):"end"===C[O].type&&1==--S&&(T=C[O].time),null!==_&&null!==T&&(P.push([_,T]),_=null,T=null);return videojs$1.createTimeRanges(P)}(this.audioBuffered(),this.videoBuffered())},s.setDuration=function setDuration(i,s){void 0===s&&(s=noop),zo({type:"mediaSource",sourceUpdater:this,action:Eo(i),name:"duration",doneFn:s})},s.endOfStream=function endOfStream(i,s){void 0===i&&(i=null),void 0===s&&(s=noop),"string"!=typeof i&&(i=void 0),zo({type:"mediaSource",sourceUpdater:this,action:xo(i),name:"endOfStream",doneFn:s})},s.removeAudio=function removeAudio(i,s,_){void 0===_&&(_=noop),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?zo({type:"audio",sourceUpdater:this,action:To(i,s),doneFn:_,name:"remove"}):_()},s.removeVideo=function removeVideo(i,s,_){void 0===_&&(_=noop),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?zo({type:"video",sourceUpdater:this,action:To(i,s),doneFn:_,name:"remove"}):_()},s.updating=function updating(){return!(!bo("audio",this)&&!bo("video",this))},s.audioTimestampOffset=function audioTimestampOffset(i){return void 0!==i&&this.audioBuffer&&this.audioTimestampOffset_!==i&&(zo({type:"audio",sourceUpdater:this,action:So(i),name:"timestampOffset"}),this.audioTimestampOffset_=i),this.audioTimestampOffset_},s.videoTimestampOffset=function videoTimestampOffset(i){return void 0!==i&&this.videoBuffer&&this.videoTimestampOffset!==i&&(zo({type:"video",sourceUpdater:this,action:So(i),name:"timestampOffset"}),this.videoTimestampOffset_=i),this.videoTimestampOffset_},s.audioQueueCallback=function audioQueueCallback(i){this.audioBuffer&&zo({type:"audio",sourceUpdater:this,action:Co(i),name:"callback"})},s.videoQueueCallback=function videoQueueCallback(i){this.videoBuffer&&zo({type:"video",sourceUpdater:this,action:Co(i),name:"callback"})},s.dispose=function dispose(){var i=this;this.trigger("dispose"),vo.forEach((function(s){i.abort(s),i.canRemoveSourceBuffer()?i.removeSourceBuffer(s):i[s+"QueueCallback"]((function(){return _o(s,i)}))})),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},SourceUpdater}(videojs$1.EventTarget),Ro=function uint8ToUtf8(i){return decodeURIComponent(escape(String.fromCharCode.apply(null,i)))},No=new Uint8Array("\n\n".split("").map((function(i){return i.charCodeAt(0)}))),Do=function(i){function VTTSegmentLoader(s,_){var T;return void 0===_&&(_={}),(T=i.call(this,s,_)||this).handlePartialData_=!1,T.mediaSource_=null,T.subtitlesTrack_=null,T.loaderType_="subtitle",T.featuresNativeTextTracks_=s.featuresNativeTextTracks,T.shouldSaveSegmentTimingInfo_=!1,T}_inheritsLoose(VTTSegmentLoader,i);var s=VTTSegmentLoader.prototype;return s.createTransmuxer_=function createTransmuxer_(){return null},s.buffered_=function buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return videojs$1.createTimeRanges();var i=this.subtitlesTrack_.cues,s=i[0].startTime,_=i[i.length-1].startTime;return videojs$1.createTimeRanges([[s,_]])},s.initSegmentForMap=function initSegmentForMap(i,s){if(void 0===s&&(s=!1),!i)return null;var _=is(i),T=this.initSegments_[_];if(s&&!T&&i.bytes){var S=No.byteLength+i.bytes.byteLength,C=new Uint8Array(S);C.set(i.bytes),C.set(No,i.bytes.byteLength),this.initSegments_[_]=T={resolvedUri:i.resolvedUri,byterange:i.byterange,bytes:C}}return T||i},s.couldBeginLoading_=function couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},s.init_=function init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},s.track=function track(i){return void 0===i||(this.subtitlesTrack_=i,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},s.remove=function remove(i,s){io(i,s,this.subtitlesTrack_)},s.fillBuffer_=function fillBuffer_(){var i=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var s=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(s=this.skipEmptySegments_(s)){if(null===this.syncController_.timestampOffsetForTimeline(s.timeline)){return this.syncController_.one("timestampoffset",(function checkTimestampOffset(){i.state="READY",i.paused()||i.monitorBuffer_()})),void(this.state="WAITING_ON_TIMELINE")}this.loadSegment_(s)}},s.skipEmptySegments_=function skipEmptySegments_(i){for(;i&&i.segment.empty;)i=this.generateSegmentInfo_(i.playlist,i.mediaIndex+1,i.startOfSegment+i.duration,i.isSyncRequest);return i},s.stopForError=function stopForError(i){this.error(i),this.state="READY",this.pause(),this.trigger("error")},s.segmentRequestFinished_=function segmentRequestFinished_(i,s,_){var T=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(s.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(i)return i.code===As&&this.handleTimeout_(),i.code===Os?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(i);var C=this.pendingSegment_;this.saveBandwidthRelatedStats_(C.duration,s.stats),this.state="APPENDING",this.trigger("appending");var P=C.segment;if(P.map&&(P.map.bytes=s.map.bytes),C.bytes=s.bytes,"function"!=typeof S().WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var O,M=function errorHandler(){T.subtitlesTrack_.tech_.off("vttjsloaded",O),T.stopForError({message:"Error loading vtt.js"})};return O=function loadHandler(){T.subtitlesTrack_.tech_.off("vttjserror",M),T.segmentRequestFinished_(i,s,_)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",O),void this.subtitlesTrack_.tech_.one("vttjserror",M)}P.requested=!0;try{this.parseVTTCues_(C)}catch(vl){return void this.stopForError({message:vl.message})}if(this.updateTimeMapping_(C,this.syncController_.timelines[C.timeline],this.playlist_),C.cues.length?C.timingInfo={start:C.cues[0].startTime,end:C.cues[C.cues.length-1].endTime}:C.timingInfo={start:C.startOfSegment,end:C.startOfSegment+C.duration},C.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");C.byteLength=C.bytes.byteLength,this.mediaSecondsLoaded+=P.duration,C.cues.forEach((function(i){T.subtitlesTrack_.addCue(T.featuresNativeTextTracks_?new(S().VTTCue)(i.startTime,i.endTime,i.text):i)})),function removeDuplicateCuesFromTrack(i){var s=i.cues;if(s)for(var _=0;_<s.length;_++){for(var T=[],S=0,C=0;C<s.length;C++)s[_].startTime===s[C].startTime&&s[_].endTime===s[C].endTime&&s[_].text===s[C].text&&++S>1&&T.push(s[C]);T.length&&T.forEach((function(s){return i.removeCue(s)}))}}(this.subtitlesTrack_),this.handleAppendsDone_()}else this.state="READY"},s.handleData_=function handleData_(){},s.updateTimingInfoEnd_=function updateTimingInfoEnd_(){},s.parseVTTCues_=function parseVTTCues_(i){var s,_=!1;"function"==typeof S().TextDecoder?s=new(S().TextDecoder)("utf8"):(s=S().WebVTT.StringDecoder(),_=!0);var T=new(S().WebVTT.Parser)(S(),S().vttjs,s);if(i.cues=[],i.timestampmap={MPEGTS:0,LOCAL:0},T.oncue=i.cues.push.bind(i.cues),T.ontimestampmap=function(s){i.timestampmap=s},T.onparsingerror=function(i){videojs$1.log.warn("Error encountered when parsing cues: "+i.message)},i.segment.map){var C=i.segment.map.bytes;_&&(C=Ro(C)),T.parse(C)}var P=i.bytes;_&&(P=Ro(P)),T.parse(P),T.flush()},s.updateTimeMapping_=function updateTimeMapping_(i,s,_){var T=i.segment;if(s)if(i.cues.length){var S=i.timestampmap,C=S.MPEGTS/ot.ONE_SECOND_IN_TS-S.LOCAL+s.mapping;if(i.cues.forEach((function(i){i.startTime+=C,i.endTime+=C})),!_.syncInfo){var P=i.cues[0].startTime,O=i.cues[i.cues.length-1].startTime;_.syncInfo={mediaSequence:_.mediaSequence+i.mediaIndex,time:Math.min(P,O-T.duration)}}}else T.empty=!0},VTTSegmentLoader}(po),jo=function findAdCue(i,s){for(var _=i.cues,T=0;T<_.length;T++){var S=_[T];if(s>=S.adStartTime&&s<=S.adEndTime)return S}return null},Bo=[{name:"VOD",run:function run(i,s,_,T,S){if(_!==1/0){return{time:0,segmentIndex:0}}return null}},{name:"ProgramDateTime",run:function run(i,s,_,T,S){if(!i.datetimeToDisplayTime)return null;var C=s.segments||[],P=null,O=null;S=S||0;for(var M=0;M<C.length;M++){var R=C[M];if(R.dateTimeObject){var D=R.dateTimeObject.getTime()/1e3+i.datetimeToDisplayTime,j=Math.abs(S-D);if(null!==O&&(0===j||O<j))break;O=j,P={time:D,segmentIndex:M}}}return P}},{name:"Segment",run:function run(i,s,_,T,S){var C=s.segments||[],P=null,O=null;S=S||0;for(var M=0;M<C.length;M++){var R=C[M];if(R.timeline===T&&void 0!==R.start){var D=Math.abs(S-R.start);if(null!==O&&O<D)break;(!P||null===O||O>=D)&&(O=D,P={time:R.start,segmentIndex:M})}}return P}},{name:"Discontinuity",run:function run(i,s,_,T,S){var C=null;if(S=S||0,s.discontinuityStarts&&s.discontinuityStarts.length)for(var P=null,O=0;O<s.discontinuityStarts.length;O++){var M=s.discontinuityStarts[O],R=s.discontinuitySequence+O+1,D=i.discontinuities[R];if(D){var j=Math.abs(S-D.time);if(null!==P&&P<j)break;(!C||null===P||P>=j)&&(P=j,C={time:D.time,segmentIndex:M})}}return C}},{name:"Playlist",run:function run(i,s,_,T,S){return s.syncInfo?{time:s.syncInfo.time,segmentIndex:s.syncInfo.mediaSequence-s.mediaSequence}:null}}],$o=function(i){function SyncController(s){var _;return(_=i.call(this)||this).timelines=[],_.discontinuities=[],_.datetimeToDisplayTime=null,_.logger_=Ks("SyncController"),_}_inheritsLoose(SyncController,i);var s=SyncController.prototype;return s.getSyncPoint=function getSyncPoint(i,s,_,T){var S=this.runStrategies_(i,s,_,T);return S.length?this.selectSyncPoint_(S,{key:"time",value:T}):null},s.getExpiredTime=function getExpiredTime(i,s){if(!i||!i.segments)return null;var _=this.runStrategies_(i,s,i.discontinuitySequence,0);if(!_.length)return null;var T=this.selectSyncPoint_(_,{key:"segmentIndex",value:0});return T.segmentIndex>0&&(T.time*=-1),Math.abs(T.time+Ba(i,T.segmentIndex,0))},s.runStrategies_=function runStrategies_(i,s,_,T){for(var S=[],C=0;C<Bo.length;C++){var P=Bo[C],O=P.run(this,i,s,_,T);O&&(O.strategy=P.name,S.push({strategy:P.name,syncPoint:O}))}return S},s.selectSyncPoint_=function selectSyncPoint_(i,s){for(var _=i[0].syncPoint,T=Math.abs(i[0].syncPoint[s.key]-s.value),S=i[0].strategy,C=1;C<i.length;C++){var P=Math.abs(i[C].syncPoint[s.key]-s.value);P<T&&(T=P,_=i[C].syncPoint,S=i[C].strategy)}return this.logger_("syncPoint for ["+s.key+": "+s.value+"] chosen with strategy ["+S+"]: [time:"+_.time+", segmentIndex:"+_.segmentIndex+"]"),_},s.saveExpiredSegmentInfo=function saveExpiredSegmentInfo(i,s){for(var _=s.mediaSequence-i.mediaSequence-1;_>=0;_--){var T=i.segments[_];if(T&&void 0!==T.start){s.syncInfo={mediaSequence:i.mediaSequence+_,time:T.start},this.logger_("playlist refresh sync: [time:"+s.syncInfo.time+", mediaSequence: "+s.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},s.setDateTimeMapping=function setDateTimeMapping(i){if(!this.datetimeToDisplayTime&&i.segments&&i.segments.length&&i.segments[0].dateTimeObject){var s=i.segments[0].dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-s}},s.saveSegmentTimingInfo=function saveSegmentTimingInfo(i){var s=i.segmentInfo,_=i.shouldSaveTimelineMapping;this.calculateSegmentTimeMapping_(s,s.timingInfo,_)&&(this.saveDiscontinuitySyncInfo_(s),s.playlist.syncInfo||(s.playlist.syncInfo={mediaSequence:s.playlist.mediaSequence+s.mediaIndex,time:s.segment.start}))},s.timestampOffsetForTimeline=function timestampOffsetForTimeline(i){return void 0===this.timelines[i]?null:this.timelines[i].time},s.mappingForTimeline=function mappingForTimeline(i){return void 0===this.timelines[i]?null:this.timelines[i].mapping},s.calculateSegmentTimeMapping_=function calculateSegmentTimeMapping_(i,s,_){var T=i.segment,S=this.timelines[i.timeline];if(null!==i.timestampOffset)S={time:i.startOfSegment,mapping:i.startOfSegment-s.start},_&&(this.timelines[i.timeline]=S,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+i.timeline+": [time: "+S.time+"] [mapping: "+S.mapping+"]")),T.start=i.startOfSegment,T.end=s.end+S.mapping;else{if(!S)return!1;T.start=s.start+S.mapping,T.end=s.end+S.mapping}return!0},s.saveDiscontinuitySyncInfo_=function saveDiscontinuitySyncInfo_(i){var s=i.playlist,_=i.segment;if(_.discontinuity)this.discontinuities[_.timeline]={time:_.start,accuracy:0};else if(s.discontinuityStarts&&s.discontinuityStarts.length)for(var T=0;T<s.discontinuityStarts.length;T++){var S=s.discontinuityStarts[T],C=s.discontinuitySequence+T+1,P=S-i.mediaIndex,O=Math.abs(P);if(!this.discontinuities[C]||this.discontinuities[C].accuracy>O){var M=void 0;M=P<0?_.start-Ba(s,i.mediaIndex,S):_.end+Ba(s,i.mediaIndex+1,S),this.discontinuities[C]={time:M,accuracy:O}}}},s.dispose=function dispose(){this.trigger("dispose"),this.off()},SyncController}(videojs$1.EventTarget),Uo=function(i){function TimelineChangeController(){var s;return(s=i.call(this)||this).pendingTimelineChanges_={},s.lastTimelineChanges_={},s}_inheritsLoose(TimelineChangeController,i);var s=TimelineChangeController.prototype;return s.clearPendingTimelineChange=function clearPendingTimelineChange(i){this.pendingTimelineChanges_[i]=null,this.trigger("pendingtimelinechange")},s.pendingTimelineChange=function pendingTimelineChange(i){var s=i.type,_=i.from,T=i.to;return"number"==typeof _&&"number"==typeof T&&(this.pendingTimelineChanges_[s]={type:s,from:_,to:T},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[s]},s.lastTimelineChange=function lastTimelineChange(i){var s=i.type,_=i.from,T=i.to;return"number"==typeof _&&"number"==typeof T&&(this.lastTimelineChanges_[s]={type:s,from:_,to:T},delete this.pendingTimelineChanges_[s],this.trigger("timelinechange")),this.lastTimelineChanges_[s]},s.dispose=function dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},TimelineChangeController}(videojs$1.EventTarget),Fo=new shimWorker("./decrypter-worker.worker.js",(function(i,s){var _=this;
/*! @name @videojs/http-streaming @version 2.4.2 @license Apache-2.0 */!function(){function _defineProperties(i,s){for(var _=0;_<s.length;_++){var T=s[_];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(i,T.key,T)}}var i=function _createClass(i,s,_){return s&&_defineProperties(i.prototype,s),_&&_defineProperties(i,_),i};var s=function _inheritsLoose(i,s){i.prototype=Object.create(s.prototype),i.prototype.constructor=i,i.__proto__=s},T=function(){function Stream(){this.listeners={}}var i=Stream.prototype;return i.on=function on(i,s){this.listeners[i]||(this.listeners[i]=[]),this.listeners[i].push(s)},i.off=function off(i,s){if(!this.listeners[i])return!1;var _=this.listeners[i].indexOf(s);return this.listeners[i]=this.listeners[i].slice(0),this.listeners[i].splice(_,1),_>-1},i.trigger=function trigger(i){var s=this.listeners[i];if(s)if(2===arguments.length)for(var _=s.length,T=0;T<_;++T)s[T].call(this,arguments[1]);else for(var S=Array.prototype.slice.call(arguments,1),C=s.length,P=0;P<C;++P)s[P].apply(this,S)},i.dispose=function dispose(){this.listeners={}},i.pipe=function pipe(i){this.on("data",(function(s){i.push(s)}))},Stream}(),S=T;
/*! @name @videojs/vhs-utils @version 2.3.0 @license MIT */
/*! @name aes-decrypter @version 3.1.0 @license Apache-2.0 */
var C=null,P=function(){function AES(i){var s,_,T;C||(C=function precompute(){var i,s,_,T,S,C,P,O,M=[[[],[],[],[],[]],[[],[],[],[],[]]],R=M[0],D=M[1],j=R[4],$=D[4],U=[],V=[];for(i=0;i<256;i++)V[(U[i]=i<<1^283*(i>>7))^i]=i;for(s=_=0;!j[s];s^=T||1,_=V[_]||1)for(C=(C=_^_<<1^_<<2^_<<3^_<<4)>>8^255&C^99,j[s]=C,$[C]=s,O=16843009*U[S=U[T=U[s]]]^65537*S^257*T^16843008*s,P=257*U[C]^16843008*C,i=0;i<4;i++)R[i][s]=P=P<<24^P>>>8,D[i][C]=O=O<<24^O>>>8;for(i=0;i<5;i++)R[i]=R[i].slice(0),D[i]=D[i].slice(0);return M}()),this._tables=[[C[0][0].slice(),C[0][1].slice(),C[0][2].slice(),C[0][3].slice(),C[0][4].slice()],[C[1][0].slice(),C[1][1].slice(),C[1][2].slice(),C[1][3].slice(),C[1][4].slice()]];var S=this._tables[0][4],P=this._tables[1],O=i.length,M=1;if(4!==O&&6!==O&&8!==O)throw new Error("Invalid aes key size");var R=i.slice(0),D=[];for(this._key=[R,D],s=O;s<4*O+28;s++)T=R[s-1],(s%O==0||8===O&&s%O==4)&&(T=S[T>>>24]<<24^S[T>>16&255]<<16^S[T>>8&255]<<8^S[255&T],s%O==0&&(T=T<<8^T>>>24^M<<24,M=M<<1^283*(M>>7))),R[s]=R[s-O]^T;for(_=0;s;_++,s--)T=R[3&_?s:s-4],D[_]=s<=4||_<4?T:P[0][S[T>>>24]]^P[1][S[T>>16&255]]^P[2][S[T>>8&255]]^P[3][S[255&T]]}return AES.prototype.decrypt=function decrypt(i,s,_,T,S,C){var P,O,M,R,D=this._key[1],j=i^D[0],$=T^D[1],U=_^D[2],V=s^D[3],Z=D.length/4-2,Y=4,X=this._tables[1],Q=X[0],ee=X[1],te=X[2],ne=X[3],re=X[4];for(R=0;R<Z;R++)P=Q[j>>>24]^ee[$>>16&255]^te[U>>8&255]^ne[255&V]^D[Y],O=Q[$>>>24]^ee[U>>16&255]^te[V>>8&255]^ne[255&j]^D[Y+1],M=Q[U>>>24]^ee[V>>16&255]^te[j>>8&255]^ne[255&$]^D[Y+2],V=Q[V>>>24]^ee[j>>16&255]^te[$>>8&255]^ne[255&U]^D[Y+3],Y+=4,j=P,$=O,U=M;for(R=0;R<4;R++)S[(3&-R)+C]=re[j>>>24]<<24^re[$>>16&255]<<16^re[U>>8&255]<<8^re[255&V]^D[Y++],P=j,j=$,$=U,U=V,V=P},AES}(),O=function(i){function AsyncStream(){var s;return(s=i.call(this,S)||this).jobs=[],s.delay=1,s.timeout_=null,s}s(AsyncStream,i);var _=AsyncStream.prototype;return _.processJob_=function processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},_.push=function push(i){this.jobs.push(i),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},AsyncStream}(S),M=function ntoh(i){return i<<24|(65280&i)<<8|(16711680&i)>>8|i>>>24},R=function(){function Decrypter(i,s,_,T){var S=Decrypter.STEP,C=new Int32Array(i.buffer),P=new Uint8Array(i.byteLength),R=0;for(this.asyncStream_=new O,this.asyncStream_.push(this.decryptChunk_(C.subarray(R,R+S),s,_,P)),R=S;R<C.length;R+=S)_=new Uint32Array([M(C[R-4]),M(C[R-3]),M(C[R-2]),M(C[R-1])]),this.asyncStream_.push(this.decryptChunk_(C.subarray(R,R+S),s,_,P));this.asyncStream_.push((function(){T(null,
/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */
function unpad(i){return i.subarray(0,i.byteLength-i[i.byteLength-1])}(P))}))}return Decrypter.prototype.decryptChunk_=function decryptChunk_(i,s,_,T){return function(){var S=function decrypt(i,s,_){var T,S,C,O,R,D,j,$,U,V=new Int32Array(i.buffer,i.byteOffset,i.byteLength>>2),Z=new P(Array.prototype.slice.call(s)),Y=new Uint8Array(i.byteLength),X=new Int32Array(Y.buffer);for(T=_[0],S=_[1],C=_[2],O=_[3],U=0;U<V.length;U+=4)R=M(V[U]),D=M(V[U+1]),j=M(V[U+2]),$=M(V[U+3]),Z.decrypt(R,D,j,$,X,U),X[U]=M(X[U]^T),X[U+1]=M(X[U+1]^S),X[U+2]=M(X[U+2]^C),X[U+3]=M(X[U+3]^O),T=R,S=D,C=j,O=$;return Y}(i,s,_);T.set(S,i.byteOffset)}},i(Decrypter,null,[{key:"STEP",get:function get(){return 32e3}}]),Decrypter}(),D=new function DecrypterWorker(i){i.onmessage=function(s){var _=s.data,T=new Uint8Array(_.encrypted.bytes,_.encrypted.byteOffset,_.encrypted.byteLength),S=new Uint32Array(_.key.bytes,_.key.byteOffset,_.key.byteLength/4),C=new Uint32Array(_.iv.bytes,_.iv.byteOffset,_.iv.byteLength/4);new R(T,S,C,(function(s,T){i.postMessage(function createTransferableMessage(i){var s={};return Object.keys(i).forEach((function(_){var T=i[_];ArrayBuffer.isView(T)?s[_]={bytes:T.buffer,byteOffset:T.byteOffset,byteLength:T.byteLength}:s[_]=T})),s}({source:_.source,decrypted:T}),[T.buffer])}))}}(_)}()})),Ho=function audioTrackKind_(i){var s=i.default?"main":"alternative";return i.characteristics&&i.characteristics.indexOf("public.accessibility.describes-video")>=0&&(s="main-desc"),s},qo=function stopLoaders(i,s){i.abort(),i.pause(),s&&s.activePlaylistLoader&&(s.activePlaylistLoader.pause(),s.activePlaylistLoader=null)},Vo=function startLoaders(i,s){s.activePlaylistLoader=i,i.load()},Go={AUDIO:function AUDIO(i,s){return function(){var _=s.segmentLoaders[i],T=s.mediaTypes[i],S=s.blacklistCurrentPlaylist;qo(_,T);var C=T.activeTrack(),P=T.activeGroup(),O=(P.filter((function(i){return i.default}))[0]||P[0]).id,M=T.tracks[O];if(C!==M){for(var R in videojs$1.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),T.tracks)T.tracks[R].enabled=T.tracks[R]===M;T.onTrackChanged()}else S({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function SUBTITLES(i,s){return function(){var _=s.segmentLoaders[i],T=s.mediaTypes[i];videojs$1.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),qo(_,T);var S=T.activeTrack();S&&(S.mode="disabled"),T.onTrackChanged()}}},Zo={AUDIO:function AUDIO(i,s,_){if(s){var T=_.tech,S=_.requestOptions,C=_.segmentLoaders[i];s.on("loadedmetadata",(function(){var i=s.media();C.playlist(i,S),(!T.paused()||i.endList&&"none"!==T.preload())&&C.load()})),s.on("loadedplaylist",(function(){C.playlist(s.media(),S),T.paused()||C.load()})),s.on("error",Go[i](i,_))}},SUBTITLES:function SUBTITLES(i,s,_){var T=_.tech,S=_.requestOptions,C=_.segmentLoaders[i],P=_.mediaTypes[i];s.on("loadedmetadata",(function(){var i=s.media();C.playlist(i,S),C.track(P.activeTrack()),(!T.paused()||i.endList&&"none"!==T.preload())&&C.load()})),s.on("loadedplaylist",(function(){C.playlist(s.media(),S),T.paused()||C.load()})),s.on("error",Go[i](i,_))}},Wo={AUDIO:function AUDIO(i,s){var _=s.vhs,T=s.sourceType,S=s.segmentLoaders[i],C=s.requestOptions,P=s.master,O=P.mediaGroups,M=P.playlists,R=s.mediaTypes[i],D=R.groups,j=R.tracks,$=s.masterPlaylistLoader;O[i]&&0!==Object.keys(O[i]).length||(O[i]={main:{default:{default:!0}}});var U=function _loop(S){D[S]||(D[S]=[]);var P=M.filter((function(s){return s.attributes[i]===S})),R=function _loop2(M){var R=O[i][S][M];!P.filter((function(i){return i.resolvedUri!==R.resolvedUri})).length&&P.length&&delete R.resolvedUri;var U=void 0;if(U="vhs-json"===T&&R.playlists?new Pa(R.playlists[0],_,C):R.resolvedUri?new Pa(R.resolvedUri,_,C):R.playlists&&"dash"===T?new gs(R.playlists[0],_,C,$):null,R=videojs$1.mergeOptions({id:M,playlistLoader:U},R),Zo[i](i,R.playlistLoader,s),D[S].push(R),void 0===j[M]){var V=new videojs$1.AudioTrack({id:M,kind:Ho(R),enabled:!1,language:R.language,default:R.default,label:M});j[M]=V}};for(var U in O[i][S])R(U)};for(var V in O[i])U(V);S.on("error",Go[i](i,s))},SUBTITLES:function SUBTITLES(i,s){var _=s.tech,T=s.vhs,S=s.sourceType,C=s.segmentLoaders[i],P=s.requestOptions,O=s.master.mediaGroups,M=s.mediaTypes[i],R=M.groups,D=M.tracks,j=s.masterPlaylistLoader;for(var $ in O[i])for(var U in R[$]||(R[$]=[]),O[i][$])if(!O[i][$][U].forced){var V=O[i][$][U],Z=void 0;if("hls"===S)Z=new Pa(V.resolvedUri,T,P);else if("dash"===S){if(!V.playlists.filter((function(i){return i.excludeUntil!==1/0})).length)return;Z=new gs(V.playlists[0],T,P,j)}else"vhs-json"===S&&(Z=new Pa(V.playlists?V.playlists[0]:V.resolvedUri,T,P));if(V=videojs$1.mergeOptions({id:U,playlistLoader:Z},V),Zo[i](i,V.playlistLoader,s),R[$].push(V),void 0===D[U]){var Y=_.addRemoteTextTrack({id:U,kind:"subtitles",default:V.default&&V.autoselect,language:V.language,label:U},!1).track;D[U]=Y}}C.on("error",Go[i](i,s))},"CLOSED-CAPTIONS":function CLOSEDCAPTIONS(i,s){var _=s.tech,T=s.master.mediaGroups,S=s.mediaTypes[i],C=S.groups,P=S.tracks;for(var O in T[i])for(var M in C[O]||(C[O]=[]),T[i][O]){var R=T[i][O][M];if(R.instreamId.match(/CC\d/)&&(C[O].push(videojs$1.mergeOptions({id:M},R)),void 0===P[M])){var D=_.addRemoteTextTrack({id:R.instreamId,kind:"captions",default:R.default&&R.autoselect,language:R.language,label:M},!1).track;P[M]=D}}}},Ko={AUDIO:function AUDIO(i,s){return function(){var _=s.mediaTypes[i].tracks;for(var T in _)if(_[T].enabled)return _[T];return null}},SUBTITLES:function SUBTITLES(i,s){return function(){var _=s.mediaTypes[i].tracks;for(var T in _)if("showing"===_[T].mode||"hidden"===_[T].mode)return _[T];return null}}},Yo=function setupMediaGroups(i){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(s){Wo[s](s,i)}));var s=i.mediaTypes,_=i.masterPlaylistLoader,T=i.tech,S=i.vhs;["AUDIO","SUBTITLES"].forEach((function(_){s[_].activeGroup=function activeGroup(i,s){return function(_){var T=s.masterPlaylistLoader,S=s.mediaTypes[i].groups,C=T.media();if(!C)return null;var P=null;return C.attributes[i]&&(P=S[C.attributes[i]]),P=P||S.main,void 0===_?P:null===_?null:P.filter((function(i){return i.id===_.id}))[0]||null}}(_,i),s[_].activeTrack=Ko[_](_,i),s[_].onGroupChanged=function onGroupChanged(i,s){return function(){var _=s.segmentLoaders,T=_[i],S=_.main,C=s.mediaTypes[i],P=C.activeTrack(),O=C.activeGroup(P),M=C.activePlaylistLoader;qo(T,C),O&&(O.playlistLoader?(T.resyncLoader(),Vo(O.playlistLoader,C)):M&&S.resetEverything())}}(_,i),s[_].onGroupChanging=function onGroupChanging(i,s){return function(){var _=s.segmentLoaders[i];_.abort(),_.pause()}}(_,i),s[_].onTrackChanged=function onTrackChanged(i,s){return function(){var _=s.segmentLoaders,T=_[i],S=_.main,C=s.mediaTypes[i],P=C.activeTrack(),O=C.activeGroup(P),M=C.activePlaylistLoader;if(qo(T,C),O){if("AUDIO"===i){if(!O.playlistLoader)return S.setAudio(!0),void S.resetEverything();T.setAudio(!0),S.setAudio(!1)}M!==O.playlistLoader?(T.track&&T.track(P),T.resetEverything(),Vo(O.playlistLoader,C)):Vo(O.playlistLoader,C)}}}(_,i)}));var C=s.AUDIO.activeGroup();if(C){var P=(C.filter((function(i){return i.default}))[0]||C[0]).id;s.AUDIO.tracks[P].enabled=!0,s.AUDIO.onTrackChanged()}_.on("mediachange",(function(){["AUDIO","SUBTITLES"].forEach((function(i){return s[i].onGroupChanged()}))})),_.on("mediachanging",(function(){["AUDIO","SUBTITLES"].forEach((function(i){return s[i].onGroupChanging()}))}));var O=function onAudioTrackChanged(){s.AUDIO.onTrackChanged(),T.trigger({type:"usage",name:"vhs-audio-change"}),T.trigger({type:"usage",name:"hls-audio-change"})};for(var M in T.audioTracks().addEventListener("change",O),T.remoteTextTracks().addEventListener("change",s.SUBTITLES.onTrackChanged),S.on("dispose",(function(){T.audioTracks().removeEventListener("change",O),T.remoteTextTracks().removeEventListener("change",s.SUBTITLES.onTrackChanged)})),T.clearTracks("audio"),s.AUDIO.tracks)T.audioTracks().addTrack(s.AUDIO.tracks[M])},Xo=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"],Qo=function sumLoaderStat(i){return this.audioSegmentLoader_[i]+this.mainSegmentLoader_[i]},Jo=function(i){function MasterPlaylistController(s){var _;_=i.call(this)||this;var T=s.src,C=s.handleManifestRedirects,P=s.withCredentials,M=s.tech,R=s.bandwidth,D=s.externVhs,j=s.useCueTags,$=s.blacklistDuration,U=s.enableLowInitialPlaylist,V=s.sourceType,Z=s.cacheEncryptionKeys,Y=s.handlePartialData,X=s.experimentalBufferBasedABR;if(!T)throw new Error("A non-empty playlist URL or JSON manifest string is required");mo=D,_.experimentalBufferBasedABR=Boolean(X),_.withCredentials=P,_.tech_=M,_.vhs_=M.vhs,_.sourceType_=V,_.useCueTags_=j,_.blacklistDuration=$,_.enableLowInitialPlaylist=U,_.useCueTags_&&(_.cueTagsTrack_=_.tech_.addTextTrack("metadata","ad-cues"),_.cueTagsTrack_.inBandMetadataTrackDispatchType=""),_.requestOptions_={withCredentials:P,handleManifestRedirects:C,timeout:null},_.on("error",_.pauseLoading),_.mediaTypes_=function createMediaTypes(){var i={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(s){i[s]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:noop,activeTrack:noop,onGroupChanged:noop,onTrackChanged:noop}})),i}(),_.mediaSource=new(S().MediaSource),_.handleDurationChange_=_.handleDurationChange_.bind((0,O.Z)(_)),_.handleSourceOpen_=_.handleSourceOpen_.bind((0,O.Z)(_)),_.handleSourceEnded_=_.handleSourceEnded_.bind((0,O.Z)(_)),_.mediaSource.addEventListener("durationchange",_.handleDurationChange_),_.mediaSource.addEventListener("sourceopen",_.handleSourceOpen_),_.mediaSource.addEventListener("sourceended",_.handleSourceEnded_),_.seekable_=videojs$1.createTimeRanges(),_.hasPlayed_=!1,_.syncController_=new $o(s),_.segmentMetadataTrack_=M.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,_.decrypter_=new Fo,_.sourceUpdater_=new Lo(_.mediaSource),_.inbandTextTracks_={},_.timelineChangeController_=new Uo;var Q={vhs:_.vhs_,mediaSource:_.mediaSource,currentTime:_.tech_.currentTime.bind(_.tech_),seekable:function seekable(){return _.seekable()},seeking:function seeking(){return _.tech_.seeking()},duration:function duration(){return _.duration()},hasPlayed:function hasPlayed(){return _.hasPlayed_},goalBufferLength:function goalBufferLength(){return _.goalBufferLength()},bandwidth:R,syncController:_.syncController_,decrypter:_.decrypter_,sourceType:_.sourceType_,inbandTextTracks:_.inbandTextTracks_,cacheEncryptionKeys:Z,handlePartialData:Y,sourceUpdater:_.sourceUpdater_,timelineChangeController:_.timelineChangeController_};return _.masterPlaylistLoader_="dash"===_.sourceType_?new gs(T,_.vhs_,_.requestOptions_):new Pa(T,_.vhs_,_.requestOptions_),_.setupMasterPlaylistLoaderListeners_(),_.mainSegmentLoader_=new po(videojs$1.mergeOptions(Q,{segmentMetadataTrack:_.segmentMetadataTrack_,loaderType:"main"}),s),_.audioSegmentLoader_=new po(videojs$1.mergeOptions(Q,{loaderType:"audio"}),s),_.subtitleSegmentLoader_=new Do(videojs$1.mergeOptions(Q,{loaderType:"vtt",featuresNativeTextTracks:_.tech_.featuresNativeTextTracks}),s),_.setupSegmentLoaderListeners_(),_.experimentalBufferBasedABR&&(_.masterPlaylistLoader_.one("loadedplaylist",(function(){return _.startABRTimer_()})),_.tech_.on("pause",(function(){return _.stopABRTimer_()})),_.tech_.on("play",(function(){return _.startABRTimer_()}))),Xo.forEach((function(i){_[i+"_"]=Qo.bind((0,O.Z)(_),i)})),_.logger_=Ks("MPC"),_.triggeredFmp4Usage=!1,_.masterPlaylistLoader_.load(),_}_inheritsLoose(MasterPlaylistController,i);var s=MasterPlaylistController.prototype;return s.checkABR_=function checkABR_(){var i=this.selectPlaylist();this.shouldSwitchToMedia_(i)&&this.masterPlaylistLoader_.media(i)},s.startABRTimer_=function startABRTimer_(){var i=this;this.stopABRTimer_(),this.abrTimer_=S().setInterval((function(){return i.checkABR_()}),250)},s.stopABRTimer_=function stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(S().clearInterval(this.abrTimer_),this.abrTimer_=null)},s.setupMasterPlaylistLoaderListeners_=function setupMasterPlaylistLoaderListeners_(){var i=this;this.masterPlaylistLoader_.on("loadedmetadata",(function(){var s=i.masterPlaylistLoader_.media(),_=1.5*s.targetDuration*1e3;Ga(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.media())?i.requestOptions_.timeout=0:i.requestOptions_.timeout=_,s.endList&&"none"!==i.tech_.preload()&&(i.mainSegmentLoader_.playlist(s,i.requestOptions_),i.mainSegmentLoader_.load()),Yo({sourceType:i.sourceType_,segmentLoaders:{AUDIO:i.audioSegmentLoader_,SUBTITLES:i.subtitleSegmentLoader_,main:i.mainSegmentLoader_},tech:i.tech_,requestOptions:i.requestOptions_,masterPlaylistLoader:i.masterPlaylistLoader_,vhs:i.vhs_,master:i.master(),mediaTypes:i.mediaTypes_,blacklistCurrentPlaylist:i.blacklistCurrentPlaylist.bind(i)}),i.triggerPresenceUsage_(i.master(),s),i.setupFirstPlay(),!i.mediaTypes_.AUDIO.activePlaylistLoader||i.mediaTypes_.AUDIO.activePlaylistLoader.media()?i.trigger("selectedinitialmedia"):i.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",(function(){i.trigger("selectedinitialmedia")}))})),this.masterPlaylistLoader_.on("loadedplaylist",(function(){var s=i.masterPlaylistLoader_.media();if(!s){var _;if(i.excludeUnsupportedVariants_(),i.enableLowInitialPlaylist&&(_=i.selectInitialPlaylist()),_||(_=i.selectPlaylist()),!_||!i.shouldSwitchToMedia_(_))return;if(i.initialMedia_=_,i.masterPlaylistLoader_.media(i.initialMedia_),!("vhs-json"===i.sourceType_&&i.initialMedia_.segments))return;s=i.initialMedia_}i.handleUpdatedMediaPlaylist(s)})),this.masterPlaylistLoader_.on("error",(function(){i.blacklistCurrentPlaylist(i.masterPlaylistLoader_.error)})),this.masterPlaylistLoader_.on("mediachanging",(function(){i.mainSegmentLoader_.abort(),i.mainSegmentLoader_.pause()})),this.masterPlaylistLoader_.on("mediachange",(function(){var s=i.masterPlaylistLoader_.media(),_=1.5*s.targetDuration*1e3;Ga(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.media())?i.requestOptions_.timeout=0:i.requestOptions_.timeout=_,i.mainSegmentLoader_.playlist(s,i.requestOptions_),i.mainSegmentLoader_.load(),i.tech_.trigger({type:"mediachange",bubbles:!0})})),this.masterPlaylistLoader_.on("playlistunchanged",(function(){var s=i.masterPlaylistLoader_.media();i.stuckAtPlaylistEnd_(s)&&(i.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),i.tech_.trigger("playliststuck"))})),this.masterPlaylistLoader_.on("renditiondisabled",(function(){i.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),i.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})})),this.masterPlaylistLoader_.on("renditionenabled",(function(){i.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),i.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})}))},s.handleUpdatedMediaPlaylist=function handleUpdatedMediaPlaylist(i){this.useCueTags_&&this.updateAdCues_(i),this.mainSegmentLoader_.playlist(i,this.requestOptions_),this.updateDuration(!i.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},s.triggerPresenceUsage_=function triggerPresenceUsage_(i,s){var _=i.mediaGroups||{},T=!0,S=Object.keys(_.AUDIO);for(var C in _.AUDIO)for(var P in _.AUDIO[C]){_.AUDIO[C][P].uri||(T=!1)}T&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(_.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),mo.Playlist.isAes(s)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),S.length&&Object.keys(_.AUDIO[S[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},s.shouldSwitchToMedia_=function shouldSwitchToMedia_(i){var s=this.masterPlaylistLoader_.media(),_=this.tech_.buffered();return function shouldSwitchToMedia(i){var s=i.currentPlaylist,_=i.nextPlaylist,T=i.forwardBuffer,S=i.bufferLowWaterLine,C=i.bufferHighWaterLine,P=i.duration,O=i.experimentalBufferBasedABR,M=i.log;if(!_)return videojs$1.log.warn("We received no playlist to switch to. Please check your stream."),!1;var R="allowing switch "+(s&&s.id||"null")+" -> "+_.id;if(!s||!s.endList)return M(R+" as current playlist "+(s?"is live":"is not set")),!0;if(_.id===s.id)return!1;var D=O?vs.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:vs.MAX_BUFFER_LOW_WATER_LINE;if(P<D)return M(R+" as duration < max low water line ("+P+" < "+D+")"),!0;var j=_.attributes.BANDWIDTH,$=s.attributes.BANDWIDTH;if(j<$&&(!O||T<C)){var U=R+" as next bandwidth < current bandwidth ("+j+" < "+$+")";return O&&(U+=" and forwardBuffer < bufferHighWaterLine ("+T+" < "+C+")"),M(U),!0}if((!O||j>$)&&T>=S){var V=R+" as forwardBuffer >= bufferLowWaterLine ("+T+" >= "+S+")";return O&&(V+=" and next bandwidth > current bandwidth ("+j+" > "+$+")"),M(V),!0}return M("not "+R+" as no switching criteria met"),!1}({currentPlaylist:s,nextPlaylist:i,forwardBuffer:_.length?_.end(_.length-1)-this.tech_.currentTime():0,bufferLowWaterLine:this.bufferLowWaterLine(),bufferHighWaterLine:this.bufferHighWaterLine(),duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},s.setupSegmentLoaderListeners_=function setupSegmentLoaderListeners_(){var i=this;this.experimentalBufferBasedABR||(this.mainSegmentLoader_.on("bandwidthupdate",(function(){var s=i.selectPlaylist();i.shouldSwitchToMedia_(s)&&i.masterPlaylistLoader_.media(s),i.tech_.trigger("bandwidthupdate")})),this.mainSegmentLoader_.on("progress",(function(){i.trigger("progress")}))),this.mainSegmentLoader_.on("error",(function(){i.blacklistCurrentPlaylist(i.mainSegmentLoader_.error())})),this.mainSegmentLoader_.on("appenderror",(function(){i.error=i.mainSegmentLoader_.error_,i.trigger("error")})),this.mainSegmentLoader_.on("syncinfoupdate",(function(){i.onSyncInfoUpdate_()})),this.mainSegmentLoader_.on("timestampoffset",(function(){i.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),i.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})})),this.audioSegmentLoader_.on("syncinfoupdate",(function(){i.onSyncInfoUpdate_()})),this.audioSegmentLoader_.on("appenderror",(function(){i.error=i.audioSegmentLoader_.error_,i.trigger("error")})),this.mainSegmentLoader_.on("ended",(function(){i.logger_("main segment loader ended"),i.onEndOfStream()})),this.mainSegmentLoader_.on("earlyabort",(function(s){i.experimentalBufferBasedABR||(i.delegateLoaders_("all",["abort"]),i.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120))}));var s=function updateCodecs(){if(!i.sourceUpdater_.hasCreatedSourceBuffers())return i.tryToCreateSourceBuffers_();var s=i.getCodecsOrExclude_();s&&i.sourceUpdater_.addOrChangeSourceBuffers(s)};this.mainSegmentLoader_.on("trackinfo",s),this.audioSegmentLoader_.on("trackinfo",s),this.mainSegmentLoader_.on("fmp4",(function(){i.triggeredFmp4Usage||(i.tech_.trigger({type:"usage",name:"vhs-fmp4"}),i.tech_.trigger({type:"usage",name:"hls-fmp4"}),i.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("fmp4",(function(){i.triggeredFmp4Usage||(i.tech_.trigger({type:"usage",name:"vhs-fmp4"}),i.tech_.trigger({type:"usage",name:"hls-fmp4"}),i.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("ended",(function(){i.logger_("audioSegmentLoader ended"),i.onEndOfStream()}))},s.mediaSecondsLoaded_=function mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},s.load=function load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},s.smoothQualityChange_=function smoothQualityChange_(i){void 0===i&&(i=this.selectPlaylist()),i!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(i),this.mainSegmentLoader_.resetLoader())},s.fastQualityChange_=function fastQualityChange_(i){var s=this;void 0===i&&(i=this.selectPlaylist()),i!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(i),this.mainSegmentLoader_.resetEverything((function(){videojs$1.browser.IE_VERSION||videojs$1.browser.IS_EDGE?s.tech_.setCurrentTime(s.tech_.currentTime()+.04):s.tech_.setCurrentTime(s.tech_.currentTime())})))},s.play=function play(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var i=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<i.start(0)?this.tech_.setCurrentTime(i.end(i.length-1)):void 0}},s.setupFirstPlay=function setupFirstPlay(){var i=this,s=this.masterPlaylistLoader_.media();if(!s||this.tech_.paused()||this.hasPlayed_)return!1;if(!s.endList){var _=this.seekable();if(!_.length)return!1;if(videojs$1.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",(function(){i.trigger("firstplay"),i.tech_.setCurrentTime(_.end(0)),i.hasPlayed_=!0})),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(_.end(0))}return this.hasPlayed_=!0,this.load(),!0},s.handleSourceOpen_=function handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var i=this.tech_.play();void 0!==i&&"function"==typeof i.then&&i.then(null,(function(i){}))}this.trigger("sourceopen")},s.handleSourceEnded_=function handleSourceEnded_(){if(this.inbandTextTracks_.metadataTrack_){var i=this.inbandTextTracks_.metadataTrack_.cues;if(i&&i.length){var s=this.duration();i[i.length-1].endTime=isNaN(s)||Math.abs(s)===1/0?Number.MAX_VALUE:s}}},s.handleDurationChange_=function handleDurationChange_(){this.tech_.trigger("durationchange")},s.onEndOfStream=function onEndOfStream(){var i=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(i=!this.mainSegmentLoader_.currentMediaInfo_||this.mainSegmentLoader_.currentMediaInfo_.hasVideo?i&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_),i&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},s.stuckAtPlaylistEnd_=function stuckAtPlaylistEnd_(i){if(!this.seekable().length)return!1;var s=this.syncController_.getExpiredTime(i,this.duration());if(null===s)return!1;var _=mo.Playlist.playlistEnd(i,s),T=this.tech_.currentTime(),S=this.tech_.buffered();if(!S.length)return _-T<=Oa;var C=S.end(S.length-1);return C-T<=Oa&&_-C<=Oa},s.blacklistCurrentPlaylist=function blacklistCurrentPlaylist(i,s){void 0===i&&(i={});var _=i.playlist||this.masterPlaylistLoader_.media();if(s=s||i.blacklistDuration||this.blacklistDuration,!_)return this.error=i,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));var T=this.masterPlaylistLoader_.master.playlists,S=T.filter(qa),C=1===S.length&&S[0]===_;if(1===T.length&&s!==1/0)return videojs$1.log.warn("Problem encountered with playlist "+_.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(C);if(C){var P=!1;T.forEach((function(i){if(i!==_){var s=i.excludeUntil;void 0!==s&&s!==1/0&&(P=!0,delete i.excludeUntil)}})),P&&(videojs$1.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}_.excludeUntil=Date.now()+1e3*s,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var O=this.selectPlaylist();if(!O)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");var M=i.internal?this.logger_:videojs$1.log.warn,R=i.message?" "+i.message:"";M((i.internal?"Internal problem":"Problem")+" encountered with playlist "+_.id+"."+R+" Switching to playlist "+O.id+"."),O.attributes.AUDIO!==_.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),O.attributes.SUBTITLES!==_.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var D=O.targetDuration/2*1e3||5e3,j="number"==typeof O.lastRequest&&Date.now()-O.lastRequest<=D;return this.masterPlaylistLoader_.media(O,C||j)},s.pauseLoading=function pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},s.delegateLoaders_=function delegateLoaders_(i,s){var _=this,T=[],S="all"===i;(S||"main"===i)&&T.push(this.masterPlaylistLoader_);var C=[];(S||"audio"===i)&&C.push("AUDIO"),(S||"subtitle"===i)&&(C.push("CLOSED-CAPTIONS"),C.push("SUBTITLES")),C.forEach((function(i){var s=_.mediaTypes_[i]&&_.mediaTypes_[i].activePlaylistLoader;s&&T.push(s)})),["main","audio","subtitle"].forEach((function(s){var S=_[s+"SegmentLoader_"];!S||i!==s&&"all"!==i||T.push(S)})),T.forEach((function(i){return s.forEach((function(s){"function"==typeof i[s]&&i[s]()}))}))},s.setCurrentTime=function setCurrentTime(i){var s=za(this.tech_.buffered(),i);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?s&&s.length?i:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},s.duration=function duration(){if(!this.masterPlaylistLoader_)return 0;var i=this.masterPlaylistLoader_.media();return i?i.endList?this.mediaSource?this.mediaSource.duration:mo.Playlist.duration(i):1/0:0},s.seekable=function seekable(){return this.seekable_},s.onSyncInfoUpdate_=function onSyncInfoUpdate_(){var i;if(this.masterPlaylistLoader_){var s=this.masterPlaylistLoader_.media();if(s){var _=this.syncController_.getExpiredTime(s,this.duration());if(null!==_){var T=this.masterPlaylistLoader_.master.suggestedPresentationDelay,S=mo.Playlist.seekable(s,_,T);if(0!==S.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(s=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(_=this.syncController_.getExpiredTime(s,this.duration())))return;if(0===(i=mo.Playlist.seekable(s,_,T)).length)return}var C,P;this.seekable_&&this.seekable_.length&&(C=this.seekable_.end(0),P=this.seekable_.start(0)),i?i.start(0)>S.end(0)||S.start(0)>i.end(0)?this.seekable_=S:this.seekable_=videojs$1.createTimeRanges([[i.start(0)>S.start(0)?i.start(0):S.start(0),i.end(0)<S.end(0)?i.end(0):S.end(0)]]):this.seekable_=S,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===C&&this.seekable_.start(0)===P||(this.logger_("seekable updated ["+La(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},s.updateDuration=function updateDuration(i){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,i),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(i){var s=this.seekable();if(!s.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<s.end(s.length-1))&&this.sourceUpdater_.setDuration(s.end(s.length-1))}else{var _=this.tech_.buffered(),T=mo.Playlist.duration(this.masterPlaylistLoader_.media());_.length>0&&(T=Math.max(T,_.end(_.length-1))),this.mediaSource.duration!==T&&this.sourceUpdater_.setDuration(T)}},s.dispose=function dispose(){var i=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),["AUDIO","SUBTITLES"].forEach((function(s){var _=i.mediaTypes_[s].groups;for(var T in _)_[T].forEach((function(i){i.playlistLoader&&i.playlistLoader.dispose()}))})),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},s.master=function master(){return this.masterPlaylistLoader_.master},s.media=function media(){return this.masterPlaylistLoader_.media()||this.initialMedia_},s.areMediaTypesKnown_=function areMediaTypesKnown_(){var i=!!this.mediaTypes_.AUDIO.activePlaylistLoader;return!(!this.mainSegmentLoader_.currentMediaInfo_||i&&!this.audioSegmentLoader_.currentMediaInfo_)},s.getCodecsOrExclude_=function getCodecsOrExclude_(){var i=this,s={main:this.mainSegmentLoader_.currentMediaInfo_||{},audio:this.audioSegmentLoader_.currentMediaInfo_||{}};s.video=s.main;var _=Ws(this.master(),this.media()),T={},S=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(s.main.hasVideo&&(T.video=_.video||s.main.videoCodec||ut.xz),s.main.isMuxed&&(T.video+=","+(_.audio||s.main.audioCodec||ut.lA)),(s.main.hasAudio&&!s.main.isMuxed||s.audio.hasAudio||S)&&(T.audio=_.audio||s.main.audioCodec||s.audio.audioCodec||ut.lA,s.audio.isFmp4=s.main.hasAudio&&!s.main.isMuxed?s.main.isFmp4:s.audio.isFmp4),T.audio||T.video){var C,P={};if(["video","audio"].forEach((function(i){if(T.hasOwnProperty(i)&&!function supportFunction(i,s){return i?(0,ut.p7)(s):(0,ut.Hi)(s)}(s[i].isFmp4,T[i])){var _=s[i].isFmp4?"browser":"muxer";P[_]=P[_]||[],P[_].push(T[i]),"audio"===i&&(C=_)}})),S&&C&&this.media().attributes.AUDIO){var O=this.media().attributes.AUDIO;this.master().playlists.forEach((function(s){(s.attributes&&s.attributes.AUDIO)===O&&s!==i.media()&&(s.excludeUntil=1/0)})),this.logger_("excluding audio group "+O+" as "+C+' does not support codec(s): "'+T.audio+'"')}if(!Object.keys(P).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var M=[];if(["video","audio"].forEach((function(s){var _=((0,ut.kS)(i.sourceUpdater_.codecs[s]||"")[s]||{}).type,S=((0,ut.kS)(T[s]||"")[s]||{}).type;_&&S&&_.toLowerCase()!==S.toLowerCase()&&M.push('"'+i.sourceUpdater_.codecs[s]+'" -> "'+T[s]+'"')})),M.length)return void this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+M.join(", ")+".",blacklistDuration:1/0,internal:!0})}return T}var R=Object.keys(P).reduce((function(i,s){return i&&(i+=", "),i+=s+' does not support codec(s): "'+P[s].join(",")+'"'}),"")+".";this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:R,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},s.tryToCreateSourceBuffers_=function tryToCreateSourceBuffers_(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var i=this.getCodecsOrExclude_();if(i){this.sourceUpdater_.createSourceBuffers(i);var s=[i.video,i.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(s)}}},s.excludeUnsupportedVariants_=function excludeUnsupportedVariants_(){var i=this,s=this.master().playlists,_=[];Object.keys(s).forEach((function(T){var S=s[T];if(-1===_.indexOf(S.id)){_.push(S.id);var C=Ws(i.master,S),P=[];!C.audio||(0,ut.Hi)(C.audio)||(0,ut.p7)(C.audio)||(S.excludeUntil=1/0,P.push("audio codec "+C.audio)),!C.video||(0,ut.Hi)(C.video)||(0,ut.p7)(C.video)||(S.excludeUntil=1/0,P.push("video codec "+C.video)),C.text&&"stpp.ttml.im1t"===C.text&&(S.excludeUntil=1/0,P.push("text codec "+C.text)),P.length&&i.logger_("excluding "+S.id+" as codecs "+P.join(", ")+" are unsupported")}}))},s.excludeIncompatibleVariants_=function excludeIncompatibleVariants_(i){var s=this,_=(0,ut.kS)(i),T=Object.keys(_).length;this.master().playlists.forEach((function(i){if(i.excludeUntil!==1/0){var S={},C=2,P=[],O=Ws(s.masterPlaylistLoader_.master,i);if(O.audio||O.video){var M=[O.video,O.audio].filter(Boolean).join(",");S=(0,ut.kS)(M),C=Object.keys(S).length}C!==T&&(P.push('codec count "'+C+'" !== "'+T+'"'),i.excludeUntil=1/0),s.sourceUpdater_.canChangeType()||(S.video&&_.video&&S.video.type.toLowerCase()!==_.video.type.toLowerCase()&&(P.push('video codec "'+S.video.type+'" !== "'+_.video.type+'"'),i.excludeUntil=1/0),S.audio&&_.audio&&S.audio.type.toLowerCase()!==_.audio.type.toLowerCase()&&(i.excludeUntil=1/0,P.push('audio codec "'+S.audio.type+'" !== "'+_.audio.type+'"'))),P.length&&s.logger_("blacklisting "+i.id+": "+P.join(" && "))}}))},s.updateAdCues_=function updateAdCues_(i){var s=0,_=this.seekable();_.length&&(s=_.start(0)),function updateAdCues(i,s,_){if(void 0===_&&(_=0),i.segments)for(var T,C=_,P=0;P<i.segments.length;P++){var O=i.segments[P];if(T||(T=jo(s,C+O.duration/2)),T){if("cueIn"in O){T.endTime=C,T.adEndTime=C,C+=O.duration,T=null;continue}if(C<T.endTime){C+=O.duration;continue}T.endTime+=O.duration}else if("cueOut"in O&&((T=new(S().VTTCue)(C,C+O.duration,O.cueOut)).adStartTime=C,T.adEndTime=C+parseFloat(O.cueOut),s.addCue(T)),"cueOutCont"in O){var M=O.cueOutCont.split("/").map(parseFloat),R=M[0],D=M[1];(T=new(S().VTTCue)(C,C+O.duration,"")).adStartTime=C-R,T.adEndTime=T.adStartTime+D,s.addCue(T)}C+=O.duration}}(i,this.cueTagsTrack_,s)},s.goalBufferLength=function goalBufferLength(){var i=this.tech_.currentTime(),s=vs.GOAL_BUFFER_LENGTH,_=vs.GOAL_BUFFER_LENGTH_RATE,T=Math.max(s,vs.MAX_GOAL_BUFFER_LENGTH);return Math.min(s+i*_,T)},s.bufferLowWaterLine=function bufferLowWaterLine(){var i=this.tech_.currentTime(),s=vs.BUFFER_LOW_WATER_LINE,_=vs.BUFFER_LOW_WATER_LINE_RATE,T=Math.max(s,vs.MAX_BUFFER_LOW_WATER_LINE),S=Math.max(s,vs.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(s+i*_,this.experimentalBufferBasedABR?S:T)},s.bufferHighWaterLine=function bufferHighWaterLine(){return vs.BUFFER_HIGH_WATER_LINE},MasterPlaylistController}(videojs$1.EventTarget),tl=function Representation(i,s,_){var T=i.masterPlaylistController_,S=T[(i.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(T);if(s.attributes.RESOLUTION){var C=s.attributes.RESOLUTION;this.width=C.width,this.height=C.height}this.bandwidth=s.attributes.BANDWIDTH,this.codecs=Ws(T.master(),s),this.playlist=s,this.id=_,this.enabled=function enableFunction(i,s,_){return function(T){var S=i.master.playlists[s],C=Ha(S),P=qa(S);return void 0===T?P:(T?delete S.disabled:S.disabled=!0,T===P||C||(_(),T?i.trigger("renditionenabled"):i.trigger("renditiondisabled")),T)}}(i.playlists,s.id,S)},nl=["seeking","seeked","pause","playing","error"],rl=function(){function PlaybackWatcher(i){var s=this;this.masterPlaylistController_=i.masterPlaylistController,this.tech_=i.tech,this.seekable=i.seekable,this.allowSeeksWithinUnsafeLiveWindow=i.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=i.liveRangeSafeTimeDelta,this.media=i.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Ks("PlaybackWatcher"),this.logger_("initialize");var _=function canPlayHandler(){return s.monitorCurrentTime_()},T=function waitingHandler(){return s.techWaiting_()},C=function cancelTimerHandler(){return s.cancelTimer_()},P=function fixesBadSeeksHandler(){return s.fixesBadSeeks_()},O=this.masterPlaylistController_,M=["main","subtitle","audio"],R={};M.forEach((function(i){R[i]={reset:function reset(){return s.resetSegmentDownloads_(i)},updateend:function updateend(){return s.checkSegmentDownloads_(i)}},O[i+"SegmentLoader_"].on("appendsdone",R[i].updateend),O[i+"SegmentLoader_"].on("playlistupdate",R[i].reset),s.tech_.on(["seeked","seeking"],R[i].reset)})),this.tech_.on("seekablechanged",P),this.tech_.on("waiting",T),this.tech_.on(nl,C),this.tech_.on("canplay",_),this.dispose=function(){s.logger_("dispose"),s.tech_.off("seekablechanged",P),s.tech_.off("waiting",T),s.tech_.off(nl,C),s.tech_.off("canplay",_),M.forEach((function(i){O[i+"SegmentLoader_"].off("appendsdone",R[i].updateend),O[i+"SegmentLoader_"].off("playlistupdate",R[i].reset),s.tech_.off(["seeked","seeking"],R[i].reset)})),s.checkCurrentTimeTimeout_&&S().clearTimeout(s.checkCurrentTimeTimeout_),s.cancelTimer_()}}var i=PlaybackWatcher.prototype;return i.monitorCurrentTime_=function monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&S().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=S().setTimeout(this.monitorCurrentTime_.bind(this),250)},i.resetSegmentDownloads_=function resetSegmentDownloads_(i){var s=this.masterPlaylistController_[i+"SegmentLoader_"];this[i+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+i+" loader"),this[i+"StalledDownloads_"]=0,this[i+"Buffered_"]=s.buffered_()},i.checkSegmentDownloads_=function checkSegmentDownloads_(i){var s=this.masterPlaylistController_,_=s[i+"SegmentLoader_"],T=_.buffered_(),S=function isRangeDifferent(i,s){if(i===s)return!1;if(!i&&s||!s&&i)return!0;if(i.length!==s.length)return!0;for(var _=0;_<i.length;_++)if(i.start(_)!==s.start(_)||i.end(_)!==s.end(_))return!0;return!1}(this[i+"Buffered_"],T);this[i+"Buffered_"]=T,S?this.resetSegmentDownloads_(i):(this[i+"StalledDownloads_"]++,this.logger_("found #"+this[i+"StalledDownloads_"]+" "+i+" appends that did not increase buffer (possible stalled download)",{playlistId:_.playlist_&&_.playlist_.id,buffered:Ra(T)}),this[i+"StalledDownloads_"]<10||(this.logger_(i+" loader stalled download exclusion"),this.resetSegmentDownloads_(i),this.tech_.trigger({type:"usage",name:"vhs-"+i+"-download-exclusion"}),"subtitle"!==i&&s.blacklistCurrentPlaylist({message:"Excessive "+i+" segment downloading detected."},1/0)))},i.checkCurrentTime_=function checkCurrentTime_(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var i=this.tech_.currentTime(),s=this.tech_.buffered();if(this.lastRecordedTime===i&&(!s.length||i+Oa>=s.end(s.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&i===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):i===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=i)}},i.cancelTimer_=function cancelTimer_(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},i.fixesBadSeeks_=function fixesBadSeeks_(){if(!this.tech_.seeking())return!1;var i,s=this.seekable(),_=this.tech_.currentTime();this.afterSeekableWindow_(s,_,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(i=s.end(s.length-1));if(this.beforeSeekableWindow_(s,_)){var T=s.start(0);i=T+(T===s.end(0)?0:Oa)}if(void 0!==i)return this.logger_("Trying to seek outside of seekable at time "+_+" with seekable range "+La(s)+". Seeking to "+i+"."),this.tech_.setCurrentTime(i),!0;var S=this.tech_.buffered();return!!function closeToBufferedContent(i){var s=i.buffered,_=i.targetDuration,T=i.currentTime;return!(!s.length||s.end(0)-s.start(0)<2*_||T>s.start(0)||!(s.start(0)-T<_))}({buffered:S,targetDuration:this.media().targetDuration,currentTime:_})&&(i=S.start(0)+Oa,this.logger_("Buffered region starts ("+S.start(0)+")  just beyond seek point ("+_+"). Seeking to "+i+"."),this.tech_.setCurrentTime(i),!0)},i.waiting_=function waiting_(){if(!this.techWaiting_()){var i=this.tech_.currentTime(),s=this.tech_.buffered(),_=za(s,i);return _.length&&i+3<=_.end(0)?(this.cancelTimer_(),this.tech_.setCurrentTime(i),this.logger_("Stopped at "+i+" while inside a buffered region ["+_.start(0)+" -> "+_.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}},i.techWaiting_=function techWaiting_(){var i=this.seekable(),s=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(i,s)){var _=i.end(i.length-1);return this.logger_("Fell out of live window at time "+s+". Seeking to live point (seekable end) "+_),this.cancelTimer_(),this.tech_.setCurrentTime(_),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var T=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,S=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:T.audioBuffered(),videoBuffered:T.videoBuffered(),currentTime:s}))return this.cancelTimer_(),this.tech_.setCurrentTime(s),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var C=Ia(S,s);if(C.length>0){var P=C.start(0)-s;return this.logger_("Stopped at "+s+", setting timer for "+P+", seeking to "+C.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*P,s),!0}return!1},i.afterSeekableWindow_=function afterSeekableWindow_(i,s,_,T){if(void 0===T&&(T=!1),!i.length)return!1;var S=i.end(i.length-1)+Oa;return!_.endList&&T&&(S=i.end(i.length-1)+3*_.targetDuration),s>S},i.beforeSeekableWindow_=function beforeSeekableWindow_(i,s){return!!(i.length&&i.start(0)>0&&s<i.start(0)-this.liveRangeSafeTimeDelta)},i.videoUnderflow_=function videoUnderflow_(i){var s=i.videoBuffered,_=i.audioBuffered,T=i.currentTime;if(s){var S;if(s.length&&_.length){var C=za(s,T-3),P=za(s,T),O=za(_,T);O.length&&!P.length&&C.length&&(S={start:C.end(0),end:O.end(0)})}else{Ia(s,T).length||(S=this.gapFromVideoUnderflow_(s,T))}return!!S&&(this.logger_("Encountered a gap in video from "+S.start+" to "+S.end+". Seeking to current time "+T),!0)}},i.skipTheGap_=function skipTheGap_(i){var s=this.tech_.buffered(),_=this.tech_.currentTime(),T=Ia(s,_);this.cancelTimer_(),0!==T.length&&_===i&&(this.logger_("skipTheGap_:","currentTime:",_,"scheduled currentTime:",i,"nextRange start:",T.start(0)),this.tech_.setCurrentTime(T.start(0)+Aa),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},i.gapFromVideoUnderflow_=function gapFromVideoUnderflow_(i,s){for(var _=function findGaps(i){if(i.length<2)return videojs$1.createTimeRanges();for(var s=[],_=1;_<i.length;_++){var T=i.end(_-1),S=i.start(_);s.push([T,S])}return videojs$1.createTimeRanges(s)}(i),T=0;T<_.length;T++){var S=_.start(T),C=_.end(T);if(s-S<4&&s-S>2)return{start:S,end:C}}return null},PlaybackWatcher}(),il={errorInterval:30,getSource:function getSource(i){return i(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},al=function initPlugin(i,s){var _=0,T=0,S=videojs$1.mergeOptions(il,s);i.ready((function(){i.trigger({type:"usage",name:"vhs-error-reload-initialized"}),i.trigger({type:"usage",name:"hls-error-reload-initialized"})}));var C=function loadedMetadataHandler(){T&&i.currentTime(T)},P=function setSource(s){null!=s&&(T=i.duration()!==1/0&&i.currentTime()||0,i.one("loadedmetadata",C),i.src(s),i.trigger({type:"usage",name:"vhs-error-reload"}),i.trigger({type:"usage",name:"hls-error-reload"}),i.play())},O=function errorHandler(){return Date.now()-_<1e3*S.errorInterval?(i.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void i.trigger({type:"usage",name:"hls-error-reload-canceled"})):S.getSource&&"function"==typeof S.getSource?(_=Date.now(),S.getSource.call(i,P)):void videojs$1.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},M=function cleanupEvents(){i.off("loadedmetadata",C),i.off("error",O),i.off("dispose",cleanupEvents)};i.on("error",O),i.on("dispose",M),i.reloadSourceOnError=function reinitPlugin(s){M(),initPlugin(i,s)}},sl=function reloadSourceOnError(i){al(this,i)},ol="2.4.2",ll={PlaylistLoader:Pa,Playlist:Za,utils:os,STANDARD_PLAYLIST_SELECTOR:no,INITIAL_PLAYLIST_SELECTOR:function lowestBitrateCompatibleVariantSelector(){var i=this,s=this.playlists.master.playlists.filter(Za.isEnabled);return Js(s,(function(i,s){return eo(i,s)})),s.filter((function(s){return!!Ws(i.playlists.master,s).video}))[0]||null},lastBandwidthSelector:no,movingAverageBandwidthSelector:function movingAverageBandwidthSelector(i){var s=-1;if(i<0||i>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var _=this.useDevicePixelRatio&&S().devicePixelRatio||1;return s<0&&(s=this.systemBandwidth),s=i*this.systemBandwidth+(1-i)*s,to(this.playlists.master,s,parseInt(Qs(this.tech_.el(),"width"),10)*_,parseInt(Qs(this.tech_.el(),"height"),10)*_,this.limitRenditionByPlayerDimensions)}},comparePlaylistBandwidth:eo,comparePlaylistResolution:function comparePlaylistResolution(i,s){var _,T;return i.attributes.RESOLUTION&&i.attributes.RESOLUTION.width&&(_=i.attributes.RESOLUTION.width),_=_||S().Number.MAX_VALUE,s.attributes.RESOLUTION&&s.attributes.RESOLUTION.width&&(T=s.attributes.RESOLUTION.width),_===(T=T||S().Number.MAX_VALUE)&&i.attributes.BANDWIDTH&&s.attributes.BANDWIDTH?i.attributes.BANDWIDTH-s.attributes.BANDWIDTH:_-T},xhr:Xa()};Object.keys(vs).forEach((function(i){Object.defineProperty(ll,i,{get:function get(){return videojs$1.log.warn("using Vhs."+i+" is UNSAFE be sure you know what you are doing"),vs[i]},set:function set(s){videojs$1.log.warn("using Vhs."+i+" is UNSAFE be sure you know what you are doing"),"number"!=typeof s||s<0?videojs$1.log.warn("value of Vhs."+i+" must be greater than or equal to 0"):vs[i]=s}})}));var cl="videojs-vhs",ul=function handleVhsMediaChange(i,s){for(var _=s.media(),T=-1,S=0;S<i.length;S++)if(i[S].id===_.id){T=S;break}i.selectedIndex_=T,i.trigger({selectedIndex:T,type:"change"})};ll.canPlaySource=function(){return videojs$1.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var dl=function waitForKeySessionCreation(i){var s=i.player,_=i.sourceKeySystems,T=i.audioMedia,S=i.mainPlaylists;if(!s.eme.initializeMediaKeys)return Promise.resolve();var C=function getAllPsshKeySystemsOptions(i,s){return i.reduce((function(i,_){if(!_.contentProtection)return i;var T=s.reduce((function(i,s){var T=_.contentProtection[s];return T&&T.pssh&&(i[s]={pssh:T.pssh}),i}),{});return Object.keys(T).length&&i.push(T),i}),[])}(T?S.concat([T]):S,Object.keys(_)),P=[],O=[];return C.forEach((function(i){O.push(new Promise((function(i,_){s.tech_.one("keysessioncreated",i)}))),P.push(new Promise((function(_,T){s.eme.initializeMediaKeys({keySystems:i},(function(i){i?T(i):_()}))})))})),Promise.race([Promise.all(P),Promise.race(O)])},hl=function setupEmeOptions(i){var s=i.player,_=function emeKeySystems(i,s,_){if(!i)return i;var T={video:s&&s.attributes&&s.attributes.CODECS,audio:_&&_.attributes&&_.attributes.CODECS};!T.audio&&T.video&&T.video.split(",").length>1&&T.video.split(",").forEach((function(i){i=i.trim(),(0,ut.KL)(i)?T.audio=i:(0,ut.tf)(i)&&(T.video=i)}));var S=T.video?'video/mp4;codecs="'+T.video+'"':null,C=T.audio?'audio/mp4;codecs="'+T.audio+'"':null,P={};for(var O in i)P[O]={audioContentType:C,videoContentType:S},s.contentProtection&&s.contentProtection[O]&&s.contentProtection[O].pssh&&(P[O].pssh=s.contentProtection[O].pssh),"string"==typeof i[O]&&(P[O].url=i[O]);return videojs$1.mergeOptions(i,P)}(i.sourceKeySystems,i.media,i.audioMedia);return!!_&&(s.currentSource().keySystems=_,!(_&&!s.eme)||(videojs$1.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1))},pl=function getVhsLocalStorage(){if(!S().localStorage)return null;var i=S().localStorage.getItem(cl);if(!i)return null;try{return JSON.parse(i)}catch(vl){return null}};ll.supportsNativeHls=function(){if(!P()||!P().createElement)return!1;var i=P().createElement("video");if(!videojs$1.getTech("Html5").isSupported())return!1;return["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some((function(s){return/maybe|probably/i.test(i.canPlayType(s))}))}(),ll.supportsNativeDash=!!(P()&&P().createElement&&videojs$1.getTech("Html5").isSupported())&&/maybe|probably/i.test(P().createElement("video").canPlayType("application/dash+xml")),ll.supportsTypeNatively=function(i){return"hls"===i?ll.supportsNativeHls:"dash"===i&&ll.supportsNativeDash},ll.isSupported=function(){return videojs$1.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var ml=function(i){function VhsHandler(s,_,T){var S;if(S=i.call(this,_,videojs$1.mergeOptions(T.hls,T.vhs))||this,T.hls&&Object.keys(T.hls).length&&videojs$1.log.warn("Using hls options is deprecated. Use vhs instead."),S.logger_=Ks("VhsHandler"),_.options_&&_.options_.playerId){var C=videojs$1(_.options_.playerId);C.hasOwnProperty("hls")||Object.defineProperty(C,"hls",{get:function get(){return videojs$1.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),_.trigger({type:"usage",name:"hls-player-access"}),(0,O.Z)(S)},configurable:!0}),C.hasOwnProperty("vhs")||Object.defineProperty(C,"vhs",{get:function get(){return videojs$1.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),_.trigger({type:"usage",name:"vhs-player-access"}),(0,O.Z)(S)},configurable:!0}),C.hasOwnProperty("dash")||Object.defineProperty(C,"dash",{get:function get(){return videojs$1.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),(0,O.Z)(S)},configurable:!0}),S.player_=C}if(S.tech_=_,S.source_=s,S.stats={},S.ignoreNextSeekingEvent_=!1,S.setOptions_(),S.options_.overrideNative&&_.overrideNativeAudioTracks&&_.overrideNativeVideoTracks)_.overrideNativeAudioTracks(!0),_.overrideNativeVideoTracks(!0);else if(S.options_.overrideNative&&(_.featuresNativeVideoTracks||_.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return S.on(P(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],(function(i){var s=P().fullscreenElement||P().webkitFullscreenElement||P().mozFullScreenElement||P().msFullscreenElement;s&&s.contains(S.tech_.el())&&S.masterPlaylistController_.smoothQualityChange_()})),S.on(S.tech_,"seeking",(function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())})),S.on(S.tech_,"error",(function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()})),S.on(S.tech_,"play",S.play),S}_inheritsLoose(VhsHandler,i);var s=VhsHandler.prototype;return s.setOptions_=function setOptions_(){var i=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.handlePartialData=this.options_.handlePartialData||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var s=pl();s&&s.bandwidth&&(this.options_.bandwidth=s.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),s&&s.throughput&&(this.options_.throughput=s.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=vs.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===vs.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","handlePartialData","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta"].forEach((function(s){void 0!==i.source_[s]&&(i.options_[s]=i.source_[s])})),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},s.src=function src(i,s){var _=this;if(i){this.setOptions_(),this.options_.src=function expandDataUri(i){return 0===i.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(i.substring(i.indexOf(",")+1)):i}(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=ll,this.options_.sourceType=(0,ue.t)(s),this.options_.seekTo=function(i){_.tech_.setCurrentTime(i)},this.masterPlaylistController_=new Jo(this.options_);var T=videojs$1.mergeOptions({liveRangeSafeTimeDelta:Oa},this.options_,{seekable:function seekable(){return _.seekable()},media:function media(){return _.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new rl(T),this.masterPlaylistController_.on("error",(function(){var i=videojs$1.players[_.tech_.options_.playerId],s=_.masterPlaylistController_.error;"object"!=typeof s||s.code?"string"==typeof s&&(s={message:s,code:3}):s.code=3,i.error(s)}));var C=this.options_.experimentalBufferBasedABR?ll.movingAverageBandwidthSelector(.55):ll.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):C.bind(this),this.masterPlaylistController_.selectInitialPlaylist=ll.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function get(){return this.masterPlaylistController_.selectPlaylist},set:function set(i){this.masterPlaylistController_.selectPlaylist=i.bind(this)}},throughput:{get:function get(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function set(i){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=i,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function get(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function set(i){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=i,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function get(){var i,s=1/(this.bandwidth||1);return i=this.throughput>0?1/this.throughput:0,Math.floor(1/(s+i))},set:function set(){videojs$1.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function get(){return _.bandwidth||0},enumerable:!0},mediaRequests:{get:function get(){return _.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function get(){return _.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function get(){return _.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function get(){return _.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function get(){return _.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function get(){return _.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function get(){return _.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function get(){return Ra(_.tech_.buffered())},enumerable:!0},currentTime:{get:function get(){return _.tech_.currentTime()},enumerable:!0},currentSource:{get:function get(){return _.tech_.currentSource_},enumerable:!0},currentTech:{get:function get(){return _.tech_.name_},enumerable:!0},duration:{get:function get(){return _.tech_.duration()},enumerable:!0},master:{get:function get(){return _.playlists.master},enumerable:!0},playerDimensions:{get:function get(){return _.tech_.currentDimensions()},enumerable:!0},seekable:{get:function get(){return Ra(_.tech_.seekable())},enumerable:!0},timestamp:{get:function get(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function get(){return _.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",(function(){_.options_.useBandwidthFromLocalStorage&&function updateVhsLocalStorage(i){if(!S().localStorage)return!1;var s=pl();s=s?videojs$1.mergeOptions(s,i):i;try{S().localStorage.setItem(cl,JSON.stringify(s))}catch(vl){return!1}}({bandwidth:_.bandwidth,throughput:Math.round(_.throughput)})})),this.masterPlaylistController_.on("selectedinitialmedia",(function(){!function renditionSelectionMixin(i){var s=i.playlists;i.representations=function(){return s&&s.master&&s.master.playlists?s.master.playlists.filter((function(i){return!Ha(i)})).map((function(s,_){return new tl(i,s,s.id)})):[]}}(_)})),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",(function(){_.setupEme_()})),this.on(this.masterPlaylistController_,"progress",(function(){this.tech_.trigger("progress")})),this.on(this.masterPlaylistController_,"firstplay",(function(){this.ignoreNextSeekingEvent_=!0})),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=S().URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},s.setupEme_=function setupEme_(){var i=this,s=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,_=hl({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:s&&s.media()});11!==videojs$1.browser.IE_VERSION&&_?(this.logger_("waiting for EME key session creation"),dl({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:s&&s.media(),mainPlaylists:this.playlists.master.playlists}).then((function(){i.logger_("created EME key session"),i.masterPlaylistController_.sourceUpdater_.initializedEme()})).catch((function(s){i.logger_("error while creating EME key session",s),i.player_.error({message:"Failed to initialize media keys for EME",code:3})}))):this.masterPlaylistController_.sourceUpdater_.initializedEme()},s.setupQualityLevels_=function setupQualityLevels_(){var i=this,s=videojs$1.players[this.tech_.options_.playerId];s&&s.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=s.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",(function(){!function handleVhsLoadedMetadata(i,s){s.representations().forEach((function(s){i.addQualityLevel(s)})),ul(i,s.playlists)}(i.qualityLevels_,i)})),this.playlists.on("mediachange",(function(){ul(i.qualityLevels_,i.playlists)})))},VhsHandler.version=function version$5(){return{"@videojs/http-streaming":ol,"mux.js":"5.8.0","mpd-parser":"0.15.0","m3u8-parser":"4.5.0","aes-decrypter":"3.1.0"}},s.version=function version(){return this.constructor.version()},s.canChangeType=function canChangeType(){return Lo.canChangeType()},s.play=function play(){this.masterPlaylistController_.play()},s.setCurrentTime=function setCurrentTime(i){this.masterPlaylistController_.setCurrentTime(i)},s.duration=function duration(){return this.masterPlaylistController_.duration()},s.seekable=function seekable(){return this.masterPlaylistController_.seekable()},s.dispose=function dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&S().URL.revokeObjectURL&&(S().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),i.prototype.dispose.call(this)},s.convertToProgramTime=function convertToProgramTime(i,s){return ls({playlist:this.masterPlaylistController_.media(),time:i,callback:s})},s.seekToProgramTime=function seekToProgramTime$1(i,s,_,T){return void 0===_&&(_=!0),void 0===T&&(T=2),cs({programTime:i,playlist:this.masterPlaylistController_.media(),retryCount:T,pauseAfterSeek:_,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:s})},VhsHandler}(videojs$1.getComponent("Component")),fl={name:"videojs-http-streaming",VERSION:ol,canHandleSource:function canHandleSource(i,s){void 0===s&&(s={});var _=videojs$1.mergeOptions(videojs$1.options,s);return fl.canPlayType(i.type,_)},handleSource:function handleSource(i,s,_){void 0===_&&(_={});var T=videojs$1.mergeOptions(videojs$1.options,_);return s.vhs=new ml(i,s,T),videojs$1.hasOwnProperty("hls")||Object.defineProperty(s,"hls",{get:function get(){return videojs$1.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),s.vhs},configurable:!0}),s.vhs.xhr=Xa(),s.vhs.src(i.src,i.type),s.vhs},canPlayType:function canPlayType(i,s){void 0===s&&(s={});var _=videojs$1.mergeOptions(videojs$1.options,s).vhs.overrideNative,T=void 0===_?!videojs$1.browser.IS_ANY_SAFARI:_,S=(0,ue.t)(i);return S&&(!ll.supportsTypeNatively(S)||T)?"maybe":""}};(function supportsNativeMediaSources(){return(0,ut.p7)("avc1.4d400d,mp4a.40.2")})()&&videojs$1.getTech("Html5").registerSourceHandler(fl,0),videojs$1.VhsHandler=ml,Object.defineProperty(videojs$1,"HlsHandler",{get:function get(){return videojs$1.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),ml},configurable:!0}),videojs$1.VhsSourceHandler=fl,Object.defineProperty(videojs$1,"HlsSourceHandler",{get:function get(){return videojs$1.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),fl},configurable:!0}),videojs$1.Vhs=ll,Object.defineProperty(videojs$1,"Hls",{get:function get(){return videojs$1.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),ll},configurable:!0}),videojs$1.use||(videojs$1.registerComponent("Hls",ll),videojs$1.registerComponent("Vhs",ll)),videojs$1.options.vhs=videojs$1.options.vhs||{},videojs$1.options.hls=videojs$1.options.hls||{},videojs$1.registerPlugin?videojs$1.registerPlugin("reloadSourceOnError",sl):videojs$1.plugin("reloadSourceOnError",sl);var gl=videojs$1},91893:function(i,s,_){var T,S,C;C=function(i){"use strict";"undefined"!=typeof window&&(window.videojs_hotkeys={version:"0.2.27"}),(i.registerPlugin||i.plugin)("hotkeys",(function(s){function n(i){return"function"==typeof O?O(i):O}function o(i){null!=i&&"function"==typeof i.then&&i.then(null,(function(i){}))}var _=this,T=_.el(),S=document,C=i.mergeOptions||i.util.mergeOptions,P=(s=C({volumeStep:.1,seekStep:5,enableMute:!0,enableVolumeScroll:!0,enableHoverScroll:!1,enableFullscreen:!0,enableNumbers:!0,enableJogStyle:!1,alwaysCaptureHotkeys:!1,captureDocumentHotkeys:!1,documentHotkeysFocusElementFilter:function(){return!1},enableModifiersForNumbers:!0,enableInactiveFocus:!0,skipInitialFocus:!1,playPauseKey:function(i){return 32===i.which||179===i.which},rewindKey:function(i){return 37===i.which||177===i.which},forwardKey:function(i){return 39===i.which||176===i.which},volumeUpKey:function(i){return 38===i.which},volumeDownKey:function(i){return 40===i.which},muteKey:function(i){return 77===i.which},fullscreenKey:function(i){return 70===i.which},customKeys:{}},s||{})).volumeStep,O=s.seekStep,M=s.enableMute,R=s.enableVolumeScroll,D=s.enableHoverScroll,j=s.enableFullscreen,$=s.enableNumbers,U=s.enableJogStyle,V=s.alwaysCaptureHotkeys,Z=s.captureDocumentHotkeys,Y=s.documentHotkeysFocusElementFilter,X=s.enableModifiersForNumbers,Q=s.enableInactiveFocus,ee=s.skipInitialFocus,te=i.VERSION;T.hasAttribute("tabIndex")||T.setAttribute("tabIndex","-1"),T.style.outline="none",!V&&_.autoplay()||ee||_.one("play",(function(){T.focus()})),Q&&_.on("userinactive",(function(){var e=function(){clearTimeout(i)},i=setTimeout((function(){_.off("useractive",e);var i=S.activeElement,s=T.querySelector(".vjs-control-bar");i&&i.parentElement==s&&T.focus()}),10);_.one("useractive",e)})),_.on("play",(function(){var i=T.querySelector(".iframeblocker");i&&""===i.style.display&&(i.style.display="block",i.style.bottom="39px")}));var q=function(i){var C,O,R=i.which,D=i.preventDefault.bind(i),Q=_.duration();if(_.controls()){var ee=S.activeElement;if(V||Z&&Y(ee)||ee==T||ee==T.querySelector(".vjs-tech")||ee==T.querySelector(".vjs-control-bar")||ee==T.querySelector(".iframeblocker"))switch(g(i,_)){case 1:D(),(V||Z)&&i.stopPropagation(),_.paused()?o(_.play()):_.pause();break;case 2:C=!_.paused(),D(),C&&_.pause(),(O=_.currentTime()-n(i))<=0&&(O=0),_.currentTime(O),C&&o(_.play());break;case 3:C=!_.paused(),D(),C&&_.pause(),(O=_.currentTime()+n(i))>=Q&&(O=C?Q-.001:Q),_.currentTime(O),C&&o(_.play());break;case 5:D(),U?(O=_.currentTime()-1,_.currentTime()<=1&&(O=0),_.currentTime(O)):_.volume(_.volume()-P);break;case 4:D(),U?((O=_.currentTime()+1)>=Q&&(O=Q),_.currentTime(O)):_.volume(_.volume()+P);break;case 6:M&&_.muted(!_.muted());break;case 7:j&&(_.isFullscreen()?_.exitFullscreen():_.requestFullscreen());break;default:if((R>47&&R<59||R>95&&R<106)&&(X||!(i.metaKey||i.ctrlKey||i.altKey))&&$){var te=48;R>95&&(te=96);var ne=R-te;D(),_.currentTime(_.duration()*ne*.1)}for(var re in s.customKeys){var ie=s.customKeys[re];ie&&ie.key&&ie.handler&&ie.key(i)&&(D(),ie.handler(_,s,i))}}}},ne=!1,re=T.querySelector(".vjs-volume-menu-button")||T.querySelector(".vjs-volume-panel");null!=re&&(re.onmouseover=function(){ne=!0},re.onmouseout=function(){ne=!1});var E=function(i){if(D)s=0;else var s=S.activeElement;if(_.controls()&&(V||s==T||s==T.querySelector(".vjs-tech")||s==T.querySelector(".iframeblocker")||s==T.querySelector(".vjs-control-bar")||ne)&&R){i=window.event||i;var C=Math.max(-1,Math.min(1,i.wheelDelta||-i.detail));i.preventDefault(),1==C?_.volume(_.volume()+P):-1==C&&_.volume(_.volume()-P)}},g=function(i,_){return s.playPauseKey(i,_)?1:s.rewindKey(i,_)?2:s.forwardKey(i,_)?3:s.volumeUpKey(i,_)?4:s.volumeDownKey(i,_)?5:s.muteKey(i,_)?6:s.fullscreenKey(i,_)?7:void 0};return _.on("keydown",q),_.on("dblclick",(function(i){if(null!=te&&te<="7.1.0"&&_.controls()){var s=i.relatedTarget||i.toElement||S.activeElement;s!=T&&s!=T.querySelector(".vjs-tech")&&s!=T.querySelector(".iframeblocker")||j&&(_.isFullscreen()?_.exitFullscreen():_.requestFullscreen())}})),_.on("mousewheel",E),_.on("DOMMouseScroll",E),Z&&document.addEventListener("keydown",(function(i){q(i)})),this}))},"undefined"!=typeof window&&window.videojs?C(window.videojs):(T=[_(93633)],S=function(i){return C(i.default||i)}.apply(s,T),void 0===S||(i.exports=S))},13407:function(i,s,_){var T=_(58908),S=i.exports={WebVTT:_(63706),VTTCue:_(22230),VTTRegion:_(13710)};T.vttjs=S,T.WebVTT=S.WebVTT;var C=S.VTTCue,P=S.VTTRegion,O=T.VTTCue,M=T.VTTRegion;S.shim=function(){T.VTTCue=C,T.VTTRegion=P},S.restore=function(){T.VTTCue=O,T.VTTRegion=M},T.VTTCue||S.shim()},63706:function(i,s,_){var T=_(89144),S=Object.create||function(){function F(){}return function(i){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return F.prototype=i,new F}}();function ParsingError(i,s){this.name="ParsingError",this.code=i.code,this.message=s||i.message}function parseTimeStamp(i){function computeSeconds(i,s,_,T){return 3600*(0|i)+60*(0|s)+(0|_)+(0|T)/1e3}var s=i.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return s?s[3]?computeSeconds(s[1],s[2],s[3].replace(":",""),s[4]):s[1]>59?computeSeconds(s[1],s[2],0,s[4]):computeSeconds(0,s[1],s[2],s[4]):null}function Settings(){this.values=S(null)}function parseOptions(i,s,_,T){var S=T?i.split(T):[i];for(var C in S)if("string"==typeof S[C]){var P=S[C].split(_);if(2===P.length)s(P[0],P[1])}}function parseCue(i,s,_){var T=i;function consumeTimeStamp(){var s=parseTimeStamp(i);if(null===s)throw new ParsingError(ParsingError.Errors.BadTimeStamp,"Malformed timestamp: "+T);return i=i.replace(/^[^\sa-zA-Z-]+/,""),s}function skipWhitespace(){i=i.replace(/^\s+/,"")}if(skipWhitespace(),s.startTime=consumeTimeStamp(),skipWhitespace(),"--\x3e"!==i.substr(0,3))throw new ParsingError(ParsingError.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+T);i=i.substr(3),skipWhitespace(),s.endTime=consumeTimeStamp(),skipWhitespace(),function consumeCueSettings(i,s){var T=new Settings;parseOptions(i,(function(i,s){switch(i){case"region":for(var S=_.length-1;S>=0;S--)if(_[S].id===s){T.set(i,_[S].region);break}break;case"vertical":T.alt(i,s,["rl","lr"]);break;case"line":var C=s.split(","),P=C[0];T.integer(i,P),T.percent(i,P)&&T.set("snapToLines",!1),T.alt(i,P,["auto"]),2===C.length&&T.alt("lineAlign",C[1],["start","center","end"]);break;case"position":C=s.split(","),T.percent(i,C[0]),2===C.length&&T.alt("positionAlign",C[1],["start","center","end"]);break;case"size":T.percent(i,s);break;case"align":T.alt(i,s,["start","center","end","left","right"])}}),/:/,/\s/),s.region=T.get("region",null),s.vertical=T.get("vertical","");try{s.line=T.get("line","auto")}catch(S){}s.lineAlign=T.get("lineAlign","start"),s.snapToLines=T.get("snapToLines",!0),s.size=T.get("size",100);try{s.align=T.get("align","center")}catch(S){s.align=T.get("align","middle")}try{s.position=T.get("position","auto")}catch(S){s.position=T.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},s.align)}s.positionAlign=T.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},s.align)}(i,s)}ParsingError.prototype=S(Error.prototype),ParsingError.prototype.constructor=ParsingError,ParsingError.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},Settings.prototype={set:function(i,s){this.get(i)||""===s||(this.values[i]=s)},get:function(i,s,_){return _?this.has(i)?this.values[i]:s[_]:this.has(i)?this.values[i]:s},has:function(i){return i in this.values},alt:function(i,s,_){for(var T=0;T<_.length;++T)if(s===_[T]){this.set(i,s);break}},integer:function(i,s){/^-?\d+$/.test(s)&&this.set(i,parseInt(s,10))},percent:function(i,s){return!!(s.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(s=parseFloat(s))>=0&&s<=100)&&(this.set(i,s),!0)}};var C=T.createElement&&T.createElement("textarea"),P={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},O={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},M={v:"title",lang:"lang"},R={rt:"ruby"};function parseContent(i,s){function nextToken(){if(!s)return null;var i=s.match(/^([^<]*)(<[^>]*>?)?/);return function consume(i){return s=s.substr(i.length),i}(i[1]?i[1]:i[2])}function shouldAdd(i,s){return!R[s.localName]||R[s.localName]===i.localName}function createElement(s,_){var T=P[s];if(!T)return null;var S=i.document.createElement(T),C=M[s];return C&&_&&(S[C]=_.trim()),S}for(var _,T,S=i.document.createElement("div"),D=S,j=[];null!==(_=nextToken());)if("<"!==_[0])D.appendChild(i.document.createTextNode((T=_,C.innerHTML=T,T=C.textContent,C.textContent="",T)));else{if("/"===_[1]){j.length&&j[j.length-1]===_.substr(2).replace(">","")&&(j.pop(),D=D.parentNode);continue}var $,U=parseTimeStamp(_.substr(1,_.length-2));if(U){$=i.document.createProcessingInstruction("timestamp",U),D.appendChild($);continue}var V=_.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!V)continue;if(!($=createElement(V[1],V[3])))continue;if(!shouldAdd(D,$))continue;if(V[2]){var Z=V[2].split(".");Z.forEach((function(i){var s=/^bg_/.test(i),_=s?i.slice(3):i;if(O.hasOwnProperty(_)){var T=s?"background-color":"color",S=O[_];$.style[T]=S}})),$.className=Z.join(" ")}j.push(V[1]),D.appendChild($),D=$}return S}var D=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function isStrongRTLChar(i){for(var s=0;s<D.length;s++){var _=D[s];if(i>=_[0]&&i<=_[1])return!0}return!1}function determineBidi(i){var s=[],_="";if(!i||!i.childNodes)return"ltr";function pushNodes(i,s){for(var _=s.childNodes.length-1;_>=0;_--)i.push(s.childNodes[_])}function nextTextNode(i){if(!i||!i.length)return null;var s=i.pop(),_=s.textContent||s.innerText;if(_){var T=_.match(/^.*(\n|\r)/);return T?(i.length=0,T[0]):_}return"ruby"===s.tagName?nextTextNode(i):s.childNodes?(pushNodes(i,s),nextTextNode(i)):void 0}for(pushNodes(s,i);_=nextTextNode(s);)for(var T=0;T<_.length;T++)if(isStrongRTLChar(_.charCodeAt(T)))return"rtl";return"ltr"}function StyleBox(){}function CueStyleBox(i,s,_){StyleBox.call(this),this.cue=s,this.cueDiv=parseContent(i,s.text);var T={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===s.vertical?"horizontal-tb":"lr"===s.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(T,this.cueDiv),this.div=i.document.createElement("div"),T={direction:determineBidi(this.cueDiv),writingMode:""===s.vertical?"horizontal-tb":"lr"===s.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===s.align?"center":s.align,font:_.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(T),this.div.appendChild(this.cueDiv);var S=0;switch(s.positionAlign){case"start":S=s.position;break;case"center":S=s.position-s.size/2;break;case"end":S=s.position-s.size}""===s.vertical?this.applyStyles({left:this.formatStyle(S,"%"),width:this.formatStyle(s.size,"%")}):this.applyStyles({top:this.formatStyle(S,"%"),height:this.formatStyle(s.size,"%")}),this.move=function(i){this.applyStyles({top:this.formatStyle(i.top,"px"),bottom:this.formatStyle(i.bottom,"px"),left:this.formatStyle(i.left,"px"),right:this.formatStyle(i.right,"px"),height:this.formatStyle(i.height,"px"),width:this.formatStyle(i.width,"px")})}}function BoxPosition(i){var s,_,T,S;if(i.div){_=i.div.offsetHeight,T=i.div.offsetWidth,S=i.div.offsetTop;var C=(C=i.div.childNodes)&&(C=C[0])&&C.getClientRects&&C.getClientRects();i=i.div.getBoundingClientRect(),s=C?Math.max(C[0]&&C[0].height||0,i.height/C.length):0}this.left=i.left,this.right=i.right,this.top=i.top||S,this.height=i.height||_,this.bottom=i.bottom||S+(i.height||_),this.width=i.width||T,this.lineHeight=void 0!==s?s:i.lineHeight}function moveBoxToLinePosition(i,s,_,T){var S=new BoxPosition(s),C=s.cue,P=function computeLinePos(i){if("number"==typeof i.line&&(i.snapToLines||i.line>=0&&i.line<=100))return i.line;if(!i.track||!i.track.textTrackList||!i.track.textTrackList.mediaElement)return-1;for(var s=i.track,_=s.textTrackList,T=0,S=0;S<_.length&&_[S]!==s;S++)"showing"===_[S].mode&&T++;return-1*++T}(C),O=[];if(C.snapToLines){var M;switch(C.vertical){case"":O=["+y","-y"],M="height";break;case"rl":O=["+x","-x"],M="width";break;case"lr":O=["-x","+x"],M="width"}var R=S.lineHeight,D=R*Math.round(P),j=_[M]+R,$=O[0];Math.abs(D)>j&&(D=D<0?-1:1,D*=Math.ceil(j/R)*R),P<0&&(D+=""===C.vertical?_.height:_.width,O=O.reverse()),S.move($,D)}else{var U=S.lineHeight/_.height*100;switch(C.lineAlign){case"center":P-=U/2;break;case"end":P-=U}switch(C.vertical){case"":s.applyStyles({top:s.formatStyle(P,"%")});break;case"rl":s.applyStyles({left:s.formatStyle(P,"%")});break;case"lr":s.applyStyles({right:s.formatStyle(P,"%")})}O=["+y","-x","+x","-y"],S=new BoxPosition(s)}var V=function findBestPosition(i,s){for(var S,C=new BoxPosition(i),P=1,O=0;O<s.length;O++){for(;i.overlapsOppositeAxis(_,s[O])||i.within(_)&&i.overlapsAny(T);)i.move(s[O]);if(i.within(_))return i;var M=i.intersectPercentage(_);P>M&&(S=new BoxPosition(i),P=M),i=new BoxPosition(C)}return S||C}(S,O);s.move(V.toCSSCompatValues(_))}function WebVTT(){}StyleBox.prototype.applyStyles=function(i,s){for(var _ in s=s||this.div,i)i.hasOwnProperty(_)&&(s.style[_]=i[_])},StyleBox.prototype.formatStyle=function(i,s){return 0===i?0:i+s},CueStyleBox.prototype=S(StyleBox.prototype),CueStyleBox.prototype.constructor=CueStyleBox,BoxPosition.prototype.move=function(i,s){switch(s=void 0!==s?s:this.lineHeight,i){case"+x":this.left+=s,this.right+=s;break;case"-x":this.left-=s,this.right-=s;break;case"+y":this.top+=s,this.bottom+=s;break;case"-y":this.top-=s,this.bottom-=s}},BoxPosition.prototype.overlaps=function(i){return this.left<i.right&&this.right>i.left&&this.top<i.bottom&&this.bottom>i.top},BoxPosition.prototype.overlapsAny=function(i){for(var s=0;s<i.length;s++)if(this.overlaps(i[s]))return!0;return!1},BoxPosition.prototype.within=function(i){return this.top>=i.top&&this.bottom<=i.bottom&&this.left>=i.left&&this.right<=i.right},BoxPosition.prototype.overlapsOppositeAxis=function(i,s){switch(s){case"+x":return this.left<i.left;case"-x":return this.right>i.right;case"+y":return this.top<i.top;case"-y":return this.bottom>i.bottom}},BoxPosition.prototype.intersectPercentage=function(i){return Math.max(0,Math.min(this.right,i.right)-Math.max(this.left,i.left))*Math.max(0,Math.min(this.bottom,i.bottom)-Math.max(this.top,i.top))/(this.height*this.width)},BoxPosition.prototype.toCSSCompatValues=function(i){return{top:this.top-i.top,bottom:i.bottom-this.bottom,left:this.left-i.left,right:i.right-this.right,height:this.height,width:this.width}},BoxPosition.getSimpleBoxPosition=function(i){var s=i.div?i.div.offsetHeight:i.tagName?i.offsetHeight:0,_=i.div?i.div.offsetWidth:i.tagName?i.offsetWidth:0,T=i.div?i.div.offsetTop:i.tagName?i.offsetTop:0;return{left:(i=i.div?i.div.getBoundingClientRect():i.tagName?i.getBoundingClientRect():i).left,right:i.right,top:i.top||T,height:i.height||s,bottom:i.bottom||T+(i.height||s),width:i.width||_}},WebVTT.StringDecoder=function(){return{decode:function(i){if(!i)return"";if("string"!=typeof i)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(i))}}},WebVTT.convertCueToDOMTree=function(i,s){return i&&s?parseContent(i,s):null};WebVTT.processCues=function(i,s,_){if(!i||!s||!_)return null;for(;_.firstChild;)_.removeChild(_.firstChild);var T=i.document.createElement("div");if(T.style.position="absolute",T.style.left="0",T.style.right="0",T.style.top="0",T.style.bottom="0",T.style.margin="1.5%",_.appendChild(T),function shouldCompute(i){for(var s=0;s<i.length;s++)if(i[s].hasBeenReset||!i[s].displayState)return!0;return!1}(s)){var S=[],C=BoxPosition.getSimpleBoxPosition(T),P={font:Math.round(.05*C.height*100)/100+"px sans-serif"};!function(){for(var _,O,M=0;M<s.length;M++)O=s[M],_=new CueStyleBox(i,O,P),T.appendChild(_.div),moveBoxToLinePosition(0,_,C,S),O.displayState=_.div,S.push(BoxPosition.getSimpleBoxPosition(_))}()}else for(var O=0;O<s.length;O++)T.appendChild(s[O].displayState)},WebVTT.Parser=function(i,s,_){_||(_=s,s={}),s||(s={}),this.window=i,this.vttjs=s,this.state="INITIAL",this.buffer="",this.decoder=_||new TextDecoder("utf8"),this.regionList=[]},WebVTT.Parser.prototype={reportOrThrowError:function(i){if(!(i instanceof ParsingError))throw i;this.onparsingerror&&this.onparsingerror(i)},parse:function(i){var s=this;function collectNextLine(){for(var i=s.buffer,_=0;_<i.length&&"\r"!==i[_]&&"\n"!==i[_];)++_;var T=i.substr(0,_);return"\r"===i[_]&&++_,"\n"===i[_]&&++_,s.buffer=i.substr(_),T}function parseHeader(i){i.match(/X-TIMESTAMP-MAP/)?parseOptions(i,(function(i,_){if("X-TIMESTAMP-MAP"===i)!function parseTimestampMap(i){var _=new Settings;parseOptions(i,(function(i,s){switch(i){case"MPEGT":_.integer(i+"S",s);break;case"LOCA":_.set(i+"L",parseTimeStamp(s))}}),/[^\d]:/,/,/),s.ontimestampmap&&s.ontimestampmap({MPEGTS:_.get("MPEGTS"),LOCAL:_.get("LOCAL")})}(_)}),/=/):parseOptions(i,(function(i,_){if("Region"===i)!function parseRegion(i){var _=new Settings;if(parseOptions(i,(function(i,s){switch(i){case"id":_.set(i,s);break;case"width":_.percent(i,s);break;case"lines":_.integer(i,s);break;case"regionanchor":case"viewportanchor":var T=s.split(",");if(2!==T.length)break;var S=new Settings;if(S.percent("x",T[0]),S.percent("y",T[1]),!S.has("x")||!S.has("y"))break;_.set(i+"X",S.get("x")),_.set(i+"Y",S.get("y"));break;case"scroll":_.alt(i,s,["up"])}}),/=/,/\s/),_.has("id")){var T=new(s.vttjs.VTTRegion||s.window.VTTRegion);T.width=_.get("width",100),T.lines=_.get("lines",3),T.regionAnchorX=_.get("regionanchorX",0),T.regionAnchorY=_.get("regionanchorY",100),T.viewportAnchorX=_.get("viewportanchorX",0),T.viewportAnchorY=_.get("viewportanchorY",100),T.scroll=_.get("scroll",""),s.onregion&&s.onregion(T),s.regionList.push({id:_.get("id"),region:T})}}(_)}),/:/)}i&&(s.buffer+=s.decoder.decode(i,{stream:!0}));try{var _;if("INITIAL"===s.state){if(!/\r\n|\n/.test(s.buffer))return this;var T=(_=collectNextLine()).match(/^WEBVTT([ \t].*)?$/);if(!T||!T[0])throw new ParsingError(ParsingError.Errors.BadSignature);s.state="HEADER"}for(var S=!1;s.buffer;){if(!/\r\n|\n/.test(s.buffer))return this;switch(S?S=!1:_=collectNextLine(),s.state){case"HEADER":/:/.test(_)?parseHeader(_):_||(s.state="ID");continue;case"NOTE":_||(s.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(_)){s.state="NOTE";break}if(!_)continue;s.cue=new(s.vttjs.VTTCue||s.window.VTTCue)(0,0,"");try{s.cue.align="center"}catch(P){s.cue.align="middle"}if(s.state="CUE",-1===_.indexOf("--\x3e")){s.cue.id=_;continue}case"CUE":try{parseCue(_,s.cue,s.regionList)}catch(P){s.reportOrThrowError(P),s.cue=null,s.state="BADCUE";continue}s.state="CUETEXT";continue;case"CUETEXT":var C=-1!==_.indexOf("--\x3e");if(!_||C&&(S=!0)){s.oncue&&s.oncue(s.cue),s.cue=null,s.state="ID";continue}s.cue.text&&(s.cue.text+="\n"),s.cue.text+=_.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":_||(s.state="ID");continue}}}catch(P){s.reportOrThrowError(P),"CUETEXT"===s.state&&s.cue&&s.oncue&&s.oncue(s.cue),s.cue=null,s.state="INITIAL"===s.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var i=this;try{if(i.buffer+=i.decoder.decode(),(i.cue||"HEADER"===i.state)&&(i.buffer+="\n\n",i.parse()),"INITIAL"===i.state)throw new ParsingError(ParsingError.Errors.BadSignature)}catch(s){i.reportOrThrowError(s)}return i.onflush&&i.onflush(),this}},i.exports=WebVTT},22230:function(i){var s={"":1,lr:1,rl:1},_={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function findAlignSetting(i){return"string"==typeof i&&(!!_[i.toLowerCase()]&&i.toLowerCase())}function VTTCue(i,_,T){this.hasBeenReset=!1;var S="",C=!1,P=i,O=_,M=T,R=null,D="",j=!0,$="auto",U="start",V="auto",Z="auto",Y=100,X="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return S},set:function(i){S=""+i}},pauseOnExit:{enumerable:!0,get:function(){return C},set:function(i){C=!!i}},startTime:{enumerable:!0,get:function(){return P},set:function(i){if("number"!=typeof i)throw new TypeError("Start time must be set to a number.");P=i,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return O},set:function(i){if("number"!=typeof i)throw new TypeError("End time must be set to a number.");O=i,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return M},set:function(i){M=""+i,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return R},set:function(i){R=i,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return D},set:function(i){var _=function findDirectionSetting(i){return"string"==typeof i&&!!s[i.toLowerCase()]&&i.toLowerCase()}(i);if(!1===_)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");D=_,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return j},set:function(i){j=!!i,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return $},set:function(i){if("number"!=typeof i&&"auto"!==i)throw new SyntaxError("Line: an invalid number or illegal string was specified.");$=i,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return U},set:function(i){var s=findAlignSetting(i);s?(U=s,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return V},set:function(i){if(i<0||i>100)throw new Error("Position must be between 0 and 100.");V=i,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return Z},set:function(i){var s=findAlignSetting(i);s?(Z=s,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return Y},set:function(i){if(i<0||i>100)throw new Error("Size must be between 0 and 100.");Y=i,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return X},set:function(i){var s=findAlignSetting(i);if(!s)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");X=s,this.hasBeenReset=!0}}}),this.displayState=void 0}VTTCue.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},i.exports=VTTCue},13710:function(i){var s={"":!0,up:!0};function isValidPercentValue(i){return"number"==typeof i&&i>=0&&i<=100}i.exports=function VTTRegion(){var i=100,_=3,T=0,S=100,C=0,P=100,O="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return i},set:function(s){if(!isValidPercentValue(s))throw new Error("Width must be between 0 and 100.");i=s}},lines:{enumerable:!0,get:function(){return _},set:function(i){if("number"!=typeof i)throw new TypeError("Lines must be set to a number.");_=i}},regionAnchorY:{enumerable:!0,get:function(){return S},set:function(i){if(!isValidPercentValue(i))throw new Error("RegionAnchorX must be between 0 and 100.");S=i}},regionAnchorX:{enumerable:!0,get:function(){return T},set:function(i){if(!isValidPercentValue(i))throw new Error("RegionAnchorY must be between 0 and 100.");T=i}},viewportAnchorY:{enumerable:!0,get:function(){return P},set:function(i){if(!isValidPercentValue(i))throw new Error("ViewportAnchorY must be between 0 and 100.");P=i}},viewportAnchorX:{enumerable:!0,get:function(){return C},set:function(i){if(!isValidPercentValue(i))throw new Error("ViewportAnchorX must be between 0 and 100.");C=i}},scroll:{enumerable:!0,get:function(){return O},set:function(i){var _=function findScrollSetting(i){return"string"==typeof i&&!!s[i.toLowerCase()]&&i.toLowerCase()}(i);!1===_?console.warn("Scroll: an invalid or illegal string was specified."):O=_}}})}},28681:function(i,s,_){"use strict";var T=_(75844),S=_(76182),C=_(11788);var P=(0,_(51900).Z)(S.Z,T.s,T.x,!1,(function injectStyles(i){this.$style=C.Z.locals||C.Z}),null,null);s.Z=P.exports},76855:function(i,s,_){"use strict";var T=_(53296),S=_(36310),C=_(96939);var P=(0,_(51900).Z)(S.Z,T.s,T.x,!1,(function injectStyles(i){this.$style=C.Z.locals||C.Z}),null,null);s.Z=P.exports},93819:function(i,s,_){"use strict";var T=_(71120),S=_(70370),C=_(60870);var P=(0,_(51900).Z)(S.Z,T.s,T.x,!1,(function injectStyles(i){this.$style=C.Z.locals||C.Z}),null,null);s.Z=P.exports},7537:function(i,s,_){"use strict";var T=_(78673),S=_(57166),C=_(59169);var P=(0,_(51900).Z)(S.Z,T.s,T.x,!1,(function injectStyles(i){this.$style=C.Z.locals||C.Z}),null,null);s.Z=P.exports},36222:function(i,s,_){"use strict";var T=_(5168),S=_(6958),C=_(69195);var P=(0,_(51900).Z)(S.Z,T.s,T.x,!1,(function injectStyles(i){this.$style=C.Z.locals||C.Z}),null,null);s.Z=P.exports},26208:function(i,s,_){"use strict";var T=_(87002),S=_(40947),C=_(72041);var P=(0,_(51900).Z)(S.Z,T.s,T.x,!1,(function injectStyles(i){this.$style=C.Z.locals||C.Z}),null,null);s.Z=P.exports},25332:function(i,s,_){"use strict";var T=_(61715),S=_(54936),C=_(12164);var P=(0,_(51900).Z)(S.Z,T.s,T.x,!1,(function injectStyles(i){this.$style=C.Z.locals||C.Z}),null,null);s.Z=P.exports},71122:function(i,s,_){"use strict";var T=_(22369),S=_(86874),C=_(56438);var P=(0,_(51900).Z)(S.Z,T.s,T.x,!1,(function injectStyles(i){this.$style=C.Z.locals||C.Z}),null,null);s.Z=P.exports},14527:function(i,s,_){"use strict";var T=_(35047),S=_(5705),C=_(88990);var P=(0,_(51900).Z)(S.Z,T.s,T.x,!1,(function injectStyles(i){this.$style=C.Z.locals||C.Z}),null,null);s.Z=P.exports},28669:function(i,s,_){"use strict";var T=_(63448),S=_(48057),C=_(87048);var P=(0,_(51900).Z)(S.Z,T.s,T.x,!1,(function injectStyles(i){this.$style=C.Z.locals||C.Z}),null,null);s.Z=P.exports},69848:function(i,s,_){"use strict";_.d(s,{Z:function(){return C}});var T={name:"FormCheckbox",mixins:[_(69947).Z],props:{disabled:{type:Boolean,default:!1},id:{type:String},label:{type:String,required:!0},name:{type:String,required:!0},value:{type:Boolean,required:!0}},emits:["input"],methods:{setCheckboxStatus(i){this.$emit("input",i)}}},S={component:"form-checkbox-component",label:"form-checkbox-label",checkbox:"form-checkbox-checkbox"};var C=(0,_(51900).Z)(T,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:[i.$style.component,i.themeClasses]},[_("input",{class:i.$style.checkbox,attrs:{id:i.id||i.name,type:"checkbox",disabled:i.disabled,name:i.name},domProps:{checked:i.value},on:{change:function(s){return i.setCheckboxStatus(s.target.checked)}}}),i._v(" "),_("label",{class:i.$style.label,attrs:{for:i.name}},[i._v("\n    "+i._s(i.label)+"\n  ")])])}),[],!1,(function injectStyles(i){this.$style=S.locals||S}),null,null).exports},84960:function(i,s,_){"use strict";_.d(s,{Z:function(){return S}});var T={name:"IconFont",props:{isDarkMode:{type:Boolean,default:!1},name:{type:String,required:!0},theme:{type:String,default:""}},computed:{iconFamilyTheme(){return this.theme?`icon-font-${this.theme}`:""}}},S=(0,_(51900).Z)(T,(function(){var i,s=this,_=s.$createElement,T=s._self._c||_;return T("div",s._g({class:["icon-font-component",(i={},i["icon-font-darkMode"]=s.isDarkMode,i)]},s.$listeners),[T("span",{class:["icon-font-chess",s.name,s.iconFamilyTheme]})])}),[],!1,null,null,null).exports},87879:function(i,s,_){"use strict";_.d(s,{Z:function(){return C}});var T={name:"LoaderThreeBounce",props:{isCircle:{type:Boolean,default:!1},size:{type:Number,default:80}},computed:{dotCss(){const i=`${Math.round(this.size/4)}px`;return{width:i,height:i}}}},S={component:"loader-three-bounce-component",circle:"loader-three-bounce-circle",dot:"loader-three-bounce-dot",animate:"loader-three-bounce-animate",bounce1:"loader-three-bounce-bounce1",bounce2:"loader-three-bounce-bounce2"};var C=(0,_(51900).Z)(T,(function(){var i,s=this,_=s.$createElement,T=s._self._c||_;return T("div",{class:[s.$style.component,(i={},i[s.$style.circle]=s.isCircle,i)],style:{width:s.size+"px"},attrs:{"data-test-element":"loader-three-bounce"}},[T("div",{class:[s.$style.dot,s.$style.bounce1],style:s.dotCss}),s._v(" "),T("div",{class:[s.$style.dot,s.$style.bounce2],style:s.dotCss}),s._v(" "),T("div",{class:s.$style.dot,style:s.dotCss})])}),[],!1,(function injectStyles(i){this.$style=S.locals||S}),null,null).exports},43106:function(i,s,_){"use strict";_.d(s,{Z:function(){return P}});var T=_(5556),S={name:"ModalContainer",props:{autoShow:{type:Boolean,default:!1},closeOnBackgroundClick:{type:Boolean,default:!0},closeOnEscPress:{type:Boolean,default:!1},centerOverParent:{type:Boolean,default:!1},centerOverContent:{type:Boolean,default:!1}},emits:["background-clicked"],data:()=>({visible:!1}),mounted(){this.closeOnEscPress&&window.addEventListener("keyup",this.onKeyPress),this.autoShow&&this.show()},beforeDestroy(){this.closeOnEscPress&&window.removeEventListener("keyup",this.onKeyPress)},methods:{hide(){this.visible=!1,this.$emit(T.U3.MODAL_DID_HIDE)},onBackgroundClick(){this.closeOnBackgroundClick&&(this.hide(),this.$emit("background-clicked"))},onKeyPress(i){27===i.keyCode&&this.hide()},show(){this.visible=!0}}},C={component:"modal-container-component","parent-centered":"modal-container-parent-centered",bg:"modal-container-bg",enter:"modal-container-enter",leave:"modal-container-leave","content-centered":"modal-container-content-centered"};var P=(0,_(51900).Z)(S,(function(){var i,s,_=this,T=_.$createElement,S=_._self._c||T;return S("transition",{attrs:{"enter-active-class":_.$style.enter,"leave-active-class":_.$style.leave}},[_.visible?S("div",{class:[_.$style.component,(i={},i[_.$style["parent-centered"]]=_.centerOverParent,i),(s={},s[_.$style["content-centered"]]=_.centerOverContent,s)]},[_.centerOverParent?_._e():S("div",{class:_.$style.bg,on:{click:_.onBackgroundClick}}),_._v(" "),_._t("default")],2):_._e()])}),[],!1,(function injectStyles(i){this.$style=C.locals||C}),null,null).exports},38847:function(i,s,_){"use strict";_.d(s,{Z:function(){return C}});var T={name:"ModalContent",components:{SectionContainer:_(86706).Z},props:{overflow:String}},S={component:"modal-content-component"};var C=(0,_(51900).Z)(T,(function(){var i=this,s=i.$createElement;return(i._self._c||s)("section-container",{class:i.$style.component,attrs:{"light-mode":"",overflow:i.overflow}},[i._t("default")],2)}),[],!1,(function injectStyles(i){this.$style=S.locals||S}),null,null).exports},11748:function(i,s,_){"use strict";_.d(s,{Z:function(){return Y}});var T=_(86437),S=_(5556),C=_(16374),P=_(5986),O={name:"TrialSlideshow",props:{slides:{type:Array,required:!0}},data:()=>({currentSlide:{},timer:null,rotationInterval:5e3}),computed:{visibleSlides(){return this.slides.filter((i=>{var s;return i.icon===(null==(s=this.currentSlide)?void 0:s.icon)}))}},created(){this.currentSlide=this.slides[0]},mounted(){this.startRotation(),this.rotationInterval=3500},beforeDestroy(){this.clearTimeout()},methods:{clearTimeout(){clearTimeout(this.timer)},handleClick(i){this.jump(i),this.clearTimeout()},startRotation(){this.clearTimeout(),this.timer=setTimeout(this.next,this.rotationInterval)},next(){const i=this.slides.indexOf(this.currentSlide);let s={};s=i===this.slides.length-1?this.slides[0]:this.slides[i+1],this.jump(s)},jump(i){this.currentSlide=i,this.startRotation()}}},M={component:"trial-slideshow-component","slideshow-container":"trial-slideshow-slideshow-container",slide:"trial-slideshow-slide",dots:"trial-slideshow-dots",dot:"trial-slideshow-dot",active:"trial-slideshow-active","upgrade-icon":"trial-slideshow-upgrade-icon","upgrade-icon-bg":"trial-slideshow-upgrade-icon-bg","upgrade-icon-img":"trial-slideshow-upgrade-icon-img","sprite-lessons":"trial-slideshow-sprite-lessons","sprite-puzzles-battle":"trial-slideshow-sprite-puzzles-battle","sprite-no-ads":"trial-slideshow-sprite-no-ads","sprite-flair":"trial-slideshow-sprite-flair","sprite-puzzles-learning":"trial-slideshow-sprite-puzzles-learning","sprite-analysis":"trial-slideshow-sprite-analysis","sprite-puzzles-rush":"trial-slideshow-sprite-puzzles-rush","sprite-stats":"trial-slideshow-sprite-stats","sprite-pawn":"trial-slideshow-sprite-pawn","sprite-explorer":"trial-slideshow-sprite-explorer","sprite-workout":"trial-slideshow-sprite-workout","sprite-computer":"trial-slideshow-sprite-computer","sprite-library":"trial-slideshow-sprite-library","sprite-daily-puzzle":"trial-slideshow-sprite-daily-puzzle","slide-title":"trial-slideshow-slide-title","slide-subtitle":"trial-slideshow-slide-subtitle"},R=_(51900);var D=(0,R.Z)(O,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("transition-group",{class:i.$style["slideshow-container"],attrs:{"enter-active-class":"animated slide-in-active","enter-class":"slide-in","leave-active-class":"animated slide-out-active","leave-class":"slide-out",name:"slide",tag:"div"}},i._l(i.visibleSlides,(function(s){return _("div",{key:s.icon,class:i.$style.slide},[_("div",{class:i.$style["upgrade-icon"]},[_("div",{class:i.$style["upgrade-icon-bg"]}),i._v(" "),_("div",{class:[i.$style["upgrade-icon-img"],i.$style["sprite-"+s.icon]]})]),i._v(" "),_("h2",{class:i.$style["slide-title"],domProps:{textContent:i._s(s.title)}}),i._v(" "),_("h3",{class:i.$style["slide-subtitle"],domProps:{textContent:i._s(s.subtitle)}})])})),0),i._v(" "),_("div",{class:i.$style.dots},i._l(i.slides,(function(s){var T;return _("span",{key:s.icon,class:[i.$style.dot,(T={},T[i.$style.active]=s.icon===i.currentSlide.icon,T)],on:{click:function(_){return i.handleClick(s)}}})})),0)],1)}),[],!1,(function injectStyles(i){this.$style=M.locals||M}),null,null).exports,j=_(25014),$=_(32305);const URLSearchParamEntries=(i=window.location.search)=>[...new URLSearchParams(i).entries()].reduce(((i,[s,_])=>Object.assign({[s]:_},i)),{});var U=_(99644),V={name:"ModalTrial",components:{V5Button:T.V5Button,Modal:T.Modal,OutsideClose:T.OutsideClose,TrialSlideshow:D},props:{autoShow:{type:Boolean,default:!1},buttonText:{type:String},closeOnAction:{type:Boolean,default:!0},hideText:{default:(0,$.dW)("Not Today"),type:String},referral:{type:String,default:""},startingSlide:{type:String},subtitle:{type:String},title:{type:String,required:!0},isGuest:{type:Boolean,default:!1},eligibleFirstTrial:{type:Boolean,default:!1},hasSlides:{type:Boolean,default:!0}},emits:["modal-did-hide"],data(){return{isLoggedIn:!this.isGuest&&U.Z.isLoggedIn()}},computed:{isSignUpModal(){return!U.Z.isLoggedIn()||this.isGuest},isModalWithCustomTitle(){return S.Xw.includes(this.startingSlide)},slides(){var i;if(this.isGuest){const i=(0,S.DL)(this.startingSlide).filter((i=>"explorer"!==i.icon));return this.referral===S._G.GUEST_MODAL_SLIDES.pawn?this.rearrangedSlides(this.referral,i):i}return U.Z.isLoggedIn()?(0,S.MR)(null!=(i=this.startingSlide)?i:this.referral):U.Z.isLoggedIn()||this.referral!==S._G.GUEST_MODAL_SLIDES.pawn?(0,S.DL)(this.startingSlide):this.rearrangedSlides(this.referral,(0,S.DL)(this.startingSlide))},route(){var i,s;return this.isGuest||!U.Z.isLoggedIn()?(0,P.pv)():j.Z.generate("web_membership",{c:null!=(i=URLSearchParamEntries().referrer)?i:this.referral,ref_id:null!=(s=URLSearchParamEntries().ref_id)?s:null,returnUrl:window.location.href})},subtitleText(){return this.subtitle?this.subtitle:U.Z.eligibleFirstTrial()?this.$trans("Try Premium for Free."):U.Z.checkMembershipStatus("isGold")||U.Z.checkMembershipStatus("isPlatinum")?this.$trans("Go Diamond."):this.$trans("Go Premium.")},titleText(){return this.isSignUpModal&&!this.isModalWithCustomTitle?this.$trans("Sign up for full access!"):this.title},normalizedButtonText(){return this.isSignUpModal?this.$trans("Sign Up"):this.buttonText?this.buttonText:U.Z.eligibleFirstTrial()?this.$trans("Try Free for 7 Days"):U.Z.checkMembershipStatus("isGold")||U.Z.checkMembershipStatus("isPlatinum")?this.$trans("Upgrade Now"):this.$trans("Go Premium Now")},buttonTheme(){return U.Z.isLoggedIn()&&!this.isGuest?"secondary":"primary"}},mounted(){this.autoShow&&!this.isSignUpModal&&(0,C.C)(this.referral)},methods:{show(){this.$refs.modalContainer.show(),this.isSignUpModal||(0,C.C)(this.referral)},hide(){this.$refs.modalContainer.hide()},rearrangedSlides(i,s){const _=s.find((s=>s.icon===i))||s[0],T=s.filter((i=>i!==_));return T.unshift(_),T}}},Z={component:"modal-trial-component",modal:"modal-trial-modal",header:"modal-trial-header",subtitle:"modal-trial-subtitle",title:"modal-trial-title",guest:"modal-trial-guest",body:"modal-trial-body",button:"modal-trial-button",footer:"modal-trial-footer"};var Y=(0,R.Z)(V,(function(){var i,s=this,_=s.$createElement,T=s._self._c||_;return T("modal",{ref:"modalContainer",class:[s.$style.component,(i={},i[s.$style.guest]=!s.isLoggedIn,i)],attrs:{corners:"rounded-lg","modal-width":"xl","close-on-action":s.closeOnAction,"auto-show":s.autoShow},on:{"modal-did-hide":function(i){return s.$emit("modal-did-hide")}}},[T("div",{class:s.$style.modal},[T("outside-close",{on:{click:function(i){return s.hide()}}}),s._v(" "),T("div",{class:s.$style.header},[s._t("header"),s._v(" "),T("h3",{class:s.$style.title,domProps:{textContent:s._s(s.titleText)}}),s._v(" "),s.isLoggedIn?T("h3",{class:s.$style.subtitle,domProps:{textContent:s._s(s.subtitleText)}}):s._e()],2),s._v(" "),T("div",{class:s.$style.body},[s.hasSlides?T("trial-slideshow",{attrs:{slides:s.slides}}):s._e(),s._v(" "),s._t("body"),s._v(" "),T("div",{class:s.$style.button},[T("v5-button",{attrs:{size:"large","full-width":!0,href:s.route,theme:s.buttonTheme},domProps:{textContent:s._s(s.normalizedButtonText)},on:{click:s.hide}})],1)],2),s._v(" "),T("div",{class:s.$style.footer},[s._t("footer",(function(){return[T("button",{attrs:{type:"button"},domProps:{textContent:s._s(s.hideText)},on:{click:s.hide}})]}))],2)],1)])}),[],!1,(function modal_trial_injectStyles(i){this.$style=Z.locals||Z}),null,null).exports},90168:function(i,s,_){"use strict";_.d(s,{Z:function(){return O}});var T=_(86437),S=_(7597),C=_(18160),P={name:"Pagination",components:{PaginationItem:T.PaginationItem,PaginationSpread:T.PaginationSpread},props:{changePage:{type:Function,required:!0},currentPage:{type:Number,required:!0},forceTheme:{type:String,default:null},hasMoreProp:{type:Boolean},morePages:{type:Boolean,default:!1},totalPages:{type:Number,default:0},totalResultsCount:{type:Number,required:!1},scrollOnPageChange:{type:Boolean,default:!1},scrollTo:{type:String},shouldHide:{type:Boolean,default:!1},showFirstLastButtons:{type:Boolean,default:!0},showTopButton:{type:Boolean,default:!1},updateURL:{type:Boolean,default:!1}},data:()=>({tabLimit:4}),computed:{isFirstPage(){return 1===this.currentPage},isLastPage(){return this.hasMoreProp?!1===this.morePages:this.currentPage===this.totalPages},isLastPageHidden(){return!this.pages.includes(this.totalPages)},pages(){if(this.totalPages>1)return this.generatePagesFromTotalPages();if(this.hasMoreProp&&this.morePages&&1===this.currentPage)return[1,2];if(this.hasMoreProp&&this.morePages&&this.currentPage>1){const i=[];for(let s=this.currentPage+1;s>0;s-=1)i.push(s);return i.reverse()}if(this.hasMoreProp&&!this.morePages){const i=[];for(let s=this.currentPage;s>0;s-=1)i.push(s);return i.reverse()}return[1]},showLowerEllipsis(){return this.currentPage>1&&-1===this.pages.indexOf(1)&&!this.hasMoreProp},showPaginator(){return!this.shouldHide&&(!(!this.hasMoreProp&&this.totalPages<=1)&&!(this.hasMoreProp&&!this.morePages&&1===this.currentPage))},showUpperEllipsis(){return this.isLastPageHidden&&!this.hasMoreProp}},methods:{isSamePage(i){return this.currentPage===i},generatePagesFromTotalPages(){const i=[];if(this.totalPages<=this.tabLimit){for(let s=1;s<=this.totalPages;s+=1)i.push(s);return i}if(this.currentPage+this.tabLimit<=this.totalPages){for(let s=this.currentPage;s<this.currentPage+this.tabLimit;s+=1)i.push(s);return i}for(let s=this.totalPages;s>this.totalPages-4;s-=1)i.push(s);return i.reverse()},pageNumber(i){return this.isSamePage(i)?C.Z.trans("Current Page, Page %pageNumber%",{"%pageNumber%":i}):(this.scrollOnPageChange&&this.goToTop(),C.Z.trans("Page %pageNumber%",{"%pageNumber%":i}))},goToTop(){let i=document.getElementById(this.scrollTo);i||(i=document.getElementById(S.xL.SCROLL_TOP_ANCHOR)),i.scrollIntoView({behavior:"smooth",block:"start"})}}},O=(0,_(51900).Z)(P,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{staticClass:"ui_pagination-component"},[i.showTopButton?_("PaginationItem",{staticClass:"ui_pagination-top",attrs:{icon:"chevron-up","aria-label":i.$trans("Back to Top"),content:i.$trans("Top"),"force-theme":i.forceTheme},on:{click:function(s){return i.goToTop()}}}):i._e(),i._v(" "),i.showPaginator?_("nav",{staticClass:"ui_pagination-navigation"},[i.isFirstPage||i.hasMoreProp||!i.showFirstLastButtons?i._e():_("PaginationItem",{attrs:{"aria-label":i.$trans("First Page"),content:i.$trans("First"),"force-theme":i.forceTheme},on:{click:function(s){return i.changePage(1)}}}),i._v(" "),_("PaginationItem",{attrs:{icon:"chevron-left","aria-label":i.$trans("Previous Page"),disabled:i.isFirstPage,"force-theme":i.forceTheme},on:{click:function(s){return i.changePage(i.currentPage-1)}}}),i._v(" "),i.showLowerEllipsis?_("PaginationSpread",{attrs:{"force-theme":i.forceTheme}}):i._e(),i._v(" "),i._l(i.pages,(function(s,T){return _("PaginationItem",{key:T,attrs:{active:i.isSamePage(s),"aria-label":i.pageNumber(s),"force-theme":i.forceTheme},domProps:{textContent:i._s(s.toString())},on:{click:function(_){return i.changePage(s)}}})})),i._v(" "),i.showUpperEllipsis?_("PaginationSpread",{attrs:{"force-theme":i.forceTheme}}):i._e(),i._v(" "),_("PaginationItem",{attrs:{icon:"chevron-right","aria-label":i.$trans("Next Page"),disabled:i.isLastPage,"force-theme":i.forceTheme},on:{click:function(s){return i.changePage(i.currentPage+1)}}}),i._v(" "),i.isLastPage||i.hasMoreProp||!i.showFirstLastButtons?i._e():_("PaginationItem",{attrs:{"aria-label":i.$trans("Last Page"),content:i.$trans("Last"),"force-theme":i.forceTheme},on:{click:function(s){return i.changePage(0!==i.totalPages?i.totalPages:-1)}}})],2):i._e()],1)}),[],!1,null,null,null).exports},86706:function(i,s,_){"use strict";_.d(s,{Z:function(){return C}});var T={name:"SectionContainer",mixins:[_(69947).Z],props:{overflow:{type:String,required:!1}},computed:{componentClasses(){const{overflow:i,$style:s}=this;return[s.component,{[s[i]]:i},this.themeClasses]}}},S={component:"section-container-component",visible:"section-container-visible"};var C=(0,_(51900).Z)(T,(function(){var i=this,s=i.$createElement;return(i._self._c||s)("div",{class:i.componentClasses},[i._t("default")],2)}),[],!1,(function injectStyles(i){this.$style=S.locals||S}),null,null).exports},12344:function(i,s,_){"use strict";_.d(s,{Z:function(){return C}});var T={name:"SectionTitleDismissible",emits:["close"],methods:{close(i){this.$emit("close",i)}}},S={component:"section-title-dismissible-component",name:"section-title-dismissible-name",close:"section-title-dismissible-close",icon:"section-title-dismissible-icon"};var C=(0,_(51900).Z)(T,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("span",{class:i.$style.name},[i._t("default")],2),i._v(" "),_("button",{class:i.$style.close,attrs:{type:"button","aria-label":i.$trans("Close")},on:{click:i.close}},[_("span",{staticClass:"icon-font-chess x",class:i.$style.icon})])])}),[],!1,(function injectStyles(i){this.$style=S.locals||S}),null,null).exports},7789:function(i,s,_){"use strict";var T=_(89385),S=_(47609),C=_(44758);var P=(0,_(51900).Z)(S.Z,T.s,T.x,!1,(function injectStyles(i){this.$style=C.Z.locals||C.Z}),null,null);s.Z=P.exports},88146:function(i,s,_){"use strict";var T=_(15315),S=_(96366),C=_(44542);var P=(0,_(51900).Z)(S.Z,T.s,T.x,!1,(function injectStyles(i){this.$style=C.Z.locals||C.Z}),null,null);s.Z=P.exports},6269:function(i,s,_){"use strict";_.d(s,{Z:function(){return P}});var T=_(4744),S={name:"UserChessTitle",directives:{Tooltip:_(55622).Z},props:{title:{type:String,required:!0},url:{type:String,required:!1},openNewTab:{type:Boolean,required:!1}},data(){return{fullTitle:T.rP[this.title]}},computed:{isLink(){return Boolean(this.url)},target(){return this.openNewTab?"_blank":null}}},C={component:"user-chess-title-component"};var P=(0,_(51900).Z)(S,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return i.isLink?_("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.fullTitle,expression:"fullTitle"}],class:i.$style.component,attrs:{href:i.url,target:i.target},domProps:{textContent:i._s(i.title)}}):_("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.fullTitle,expression:"fullTitle"}],class:i.$style.component,domProps:{textContent:i._s(i.title)}})}),[],!1,(function injectStyles(i){this.$style=C.locals||C}),null,null).exports},69685:function(i,s,_){"use strict";_.d(s,{Z:function(){return C}});var T={name:"UserUsername",props:{theme:{type:String,required:!0},isClickable:{type:Boolean,default:!0},url:{type:String,required:!1},username:{type:String,required:!0},openNewTab:{type:Boolean,required:!1}},computed:{getTargetIfClickable(){return this.openNewTab?"_blank":null},isLink(){return Boolean(this.url)}}},S={component:"user-username-component",link:"user-username-link",gray:"user-username-gray",blue:"user-username-blue",lightgray:"user-username-lightgray",current:"user-username-current",dark:"user-username-dark",bright:"user-username-bright","bright-bold":"user-username-bright-bold","blue-with-dark-mode":"user-username-blue-with-dark-mode","blue-to-water":"user-username-blue-to-water"};var C=(0,_(51900).Z)(T,(function(){var i,s=this,_=s.$createElement;return(s._self._c||_)(s.isClickable?"a":"span",{tag:"component",class:[s.$style.component,s.$style[s.theme],(i={},i[s.$style.link]=s.isClickable,i)],attrs:{href:s.isClickable?s.url:null,target:s.getTargetIfClickable},domProps:{textContent:s._s(s.username)}})}),[],!1,(function injectStyles(i){this.$style=S.locals||S}),null,null).exports},28941:function(i,s,_){"use strict";_.d(s,{Z:function(){return ae}});var T=_(42805),S=_(86540),C=_(70528),P=_(10942),O=_(27835),M=_(53291),R=_(32305);let D;class ChessBoard extends HTMLElement{createGame(i){this.game=(0,T.dz)(i),(0,P.F)(O.R.CHESSBOARD_EFFECTS_SYNC)||(this.game.plugins.remove("effectsHMLSync"),this.game.onMany([T.QY.InstanceEvents.Create,T.QY.InstanceEvents.ModeChanged],(()=>this.game.plugins.remove("effectsHMLSync")))),(0,P.F)(O.R.CHESSBOARD_RECORDER_PLUGIN)&&this.game.plugins.add((0,T.KW)()),(0,P.F)(O.R.CHESSBOARD_WEBGL_RENDER_ERROR)&&this.game.on(T.QY.InstanceEvents.RendererSetFailed,(()=>{C.Z.add({content:(0,R.dW)('WebGL is not supported by your browser, so some of your Piece or Animation Type <a href="/settings/board" target="_blank">settings</a> are ignored.'),icon:"circle-x",duration:12e3})})),this.dispatchEvent(new CustomEvent(M._.Events.BoardInitialized,{detail:this.game.getOptions().id}))}init({boardStyles:i,createRenderer:s,emitter:_,init:S,mode:C,options:P,plugins:O,pieceStyles:M}){this.innerHTML="";const R=Object.assign((0,T.jw)(),P,{test:Boolean(window.Cypress)});return this.createGame({el:this,emitter:_,init:S,mode:C,options:R,plugins:getPlugins(O),renderer:null==s?void 0:s({boardStyles:i,el:this,options:R,pieceStyles:M})}),this.game}get options(){var i;return null==(i=this.game)?void 0:i.getOptions()}connectedCallback(){this.dispatchEvent(new CustomEvent(M._.Events.BoardAttached))}disconnectedCallback(){this.dispatchEvent(new CustomEvent(M._.Events.BoardDetached))}}function getPlugins(i=[]){const s=(0,T.n8)((0,T.NQ)(),i);return D||(D=(0,T.q4)()),[...s.filter((i=>i.name!==T.th.Sounds.Plugin.Name)),D]}var j=_(32349),$=_(86673),U=_(42496),V=_(98576),Z=_(52439),Y=Object.defineProperty,X=Object.defineProperties,Q=Object.getOwnPropertyDescriptors,ee=Object.getOwnPropertySymbols,te=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable,__defNormalProp=(i,s,_)=>s in i?Y(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_;"undefined"==typeof customElements||customElements.get("chess-board")||customElements.define("chess-board",ChessBoard);var re={name:"Board",props:{canAddMovesToMainLine:{type:Boolean,default:!0},canDropPiecesContinuously:{type:Boolean,default:!1},canInteractWithPieces:{type:Boolean,default:!0},canModifyExistingMovesOnMainLine:{type:Boolean,default:!1},canMoveWhenGameIsOver:{type:Boolean,default:!1},hasCustomArrowHandler:{type:Boolean,default:!1},identifier:{type:String,required:!0},mode:{type:String,default:T.nl.Types.Playing},nodeChangeEvents:{type:Array,default:()=>[...S.j,T.QY.APIEvents.NodeUpdated]},options:{type:Object,required:!0},plugins:{type:Array,default:()=>[]},playingAs:{type:Number,default:1,validator:i=>[1,2].includes(i)}},emits:["moveBackward","moveToEnd","moveForward","moveToStart","makeMove","nodeChange","mounted","click","onPointerDown","flipBoard"],data:()=>({keyBindings:new V.G}),watch:{canAddMovesToMainLine:"setMode",canModifyExistingMovesOnMainLine:"setMode",playingAs:"setPlayingAs",mode:"setMode",options:{handler:"handleOptionsChange",deep:!0}},created(){(0,U.q)(`chessboard-${this.identifier}-mounted`),Z.default.config.ignoredElements.push("chess-board")},mounted(){this.$el.init({mode:this.getMode(),options:this.getOptions(),plugins:[..."playing-with-premoves"===this.mode?[(0,T.zG)()]:[],...this.plugins]}),this.$emit("mounted"),$.Z.emit(`chessboard-${this.identifier}-mounted`);const{game:i}=this.$el;i.resize(),window.addEventListener("resize",i.resize),i.onAll((({type:s})=>{this.nodeChangeEvents.includes(s)&&this.$emit("nodeChange",i)})),i.on(T.QY.APIEvents.Move,(i=>{this.$emit("makeMove",i)})),i.on(T.QY.OptionsEvents.Update,(({data:i})=>{void 0!==i.flipped&&this.$emit("flipBoard",i.flipped)})),this.handleOptionsChange(),this.$nextTick(this.setPlayingAs),this.hasCustomArrowHandler&&(i.plugins.remove(T.th.ArrowKeys.Plugin.Name),this.keyBindings.register({excludeInputs:!0,keys:{ArrowUp:i=>this.$emit("moveToStart",i),ArrowRight:i=>this.$emit("moveForward",i),ArrowDown:i=>this.$emit("moveToEnd",i),ArrowLeft:i=>this.$emit("moveBackward",i)}}))},beforeDestroy(){window.removeEventListener("resize",this.$el.game.resize),this.keyBindings.unregister()},methods:{getMode(){const i={canAddMovesToMainLine:this.canAddMovesToMainLine,canInteractWithPieces:this.canInteractWithPieces,canModifyExistingMovesOnMainLine:this.canModifyExistingMovesOnMainLine,canMoveWhenGameIsOver:this.canMoveWhenGameIsOver,canDropPiecesContinuously:this.canDropPiecesContinuously};return{[T.nl.Types.Analysis]:T.Wc.create(i),[T.nl.Types.Playing]:T.o9.create(i),[T.nl.Types.Explorer]:T.C0.create(i),[T.nl.Types.PassiveObserving]:T.C8.create(i),"playing-with-premoves":T.o9.create(i),[T.nl.Types.Setup]:T.nT.create(i)}[this.mode]},getOptions(){return i=((i,s)=>{for(var _ in s||(s={}))te.call(s,_)&&__defNormalProp(i,_,s[_]);if(ee)for(var _ of ee(s))ne.call(s,_)&&__defNormalProp(i,_,s[_]);return i})({},(0,j.Z)(this.options)),s={coordinates:this.options.coordinates||"off",id:this.identifier,flipped:this.options.flipBoard},X(i,Q(s));var i,s},handleOptionsChange(){var i;null==(i=this.$el.game)||i.setOptions(this.getOptions())},setMode(){const{game:i}=this.$el;i.plugins.remove(T.th.Premoves.Plugin.Name),i.setMode(this.getMode()),"playing-with-premoves"===this.mode&&i.plugins.add((0,T.zG)())},setPlayingAs(){var i,s;null==(s=(i=this.$el.game).setPlayingAs)||s.call(i,this.playingAs)},getGame(){return this.$el.game}}},ie={};var ae=(0,_(51900).Z)(re,(function(){var i=this,s=i.$createElement;return(i._self._c||s)("chess-board",{staticClass:"board",attrs:{id:"board-"+i.identifier},on:{pointerdown:function(s){return i.$emit("onPointerDown")},click:function(s){return i.$emit("click")}}})}),[],!1,(function injectStyles(i){this.$style=ie.locals||ie}),null,null).exports},76182:function(i,s,_){"use strict";var T=_(62704);s.Z=T.Z},36310:function(i,s,_){"use strict";var T=_(64688);s.Z=T.Z},70370:function(i,s,_){"use strict";var T=_(1252);s.Z=T.Z},57166:function(i,s,_){"use strict";var T=_(24137);s.Z=T.Z},6958:function(i,s,_){"use strict";var T=_(67258);s.Z=T.Z},40947:function(i,s,_){"use strict";var T=_(11412);s.Z=T.Z},54936:function(i,s,_){"use strict";var T=_(73078);s.Z=T.Z},86874:function(i,s,_){"use strict";var T=_(16823);s.Z=T.Z},5705:function(i,s,_){"use strict";var T=_(49253);s.Z=T.Z},48057:function(i,s,_){"use strict";var T=_(24844);s.Z=T.Z},47609:function(i,s,_){"use strict";var T=_(53792);s.Z=T.Z},11788:function(i,s,_){"use strict";_.d(s,{Z:function(){return T.Z}});var T=_(41914)},96939:function(i,s,_){"use strict";_.d(s,{Z:function(){return T.Z}});var T=_(72838)},60870:function(i,s,_){"use strict";_.d(s,{Z:function(){return T.Z}});var T=_(37857)},59169:function(i,s,_){"use strict";_.d(s,{Z:function(){return T.Z}});var T=_(61155)},69195:function(i,s,_){"use strict";_.d(s,{Z:function(){return T.Z}});var T=_(69925)},72041:function(i,s,_){"use strict";_.d(s,{Z:function(){return T.Z}});var T=_(11960)},12164:function(i,s,_){"use strict";_.d(s,{Z:function(){return T.Z}});var T=_(93228)},56438:function(i,s,_){"use strict";_.d(s,{Z:function(){return T.Z}});var T=_(61302)},88990:function(i,s,_){"use strict";_.d(s,{Z:function(){return T.Z}});var T=_(89922)},87048:function(i,s,_){"use strict";_.d(s,{Z:function(){return T.Z}});var T=_(7770)},44758:function(i,s,_){"use strict";_.d(s,{Z:function(){return T.Z}});var T=_(36621)},44542:function(i,s,_){"use strict";_.d(s,{Z:function(){return T.Z}});var T=_(52870)},96366:function(i,s,_){"use strict";var T=_(61089);s.Z=T.Z},51900:function(i,s,_){"use strict";function normalizeComponent(i,s,_,T,S,C,P,O){var M,R="function"==typeof i?i.options:i;if(s&&(R.render=s,R.staticRenderFns=_,R._compiled=!0),T&&(R.functional=!0),C&&(R._scopeId="data-v-"+C),P?(M=function(i){(i=i||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(i=__VUE_SSR_CONTEXT__),S&&S.call(this,i),i&&i._registeredComponents&&i._registeredComponents.add(P)},R._ssrRegister=M):S&&(M=O?function(){S.call(this,(R.functional?this.parent:this).$root.$options.shadowRoot)}:S),M)if(R.functional){R._injectStyles=M;var D=R.render;R.render=function renderWithStyleInjection(i,s){return M.call(s),D(i,s)}}else{var j=R.beforeCreate;R.beforeCreate=j?[].concat(j,M):[M]}return{exports:i,options:R}}_.d(s,{Z:function(){return normalizeComponent}})},86150:function(i,s,_){function DOMParser(i){this.options=i||{locator:{}}}function DOMHandler(){this.cdata=!1}function position(i,s){s.lineNumber=i.lineNumber,s.columnNumber=i.columnNumber}function _locator(i){if(i)return"\n@"+(i.systemId||"")+"#[line:"+i.lineNumber+",col:"+i.columnNumber+"]"}function _toString(i,s,_){return"string"==typeof i?i.substr(s,_):i.length>=s+_||s?new java.lang.String(i,s,_)+"":i}function appendElement(i,s){i.currentElement?i.currentElement.appendChild(s):i.doc.appendChild(s)}DOMParser.prototype.parseFromString=function(i,s){var _=this.options,S=new T,C=_.domBuilder||new DOMHandler,P=_.errorHandler,O=_.locator,M=_.xmlns||{},R={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return O&&C.setDocumentLocator(O),S.errorHandler=function buildErrorHandler(i,s,_){if(!i){if(s instanceof DOMHandler)return s;i=s}var T={},S=i instanceof Function;function build(s){var C=i[s];!C&&S&&(C=2==i.length?function(_){i(s,_)}:i),T[s]=C&&function(i){C("[xmldom "+s+"]\t"+i+_locator(_))}||function(){}}return _=_||{},build("warning"),build("error"),build("fatalError"),T}(P,C,O),S.domBuilder=_.domBuilder||C,/\/x?html?$/.test(s)&&(R.nbsp="",R.copy="",M[""]="http://www.w3.org/1999/xhtml"),M.xml=M.xml||"http://www.w3.org/XML/1998/namespace",i?S.parse(i,M,R):S.errorHandler.error("invalid doc source"),C.doc},DOMHandler.prototype={startDocument:function(){this.doc=(new S).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(i,s,_,T){var S=this.doc,C=S.createElementNS(i,_||s),P=T.length;appendElement(this,C),this.currentElement=C,this.locator&&position(this.locator,C);for(var O=0;O<P;O++){i=T.getURI(O);var M=T.getValue(O),R=(_=T.getQName(O),S.createAttributeNS(i,_));this.locator&&position(T.getLocator(O),R),R.value=R.nodeValue=M,C.setAttributeNode(R)}},endElement:function(i,s,_){var T=this.currentElement;T.tagName;this.currentElement=T.parentNode},startPrefixMapping:function(i,s){},endPrefixMapping:function(i){},processingInstruction:function(i,s){var _=this.doc.createProcessingInstruction(i,s);this.locator&&position(this.locator,_),appendElement(this,_)},ignorableWhitespace:function(i,s,_){},characters:function(i,s,_){if(i=_toString.apply(this,arguments)){if(this.cdata)var T=this.doc.createCDATASection(i);else T=this.doc.createTextNode(i);this.currentElement?this.currentElement.appendChild(T):/^\s*$/.test(i)&&this.doc.appendChild(T),this.locator&&position(this.locator,T)}},skippedEntity:function(i){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(i){(this.locator=i)&&(i.lineNumber=0)},comment:function(i,s,_){i=_toString.apply(this,arguments);var T=this.doc.createComment(i);this.locator&&position(this.locator,T),appendElement(this,T)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(i,s,_){var T=this.doc.implementation;if(T&&T.createDocumentType){var S=T.createDocumentType(i,s,_);this.locator&&position(this.locator,S),appendElement(this,S)}},warning:function(i){console.warn("[xmldom warning]\t"+i,_locator(this.locator))},error:function(i){console.error("[xmldom error]\t"+i,_locator(this.locator))},fatalError:function(i){throw console.error("[xmldom fatalError]\t"+i,_locator(this.locator)),i}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(i){DOMHandler.prototype[i]=function(){return null}}));var T=_(36147).G,S=_(29541).DOMImplementation;_(29541),s.a=DOMParser},29541:function(i,s){function copy(i,s){for(var _ in i)s[_]=i[_]}function _extends(i,s){var _=i.prototype;if(Object.create){var T=Object.create(s.prototype);_.__proto__=T}if(!(_ instanceof s)){function t(){}t.prototype=s.prototype,copy(_,t=new t),i.prototype=_=t}_.constructor!=i&&("function"!=typeof i&&console.error("unknow Class:"+i),_.constructor=i)}var _={},T=_.ELEMENT_NODE=1,S=_.ATTRIBUTE_NODE=2,C=_.TEXT_NODE=3,P=_.CDATA_SECTION_NODE=4,O=_.ENTITY_REFERENCE_NODE=5,M=_.ENTITY_NODE=6,R=_.PROCESSING_INSTRUCTION_NODE=7,D=_.COMMENT_NODE=8,j=_.DOCUMENT_NODE=9,$=_.DOCUMENT_TYPE_NODE=10,U=_.DOCUMENT_FRAGMENT_NODE=11,V=_.NOTATION_NODE=12,Z={},Y={},X=(Z.INDEX_SIZE_ERR=(Y[1]="Index size error",1),Z.DOMSTRING_SIZE_ERR=(Y[2]="DOMString size error",2),Z.HIERARCHY_REQUEST_ERR=(Y[3]="Hierarchy request error",3)),Q=(Z.WRONG_DOCUMENT_ERR=(Y[4]="Wrong document",4),Z.INVALID_CHARACTER_ERR=(Y[5]="Invalid character",5),Z.NO_DATA_ALLOWED_ERR=(Y[6]="No data allowed",6),Z.NO_MODIFICATION_ALLOWED_ERR=(Y[7]="No modification allowed",7),Z.NOT_FOUND_ERR=(Y[8]="Not found",8)),ee=(Z.NOT_SUPPORTED_ERR=(Y[9]="Not supported",9),Z.INUSE_ATTRIBUTE_ERR=(Y[10]="Attribute in use",10));Z.INVALID_STATE_ERR=(Y[11]="Invalid state",11),Z.SYNTAX_ERR=(Y[12]="Syntax error",12),Z.INVALID_MODIFICATION_ERR=(Y[13]="Invalid modification",13),Z.NAMESPACE_ERR=(Y[14]="Invalid namespace",14),Z.INVALID_ACCESS_ERR=(Y[15]="Invalid access",15);function DOMException(i,s){if(s instanceof Error)var _=s;else _=this,Error.call(this,Y[i]),this.message=Y[i],Error.captureStackTrace&&Error.captureStackTrace(this,DOMException);return _.code=i,s&&(this.message=this.message+": "+s),_}function NodeList(){}function LiveNodeList(i,s){this._node=i,this._refresh=s,_updateLiveList(this)}function _updateLiveList(i){var s=i._node._inc||i._node.ownerDocument._inc;if(i._inc!=s){var _=i._refresh(i._node);__set__(i,"length",_.length),copy(_,i),i._inc=s}}function NamedNodeMap(){}function _findNodeIndex(i,s){for(var _=i.length;_--;)if(i[_]===s)return _}function _addNamedNode(i,s,_,T){if(T?s[_findNodeIndex(s,T)]=_:s[s.length++]=_,i){_.ownerElement=i;var S=i.ownerDocument;S&&(T&&_onRemoveAttribute(S,i,T),function _onAddAttribute(i,s,_){i&&i._inc++,"http://www.w3.org/2000/xmlns/"==_.namespaceURI&&(s._nsMap[_.prefix?_.localName:""]=_.value)}(S,i,_))}}function _removeNamedNode(i,s,_){var T=_findNodeIndex(s,_);if(!(T>=0))throw DOMException(Q,new Error(i.tagName+"@"+_));for(var S=s.length-1;T<S;)s[T]=s[++T];if(s.length=S,i){var C=i.ownerDocument;C&&(_onRemoveAttribute(C,i,_),_.ownerElement=null)}}function DOMImplementation(i){if(this._features={},i)for(var s in i)this._features=i[s]}function Node(){}function _xmlEncoder(i){return("<"==i?"&lt;":">"==i&&"&gt;")||"&"==i&&"&amp;"||'"'==i&&"&quot;"||"&#"+i.charCodeAt()+";"}function _visitNode(i,s){if(s(i))return!0;if(i=i.firstChild)do{if(_visitNode(i,s))return!0}while(i=i.nextSibling)}function Document(){}function _onRemoveAttribute(i,s,_,T){i&&i._inc++,"http://www.w3.org/2000/xmlns/"==_.namespaceURI&&delete s._nsMap[_.prefix?_.localName:""]}function _onUpdateChild(i,s,_){if(i&&i._inc){i._inc++;var T=s.childNodes;if(_)T[T.length++]=_;else{for(var S=s.firstChild,C=0;S;)T[C++]=S,S=S.nextSibling;T.length=C}}}function _removeChild(i,s){var _=s.previousSibling,T=s.nextSibling;return _?_.nextSibling=T:i.firstChild=T,T?T.previousSibling=_:i.lastChild=_,_onUpdateChild(i.ownerDocument,i),s}function _insertBefore(i,s,_){var T=s.parentNode;if(T&&T.removeChild(s),s.nodeType===U){var S=s.firstChild;if(null==S)return s;var C=s.lastChild}else S=C=s;var P=_?_.previousSibling:i.lastChild;S.previousSibling=P,C.nextSibling=_,P?P.nextSibling=S:i.firstChild=S,null==_?i.lastChild=C:_.previousSibling=C;do{S.parentNode=i}while(S!==C&&(S=S.nextSibling));return _onUpdateChild(i.ownerDocument||i,i),s.nodeType==U&&(s.firstChild=s.lastChild=null),s}function Element(){this._nsMap={}}function Attr(){}function CharacterData(){}function Text(){}function Comment(){}function CDATASection(){}function DocumentType(){}function Notation(){}function Entity(){}function EntityReference(){}function DocumentFragment(){}function ProcessingInstruction(){}function XMLSerializer(){}function nodeSerializeToString(i,s){var _=[],T=9==this.nodeType?this.documentElement:this,S=T.prefix,C=T.namespaceURI;if(C&&null==S&&null==(S=T.lookupPrefix(C)))var P=[{namespace:C,prefix:null}];return serializeToString(this,_,i,s,P),_.join("")}function needNamespaceDefine(i,s,_){var T=i.prefix||"",S=i.namespaceURI;if(!T&&!S)return!1;if("xml"===T&&"http://www.w3.org/XML/1998/namespace"===S||"http://www.w3.org/2000/xmlns/"==S)return!1;for(var C=_.length;C--;){var P=_[C];if(P.prefix==T)return P.namespace!=S}return!0}function serializeToString(i,s,_,M,V){if(M){if(!(i=M(i)))return;if("string"==typeof i)return void s.push(i)}switch(i.nodeType){case T:V||(V=[]);V.length;var Z=i.attributes,Y=Z.length,X=i.firstChild,Q=i.tagName;_="http://www.w3.org/1999/xhtml"===i.namespaceURI||_,s.push("<",Q);for(var ee=0;ee<Y;ee++){"xmlns"==(te=Z.item(ee)).prefix?V.push({prefix:te.localName,namespace:te.value}):"xmlns"==te.nodeName&&V.push({prefix:"",namespace:te.value})}for(ee=0;ee<Y;ee++){var te;if(needNamespaceDefine(te=Z.item(ee),0,V)){var ne=te.prefix||"",re=te.namespaceURI,ie=ne?" xmlns:"+ne:" xmlns";s.push(ie,'="',re,'"'),V.push({prefix:ne,namespace:re})}serializeToString(te,s,_,M,V)}if(needNamespaceDefine(i,0,V)){ne=i.prefix||"",re=i.namespaceURI,ie=ne?" xmlns:"+ne:" xmlns";s.push(ie,'="',re,'"'),V.push({prefix:ne,namespace:re})}if(X||_&&!/^(?:meta|link|img|br|hr|input)$/i.test(Q)){if(s.push(">"),_&&/^script$/i.test(Q))for(;X;)X.data?s.push(X.data):serializeToString(X,s,_,M,V),X=X.nextSibling;else for(;X;)serializeToString(X,s,_,M,V),X=X.nextSibling;s.push("</",Q,">")}else s.push("/>");return;case j:case U:for(X=i.firstChild;X;)serializeToString(X,s,_,M,V),X=X.nextSibling;return;case S:return s.push(" ",i.name,'="',i.value.replace(/[<&"]/g,_xmlEncoder),'"');case C:return s.push(i.data.replace(/[<&]/g,_xmlEncoder));case P:return s.push("<![CDATA[",i.data,"]]>");case D:return s.push("\x3c!--",i.data,"--\x3e");case $:var ae=i.publicId,se=i.systemId;if(s.push("<!DOCTYPE ",i.name),ae)s.push(' PUBLIC "',ae),se&&"."!=se&&s.push('" "',se),s.push('">');else if(se&&"."!=se)s.push(' SYSTEM "',se,'">');else{var oe=i.internalSubset;oe&&s.push(" [",oe,"]"),s.push(">")}return;case R:return s.push("<?",i.target," ",i.data,"?>");case O:return s.push("&",i.nodeName,";");default:s.push("??",i.nodeName)}}function importNode(i,s,_){var C;switch(s.nodeType){case T:(C=s.cloneNode(!1)).ownerDocument=i;case U:break;case S:_=!0}if(C||(C=s.cloneNode(!1)),C.ownerDocument=i,C.parentNode=null,_)for(var P=s.firstChild;P;)C.appendChild(importNode(i,P,_)),P=P.nextSibling;return C}function cloneNode(i,s,_){var C=new s.constructor;for(var P in s){var O=s[P];"object"!=typeof O&&O!=C[P]&&(C[P]=O)}switch(s.childNodes&&(C.childNodes=new NodeList),C.ownerDocument=i,C.nodeType){case T:var M=s.attributes,R=C.attributes=new NamedNodeMap,D=M.length;R._ownerElement=C;for(var j=0;j<D;j++)C.setAttributeNode(cloneNode(i,M.item(j),!0));break;case S:_=!0}if(_)for(var $=s.firstChild;$;)C.appendChild(cloneNode(i,$,_)),$=$.nextSibling;return C}function __set__(i,s,_){i[s]=_}DOMException.prototype=Error.prototype,copy(Z,DOMException),NodeList.prototype={length:0,item:function(i){return this[i]||null},toString:function(i,s){for(var _=[],T=0;T<this.length;T++)serializeToString(this[T],_,i,s);return _.join("")}},LiveNodeList.prototype.item=function(i){return _updateLiveList(this),this[i]},_extends(LiveNodeList,NodeList),NamedNodeMap.prototype={length:0,item:NodeList.prototype.item,getNamedItem:function(i){for(var s=this.length;s--;){var _=this[s];if(_.nodeName==i)return _}},setNamedItem:function(i){var s=i.ownerElement;if(s&&s!=this._ownerElement)throw new DOMException(ee);var _=this.getNamedItem(i.nodeName);return _addNamedNode(this._ownerElement,this,i,_),_},setNamedItemNS:function(i){var s,_=i.ownerElement;if(_&&_!=this._ownerElement)throw new DOMException(ee);return s=this.getNamedItemNS(i.namespaceURI,i.localName),_addNamedNode(this._ownerElement,this,i,s),s},removeNamedItem:function(i){var s=this.getNamedItem(i);return _removeNamedNode(this._ownerElement,this,s),s},removeNamedItemNS:function(i,s){var _=this.getNamedItemNS(i,s);return _removeNamedNode(this._ownerElement,this,_),_},getNamedItemNS:function(i,s){for(var _=this.length;_--;){var T=this[_];if(T.localName==s&&T.namespaceURI==i)return T}return null}},DOMImplementation.prototype={hasFeature:function(i,s){var _=this._features[i.toLowerCase()];return!(!_||s&&!(s in _))},createDocument:function(i,s,_){var T=new Document;if(T.implementation=this,T.childNodes=new NodeList,T.doctype=_,_&&T.appendChild(_),s){var S=T.createElementNS(i,s);T.appendChild(S)}return T},createDocumentType:function(i,s,_){var T=new DocumentType;return T.name=i,T.nodeName=i,T.publicId=s,T.systemId=_,T}},Node.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(i,s){return _insertBefore(this,i,s)},replaceChild:function(i,s){this.insertBefore(i,s),s&&this.removeChild(s)},removeChild:function(i){return _removeChild(this,i)},appendChild:function(i){return this.insertBefore(i,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(i){return cloneNode(this.ownerDocument||this,this,i)},normalize:function(){for(var i=this.firstChild;i;){var s=i.nextSibling;s&&s.nodeType==C&&i.nodeType==C?(this.removeChild(s),i.appendData(s.data)):(i.normalize(),i=s)}},isSupported:function(i,s){return this.ownerDocument.implementation.hasFeature(i,s)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(i){for(var s=this;s;){var _=s._nsMap;if(_)for(var T in _)if(_[T]==i)return T;s=s.nodeType==S?s.ownerDocument:s.parentNode}return null},lookupNamespaceURI:function(i){for(var s=this;s;){var _=s._nsMap;if(_&&i in _)return _[i];s=s.nodeType==S?s.ownerDocument:s.parentNode}return null},isDefaultNamespace:function(i){return null==this.lookupPrefix(i)}},copy(_,Node),copy(_,Node.prototype),Document.prototype={nodeName:"#document",nodeType:j,doctype:null,documentElement:null,_inc:1,insertBefore:function(i,s){if(i.nodeType==U){for(var _=i.firstChild;_;){var S=_.nextSibling;this.insertBefore(_,s),_=S}return i}return null==this.documentElement&&i.nodeType==T&&(this.documentElement=i),_insertBefore(this,i,s),i.ownerDocument=this,i},removeChild:function(i){return this.documentElement==i&&(this.documentElement=null),_removeChild(this,i)},importNode:function(i,s){return importNode(this,i,s)},getElementById:function(i){var s=null;return _visitNode(this.documentElement,(function(_){if(_.nodeType==T&&_.getAttribute("id")==i)return s=_,!0})),s},createElement:function(i){var s=new Element;return s.ownerDocument=this,s.nodeName=i,s.tagName=i,s.childNodes=new NodeList,(s.attributes=new NamedNodeMap)._ownerElement=s,s},createDocumentFragment:function(){var i=new DocumentFragment;return i.ownerDocument=this,i.childNodes=new NodeList,i},createTextNode:function(i){var s=new Text;return s.ownerDocument=this,s.appendData(i),s},createComment:function(i){var s=new Comment;return s.ownerDocument=this,s.appendData(i),s},createCDATASection:function(i){var s=new CDATASection;return s.ownerDocument=this,s.appendData(i),s},createProcessingInstruction:function(i,s){var _=new ProcessingInstruction;return _.ownerDocument=this,_.tagName=_.target=i,_.nodeValue=_.data=s,_},createAttribute:function(i){var s=new Attr;return s.ownerDocument=this,s.name=i,s.nodeName=i,s.localName=i,s.specified=!0,s},createEntityReference:function(i){var s=new EntityReference;return s.ownerDocument=this,s.nodeName=i,s},createElementNS:function(i,s){var _=new Element,T=s.split(":"),S=_.attributes=new NamedNodeMap;return _.childNodes=new NodeList,_.ownerDocument=this,_.nodeName=s,_.tagName=s,_.namespaceURI=i,2==T.length?(_.prefix=T[0],_.localName=T[1]):_.localName=s,S._ownerElement=_,_},createAttributeNS:function(i,s){var _=new Attr,T=s.split(":");return _.ownerDocument=this,_.nodeName=s,_.name=s,_.namespaceURI=i,_.specified=!0,2==T.length?(_.prefix=T[0],_.localName=T[1]):_.localName=s,_}},_extends(Document,Node),Element.prototype={nodeType:T,hasAttribute:function(i){return null!=this.getAttributeNode(i)},getAttribute:function(i){var s=this.getAttributeNode(i);return s&&s.value||""},getAttributeNode:function(i){return this.attributes.getNamedItem(i)},setAttribute:function(i,s){var _=this.ownerDocument.createAttribute(i);_.value=_.nodeValue=""+s,this.setAttributeNode(_)},removeAttribute:function(i){var s=this.getAttributeNode(i);s&&this.removeAttributeNode(s)},appendChild:function(i){return i.nodeType===U?this.insertBefore(i,null):function _appendSingleChild(i,s){var _=s.parentNode;if(_){var T=i.lastChild;_.removeChild(s),T=i.lastChild}return T=i.lastChild,s.parentNode=i,s.previousSibling=T,s.nextSibling=null,T?T.nextSibling=s:i.firstChild=s,i.lastChild=s,_onUpdateChild(i.ownerDocument,i,s),s}(this,i)},setAttributeNode:function(i){return this.attributes.setNamedItem(i)},setAttributeNodeNS:function(i){return this.attributes.setNamedItemNS(i)},removeAttributeNode:function(i){return this.attributes.removeNamedItem(i.nodeName)},removeAttributeNS:function(i,s){var _=this.getAttributeNodeNS(i,s);_&&this.removeAttributeNode(_)},hasAttributeNS:function(i,s){return null!=this.getAttributeNodeNS(i,s)},getAttributeNS:function(i,s){var _=this.getAttributeNodeNS(i,s);return _&&_.value||""},setAttributeNS:function(i,s,_){var T=this.ownerDocument.createAttributeNS(i,s);T.value=T.nodeValue=""+_,this.setAttributeNode(T)},getAttributeNodeNS:function(i,s){return this.attributes.getNamedItemNS(i,s)},getElementsByTagName:function(i){return new LiveNodeList(this,(function(s){var _=[];return _visitNode(s,(function(S){S===s||S.nodeType!=T||"*"!==i&&S.tagName!=i||_.push(S)})),_}))},getElementsByTagNameNS:function(i,s){return new LiveNodeList(this,(function(_){var S=[];return _visitNode(_,(function(C){C===_||C.nodeType!==T||"*"!==i&&C.namespaceURI!==i||"*"!==s&&C.localName!=s||S.push(C)})),S}))}},Document.prototype.getElementsByTagName=Element.prototype.getElementsByTagName,Document.prototype.getElementsByTagNameNS=Element.prototype.getElementsByTagNameNS,_extends(Element,Node),Attr.prototype.nodeType=S,_extends(Attr,Node),CharacterData.prototype={data:"",substringData:function(i,s){return this.data.substring(i,i+s)},appendData:function(i){i=this.data+i,this.nodeValue=this.data=i,this.length=i.length},insertData:function(i,s){this.replaceData(i,0,s)},appendChild:function(i){throw new Error(Y[X])},deleteData:function(i,s){this.replaceData(i,s,"")},replaceData:function(i,s,_){_=this.data.substring(0,i)+_+this.data.substring(i+s),this.nodeValue=this.data=_,this.length=_.length}},_extends(CharacterData,Node),Text.prototype={nodeName:"#text",nodeType:C,splitText:function(i){var s=this.data,_=s.substring(i);s=s.substring(0,i),this.data=this.nodeValue=s,this.length=s.length;var T=this.ownerDocument.createTextNode(_);return this.parentNode&&this.parentNode.insertBefore(T,this.nextSibling),T}},_extends(Text,CharacterData),Comment.prototype={nodeName:"#comment",nodeType:D},_extends(Comment,CharacterData),CDATASection.prototype={nodeName:"#cdata-section",nodeType:P},_extends(CDATASection,CharacterData),DocumentType.prototype.nodeType=$,_extends(DocumentType,Node),Notation.prototype.nodeType=V,_extends(Notation,Node),Entity.prototype.nodeType=M,_extends(Entity,Node),EntityReference.prototype.nodeType=O,_extends(EntityReference,Node),DocumentFragment.prototype.nodeName="#document-fragment",DocumentFragment.prototype.nodeType=U,_extends(DocumentFragment,Node),ProcessingInstruction.prototype.nodeType=R,_extends(ProcessingInstruction,Node),XMLSerializer.prototype.serializeToString=function(i,s,_){return nodeSerializeToString.call(i,s,_)},Node.prototype.toString=nodeSerializeToString;try{if(Object.defineProperty){function getTextContent(i){switch(i.nodeType){case T:case U:var s=[];for(i=i.firstChild;i;)7!==i.nodeType&&8!==i.nodeType&&s.push(getTextContent(i)),i=i.nextSibling;return s.join("");default:return i.nodeValue}}Object.defineProperty(LiveNodeList.prototype,"length",{get:function(){return _updateLiveList(this),this.$$length}}),Object.defineProperty(Node.prototype,"textContent",{get:function(){return getTextContent(this)},set:function(i){switch(this.nodeType){case T:case U:for(;this.firstChild;)this.removeChild(this.firstChild);(i||String(i))&&this.appendChild(this.ownerDocument.createTextNode(i));break;default:this.data=i,this.value=i,this.nodeValue=i}}}),__set__=function(i,s,_){i["$$"+s]=_}}}catch(te){}s.DOMImplementation=DOMImplementation},36147:function(i,s){var _=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,T=new RegExp("[\\-\\.0-9"+_.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),S=new RegExp("^"+_.source+T.source+"*(?::"+_.source+T.source+"*)?$");function XMLReader(){}function copyLocator(i,s){return s.lineNumber=i.lineNumber,s.columnNumber=i.columnNumber,s}function parseElementStartPart(i,s,_,T,S,C){for(var P,O=++s,M=0;;){var R=i.charAt(O);switch(R){case"=":if(1===M)P=i.slice(s,O),M=3;else{if(2!==M)throw new Error("attribute equal must after attrName");M=3}break;case"'":case'"':if(3===M||1===M){if(1===M&&(C.warning('attribute value must after "="'),P=i.slice(s,O)),s=O+1,!((O=i.indexOf(R,s))>0))throw new Error("attribute value no end '"+R+"' match");D=i.slice(s,O).replace(/&#?\w+;/g,S),_.add(P,D,s-1),M=5}else{if(4!=M)throw new Error('attribute value must after "="');D=i.slice(s,O).replace(/&#?\w+;/g,S),_.add(P,D,s),C.warning('attribute "'+P+'" missed start quot('+R+")!!"),s=O+1,M=5}break;case"/":switch(M){case 0:_.setTagName(i.slice(s,O));case 5:case 6:case 7:M=7,_.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return C.error("unexpected end of input"),0==M&&_.setTagName(i.slice(s,O)),O;case">":switch(M){case 0:_.setTagName(i.slice(s,O));case 5:case 6:case 7:break;case 4:case 1:"/"===(D=i.slice(s,O)).slice(-1)&&(_.closed=!0,D=D.slice(0,-1));case 2:2===M&&(D=P),4==M?(C.warning('attribute "'+D+'" missed quot(")!!'),_.add(P,D.replace(/&#?\w+;/g,S),s)):("http://www.w3.org/1999/xhtml"===T[""]&&D.match(/^(?:disabled|checked|selected)$/i)||C.warning('attribute "'+D+'" missed value!! "'+D+'" instead!!'),_.add(D,D,s));break;case 3:throw new Error("attribute value missed!!")}return O;case"":R=" ";default:if(R<=" ")switch(M){case 0:_.setTagName(i.slice(s,O)),M=6;break;case 1:P=i.slice(s,O),M=2;break;case 4:var D=i.slice(s,O).replace(/&#?\w+;/g,S);C.warning('attribute "'+D+'" missed quot(")!!'),_.add(P,D,s);case 5:M=6}else switch(M){case 2:_.tagName;"http://www.w3.org/1999/xhtml"===T[""]&&P.match(/^(?:disabled|checked|selected)$/i)||C.warning('attribute "'+P+'" missed value!! "'+P+'" instead2!!'),_.add(P,P,s),s=O,M=1;break;case 5:C.warning('attribute space is required"'+P+'"!!');case 6:M=1,s=O;break;case 3:M=4,s=O;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}O++}}function appendElement(i,s,_){for(var T=i.tagName,S=null,C=i.length;C--;){var P=i[C],O=P.qName,M=P.value;if(($=O.indexOf(":"))>0)var R=P.prefix=O.slice(0,$),D=O.slice($+1),j="xmlns"===R&&D;else D=O,R=null,j="xmlns"===O&&"";P.localName=D,!1!==j&&(null==S&&(S={},_copy(_,_={})),_[j]=S[j]=M,P.uri="http://www.w3.org/2000/xmlns/",s.startPrefixMapping(j,M))}for(C=i.length;C--;){(R=(P=i[C]).prefix)&&("xml"===R&&(P.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==R&&(P.uri=_[R||""]))}var $;($=T.indexOf(":"))>0?(R=i.prefix=T.slice(0,$),D=i.localName=T.slice($+1)):(R=null,D=i.localName=T);var U=i.uri=_[R||""];if(s.startElement(U,D,T,i),!i.closed)return i.currentNSMap=_,i.localNSMap=S,!0;if(s.endElement(U,D,T),S)for(R in S)s.endPrefixMapping(R)}function parseHtmlSpecialContent(i,s,_,T,S){if(/^(?:script|textarea)$/i.test(_)){var C=i.indexOf("</"+_+">",s),P=i.substring(s+1,C);if(/[&<]/.test(P))return/^script$/i.test(_)?(S.characters(P,0,P.length),C):(P=P.replace(/&#?\w+;/g,T),S.characters(P,0,P.length),C)}return s+1}function fixSelfClosed(i,s,_,T){var S=T[_];return null==S&&((S=i.lastIndexOf("</"+_+">"))<s&&(S=i.lastIndexOf("</"+_)),T[_]=S),S<s}function _copy(i,s){for(var _ in i)s[_]=i[_]}function parseDCC(i,s,_,T){if("-"===i.charAt(s+2))return"-"===i.charAt(s+3)?(S=i.indexOf("--\x3e",s+4))>s?(_.comment(i,s+4,S-s-4),S+3):(T.error("Unclosed comment"),-1):-1;if("CDATA["==i.substr(s+3,6)){var S=i.indexOf("]]>",s+9);return _.startCDATA(),_.characters(i,s+9,S-s-9),_.endCDATA(),S+3}var C=function split(i,s){var _,T=[],S=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;S.lastIndex=s,S.exec(i);for(;_=S.exec(i);)if(T.push(_),_[1])return T}(i,s),P=C.length;if(P>1&&/!doctype/i.test(C[0][0])){var O=C[1][0],M=P>3&&/^public$/i.test(C[2][0])&&C[3][0],R=P>4&&C[4][0],D=C[P-1];return _.startDTD(O,M&&M.replace(/^(['"])(.*?)\1$/,"$2"),R&&R.replace(/^(['"])(.*?)\1$/,"$2")),_.endDTD(),D.index+D[0].length}return-1}function parseInstruction(i,s,_){var T=i.indexOf("?>",s);if(T){var S=i.substring(s,T).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(S){S[0].length;return _.processingInstruction(S[1],S[2]),T+2}return-1}return-1}function ElementAttributes(i){}function _set_proto_(i,s){return i.__proto__=s,i}XMLReader.prototype={parse:function(i,s,_){var T=this.domBuilder;T.startDocument(),_copy(s,s={}),function parse(i,s,_,T,S){function fixedFromCharCode(i){if(i>65535){var s=55296+((i-=65536)>>10),_=56320+(1023&i);return String.fromCharCode(s,_)}return String.fromCharCode(i)}function entityReplacer(i){var s=i.slice(1,-1);return s in _?_[s]:"#"===s.charAt(0)?fixedFromCharCode(parseInt(s.substr(1).replace("x","0x"))):(S.error("entity not found:"+i),i)}function appendText(s){if(s>j){var _=i.substring(j,s).replace(/&#?\w+;/g,entityReplacer);M&&position(j),T.characters(_,0,s-j),j=s}}function position(s,_){for(;s>=P&&(_=O.exec(i));)C=_.index,P=C+_[0].length,M.lineNumber++;M.columnNumber=s-C+1}var C=0,P=0,O=/.*(?:\r\n?|\n)|.*$/g,M=T.locator,R=[{currentNSMap:s}],D={},j=0;for(;;){try{var $=i.indexOf("<",j);if($<0){if(!i.substr(j).match(/^\s*$/)){var U=T.doc,V=U.createTextNode(i.substr(j));U.appendChild(V),T.currentElement=V}return}switch($>j&&appendText($),i.charAt($+1)){case"/":var Z=i.indexOf(">",$+3),Y=i.substring($+2,Z),X=R.pop();Z<0?(Y=i.substring($+2).replace(/[\s<].*/,""),S.error("end tag name: "+Y+" is not complete:"+X.tagName),Z=$+1+Y.length):Y.match(/\s</)&&(Y=Y.replace(/[\s<].*/,""),S.error("end tag name: "+Y+" maybe not complete"),Z=$+1+Y.length);var Q=X.localNSMap,ee=X.tagName==Y;if(ee||X.tagName&&X.tagName.toLowerCase()==Y.toLowerCase()){if(T.endElement(X.uri,X.localName,Y),Q)for(var te in Q)T.endPrefixMapping(te);ee||S.fatalError("end tag name: "+Y+" is not match the current start tagName:"+X.tagName)}else R.push(X);Z++;break;case"?":M&&position($),Z=parseInstruction(i,$,T);break;case"!":M&&position($),Z=parseDCC(i,$,T,S);break;default:M&&position($);var ne=new ElementAttributes,re=R[R.length-1].currentNSMap,ie=(Z=parseElementStartPart(i,$,ne,re,entityReplacer,S),ne.length);if(!ne.closed&&fixSelfClosed(i,Z,ne.tagName,D)&&(ne.closed=!0,_.nbsp||S.warning("unclosed xml attribute")),M&&ie){for(var ae=copyLocator(M,{}),se=0;se<ie;se++){var oe=ne[se];position(oe.offset),oe.locator=copyLocator(M,{})}T.locator=ae,appendElement(ne,T,re)&&R.push(ne),T.locator=M}else appendElement(ne,T,re)&&R.push(ne);"http://www.w3.org/1999/xhtml"!==ne.uri||ne.closed?Z++:Z=parseHtmlSpecialContent(i,Z,ne.tagName,entityReplacer,T)}}catch(le){S.error("element parse error: "+le),Z=-1}Z>j?j=Z:appendText(Math.max($,j)+1)}}(i,s,_,T,this.errorHandler),T.endDocument()}},ElementAttributes.prototype={setTagName:function(i){if(!S.test(i))throw new Error("invalid tagName:"+i);this.tagName=i},add:function(i,s,_){if(!S.test(i))throw new Error("invalid attribute:"+i);this[this.length++]={qName:i,value:s,offset:_}},length:0,getLocalName:function(i){return this[i].localName},getLocator:function(i){return this[i].locator},getQName:function(i){return this[i].qName},getURI:function(i){return this[i].uri},getValue:function(i){return this[i].value}},_set_proto_({},_set_proto_.prototype)instanceof _set_proto_||(_set_proto_=function(i,s){function p(){}for(s in p.prototype=s,p=new p,i)p[s]=i[s];return p}),s.G=XMLReader},52439:function(i,s,_){i.exports=_(84474)(110)},86437:function(i,s,_){i.exports=_(84474)(279)},89884:function(i,s,_){i.exports=_(84474)(307)},74338:function(i,s,_){i.exports=_(84474)(629)},23992:function(i,s,_){i.exports=_(84474)(866)},84474:function(i){"use strict";i.exports=vueDLL},25893:function(){},97326:function(i,s,_){"use strict";function _assertThisInitialized(i){if(void 0===i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}_.d(s,{Z:function(){return _assertThisInitialized}})},98852:function(i,s,_){"use strict";_.d(s,{Z:function(){return _construct}});var T=_(89611);function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(i){return!1}}function _construct(i,s,_){return _construct=_isNativeReflectConstruct()?Reflect.construct:function _construct(i,s,_){var S=[null];S.push.apply(S,s);var C=new(Function.bind.apply(i,S));return _&&(0,T.Z)(C,_.prototype),C},_construct.apply(null,arguments)}},60136:function(i,s,_){"use strict";_.d(s,{Z:function(){return _inherits}});var T=_(89611);function _inherits(i,s){if("function"!=typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(s&&s.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),s&&(0,T.Z)(i,s)}},89611:function(i,s,_){"use strict";function _setPrototypeOf(i,s){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(i,s){return i.__proto__=s,i},_setPrototypeOf(i,s)}_.d(s,{Z:function(){return _setPrototypeOf}})},86183:function(i,s,_){"use strict";var T=_(62508),S=_(66092),C=(0,T.Z)(S.Z,"Map");s.Z=C},36779:function(i,s,_){"use strict";_.d(s,{Z:function(){return ge}});var T=function listCacheClear(){this.__data__=[],this.size=0},S=_(79651);var C=function assocIndexOf(i,s){for(var _=i.length;_--;)if((0,S.Z)(i[_][0],s))return _;return-1},P=Array.prototype.splice;var O=function listCacheDelete(i){var s=this.__data__,_=C(s,i);return!(_<0)&&(_==s.length-1?s.pop():P.call(s,_,1),--this.size,!0)};var M=function listCacheGet(i){var s=this.__data__,_=C(s,i);return _<0?void 0:s[_][1]};var R=function listCacheHas(i){return C(this.__data__,i)>-1};var D=function listCacheSet(i,s){var _=this.__data__,T=C(_,i);return T<0?(++this.size,_.push([i,s])):_[T][1]=s,this};function ListCache(i){var s=-1,_=null==i?0:i.length;for(this.clear();++s<_;){var T=i[s];this.set(T[0],T[1])}}ListCache.prototype.clear=T,ListCache.prototype.delete=O,ListCache.prototype.get=M,ListCache.prototype.has=R,ListCache.prototype.set=D;var j=ListCache;var $=function stackClear(){this.__data__=new j,this.size=0};var U=function stackDelete(i){var s=this.__data__,_=s.delete(i);return this.size=s.size,_};var V=function stackGet(i){return this.__data__.get(i)};var Z=function stackHas(i){return this.__data__.has(i)},Y=_(86183),X=(0,_(62508).Z)(Object,"create");var Q=function hashClear(){this.__data__=X?X(null):{},this.size=0};var ee=function hashDelete(i){var s=this.has(i)&&delete this.__data__[i];return this.size-=s?1:0,s},te=Object.prototype.hasOwnProperty;var ne=function hashGet(i){var s=this.__data__;if(X){var _=s[i];return"__lodash_hash_undefined__"===_?void 0:_}return te.call(s,i)?s[i]:void 0},re=Object.prototype.hasOwnProperty;var ie=function hashHas(i){var s=this.__data__;return X?void 0!==s[i]:re.call(s,i)};var ae=function hashSet(i,s){var _=this.__data__;return this.size+=this.has(i)?0:1,_[i]=X&&void 0===s?"__lodash_hash_undefined__":s,this};function Hash(i){var s=-1,_=null==i?0:i.length;for(this.clear();++s<_;){var T=i[s];this.set(T[0],T[1])}}Hash.prototype.clear=Q,Hash.prototype.delete=ee,Hash.prototype.get=ne,Hash.prototype.has=ie,Hash.prototype.set=ae;var se=Hash;var oe=function mapCacheClear(){this.size=0,this.__data__={hash:new se,map:new(Y.Z||j),string:new se}};var le=function isKeyable(i){var s=typeof i;return"string"==s||"number"==s||"symbol"==s||"boolean"==s?"__proto__"!==i:null===i};var ce=function getMapData(i,s){var _=i.__data__;return le(s)?_["string"==typeof s?"string":"hash"]:_.map};var ue=function mapCacheDelete(i){var s=ce(this,i).delete(i);return this.size-=s?1:0,s};var de=function mapCacheGet(i){return ce(this,i).get(i)};var he=function mapCacheHas(i){return ce(this,i).has(i)};var pe=function mapCacheSet(i,s){var _=ce(this,i),T=_.size;return _.set(i,s),this.size+=_.size==T?0:1,this};function MapCache(i){var s=-1,_=null==i?0:i.length;for(this.clear();++s<_;){var T=i[s];this.set(T[0],T[1])}}MapCache.prototype.clear=oe,MapCache.prototype.delete=ue,MapCache.prototype.get=de,MapCache.prototype.has=he,MapCache.prototype.set=pe;var me=MapCache;var fe=function stackSet(i,s){var _=this.__data__;if(_ instanceof j){var T=_.__data__;if(!Y.Z||T.length<199)return T.push([i,s]),this.size=++_.size,this;_=this.__data__=new me(T)}return _.set(i,s),this.size=_.size,this};function Stack(i){var s=this.__data__=new j(i);this.size=s.size}Stack.prototype.clear=$,Stack.prototype.delete=U,Stack.prototype.get=V,Stack.prototype.has=Z,Stack.prototype.set=fe;var ge=Stack},17685:function(i,s,_){"use strict";var T=_(66092).Z.Symbol;s.Z=T},63771:function(i,s,_){"use strict";var T=_(52889),S=_(91438),C=_(27771),P=_(65763),O=_(56009),M=_(18314),R=Object.prototype.hasOwnProperty;s.Z=function arrayLikeKeys(i,s){var _=(0,C.Z)(i),D=!_&&(0,S.Z)(i),j=!_&&!D&&(0,P.Z)(i),$=!_&&!D&&!j&&(0,M.Z)(i),U=_||D||j||$,V=U?(0,T.Z)(i.length,String):[],Z=V.length;for(var Y in i)!s&&!R.call(i,Y)||U&&("length"==Y||j&&("offset"==Y||"parent"==Y)||$&&("buffer"==Y||"byteLength"==Y||"byteOffset"==Y)||(0,O.Z)(Y,Z))||V.push(Y);return V}},74073:function(i,s){"use strict";s.Z=function arrayMap(i,s){for(var _=-1,T=null==i?0:i.length,S=Array(T);++_<T;)S[_]=s(i[_],_,i);return S}},67709:function(i,s){"use strict";s.Z=function arrayReduce(i,s,_,T){var S=-1,C=null==i?0:i.length;for(T&&C&&(_=i[++S]);++S<C;)_=s(_,i[S],S,i);return _}},46318:function(i,s){"use strict";s.Z=function asciiToArray(i){return i.split("")}},23194:function(i,s){"use strict";var _=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;s.Z=function asciiWords(i){return i.match(_)||[]}},72954:function(i,s,_){"use strict";var T=_(74752),S=_(79651),C=Object.prototype.hasOwnProperty;s.Z=function assignValue(i,s,_){var P=i[s];C.call(i,s)&&(0,S.Z)(P,_)&&(void 0!==_||s in i)||(0,T.Z)(i,s,_)}},74752:function(i,s,_){"use strict";var T=_(77904);s.Z=function baseAssignValue(i,s,_){"__proto__"==s&&T.Z?(0,T.Z)(i,s,{configurable:!0,enumerable:!0,value:_,writable:!0}):i[s]=_}},93242:function(i,s,_){"use strict";var T=(0,_(28419).Z)();s.Z=T},2693:function(i,s,_){"use strict";var T=_(93242),S=_(17179);s.Z=function baseForOwn(i,s){return i&&(0,T.Z)(i,s,S.Z)}},34492:function(i,s,_){"use strict";var T=_(17685),S=_(9432),C=_(80699),P=T.Z?T.Z.toStringTag:void 0;s.Z=function baseGetTag(i){return null==i?void 0===i?"[object Undefined]":"[object Null]":P&&P in Object(i)?(0,S.Z)(i):(0,C.Z)(i)}},24160:function(i,s,_){"use strict";var T=_(34492),S=_(18533);s.Z=function baseIsArguments(i){return(0,S.Z)(i)&&"[object Arguments]"==(0,T.Z)(i)}},91502:function(i,s,_){"use strict";var T=_(34492),S=_(1656),C=_(18533),P={};P["[object Float32Array]"]=P["[object Float64Array]"]=P["[object Int8Array]"]=P["[object Int16Array]"]=P["[object Int32Array]"]=P["[object Uint8Array]"]=P["[object Uint8ClampedArray]"]=P["[object Uint16Array]"]=P["[object Uint32Array]"]=!0,P["[object Arguments]"]=P["[object Array]"]=P["[object ArrayBuffer]"]=P["[object Boolean]"]=P["[object DataView]"]=P["[object Date]"]=P["[object Error]"]=P["[object Function]"]=P["[object Map]"]=P["[object Number]"]=P["[object Object]"]=P["[object RegExp]"]=P["[object Set]"]=P["[object String]"]=P["[object WeakMap]"]=!1,s.Z=function baseIsTypedArray(i){return(0,C.Z)(i)&&(0,S.Z)(i.length)&&!!P[(0,T.Z)(i)]}},48726:function(i,s,_){"use strict";var T=_(72764),S=_(47275),C=Object.prototype.hasOwnProperty;s.Z=function baseKeys(i){if(!(0,T.Z)(i))return(0,S.Z)(i);var s=[];for(var _ in Object(i))C.call(i,_)&&"constructor"!=_&&s.push(_);return s}},3956:function(i,s){"use strict";s.Z=function basePropertyOf(i){return function(s){return null==i?void 0:i[s]}}},47855:function(i,s){"use strict";s.Z=function baseSlice(i,s,_){var T=-1,S=i.length;s<0&&(s=-s>S?0:S+s),(_=_>S?S:_)<0&&(_+=S),S=s>_?0:_-s>>>0,s>>>=0;for(var C=Array(S);++T<S;)C[T]=i[T+s];return C}},52889:function(i,s){"use strict";s.Z=function baseTimes(i,s){for(var _=-1,T=Array(i);++_<i;)T[_]=s(_);return T}},42845:function(i,s,_){"use strict";var T=_(17685),S=_(74073),C=_(27771),P=_(72714),O=T.Z?T.Z.prototype:void 0,M=O?O.toString:void 0;s.Z=function baseToString(i){if("string"==typeof i)return i;if((0,C.Z)(i))return(0,S.Z)(i,baseToString)+"";if((0,P.Z)(i))return M?M.call(i):"";var s=i+"";return"0"==s&&1/i==-Infinity?"-0":s}},21162:function(i,s){"use strict";s.Z=function baseUnary(i){return function(s){return i(s)}}},68882:function(i,s,_){"use strict";var T=_(69203);s.Z=function castFunction(i){return"function"==typeof i?i:T.Z}},35042:function(i,s,_){"use strict";var T=_(47855);s.Z=function castSlice(i,s,_){var S=i.length;return _=void 0===_?S:_,!s&&_>=S?i:(0,T.Z)(i,s,_)}},33612:function(i,s,_){"use strict";_.d(s,{Z:function(){return S}});var T=_(66092).Z.Uint8Array;var S=function cloneArrayBuffer(i){var s=new i.constructor(i.byteLength);return new T(s).set(new T(i)),s}},91050:function(i,s,_){"use strict";var T=_(66092),S="object"==typeof exports&&exports&&!exports.nodeType&&exports,C=S&&"object"==typeof module&&module&&!module.nodeType&&module,P=C&&C.exports===S?T.Z.Buffer:void 0,O=P?P.allocUnsafe:void 0;s.Z=function cloneBuffer(i,s){if(s)return i.slice();var _=i.length,T=O?O(_):new i.constructor(_);return i.copy(T),T}},12701:function(i,s,_){"use strict";var T=_(33612);s.Z=function cloneTypedArray(i,s){var _=s?(0,T.Z)(i.buffer):i.buffer;return new i.constructor(_,i.byteOffset,i.length)}},87215:function(i,s){"use strict";s.Z=function copyArray(i,s){var _=-1,T=i.length;for(s||(s=Array(T));++_<T;)s[_]=i[_];return s}},31899:function(i,s,_){"use strict";var T=_(72954),S=_(74752);s.Z=function copyObject(i,s,_,C){var P=!_;_||(_={});for(var O=-1,M=s.length;++O<M;){var R=s[O],D=C?C(_[R],i[R],R,_,i):void 0;void 0===D&&(D=i[R]),P?(0,S.Z)(_,R,D):(0,T.Z)(_,R,D)}return _}},28419:function(i,s){"use strict";s.Z=function createBaseFor(i){return function(s,_,T){for(var S=-1,C=Object(s),P=T(s),O=P.length;O--;){var M=P[i?O:++S];if(!1===_(C[M],M,C))break}return s}}},17457:function(i,s,_){"use strict";var T=_(35042),S=_(39047),C=_(33237),P=_(77338);s.Z=function createCaseFirst(i){return function(s){s=(0,P.Z)(s);var _=(0,S.Z)(s)?(0,C.Z)(s):void 0,O=_?_[0]:s.charAt(0),M=_?(0,T.Z)(_,1).join(""):s.slice(1);return O[i]()+M}}},59561:function(i,s,_){"use strict";var T=_(67709),S=_(24327),C=_(53063),P=RegExp("[']","g");s.Z=function createCompounder(i){return function(s){return(0,T.Z)((0,C.Z)((0,S.Z)(s).replace(P,"")),i,"")}}},10779:function(i,s,_){"use strict";var T=(0,_(3956).Z)({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"});s.Z=T},77904:function(i,s,_){"use strict";var T=_(62508),S=function(){try{var i=(0,T.Z)(Object,"defineProperty");return i({},"",{}),i}catch(s){}}();s.Z=S},13413:function(i,s){"use strict";var _="object"==typeof global&&global&&global.Object===Object&&global;s.Z=_},62508:function(i,s,_){"use strict";_.d(s,{Z:function(){return Q}});var T,S=_(73234),C=_(66092).Z["__core-js_shared__"],P=(T=/[^.]+$/.exec(C&&C.keys&&C.keys.IE_PROTO||""))?"Symbol(src)_1."+T:"";var O=function isMasked(i){return!!P&&P in i},M=_(77226),R=_(90019),D=/^\[object .+?Constructor\]$/,j=Function.prototype,$=Object.prototype,U=j.toString,V=$.hasOwnProperty,Z=RegExp("^"+U.call(V).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Y=function baseIsNative(i){return!(!(0,M.Z)(i)||O(i))&&((0,S.Z)(i)?Z:D).test((0,R.Z)(i))};var X=function getValue(i,s){return null==i?void 0:i[s]};var Q=function getNative(i,s){var _=X(i,s);return Y(_)?_:void 0}},12513:function(i,s,_){"use strict";var T=(0,_(1851).Z)(Object.getPrototypeOf,Object);s.Z=T},9432:function(i,s,_){"use strict";var T=_(17685),S=Object.prototype,C=S.hasOwnProperty,P=S.toString,O=T.Z?T.Z.toStringTag:void 0;s.Z=function getRawTag(i){var s=C.call(i,O),_=i[O];try{i[O]=void 0;var T=!0}catch(M){}var S=P.call(i);return T&&(s?i[O]=_:delete i[O]),S}},39047:function(i,s){"use strict";var _=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");s.Z=function hasUnicode(i){return _.test(i)}},68734:function(i,s){"use strict";var _=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;s.Z=function hasUnicodeWord(i){return _.test(i)}},73658:function(i,s,_){"use strict";_.d(s,{Z:function(){return M}});var T=_(77226),S=Object.create,C=function(){function object(){}return function(i){if(!(0,T.Z)(i))return{};if(S)return S(i);object.prototype=i;var s=new object;return object.prototype=void 0,s}}(),P=_(12513),O=_(72764);var M=function initCloneObject(i){return"function"!=typeof i.constructor||(0,O.Z)(i)?{}:C((0,P.Z)(i))}},56009:function(i,s){"use strict";var _=/^(?:0|[1-9]\d*)$/;s.Z=function isIndex(i,s){var T=typeof i;return!!(s=null==s?9007199254740991:s)&&("number"==T||"symbol"!=T&&_.test(i))&&i>-1&&i%1==0&&i<s}},72764:function(i,s){"use strict";var _=Object.prototype;s.Z=function isPrototype(i){var s=i&&i.constructor;return i===("function"==typeof s&&s.prototype||_)}},47275:function(i,s,_){"use strict";var T=(0,_(1851).Z)(Object.keys,Object);s.Z=T},98351:function(i,s,_){"use strict";var T=_(13413),S="object"==typeof exports&&exports&&!exports.nodeType&&exports,C=S&&"object"==typeof module&&module&&!module.nodeType&&module,P=C&&C.exports===S&&T.Z.process,O=function(){try{var i=C&&C.require&&C.require("util").types;return i||P&&P.binding&&P.binding("util")}catch(s){}}();s.Z=O},80699:function(i,s){"use strict";var _=Object.prototype.toString;s.Z=function objectToString(i){return _.call(i)}},1851:function(i,s){"use strict";s.Z=function overArg(i,s){return function(_){return i(s(_))}}},66092:function(i,s,_){"use strict";var T=_(13413),S="object"==typeof self&&self&&self.Object===Object&&self,C=T.Z||S||Function("return this")();s.Z=C},33237:function(i,s,_){"use strict";var T=_(46318),S=_(39047),C=_(93688);s.Z=function stringToArray(i){return(0,S.Z)(i)?(0,C.Z)(i):(0,T.Z)(i)}},90019:function(i,s){"use strict";var _=Function.prototype.toString;s.Z=function toSource(i){if(null!=i){try{return _.call(i)}catch(s){}try{return i+""}catch(s){}}return""}},93688:function(i,s){"use strict";var _="[\\ud800-\\udfff]",T="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",S="\\ud83c[\\udffb-\\udfff]",C="[^\\ud800-\\udfff]",P="(?:\\ud83c[\\udde6-\\uddff]){2}",O="[\\ud800-\\udbff][\\udc00-\\udfff]",M="(?:"+T+"|"+S+")"+"?",R="[\\ufe0e\\ufe0f]?",D=R+M+("(?:\\u200d(?:"+[C,P,O].join("|")+")"+R+M+")*"),j="(?:"+[C+T+"?",T,P,O,_].join("|")+")",$=RegExp(S+"(?="+S+")|"+j+D,"g");s.Z=function unicodeToArray(i){return i.match($)||[]}},82434:function(i,s){"use strict";var _="\\u2700-\\u27bf",T="a-z\\xdf-\\xf6\\xf8-\\xff",S="A-Z\\xc0-\\xd6\\xd8-\\xde",C="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",P="["+C+"]",O="\\d+",M="[\\u2700-\\u27bf]",R="["+T+"]",D="[^\\ud800-\\udfff"+C+O+_+T+S+"]",j="(?:\\ud83c[\\udde6-\\uddff]){2}",$="[\\ud800-\\udbff][\\udc00-\\udfff]",U="["+S+"]",V="(?:"+R+"|"+D+")",Z="(?:"+U+"|"+D+")",Y="(?:['](?:d|ll|m|re|s|t|ve))?",X="(?:['](?:D|LL|M|RE|S|T|VE))?",Q="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",ee="[\\ufe0e\\ufe0f]?",te=ee+Q+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",j,$].join("|")+")"+ee+Q+")*"),ne="(?:"+[M,j,$].join("|")+")"+te,re=RegExp([U+"?"+R+"+"+Y+"(?="+[P,U,"$"].join("|")+")",Z+"+"+X+"(?="+[P,U+V,"$"].join("|")+")",U+"?"+V+"+"+Y,U+"+"+X,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",O,ne].join("|"),"g");s.Z=function unicodeWords(i){return i.match(re)||[]}},90504:function(i,s,_){"use strict";var T=_(26786),S=(0,_(59561).Z)((function(i,s,_){return s=s.toLowerCase(),i+(_?(0,T.Z)(s):s)}));s.Z=S},26786:function(i,s,_){"use strict";var T=_(77338),S=_(11288);s.Z=function capitalize(i){return(0,S.Z)((0,T.Z)(i).toLowerCase())}},24327:function(i,s,_){"use strict";var T=_(10779),S=_(77338),C=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,P=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");s.Z=function deburr(i){return(i=(0,S.Z)(i))&&i.replace(C,T.Z).replace(P,"")}},79651:function(i,s){"use strict";s.Z=function eq(i,s){return i===s||i!=i&&s!=s}},92414:function(i,s,_){"use strict";var T=_(2693),S=_(68882);s.Z=function forOwn(i,s){return i&&(0,T.Z)(i,(0,S.Z)(s))}},69203:function(i,s){"use strict";s.Z=function identity(i){return i}},91438:function(i,s,_){"use strict";var T=_(24160),S=_(18533),C=Object.prototype,P=C.hasOwnProperty,O=C.propertyIsEnumerable,M=(0,T.Z)(function(){return arguments}())?T.Z:function(i){return(0,S.Z)(i)&&P.call(i,"callee")&&!O.call(i,"callee")};s.Z=M},27771:function(i,s){"use strict";var _=Array.isArray;s.Z=_},50585:function(i,s,_){"use strict";var T=_(73234),S=_(1656);s.Z=function isArrayLike(i){return null!=i&&(0,S.Z)(i.length)&&!(0,T.Z)(i)}},65763:function(i,s,_){"use strict";var T=_(66092),S=_(7979),C="object"==typeof exports&&exports&&!exports.nodeType&&exports,P=C&&"object"==typeof module&&module&&!module.nodeType&&module,O=P&&P.exports===C?T.Z.Buffer:void 0,M=(O?O.isBuffer:void 0)||S.Z;s.Z=M},73234:function(i,s,_){"use strict";var T=_(34492),S=_(77226);s.Z=function isFunction(i){if(!(0,S.Z)(i))return!1;var s=(0,T.Z)(i);return"[object Function]"==s||"[object GeneratorFunction]"==s||"[object AsyncFunction]"==s||"[object Proxy]"==s}},1656:function(i,s){"use strict";s.Z=function isLength(i){return"number"==typeof i&&i>-1&&i%1==0&&i<=9007199254740991}},77226:function(i,s){"use strict";s.Z=function isObject(i){var s=typeof i;return null!=i&&("object"==s||"function"==s)}},18533:function(i,s){"use strict";s.Z=function isObjectLike(i){return null!=i&&"object"==typeof i}},72714:function(i,s,_){"use strict";var T=_(34492),S=_(18533);s.Z=function isSymbol(i){return"symbol"==typeof i||(0,S.Z)(i)&&"[object Symbol]"==(0,T.Z)(i)}},18314:function(i,s,_){"use strict";var T=_(91502),S=_(21162),C=_(98351),P=C.Z&&C.Z.isTypedArray,O=P?(0,S.Z)(P):T.Z;s.Z=O},17179:function(i,s,_){"use strict";var T=_(63771),S=_(48726),C=_(50585);s.Z=function keys(i){return(0,C.Z)(i)?(0,T.Z)(i):(0,S.Z)(i)}},32957:function(i,s,_){"use strict";_.d(s,{Z:function(){return D}});var T=_(63771),S=_(77226),C=_(72764);var P=function nativeKeysIn(i){var s=[];if(null!=i)for(var _ in Object(i))s.push(_);return s},O=Object.prototype.hasOwnProperty;var M=function baseKeysIn(i){if(!(0,S.Z)(i))return P(i);var s=(0,C.Z)(i),_=[];for(var T in i)("constructor"!=T||!s&&O.call(i,T))&&_.push(T);return _},R=_(50585);var D=function keysIn(i){return(0,R.Z)(i)?(0,T.Z)(i,!0):M(i)}},7979:function(i,s){"use strict";s.Z=function stubFalse(){return!1}},77338:function(i,s,_){"use strict";var T=_(42845);s.Z=function toString(i){return null==i?"":(0,T.Z)(i)}},11288:function(i,s,_){"use strict";var T=(0,_(17457).Z)("toUpperCase");s.Z=T},53063:function(i,s,_){"use strict";var T=_(23194),S=_(68734),C=_(77338),P=_(82434);s.Z=function words(i,s,_){return i=(0,C.Z)(i),void 0===(s=_?void 0:s)?(0,S.Z)(i)?(0,P.Z)(i):(0,T.Z)(i):i.match(s)||[]}}},j={};function __webpack_require__(i){var s=j[i];if(void 0!==s)return s.exports;var _=j[i]={id:i,loaded:!1,exports:{}};return D[i].call(_.exports,_,_.exports,__webpack_require__),_.loaded=!0,_.exports}__webpack_require__.m=D,__webpack_require__.amdO={},__webpack_require__.n=function(i){var s=i&&i.__esModule?function(){return i.default}:function(){return i};return __webpack_require__.d(s,{a:s}),s},s=Object.getPrototypeOf?function(i){return Object.getPrototypeOf(i)}:function(i){return i.__proto__},__webpack_require__.t=function(_,T){if(1&T&&(_=this(_)),8&T)return _;if("object"==typeof _&&_){if(4&T&&_.__esModule)return _;if(16&T&&"function"==typeof _.then)return _}var S=Object.create(null);__webpack_require__.r(S);var C={};i=i||[null,s({}),s([]),s(s)];for(var P=2&T&&_;"object"==typeof P&&!~i.indexOf(P);P=s(P))Object.getOwnPropertyNames(P).forEach((function(i){C[i]=function(){return _[i]}}));return C.default=function(){return _},__webpack_require__.d(S,C),S},__webpack_require__.d=function(i,s){for(var _ in s)__webpack_require__.o(s,_)&&!__webpack_require__.o(i,_)&&Object.defineProperty(i,_,{enumerable:!0,get:s[_]})},__webpack_require__.f={},__webpack_require__.e=function(i){return Promise.all(Object.keys(__webpack_require__.f).reduce((function(s,_){return __webpack_require__.f[_](i,s),s}),[]))},__webpack_require__.u=function(i){return 448===i?"web.chunk.client.5bb8e19c.js":347===i?"web.chunk.client.64012267.js":797===i?"web.chunk.client.34443d80.js":416===i?"web.chunk.client.3e0ebf6c.js":48===i?"web.chunk.client.1a637058.js":790===i?"web.chunk.client.67b8d1ec.js":614===i?"gift-membership-modal.chunk.client.ae41e6b0.js":210===i?"user-report-modal.chunk.client.fef340db.js":284===i?"trophy-popover.chunk.client.f163f1b7.js":435===i?"guest-modal.chunk.client.5f4e32d0.js":820===i?"web.chunk.client.eab5f816.js":47===i?"web.chunk.client.f9fe8c72.js":534===i?"boot-diagram-viewer.chunk.client.ac3ca1fb.js":174===i?"web.chunk.client.5531b652.js":379===i?"payment-method-paypal.chunk.client.5d22002a.js":341===i?"web.chunk.client.2125dd5a.js":void 0},__webpack_require__.miniCssF=function(i){return 142===i?"puzzles-beta.client.35ff2959.css":614===i?"gift-membership-modal.chunk.client.6fd76e6d.css":210===i?"user-report-modal.chunk.client.de994533.css":284===i?"trophy-popover.chunk.client.c05b20e6.css":47===i?"web.chunk.client.433dbb16.css":534===i?"boot-diagram-viewer.chunk.client.4348aaca.css":174===i?"web.chunk.client.d6241bc7.css":379===i?"payment-method-paypal.chunk.client.1a5f8dff.css":341===i?"web.chunk.client.348633b8.css":void 0},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(i){if("object"==typeof window)return window}}(),__webpack_require__.hmd=function(i){return(i=Object.create(i)).children||(i.children=[]),Object.defineProperty(i,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+i.id)}}),i},__webpack_require__.o=function(i,s){return Object.prototype.hasOwnProperty.call(i,s)},_={},T="client:",__webpack_require__.l=function(i,s,S,C){if(_[i])_[i].push(s);else{var P,O;if(void 0!==S)for(var M=document.getElementsByTagName("script"),R=0;R<M.length;R++){var D=M[R];if(D.getAttribute("src")==i||D.getAttribute("data-webpack")==T+S){P=D;break}}P||(O=!0,(P=document.createElement("script")).charset="utf-8",P.timeout=120,__webpack_require__.nc&&P.setAttribute("nonce",__webpack_require__.nc),P.setAttribute("data-webpack",T+S),P.src=i),_[i]=[s];var onScriptComplete=function(s,T){P.onerror=P.onload=null,clearTimeout(j);var S=_[i];if(delete _[i],P.parentNode&&P.parentNode.removeChild(P),S&&S.forEach((function(i){return i(T)})),s)return s(T)},j=setTimeout(onScriptComplete.bind(null,void 0,{type:"timeout",target:P}),12e4);P.onerror=onScriptComplete.bind(null,P.onerror),P.onload=onScriptComplete.bind(null,P.onload),O&&document.head.appendChild(P)}},__webpack_require__.r=function(i){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},__webpack_require__.p="/bundles/app/js/",S=__webpack_require__.u,C=__webpack_require__.e,P=new Map,O=new Map,__webpack_require__.u=function(i){return S(i)+(P.has(i)?"?"+P.get(i):"")},__webpack_require__.e=function(i){return C(i).catch((function(s){var _=O.has(i)?O.get(i):2;if(_<1){var T=S(i);throw s.message="Loading chunk "+i+" failed after 2 retries.\n("+T+")",s.request=T,s}return new Promise((function(s){setTimeout((function(){var T="cache-bust=true&retry-attempt="+(2-_+1);P.set(i,T),O.set(i,_-1),s(__webpack_require__.e(i))}),0)}))}))},M=function(i){return new Promise((function(s,_){var T=__webpack_require__.miniCssF(i),S=window.__CHESSCOM_RTL__,C="/bundles/app/css/"+T;if(function(i,s){for(var _=document.getElementsByTagName("link"),T=0;T<_.length;T++){var S=(P=_[T]).getAttribute("data-href")||P.getAttribute("href");if("stylesheet"===P.rel&&(S===i||S===s))return P}var C=document.getElementsByTagName("style");for(T=0;T<C.length;T++){var P;if((S=(P=C[T]).getAttribute("data-href"))===i||S===s)return P}}(T,C))return s();S&&(C=C.replace(/\.css/i,".rtl.css")),function(i,s,_,T){var S=document.createElement("link");S.rel="stylesheet",S.type="text/css",S.onerror=S.onload=function(C){if(S.onerror=S.onload=null,"load"===C.type)_();else{var P=C&&("load"===C.type?"missing":C.type),O=C&&C.target&&C.target.href||s,M=new Error("Loading CSS chunk "+i+" failed.\n("+O+")");M.code="CSS_CHUNK_LOAD_FAILED",M.type=P,M.request=O,S.parentNode.removeChild(S),T(M)}},S.href=s,document.head.appendChild(S)}(i,C,s,_)}))},R={142:0},__webpack_require__.f.miniCss=function(i,s){R[i]?s.push(R[i]):0!==R[i]&&{47:1,174:1,210:1,284:1,341:1,379:1,534:1,614:1}[i]&&s.push(R[i]=M(i).then((function(){R[i]=0}),(function(s){throw delete R[i],s})))},function(){var i={142:0};__webpack_require__.f.j=function(s,_){var T=__webpack_require__.o(i,s)?i[s]:void 0;if(0!==T)if(T)_.push(T[2]);else{var S=new Promise((function(_,S){T=i[s]=[_,S]}));_.push(T[2]=S);var C=__webpack_require__.p+__webpack_require__.u(s),P=new Error;__webpack_require__.l(C,(function(_){if(__webpack_require__.o(i,s)&&(0!==(T=i[s])&&(i[s]=void 0),T)){var S=_&&("load"===_.type?"missing":_.type),C=_&&_.target&&_.target.src;P.message="Loading chunk "+s+" failed.\n("+S+": "+C+")",P.name="ChunkLoadError",P.type=S,P.request=C,T[1](P)}}),"chunk-"+s,s)}};var webpackJsonpCallback=function(s,_){var T,S,C=_[0],P=_[1],O=_[2],M=0;if(C.some((function(s){return 0!==i[s]}))){for(T in P)__webpack_require__.o(P,T)&&(__webpack_require__.m[T]=P[T]);if(O)O(__webpack_require__)}for(s&&s(_);M<C.length;M++)S=C[M],__webpack_require__.o(i,S)&&i[S]&&i[S][0](),i[S]=0},s=("undefined"!=typeof self?self:this).wpChessCom_X7Gu=("undefined"!=typeof self?self:this).wpChessCom_X7Gu||[];s.forEach(webpackJsonpCallback.bind(null,0)),s.push=webpackJsonpCallback.bind(null,s.push.bind(s))}(),function(){"use strict";var i={};__webpack_require__.r(i),__webpack_require__.d(i,{JsonPatchError:function(){return Yw},_areEquals:function(){return _areEquals},applyOperation:function(){return applyOperation},applyPatch:function(){return applyPatch},applyReducer:function(){return applyReducer},deepClone:function(){return Xw},getValueByPointer:function(){return getValueByPointer},validate:function(){return validate},validator:function(){return validator}});var s={};__webpack_require__.r(s),__webpack_require__.d(s,{compare:function(){return compare},generate:function(){return generate},observe:function(){return observe},unobserve:function(){return unobserve}});var _={};__webpack_require__.r(_),__webpack_require__.d(_,{acceptChallenge:function(){return accept_challenge_acceptChallenge},acceptRematch:function(){return acceptRematch},addBoardEffects:function(){return addBoardEffects},addRoundResult:function(){return addRoundResult},analyzePuzzleResult:function(){return analyzePuzzleResult},battleAborted:function(){return battleAborted},battleCreated:function(){return battleCreated},battleTimedOut:function(){return battleTimedOut},boardMakeMove:function(){return boardMakeMove},cancelBattle:function(){return cancel_battle_cancelBattle},cancelChallenge:function(){return cancel_challenge_cancelChallenge},cancelRematch:function(){return cancelRematch},cancelSeek:function(){return cancel_seek_cancelSeek},challengeUserFromUrl:function(){return challengeUserFromUrl},claimWin:function(){return claim_win_claimWin},claimWinPossible:function(){return claimWinPossible},createChallenge:function(){return create_challenge_createChallenge},createChallenges:function(){return createChallenges},createMatch:function(){return create_match_createMatch},declineChallenge:function(){return decline_challenge_declineChallenge},declineRematch:function(){return declineRematch},destroyBattlesClient:function(){return destroyBattlesClient},endSession:function(){return endSession},enterAnalysisBoard:function(){return enterAnalysisBoard},exitAnalysisBoard:function(){return exitAnalysisBoard},findNewBattle:function(){return findNewBattle},followUser:function(){return follow_user_followUser},getBattleInfo:function(){return getBattleInfo},getLeaderboard:function(){return getLeaderboard},getObservableGames:function(){return get_observable_games_getObservableGames},getUserInfo:function(){return get_user_info_getUserInfo},handleConsoleInput:function(){return handleConsoleInput},initBattlesClient:function(){return initBattlesClient},initPlayerOrObserver:function(){return initPlayerOrObserver},initPuzzleBattle:function(){return initPuzzleBattle},initTwoBoards:function(){return initTwoBoards},initializePuzzle:function(){return initializePuzzle},initializeRoundState:function(){return initializeRoundState},loadArchivedBattle:function(){return loadArchivedBattle},loadBattle:function(){return load_battle_loadBattle},loadNextPuzzle:function(){return load_next_puzzle_loadNextPuzzle},observeBattle:function(){return observe_battle_observeBattle},observeNextBattle:function(){return observeNextBattle},observePlayer:function(){return observePlayer},observedPlayerMove:function(){return observed_player_move_observedPlayerMove},playerFinished:function(){return player_finished_playerFinished},rematch:function(){return rematch},removeChallenge:function(){return removeChallenge},resetRoundState:function(){return resetRoundState},resetToStartView:function(){return resetToStartView},startSession:function(){return startSession},stopObserving:function(){return stopObserving},toggleBattleAnalysisBoard:function(){return toggleBattleAnalysisBoard},unfollowUser:function(){return unfollow_user_unfollowUser},updateBattle:function(){return updateBattle},updateChallenge:function(){return update_challenge_updateChallenge},updatePlayerResult:function(){return update_player_result_updatePlayerResult},updatePuzzle:function(){return updatePuzzle}});var T={};__webpack_require__.r(T),__webpack_require__.d(T,{addRoundResult:function(){return add_round_result_addRoundResult},fetchInitialPuzzle:function(){return fetchInitialPuzzle},handleThemeClick:function(){return handle_theme_click_handleThemeClick},initializeRatingRange:function(){return initializeRatingRange},nextPuzzle:function(){return nextPuzzle},playerMoveIncorrect:function(){return playerMoveIncorrect},puzzleSolved:function(){return puzzleSolved},quitPuzzle:function(){return quitPuzzle},showNoPuzzlesFoundModal:function(){return showNoPuzzlesFoundModal},startLearnIfTagsInUrl:function(){return startLearnIfTagsInUrl},startSession:function(){return start_session_startSession},submitMoves:function(){return submitMoves}});var S={};__webpack_require__.r(S),__webpack_require__.d(S,{addRoundResult:function(){return actions_add_round_result_addRoundResult},fetchRatingOverTime:function(){return fetchRatingOverTime},getNextPuzzle:function(){return get_next_puzzle_getNextPuzzle},nextPuzzle:function(){return next_puzzle_nextPuzzle},playerMoveIncorrect:function(){return player_move_incorrect_playerMoveIncorrect},puzzleSolved:function(){return puzzle_solved_puzzleSolved},restartPuzzle:function(){return restartPuzzle},retryPuzzle:function(){return retryPuzzle},startNextPuzzleFromCache:function(){return startNextPuzzleFromCache},startPuzzle:function(){return startPuzzle},startSession:function(){return actions_start_session_startSession},submitMoves:function(){return submit_moves_submitMoves}});var C={};__webpack_require__.r(C),__webpack_require__.d(C,{addRoundResult:function(){return rush_actions_add_round_result_addRoundResult},beginChallenge:function(){return beginChallenge},clearUnselectedLeaderboards:function(){return clearUnselectedLeaderboards},endChallenge:function(){return end_challenge_endChallenge},endSession:function(){return end_session_endSession},getFriendsLeaderboard:function(){return get_friends_leaderboard_getFriendsLeaderboard},getGlobalLeaderboard:function(){return get_global_leaderboard_getGlobalLeaderboard},getPersonalLeaderboard:function(){return get_personal_leaderboard_getPersonalLeaderboard},getPlayerStats:function(){return get_player_stats_getPlayerStats},getPuzzleBatch:function(){return getPuzzleBatch},loadNextPuzzle:function(){return actions_load_next_puzzle_loadNextPuzzle},moveToNextRound:function(){return moveToNextRound},playerMoveIncorrect:function(){return actions_player_move_incorrect_playerMoveIncorrect},puzzleSolved:function(){return actions_puzzle_solved_puzzleSolved},removeCachedOngoingChallenge:function(){return removeCachedOngoingChallenge},startRound:function(){return startRound},startSession:function(){return rush_actions_start_session_startSession},updateOngoingChallengeCache:function(){return updateOngoingChallengeCache},viewTactic:function(){return viewTactic}});var P={};__webpack_require__.r(P),__webpack_require__.d(P,{boardMakeMove:function(){return board_make_move_boardMakeMove},castThemeVote:function(){return castThemeVote},endSession:function(){return actions_end_session_endSession},fetchAllPuzzleThemes:function(){return fetchAllPuzzleThemes},fetchPuzzleThemes:function(){return fetchPuzzleThemes},getUserStats:function(){return getUserStats},initializePuzzle:function(){return actions_initialize_puzzle_initializePuzzle},limitReached:function(){return limitReached},makeComputerMove:function(){return makeComputerMove},moveBackward:function(){return moveBackward},moveForward:function(){return moveForward},openInAnalysis:function(){return open_in_analysis_openInAnalysis},parseTcnMoveList:function(){return parse_tcn_move_list_parseTcnMoveList},playerMoveCorrect:function(){return playerMoveCorrect},playerMoveIncorrect:function(){return shared_actions_player_move_incorrect_playerMoveIncorrect},puzzleSolved:function(){return shared_actions_puzzle_solved_puzzleSolved},reportCurrentPuzzle:function(){return reportCurrentPuzzle},retryPuzzle:function(){return retry_puzzle_retryPuzzle},saveShowDetails:function(){return save_show_details_saveShowDetails},saveShowTimer:function(){return save_show_timer_saveShowTimer},scheduleAutoMove:function(){return scheduleAutoMove},selectPuzzleMode:function(){return selectPuzzleMode},setBoardPosition:function(){return setBoardPosition},showMoveHint:function(){return showMoveHint},showSolution:function(){return showSolution},startCurrentPuzzle:function(){return startCurrentPuzzle},startResumeMode:function(){return startResumeMode},startSession:function(){return shared_actions_start_session_startSession},suggestTheme:function(){return suggestTheme}});const detectAdBlockByDiv=()=>{const i=document.createElement("div");i.id="adBanner_",i.classList.add("adLeaderboard","adBanner","leaderboard_ad"),i.style.backgroundColor="transparent",i.style.height="10px",i.style.width="10px",i.style.position="fixed",i.style.bottom="-100px",i.style.left="-100px",i.innerHTML="&nbsp;",document.body.appendChild(i),window.chesscom.adBlockDetected=0===i.getBoundingClientRect().height},detectAdBlockByImg=()=>{const i=new Image;i.src="https://px.moatads.com/pixel.gif",i.onerror=()=>{window.chesscom.adBlockDetected=!0}};var O=__webpack_require__(86673),M=__webpack_require__(42496),R=__webpack_require__(36523),D=__webpack_require__(25014),j=__webpack_require__(32305);const $="black",U="blackTransparent",V="green",Z="grey",Y="lightGrey",X="red",getBattleServiceUrl=i=>`${window.chesscom.puzzles.battleServiceUri}${i.replace(/^\//,"")}`,Q="rating",ee="season-points",te=((0,j.dW)("Season Points"),(0,j.jn)("{1} 1 min Rating|]1,Inf] %1$s% min Rating",3,{"%1$s%":3}),180),ne="show-battle-over-modal",re="hide-battle-over-modal",ie="show-modal-battle-countdown",ae="start-timer",se="stop-timer",oe=4,le=0,ce="battle-aborted",ue="battle-created",de="battle-confirmed",he="battle-timed-out",pe="load-battle",me="player-move",fe="next-puzzle",ge="player-finished",ve="update-connection-quality",be="update-player-result",ye="open-battle",_e="close-battle",we="update-challenge",ke="claim-win-possible",Te="create-seek",Se="cancel-seek",Ce="accept-challenge",xe="decline-challenge",Ee="observe-battle",Pe="create-challenge",Ae="unfollowed-user",Oe="follow-user",Me="unfollow-user",ze="created",Ie="cancelled",Le="denied",Re="puzzle-battle-over-modal",defaultPeripheralView=()=>({headingTheme:U,headingTitle:yn[vn.BATTLE]}),config_routes_abortBattle=i=>D.Z.generate("web_tactics_battle_callback_battle_abort",{id:i}),config_routes_acceptChallenge=i=>D.Z.generate("web_tactics_battle_callback_challenge_accept",{id:i}),config_routes_cancelChallenge=i=>D.Z.generate("web_tactics_battle_callback_challenge_cancel",{id:i}),config_routes_createChallenge=()=>D.Z.generate("web_tactics_battle_callback_challenge_create"),config_routes_declineChallenge=i=>D.Z.generate("web_tactics_battle_callback_challenge_deny",{id:i}),config_routes_createMatch=()=>D.Z.generate("web_tactics_battle_callback_create_match"),config_routes_createSeek=()=>D.Z.generate("web_tactics_battle_callback_seek_create"),config_routes_cancelSeek=()=>D.Z.generate("web_tactics_battle_callback_seek_cancel"),config_routes_cancelBattle=(i,s)=>getBattleServiceUrl(`games/${i}/players/${s}`),config_routes_updatePlayerState=(i,s)=>getBattleServiceUrl(`games/${i}/players/${s}`),config_routes_getBattle=i=>getBattleServiceUrl(`games/${i}`),config_routes_getBattlePuzzles=(i,s)=>{const _=new URLSearchParams({withPuzzles:!0,userId:s});return getBattleServiceUrl(`games/${i}/puzzles?${_.toString()}`)},config_routes_getBattles=i=>getBattleServiceUrl(`games?userId=${i}`),config_routes_getBattleViewInfo=i=>D.Z.generate("web_tactics_battle_callback_battle_view",i),config_routes_getFriendsLeaderboard=i=>D.Z.generate("web_tactics_battle_callback_leaderboard_friends",i),config_routes_getGlobalLeaderboard=i=>D.Z.generate("web_tactics_battle_callback_leaderboard",i),config_routes_getObservableGameList=()=>D.Z.generate("web_tactics_battle_callback_observe_list"),config_routes_getUserInfo=()=>D.Z.generate("web_tactics_battle_callback_stats_user"),config_routes_getPresenceData=i=>{return s=`users/${i}`,`${window.chesscom.puzzles.presenceServiceUri}${s.replace(/^\//,"")}`;var s},config_routes_getUserByUsername=i=>D.Z.generate("web_user_callback_popup",{username:i}),config_routes_submitMoves=(i,s)=>getBattleServiceUrl(`games/${i}/players/${s}/puzzles`),Ne={ABORTED:"aborted",CANCELLED:"cancelled",CLAIMED_WIN:"claimedWin",COMPLETED:"completed",CONFIRMED:"confirmed",CONFIRMING:"confirming",PLAYING:"playing",TIMED_OUT:"timedOut",STRUCK_OUT:"struckOut"},De="aborted",je="completed",Be="confirmed",$e="confirming",Ue="playing",Fe="timedOut",He="standard",qe="draw",Ve="loss",Ge="win",Ze="init",We="confirming",Ke="confirmed",Ye="running",Xe="completed",Qe="failed",Je="playing",et={ADVANCE_TO_NEXT_PUZZLE_TIMEOUT:{}},tt={ADVANCE_TO_NEXT_PUZZLE_DELAY:{[R.zI.DEFAULT]:400,[R.zI.NONE]:100},BATTLE_OVER_SOUND_DELAY:200,BATTLE_DISCONNECT_TOAST_DELAY:2500,FOLLOW_TOP_BATTLE_DELAY:3e3,OBSERVED_COUNTER_MOVE_DELAY:200,PUZZLE_OVER_SOUND_DELAY:200,SEASON_POINTS_FOOTER_ANIMATION_DELAY:400,SEASON_POINTS_FOOTER_ANIMATION_DURATION:600,START_COUNTDOWN_DELAY:800},nt={ABORTED:(0,j.dW)("Aborted"),BATTLE_OVER:(0,j.dW)("Battle Over"),CONNECTION_INTERRUPTED:(0,j.dW)("Connection Lost. Trying to reconnect..."),DISCONNECTED:(0,j.dW)("Disconnected"),DISCONNECTED_MESSAGE:(0,j.dW)("Please reconnect and refresh to see final results of this battle."),NOT_ACCEPTING_CHALLENGES:(0,j.dW)("Player is not accepting challenges."),CHALLENGE_CANCELED:(0,j.dW)("Challenge has been canceled"),FOLLOW:(0,j.dW)("Follow Battle"),UNFOLLOW:(0,j.dW)("Unfollow Battle")},rt="puzzleBattleFollowingUser",it={loadBattle:Promise.resolve()};var at=__webpack_require__(71340),st=__webpack_require__(89884);const ot="puzzlesLearningSettings",lt="puzzlesLearningSelectedThemes",ct={all:{value:1,label:(0,j.dW)("All Puzzles")},failed:{value:0,label:(0,j.dW)("Puzzles I Have Failed")}},ut={tacticsThemeTraining:D.Z.generate("web_tactic_theme_training"),tacticsThemeTrainingSubmitMoves:D.Z.generate("web_tactic_callback_theme_training_submit_moves")},dt=(at.mx,{allThemes:(0,j.dW)("All Themes"),learning:(0,j.dW)("Learning"),noPuzzlesFound:(0,j.dW)("No puzzles found. Please select new themes or adjust the rating range to get more results."),tryAgain:(0,j.dW)("Try Again"),unsolved:(0,j.dW)("Unsolved")});var ht=__webpack_require__(18160);const problem_config_routes_practicePuzzle=i=>D.Z.generate("web_tactic_practice",i),pt={ATTEMPTS:ht.Z.trans("Attempts"),PASS_RATE:ht.Z.trans("Pass Rate")},mt={CHART_WRAPPER:"boardWrapper"},ft=100,gt="boardPopover/hide",vt="boardPopover/show",bt="rated-start-timer",yt="rated-stop-timer",_t="puzzles-board-popover",wt={CLOCK_INTERVAL:100,RATING_ANIMATION_DELAY:1e3,RATING_ANIMATION_DURATION:1e3},kt={guest:(0,j.dW)("Guest"),incorrect:(0,j.dW)("Incorrect"),numberOfSecs:i=>(0,j.jn)("{0} 0 secs|{1} 1 sec|]1,Inf] %number% secs",i,{"%number%":i}),pending:(0,j.dW)("Pending"),rating:(0,j.dW)("Rating"),score:(0,j.dW)("Score"),solution:(0,j.dW)("Solution"),unrated:(0,j.dW)("Unrated")},Tt="solved",St={getRatingOverTime:({username:i,daysAgo:s})=>D.Z.generate("web_stats_tactics_chart_data_callback",i,{daysAgo:s}),nextProblem:D.Z.generate("web_tactics_callback_rated_next"),submitMoves:D.Z.generate("web_tactic_callback_submit_moves"),guestSubmitMoves:D.Z.generate("web_tactic_callback_submit_moves_unrated"),userStats:i=>D.Z.generate("web_stats_tactics",{username:i})};var Ct=__webpack_require__(1849);const xt={CORRECT:"correct-2-15",COUNTDOWN:"countdown-2-15",INCORRECT:"incorrect-2-15",OVER_BAD:"result-bad-2-15",OVER_GOOD:"result-good-2-15",OVER_OK:"result-ok-2-15",TIME_WARNING:"tenseconds",OPPONENT_CORRECT:"opponent-correct",OPPONENT_FAIL:"opponent-fail",OPPONENT_INCORRECT:"opponent-incorrect"},Et=new Ct.Z(null,Object.values(xt));function playSoundEffect(i){st.default.state.board.boardOptions.playSounds&&Et.play(i)}const Pt={ALL:"all",DAILY:"day",HOURLY:"hour"},At={FRIENDS:"friends",GLOBAL:"global",PERSONAL:"personal"},Ot="ongoing-rush-challenges",Mt="hide-modal-rush-over",zt="play-rush-over-sound",It="show-modal-rush-countdown",Lt="show-modal-rush-over",Rt="show-modal-rush-share",Nt=[{icon:"trophy-podium",label:(0,j.dW)("Global"),value:At.GLOBAL},{icon:"users-alt",label:(0,j.dW)("Friends"),value:At.FRIENDS},{icon:"user",label:(0,j.dW)("Personal"),value:At.PERSONAL}],Dt="all",jt="day",Bt="hour",defaultLeaderboardsState=i=>({currentFilter:i,[kn.FIVE_MINUTES]:{[Dt]:{currentUser:{rank:null,score:null},empty:!0,leaderboard:[]},[jt]:{currentUser:{rank:null,score:null},empty:!0,leaderboard:[]},[Bt]:{currentUser:{rank:null,score:null},empty:!0,leaderboard:[]}},[kn.THREE_MINUTES]:{[Dt]:{currentUser:{rank:null,score:null},empty:!0,leaderboard:[]},[jt]:{currentUser:{rank:null,score:null},empty:!0,leaderboard:[]},[Bt]:{currentUser:{rank:null,score:null},empty:!0,leaderboard:[]}},[kn.SURVIVAL]:{[Dt]:{currentUser:{rank:null,score:null},empty:!0,leaderboard:[]},[jt]:{currentUser:{rank:null,score:null},empty:!0,leaderboard:[]},[Bt]:{currentUser:{rank:null,score:null},empty:!0,leaderboard:[]}}}),$t=[{label:(0,j.dW)("All"),value:Dt},{label:(0,j.dW)("Hourly"),value:Bt},{label:(0,j.dW)("daily_leaderboard",{},"mobile"),value:jt}],Ut="puzzle-modal-rush-countdown",Ft="puzzle-modal-rush-over",Ht="puzzle-modal-rush-share",qt="black",Vt={archiveChallenge:({shortUuid:i,username:s})=>D.Z.generate("web_puzzles_mode_view",{mode:vn.RUSH,shortUuid:i,username:s}),friendsLeaderboard:i=>D.Z.generate("web_tactics_callback_challenge_leaderboard_friends",i),globalLeaderboard:i=>D.Z.generate("web_tactics_callback_challenge_leaderboard",i),personalLeaderboard:i=>D.Z.generate("web_tactics_callback_challenge_leaderboard_personal",i),shareImage:i=>D.Z.generate("web_dynboard_puzzle_rush",{id:i}),shareNewImage:({username:i,shortUuid:s})=>D.Z.generate("share_puzzle_rush_image",{mode:vn.RUSH,username:i,shortUuid:s}),tacticView:i=>D.Z.generate("web_tactic_view",{id:i}),userRushArchive:D.Z.generate("web_tactic_challenge_archive"),userStats:i=>D.Z.generate("web_tactics_callback_challenge_stats_user",i),viewChallenge:i=>D.Z.generate("web_tactics_callback_challenge_view",{challengeId:i}),beginChallenge:D.Z.generate("web_tactics_callback_challenge_begin"),getPuzzleBatch:D.Z.generate("web_tactics_callback_challenge_puzzles"),endChallenge:D.Z.generate("web_tactics_callback_challenge_end")},Gt="day",Zt="global",Wt="week",Kt=[{icon:"calendar",key:Gt,label:(0,j.dW)("Today")},{icon:"calendar",key:Wt,label:(0,j.dW)("This week")},{icon:"cycle",key:Zt,label:(0,j.dW)("All time")}],Yt="archived",Xt="tier_1",Qt="tier_2",Jt="tier_3",en="tier_4",tn="tier_daily",nn="tier_weekly",rn="finish",an="play",sn="start",ln={amazing:(0,j.dW)("Amazing!"),bestEver:(0,j.dW)("Best Ever!"),bestToday:(0,j.dW)("Best Today!"),excellent:(0,j.dW)("Excellent!"),go:(0,j.dW)("Go!"),goodEffort:(0,j.dW)("Good Effort"),goodJob:(0,j.dW)("Good Job"),greatSolving:(0,j.dW)("Great Solving!"),highScore:(0,j.dW)("High Score!"),keepTrying:(0,j.dW)("Keep Trying"),newRecord:(0,j.dW)("New Record!"),niceWork:(0,j.dW)("Nice Work"),rushComplete:(0,j.dW)("Rush complete!"),toughOne:(0,j.dW)("Tough One"),wellDone:(0,j.dW)("Well Done"),weeklyBest:(0,j.dW)("Weekly Best!")},cn={[Yt]:{theme:V,titles:[ln.rushComplete]},[Xt]:{soundCode:xt.OVER_BAD,theme:Z,titles:[ln.goodEffort,ln.keepTrying,ln.toughOne]},[Qt]:{soundCode:xt.OVER_OK,theme:V,titles:[ln.goodJob,ln.niceWork,ln.wellDone]},[Jt]:{soundCode:xt.OVER_GOOD,theme:V,titles:[ln.amazing,ln.excellent,ln.greatSolving]},[en]:{soundCode:xt.OVER_GOOD,theme:V,titles:[ln.bestEver,ln.highScore,ln.newRecord]},[tn]:{soundCode:xt.OVER_GOOD,theme:V,titles:[ln.bestToday]},[nn]:{soundCode:xt.OVER_GOOD,theme:V,titles:[ln.weeklyBest]}},un={ADVANCE_TO_NEXT_PUZZLE:{[R.zI.DEFAULT]:400,[R.zI.NONE]:100},PUZZLE_OVER_SOUND_DELAY:200,PUZZLE_RETRY_SUBMIT_WAIT:5e3},dn={loadPuzzleChallenge:Promise.resolve()},hn="board-initialized",pn="hide-intro-modal",mn="hide-modal-report-puzzle",fn="session-started",gn="show-modal-intro",vn={BATTLE:"battle",LEARNING:"learning",PUZZLE_PROBLEM:"learning-problem",RATED:"rated",RUSH:"rush",START:void 0},bn={[vn.BATTLE]:({isUserWhite:i})=>({[_n.START]:defaultPeripheralView(),[_n.OBSERVE]:defaultPeripheralView(),[_n.FINISHED]:defaultPeripheralView(),[_n.FINISHED_LOST]:defaultPeripheralView(),[_n.SEEKING]:defaultPeripheralView(),[_n.COUNT_DOWN]:defaultPeripheralView(),[_n.MOVE_CORRECT]:{headingTheme:V,headingTitle:Jn.correct},[_n.MOVE_INCORRECT]:{headingTheme:X,headingTitle:""},[_n.USER_MOVE]:{headingTheme:i?Y:$,headingTitle:i?Jn.whiteToMove:Jn.blackToMove}}),[vn.LEARNING]:({isUserWhite:i})=>({[_n.START]:{headingTheme:V,headingTitle:yn[vn.LEARNING]},[_n.MOVE_CORRECT]:{headingTheme:V,headingTitle:Jn.correct},[_n.MOVE_INCORRECT]:{headingClick:()=>st.default.dispatch("puzzles/retryPuzzle"),headingTheme:X,headingTitle:dt.tryAgain},[_n.SOLUTION]:{headingTheme:Z,headingTitle:dt.unsolved},[_n.SOLVED]:{headingTheme:V,headingTitle:Jn.correct},[_n.USER_MOVE]:{headingTheme:i?Y:$,headingTitle:i?Jn.whiteToMove:Jn.blackToMove},[_n.FINISHED]:{headingTheme:i?Y:$,headingTitle:i?Jn.whiteToMove:Jn.blackToMove}}),[vn.PUZZLE_PROBLEM]:({isUserWhite:i})=>({[_n.START]:{headingTheme:i?Y:$,headingTitle:i?Jn.whiteToMove:Jn.blackToMove}}),[vn.RATED]:({isComputerWhite:i,isUserWhite:s})=>({[_n.START]:{headingTheme:V,headingTitle:yn[vn.RATED]},[_n.MOVE_CORRECT]:{headingTheme:V,headingTitle:Jn.correct},[_n.MOVE_INCORRECT]:{headingTheme:X,headingTitle:kt.incorrect},[_n.COMPUTER_MOVING]:{headingTheme:i?Y:$,headingTitle:""},[_n.SOLUTION]:{headingTheme:Z,headingTitle:kt.solution},[_n.SOLVED]:{headingTheme:V,headingTitle:Jn.correct},[_n.SOLVED_WITH_HINT]:{headingTheme:Z,headingTitle:Jn.solvedWithHint},[_n.USER_MOVE]:{headingTheme:s?Y:$,headingTitle:s?Jn.whiteToMove:Jn.blackToMove}}),[vn.RUSH]:({isUserWhite:i})=>({[_n.START]:{headingTheme:V,headingTitle:yn[vn.RUSH]},[_n.MOVE_CORRECT]:{headingTheme:V,headingTitle:Jn.correct},[_n.MOVE_INCORRECT]:{headingTheme:X,headingTitle:""},[_n.USER_MOVE]:{headingTheme:i?Y:$,headingTitle:i?Jn.whiteToMove:Jn.blackToMove},[_n.FINISHED]:{headingTheme:U,headingTitle:yn[vn.RUSH]}})},yn=(vn.RATED,(0,j.dW)("Improve your tactical skill by quickly solving puzzles."),vn.LEARNING,(0,j.dW)("Practice themes and retry puzzles you missed. No clock. No pressure."),vn.BATTLE,(0,j.dW)("Rush against another player to win. Win streaks multiply Season Points."),vn.RUSH,(0,j.dW)("Starts easy and gets harder as you go. Three strikes and you are out!"),{[vn.BATTLE]:(0,j.dW)("Puzzle Battle"),[vn.LEARNING]:(0,j.dW)("Learning"),[vn.RATED]:(0,j.dW)("Rated"),[vn.RUSH]:(0,j.dW)("Puzzle Rush")}),_n={START:"start",SEEKING:"seeking",COUNT_DOWN:"countDown",MOVE_CORRECT:"moveCorrect",MOVE_INCORRECT:"moveIncorrect",PLAYING:"playing",SOLUTION:"solution",SOLVED:"solved",SOLVED_WITH_HINT:"solvedWithHint",USER_MOVE:"userMove",FINISHED:"finished",FINISHED_LOST:"finishedLost",OBSERVE:"observe"},wn={FIVE_MINUTES:3e5,THREE_MINUTES:18e4,SURVIVAL:0},kn={FIVE_MINUTES:"five_minutes",THREE_MINUTES:"three_minutes",SURVIVAL:"three_strikes"},Tn={[kn.FIVE_MINUTES]:wn.FIVE_MINUTES,[kn.THREE_MINUTES]:wn.THREE_MINUTES,[kn.SURVIVAL]:wn.SURVIVAL},Sn={[wn.FIVE_MINUTES]:kn.FIVE_MINUTES,[wn.THREE_MINUTES]:kn.THREE_MINUTES,[wn.SURVIVAL]:kn.SURVIVAL},Cn={[kn.FIVE_MINUTES]:(0,j.dW)("%num% min",{"%num%":5}),[kn.THREE_MINUTES]:(0,j.dW)("%num% min",{"%num%":3}),[kn.SURVIVAL]:(0,j.dW)("Survival")},xn=(vn.BATTLE,vn.LEARNING,vn.RATED,vn.RUSH,"always"),En="never",Pn="wrong",An=[{label:(0,j.dW)("Stop only if I fail a problem"),value:Pn},{label:(0,j.dW)("Always stop after each problem"),value:xn},{label:(0,j.dW)("Never stop - keep the puzzles coming"),value:En}],On={LEADERBOARD:"leaderboard",OBSERVE:"observe",PLAY:"play"},Mn=[{icon:"battle",label:(0,j.dW)("Play"),value:On.PLAY},{icon:"trophy-podium",label:(0,j.dW)("Leaderboard"),value:On.LEADERBOARD}],zn=[{icon:"battle",label:(0,j.dW)("Play"),value:On.PLAY},{icon:"binoculars",label:(0,j.dW)("Watch"),value:On.OBSERVE},{icon:"trophy-podium",label:(0,j.dW)("Leaderboard"),value:On.LEADERBOARD}],In="board",Ln="board-2",Rn="controls",Nn="puzzle-comments",Dn="puzzle-comments-container",jn="puzzle-features",Bn="sidebar",$n="advertisement",Un={BOARD_SETTINGS:"board-settings",COUNTDOWN:"puzzle-modal-countdown",MODE_SETTINGS:"mode-settings-modal",REPORT_PUZZLE:"puzzles-modal-report-puzzle",TRIAL:"puzzles-modal-trial",TRIAL_PUZZLE_STREAKS:"puzzles-modal-trial-puzzle-streaks"},Fn=100,Hn={BATTLE:vn.BATTLE,BATTLE_ARCHIVE:`${vn.BATTLE}-archive`,BATTLE_ID:`${vn.BATTLE}-battleId`,LEARNING:vn.LEARNING,PUZZLE_PROBLEM:vn.PUZZLE_PROBLEM,PUZZLE_PROBLEM_PRACTICE:`${vn.PUZZLE_PROBLEM}-practice`,RATED:vn.RATED,RUSH:vn.RUSH,RUSH_ARCHIVE:`${vn.RUSH}-archive`},qn={[Hn.BATTLE]:vn.BATTLE,[Hn.BATTLE_ID]:vn.BATTLE,[Hn.LEARNING]:vn.LEARNING,[Hn.PUZZLE_PROBLEM]:vn.PUZZLE_PROBLEM,[Hn.PUZZLE_PROBLEM_PRACTICE]:vn.LEARNING,[Hn.RATED]:vn.RATED,[Hn.RUSH]:vn.RUSH},Vn={DOWN:"down",UP:"up"},Gn={allPuzzleThemes:D.Z.generate("web_tactic_callback_tags"),analysis:i=>D.Z.generate("web_analysis_board_editor",{fen:i}),individualPuzzle:i=>D.Z.generate("web_tactic_view",{id:i}),leaderboard:D.Z.generate("web_leaderboard_tactics"),lessonView:({course:i,url:s})=>D.Z.generate("web_lesson_view",{course:i,url:s}),problems:D.Z.generate("web_tactic_problems"),puzzleThemes:i=>D.Z.generate("web_tactic_callback_get_tags",{id:i}),puzzleVoteTheme:({id:i,tagId:s,upOrDown:_})=>D.Z.generate("web_tactic_callback_vote_tag",{id:i,tagId:s,upOrDown:_}),tacticsReportProblem:i=>D.Z.generate("web_tactic_callback_vote",{id:i,upOrDown:Vn.DOWN}),saveShowDetails:({showDetails:i})=>D.Z.generate("web_tactic_callback_show_details_change",{showDetails:i}),saveShowTimer:({showTimer:i})=>D.Z.generate("web_tactic_callback_show_time_change",{showTimer:i}),stats:({username:i})=>D.Z.generate("web_stats_tactics",{username:i}),tacticsDefinitions:D.Z.generate("web_article_view",{url:"chess-tactics"}),userPuzzleStats:D.Z.generate("web_tactics_callback_stats_user")},Zn="square-checkmark",Wn="square-minus",Kn="square-x-gray",Yn="puzzleTimeConstraint",Xn={ADVANCE_TO_NEXT_PUZZLE_DELAY:2e3,BOARD_FADE_DURATION:{[R.zI.DEFAULT]:300,[R.zI.NONE]:100,[R.zI.SLOW]:500},COMPUTER_MOVE_DELAY:{[R.zI.DEFAULT]:250,[R.zI.FAST]:0,[R.zI.NONE]:0,[R.zI.SLOW]:500},COMPUTER_MOVE_DELAY_INTRO:{[R.zI.DEFAULT]:500,[R.zI.NONE]:200,[R.zI.SLOW]:800},HIDE_FEEDBACK_DELAY:500,PLAY_SOLUTION_DELAY:1e3,SERVER_COUNTDOWN:3e3,START_COUNTDOWN_DECREMENT:750},Qn={makeComputerMove:{},playSolution:null,segueToNextPuzzle:null},Jn={blackToMove:(0,j.dW)("Black to Move"),correct:(0,j.dW)("Correct"),go:(0,j.dW)("Go!"),problemReported:(0,j.dW)("This problem has been reported to Chess.com"),solvedWithHint:(0,j.dW)("Solved with Hint"),whiteToMove:(0,j.dW)("White to Move")},er={benefits:(0,j.dW)("Keep the fun going with unlimited Puzzle Rush, Puzzle Battle, Rated, and Learning Puzzles."),benefitByMode:[{icon:"stats-arrow-up",text:(0,j.dW)("Solve puzzles to improve tactical play")},{icon:"fire-puzzle",text:(0,j.dW)("Reach new heights with Puzzle Rush")},{icon:"battle",text:(0,j.dW)("Prove your skill in head-to-head Battle")}],guestBenefits:[{icon:"stats-arrow-up",text:(0,j.dW)("Solve puzzles to improve tactical play")},{icon:"fire-puzzle",text:(0,j.dW)("Reach new heights with Puzzle Rush")},{icon:"battle",text:(0,j.dW)("Compete vs other players in Battle")}],signUpButton:(0,j.dW)("Sign Up"),subtitle:{[vn.RUSH]:(0,j.dW)("Daily Puzzle Rush Limit Reached"),[vn.BATTLE]:(0,j.dW)("Daily Puzzle Battle Limit Reached")},title:(0,j.dW)("Go Premium for Unlimited Puzzles"),trialButton:(0,j.dW)("Start Free Trial"),trialUnlimitedPuzzlesTitle:(0,j.dW)("Want Unlimited Puzzles?"),trialUnlimitedBattlesTitle:(0,j.dW)("Want Unlimited Puzzle Battles?"),trialUnlimitedRushTitle:(0,j.dW)("Want Unlimited Puzzle Rush?"),upgradeButton:(0,j.dW)("View Plans")},tr={[vn.LEARNING]:"puzzle-learning",[vn.RATED]:"puzzle-rated",[vn.RUSH]:"puzzle-rush"};var nr=__webpack_require__(50332);const injectMounts=(i,s)=>{s.forEach((s=>{const _=document.createElement("div");_.id=s,i.appendChild(_)}))};function injectModalMounts(i,s=(0,nr.f)()){injectMounts(s,i)}var rr=__webpack_require__(91353),ir=__webpack_require__(41252),ar=__webpack_require__(38096),sr=__webpack_require__(42805),lr=__webpack_require__(86540),cr=__webpack_require__(17925),ur=__webpack_require__(26924),dr=__webpack_require__(74338),hr=__webpack_require__(28941);const isSameBoard=({analysisBoard:i,gameNamespace:s})=>i&&i.gameNamespace===s;var pr=Object.defineProperty,mr=Object.defineProperties,fr=Object.getOwnPropertyDescriptors,gr=Object.getOwnPropertySymbols,vr=Object.prototype.hasOwnProperty,br=Object.prototype.propertyIsEnumerable,__defNormalProp=(i,s,_)=>s in i?pr(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_;const formatPuzzleThemes=i=>[...i].map((i=>{return s=((i,s)=>{for(var _ in s||(s={}))vr.call(s,_)&&__defNormalProp(i,_,s[_]);if(gr)for(var _ of gr(s))br.call(s,_)&&__defNormalProp(i,_,s[_]);return i})({},i),_={passed_rate:i.passed_rate*Fn},mr(s,fr(_));var s,_})),formatTimer=({finishTime:i,startTime:s})=>{const _=Math.floor((i-s)/1e3),T=Math.floor(_/60);let S=`0${Math.floor(_%60)}`;return S=S.substr(S.length-2),{minutes:T,seconds:S}},getAmplitudeReferral=i=>{let s=i;return i===vn.PUZZLE_PROBLEM&&(s=vn.LEARNING),`puzzles-${s}`};var yr=__webpack_require__(3527),_r=__webpack_require__.n(yr);const wr={"absolute pin":{label:ht.Z.trans("Absolute Pin"),lesson:{course:"capturing-pieces",url:"pins"},puzzles:[21],insights:{label:ht.Z.trans("Pins"),url:"pins"}},backrank:{label:ht.Z.trans("Backrank"),lesson:{course:"finding-checkmate",url:"back-rank-checkmates"},puzzles:[3],insights:{label:ht.Z.trans("Checkmate"),url:"mates"}},"bad bishop":{label:ht.Z.trans("Bad Bishop"),lesson:{course:"make-the-most-of-your-pieces",url:"using-your-bishops"}},battery:{label:ht.Z.trans("Battery"),lesson:{course:"make-the-most-of-your-pieces",url:"using-your-rooks"},puzzles:[44]},"bishop fork":{label:ht.Z.trans("Bishop Fork"),lesson:{course:"capturing-pieces",url:"forks"},puzzles:[11],insights:{label:ht.Z.trans("Bishop Fork"),url:"forks"}},"bishop pair":{label:ht.Z.trans("Bishop Pair"),lesson:{course:"activating-your-pieces",url:"using-the-bishop-pair"},puzzles:[48],insights:{label:ht.Z.trans("Bishop Moves"),url:"pieces"}},castling:{label:ht.Z.trans("Castling"),lesson:{course:"playing-the-game",url:"castling"},insights:{label:ht.Z.trans("Castling"),url:"castling"}},"direct opposition":{label:ht.Z.trans("Direct Opposition"),lesson:{course:"advanced-endgames",url:"king-opposition"},puzzles:[39],insights:{label:ht.Z.trans("King Moves"),url:"pieces"}},"discover check":{label:ht.Z.trans("Discovered Check"),lesson:{course:"winning-with-tactics",url:"discovered-attack"},puzzles:[8]},"distant opposition":{label:ht.Z.trans("Distant Opposition"),lesson:{course:"endgame-patterns",url:"distant-opposition"},puzzles:[39],insights:{label:ht.Z.trans("King Moves"),url:"pieces"}},"double check":{label:ht.Z.trans("Double Check"),lesson:{course:"winning-with-tactics",url:"double-check"},puzzles:[38]},"doubled rook":{label:ht.Z.trans("Doubled Rooks"),lesson:{course:"winning-the-game",url:"checkmate-with-two-rooks"},puzzles:[46],insights:{label:ht.Z.trans("Rook Accuracy"),url:"pieces"}},"en passant":{label:ht.Z.trans("En Passant"),lesson:{course:"playing-the-game",url:"en-passant"},puzzles:[37],insights:{label:ht.Z.trans("Pawn Moves"),url:"pieces"}},fool:{label:ht.Z.trans("Fool"),lesson:{course:"playing-the-game",url:"fastest-checkmate"},puzzles:[62],insights:{label:ht.Z.trans("Checkmate"),url:"mates"}},"hanging pawns":{label:ht.Z.trans("Hanging Pawns"),lesson:{course:"activating-your-pieces",url:"isolated-and-hanging-pawns"},insights:{label:ht.Z.trans("Pawn Accuracy"),url:"pieces"}},"insufficient material":{label:ht.Z.trans("Insufficient Material"),lesson:{course:"playing-the-game",url:"other-draws"}},"isolated D pawn":{label:ht.Z.trans("Isolated D Pawn"),lesson:{course:"activating-your-pieces",url:"isolated-and-hanging-pawns"},insights:{label:ht.Z.trans("Pawn Accuracy"),url:"pieces"}},"isolated pawn":{label:ht.Z.trans("Isolated Pawn"),lesson:{course:"activating-your-pieces",url:"isolated-and-hanging-pawns"},insights:{label:ht.Z.trans("Pawn Accuracy"),url:"pieces"}},"king in center":{label:ht.Z.trans("King in Center"),lesson:{course:"finding-checkmate",url:"king-safety"},puzzles:[31]},"knight and bishop":{label:ht.Z.trans("Knight and Bishop"),lesson:{course:"activating-your-pieces",url:"bishops-vs-knights"}},"knight fork":{label:ht.Z.trans("Knight Fork"),lesson:{course:"capturing-pieces",url:"forks"},puzzles:[11],insights:{label:ht.Z.trans("Knight Fork"),url:"forks"}},"knight outpost":{label:ht.Z.trans("Knight Outpost"),lesson:{course:"activating-your-pieces",url:"outposts"},puzzles:[42],insights:{label:ht.Z.trans("Knight Accuracy"),url:"pieces"}},"mate-in-2":{label:ht.Z.trans("Mate in 2"),lesson:{course:"finding-checkmate",url:"checkmate-in-2-moves"},puzzles:[15],insights:{label:ht.Z.trans("Checkmate"),url:"mates"}},"mate-in-3+":{label:ht.Z.trans("Mate in 3+"),lesson:{course:"forcing-moves",url:"checkmate-in-3-moves"},puzzles:[16],insights:{label:ht.Z.trans("Checkmate"),url:"mates"}},"opposite colored bishops":{label:ht.Z.trans("Opposite Colored Bishops"),lesson:{course:"advanced-endgames",url:"opposite-colored-bishops-endgames"},puzzles:[54],insights:{label:ht.Z.trans("Bishop Accuracy"),url:"pieces"}},"outside passed pawns":{label:ht.Z.trans("Outside Passed Pawns"),lesson:{course:"understanding-endgames",url:"passed-pawns"},puzzles:[56],insights:{label:ht.Z.trans("Pawn Accuracy"),url:"pieces"}},"passed pawns":{label:ht.Z.trans("Passed Pawns"),lesson:{course:"understanding-endgames",url:"passed-pawns"},puzzles:[56],insights:{label:ht.Z.trans("Pawn Moves"),url:"pieces"}},"pawn fork":{label:ht.Z.trans("Pawn Fork"),lesson:{course:"capturing-pieces",url:"forks"},puzzles:[11],insights:{label:ht.Z.trans("Pawn Forks"),url:"forks"}},"pawn island":{label:ht.Z.trans("Pawn Island"),lesson:{course:"reading-the-board",url:"pawn-structures"}},promotion:{label:ht.Z.trans("Promotion"),lesson:{course:"how-to-move-the-pieces",url:"pawn-promotion"},puzzles:[19],insights:{label:ht.Z.trans("Pawn Moves"),url:"pieces"}},"queen fork":{label:ht.Z.trans("Queen Fork"),lesson:{course:"capturing-pieces",url:"forks"},puzzles:[11],insights:{label:ht.Z.trans("Queen Forks"),url:"forks"}},"relative pin":{label:ht.Z.trans("Relative Pin"),lesson:{course:"capturing-pieces",url:"pins"},puzzles:[21],insights:{label:ht.Z.trans("Pins"),url:"pins"}},"rook and bishop":{label:ht.Z.trans("Rook and Bishop"),lesson:{course:"advanced-endgames",url:"common-rook-endgames"},insights:{label:ht.Z.trans("Endgames"),url:"phases"}},"rook and knight":{label:ht.Z.trans("Rook and Knight"),lesson:{course:"advanced-endgames",url:"common-rook-endgames"},insights:{label:ht.Z.trans("Endgames"),url:"phases"}},"rook and minors":{label:ht.Z.trans("Rook and Minors"),lesson:{course:"advanced-endgames",url:"common-rook-endgames"},insights:{label:ht.Z.trans("Endgames"),url:"phases"}},"rook fork":{label:ht.Z.trans("Rook Fork"),lesson:{course:"capturing-pieces",url:"forks"},puzzles:[11],insights:{label:ht.Z.trans("Rook Forks"),url:"forks"}},scholar:{label:ht.Z.trans("Scholar"),lesson:{course:"winning-the-game",url:"the-4-move-checkmate"},puzzles:[1],insights:{label:ht.Z.trans("Checkmate"),url:"mates"}},skewer:{label:ht.Z.trans("Skewer"),lesson:{course:"capturing-pieces",url:"skewers"},puzzles:[26]},"smothered mate":{label:ht.Z.trans("Smothered Mate"),lesson:{course:"winning-with-tactics",url:"smothered-mate"},puzzles:[27],insights:{label:ht.Z.trans("Checkmate"),url:"mates"}},stalemate:{label:ht.Z.trans("Stalemate"),lesson:{course:"playing-the-game",url:"stalemate"},puzzles:[28]},"threefold repitition":{label:ht.Z.trans("Threefold Repetition"),lesson:{course:"playing-the-game",url:"other-draws"},puzzles:[20]},"two rooks":{label:ht.Z.trans("Two Rooks"),lesson:{course:"winning-the-game",url:"checkmate-with-two-rooks"},puzzles:[66],insights:{label:ht.Z.trans("Rook Moves"),url:"pieces"}},"under promotion":{label:ht.Z.trans("Underpromotion"),lesson:{course:"advanced-tactics",url:"underpromotion"},puzzles:[30]},"diagonal opposition":{label:ht.Z.trans("Diagonal Opposition"),lesson:{course:"advanced-endgames",url:"king-opposition"},puzzles:[39],insights:{label:ht.Z.trans("King Moves"),url:"pieces"}},"rooks on seventh":{label:ht.Z.trans("Rooks on Seventh"),lesson:{course:"activating-your-pieces",url:"pigs-on-the-7th-rank"},puzzles:[50],insights:{label:ht.Z.trans("Rook Accuracy"),url:"pieces"}},"two bishops":{label:ht.Z.trans("Two Bishops"),lesson:{course:"endgame-patterns",url:"two-bishop-checkmate"},puzzles:[64],insights:{label:ht.Z.trans("Bishop Accuracy"),url:"pieces"}},"Alekhines gun":{label:ht.Z.trans("Alekhine's Gun",{},"dynamic"),lesson:{course:"activating-your-pieces",url:"batteries"},puzzles:[44,58]},"connected passed pawn":{label:ht.Z.trans("Connected Passed Pawns"),lesson:{course:"understanding-endgames",url:"passed-pawns"},puzzles:[56],insights:{label:ht.Z.trans("Pawn Moves"),url:"pieces"}},anastasia:{label:ht.Z.trans("Anastasia"),lesson:{course:"attacking-the-king-1",url:"advanced-checkmate-patterns"},puzzles:[60],insights:{label:ht.Z.trans("Checkmate"),url:"mates"}},arabian:{label:ht.Z.trans("Arabian"),lesson:{course:"attacking-the-king-1",url:"advanced-checkmate-patterns"},puzzles:[60],insights:{label:ht.Z.trans("Checkmate"),url:"mates"}},boden:{label:ht.Z.trans("Boden"),lesson:{course:"attacking-the-king-1",url:"advanced-checkmate-patterns"},puzzles:[60],insights:{label:ht.Z.trans("Checkmate"),url:"mates"}},"backward pawn":{label:ht.Z.trans("Backward Pawns"),lesson:{course:"reading-the-board",url:"pawn-structures"},insights:{label:ht.Z.trans("Pawn Accuracy"),url:"pieces"}},"doubled pawn":{label:ht.Z.trans("Doubled Pawns"),lesson:{course:"reading-the-board",url:"pawn-structures"},insights:{label:ht.Z.trans("Pawn Accuracy"),url:"pieces"}},fianchetto:{label:ht.Z.trans("Fianchetto"),lesson:{course:"make-the-most-of-your-pieces",url:"using-your-bishops"},puzzles:[40],insights:{label:ht.Z.trans("Bishop Moves"),url:"pieces"}},"mate-in-1":{label:ht.Z.trans("Mate in 1"),lesson:{course:"playing-the-game",url:"checkmate"},puzzles:[14],insights:{label:ht.Z.trans("Checkmate"),url:"mates"}},windmill:{label:ht.Z.trans("Windmill"),lesson:{course:"activating-your-pieces",url:"windmill"},puzzles:[32]},"trapped piece":{label:ht.Z.trans("Trapped Piece"),lesson:{course:"winning-with-tactics",url:"trapped-piece"},puzzles:[29],insights:{label:ht.Z.trans("Hanging Pieces"),url:"hanging"}}},getLessonLinkFromPuzzleThemeId=i=>{const s=Object.keys(wr).find((s=>{const _=wr[s];return Array.isArray(_.puzzles)&&_.puzzles.includes(i)}));if(!s)return null;const{lesson:_}=wr[s];return Gn.lessonView(_)},getModalStartingSlide=i=>{let s=i;return[vn.PUZZLE_PROBLEM,vn.RATED].includes(i)&&(s=vn.LEARNING),`puzzles-${s}`},getRoutes=()=>{const i=document.getElementById(jn);return JSON.parse(i.getAttribute("data-routes"))};var string_numeral_to_boolean=i=>"1"===i;const getShowAd=()=>{const i=document.getElementById(jn);return string_numeral_to_boolean(i.getAttribute("data-show-ad"))};var kr=__webpack_require__(61681);const hashParamsToObject=i=>i&&"#"===i[0]?(i.match(/[^#&=]+/g)||[]).reduce(((i,s,_,T)=>(_%2?i[T[_-1]]=s:i[s]=null,i)),{}):{},handleBattleChallengeRoute=i=>{if(i&&i.name===Hn.BATTLE&&i.hash){const{accept:s,challengeUser:_}=hashParamsToObject(i.hash);s?setTimeout((()=>st.default.dispatch("puzzlesBattle/acceptChallenge",s))):_&&setTimeout((()=>st.default.dispatch("puzzlesBattle/challengeUserFromUrl",_)))}},hasMoreMoves=i=>i.nextMoveIndex<i.moveListLength-1,isLimitReached=({puzzleMode:i,reachedLimits:s})=>Boolean(s[i]),mountBoardModal=({identifier:i,lazyVueLoader:s,$element:_})=>{let T=s.instances[i];return T||(injectModalMounts([i],_),s.createInstance(i),T=s.instances[i]),T.$children[0]},parseTcnMoveList=i=>i.match(/.{2}/g),shouldScheduleNextTactic=({playerMoveCorrect:i,puzzleMode:s,showDetails:_})=>s!==vn.RUSH&&(_===Pn?i:_===En);var Tr=__webpack_require__(86437),Sr=__webpack_require__(7597);const Cr="#sb",xr="collapsed";var Er=((i={})=>{const s=[];return{emit:(_,T)=>{s.filter((i=>i.type===_)).forEach((s=>s.handler(i,T)))},off:i=>(-1!==s.findIndex((s=>s.type===i.type&&s.handler===i.handler))&&s.splice(s,1),s),on:(i,_)=>(s.push({type:i,handler:_}),s),state:i,subscriptions:s}})({expanded:null===document.querySelector(`${Cr}.${xr}`),forcedOpen:!1,isLive:"/live"===window.location.pathname.substr(0,5),isLiveElement:document.querySelector("#live-app"),isVisible:!0,isWide:"en-US"!==document.documentElement.getAttribute("lang"),position:"horizontal",showingSecondary:null}),Pr="SHOW_VIDEO_MODAL",Ar=__webpack_require__(16272);var Or=__webpack_require__(93644),Mr=__webpack_require__(84960),zr=__webpack_require__(43106),Ir={name:"ModalVideo",components:{IconFont:Mr.Z,ModalContainer:zr.Z},props:{source:{type:String,required:!0}},mounted(){Er.on(Pr,(()=>{this.$refs.modal.show()}))},methods:{hide(){this.$refs.modal.hide()}}},Lr={box:"modal-video-box",video:"modal-video-video",close:"modal-video-close"},Rr=__webpack_require__(51900);var Nr=(0,Rr.Z)(Ir,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("modal-container",{ref:"modal"},[_("div",{class:i.$style.box},[_("div",{class:i.$style.video},[_("iframe",{attrs:{allowfullscreen:"",frameborder:"0",height:"100%",width:"100%",src:i.source}}),i._v(" "),_("icon-font",{class:i.$style.close,attrs:{family:"chess",name:"x",theme:"primary"},on:{click:i.hide}})],1)])])}),[],!1,(function injectStyles(i){this.$style=Lr.locals||Lr}),null,null),Dr=(Nr.exports,__webpack_require__(52439)),jr=__webpack_require__(97122);(0,jr.b)("web_articles_authors"),(0,jr.b)("web_article_post"),(0,jr.b)("web_article_view",{url:"free-chess-curriculum-for-parents-coaches"}),(0,jr.b)("web_article_view",{url:"study-plan-directory"}),(0,jr.b)("web_article_index",{unpublished:1}),ht.Z.trans("Articles"),ht.Z.trans("Article Authors"),ht.Z.trans("Authors"),ht.Z.trans("Create Article"),ht.Z.trans("Curriculum for Kids"),ht.Z.trans("Delete Article"),ht.Z.trans("Are you sure you want to delete this article?"),ht.Z.trans("Edit Article"),ht.Z.trans("Headline"),ht.Z.trans("Lock Comments"),ht.Z.trans("My Articles"),ht.Z.trans("RSS"),ht.Z.trans("Study Plans"),ht.Z.trans("Translate"),ht.Z.trans("Unlock Comments"),ht.Z.trans("Unpublished");var Br=__webpack_require__(18131);(0,jr.b)("web_blog_all"),(0,jr.b)("web_blog_view",{url:"webmaster/how-to-become-a-top-blogger-for-chesscom"}),(0,jr.b)("web_blog_index"),(0,jr.b)("web_blog_post",{title:ht.Z.trans("What got me playing chess")}),(0,jr.b)("web_blog_post",{title:ht.Z.trans("My chess goals are...")}),(0,jr.b)("web_blog_post",{title:ht.Z.trans("My best chess win")}),(0,jr.b)("web_blog_settings_edit"),(0,jr.b)("web_blog_post"),(0,jr.b)("web_blog_authors"),ht.Z.trans("All Blogs"),ht.Z.trans("Become a listed Chess.com top blogger!"),ht.Z.trans("Blogs"),ht.Z.trans("Start Your Blog"),ht.Z.trans("This is your personal blog where you can share your chess thoughts. Some ideas to blog about:"),ht.Z.trans("Blog Settings"),ht.Z.trans("What got me playing chess"),ht.Z.trans("My chess goals are..."),ht.Z.trans("My best chess win"),ht.Z.trans("Bury Blog"),ht.Z.trans("<strong>NOTE:</strong> Your Blog has not yet been published. This is only a <strong>preview</strong>."),ht.Z.trans("Click here"),ht.Z.trans("Create Post"),ht.Z.trans("Delete"),ht.Z.trans("Delete Blog"),ht.Z.trans("Are you sure you want to delete this blog?"),ht.Z.trans("Are you sure you want to delete post and report to akismet?"),ht.Z.trans("Edit"),ht.Z.trans("Edit Blog"),ht.Z.trans("Get Listed"),ht.Z.trans("Headline"),ht.Z.trans("Most Recent"),ht.Z.trans("Most Views"),ht.Z.trans("My Blog"),ht.Z.trans("for more info."),ht.Z.trans("No"),ht.Z.trans("User doesn't have any blog posts"),ht.Z.trans("Publish"),ht.Z.trans("Report Spam"),ht.Z.trans("Top Bloggers"),ht.Z.trans("Unbury Blog"),ht.Z.trans("Yes");Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;const $r="data-is-large";ht.Z.trans("Global (All time)"),ht.Z.trans("Global (Daily)"),ht.Z.trans("Global (Hourly)"),ht.Z.trans("Friends (All time)"),ht.Z.trans("Friends (Daily)"),ht.Z.trans("Friends (Hourly)"),ht.Z.trans("Are you sure you want to delete this Puzzle Rush?"),ht.Z.trans("Draw"),ht.Z.trans("One moment please. Generating leaderboard..."),ht.Z.trans("There was an error loading leaderboard."),ht.Z.trans("Leaderboard currently unavailable"),ht.Z.trans("Lost"),ht.Z.trans("Doubles (Bughouse)"),ht.Z.trans("Daily Stats"),ht.Z.trans("Live Stats"),ht.Z.trans("Puzzle Stats"),ht.Z.trans("Puzzle Stats"),ht.Z.trans("Puzzle Rush"),ht.Z.trans("Won");var Ur=__webpack_require__(55622),Fr={name:"CountryFlag",directives:{tooltip:Ur.Z},props:{code:{type:[Number,String],required:!1},name:{type:[String,Object],required:!1},size:{type:String,required:!1}},computed:{decoratedCode(){return this.isChessVerified||this.isSanctioned?"sanctioned":this.code},isChessVerified(){return["fd",431].includes(this.code)},isRussia(){var i;return["ru","RU","116"].includes(null==(i=this.code)?void 0:i.toString())},isSanctioned(){var i,s;return Boolean((null==(s=null==(i=window.chesscom)?void 0:i.features)?void 0:s.includes("sanction_russia_flag"))&&this.isRussia)},tooltip(){return this.isChessVerified?ht.Z.trans("Due to the ongoing war and resulting international sanctions, Russian and Belarusian flags will not be shown for players in Verified events."):this.name},ukraineLink:()=>D.Z.generate("web_blog_view",{url:"CHESScom/on-the-invasion-of-ukraine"})}},Hr=Fr,qr=(0,Rr.Z)(Hr,(function(){var i,s,_=this,T=_.$createElement,S=_._self._c||T;return _.isSanctioned?S("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:_.$trans("Click here to see our stance on the war in Ukraine"),expression:"$trans('Click here to see our stance on the war in Ukraine')"}],class:["country-flags-component","country-"+_.decoratedCode,(i={},i["country-flags-"+_.size]=_.size,i)],attrs:{href:_.ukraineLink,target:"_blank"}}):S("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:_.tooltip,expression:"tooltip"}],class:["country-flags-component",("country-"+_.decoratedCode).toLowerCase(),(s={},s["country-flags-"+_.size]=_.size,s)]})}),[],!1,null,null,null),Vr=qr.exports,Gr={name:"FormDropdown",components:{CountryFlag:Vr},props:{advancedOptionsClass:{type:Boolean,default:!1},alignDropdown:{type:String,default:"right"},colorIcons:{type:Boolean,default:!1},controlLabelText:{type:String},countryFlag:{type:Number,default:2},iconButton:{type:String,default:""},iconHide:{type:String,default:"chevron-bottom"},iconShow:{type:String,default:"chevron-up"},isLarge:{type:Boolean,default:!1},labelKey:{type:String,default:"label"},onChange:{type:Function,required:!1},options:{type:Array,required:!0},overlay:{type:Boolean,default:!1},shortTitle:{type:Boolean,default:!1},shortTitleKey:{type:String,default:"shortTitle"},showOptionIcon:{type:Boolean,default:!0},subOptionKey:{type:String,default:""},value:{type:Object,required:!0},valueKey:{type:String,default:"value"}},emits:["input"],data(){var i,s;return{sanctionRussiaFlag:null==(s=null==(i=window.chesscom)?void 0:i.features)?void 0:s.includes("sanction_russia_flag"),showOptions:!1}},methods:{setSelectedOption(i){this.toggleOptions(),this.value!==i&&(this.$emit("input",i),this.onChange&&this.onChange(i))},toggleOptions(){this.showOptions=!this.showOptions}}},Zr=Gr,Wr={component:"form-dropdown-component",select:"form-dropdown-select",icon:"form-dropdown-icon",filter:"form-dropdown-filter","desktop-button":"form-dropdown-desktop-button","mobile-button":"form-dropdown-mobile-button",value:"form-dropdown-value",chevron:"form-dropdown-chevron",options:"form-dropdown-options",left:"form-dropdown-left","advanced-options":"form-dropdown-advanced-options",option:"form-dropdown-option","short-title":"form-dropdown-short-title",label:"form-dropdown-label",selected:"form-dropdown-selected",overlay:"form-dropdown-overlay",separator:"form-dropdown-separator",flag:"form-dropdown-flag",large:"form-dropdown-large","img-icon":"form-dropdown-img-icon","control-label":"form-dropdown-control-label","sub-option":"form-dropdown-sub-option"};var Kr=(0,Rr.Z)(Zr,(function(){var i,s,_,T,S=this,C=S.$createElement,P=S._self._c||C;return P("div",{class:[S.$style.component,(i={},i[S.$style.large]=S.isLarge,i)]},[S.iconButton?P("div",{class:(s={},s[S.$style["mobile-button"]]=S.iconButton,s),on:{click:S.toggleOptions}},[P("span",{class:["icon-font-chess",S.iconButton,S.$style.filter]})]):S._e(),S._v(" "),P("div",{class:[S.$style.select,(_={},_[S.$style["desktop-button"]]=S.iconButton,_)],on:{click:function(i){return S.toggleOptions()}}},[S.value.img_icon?P("img",{class:S.$style["img-icon"],attrs:{src:S.value.img_icon,alt:S.value.value,width:"30",height:"28"}}):S.value.icon?P("span",{class:["icon-font-chess",S.value.icon,S.$style.icon,{"icon-colored":S.colorIcons||S.isLarge}]}):S._e(),S._v(" "),S.sanctionRussiaFlag&&S.value.countryId?P("country-flag",{class:S.$style.flag,attrs:{size:"large",code:S.value.countryId}}):S.value.countryId?P("div",{class:[S.$style.flag,"country-flags-component country-flags-large country-"+S.value.countryId]}):S._e(),S._v(" "),S.controlLabelText?P("span",{class:S.$style["control-label"],domProps:{textContent:S._s(S.controlLabelText)}}):S._e(),S._v(" "),P("span",{class:S.$style.value},[S._v(S._s(S.value[S.labelKey])+"")]),S._v(" "),P("span",{directives:[{name:"show",rawName:"v-show",value:S.showOptions,expression:"showOptions"}],class:["icon-font-chess",S.iconShow,S.$style.chevron]}),S._v(" "),P("span",{directives:[{name:"show",rawName:"v-show",value:!S.showOptions,expression:"!showOptions"}],class:["icon-font-chess",S.iconHide,S.$style.chevron]})],1),S._v(" "),S.overlay?P("div",{directives:[{name:"show",rawName:"v-show",value:S.showOptions,expression:"showOptions"}],class:S.$style.overlay,on:{click:S.toggleOptions}}):S._e(),S._v(" "),P("div",{directives:[{name:"show",rawName:"v-show",value:S.showOptions,expression:"showOptions"}],class:[S.$style.options,(T={},T[S.$style["advanced-options"]]=S.advancedOptionsClass,T),[S.$style[S.alignDropdown]]]},S._l(S.options,(function(i){var s,_;return P("div",{key:i[S.valueKey]},[i.separator?S._e():P("span",{class:[S.$style.option,(s={},s[S.$style.selected]=i[S.valueKey]===S.value[S.valueKey]&&!S.isLarge,s),(_={},_[S.$style["sub-option"]]=i[S.subOptionKey],_)],on:{click:function(s){return S.setSelectedOption(i)}}},[i.icon&&!i.noIconInsideDropdown&&S.showOptionIcon?P("span",{class:["light-mode","icon-font-chess",i.icon,S.$style.icon,{"icon-colored":S.colorIcons}]}):S._e(),S._v(" "),S.sanctionRussiaFlag&&i.countryId?P("country-flag",{class:S.$style.flag,attrs:{code:i.countryId}}):i.countryId?P("div",{class:[S.$style.flag,"country-flags-component country-"+i.countryId]}):S._e(),S._v(" "),S.shortTitle?P("span",{class:S.$style["short-title"],domProps:{textContent:S._s(i[S.shortTitleKey])}}):S._e(),S._v(" "),P("span",{class:S.$style.label,domProps:{textContent:S._s(i[S.labelKey])}})],1),S._v(" "),i.separator?P("span",{class:S.$style.separator}):S._e()])})),0)])}),[],!1,(function form_dropdown_injectStyles(i){this.$style=Wr.locals||Wr}),null,null),Yr=Kr.exports;const Xr=[{value:"newest",label:ht.Z.trans("Most Recent")},{value:"view_count",label:ht.Z.trans("Most Views")}],Qr=document.getElementById(Sr.xL.FILTERS),Jr=Qr?Qr.getAttribute(Sr.Y4.ICON_BUTTON):null;(0,Br.N)(`#${Sr.xL.FILTERS}`,(i=>{const s=i.getAttribute(Sr.Y4.ALIGN_DROPDOWN),_=i.getAttribute(Sr.Y4.CONTROL_LABEL_TEXT),T=Boolean(i.getAttribute($r));return{component:Yr,propsData:{alignDropdown:s,controlLabelText:_,iconButton:Jr,isLarge:T,onChange:()=>{},options:Xr,overlay:!0,value:Xr[0]}}}));const rtlClass=i=>(0,Or.t)()?i["right-to-left"]:"";var ei=__webpack_require__(77226),ti=__webpack_require__(66092),lodash_es_now=function(){return ti.Z.Date.now()},ni=__webpack_require__(72714),ri=/^\s+|\s+$/g,ii=/^[-+]0x[0-9a-f]+$/i,ai=/^0b[01]+$/i,si=/^0o[0-7]+$/i,oi=parseInt;var li=function toNumber(i){if("number"==typeof i)return i;if((0,ni.Z)(i))return NaN;if((0,ei.Z)(i)){var s="function"==typeof i.valueOf?i.valueOf():i;i=(0,ei.Z)(s)?s+"":s}if("string"!=typeof i)return 0===i?i:+i;i=i.replace(ri,"");var _=ai.test(i);return _||si.test(i)?oi(i.slice(2),_?2:8):ii.test(i)?NaN:+i},ci=Math.max,ui=Math.min;var di=function debounce(i,s,_){var T,S,C,P,O,M,R=0,D=!1,j=!1,$=!0;if("function"!=typeof i)throw new TypeError("Expected a function");function invokeFunc(s){var _=T,C=S;return T=S=void 0,R=s,P=i.apply(C,_)}function leadingEdge(i){return R=i,O=setTimeout(timerExpired,s),D?invokeFunc(i):P}function shouldInvoke(i){var _=i-M;return void 0===M||_>=s||_<0||j&&i-R>=C}function timerExpired(){var i=lodash_es_now();if(shouldInvoke(i))return trailingEdge(i);O=setTimeout(timerExpired,function remainingWait(i){var _=s-(i-M);return j?ui(_,C-(i-R)):_}(i))}function trailingEdge(i){return O=void 0,$&&T?invokeFunc(i):(T=S=void 0,P)}function debounced(){var i=lodash_es_now(),_=shouldInvoke(i);if(T=arguments,S=this,M=i,_){if(void 0===O)return leadingEdge(M);if(j)return clearTimeout(O),O=setTimeout(timerExpired,s),invokeFunc(M)}return void 0===O&&(O=setTimeout(timerExpired,s)),P}return s=li(s)||0,(0,ei.Z)(_)&&(D=!!_.leading,C=(j="maxWait"in _)?ci(li(_.maxWait)||0,s):C,$="trailing"in _?!!_.trailing:$),debounced.cancel=function cancel(){void 0!==O&&clearTimeout(O),R=0,T=M=S=O=void 0},debounced.flush=function flush(){return void 0===O?P:trailingEdge(lodash_es_now())},debounced};var hi=function throttle(i,s,_){var T=!0,S=!0;if("function"!=typeof i)throw new TypeError("Expected a function");return(0,ei.Z)(_)&&(T="leading"in _?!!_.leading:T,S="trailing"in _?!!_.trailing:S),di(i,s,{leading:T,maxWait:s,trailing:S})},pi=hi;let mi;var fi={name:"ModalContainer",props:{boardClass:{type:String,default:""},closeOnBackgroundClick:{type:Boolean,default:!0},closeOnEscPress:{type:Boolean,default:!1},easeTransition:{type:Boolean,default:!0},transition:{type:Object}},data:()=>({componentStyleTop:"calc(50% + 0px)",rtlClass:rtlClass,visible:!1}),computed:{componentClasses(){const i=[this.$style["chessboard-mirror"]];return this.visible||i.push(this.$style["no-pointer-events"]),this.easeTransition&&i.push(this.$style.transition),i}},created(){mi=pi(this.onResize,100),window.addEventListener("resize",mi),this.closeOnEscPress&&window.addEventListener("keyup",this.onKeyPress)},beforeDestroy(){window.removeEventListener("resize",mi),this.closeOnEscPress&&window.removeEventListener("keyup",this.onKeyPress)},methods:{hide(){this.visible=!1},onBackgroundClick(){this.closeOnBackgroundClick&&this.hide()},onKeyPress(i){27===i.keyCode&&this.hide()},onResize(){const i=this.$refs["chessboard-mirror"],s=document.getElementsByClassName(this.boardClass)[0]||(0,nr.t)(),_={height:s.clientHeight,width:s.clientWidth};if(i&&(i.style.height=`${_.height}px`,i.style.width=`${_.width}px`),this.$refs.content){const i=this.$refs.content.children[0]||this.$refs.content;this.componentStyleTop=(({boardHeight:i,modalHeight:s})=>`calc(50% + ${Math.max(s-i,0)/2}px)`)({boardHeight:_.height,modalHeight:i.getBoundingClientRect().height})}},show(i){this.onResize(i),this.visible=!0},toggle(i){this.onResize(i),this.visible=!this.visible}}},gi={component:"modal-chessboard-container-component","chessboard-mirror":"modal-chessboard-container-chessboard-mirror","no-pointer-events":"modal-chessboard-container-no-pointer-events",bg:"modal-chessboard-container-bg",transition:"modal-chessboard-container-transition",enter:"modal-chessboard-container-enter",leave:"modal-chessboard-container-leave","right-to-left":"modal-chessboard-container-right-to-left"};var vi=(0,Rr.Z)(fi,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{ref:"chessboard-mirror",class:i.componentClasses},[_("transition",{attrs:{"enter-active-class":i.transition?i.transition.enter:i.$style.enter,"leave-active-class":i.transition?i.transition.leave:i.$style.leave}},[i.visible?_("div",{class:[i.$style.component,i.transition&&i.transition.modal||"",i.rtlClass(i.$style)],style:{top:i.componentStyleTop}},[_("div",{class:i.$style.bg,on:{click:i.onBackgroundClick}}),i._v(" "),_("div",{ref:"content"},[i._t("default")],2)]):i._e()])],1)}),[],!1,(function modal_chessboard_container_injectStyles(i){this.$style=gi.locals||gi}),null,null),bi=vi.exports,yi=__webpack_require__(38847),_i={name:"ModalHeader",props:{closeButton:Function,title:{type:String,required:!0}}},wi={component:"modal-header-component",title:"modal-header-title",close:"modal-header-close",icon:"modal-header-icon"};var ki,Ti,Si=(0,Rr.Z)(_i,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("h3",{class:i.$style.title},[i._v("\n    "+i._s(i.title)+"\n  ")]),i._v(" "),i.closeButton?_("button",{class:i.$style.close,attrs:{type:"button","aria-label":i.$trans("Close")},on:{click:i.closeButton}},[_("span",{staticClass:"icon-font-chess x",class:i.$style.icon})]):i._e()])}),[],!1,(function modal_header_injectStyles(i){this.$style=wi.locals||wi}),null,null),Ci=Si.exports,xi=Object.defineProperty,Ei=Object.defineProperties,Pi=Object.getOwnPropertyDescriptors,Ai=Object.getOwnPropertySymbols,Oi=Object.prototype.hasOwnProperty,Mi=Object.prototype.propertyIsEnumerable,modal_report_puzzlevue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?xi(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,zi={name:"ModalReportPuzzle",components:{ModalChessboardContainer:bi,ModalContent:yi.Z,ModalHeader:Ci,V5Button:Tr.V5Button},created(){O.Z.on(mn,this.hide)},methods:(ki=((i,s)=>{for(var _ in s||(s={}))Oi.call(s,_)&&modal_report_puzzlevue_type_script_lang_js_defNormalProp(i,_,s[_]);if(Ai)for(var _ of Ai(s))Mi.call(s,_)&&modal_report_puzzlevue_type_script_lang_js_defNormalProp(i,_,s[_]);return i})({},(0,dr.mapActions)({reportCurrentPuzzle:"puzzles/reportCurrentPuzzle"})),Ti={hide(){this.$refs.modal.hide()},show(){this.$refs.modal.show()}},Ei(ki,Pi(Ti)))},Ii=zi,Li={modal:"modal-report-puzzle-modal",content:"modal-report-puzzle-content",footer:"modal-report-puzzle-footer"};var Ri=(0,Rr.Z)(Ii,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("modal-chessboard-container",{ref:"modal"},[_("modal-content",{class:i.$style.modal},[_("modal-header",{attrs:{"close-button":i.hide,title:i.$trans("Are you sure you want to report this problem?")}}),i._v(" "),_("div",{class:i.$style.content},[_("p",{domProps:{textContent:i._s(i.$trans("You should only report problems where the answer given is incorrect or there is more than 1 correct answer."))}}),i._v(" "),_("p",{domProps:{textContent:i._s(i.$trans("Click 'OK' to report this as a bad problem."))}}),i._v(" "),_("p",{domProps:{textContent:i._s(i.$trans("Click 'Cancel' to return without reporting."))}})]),i._v(" "),_("div",{class:i.$style.footer},[_("v5-button",{attrs:{size:"small",theme:"basic-light"},domProps:{textContent:i._s(i.$trans("Cancel"))},on:{click:i.hide}}),i._v(" "),_("v5-button",{attrs:{size:"small",theme:"primary"},domProps:{textContent:i._s(i.$trans("OK"))},on:{click:i.reportCurrentPuzzle}})],1)],1)],1)}),[],!1,(function modal_report_puzzle_injectStyles(i){this.$style=Li.locals||Li}),null,null),Ni=Ri.exports;var Di=(0,ir.Z)({[Un.REPORT_PUZZLE]:{component:Ni,el:`#${Un.REPORT_PUZZLE}`,store:st.default}});let ji;var Bi=__webpack_require__(5556),$i=__webpack_require__(8739),Ui=__webpack_require__(74672);Object.create,Object.defineProperty,Object.getOwnPropertyDescriptor,Object.getOwnPropertyNames,Object.getPrototypeOf,Object.prototype.hasOwnProperty;function showGuestModal({slide:i,title:s}={}){__webpack_require__.e(435).then(__webpack_require__.bind(__webpack_require__,19911)).then((({default:_})=>{_.createInstance(Bi.xL.GUEST_MODAL);const T=(0,$i.j)()?void 0:Bi._G.GUEST_MODAL_SLIDES.pawn;(0,Ui.o)({key:Bi.U3.SHOW_GUEST_MODAL,slide:i||T,title:s})}))}const showTrialModal=()=>{tL.createInstance(Un.TRIAL).$children[0].show()},showTrialPuzzleStreaksModal=()=>{tL.createInstance(Un.TRIAL_PUZZLE_STREAKS).$children[0].show()};var Fi=__webpack_require__(52085),Hi=__webpack_require__(17686);function toggleComments(i){(0,Fi.y)(Hi.I.BodyClass.Comments,i)}var qi=__webpack_require__(92957),Vi=__webpack_require__(49790),Gi=__webpack_require__(26670);const Zi={help:D.Z.generate("web_help"),login:D.Z.generate("web_security_login_and_go",{returnUrl:window.location.href}),member:i=>D.Z.generate("web_member_view",{username:i}),register:D.Z.generate("web_security_register"),verificationEmail:D.Z.generate("web_user_settings_change_email")},Wi={activate:ht.Z.trans("You must activate your account to comment."),cancel:ht.Z.trans("Cancel"),comments:ht.Z.trans("Comments"),commentsLocked:ht.Z.trans("Comments are locked"),contact:ht.Z.trans("If you need help, please contact our "),copyLink:ht.Z.trans("Copy link"),delete:ht.Z.trans("Delete"),deleteConfirmation:ht.Z.trans("Are you sure you want to delete this comment?"),edit:ht.Z.trans("Edit"),giftMembership:ht.Z.trans("Give a Gift Membership"),fetching:ht.Z.trans("Fetching..."),helpAndSupportTeam:ht.Z.trans("Help and Support team"),login:ht.Z.trans("Login"),follow:ht.Z.trans("Follow"),followAlert:ht.Z.trans("Great! You will be notified when someone leaves a comment."),join:ht.Z.trans("Join"),no:ht.Z.trans("No"),or:ht.Z.trans("or"),post:ht.Z.trans("Post"),placeholder:ht.Z.trans("Please be relevant and kind"),processing:ht.Z.trans("Processing..."),quote:ht.Z.trans("Quote"),resendVerificationEmail:ht.Z.trans("Resend Verification Email"),signUpToComment:ht.Z.trans("Please Sign Up to comment."),unfollowAlert:ht.Z.trans("Received! You will no longer receive alerts when someones leaves a comment."),update:ht.Z.trans("Update"),verifyYourAccount:ht.Z.trans("Please click on the link in your email to verify your account."),yes:ht.Z.trans("Yes"),sanitize:ht.Z.trans("Show Images and Links")},Ki="comment-",Yi="comments-component",Xi={default:0,editing:1,quoting:2,fetching:3,processing:4},Qi=["first_comment","last_comment","comment","first_new_comment"],Ji=0,ea=1,ta=2,na=[{label:ht.Z.trans("Newest"),value:Ji},{label:ht.Z.trans("Oldest"),value:ea},{label:ht.Z.trans("Relevance"),value:ta}],ra={[ea]:"asc",[Ji]:"desc",[ta]:"relevance"},stripHTMLComments=i=>i.replace(/<!--([\s\S]*?)-->/gm,"");var ia,aa,sa,oa,la,ca=__webpack_require__(38075);const reactions_config_routes_listOfContentsReactionsSummary=i=>{const s=i.map((i=>`content[]=${i}`));return`${ua.ORIGIN}summaries?${s.join("&")}`},reactions_config_routes_removeReaction=(i,s)=>`${ua.ORIGIN}contents/${i}/reactions/${s}`,reactions_config_routes_reportContent=i=>(0,jr.b)("web_user_callback_report_content",{uuid:i}),reactions_config_routes_postReaction=(i,s)=>`${ua.ORIGIN}contents/${i}/reactions/${s}`,reactions_config_routes_reactedUsers=(i,s)=>`${ua.ORIGIN}contents/${i}/reactions/${s}/users`,ua={ACTIONS:{POST:"post",REMOVE:"remove"},CONTENT_TYPE:{MULTIPLE:"multiple",SINGLE:"single"},DOWNVOTE:"downvote",MAX_USERS:5,ORIGIN:null==(sa=null==(aa=null==(ia=window.PubSub)?void 0:ia.options)?void 0:aa.url)?void 0:sa.reactions,REACTIONS_TO_SHOW:10,SPINNER:"/bundles/web/images/animated/loader.gif",TOKEN:null==(la=null==(oa=window.context)?void 0:oa.csrf)?void 0:la.token,TRIGGER:"trigger",UPVOTE:"upvote"},da={REACTIONS_MULTIPLE_CONTENTS:"reactions-multiple-contents",REACTIONS_SINGLE_CONTENT:"reactions-single-content",REACTIONS_REPORT:"reactions-report",REACTIONS_VOTE:"reactions-vote",VOTE_PARENT:"vote-parent"},ha=[{name:"verbal_abuse",title:"Verbal Abuse",value:4},{name:"racism",title:"Racism",value:11},{name:"violence",title:"Violence / Threats",value:10},{name:"sexual_harassment",title:"Sexual Harassment",value:12},{name:"avatar_username",title:"Inappropriate Avatar or Username",value:7},{name:"spamming",title:"Spamming",value:3}],pa=(j.$H.trans("Comment Downvoted"),j.$H.trans("Note Downvoted"),()=>ca.Z.create({headers:{accept:"application/json"},withCredentials:!0})),toggleReaction=(i,s,_)=>_===ua.ACTIONS.POST?pa().post(reactions_config_routes_postReaction(i,s),{_token:ua.TOKEN}):pa().delete(reactions_config_routes_removeReaction(i,s),{_token:ua.TOKEN});var ma=__webpack_require__(23992);const fa=(0,ma.ref)({content:"",summary:[{count:0,reaction:"",me:!1}]}),ga=(0,ma.ref)([{content:"",summary:[{count:0,reaction:"",me:!1}]}]);async function get_multiple_content_reactions_getMultipleContentReactions(i){const{data:s}=await(i=>pa().get(reactions_config_routes_listOfContentsReactionsSummary(i),{_token:ua.TOKEN}))(i);ga.value=s}const generateThreadId=(i,s)=>`${s}-${i}`,hasUserPopover=i=>/v-user-popover/g.test(i),transformCommentBody=i=>{let s=i;return hasUserPopover(i)&&(s=(i=>i.replace(/<span[^>]+data-username="([a-z0-9_-]{3,20})">(\s[@]\1)<\/span>/gi,((i,s,_)=>`<a href="${Zi.member(s)}" class="v-user-popover username" v-user-popover="'${s}'">${_}</a>`)))(i)),s},transformComment=(i,s)=>({id:i.id,threadId:s,body:transformCommentBody(i.body),createdAt:i.created_at,createdAtRelative:Ar.p6.relative(i.created_at),createDate:i.create_date,lastDate:i.last_date,author:{avatarUrl:i.avatar_url,country:i.country,countryId:i.country_id,flairCode:i.authorFlairCode,id:i.user_id,membership:i.membership_code,username:i.username,chessTitle:i.chess_title},reactionsId:i.reactionsId,user:{canDelete:i.user_can_delete,canEdit:i.user_can_edit,canReceiveGift:i.user_can_receive_gift,isEnabled:i.user_is_enabled,isGroupAdmin:i.is_author_group_admin,isGroupSuperAdmin:i.is_author_group_super_admin},visibilityPolicy:i.visibilityPolicy}),scrollToElement=(i=0)=>{const s=(()=>{const i=window.location.hash;if(i&&i.length>0){const s=i.slice(1).split("&").reduce(((i,s)=>{const[_]=s.split("=");return-1!==Qi.indexOf(_)&&i.push(_),i}),[]);if(s.length>0)return s[0]}return null})(),_=document.getElementById(s);if(_)_.scrollIntoView();else{if(i>=4)return;setTimeout((()=>{scrollToElement(i+1)}),250)}},generateReactionsPrefix=({data:i})=>{var s,_;const T=null==(_=null==(s=null==i?void 0:i[0])?void 0:s.reactionsId)?void 0:_.split("_");return(null==T?void 0:T[0])?`${T[0]}_${T[1]}`:""};var va="web_comment_callback_list",ba="web_comment_callback_body",ya="web_comment_callback_quote",_a="web_comment_callback_create",wa="web_forum_callback_comment",ka="web_comment_callback_update",Ta="web_comment_callback_delete",Sa="web_track_content_callback_comment";var Ca=new class CommentsService{get({parentId:i,topicCode:s},_=1,T={}){let S=D.Z.generate(va,Object.assign({page:_,parentId:i,forumTopicTypeCode:s},T));return T.sort===ra[ta]&&(S=D.Z.generate("web_comment_callback_list_for_reactions",{page:_,reactionsIdPrefix:T.reactionsPrefix})),ca.Z.get(S)}create(i,{parentId:s,topicCode:_}){if("forum_topic"===_){const _=D.Z.generate(wa);return ca.Z.post(_,{body:i,parentId:s,subject:""})}const T=D.Z.generate(_a);return ca.Z.post(T,{comment:{body:i},parentId:s,forumTopicTypeCode:_})}update(i,s){const _=D.Z.generate(ka,{id:i});return ca.Z.post(_,{comment:{body:s}})}delete(i){return ca.Z.post(D.Z.generate(Ta,{id:i}))}edit(i){return ca.Z.get(D.Z.generate(ba,{id:i}))}quote(i){return ca.Z.get(D.Z.generate(ya,{id:i}))}follow({parentId:i,topicCode:s}){const _=D.Z.generate(Sa,{parentId:i,forumTopicTypeCode:s,track:"true"});return ca.Z.post(_,{})}unfollow({parentId:i,topicCode:s}){const _=D.Z.generate(Sa,{parentId:i,forumTopicTypeCode:s,track:"false"});return ca.Z.post(_,{})}},xa=__webpack_require__(66447),Ea={initializeThread:({commit:i,dispatch:s},{parentId:_,topicCode:T,query:S,showReactions:C})=>(i("createThread",{id:generateThreadId(_,T),busy:!1,comments:[],paginator:{more:!1,page:S&&S.page?S.page:1,perPage:20,total:0},user:{isFollowing:!1,canComment:!1}}),s("getThread",{parentId:_,topicCode:T,query:S,showReactions:C})),getThread({commit:i},{parentId:s,topicCode:_,page:T,query:S,showReactions:C}){const P=generateThreadId(s,_);return i("isBusy",P),Ca.get({parentId:s,topicCode:_},T,S).then((i=>i.data)).then((i=>(({thread:i,threadId:s,showReactions:_=!1})=>{const T=i.data.map((i=>transformComment(i,s)));_&&T.length&&get_multiple_content_reactions_getMultipleContentReactions(T.map((i=>i.reactionsId)));return{id:s,comments:T,paginator:{more:i.meta.more,page:i.meta.page,perPage:i.meta.per_page,total:i.meta.total},user:{canComment:i.meta.user_can_comment,isFollowing:i.meta.is_following},reactionsPrefix:generateReactionsPrefix(i)}})({thread:i,threadId:P,showReactions:C}))).then((s=>{i("updateThread",s),i("isReady",P)})).catch((()=>(0,Gi.el)({type:Vi.V5.error,message:Vi.R0.badRequest})))},createComment({commit:i},{body:s,parentId:_,topicCode:T}){const S=generateThreadId(_,T);return Ca.create(s,{parentId:_,topicCode:T}).then((i=>i.data)).then((i=>i.data)).then((i=>transformComment(i,S))).then((s=>{i("addComment",{comment:s,threadId:S}),i("updateReactionsPrefix",generateReactionsPrefix({data:[s]})),(0,Gi.el)({type:Vi.V5.success,message:Vi.sY.commentCreated})})).then((()=>{window.context.user.autoTrackContent&&i("followThread",S)})).catch((i=>{(0,Gi.el)({type:Vi.V5.error,message:i.response.data.message})}))},updateComment:({commit:i},{threadId:s,commentId:_,body:T})=>Ca.update(_,T).then((i=>i.data)).then((i=>i.data)).then((i=>transformComment(i,s))).then((_=>{i("updateComment",{comment:_,threadId:s}),(0,Gi.el)({type:Vi.V5.success,message:Vi.sY.commentUpdated})})).catch((()=>(0,Gi.el)({type:Vi.V5.error,message:Vi.R0.badRequest}))),deleteComment:({commit:i},{threadId:s,commentId:_})=>Ca.delete(_).then((()=>{i("removeComment",{commentId:_,threadId:s}),(0,Gi.el)({type:Vi.V5.success,message:Vi.sY.commentDeleted})})).catch((()=>(0,Gi.el)({type:Vi.V5.error,message:Vi.R0.badRequest}))),followThread({commit:i},{parentId:s,topicCode:_}){const T=generateThreadId(s,_);return Ca.follow({parentId:s,topicCode:_}).then((()=>i("followThread",T))).then((()=>(0,Gi.el)({type:Vi.V5.success,message:Wi.followAlert}))).catch((()=>(0,Gi.el)({type:Vi.V5.error,message:Vi.R0.badRequest})))},unfollowThread({commit:i},{parentId:s,topicCode:_}){const T=generateThreadId(s,_);return Ca.unfollow({parentId:s,topicCode:_}).then((()=>i("unfollowThread",T))).then((()=>(0,Gi.el)({type:Vi.V5.success,message:Wi.unfollowAlert}))).catch((()=>(0,Gi.el)({type:Vi.V5.error,message:Vi.R0.badRequest})))},copyCommentLink(i,s){const _=`${window.location.origin}${window.location.pathname}#${s}`;(0,xa.o)(_),(0,Gi.el)({type:Vi.V5.success,message:Vi.sY.commentLinkCopied})},setApproval({commit:i},{threadId:s,commentId:_,approved:T}){i("setApproval",{threadId:s,commentId:_,approved:T})}},Pa={addComment(i,{comment:s,threadId:_}){i.threads.find((({id:i})=>i===_)).comments.unshift(s)},updateComment(i,{comment:s,threadId:_}){const T=i.threads.find((({id:i})=>i===_)).comments.findIndex((({id:i})=>i===s.id));i.threads.find((i=>i.id===_)).comments.splice(T,1,s)},updateReactionsPrefix(i,s){i.threads[0].reactionsPrefix=s},removeComment(i,{commentId:s,threadId:_}){const T=i.threads.find((({id:i})=>i===_)).comments,S=T.findIndex((i=>i.id===s));T.splice(S,1),i.threads.find((i=>i.id===_)).comments=T},createThread(i,s){i.threads.push(s)},updateThread(i,s){const _=i.threads.findIndex((i=>i.id===s.id));i.threads.splice(_,1,s)},destroyThread(i,s){const _=i.threads.findIndex((i=>i.id===s));i.threads.splice(_,1)},followThread(i,s){i.threads.find((i=>(null==i?void 0:i.id)===s)).user.isFollowing=!0},unfollowThread(i,s){i.threads.find((i=>i.id===s)).user.isFollowing=!1},isBusy(i,s){i.threads.find((i=>i.id===s)).busy=!0},isReady(i,s){i.threads.find((i=>i.id===s)).busy=!1},setApproval(i,{threadId:s,commentId:_,approved:T}){i.threads.find((({id:i})=>i===s)).comments.find((i=>i.id===_)).visibilityPolicy=T}},Aa={namespaced:!0,state:{threads:[]},actions:Ea,mutations:Pa};let Oa=null,Ma=!1,za=!1;const hideComments=()=>{za&&(Oa.style="display: none",za=!1,toggleComments(!1))},togglePuzzleComments=()=>{Ma||(Oa=document.getElementById(Dn),(0,qi.X)({comments:Aa}),tL.createInstance(Nn),Ma=!0),za?hideComments():za||(Oa.style="",za=!0,toggleComments(!0),setTimeout((()=>{Oa.scrollIntoView()})))};var Ia=Object.defineProperty,La=Object.defineProperties,Ra=Object.getOwnPropertyDescriptors,Na=Object.getOwnPropertySymbols,Da=Object.prototype.hasOwnProperty,ja=Object.prototype.propertyIsEnumerable,board_wrappervue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?Ia(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,board_wrappervue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))Da.call(s,_)&&board_wrappervue_type_script_lang_js_defNormalProp(i,_,s[_]);if(Na)for(var _ of Na(s))ja.call(s,_)&&board_wrappervue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},board_wrappervue_type_script_lang_js_spreadProps=(i,s)=>La(i,Ra(s)),Ba={name:"PuzzleBoard",components:{newChessBoard:hr.Z},directives:{ClickOutside:ur.Z},props:{boardNamespace:{type:String,default:"board"},gameNamespace:{type:String,default:"game"}},data:()=>({nodeChangeEvents:[...lr.j.filter((i=>i!==sr.QY.APIEvents.Move)),sr.QY.APIEvents.NodeUpdated],plugins:[(0,sr.YP)()]}),computed:board_wrappervue_type_script_lang_js_spreadProps(board_wrappervue_type_script_lang_js_spreadValues({},(0,dr.mapState)({analysisBoard:i=>{var s;return null==(s=i.puzzlesBattle)?void 0:s.analysisBoard},battleAnalysisBoard:i=>i.puzzlesBattle&&i.puzzles.puzzleMode===vn.BATTLE?i.puzzlesBattle.analysisBoard:null,boardSettings(i){return i[this.boardNamespace]||i.board},canAnalyze:i=>!(!i.puzzlesBattle||i.puzzles.puzzleMode!==vn.BATTLE)&&i.puzzlesBattle.canAnalyze,game(i){return i[this.gameNamespace]||i.game},gameplayState:i=>i.puzzles.gameplayState,puzzleMode:i=>i.puzzles.puzzleMode,resetPuzzle:i=>i.puzzles.resetPuzzle,shouldScheduleNextTactic(){return shouldScheduleNextTactic({playerMoveCorrect:this.gameplayState===_n.SOLVED,puzzleMode:this.puzzleMode,showDetails:this.showDetails})},showDetails:i=>i.puzzles.showDetails})),{analysisOnOtherBoard(){return this.battleAnalysisBoard&&this.battleAnalysisBoard.gameNamespace!==this.gameNamespace},boardOptions(){return board_wrappervue_type_script_lang_js_spreadProps(board_wrappervue_type_script_lang_js_spreadValues({},this.boardSettings.boardOptions),{autoPromote:!1,premoveHighlightColor:"#fff",test:Boolean(window.Cypress)})},mode(){const i=this.gameplayState===_n.START,s=[vn.LEARNING,vn.RATED].includes(this.puzzleMode)&&[_n.MOVE_INCORRECT,_n.SOLVED_WITH_HINT,_n.SOLVED,_n.MOVE_CORRECT].includes(this.gameplayState);return this.analysisBoard?sr.nl.Types.Analysis:i||s?sr.nl.Types.PassiveObserving:"playing-with-premoves"}}),methods:board_wrappervue_type_script_lang_js_spreadProps(board_wrappervue_type_script_lang_js_spreadValues(board_wrappervue_type_script_lang_js_spreadValues({},(0,dr.mapActions)({toggleBattleAnalysisBoard:"puzzlesBattle/toggleBattleAnalysisBoard",battleMakeMove:"puzzlesBattle/boardMakeMove",moveBackwardAction:"puzzles/moveBackward",moveForwardAction:"puzzles/moveForward",retryLearning:"puzzles/retryPuzzle",retryRated:"puzzlesRated/retryPuzzle",sharedMakeMove:"puzzles/boardMakeMove"})),(0,dr.mapMutations)({setResetPuzzle:"puzzles/setResetPuzzle"})),{onNewBoardMount(){(0,cr.y6)(this.$refs.newBoard.getGame(),this.gameNamespace),O.Z.emit(hn)},makeMove(i){this.$store.dispatch(`${this.gameNamespace}/onNodeChange`,this.$refs.newBoard.getGame()),i.data.move.userGenerated&&(this.puzzleMode===vn.BATTLE?this.battleMakeMove({event:i,gameNamespace:this.gameNamespace}):this.sharedMakeMove(i))},moveBackward(){this.analysisOnOtherBoard||this.moveBackwardAction({boardNamespace:this.boardNamespace,gameNamespace:this.gameNamespace})},moveForward(i){this.analysisOnOtherBoard||(this.moveForwardAction({boardNamespace:this.boardNamespace,gameNamespace:this.gameNamespace}),i.preventDefault())},onClick(){if((0,rr.FR)("puzzle_battle_analysis")&&this.puzzleMode===vn.BATTLE&&!this.battleAnalysisBoard&&this.toggleBattleAnalysisBoard({boardNamespace:this.boardNamespace,gameNamespace:this.gameNamespace}),this.gameplayState===_n.MOVE_INCORRECT&&!this.shouldScheduleNextTactic){if(this.resetPuzzle)return this.puzzleMode===vn.RATED&&this.retryRated(),this.puzzleMode===vn.LEARNING&&this.retryLearning(),void this.setResetPuzzle(!1);this.setResetPuzzle(!0)}},onClickOutside(){(0,rr.FR)("puzzle_battle_analysis")&&isSameBoard({analysisBoard:this.battleAnalysisBoard,gameNamespace:this.gameNamespace})&&this.toggleBattleAnalysisBoard({boardNamespace:this.boardNamespace,gameNamespace:this.gameNamespace})},onNodeChange(){this.$store.dispatch(`${this.gameNamespace}/onNodeChange`)}})},$a=Ba,Ua=(0,Rr.Z)($a,(function(){var i=this,s=i.$createElement;return(i._self._c||s)("new-chess-board",{directives:[{name:"click-outside",rawName:"v-click-outside",value:i.onClickOutside,expression:"onClickOutside"}],ref:"newBoard",attrs:{"has-custom-arrow-handler":"",identifier:i.boardNamespace,mode:i.mode,"node-change-events":i.nodeChangeEvents,options:i.boardOptions,plugins:i.plugins},on:{click:i.onClick,makeMove:i.makeMove,mounted:i.onNewBoardMount,moveBackward:i.moveBackward,moveForward:i.moveForward,nodeChange:i.onNodeChange}})}),[],!1,null,null,null).exports;var Fa={name:"CommentFollow",components:{FormCheckbox:__webpack_require__(69848).Z},props:{followThread:{type:Function,required:!0},isFollowing:{type:Boolean,required:!0},lightMode:{type:Boolean,default:!0},unfollowThread:{type:Function,required:!0}},data:()=>({translations:Wi}),methods:{handleCheckbox(i){i?this.followThread():this.unfollowThread()}}},Ha={component:"comment-follow-component"};var qa=(0,Rr.Z)(Fa,(function(){var i=this,s=i.$createElement;return(i._self._c||s)("form-checkbox",{class:i.$style.component,attrs:{name:"comments-follow",label:i.translations.follow,value:i.isFollowing},on:{input:i.handleCheckbox}})}),[],!1,(function comment_follow_injectStyles(i){this.$style=Ha.locals||Ha}),null,null).exports,Va={name:"CommentFormGuest",components:{V5Button:Tr.V5Button},data:()=>({routes:Zi,translations:Wi})},Ga={component:"comment-form-guest-component",btn:"comment-form-guest-btn"};var Za=(0,Rr.Z)(Va,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("v5-button",{class:i.$style.btn,attrs:{size:"small",theme:"primary",href:i.routes.login}},[i._v("\n    "+i._s(i.translations.login)+"\n  ")]),i._v(" "),_("span",[i._v(i._s(i.translations.or))]),i._v(" "),_("v5-button",{class:i.$style.btn,attrs:{size:"small",theme:"primary",href:i.routes.register}},[i._v("\n    "+i._s(i.translations.join)+"\n  ")])],1)}),[],!1,(function comment_form_guest_injectStyles(i){this.$style=Ga.locals||Ga}),null,null),Wa=Za.exports,Ka=__webpack_require__(34904),Ya={name:"OnlineStatus",props:{isInLivechess:Boolean,isOnline:Boolean},computed:{classes(){return[this.$style.component,{[this.$style.online]:this.isOnline},{[this.$style.live]:this.isInLivechess}]}}},Xa={component:"online-status-component",online:"online-status-online",live:"online-status-live"};var Qa=(0,Rr.Z)(Ya,(function(){var i=this,s=i.$createElement;return(i._self._c||s)("div",{class:i.classes})}),[],!1,(function online_status_injectStyles(i){this.$style=Xa.locals||Xa}),null,null).exports,Ja=__webpack_require__(86910),es=__webpack_require__(4593),ns={name:"PresenceSquare",props:{size:{type:Number,required:!1,default:3},userPresence:{type:Object,required:!0}},computed:{squareColor(){var i,s;return(null==(i=this.userPresence)?void 0:i.isPlaying)?this.$style.red:(null==(s=this.userPresence)?void 0:s.isOnline)?this.$style.green:""},squareStyle(){return`width: ${this.size}rem; height: ${this.size}rem;`}}},rs=ns,is={component:"presence-square-component",square:"presence-square-square",round:"presence-square-round",red:"presence-square-red",green:"presence-square-green"};var as=(0,Rr.Z)(rs,(function(){var i,s=this,_=s.$createElement,T=s._self._c||_;return T("div",{class:s.$style.component},[T("div",{class:[s.$style.square,s.squareColor,(i={},i[s.$style.round]=s.size>2,i)],style:s.squareStyle})])}),[],!1,(function presence_square_injectStyles(i){this.$style=is.locals||is}),null,null),ss=as.exports,os={name:"UserAvatar",directives:{ImageDefer:es.Z},components:{OnlineStatus:Qa,PresenceSquare:ss},props:{alt:{type:String,default:""},image:{type:String,required:!0},isLive:{type:Boolean,default:!1},presenceData:{type:Object,default:void 0},presenceSize:{type:Number,default:1.5},isOnline:{type:Boolean,default:!1},url:{type:String,required:!1}},computed:{blankImage:()=>(0,Ja.n)("bundles/web/images/user-image.svg")}},ls={component:"user-avatar-component",image:"user-avatar-image"};var cs=(0,Rr.Z)(os,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _(i.url?"a":"div",{tag:"component",class:i.$style.component,attrs:{href:i.url}},[_("img",{directives:[{name:"image-defer",rawName:"v-image-defer",value:{src:i.image,srcset:!0},expression:"{src: image, srcset: true}"}],class:i.$style.image,attrs:{alt:i.alt.length?i.alt:null,src:i.blankImage,width:"50",height:"50"}}),i._v(" "),i.presenceData?_("presence-square",{attrs:{size:i.presenceSize,"user-presence":i.presenceData}}):_("online-status",{attrs:{"is-in-live-chess":i.isLive,"is-online":i.isOnline}})],1)}),[],!1,(function user_avatar_injectStyles(i){this.$style=ls.locals||ls}),null,null),us=cs.exports,ds={name:"CommentFormInactive",components:{UserAvatar:us,V5Button:Tr.V5Button},props:{avatar:{type:String,required:!0},isGuest:{type:Boolean,default:!1}},data:()=>({routes:Zi,translations:Wi}),methods:{showSignUpModal:Ka.m}},hs={component:"comment-form-inactive-component",info:"comment-form-inactive-info",link:"comment-form-inactive-link",alert:"comment-form-inactive-alert"};var ps=(0,Rr.Z)(ds,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("user-avatar",{attrs:{image:i.avatar}}),i._v(" "),_("div",{class:i.$style.info},[i.isGuest?_("v5-button",{attrs:{theme:"primary","full-width":!0},domProps:{textContent:i._s(i.translations.signUpToComment)},on:{click:function(s){return i.showSignUpModal()}}}):[_("div",{class:i.$style.alert,domProps:{textContent:i._s(i.translations.activate)}}),i._v(" "),_("p",[i._v("\n        "+i._s(i.translations.verifyYourAccount)+"\n\n        "),_("a",{class:i.$style.link,attrs:{href:i.routes.verificationEmail},domProps:{textContent:i._s(i.translations.resendVerificationEmail)}})])],i._v(" "),_("p",[i._v("\n      "+i._s(i.translations.contact)+"\n\n      "),_("a",{class:i.$style.link,attrs:{href:i.routes.help},domProps:{textContent:i._s(i.translations.helpAndSupportTeam)}})])],2)],1)}),[],!1,(function comment_form_inactive_injectStyles(i){this.$style=hs.locals||hs}),null,null),ms=ps.exports,fs={name:"CommentFormPost",components:{V5Button:Tr.V5Button},props:{cancelComment:{type:Function,required:!0},postComment:{type:Function,required:!0},updateComment:{type:Function,required:!0},status:{type:Number,required:!0}},data:()=>({statuses:Xi,translations:Wi}),computed:{busyLabel(){let i;return this.status===Xi.fetching?i=Wi.fetching:this.status===Xi.processing&&(i=Wi.processing),i},showBusyButton(){return this.status===Xi.fetching||this.status===Xi.processing},showCancelButton(){return this.status===Xi.editing||this.status===Xi.quoting},showPostButton(){return this.status===Xi.default||this.status===Xi.quoting},showUpdateButton(){return this.status===Xi.editing}}},gs=fs,vs={component:"comment-form-post-component",editor:"comment-form-post-editor",actions:"comment-form-post-actions",button:"comment-form-post-button"};var bs=(0,Rr.Z)(gs,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[i._t("editor"),i._v(" "),_("div",{class:i.$style.actions},[i.showPostButton?_("v5-button",{class:i.$style.button,attrs:{id:"message-submit",size:"small",theme:"primary"},domProps:{textContent:i._s(i.translations.post)},on:{click:function(s){return i.postComment()}}}):i._e(),i._v(" "),i.showUpdateButton?_("v5-button",{class:i.$style.button,attrs:{size:"small",theme:"primary"},domProps:{textContent:i._s(i.translations.update)},on:{click:i.updateComment}}):i._e(),i._v(" "),i.showCancelButton?_("v5-button",{class:i.$style.button,attrs:{size:"small",theme:"basic"},domProps:{textContent:i._s(i.translations.cancel)},on:{click:function(s){return i.cancelComment()}}}):i._e(),i._v(" "),i.showBusyButton?_("v5-button",{class:i.$style.button,attrs:{size:"small",theme:"basic",disabled:!0},domProps:{textContent:i._s(i.busyLabel)}}):i._e(),i._v(" "),i._t("follow")],2)],2)}),[],!1,(function comment_form_post_injectStyles(i){this.$style=vs.locals||vs}),null,null),ys=bs.exports,_s=__webpack_require__(4744),ws=__webpack_require__(24452);function get_array_of_elements_getArrayOfElements(i){return[...document.querySelectorAll(i)]}var ks={name:"ConfirmPopover",components:{V5Button:Tr.V5Button},props:{messageLabel:String,onConfirm:{type:Function,default:()=>{}},yesBtnLabel:{type:String,default:(0,j.dW)("Yes")},cancelBtnLabel:{type:String,default:(0,j.dW)("Cancel")}},data(){return{position:{placement:"top",left:0,top:0},visible:!1,cancelButtonSelector:this.$cy?this.$cy.confirmPopover.buttons.cancelButton:"",yesButtonSelector:this.$cy?this.$cy.confirmPopover.buttons.yesButton:""}},computed:{style(){let i={transform:`translate(${this.position.left}px, ${this.position.top}px)`};return(0,Or.t)()&&(i={transform:`translate(0, ${this.position.top}px)`,left:`${this.position.left}px`,right:"auto"}),i}},methods:{hide(){get_array_of_elements_getArrayOfElements(`.${Sr.xL.CONFIRM_OPEN}`).forEach((i=>i.classList.remove(Sr.xL.CONFIRM_OPEN))),this.visible=!1,this.removeListeners()},show(i,s="top"){this.visible=!0,this.addListeners(),this.$nextTick((()=>{this.position=(0,ws.bt)(i,this.$el,s,10)}))},onYesClick(){this.hide(),this.onConfirm()},scrollListener(){window.addEventListener("scroll",this.hide,{once:!0})},clickListener(){document.addEventListener("click",this.hide,{capture:!0,once:!0})},addListeners(){this.scrollListener(),this.clickListener()},removeListeners(){window.removeEventListener("scroll",this.scrollListener),document.removeEventListener("click",this.clickListener,!0)}}},Ts={component:"confirm-popover-inline-component",inner:"confirm-popover-inline-inner",top:"confirm-popover-inline-top",right:"confirm-popover-inline-right",bottom:"confirm-popover-inline-bottom",left:"confirm-popover-inline-left",message:"confirm-popover-inline-message",buttons:"confirm-popover-inline-buttons",button:"confirm-popover-inline-button"};var Ss=(0,Rr.Z)(ks,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{directives:[{name:"show",rawName:"v-show",value:i.visible,expression:"visible"}],ref:"modal",class:[i.$style.component,i.$style[i.position.placement]],style:i.style},[_("div",{class:i.$style.inner},[_("div",{class:i.$style.message,domProps:{innerHTML:i._s(i.messageLabel)}}),i._v(" "),_("div",{class:i.$style.buttons},[_("v5-button",{class:i.$style.button,attrs:{size:"x-small",theme:"basic-light"},domProps:{textContent:i._s(i.cancelBtnLabel)},on:{click:i.hide}}),i._v(" "),_("v5-button",{class:i.$style.button,attrs:{size:"x-small",theme:"primary"},domProps:{textContent:i._s(i.yesBtnLabel)},on:{click:i.onYesClick}})],1)])])}),[],!1,(function confirm_popover_inline_injectStyles(i){this.$style=Ts.locals||Ts}),null,null),Cs=Ss.exports,xs={name:"ConfirmPopover",components:{ModalContainer:zr.Z,ModalContent:yi.Z,V5Button:Tr.V5Button},props:{additionalClass:String,messageLabel:String,yesBtnLabel:{type:String,default:(0,j.dW)("Yes")},cancelBtnLabel:{type:String,default:(0,j.dW)("Cancel")},onConfirm:{type:Function,default:()=>{}},onBackgroundClick:{type:Function,default:()=>{}},onCancel:Function,showOnMount:Boolean},data(){return{eventHubMessage:null,cancelButtonSelector:this.$cy?this.$cy.confirmPopover.buttons.cancelButton:"",yesButtonSelector:this.$cy?this.$cy.confirmPopover.buttons.yesButton:""}},computed:{message(){var i;return null!=(i=this.eventHubMessage)?i:this.messageLabel}},mounted(){O.Z.on(Sr.U3.SHOW_MODAL,(i=>{"string"==typeof i&&(this.eventHubMessage=i),this.show()})),this.showOnMount&&this.show()},methods:{hide(){this.$refs.modalContainer.hide()},show(){this.$refs.modalContainer.show()},onYesClick(){this.hide(),"function"==typeof this.onConfirm&&this.onConfirm(),O.Z.emit(Sr.U3.CONFIRM_POPOVER_YES)},onCancelClick(){this.hide(),"function"==typeof this.onCancel&&this.onCancel()}}},Es=xs,Ps={modal:"confirm-popover-modal",messageLabel:"confirm-popover-messageLabel",buttons:"confirm-popover-buttons",regular:"confirm-popover-regular"};var As=(0,Rr.Z)(Es,(function(){var i,s,_=this,T=_.$createElement,S=_._self._c||T;return S("modal-container",{ref:"modalContainer",attrs:{"data-confirm-popover":""},on:{"background-clicked":_.onBackgroundClick}},[S("modal-content",{ref:"modal",class:_.$style.modal},[S("div",{class:_.$style.messageLabel},[_._v("\n      "+_._s(_.message)+"\n    ")]),_._v(" "),S("div",{class:_.$style.buttons},[S("v5-button",{class:[_.$style.button,(i={},i[_.$style[""+_.additionalClass]]=_.additionalClass,i)],attrs:{"min-width":"",size:"small",theme:"basic-light"},domProps:{textContent:_._s(_.cancelBtnLabel)},on:{click:_.onCancelClick}}),_._v(" "),S("v5-button",{class:[_.$style.button,(s={},s[_.$style[""+_.additionalClass]]=_.additionalClass,s)],attrs:{"min-width":"",size:"small",theme:"primary"},domProps:{textContent:_._s(_.yesBtnLabel)},on:{click:_.onYesClick}})],1)])],1)}),[],!1,(function confirm_popover_injectStyles(i){this.$style=Ps.locals||Ps}),null,null),Os=As.exports;const Ms=(0,ir.Z)({confirmPopover:{component:Os,el:"#confirm-popover"},confirmPopoverInline:{component:Cs,el:"#confirm-popover-inline"}});let zs;const Is=[];var Ls={bind:(i,s)=>{const directiveClickListener=_=>{if(!s.value)return;if(zs="modal"===s.value.type?"confirmPopover":"confirmPopoverInline",!document.getElementById(Sr.xL.CONFIRM_POPOVER_INLINE)){const i=document.createElement("div");i.setAttribute("id",Sr.xL.CONFIRM_POPOVER_INLINE),document.body.appendChild(i)}const T=Ms.createInstance(zs),S=document.querySelector(`.${Sr.xL.TOOLTIP_CLASS}.${Sr.xL.TOOLTIP_TOP}`),C=T.$children[0];C&&(C.messageLabel=s.value.message,C.onConfirm=s.value.onConfirm,s.value.cancelBtnLabel&&(C.cancelBtnLabel=s.value.cancelBtnLabel),C.show(_.target,s.value.placement),i.classList.add(Sr.xL.CONFIRM_OPEN)),S&&S.classList.remove(Sr.xL.TOOLTIP_TOP),_.preventDefault()};i.addEventListener("click",directiveClickListener),i.dataset.listenerIndex=Is.length,Is.push(directiveClickListener)},unbind:i=>{i.removeEventListener("click",Is[i.dataset.listenerIndex])}},Rs={name:"CommentPostDelete",directives:{ConfirmPopover:Ls},props:{deleteComment:{type:Function,required:!0},customConfirmation:{type:String},showDelete:{type:Boolean,required:!0}},data:()=>({translations:Wi}),computed:{deletionMessage(){return this.customConfirmation||this.translations.deleteConfirmation}}},Ns={icon:"comment-post-delete-icon"};var Ds=(0,Rr.Z)(Rs,(function(){var i=this,s=i.$createElement;return(i._self._c||s)("span",{directives:[{name:"show",rawName:"v-show",value:i.showDelete,expression:"showDelete"},{name:"confirm-popover",rawName:"v-confirm-popover",value:{message:i.deletionMessage,onConfirm:i.deleteComment},expression:"{ message: deletionMessage, onConfirm: deleteComment }"}],staticClass:"icon-font-chess x",class:i.$style.icon})}),[],!1,(function comment_post_delete_injectStyles(i){this.$style=Ns.locals||Ns}),null,null).exports;function uniq(i){return i.filter(((i,s,_)=>_.indexOf(i)===s))}const js=[{name:"",icons:[{name:"happy",code:":)",emoji:"emoji_01_happy"},{name:"sad",code:":(",emoji:"emoji_05_sad"},{name:"angry",code:":C",emoji:"emoji_03_angry"},{name:"ohno",emoji:"emoji_04_hurt"},{name:"worry",emoji:"emoji_05_sad"},{name:"wink",code:";)",emoji:"emoji_06_wink"},{name:"tears",code:":.(",emoji:"emoji_07_sad"},{name:"cry",code:":_(",emoji:"emoji_08_lol"},{name:"delicious",emoji:"emoji_09_delicious"},{name:"meh",code:":/",emoji:"emoji_10_meh"},{name:"grin",code:":D",emoji:"emoji_11_happy"},{name:"eek",emoji:"emoji_12_shiver"},{name:"grimace",emoji:"emoji_13_bigmouth"},{name:"evil",code:":V",emoji:"emoji_14_bad"},{name:"nervous",emoji:"emoji_15_gasp"},{name:"rage",code:":[]",emoji:"emoji_16_angry"},{name:"blush",emoji:"emoji_17_flushed"},{name:"shock",emoji:"emoji_18_surprise"},{name:"dead",emoji:"emoji_19_dead"},{name:"zzz",emoji:"emoji_20_sleep"},{name:"tongue",emoji:"emoji_21_tongue"},{name:"laugh",code:":P",emoji:"emoji_22_happy"},{name:"river",emoji:"emoji_23_crying"},{name:"horror",emoji:"emoji_24_scream"},{name:"peaceful",emoji:"emoji_25_angel"},{name:"love",emoji:"emoji_26_love"},{name:"smart",emoji:"emoji_27_glasses"},{name:"cool",emoji:"emoji_28_cool"},{name:"mustache",emoji:"emoji_29_mustache"},{name:"ghost",emoji:"emoji_30_ghost"},{name:"scream",emoji:"emoji_31_scare"},{name:"devil",emoji:"emoji_32_evil"},{name:"sick",emoji:"emoji_33_yuk"},{name:"kiss",emoji:"emoji_34_kiss"},{name:"thinker",emoji:"emoji_35_thinker"},{name:"exploding_head",emoji:"emoji_37_mindblown"},{name:"star",emoji:"emoji_38_star"},{name:"facepalm",emoji:"emoji_36_facepalm"},{name:"clap",emoji:"emoji_39_clap"},{name:"raised_hands",emoji:"emoji_43_hands"},{name:"tup",emoji:"emoji_40_thumbsup"},{name:"tdown",emoji:"emoji_41_thumbsdown"},{name:"fist",emoji:"emoji_42_fist"},{name:"strong",emoji:"emoji_44_flexing"},{name:"wave",isPremium:!0,emoji:"emoji_45_hand"},{name:"troll",isPremium:!0,emoji:"emoji_46_meme"},{name:"rainbow",isPremium:!0,emoji:"emoji_47_rainbow"},{name:"unicorn",isPremium:!0,emoji:"emoji_48_unicorn"},{name:"coffee",isPremium:!0,emoji:"emoji_49_coffee"},{name:"donut",isPremium:!0,emoji:"emoji_50_donut"},{name:"earth",isPremium:!0,emoji:"emoji_51_world"},{name:"panda",isPremium:!0,emoji:"emoji_52_panda"},{name:"skull",isPremium:!0,emoji:"emoji_53_skull"},{name:"bitcoin",isPremium:!0,emoji:"emoji_54_coin"},{name:"donkey",isPremium:!0,emoji:"emoji_55_dunkey"},{name:"bomb",isPremium:!0,emoji:"emoji_57_bomb"},{name:"fire",isPremium:!0,emoji:"emoji_56_fire"},{name:"heart",isPremium:!0,emoji:"emoji_58_heart"},{name:"flag_ukraine",emoji:"emoji_59_flag_ukraine"},{name:"peace",emoji:"emoji_60_peace"}]},{name:"chess",icons:[{name:"play"},{name:"draw"},{name:"resign"},{name:"board"},{name:"wp"},{name:"wn"},{name:"wb"},{name:"wr"},{name:"wq"},{name:"wk"},{name:"medal"},{name:"mate"},{name:"cmate"},{name:"clock"},{name:"bp"},{name:"bn"},{name:"bb"},{name:"br"},{name:"bq"},{name:"bk"},{name:"bullet"},{name:"blitz"},{name:"live"},{name:"castle"},{name:"skewer"},{name:"fork"},{name:"pin"},{name:"fish"},{name:"trophy"},{name:"battle"},{name:"puzzle_rush"},{name:"bughouse"},{name:"daily"},{name:"watch"},{name:"four_player"},{name:"chesskid"},{name:"friend"},{name:"club"},{name:"leaderboard"},{name:"computer"},{name:"settings"},{name:"messages"},{name:"arena_kings"},{name:"speed_chess_championship"},{name:"titled_tuesday"},{name:"diamond"},{name:"platinum"},{name:"gold"},{name:"tilt"},{name:"king_of_the_hill"},{name:"3_check"},{name:"crazyhouse"},{name:"chess_960"},{name:"brilliant"},{name:"blunder"},{name:"1_0"},{name:"0_1"},{name:"1_2"},{name:"hype"},{name:"good_game"},{name:"stockfish"},{name:"lc0"},{name:"komodo"},{name:"timeout"}]},{name:"holiday",icons:[{name:"birthday_cake",isPremium:!0},{name:"party_hat",isPremium:!0},{name:"cheers",isPremium:!0},{name:"heart_bear",isPremium:!0},{name:"heart_gift",isPremium:!0},{name:"heart_letter",isPremium:!0},{name:"clover",isPremium:!0},{name:"coins_bag",isPremium:!0},{name:"palm_tree",isPremium:!0},{name:"fireworks",isPremium:!0},{name:"halloween_ghost",isPremium:!0},{name:"halloween",isPremium:!0},{name:"rip",isPremium:!0},{name:"maple_leaf",isPremium:!0},{name:"turkey",isPremium:!0},{name:"present",isPremium:!0},{name:"hanukkah",isPremium:!0},{name:"christmas_tree",isPremium:!0},{name:"santa",isPremium:!0},{name:"christmas_wrench",isPremium:!0}]},{name:"hosts",icons:[{name:"danny_rensch",isPremium:!0},{name:"danny_rensch_surprised",isPremium:!0},{name:"robert_hess",isPremium:!0},{name:"hikaru_nakamura",isPremium:!0},{name:"anand",isPremium:!0},{name:"naroditsky",isPremium:!0},{name:"maurice_ashley",isPremium:!0},{name:"anna_rudolf",isPremium:!0},{name:"alexandra_botez",isPremium:!0},{name:"andrea_botez",isPremium:!0},{name:"levy_rozman",isPremium:!0},{name:"eric_hansen",isPremium:!0},{name:"aman_hambleton",isPremium:!0},{name:"mike_klein",isPremium:!0},{name:"kosteniuk",isPremium:!0},{name:"samay_raina",isPremium:!0},{name:"kevin_bordi",isPremium:!0},{name:"krikor",isPremium:!0}]},{name:"pro chess league",icons:[{name:"pcl",isPremium:!0},{name:"argentina_krakens",isPremium:!0},{name:"brazil_capybaras",isPremium:!0},{name:"california_unicorns",isPremium:!0},{name:"canada_chessbrahs",isPremium:!0},{name:"chicago_wind",isPremium:!0},{name:"china_pandas",isPremium:!0},{name:"croatia_bulldogs",isPremium:!0},{name:"france_roosters",isPremium:!0},{name:"germany_bears",isPremium:!0},{name:"hungary_hunters",isPremium:!0},{name:"india_yogis",isPremium:!0},{name:"israel_counsellors",isPremium:!0},{name:"italy_gladiators",isPremium:!0},{name:"netherlands_mosquitoes",isPremium:!0},{name:"new_york_marshalls",isPremium:!0},{name:"norway_gnomes",isPremium:!0},{name:"poland_hussars",isPremium:!0},{name:"russia_wizards",isPremium:!0},{name:"saint_louis_arch_bishops",isPremium:!0},{name:"spain_raptors",isPremium:!0},{name:"sweden_wasabis",isPremium:!0},{name:"turkey_knights",isPremium:!0},{name:"uk_lions",isPremium:!0}]}],Bs=/(:[\w\)\(\;\.\_\]\[]+)/g,$s=/\S/;const Us="recentEmoticons";const Fs=new class Emoticons{constructor(){this.emoticonsByCode={},js.forEach((i=>{i.icons.forEach((i=>{i.code=i.code||`:${i.name}`,i.emoji&&(i.emoji=(0,Ja.n)(`/bundles/web/images/emojis/${i.emoji}.json`)),this.emoticonsByCode[i.code]=i}))})),this.emoticonsMatcherRegEx=function createEmoticonMatcherRegEx(i){let s=i.map((i=>i.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$|]/g,"\\$&")));return s=s.join("|"),new RegExp(`(?:\\s|^)(${s})(?=\\s|$)`,"g")}(Object.keys(this.emoticonsByCode))}getByCode(i){return this.emoticonsByCode[i]}getByName(i){return Object.values(this.emoticonsByCode).find((s=>s.name===i))}getList(i){const s=[];return js.forEach((_=>{const T={disabledIcons:[],enabledIcons:[],name:_.name};_.icons.forEach((s=>{s.isPremium&&!i?T.disabledIcons.push(s):T.enabledIcons.push(s)})),s.push(T)})),s}getRecentList(){return this.recentList||(this.recentList=uniq(kr.Z.get(Us,[])).map((i=>this.getByCode(i)))),this.recentList}addRecentEmoticon(i){const s=this.getRecentList();s.find((s=>s.code===i))||s.unshift(this.getByCode(i)),s.length>=10&&s.pop(),kr.Z.set(Us,uniq(s.map((i=>i.code))))}getFormattedInput(i){return`${i} `}emoticonify({text:i,userHasPremium:s,senderHasPremium:_,className:T="",showEmoji:S}){const C=function shouldEnlargeEmoticons(i=""){const s=i.match(Bs);return s&&s.length<=5&&!$s.test(i.replace(Bs,""))}(i),P=C?"emoticon-2x":"emoticon",O=i.replace(this.emoticonsMatcherRegEx,((i,O)=>{const M=this.emoticonsByCode[O],R=M.isPremium&&!s?ht.Z.trans("Upgrade to get all emojis!"):M.description||M.code;return _||!M.isPremium?_&&C&&S&&M.emoji?'<lottie-animation autoplay src="$1" width="40" height="40" title="$2" speed="0.5" />'.replace("$1",M.emoji).replace("$2",R):`<span class="${T}${T?" ":""}${P} ${P}-$1" title="$2"></span>`.replace("$1",M.name).replace("$2",R):O}));return O}getEmojiFromMessage(i){return(i.match(this.emoticonsMatcherRegEx)||[]).map((i=>this.emoticonsByCode[i])).filter((i=>Boolean(null==i?void 0:i.emoji)))}};var Hs,qs,Vs;const Gs=Boolean(null==(qs=null==(Hs=window.context)?void 0:Hs.user)?void 0:qs.isPremium),isInSingle=(i,s,_)=>i.content===s&&Boolean(i.summary.filter((i=>i.reaction===_&&i.me)).length),isInMultiple=(i,s,_,T)=>{var S,C;const P=i.filter((i=>i.content===s)),O=null==(S=null==P?void 0:P[0])?void 0:S.summary.filter((i=>i.reaction===_));return T===ua.ACTIONS.POST?Boolean(O.length):null==(C=null==O?void 0:O[0])?void 0:C.me},copySingleContent=i=>Object.assign({},{content:i.content,summary:i.summary.map((i=>Object.assign({},i)))}),copyMultipleContent=i=>i.map((i=>copySingleContent(i))),addReaction=(i,s,_)=>(_?i.summary.map((i=>(s===i.reaction&&(i.count+=1,i.me=!0),i))):i.summary.push({count:1,reaction:s,me:!0}),sortEntity(i)),deleteReaction=(i,s)=>(i.summary.map((i=>(s===i.reaction&&((i.reaction===ua.DOWNVOTE||i.reaction===ua.UPVOTE&&i.me)&&(i.count=i.count>1?i.count-1:0),i.me=!1),i))),sortEntity(i)),sortEntity=i=>(i.summary.sort(((i,s)=>s.count-i.count)),i),Zs=null==(Vs=window.context)?void 0:Vs.user,reactTooltipText=i=>Zs?Zs.isGuest?ht.Z.trans("Please register to react"):Zs.isActivated?Zs.isContentHidden?ht.Z.trans("Your account is muted"):i?"":ht.Z.trans("React"):ht.Z.trans("Please activate your account to react"):ht.Z.trans("Please log in to react"),multipleContentCount=i=>{var s,_;const T=null==(_=null==(s=ga.value)?void 0:s.filter((s=>s.content===i)))?void 0:_[0];return entityCount(T)},multipleContentVotes=i=>{var s,_;const T=null==(_=null==(s=ga.value)?void 0:s.filter((s=>s.content===i)))?void 0:_[0];return{downvotes:fetchCount(T,ua.DOWNVOTE),upvotes:fetchCount(T,ua.UPVOTE)}},entityCount=i=>{const s=fetchCount(i,ua.UPVOTE),_=fetchCount(i,ua.DOWNVOTE);return Number(s)-Number(_)},fetchCount=(i,s)=>{var _,T;return(null==(T=null==(_=null==i?void 0:i.summary)?void 0:_.find((i=>i.reaction===s)))?void 0:T.count)||0};var Ws={emits:["handle-emoticon-click"],props:{contentId:String,contentType:String},data:()=>({buttonsDisabled:!1}),computed:{emoticons:()=>Fs.getList(Gs)},mounted(){(0,ma.watch)([ga,fa],(()=>{this.buttonsDisabled=!1}))},methods:{handleEmoteClick(i){this.isLocked(i)||(this.buttonsDisabled=!0,this.$emit("handle-emoticon-click",{contentId:this.contentId,name:i}))},isDisabled(i){var s;return(null==(s=Fs.getByCode(`:${i}`))?void 0:s.isPremium)&&!Gs},isLocked(i){var s;const _=null==(s=window.context)?void 0:s.user;return!_||_.isGuest||!_.isActivated||_.isContentHidden||this.isDisabled(i)}}},Ks={name:"Reacted",directives:{Tooltip:Ur.Z},mixins:[Ws],data:()=>({hasUserReacted:!1,loading:!0,moreUsersCount:0,showMore:!1,spinner:ua.SPINNER,timer:null,users:[]}),computed:{moreButonText(){return this.showMore?this.$trans("less"):this.$trans("and %more% more",{"%more%":this.reactions.length-ua.REACTIONS_TO_SHOW})},moreCountText(){return this.$trans("and %moreCount% more",{"%moreCount%":this.moreUsersCount})},reactions(){var i,s,_,T;const S=this.contentType===ua.CONTENT_TYPE.SINGLE?null==(i=fa.value)?void 0:i.summary:null==(T=null==(_=null==(s=ga.value)?void 0:s.filter((i=>i.content===this.contentId)))?void 0:_[0])?void 0:T.summary;return null==S?void 0:S.filter((i=>0!==i.count&&![ua.DOWNVOTE,ua.UPVOTE].includes(i.reaction)))},reactionsToShow(){const i=this.reactions;return this.showMore?i:null==i?void 0:i.slice(0,ua.REACTIONS_TO_SHOW)},showMoreButton(){return this.reactions.length>ua.REACTIONS_TO_SHOW}},methods:{killTimer(){clearTimeout(this.timer),this.users=[],this.loading=!0},startTimer(i){this.timer=setTimeout((async()=>{var s;const{data:_}=await((i,s)=>pa().get(reactions_config_routes_reactedUsers(i,s),{_token:ua.TOKEN}))(this.contentId,i),T=null==(s=window.context.user)?void 0:s.username;this.hasUserReacted=Boolean(_.find((i=>i.userName===T))),this.moreUsersCount=Math.max(0,_.length-ua.MAX_USERS-(this.hasUserReacted?1:0)),this.users=_.slice(0,ua.MAX_USERS).filter((i=>i.userName!==T)),this.loading=!1,((i,s,_)=>{var T,S,C;const P=(null==(C=null==(S=null==(T=ga.value)?void 0:T.filter((s=>s.content===i)))?void 0:S[0])?void 0:C.summary).find((i=>i.reaction===s));P&&P.count!==_&&(P.count=_)})(this.contentId,i,_.length)}),500)},tooltip(i){return this.isDisabled(i)?this.$trans("Upgrade your account to unlock this reaction"):reactTooltipText(!0)},toggleMore(){this.showMore=!this.showMore}}},Ys=Ks,Xs={component:"reacted-component",count:"reacted-count",wrap:"reacted-wrap",reacted:"reacted-reacted",reaction:"reacted-reaction",locked:"reacted-locked",tooltip:"reacted-tooltip",emoticon:"reacted-emoticon",more:"reacted-more",user:"reacted-user","user-self":"reacted-user-self"};var Qs=(0,Rr.Z)(Ys,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return i.reactionsToShow&&i.reactionsToShow.length>0?_("div",{class:i.$style.component},[i._l(i.reactionsToShow,(function(s){var T;return _("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.tooltip(s.reaction),expression:"tooltip(reaction.reaction)"}],key:i.contentId+"-"+s.reaction,class:[i.$style.reaction,(T={},T[i.$style.locked]=i.isLocked(s.reaction),T)],attrs:{disabled:i.buttonsDisabled},on:{click:function(_){return i.handleEmoteClick(s.reaction)},mouseover:function(_){return i.startTimer(s.reaction)},mouseleave:i.killTimer}},[_("span",{staticClass:"emotes-emoticon-select",class:[i.$style.emoticon,"emotes-emoticon-select-"+s.reaction]}),i._v(" "),_("div",{class:i.$style.wrap},[_("span",{class:i.$style.count,domProps:{textContent:i._s(s.count)}}),i._v(" "),_("span",{class:i.$style.reacted,domProps:{textContent:i._s(s.me?"-":"+")}})]),i._v(" "),_("div",{class:i.$style.tooltip},[i.loading?_("img",{attrs:{height:"7",width:"25",alt:i.$trans("Loading"),src:i.spinner}}):[i._l(i.users,(function(s,T){return _("span",{key:T,class:i.$style.user,domProps:{innerHTML:i._s(s.userName)}})})),i._v(" "),i.hasUserReacted?_("span",{class:[i.$style.user,i.$style["user-self"]],domProps:{textContent:i._s(i.$trans("you"))}}):i._e(),i._v(" "),i.moreUsersCount?_("span",{class:i.$style.user,domProps:{textContent:i._s(i.moreCountText)}}):i._e()]],2)])})),i._v(" "),i.showMoreButton?_("button",{class:i.$style.more,domProps:{textContent:i._s(i.moreButonText)},on:{click:i.toggleMore}}):i._e()],2):i._e()}),[],!1,(function reacted_injectStyles(i){this.$style=Xs.locals||Xs}),null,null),Js=Qs.exports,eo=(0,ma.defineComponent)({name:"EmotesPopup",mixins:[Ws],emits:["toggle-emotes"],mounted(){this.$refs.popup.addEventListener("mouseleave",(()=>{this.$emit("toggle-emotes")}))},methods:{reacted(i){var s,_;const T=this.contentType===ua.CONTENT_TYPE.SINGLE?fa.value:null==(_=null==(s=ga.value)?void 0:s.filter((i=>i.content===this.contentId)))?void 0:_[0];return Boolean(null==T?void 0:T.summary.filter((s=>s.reaction===i&&s.me)).length)}}}),to=eo,no={emoticon:"emotes-emoticon","emoticon-select":"emotes-emoticon-select","emoticon-2x":"emotes-emoticon-2x","emoticon-happy":"emotes-emoticon-happy","emoticon-select-happy":"emotes-emoticon-select-happy","emoticon-2x-happy":"emotes-emoticon-2x-happy","emoticon-sad":"emotes-emoticon-sad","emoticon-select-sad":"emotes-emoticon-select-sad","emoticon-2x-sad":"emotes-emoticon-2x-sad","emoticon-angry":"emotes-emoticon-angry","emoticon-select-angry":"emotes-emoticon-select-angry","emoticon-2x-angry":"emotes-emoticon-2x-angry","emoticon-ohno":"emotes-emoticon-ohno","emoticon-select-ohno":"emotes-emoticon-select-ohno","emoticon-2x-ohno":"emotes-emoticon-2x-ohno","emoticon-worry":"emotes-emoticon-worry","emoticon-select-worry":"emotes-emoticon-select-worry","emoticon-2x-worry":"emotes-emoticon-2x-worry","emoticon-wink":"emotes-emoticon-wink","emoticon-select-wink":"emotes-emoticon-select-wink","emoticon-2x-wink":"emotes-emoticon-2x-wink","emoticon-tears":"emotes-emoticon-tears","emoticon-select-tears":"emotes-emoticon-select-tears","emoticon-2x-tears":"emotes-emoticon-2x-tears","emoticon-cry":"emotes-emoticon-cry","emoticon-select-cry":"emotes-emoticon-select-cry","emoticon-2x-cry":"emotes-emoticon-2x-cry","emoticon-delicious":"emotes-emoticon-delicious","emoticon-select-delicious":"emotes-emoticon-select-delicious","emoticon-2x-delicious":"emotes-emoticon-2x-delicious","emoticon-meh":"emotes-emoticon-meh","emoticon-select-meh":"emotes-emoticon-select-meh","emoticon-2x-meh":"emotes-emoticon-2x-meh","emoticon-grin":"emotes-emoticon-grin","emoticon-select-grin":"emotes-emoticon-select-grin","emoticon-2x-grin":"emotes-emoticon-2x-grin","emoticon-eek":"emotes-emoticon-eek","emoticon-select-eek":"emotes-emoticon-select-eek","emoticon-2x-eek":"emotes-emoticon-2x-eek","emoticon-grimace":"emotes-emoticon-grimace","emoticon-select-grimace":"emotes-emoticon-select-grimace","emoticon-2x-grimace":"emotes-emoticon-2x-grimace","emoticon-evil":"emotes-emoticon-evil","emoticon-select-evil":"emotes-emoticon-select-evil","emoticon-2x-evil":"emotes-emoticon-2x-evil","emoticon-nervous":"emotes-emoticon-nervous","emoticon-select-nervous":"emotes-emoticon-select-nervous","emoticon-2x-nervous":"emotes-emoticon-2x-nervous","emoticon-rage":"emotes-emoticon-rage","emoticon-select-rage":"emotes-emoticon-select-rage","emoticon-2x-rage":"emotes-emoticon-2x-rage","emoticon-blush":"emotes-emoticon-blush","emoticon-select-blush":"emotes-emoticon-select-blush","emoticon-2x-blush":"emotes-emoticon-2x-blush","emoticon-shock":"emotes-emoticon-shock","emoticon-select-shock":"emotes-emoticon-select-shock","emoticon-2x-shock":"emotes-emoticon-2x-shock","emoticon-dead":"emotes-emoticon-dead","emoticon-select-dead":"emotes-emoticon-select-dead","emoticon-2x-dead":"emotes-emoticon-2x-dead","emoticon-zzz":"emotes-emoticon-zzz","emoticon-select-zzz":"emotes-emoticon-select-zzz","emoticon-2x-zzz":"emotes-emoticon-2x-zzz","emoticon-tongue":"emotes-emoticon-tongue","emoticon-select-tongue":"emotes-emoticon-select-tongue","emoticon-2x-tongue":"emotes-emoticon-2x-tongue","emoticon-laugh":"emotes-emoticon-laugh","emoticon-select-laugh":"emotes-emoticon-select-laugh","emoticon-2x-laugh":"emotes-emoticon-2x-laugh","emoticon-river":"emotes-emoticon-river","emoticon-select-river":"emotes-emoticon-select-river","emoticon-2x-river":"emotes-emoticon-2x-river","emoticon-horror":"emotes-emoticon-horror","emoticon-select-horror":"emotes-emoticon-select-horror","emoticon-2x-horror":"emotes-emoticon-2x-horror","emoticon-peaceful":"emotes-emoticon-peaceful","emoticon-select-peaceful":"emotes-emoticon-select-peaceful","emoticon-2x-peaceful":"emotes-emoticon-2x-peaceful","emoticon-love":"emotes-emoticon-love","emoticon-select-love":"emotes-emoticon-select-love","emoticon-2x-love":"emotes-emoticon-2x-love","emoticon-smart":"emotes-emoticon-smart","emoticon-select-smart":"emotes-emoticon-select-smart","emoticon-2x-smart":"emotes-emoticon-2x-smart","emoticon-cool":"emotes-emoticon-cool","emoticon-select-cool":"emotes-emoticon-select-cool","emoticon-2x-cool":"emotes-emoticon-2x-cool","emoticon-mustache":"emotes-emoticon-mustache","emoticon-select-mustache":"emotes-emoticon-select-mustache","emoticon-2x-mustache":"emotes-emoticon-2x-mustache","emoticon-ghost":"emotes-emoticon-ghost","emoticon-select-ghost":"emotes-emoticon-select-ghost","emoticon-2x-ghost":"emotes-emoticon-2x-ghost","emoticon-scream":"emotes-emoticon-scream","emoticon-select-scream":"emotes-emoticon-select-scream","emoticon-2x-scream":"emotes-emoticon-2x-scream","emoticon-devil":"emotes-emoticon-devil","emoticon-select-devil":"emotes-emoticon-select-devil","emoticon-2x-devil":"emotes-emoticon-2x-devil","emoticon-sick":"emotes-emoticon-sick","emoticon-select-sick":"emotes-emoticon-select-sick","emoticon-2x-sick":"emotes-emoticon-2x-sick","emoticon-kiss":"emotes-emoticon-kiss","emoticon-select-kiss":"emotes-emoticon-select-kiss","emoticon-2x-kiss":"emotes-emoticon-2x-kiss","emoticon-thinker":"emotes-emoticon-thinker","emoticon-select-thinker":"emotes-emoticon-select-thinker","emoticon-2x-thinker":"emotes-emoticon-2x-thinker","emoticon-exploding_head":"emotes-emoticon-exploding_head","emoticon-select-exploding_head":"emotes-emoticon-select-exploding_head","emoticon-2x-exploding_head":"emotes-emoticon-2x-exploding_head","emoticon-star":"emotes-emoticon-star","emoticon-select-star":"emotes-emoticon-select-star","emoticon-2x-star":"emotes-emoticon-2x-star","emoticon-facepalm":"emotes-emoticon-facepalm","emoticon-select-facepalm":"emotes-emoticon-select-facepalm","emoticon-2x-facepalm":"emotes-emoticon-2x-facepalm","emoticon-clap":"emotes-emoticon-clap","emoticon-select-clap":"emotes-emoticon-select-clap","emoticon-2x-clap":"emotes-emoticon-2x-clap","emoticon-raised_hands":"emotes-emoticon-raised_hands","emoticon-select-raised_hands":"emotes-emoticon-select-raised_hands","emoticon-2x-raised_hands":"emotes-emoticon-2x-raised_hands","emoticon-tup":"emotes-emoticon-tup","emoticon-select-tup":"emotes-emoticon-select-tup","emoticon-2x-tup":"emotes-emoticon-2x-tup","emoticon-tdown":"emotes-emoticon-tdown","emoticon-select-tdown":"emotes-emoticon-select-tdown","emoticon-2x-tdown":"emotes-emoticon-2x-tdown","emoticon-fist":"emotes-emoticon-fist","emoticon-select-fist":"emotes-emoticon-select-fist","emoticon-2x-fist":"emotes-emoticon-2x-fist","emoticon-strong":"emotes-emoticon-strong","emoticon-select-strong":"emotes-emoticon-select-strong","emoticon-2x-strong":"emotes-emoticon-2x-strong","emoticon-wave":"emotes-emoticon-wave","emoticon-select-wave":"emotes-emoticon-select-wave","emoticon-2x-wave":"emotes-emoticon-2x-wave","emoticon-troll":"emotes-emoticon-troll","emoticon-select-troll":"emotes-emoticon-select-troll","emoticon-2x-troll":"emotes-emoticon-2x-troll","emoticon-rainbow":"emotes-emoticon-rainbow","emoticon-select-rainbow":"emotes-emoticon-select-rainbow","emoticon-2x-rainbow":"emotes-emoticon-2x-rainbow","emoticon-unicorn":"emotes-emoticon-unicorn","emoticon-select-unicorn":"emotes-emoticon-select-unicorn","emoticon-2x-unicorn":"emotes-emoticon-2x-unicorn","emoticon-coffee":"emotes-emoticon-coffee","emoticon-select-coffee":"emotes-emoticon-select-coffee","emoticon-2x-coffee":"emotes-emoticon-2x-coffee","emoticon-donut":"emotes-emoticon-donut","emoticon-select-donut":"emotes-emoticon-select-donut","emoticon-2x-donut":"emotes-emoticon-2x-donut","emoticon-earth":"emotes-emoticon-earth","emoticon-select-earth":"emotes-emoticon-select-earth","emoticon-2x-earth":"emotes-emoticon-2x-earth","emoticon-panda":"emotes-emoticon-panda","emoticon-select-panda":"emotes-emoticon-select-panda","emoticon-2x-panda":"emotes-emoticon-2x-panda","emoticon-skull":"emotes-emoticon-skull","emoticon-select-skull":"emotes-emoticon-select-skull","emoticon-2x-skull":"emotes-emoticon-2x-skull","emoticon-bitcoin":"emotes-emoticon-bitcoin","emoticon-select-bitcoin":"emotes-emoticon-select-bitcoin","emoticon-2x-bitcoin":"emotes-emoticon-2x-bitcoin","emoticon-donkey":"emotes-emoticon-donkey","emoticon-select-donkey":"emotes-emoticon-select-donkey","emoticon-2x-donkey":"emotes-emoticon-2x-donkey","emoticon-bomb":"emotes-emoticon-bomb","emoticon-select-bomb":"emotes-emoticon-select-bomb","emoticon-2x-bomb":"emotes-emoticon-2x-bomb","emoticon-fire":"emotes-emoticon-fire","emoticon-select-fire":"emotes-emoticon-select-fire","emoticon-2x-fire":"emotes-emoticon-2x-fire","emoticon-heart":"emotes-emoticon-heart","emoticon-select-heart":"emotes-emoticon-select-heart","emoticon-2x-heart":"emotes-emoticon-2x-heart","emoticon-flag_ukraine":"emotes-emoticon-flag_ukraine","emoticon-select-flag_ukraine":"emotes-emoticon-select-flag_ukraine","emoticon-2x-flag_ukraine":"emotes-emoticon-2x-flag_ukraine","emoticon-peace":"emotes-emoticon-peace","emoticon-select-peace":"emotes-emoticon-select-peace","emoticon-2x-peace":"emotes-emoticon-2x-peace","emoticon-play":"emotes-emoticon-play","emoticon-select-play":"emotes-emoticon-select-play","emoticon-2x-play":"emotes-emoticon-2x-play","emoticon-draw":"emotes-emoticon-draw","emoticon-select-draw":"emotes-emoticon-select-draw","emoticon-2x-draw":"emotes-emoticon-2x-draw","emoticon-resign":"emotes-emoticon-resign","emoticon-select-resign":"emotes-emoticon-select-resign","emoticon-2x-resign":"emotes-emoticon-2x-resign","emoticon-board":"emotes-emoticon-board","emoticon-select-board":"emotes-emoticon-select-board","emoticon-2x-board":"emotes-emoticon-2x-board","emoticon-wp":"emotes-emoticon-wp","emoticon-select-wp":"emotes-emoticon-select-wp","emoticon-2x-wp":"emotes-emoticon-2x-wp","emoticon-wn":"emotes-emoticon-wn","emoticon-select-wn":"emotes-emoticon-select-wn","emoticon-2x-wn":"emotes-emoticon-2x-wn","emoticon-wb":"emotes-emoticon-wb","emoticon-select-wb":"emotes-emoticon-select-wb","emoticon-2x-wb":"emotes-emoticon-2x-wb","emoticon-wr":"emotes-emoticon-wr","emoticon-select-wr":"emotes-emoticon-select-wr","emoticon-2x-wr":"emotes-emoticon-2x-wr","emoticon-wq":"emotes-emoticon-wq","emoticon-select-wq":"emotes-emoticon-select-wq","emoticon-2x-wq":"emotes-emoticon-2x-wq","emoticon-wk":"emotes-emoticon-wk","emoticon-select-wk":"emotes-emoticon-select-wk","emoticon-2x-wk":"emotes-emoticon-2x-wk","emoticon-medal":"emotes-emoticon-medal","emoticon-select-medal":"emotes-emoticon-select-medal","emoticon-2x-medal":"emotes-emoticon-2x-medal","emoticon-mate":"emotes-emoticon-mate","emoticon-select-mate":"emotes-emoticon-select-mate","emoticon-2x-mate":"emotes-emoticon-2x-mate","emoticon-cmate":"emotes-emoticon-cmate","emoticon-select-cmate":"emotes-emoticon-select-cmate","emoticon-2x-cmate":"emotes-emoticon-2x-cmate","emoticon-clock":"emotes-emoticon-clock","emoticon-select-clock":"emotes-emoticon-select-clock","emoticon-2x-clock":"emotes-emoticon-2x-clock","emoticon-bp":"emotes-emoticon-bp","emoticon-select-bp":"emotes-emoticon-select-bp","emoticon-2x-bp":"emotes-emoticon-2x-bp","emoticon-bn":"emotes-emoticon-bn","emoticon-select-bn":"emotes-emoticon-select-bn","emoticon-2x-bn":"emotes-emoticon-2x-bn","emoticon-bb":"emotes-emoticon-bb","emoticon-select-bb":"emotes-emoticon-select-bb","emoticon-2x-bb":"emotes-emoticon-2x-bb","emoticon-br":"emotes-emoticon-br","emoticon-select-br":"emotes-emoticon-select-br","emoticon-2x-br":"emotes-emoticon-2x-br","emoticon-bq":"emotes-emoticon-bq","emoticon-select-bq":"emotes-emoticon-select-bq","emoticon-2x-bq":"emotes-emoticon-2x-bq","emoticon-bk":"emotes-emoticon-bk","emoticon-select-bk":"emotes-emoticon-select-bk","emoticon-2x-bk":"emotes-emoticon-2x-bk","emoticon-bullet":"emotes-emoticon-bullet","emoticon-select-bullet":"emotes-emoticon-select-bullet","emoticon-2x-bullet":"emotes-emoticon-2x-bullet","emoticon-blitz":"emotes-emoticon-blitz","emoticon-select-blitz":"emotes-emoticon-select-blitz","emoticon-2x-blitz":"emotes-emoticon-2x-blitz","emoticon-live":"emotes-emoticon-live","emoticon-select-live":"emotes-emoticon-select-live","emoticon-2x-live":"emotes-emoticon-2x-live","emoticon-castle":"emotes-emoticon-castle","emoticon-select-castle":"emotes-emoticon-select-castle","emoticon-2x-castle":"emotes-emoticon-2x-castle","emoticon-skewer":"emotes-emoticon-skewer","emoticon-select-skewer":"emotes-emoticon-select-skewer","emoticon-2x-skewer":"emotes-emoticon-2x-skewer","emoticon-fork":"emotes-emoticon-fork","emoticon-select-fork":"emotes-emoticon-select-fork","emoticon-2x-fork":"emotes-emoticon-2x-fork","emoticon-pin":"emotes-emoticon-pin","emoticon-select-pin":"emotes-emoticon-select-pin","emoticon-2x-pin":"emotes-emoticon-2x-pin","emoticon-fish":"emotes-emoticon-fish","emoticon-select-fish":"emotes-emoticon-select-fish","emoticon-2x-fish":"emotes-emoticon-2x-fish","emoticon-trophy":"emotes-emoticon-trophy","emoticon-select-trophy":"emotes-emoticon-select-trophy","emoticon-2x-trophy":"emotes-emoticon-2x-trophy","emoticon-battle":"emotes-emoticon-battle","emoticon-select-battle":"emotes-emoticon-select-battle","emoticon-2x-battle":"emotes-emoticon-2x-battle","emoticon-puzzle_rush":"emotes-emoticon-puzzle_rush","emoticon-select-puzzle_rush":"emotes-emoticon-select-puzzle_rush","emoticon-2x-puzzle_rush":"emotes-emoticon-2x-puzzle_rush","emoticon-bughouse":"emotes-emoticon-bughouse","emoticon-select-bughouse":"emotes-emoticon-select-bughouse","emoticon-2x-bughouse":"emotes-emoticon-2x-bughouse","emoticon-daily":"emotes-emoticon-daily","emoticon-select-daily":"emotes-emoticon-select-daily","emoticon-2x-daily":"emotes-emoticon-2x-daily","emoticon-watch":"emotes-emoticon-watch","emoticon-select-watch":"emotes-emoticon-select-watch","emoticon-2x-watch":"emotes-emoticon-2x-watch","emoticon-four_player":"emotes-emoticon-four_player","emoticon-select-four_player":"emotes-emoticon-select-four_player","emoticon-2x-four_player":"emotes-emoticon-2x-four_player","emoticon-chesskid":"emotes-emoticon-chesskid","emoticon-select-chesskid":"emotes-emoticon-select-chesskid","emoticon-2x-chesskid":"emotes-emoticon-2x-chesskid","emoticon-friend":"emotes-emoticon-friend","emoticon-select-friend":"emotes-emoticon-select-friend","emoticon-2x-friend":"emotes-emoticon-2x-friend","emoticon-club":"emotes-emoticon-club","emoticon-select-club":"emotes-emoticon-select-club","emoticon-2x-club":"emotes-emoticon-2x-club","emoticon-leaderboard":"emotes-emoticon-leaderboard","emoticon-select-leaderboard":"emotes-emoticon-select-leaderboard","emoticon-2x-leaderboard":"emotes-emoticon-2x-leaderboard","emoticon-computer":"emotes-emoticon-computer","emoticon-select-computer":"emotes-emoticon-select-computer","emoticon-2x-computer":"emotes-emoticon-2x-computer","emoticon-settings":"emotes-emoticon-settings","emoticon-select-settings":"emotes-emoticon-select-settings","emoticon-2x-settings":"emotes-emoticon-2x-settings","emoticon-messages":"emotes-emoticon-messages","emoticon-select-messages":"emotes-emoticon-select-messages","emoticon-2x-messages":"emotes-emoticon-2x-messages","emoticon-arena_kings":"emotes-emoticon-arena_kings","emoticon-select-arena_kings":"emotes-emoticon-select-arena_kings","emoticon-2x-arena_kings":"emotes-emoticon-2x-arena_kings","emoticon-speed_chess_championship":"emotes-emoticon-speed_chess_championship","emoticon-select-speed_chess_championship":"emotes-emoticon-select-speed_chess_championship","emoticon-2x-speed_chess_championship":"emotes-emoticon-2x-speed_chess_championship","emoticon-titled_tuesday":"emotes-emoticon-titled_tuesday","emoticon-select-titled_tuesday":"emotes-emoticon-select-titled_tuesday","emoticon-2x-titled_tuesday":"emotes-emoticon-2x-titled_tuesday","emoticon-diamond":"emotes-emoticon-diamond","emoticon-select-diamond":"emotes-emoticon-select-diamond","emoticon-2x-diamond":"emotes-emoticon-2x-diamond","emoticon-platinum":"emotes-emoticon-platinum","emoticon-select-platinum":"emotes-emoticon-select-platinum","emoticon-2x-platinum":"emotes-emoticon-2x-platinum","emoticon-gold":"emotes-emoticon-gold","emoticon-select-gold":"emotes-emoticon-select-gold","emoticon-2x-gold":"emotes-emoticon-2x-gold","emoticon-tilt":"emotes-emoticon-tilt","emoticon-select-tilt":"emotes-emoticon-select-tilt","emoticon-2x-tilt":"emotes-emoticon-2x-tilt","emoticon-king_of_the_hill":"emotes-emoticon-king_of_the_hill","emoticon-select-king_of_the_hill":"emotes-emoticon-select-king_of_the_hill","emoticon-2x-king_of_the_hill":"emotes-emoticon-2x-king_of_the_hill","emoticon-3_check":"emotes-emoticon-3_check","emoticon-select-3_check":"emotes-emoticon-select-3_check","emoticon-2x-3_check":"emotes-emoticon-2x-3_check","emoticon-crazyhouse":"emotes-emoticon-crazyhouse","emoticon-select-crazyhouse":"emotes-emoticon-select-crazyhouse","emoticon-2x-crazyhouse":"emotes-emoticon-2x-crazyhouse","emoticon-chess_960":"emotes-emoticon-chess_960","emoticon-select-chess_960":"emotes-emoticon-select-chess_960","emoticon-2x-chess_960":"emotes-emoticon-2x-chess_960","emoticon-brilliant":"emotes-emoticon-brilliant","emoticon-select-brilliant":"emotes-emoticon-select-brilliant","emoticon-2x-brilliant":"emotes-emoticon-2x-brilliant","emoticon-blunder":"emotes-emoticon-blunder","emoticon-select-blunder":"emotes-emoticon-select-blunder","emoticon-2x-blunder":"emotes-emoticon-2x-blunder","emoticon-1_0":"emotes-emoticon-1_0","emoticon-select-1_0":"emotes-emoticon-select-1_0","emoticon-2x-1_0":"emotes-emoticon-2x-1_0","emoticon-0_1":"emotes-emoticon-0_1","emoticon-select-0_1":"emotes-emoticon-select-0_1","emoticon-2x-0_1":"emotes-emoticon-2x-0_1","emoticon-1_2":"emotes-emoticon-1_2","emoticon-select-1_2":"emotes-emoticon-select-1_2","emoticon-2x-1_2":"emotes-emoticon-2x-1_2","emoticon-hype":"emotes-emoticon-hype","emoticon-select-hype":"emotes-emoticon-select-hype","emoticon-2x-hype":"emotes-emoticon-2x-hype","emoticon-good_game":"emotes-emoticon-good_game","emoticon-select-good_game":"emotes-emoticon-select-good_game","emoticon-2x-good_game":"emotes-emoticon-2x-good_game","emoticon-stockfish":"emotes-emoticon-stockfish","emoticon-select-stockfish":"emotes-emoticon-select-stockfish","emoticon-2x-stockfish":"emotes-emoticon-2x-stockfish","emoticon-lc0":"emotes-emoticon-lc0","emoticon-select-lc0":"emotes-emoticon-select-lc0","emoticon-2x-lc0":"emotes-emoticon-2x-lc0","emoticon-komodo":"emotes-emoticon-komodo","emoticon-select-komodo":"emotes-emoticon-select-komodo","emoticon-2x-komodo":"emotes-emoticon-2x-komodo","emoticon-timeout":"emotes-emoticon-timeout","emoticon-select-timeout":"emotes-emoticon-select-timeout","emoticon-2x-timeout":"emotes-emoticon-2x-timeout","emoticon-birthday_cake":"emotes-emoticon-birthday_cake","emoticon-select-birthday_cake":"emotes-emoticon-select-birthday_cake","emoticon-2x-birthday_cake":"emotes-emoticon-2x-birthday_cake","emoticon-party_hat":"emotes-emoticon-party_hat","emoticon-select-party_hat":"emotes-emoticon-select-party_hat","emoticon-2x-party_hat":"emotes-emoticon-2x-party_hat","emoticon-cheers":"emotes-emoticon-cheers","emoticon-select-cheers":"emotes-emoticon-select-cheers","emoticon-2x-cheers":"emotes-emoticon-2x-cheers","emoticon-heart_bear":"emotes-emoticon-heart_bear","emoticon-select-heart_bear":"emotes-emoticon-select-heart_bear","emoticon-2x-heart_bear":"emotes-emoticon-2x-heart_bear","emoticon-heart_gift":"emotes-emoticon-heart_gift","emoticon-select-heart_gift":"emotes-emoticon-select-heart_gift","emoticon-2x-heart_gift":"emotes-emoticon-2x-heart_gift","emoticon-heart_letter":"emotes-emoticon-heart_letter","emoticon-select-heart_letter":"emotes-emoticon-select-heart_letter","emoticon-2x-heart_letter":"emotes-emoticon-2x-heart_letter","emoticon-clover":"emotes-emoticon-clover","emoticon-select-clover":"emotes-emoticon-select-clover","emoticon-2x-clover":"emotes-emoticon-2x-clover","emoticon-coins_bag":"emotes-emoticon-coins_bag","emoticon-select-coins_bag":"emotes-emoticon-select-coins_bag","emoticon-2x-coins_bag":"emotes-emoticon-2x-coins_bag","emoticon-palm_tree":"emotes-emoticon-palm_tree","emoticon-select-palm_tree":"emotes-emoticon-select-palm_tree","emoticon-2x-palm_tree":"emotes-emoticon-2x-palm_tree","emoticon-fireworks":"emotes-emoticon-fireworks","emoticon-select-fireworks":"emotes-emoticon-select-fireworks","emoticon-2x-fireworks":"emotes-emoticon-2x-fireworks","emoticon-halloween_ghost":"emotes-emoticon-halloween_ghost","emoticon-select-halloween_ghost":"emotes-emoticon-select-halloween_ghost","emoticon-2x-halloween_ghost":"emotes-emoticon-2x-halloween_ghost","emoticon-halloween":"emotes-emoticon-halloween","emoticon-select-halloween":"emotes-emoticon-select-halloween","emoticon-2x-halloween":"emotes-emoticon-2x-halloween","emoticon-rip":"emotes-emoticon-rip","emoticon-select-rip":"emotes-emoticon-select-rip","emoticon-2x-rip":"emotes-emoticon-2x-rip","emoticon-maple_leaf":"emotes-emoticon-maple_leaf","emoticon-select-maple_leaf":"emotes-emoticon-select-maple_leaf","emoticon-2x-maple_leaf":"emotes-emoticon-2x-maple_leaf","emoticon-turkey":"emotes-emoticon-turkey","emoticon-select-turkey":"emotes-emoticon-select-turkey","emoticon-2x-turkey":"emotes-emoticon-2x-turkey","emoticon-present":"emotes-emoticon-present","emoticon-select-present":"emotes-emoticon-select-present","emoticon-2x-present":"emotes-emoticon-2x-present","emoticon-hanukkah":"emotes-emoticon-hanukkah","emoticon-select-hanukkah":"emotes-emoticon-select-hanukkah","emoticon-2x-hanukkah":"emotes-emoticon-2x-hanukkah","emoticon-christmas_tree":"emotes-emoticon-christmas_tree","emoticon-select-christmas_tree":"emotes-emoticon-select-christmas_tree","emoticon-2x-christmas_tree":"emotes-emoticon-2x-christmas_tree","emoticon-santa":"emotes-emoticon-santa","emoticon-select-santa":"emotes-emoticon-select-santa","emoticon-2x-santa":"emotes-emoticon-2x-santa","emoticon-christmas_wrench":"emotes-emoticon-christmas_wrench","emoticon-select-christmas_wrench":"emotes-emoticon-select-christmas_wrench","emoticon-2x-christmas_wrench":"emotes-emoticon-2x-christmas_wrench","emoticon-danny_rensch":"emotes-emoticon-danny_rensch","emoticon-select-danny_rensch":"emotes-emoticon-select-danny_rensch","emoticon-2x-danny_rensch":"emotes-emoticon-2x-danny_rensch","emoticon-danny_rensch_surprised":"emotes-emoticon-danny_rensch_surprised","emoticon-select-danny_rensch_surprised":"emotes-emoticon-select-danny_rensch_surprised","emoticon-2x-danny_rensch_surprised":"emotes-emoticon-2x-danny_rensch_surprised","emoticon-robert_hess":"emotes-emoticon-robert_hess","emoticon-select-robert_hess":"emotes-emoticon-select-robert_hess","emoticon-2x-robert_hess":"emotes-emoticon-2x-robert_hess","emoticon-hikaru_nakamura":"emotes-emoticon-hikaru_nakamura","emoticon-select-hikaru_nakamura":"emotes-emoticon-select-hikaru_nakamura","emoticon-2x-hikaru_nakamura":"emotes-emoticon-2x-hikaru_nakamura","emoticon-anand":"emotes-emoticon-anand","emoticon-select-anand":"emotes-emoticon-select-anand","emoticon-2x-anand":"emotes-emoticon-2x-anand","emoticon-naroditsky":"emotes-emoticon-naroditsky","emoticon-select-naroditsky":"emotes-emoticon-select-naroditsky","emoticon-2x-naroditsky":"emotes-emoticon-2x-naroditsky","emoticon-maurice_ashley":"emotes-emoticon-maurice_ashley","emoticon-select-maurice_ashley":"emotes-emoticon-select-maurice_ashley","emoticon-2x-maurice_ashley":"emotes-emoticon-2x-maurice_ashley","emoticon-anna_rudolf":"emotes-emoticon-anna_rudolf","emoticon-select-anna_rudolf":"emotes-emoticon-select-anna_rudolf","emoticon-2x-anna_rudolf":"emotes-emoticon-2x-anna_rudolf","emoticon-alexandra_botez":"emotes-emoticon-alexandra_botez","emoticon-select-alexandra_botez":"emotes-emoticon-select-alexandra_botez","emoticon-2x-alexandra_botez":"emotes-emoticon-2x-alexandra_botez","emoticon-andrea_botez":"emotes-emoticon-andrea_botez","emoticon-select-andrea_botez":"emotes-emoticon-select-andrea_botez","emoticon-2x-andrea_botez":"emotes-emoticon-2x-andrea_botez","emoticon-levy_rozman":"emotes-emoticon-levy_rozman","emoticon-select-levy_rozman":"emotes-emoticon-select-levy_rozman","emoticon-2x-levy_rozman":"emotes-emoticon-2x-levy_rozman","emoticon-eric_hansen":"emotes-emoticon-eric_hansen","emoticon-select-eric_hansen":"emotes-emoticon-select-eric_hansen","emoticon-2x-eric_hansen":"emotes-emoticon-2x-eric_hansen","emoticon-aman_hambleton":"emotes-emoticon-aman_hambleton","emoticon-select-aman_hambleton":"emotes-emoticon-select-aman_hambleton","emoticon-2x-aman_hambleton":"emotes-emoticon-2x-aman_hambleton","emoticon-mike_klein":"emotes-emoticon-mike_klein","emoticon-select-mike_klein":"emotes-emoticon-select-mike_klein","emoticon-2x-mike_klein":"emotes-emoticon-2x-mike_klein","emoticon-kosteniuk":"emotes-emoticon-kosteniuk","emoticon-select-kosteniuk":"emotes-emoticon-select-kosteniuk","emoticon-2x-kosteniuk":"emotes-emoticon-2x-kosteniuk","emoticon-samay_raina":"emotes-emoticon-samay_raina","emoticon-select-samay_raina":"emotes-emoticon-select-samay_raina","emoticon-2x-samay_raina":"emotes-emoticon-2x-samay_raina","emoticon-kevin_bordi":"emotes-emoticon-kevin_bordi","emoticon-select-kevin_bordi":"emotes-emoticon-select-kevin_bordi","emoticon-2x-kevin_bordi":"emotes-emoticon-2x-kevin_bordi","emoticon-krikor":"emotes-emoticon-krikor","emoticon-select-krikor":"emotes-emoticon-select-krikor","emoticon-2x-krikor":"emotes-emoticon-2x-krikor","emoticon-pcl":"emotes-emoticon-pcl","emoticon-select-pcl":"emotes-emoticon-select-pcl","emoticon-2x-pcl":"emotes-emoticon-2x-pcl","emoticon-argentina_krakens":"emotes-emoticon-argentina_krakens","emoticon-select-argentina_krakens":"emotes-emoticon-select-argentina_krakens","emoticon-2x-argentina_krakens":"emotes-emoticon-2x-argentina_krakens","emoticon-brazil_capybaras":"emotes-emoticon-brazil_capybaras","emoticon-select-brazil_capybaras":"emotes-emoticon-select-brazil_capybaras","emoticon-2x-brazil_capybaras":"emotes-emoticon-2x-brazil_capybaras","emoticon-california_unicorns":"emotes-emoticon-california_unicorns","emoticon-select-california_unicorns":"emotes-emoticon-select-california_unicorns","emoticon-2x-california_unicorns":"emotes-emoticon-2x-california_unicorns","emoticon-canada_chessbrahs":"emotes-emoticon-canada_chessbrahs","emoticon-select-canada_chessbrahs":"emotes-emoticon-select-canada_chessbrahs","emoticon-2x-canada_chessbrahs":"emotes-emoticon-2x-canada_chessbrahs","emoticon-chicago_wind":"emotes-emoticon-chicago_wind","emoticon-select-chicago_wind":"emotes-emoticon-select-chicago_wind","emoticon-2x-chicago_wind":"emotes-emoticon-2x-chicago_wind","emoticon-china_pandas":"emotes-emoticon-china_pandas","emoticon-select-china_pandas":"emotes-emoticon-select-china_pandas","emoticon-2x-china_pandas":"emotes-emoticon-2x-china_pandas","emoticon-croatia_bulldogs":"emotes-emoticon-croatia_bulldogs","emoticon-select-croatia_bulldogs":"emotes-emoticon-select-croatia_bulldogs","emoticon-2x-croatia_bulldogs":"emotes-emoticon-2x-croatia_bulldogs","emoticon-france_roosters":"emotes-emoticon-france_roosters","emoticon-select-france_roosters":"emotes-emoticon-select-france_roosters","emoticon-2x-france_roosters":"emotes-emoticon-2x-france_roosters","emoticon-germany_bears":"emotes-emoticon-germany_bears","emoticon-select-germany_bears":"emotes-emoticon-select-germany_bears","emoticon-2x-germany_bears":"emotes-emoticon-2x-germany_bears","emoticon-hungary_hunters":"emotes-emoticon-hungary_hunters","emoticon-select-hungary_hunters":"emotes-emoticon-select-hungary_hunters","emoticon-2x-hungary_hunters":"emotes-emoticon-2x-hungary_hunters","emoticon-india_yogis":"emotes-emoticon-india_yogis","emoticon-select-india_yogis":"emotes-emoticon-select-india_yogis","emoticon-2x-india_yogis":"emotes-emoticon-2x-india_yogis","emoticon-israel_counsellors":"emotes-emoticon-israel_counsellors","emoticon-select-israel_counsellors":"emotes-emoticon-select-israel_counsellors","emoticon-2x-israel_counsellors":"emotes-emoticon-2x-israel_counsellors","emoticon-italy_gladiators":"emotes-emoticon-italy_gladiators","emoticon-select-italy_gladiators":"emotes-emoticon-select-italy_gladiators","emoticon-2x-italy_gladiators":"emotes-emoticon-2x-italy_gladiators","emoticon-netherlands_mosquitoes":"emotes-emoticon-netherlands_mosquitoes","emoticon-select-netherlands_mosquitoes":"emotes-emoticon-select-netherlands_mosquitoes","emoticon-2x-netherlands_mosquitoes":"emotes-emoticon-2x-netherlands_mosquitoes","emoticon-new_york_marshalls":"emotes-emoticon-new_york_marshalls","emoticon-select-new_york_marshalls":"emotes-emoticon-select-new_york_marshalls","emoticon-2x-new_york_marshalls":"emotes-emoticon-2x-new_york_marshalls","emoticon-norway_gnomes":"emotes-emoticon-norway_gnomes","emoticon-select-norway_gnomes":"emotes-emoticon-select-norway_gnomes","emoticon-2x-norway_gnomes":"emotes-emoticon-2x-norway_gnomes","emoticon-poland_hussars":"emotes-emoticon-poland_hussars","emoticon-select-poland_hussars":"emotes-emoticon-select-poland_hussars","emoticon-2x-poland_hussars":"emotes-emoticon-2x-poland_hussars","emoticon-russia_wizards":"emotes-emoticon-russia_wizards","emoticon-select-russia_wizards":"emotes-emoticon-select-russia_wizards","emoticon-2x-russia_wizards":"emotes-emoticon-2x-russia_wizards","emoticon-saint_louis_arch_bishops":"emotes-emoticon-saint_louis_arch_bishops","emoticon-select-saint_louis_arch_bishops":"emotes-emoticon-select-saint_louis_arch_bishops","emoticon-2x-saint_louis_arch_bishops":"emotes-emoticon-2x-saint_louis_arch_bishops","emoticon-spain_raptors":"emotes-emoticon-spain_raptors","emoticon-select-spain_raptors":"emotes-emoticon-select-spain_raptors","emoticon-2x-spain_raptors":"emotes-emoticon-2x-spain_raptors","emoticon-sweden_wasabis":"emotes-emoticon-sweden_wasabis","emoticon-select-sweden_wasabis":"emotes-emoticon-select-sweden_wasabis","emoticon-2x-sweden_wasabis":"emotes-emoticon-2x-sweden_wasabis","emoticon-turkey_knights":"emotes-emoticon-turkey_knights","emoticon-select-turkey_knights":"emotes-emoticon-select-turkey_knights","emoticon-2x-turkey_knights":"emotes-emoticon-2x-turkey_knights","emoticon-uk_lions":"emotes-emoticon-uk_lions","emoticon-select-uk_lions":"emotes-emoticon-select-uk_lions","emoticon-2x-uk_lions":"emotes-emoticon-2x-uk_lions",component:"emotes-component",body:"emotes-body",categoryTitle:"emotes-categoryTitle",categoryIcons:"emotes-categoryIcons",disabledIcons:"emotes-disabledIcons",disabledOverlay:"emotes-disabledOverlay",lock:"emotes-lock",reacted:"emotes-reacted",button:"emotes-button"};var ro=(0,Rr.Z)(to,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{ref:"popup",class:i.$style.body,on:{click:function(i){i.stopPropagation()}}},i._l(i.emoticons,(function(s){return _("div",{key:s.name},[s.name?_("div",{class:i.$style.categoryTitle,domProps:{textContent:i._s(s.name)}}):i._e(),i._v(" "),_("div",{class:i.$style.categoryIcons},[i._l(s.enabledIcons,(function(s){var T;return _("button",{key:s.code,class:[i.$style.button,i.$style["emoticon-select"],i.$style["emoticon-select-"+s.name],(T={},T[i.$style.reacted]=i.reacted(s.name),T)],attrs:{disabled:i.buttonsDisabled,title:s.code,type:"button"},on:{click:function(_){return i.handleEmoteClick(s.name)}}})})),i._v(" "),s.disabledIcons.length>0?_("div",{class:i.$style.disabledIcons},[i._l(s.disabledIcons,(function(s){return _("span",{key:s.code,class:[i.$style["emoticon-select"],i.$style["emoticon-select-"+s.name]]})})),i._v(" "),_("div",{class:i.$style.disabledOverlay,attrs:{title:i.$trans("Upgrade to get all emojis!")}},[_("span",{class:i.$style.lock},[_("span",{staticClass:"icon-font-chess lock"})])])],2):i._e()],2)])})),0)}),[],!1,(function emotes_injectStyles(i){this.$style=no.locals||no}),null,null),io={data:()=>({user:window.context.user}),computed:{isLocked(){return!this.user||this.user.isContentHidden||this.user.isGuest||!this.user.isActivated||this.usersPost}}},ao={name:"ReactionsPopup",components:{Emotes:ro.exports},directives:{tooltip:Ur.Z},mixins:[io],props:{contentId:String,contentType:String,showEmotes:Boolean},emits:["toggle-emotes","handle-emoticon-click"],computed:{tooltip:()=>reactTooltipText()},methods:{toggleEmotes(){this.isLocked||this.$emit("toggle-emotes")}}},so={component:"reactions-popup-component",button:"reactions-popup-button",icon:"reactions-popup-icon",locked:"reactions-popup-locked"};var oo=(0,Rr.Z)(ao,(function(){var i,s=this,_=s.$createElement,T=s._self._c||_;return T("div",{class:s.$style.component},[T("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:s.tooltip,expression:"tooltip"}],class:[s.$style.button,(i={},i[s.$style.locked]=s.isLocked,i)],on:{click:s.toggleEmotes}},[T("span",{ref:"icon",staticClass:"icon-font-chess smileyadd",class:s.$style.icon})]),s._v(" "),s.showEmotes?T("emotes",{attrs:{"content-id":s.contentId,"content-type":s.contentType},on:{"handle-emoticon-click":function(i){return s.$emit("handle-emoticon-click",i)},"toggle-emotes":s.toggleEmotes}}):s._e()],1)}),[],!1,(function reactions_popup_injectStyles(i){this.$style=so.locals||so}),null,null),lo=oo.exports;async function postReaction({contentId:i,contentType:s,name:_,prevVote:T,report:S}){if(await toggleReaction(i,_,ua.ACTIONS.POST),!S)if(s===ua.CONTENT_TYPE.SINGLE){const s=copySingleContent(fa.value),T=isInSingle(s,i,_),S=addReaction(s,_,T);fa.value=S}else{const s=copyMultipleContent(ga.value),S=s.map((S=>{if(S.content===i){const C=isInMultiple(s,i,_,ua.ACTIONS.POST);if(T&&T!==_){const i=deleteReaction(S,T);return addReaction(i,_,C)}return addReaction(S,_,C)}return S}));ga.value=S}}var co={props:{contentId:String,contentType:String},methods:{handleEmoticonClick({contentId:i,name:s,prevVote:_}){(this.contentType===ua.CONTENT_TYPE.SINGLE?!isInSingle(fa.value,i,s):!isInMultiple(ga.value,i,s))?(this.showEmotes=!1,postReaction({contentId:i,contentType:this.contentType,name:s,prevVote:_})):async function removeReaction({contentId:i,contentType:s,name:_,prevVote:T}){if(await toggleReaction(i,_,ua.ACTIONS.REMOVE),s===ua.CONTENT_TYPE.SINGLE){const i=copySingleContent(fa.value),s=deleteReaction(i,_);fa.value=s}else{const s=copyMultipleContent(ga.value).map((s=>{if(s.content===i){if(T&&T!==_){const i=addReaction(s,T,!0);return deleteReaction(i,_)}return deleteReaction(s,_)}return s}));ga.value=s}}({contentId:i,contentType:this.contentType,name:s,prevVote:_})}}},uo={name:"Reactions",components:{Reacted:Js,ReactionsPopup:lo},mixins:[co],props:{isTrigger:Boolean},data:()=>({showEmotes:!1}),methods:{handleToggleEmotes(){this.showEmotes=!this.showEmotes}}},ho=(0,Rr.Z)(uo,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return i.isTrigger?_("reactions-popup",{attrs:{"content-id":i.contentId,"content-type":i.contentType,"show-emotes":i.showEmotes},on:{"handle-emoticon-click":i.handleEmoticonClick,"toggle-emotes":i.handleToggleEmotes}}):_("reacted",{attrs:{"content-id":i.contentId,"content-type":i.contentType},on:{"handle-emoticon-click":i.handleEmoticonClick}})}),[],!1,null,null,null),po={components:{Reactions:ho.exports},props:{reactionId:{type:String},showReactions:{type:Boolean,default:!1}},data:()=>({reactionType:ua.CONTENT_TYPE.MULTIPLE})},mo=(0,ma.defineComponent)({name:"ReportModal",components:{Modal:Tr.Modal,OutsideClose:Tr.OutsideClose,V5Button:Tr.V5Button},props:{isClubsPage:Boolean},emits:["hide","submit"],setup(i,{emit:s}){const _=(0,ma.ref)(null);return{hide:function hide(){s("hide")},isDisabled:(0,ma.computed)((()=>!_.value)),option:_,reportReasons:ha,submit:function submit(){s("submit",_.value)}}},mounted(){this.$refs.modal.show()}}),fo={title:"report-modal-title",radio:"report-modal-radio",label:"report-modal-label",wrapper:"report-modal-wrapper",button:"report-modal-button"};var vo=(0,Rr.Z)(mo,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("Modal",{ref:"modal",attrs:{corners:"rounded-lg","modal-width":"xs"},on:{"modal-did-hide":i.hide},scopedSlots:i._u([{key:"content",fn:function(){return[_("h3",{class:i.$style.title,domProps:{textContent:i._s(i.$trans("Report comment"))}}),i._v(" "),i._l(i.reportReasons,(function(s,T){return _("div",{key:T,class:i.$style.radio},[_("input",{directives:[{name:"model",rawName:"v-model",value:i.option,expression:"option"}],attrs:{id:s.name,name:"reportReason",type:"radio"},domProps:{value:i.isClubsPage?s.name:s.value,checked:i._q(i.option,i.isClubsPage?s.name:s.value)},on:{change:function(_){i.option=i.isClubsPage?s.name:s.value}}}),i._v(" "),_("label",{class:i.$style.label,attrs:{for:s.name},domProps:{textContent:i._s(s.title)}})])})),i._v(" "),_("div",{class:i.$style.wrapper},[_("v5-button",{class:i.$style.button,attrs:{size:"small",theme:"basic-light"},domProps:{textContent:i._s(i.$trans("Cancel"))},on:{click:i.hide}}),i._v(" "),_("v5-button",{class:i.$style.button,attrs:{size:"small",theme:"primary",disabled:i.isDisabled},domProps:{textContent:i._s(i.$trans("Report"))},on:{click:i.submit}})],1)]},proxy:!0}])},[_("outside-close",{on:{click:i.hide}})],1)}),[],!1,(function report_modal_injectStyles(i){this.$style=fo.locals||fo}),null,null),bo=vo.exports,yo=(0,ma.defineComponent)({name:"ReportContainer",directives:{Tooltip:Ur.Z},components:{ReportModal:bo},props:{isClubsPage:Boolean,isOwnContent:Boolean,modalVisible:Boolean},emits:["hide","show","submit"],setup:(i,{emit:s})=>({onSubmit:function onSubmit(i){s("submit",i)},tooltip:i.isOwnContent?j.$H.trans("You can not report your own comment"):j.$H.trans("Report")})}),_o={button:"report-container-button",icon:"report-container-icon"};var wo=(0,Rr.Z)(yo,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",[i.modalVisible?_("report-modal",{attrs:{"is-clubs-page":i.isClubsPage},on:{hide:function(s){return i.$emit("hide")},submit:i.onSubmit}}):i._e(),i._v(" "),_("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.tooltip,expression:"tooltip"}],class:[i.$style.button,"show-on-hover"],on:{click:function(s){return i.$emit("show")}}},[_("span",{staticClass:"icon-font-chess circle-danger comment-post-actions-icon",class:i.$style.icon})])],1)}),[],!1,(function report_container_injectStyles(i){this.$style=_o.locals||_o}),null,null),ko=wo.exports,To=(0,ma.defineComponent)({name:"Report",components:{ReportContainer:ko},props:{contentId:String,isClubsPage:{type:Boolean,default:!1},isOwnContent:{type:Boolean,default:!1}},setup(i){const s=(0,ma.ref)(!1);function onHide(){s.value=!1}return{modalVisible:s,onHide:onHide,onShow:function onShow(){i.isOwnContent||(s.value=!0)},onSubmit:function onSubmit(s){var _,T;i.isClubsPage?postReaction({contentId:i.contentId,contentType:ua.CONTENT_TYPE.MULTIPLE,name:s,report:!0}):(_=this.contentId,T=s,ca.Z.post(reactions_config_routes_reportContent(_),{reason_id:T})),onHide()}}}}),So=(0,Rr.Z)(To,(function(){var i=this,s=i.$createElement;return(i._self._c||s)("report-container",{attrs:{"is-clubs-page":i.isClubsPage,"is-own-content":i.isOwnContent,"modal-visible":i.modalVisible},on:{hide:i.onHide,show:i.onShow,submit:i.onSubmit}})}),[],!1,null,null,null).exports,Co={name:"VoteContainer",directives:{tooltip:Ur.Z},mixins:[io],props:{contentId:String,count:Number,disabled:Boolean,downvoted:Boolean,upvoted:Boolean,usersPost:Boolean},emits:["click","set-visibility"],data:()=>({constants:ua}),watch:{count(){this.$emit("set-visibility")}},methods:{tooltip(i){return(({name:i,usersPost:s,disabled:_,contentId:T})=>{if(!Zs)return ht.Z.trans("Please log in to vote");if(Zs.isGuest)return ht.Z.trans("Please register to vote");if(!Zs.isActivated)return ht.Z.trans("Please activate your account to vote");if(Zs.isContentHidden)return ht.Z.trans("Your account is muted");if(s)return ht.Z.trans("You can not vote for your own post");if(_)return ht.Z.trans("Will be available in a few seconds");const S=multipleContentVotes(T);return i===ua.UPVOTE?ht.Z.trans("%votes% Upvoted",{"%votes%":S.upvotes}):ht.Z.trans("%votes% Downvoted",{"%votes%":S.downvotes})})({name:i,usersPost:this.usersPost,disabled:this.disabled,contentId:this.contentId})}}},xo={component:"vote-container-component",button:"vote-container-button",icon:"vote-container-icon",locked:"vote-container-locked",count:"vote-container-count",voted:"vote-container-voted"};var Eo=(0,Rr.Z)(Co,(function(){var i,s,_,T,S=this,C=S.$createElement,P=S._self._c||C;return P("div",{class:S.$style.component},[P("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:S.tooltip(S.constants.UPVOTE),expression:"tooltip(constants.UPVOTE)"}],class:[S.$style.button,(i={},i[S.$style.voted]=S.upvoted,i),(s={},s[S.$style.locked]=S.isLocked||S.disabled,s)],on:{click:function(i){return S.$emit("click",S.constants.UPVOTE)}}},[P("span",{class:["icon-font-chess arrow-up",S.$style.icon]})]),S._v(" "),P("span",{class:S.$style.count,domProps:{textContent:S._s(S.count)}}),S._v(" "),P("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:S.tooltip(S.constants.DOWNVOTE),expression:"tooltip(constants.DOWNVOTE)"}],class:[S.$style.button,(_={},_[S.$style.voted]=S.downvoted,_),(T={},T[S.$style.locked]=S.isLocked||S.disabled,T)],on:{click:function(i){return S.$emit("click",S.constants.DOWNVOTE)}}},[P("span",{class:["icon-font-chess arrow-down",S.$style.icon]})])])}),[],!1,(function vote_container_injectStyles(i){this.$style=xo.locals||xo}),null,null),Po={name:"Vote",components:{VoteContainer:Eo.exports},mixins:[co,io],props:{alwaysVisible:Boolean,isApproved:Boolean,messageHidden:{type:String},usersPost:{type:Boolean,default:!1}},data:()=>({countSet:!1,disabled:!1}),computed:{count(){return this.contentType===ua.CONTENT_TYPE.SINGLE?entityCount(fa.value):multipleContentCount(this.contentId)},downvoted(){return this.voted(ua.DOWNVOTE)},upvoted(){return this.voted(ua.UPVOTE)}},methods:{handleClick(i){let s=i===ua.UPVOTE?ua.DOWNVOTE:ua.UPVOTE;this.upvoted&&i===ua.UPVOTE&&(s=ua.UPVOTE),this.downvoted&&i===ua.DOWNVOTE&&(s=ua.DOWNVOTE),this.isLocked||this.usersPost||this.disabled||(this.handleEmoticonClick({contentId:this.contentId,name:i,prevVote:s}),this.disabled=!0,setTimeout((()=>{this.disabled=!1}),5e3))},setVisibility(){if(!this.isApproved&&this.messageHidden){const i=this.$el.closest(`.${da.VOTE_PARENT}`);null==i||i.classList.toggle(this.$style["semi-transparent"],this.count<-10&&this.count>-30),i&&this.count<=-30&&!this.alwaysVisible&&(i.innerHTML=`<div class="vote-hidden">${this.messageHidden}</div>`)}},voted(i){return this.contentType===ua.CONTENT_TYPE.SINGLE?isInSingle(fa.value,this.contentId,i):isInMultiple(ga.value,this.contentId,i)}}},Ao={"semi-transparent":"vote-semi-transparent",hidden:"vote-hidden"};var Oo={name:"CommentPostActions",components:{CommentPostDelete:Ds,Report:So,Vote:(0,Rr.Z)(Po,(function(){var i=this,s=i.$createElement;return(i._self._c||s)("vote-container",{attrs:{count:i.count,"content-id":i.contentId,disabled:i.disabled,downvoted:i.downvoted,upvoted:i.upvoted,"users-post":i.usersPost},on:{click:i.handleClick,"set-visibility":i.setVisibility}})}),[],!1,(function vote_injectStyles(i){this.$style=Ao.locals||Ao}),null,null).exports},directives:{tooltip:Ur.Z},mixins:[po],props:{approved:{type:Boolean,default:!1},approveComment:{type:Function},actionVisibility:{type:Boolean,default:!1},authorId:{type:Number},canDelete:{type:Boolean,default:!1},canEdit:{type:Boolean,default:!1},canSanitize:{type:Boolean,default:!1},canReceiveGift:{type:Boolean,default:!1},canQuote:{type:Boolean,default:!1},copyCommentLink:{type:Function},customConfirmation:{type:String,required:!1},deleteComment:{type:Function,required:!0},editComment:{type:Function,required:!0},giftMembership:{type:Function},hideQuote:{type:Boolean,default:!1},quoteComment:{type:Function,required:!0},scrollToForm:{type:Function,required:!0},time:{type:String,required:!0},userRoles:{type:Array},usersPost:{type:Boolean,default:!1},uuid:{type:String}},emits:["toggle-sanitize"],data(){var i;return{contextUser:null==(i=window.context)?void 0:i.user,translations:Wi}},computed:{approveTooltip(){return this.approved?this.$trans("Approved"):this.$trans("Approve")},isOwnContent(){var i;return(null==(i=this.contextUser)?void 0:i.id)===this.authorId},showApproveComment(){var i,s;return this.approveComment&&((null==(i=this.contextUser)?void 0:i.isStaff)||(null==(s=this.userRoles)?void 0:s.includes("ROLE_COMMENT_MOD")))},showDelete(){return this.canDelete&&this.actionVisibility},showEdit(){return this.canEdit&&this.actionVisibility},showQuote(){return this.actionVisibility&&this.canQuote||!this.actionVisibility&&this.canQuote&&!this.hideQuote},showGift(){return this.canReceiveGift&&this.actionVisibility},showTime(){return!this.actionVisibility||!this.canDelete&&!this.canEdit&&!this.canReceiveGift}},methods:{toggleSanitize(){this.$emit("toggle-sanitize")}}},Mo=Oo,zo={component:"comment-post-actions-component",time:"comment-post-actions-time",icon:"comment-post-actions-icon",button:"comment-post-actions-button",blue:"comment-post-actions-blue",number:"comment-post-actions-number",link:"comment-post-actions-link",success:"comment-post-actions-success"};var Io=(0,Rr.Z)(Mo,(function(){var i,s=this,_=s.$createElement,T=s._self._c||_;return T("div",{class:s.$style.component},[T("span",{directives:[{name:"show",rawName:"v-show",value:s.showTime,expression:"showTime"}],class:s.$style.time},[s._v("\n    "+s._s(s.time)+"\n  ")]),s._v(" "),s.showReactions&&s.actionVisibility?T("reactions",{attrs:{"content-id":s.reactionId,"content-type":s.reactionType,"is-trigger":!0}}):s._e(),s._v(" "),T("span",{directives:[{name:"show",rawName:"v-show",value:s.showGift,expression:"showGift"},{name:"tooltip",rawName:"v-tooltip",value:s.translations.giftMembership,expression:"translations.giftMembership"}],staticClass:"icon-font-chess display-slider",class:[s.$style.icon,s.$style.blue],on:{click:function(i){return s.giftMembership()}}}),s._v(" "),T("span",{directives:[{name:"show",rawName:"v-show",value:s.showEdit,expression:"showEdit"},{name:"tooltip",rawName:"v-tooltip",value:s.translations.edit,expression:"translations.edit"}],staticClass:"icon-font-chess square-pencil",class:s.$style.icon,on:{click:function(i){s.editComment(),s.scrollToForm()}}}),s._v(" "),s.showApproveComment&&s.actionVisibility?T("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:s.approveTooltip,expression:"approveTooltip"}],staticClass:"icon-font-chess circle-checkmark",class:[s.$style.icon,(i={},i[s.$style.success]=s.approved,i)],on:{click:s.approveComment}}):s._e(),s._v(" "),T("comment-post-delete",{directives:[{name:"tooltip",rawName:"v-tooltip",value:s.translations.delete,expression:"translations.delete"}],attrs:{"custom-confirmation":s.customConfirmation,"delete-comment":s.deleteComment,"show-delete":s.showDelete}}),s._v(" "),s.actionVisibility&&s.copyCommentLink?T("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:s.translations.copyLink,expression:"translations.copyLink"}],staticClass:"icon-font-chess link",class:s.$style.icon,on:{click:s.copyCommentLink}}):s._e(),s._v(" "),s.showReactions&&s.actionVisibility?T("report",{attrs:{"content-id":s.uuid,"is-own-content":s.isOwnContent}}):s._e(),s._v(" "),T("span",{directives:[{name:"show",rawName:"v-show",value:s.showQuote,expression:"showQuote"},{name:"tooltip",rawName:"v-tooltip",value:s.translations.quote,expression:"translations.quote"}],staticClass:"icon-font-chess quote",class:s.$style.icon,on:{click:function(i){s.quoteComment(),s.scrollToForm()}}}),s._v(" "),T("span",{directives:[{name:"show",rawName:"v-show",value:s.canSanitize,expression:"canSanitize"},{name:"tooltip",rawName:"v-tooltip",value:s.translations.sanitize,expression:"translations.sanitize"}],staticClass:"icon-font-chess eye",class:s.$style.icon,on:{click:function(i){return s.toggleSanitize()}}}),s._v(" "),s.showReactions?T("vote",{attrs:{"content-id":s.reactionId,"users-post":s.usersPost}}):s._e()],1)}),[],!1,(function comment_post_actions_injectStyles(i){this.$style=zo.locals||zo}),null,null),Lo=Io.exports,Ro=__webpack_require__(63681);Object.create,Object.defineProperty,Object.getOwnPropertyDescriptor,Object.getOwnPropertyNames,Object.getPrototypeOf,Object.prototype.hasOwnProperty;function initDiagramViewer(){const i=new IntersectionObserver((s=>{s.forEach((async s=>{if(!s.isIntersecting)return;const _=s.target;i.unobserve(_);const{bootDiagramViewer:T}=await __webpack_require__.e(534).then(__webpack_require__.bind(__webpack_require__,38536));T(_)}))}),{rootMargin:"100px 0px",threshold:.01});document.querySelectorAll(`\n  .${Ro.xL.CHESS_DAILY_PUZZLE}:not([${Ro._G.DIAGRAM_OBSERVED}]),\n  .${Ro.xL.CHESS_DIAGRAM}:not([${Ro._G.DIAGRAM_OBSERVED}])`).forEach((s=>{i.observe(s),s.setAttribute(Ro._G.DIAGRAM_OBSERVED,"true")}))}var No=function createContextLocaleService(){var i,s,_,T,S,C;const P={contentLanguage:null==(s=null==(i=window.context)?void 0:i.i18n)?void 0:s.contentLanguage,language:null==(T=null==(_=window.context)?void 0:_.i18n)?void 0:T.locale,speaksEnglish:"en_US"===(null==(C=null==(S=window.context)?void 0:S.i18n)?void 0:C.locale)};return{get:function get(i){return P[i]}}}(),Do=__webpack_require__(99644);const prepAlertMessage=i=>i.data&&i.data.message||Vi.R0.badRequest;var jo={setLoading:(i,s)=>{i.loading=s},setLoadingUser:(i,s)=>{i.loadingUser[s.username]=s.loading},setLoadingFriends:(i,s)=>{i.loading.friends=s},setFriends:(i,s)=>{i.friends=s},setLoadingOpponents:(i,s)=>{i.loading.opponents=s},setOpponents:(i,s)=>{i.opponents=s},setAvatarUrl:(i,s)=>{i.avatarUrl=s},setSettingsAvatarUrl:(i,s)=>{i.settingsAvatarUrl=s},setArchiveView:(i,s)=>{i.archiveView=s},setFairPlayAgree:(i,s)=>{i.fairPlayAgree=s},setHomeContentType:(i,s)=>{i.homeContentType=s},setIsThreeD:(i,s)=>{i.isThreeD=s},setFollowSuggestions:(i,s)=>{i.followSuggestions=s},removeFollowSuggestedUser:(i,s)=>{const _=i.followSuggestions,T=_.findIndex((i=>i.username===s));-1!==T&&(_.splice(T,1),i.followSuggestions=_)},setFollowMessage:(i,s)=>{i.followMessage=s},setRoles:(i,s)=>{i.roles=s},setRating:(i,s)=>{i.rating=s},setLoggedIn:(i,s)=>{i.isLoggedIn=s},setUsername:(i,s)=>{i.username=s},setMembershipLevel(i,s){i.membershipLevel=s}};var Bo={namespaced:!0,mutations:jo,actions:function createUserActions(i){return{init:({dispatch:s})=>{i.isLoggedIn()&&(s("getFriends"),s("getOpponents"))},getFriends:({commit:s})=>(s("setLoading",!0),i.getFriends({user:i.get("id"),avatarSize:50}).then((i=>{s("setLoading",!1),s("setFriends",i.data.friends)})).catch((()=>{s("setLoading",!1),(0,Gi.el)({type:Vi.V5.error,message:Vi.R0.badRequest})}))),getOpponents:({commit:s})=>(s("setLoading",!0),i.getOpponents().then((i=>{s("setLoading",!1),s("setOpponents",i.data)})).catch((()=>{s("setLoading",!1),(0,Gi.el)({type:Vi.V5.error,message:Vi.R0.badRequest})}))),getFollowSuggestions:({commit:s})=>i.getFollowSuggestions().then((i=>{if(i.data.users&&i.data.users.length>0){s("setFollowSuggestions",i.data.users);let _=ht.Z.trans("Consider following...");i.data.notYetFollowing&&(_=ht.Z.trans("You are not currently following anyone. Here are a few suggestions...")),s("setFollowMessage",_)}else s("setFollowMessage",null)})).catch((()=>(0,Gi.el)({type:Vi.V5.error,message:Vi.R0.badRequest}))),acceptFollowSuggestion:({commit:i,dispatch:s},_)=>{i("removeFollowSuggestedUser",_),s("trackUser",_)},dismissFollowSuggestion:({commit:s},_)=>(s("removeFollowSuggestedUser",_),i.dismissFollowSuggestion(_).catch((()=>{(0,Gi.el)({type:Vi.V5.error,message:Vi.R0.badRequest})}))),getAvatar:({commit:s},_)=>{if(!i.get("avatarUrl"))return i.getAvatar(_).then((i=>{s("setAvatarUrl",i.data.avatar)}))},addFriend:({commit:s,dispatch:_},T)=>{const S=T.userId||T,C=T.dispatchCallback||"getFriends";return s("setLoading",!0),i.addFriend(S).then((i=>{s("setLoading",!1),(0,Gi.el)({type:Vi.V5.success,message:prepAlertMessage(i)})})).then((()=>{C.includes("/")?_(C,null,{root:!0}):_(C)})).catch((i=>{s("setLoading",!1),(0,Gi.el)({type:Vi.V5.error,message:i.response.data.message})}))},deleteFriend:({commit:s,dispatch:_},T)=>{const S=T.userId||T,C=T.dispatchCallback||"getFriends";return s("setLoading",!0),i.deleteFriend(S).then((i=>{s("setLoading",!1),(0,Gi.el)({type:Vi.V5.success,message:prepAlertMessage(i)})})).then((()=>{C.includes("/")?_(C,null,{root:!0}):_(C)})).catch((()=>{s("setLoading",!1),(0,Gi.el)({type:Vi.V5.error,message:Vi.R0.badRequest})}))},approveFriendRequest:({dispatch:s},_)=>{const T=_.userId||_,S=_.dispatchCallback||"getFriends";return i.approveFriendRequest(T).then((i=>{(0,Gi.el)({type:Vi.V5.success,message:prepAlertMessage(i)})})).then((()=>{S.includes("/")?s(S,null,{root:!0}):s(S)})).catch((()=>{(0,Gi.el)({type:Vi.V5.error,message:Vi.R0.badRequest})}))},blockUser:(s,_)=>i.blockUser(_).then((i=>{(0,Gi.el)({type:Vi.V5.success,message:prepAlertMessage(i)})})).catch((()=>{(0,Gi.el)({type:Vi.V5.error,message:Vi.R0.badRequest})})),unblockUser:(s,_)=>i.unblockUser(_).then((i=>{(0,Gi.el)({type:Vi.V5.success,message:prepAlertMessage(i)})})).catch((()=>{(0,Gi.el)({type:Vi.V5.error,message:Vi.R0.badRequest})})),trackUser:(s,_)=>i.trackUser(_).then((i=>{(0,Gi.el)({type:Vi.V5.success,message:prepAlertMessage(i)})})).catch((()=>{(0,Gi.el)({type:Vi.V5.error,message:Vi.R0.badRequest})})),untrackUser:(s,_)=>i.untrackUser(_).then((i=>{(0,Gi.el)({type:Vi.V5.success,message:prepAlertMessage(i)})})).catch((()=>{(0,Gi.el)({type:Vi.V5.error,message:Vi.R0.badRequest})})),setArchiveView:({commit:s},_)=>{if(function isValidArchiveView(i){return["grid","list"].includes(i)}(_))return i.get("archiveView")!==_?i.setArchiveView(_).then((()=>{s("setArchiveView",_)})):void 0},setFairPlayAgree:({commit:s})=>(s("setFairPlayAgree",!0),i.setFairPlayAgree(!0)),setHomeContentType:({commit:s},_)=>{if(function isValidHomeContentType(i){return["following","my_activity"].includes(i)}(_))return s("setHomeContentType",_),i.setHomeContentType(_)},setIsThreeD:({commit:i},s)=>{i("setIsThreeD",s)},cancelFriendRequest:(s,_)=>i.cancelFriendRequest(_).then((i=>{(0,Gi.el)({type:Vi.V5.success,message:prepAlertMessage(i)})})).catch((()=>{(0,Gi.el)({type:Vi.V5.error,message:Vi.R0.badRequest})})),declineFriendRequest:(s,_)=>i.declineFriendRequest(_).then((i=>{(0,Gi.el)({type:Vi.V5.success,message:prepAlertMessage(i)})})).catch((()=>{(0,Gi.el)({type:Vi.V5.error,message:Vi.R0.badRequest})})),refreshUserRoles({commit:s}){if(i.isLoggedIn())return i.getRoles().then((i=>{s("setRoles",i.data)}))},checkValidUsername:(s,_)=>i.checkValidUsername(_).then((i=>i.data)).catch((()=>(0,Gi.el)({type:Vi.V5.error,message:Vi.R0.badRequest})))}}(Do.Z),state:function createUserState(i,s){var _;return{chessTitle:i.get("chessTitle")||"",cohort:i.get("cohort"),flairCode:i.get("flairCode"),friends:i.get("friends"),roles:i.get("roles"),opponents:i.get("opponents"),boardSettings:i.get("boardSettings"),loading:!1,eligibleFirstTrial:i.eligibleFirstTrial(),isActivated:i.checkMembershipStatus("isActivated"),isLoggedIn:i.isLoggedIn(),isEnabled:i.isEnabled("isEnabled"),isImpersonating:i.isImpersonating(),isStaff:i.checkMembershipStatus("isStaff"),isStaffOnly:i.checkMembershipStatus("isStaffOnly"),isModerator:i.checkMembershipStatus("isModerator"),isModeratorOnly:i.checkMembershipStatus("isModeratorOnly"),isDiamond:i.checkMembershipStatus("isDiamond"),isDiamondOnly:i.checkMembershipStatus("isDiamondOnly"),isPlatinum:i.checkMembershipStatus("isPlatinum"),isPlatinumOnly:i.checkMembershipStatus("isPlatinumOnly"),isSilver:i.checkMembershipStatus("isSilver"),isSilverOnly:i.checkMembershipStatus("isSilverOnly"),isGold:i.checkMembershipStatus("isGold"),isGoldOnly:i.checkMembershipStatus("isGoldOnly"),isGuest:i.get("isGuest"),isPremium:i.checkMembershipStatus("isPremium"),isBasic:i.checkMembershipStatus("isBasic"),id:i.get("id"),language:s.get("language"),contentLanguage:s.get("contentLanguage"),username:i.get("username"),avatarUrl:i.get("avatarUrl"),settingsAvatarUrl:i.get("settingsAvatarUrl"),avatarLargeUrl:i.get("avatarLargeUrl"),lastLoginDate:i.get("lastLoginDate"),registerDate:i.get("registerDate"),timezone:i.get("timezone"),diagramSettings:i.get("diagramSettings"),speaksEnglish:s.get("speaksEnglish"),isThreeD:!1,archiveView:i.get("getArchiveView"),homeContentType:i.get("homeContentType"),membershipLevel:i.get("membershipLevel"),isContentHidden:i.get("isContentHidden"),fairPlayAgree:i.get("fairPlayAgree"),features:i.get("features"),followSuggestions:[],followMessage:"",country:i.get("country"),flag:null==(_=i.get("country"))?void 0:_.id,rating:i.get("rating"),membership:i.get("membership"),safeMode:i.get("safeMode"),uuid:i.get("uuid")}}(Do.Z,No),getters:{chessTitle:i=>i.chessTitle,isActivated:i=>i.isActivated,id:i=>i.id,isImpersonating:i=>i.isImpersonating,isLoggedIn:i=>i.isLoggedIn,username:i=>i.username,roles:i=>i.roles,isPremium:i=>i.isPremium,hyphenatedLanguage:i=>(i.language||"").replace("_","-")}},$o=__webpack_require__(12002);var Uo=ca.Z.create({withCredentials:!0});var Fo=Object.defineProperty,Ho=Object.getOwnPropertySymbols,qo=Object.prototype.hasOwnProperty,Vo=Object.prototype.propertyIsEnumerable,fetch_defNormalProp=(i,s,_)=>s in i?Fo(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_;async function fetch(i){return async function publish(i){var s;let _=window.PubSub.options.url[i.service||"base"];const T=i.path instanceof Array?i.path.join("/"):i.path;_.endsWith("/")||T.startsWith("/")||(_+="/");const S={};["staging","prod"].includes("staging")||(S.uid=null==(s=window.context.user)?void 0:s.uuid),i.params&&Object.assign(S,i.params);const C={};return i.requestId&&(C["x-chesscom-request-id-client"]=i.requestId),i.clientId&&(C["x-chesscom-play-client"]=i.clientId),i.headers&&Object.assign(C,i.headers),Uo({url:/^http[s]?:/.test(T)?T:`${_}${T}`,data:i.data,method:i.method||"post",params:S,headers:C,withCredentials:!0})}(((i,s)=>{for(var _ in s||(s={}))qo.call(s,_)&&fetch_defNormalProp(i,_,s[_]);if(Ho)for(var _ of Ho(s))Vo.call(s,_)&&fetch_defNormalProp(i,_,s[_]);return i})({method:"get"},i))}var Go=(i=>(i.None="none",i.Playing="playing",i))(Go||{}),Zo=(i=>(i.Offline="offline",i.Online="online",i))(Zo||{});async function getUsersOnlineStatuses(i){const{data:s}=await async function getUsersPresenceData(i){return fetch({service:$o.AM.Presence,path:[$o.fz.Users],params:{ids:i.slice(0,25).join(",")}})}(i);return s.users.reduce(((i,s)=>(i[s.id]=function transformUserPresenceDto(i){var s,_;const{activity:T,activityContext:S,id:C,status:P,statusAt:O,statusAtUncertain:M}=i,R={battleLink:void 0,eventLink:void 0,gameLink:void 0,id:C,isOfflineStatusUncertain:void 0,isOnline:P===Zo.Online,isPlaying:T===Go.Playing,offlineSince:void 0,statusAt:O};if(P===Zo.Offline&&(R.offlineSince=O),null==(s=null==S?void 0:S.games)?void 0:s.length){const i=S.games[0],s=i.legacyId?"web_game_live":"web_game_rcn",_=i.legacyId||i.id;R.gameLink=D.Z.generate(s,{id:_})}else if(null==(_=null==S?void 0:S.battles)?void 0:_.length){const i=S.battles[0].id;R.battleLink=D.Z.generate("web_puzzles_mode_battle_view",{shortUuid:i})}return R.isOfflineStatusUncertain=M,R}(s),i)),{})}var Wo=Object.defineProperty,Ko=Object.defineProperties,Yo=Object.getOwnPropertyDescriptors,Xo=Object.getOwnPropertySymbols,Qo=Object.prototype.hasOwnProperty,Jo=Object.prototype.propertyIsEnumerable,actions_defNormalProp=(i,s,_)=>s in i?Wo(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,tl={async fetchUserPopover({rootState:i,commit:s},_){let T,S=!1;try{T=(await Do.Z.getUser(_)).data,S=!0}catch(C){s("setUser",{userNotExist:!0})}if(S){const S=await async function getUserOnlineStatus(i){return(await getUsersOnlineStatuses([i]))[i]}(T.uuid),{user:P}=i;if((null==P?void 0:P.id)&&T&&T.userId!==P.id)try{const{data:i}=await ca.Z.post(D.Z.generate("web_user_callback_lifetime_score",{user:T.userId,opponent:P.id}));s("setLifetimeScore",i)}catch(C){s("setLifetimeScore",null)}s("setUser",((i,s)=>Ko(i,Yo(s)))(((i,s)=>{for(var _ in s||(s={}))Qo.call(s,_)&&actions_defNormalProp(i,_,s[_]);if(Xo)for(var _ of Xo(s))Jo.call(s,_)&&actions_defNormalProp(i,_,s[_]);return i})({},T),{username:_})),s("setPresenceDetails",S)}}},nl=__webpack_require__(32793);function setPopoverPosition(i){const s=(0,nl.tq)()&&window.innerWidth<768;let _;return(0,Or.t)()?_=`left: auto; right: ${i.right}px; top: ${i.top}px;`:(_=`transform: translate(${i.left}px, ${i.top}px);`,s&&(_=`transform: translateY(${i.top}px);`)),_}var rl={hideUserPopover:i=>{i.isHovered=!1,i.show=!1},hover:i=>{i.isHovered=!0},resetUser:i=>{i.user={avatarUrl:"",bestRating:0,bestRatingType:"",chessTitle:"",country:{},joinDate:"",lastLoginDate:"",membership:{},onlineStatus:"",username:""},i.presenceDetails=null,i.lifetimeScore=null},showUserPopover:i=>{i.show=!0},setPosition:(i,s)=>{i.position=s},setUser:(i,s)=>{i.user=s},setPresenceDetails:(i,s)=>{i.presenceDetails=s},setLifetimeScore:(i,s)=>{i.lifetimeScore=s}},il={namespaced:!0,mutations:rl,actions:tl,state:{isHovered:!1,show:!1,user:{avatarUrl:"",bestRating:0,bestRatingType:"",chessTitle:"",country:{},joinDate:"",lastLoginDate:"",membership:{},onlineStatus:"",username:""},position:{x:"right",y:"bottom",top:0,left:0},presenceDetails:null,lifetimeScore:null}},al=__webpack_require__(64694),sl=__webpack_require__(87879),ol={name:"IconButton",directives:{Tooltip:Ur.Z},props:{action:Function,btnColor:String,iconName:{type:String,required:!0},label:{type:String,required:!0}},emits:["click"],methods:{onClick(i){this.action?this.action(i):this.$emit("click",i)}}},ll={link:"icon-button-link",icon:"icon-button-icon",label:"icon-button-label",blue:"icon-button-blue",grey:"icon-button-grey",red:"icon-button-red",translucent:"icon-button-translucent"};var cl=(0,Rr.Z)(ol,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:i.label,delay:100},expression:"{\n    content: label,\n    delay: 100\n  }"}],class:[i.$style.link,i.$style[i.btnColor]],attrs:{type:"button","aria-label":i.label},on:{click:i.onClick}},[_("span",{class:[i.$style.icon,i.iconName,"icon-font-chess"]})])}),[],!1,(function icon_button_injectStyles(i){this.$style=ll.locals||ll}),null,null),ul=cl.exports,dl={name:"AdminActions",components:{IconButton:ul},props:{canModerate:{type:Boolean,default:!1},canMuteOnChat:{type:Boolean,default:!1},clientName:String,canWarnOnChat:Boolean,canModerateOnChat:Boolean,userAlreadyMutedOnChat:Boolean},emits:["chat-kick-user","chat-unmute-user","chat-mute-user-remove-messages","chat-mute-user","chat-warn-user","ban-user","kick-user","mute-user","warn-user"]},hl={component:"admin-actions-component",separator:"admin-actions-separator"};var pl=(0,Rr.Z)(dl,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[i.canModerate?_("icon-button",{attrs:{"icon-name":"flag","btn-color":"red",label:i.$trans("Warn")},on:{click:function(s){return i.$emit("warn-user")}}}):i._e(),i._v(" "),i.canModerate?_("icon-button",{attrs:{"icon-name":"chat-x","btn-color":"red",label:i.$trans("Mute")},on:{click:function(s){return i.$emit("mute-user")}}}):i._e(),i._v(" "),i.canModerate?_("icon-button",{attrs:{"icon-name":"exit","btn-color":"red",label:i.$trans("Kick")},on:{click:function(s){return i.$emit("kick-user")}}}):i._e(),i._v(" "),i.canModerate?_("icon-button",{attrs:{"icon-name":"user-block","btn-color":"red",label:i.$trans("Ban")},on:{click:function(s){return i.$emit("ban-user")}}}):i._e(),i._v(" "),i.canModerate&&i.clientName?_("icon-button",{attrs:{"icon-name":"circle-info",label:i.clientName}}):i._e(),i._v(" "),i.canModerate&&(i.canWarnOnChat||i.canModerateOnChat)?_("div",{class:i.$style.separator}):i._e(),i._v(" "),i.canWarnOnChat&&!i.userAlreadyMutedOnChat?_("icon-button",{attrs:{"icon-name":"flag","btn-color":"red",label:i.$trans("Chat Warn")},on:{click:function(s){return i.$emit("chat-warn-user")}}}):i._e(),i._v(" "),!i.canModerateOnChat&&!i.canMuteOnChat||i.userAlreadyMutedOnChat?i._e():_("icon-button",{attrs:{"icon-name":"chat-x","btn-color":"red",label:i.$trans("Chat Mute")},on:{click:function(s){return i.$emit("chat-mute-user")}}}),i._v(" "),i.canMuteOnChat&&!i.userAlreadyMutedOnChat?_("icon-button",{attrs:{"icon-name":"trash","btn-color":"red",label:i.$trans("Chat Mute and remove messages")},on:{click:function(s){return i.$emit("chat-mute-user-remove-messages")}}}):i._e(),i._v(" "),i.canMuteOnChat&&i.userAlreadyMutedOnChat?_("icon-button",{attrs:{"icon-name":"chat-alt","btn-color":"blue",label:i.$trans("Chat Unmute")},on:{click:function(s){return i.$emit("chat-unmute-user")}}}):i._e(),i._v(" "),i.canModerateOnChat?_("icon-button",{attrs:{"icon-name":"exit","btn-color":"red",label:i.$trans("Chat Kick")},on:{click:function(s){return i.$emit("chat-kick-user")}}}):i._e()],1)}),[],!1,(function admin_actions_injectStyles(i){this.$style=hl.locals||hl}),null,null),ml=pl.exports,fl={methods:{hasVisibleDropdown(){return Object.values(this.dropdown).some((i=>"block"===i.display))},createDropdown(i){const s={dropdown:{}};return i.forEach((i=>{s.dropdown[i]={display:"none",transform:"translate(0, 0)"}})),s},hideDropdown(){Object.keys(this.dropdown).forEach((i=>{this.dropdown[i].display="none"}))},showDropdown(i,s,_){const T=document.querySelector(`ul[data-dropdown="${s}"]`);T&&("block"===this.dropdown[s].display?this.dropdown[s].display="none":(this.hideDropdown(),this.dropdown[s].display="block",this.$nextTick((()=>{const S=i.target.getBoundingClientRect(),{width:C,height:P}=T.getBoundingClientRect(),O=(0,ws.MD)(S,P,C);_&&_(O);const{left:M,top:R}=O;this.dropdown[s].transform=`translate(${M}px, ${R}px)`}))))}}},gl=Object.defineProperty,vl=Object.getOwnPropertySymbols,bl=Object.prototype.hasOwnProperty,yl=Object.prototype.propertyIsEnumerable,analysis_options_dropdownvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?gl(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,_l={name:"AnalysisOptionsDropdown",directives:{Tooltip:Ur.Z},mixins:[fl],props:{target:{type:HTMLElement,required:!0},position:{type:Object,required:!0},analysisOptions:{type:Array,default:()=>[]}},emits:["option-selected","hide"],data(){return((i,s)=>{for(var _ in s||(s={}))bl.call(s,_)&&analysis_options_dropdownvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(vl)for(var _ of vl(s))yl.call(s,_)&&analysis_options_dropdownvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i})({},this.createDropdown(["analysis"]))},mounted(){const i={target:this.target};this.showDropdown(i,"analysis",(i=>{i.left-=this.position.left,i.top-=this.position.top}))},methods:{onClickOption(i,s){i.examineId=s,this.$emit("option-selected",i)}}},wl=_l,kl={component:"analysis-options-dropdown-component",close:"analysis-options-dropdown-close",title:"analysis-options-dropdown-title"};var Tl=(0,Rr.Z)(wl,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("ul",{class:i.$style.component,style:i.dropdown.analysis,attrs:{"data-dropdown":"analysis"}},[i._l(i.analysisOptions,(function(s){return _("li",{directives:[{name:"tooltip",rawName:"v-tooltip",value:s.title,expression:"analysisOption.title"}],key:s.examineId,domProps:{textContent:i._s(s.title)},on:{click:function(_){return i.onClickOption(_,s.examineId)}}})})),i._v(" "),i._m(0),i._v(" "),_("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.$trans("Close"),expression:"$trans('Close')"}],class:[i.$style.close,"icon-x"],on:{click:function(s){return i.$emit("hide")}}})],2)}),[function(){var i=this,s=i.$createElement;return(i._self._c||s)("span",{class:i.$style.title,domProps:{textContent:i._s(i.$trans("Analysis Board"))}})}],!1,(function analysis_options_dropdown_injectStyles(i){this.$style=kl.locals||kl}),null,null),Sl=Tl.exports,Cl=Object.defineProperty,xl=Object.getOwnPropertySymbols,El=Object.prototype.hasOwnProperty,Pl=Object.prototype.propertyIsEnumerable,chat_options_dropdownvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?Cl(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,Al={name:"ChatOptionsDropdown",directives:{Tooltip:Ur.Z},mixins:[fl],props:{target:{type:HTMLElement,required:!0},position:{type:Object,required:!0},chatOptions:{type:Array,default:()=>[]}},emits:["option-selected","hide"],data(){return((i,s)=>{for(var _ in s||(s={}))El.call(s,_)&&chat_options_dropdownvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(xl)for(var _ of xl(s))Pl.call(s,_)&&chat_options_dropdownvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i})({},this.createDropdown(["chat"]))},mounted(){const i={target:this.target};this.showDropdown(i,"chat",(i=>{i.left-=this.position.left,i.top-=this.position.top}))},methods:{onClickOption(i,s){i.roomId=s,this.$emit("option-selected",i)}}},Ol=Al,Ml={component:"chat-options-dropdown-component",close:"chat-options-dropdown-close",title:"chat-options-dropdown-title"};var zl=(0,Rr.Z)(Ol,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("ul",{class:i.$style.component,style:i.dropdown.chat,attrs:{"data-dropdown":"chat"}},[i._l(i.chatOptions,(function(s){return _("li",{directives:[{name:"tooltip",rawName:"v-tooltip",value:s.title,expression:"chatOption.title"}],key:s.roomId,domProps:{textContent:i._s(s.title)},on:{click:function(_){return i.onClickOption(_,s.roomId)}}})})),i._v(" "),i._m(0),i._v(" "),i._m(1),i._v(" "),_("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.$trans("Close"),expression:"$trans('Close')"}],class:[i.$style.close,"icon-x"],on:{click:function(s){return i.$emit("hide")}}})],2)}),[function(){var i=this,s=i.$createElement;return(i._self._c||s)("li",{domProps:{textContent:i._s(i.$trans("Private Chat"))},on:{click:function(s){return i.onClickOption(s)}}})},function(){var i=this,s=i.$createElement;return(i._self._c||s)("span",{class:i.$style.title,domProps:{textContent:i._s(i.$trans("Chat"))}})}],!1,(function chat_options_dropdown_injectStyles(i){this.$style=Ml.locals||Ml}),null,null),Il=zl.exports,Ll={name:"IconLink",directives:{Tooltip:Ur.Z},props:{url:String,iconColor:String,iconName:{type:String,required:!0},label:{type:String,required:!0}},emits:["click"]},Rl={link:"icon-link-link",icon:"icon-link-icon",label:"icon-link-label",blue:"icon-link-blue",grey:"icon-link-grey",red:"icon-link-red",translucent:"icon-link-translucent"};var Nl=(0,Rr.Z)(Ll,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:i.label,delay:100},expression:"{\n    content: label,\n    delay: 100\n  }"}],class:[i.$style.link,i.$style[i.iconColor]],attrs:{href:i.url},on:{click:function(s){return i.$emit("click",s)}}},[_("span",{class:[i.$style.icon,i.iconName,"icon-font-chess"]})])}),[],!1,(function icon_link_injectStyles(i){this.$style=Rl.locals||Rl}),null,null),Dl=Nl.exports,jl={name:"LabeledIconButton",props:{action:Function,btnColor:String,iconName:{type:String,required:!0},label:{type:String,required:!0}},emits:["click"],methods:{onClick(i){this.action?this.action(i):this.$emit("click",i)}}},Bl={link:"labeled-icon-button-link",icon:"labeled-icon-button-icon",label:"labeled-icon-button-label",blue:"labeled-icon-button-blue",grey:"labeled-icon-button-grey",red:"labeled-icon-button-red",translucent:"labeled-icon-button-translucent"};var $l=(0,Rr.Z)(jl,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("button",{class:[i.$style.link,i.$style[i.btnColor]],attrs:{type:"button"},on:{click:i.onClick}},[_("span",{class:[i.$style.icon,i.iconName,"icon-font-chess"]}),i._v(" "),_("span",{class:i.$style.label,domProps:{textContent:i._s(i.label)}})])}),[],!1,(function labeled_icon_button_injectStyles(i){this.$style=Bl.locals||Bl}),null,null),Ul=$l.exports,Fl={name:"LabeledIconButton",props:{url:String,iconColor:String,iconName:{type:String,required:!0},label:{type:String,required:!0}},emits:["click"]},Hl={link:"labeled-icon-link-link",icon:"labeled-icon-link-icon",label:"labeled-icon-link-label",blue:"labeled-icon-link-blue",grey:"labeled-icon-link-grey",red:"labeled-icon-link-red",translucent:"labeled-icon-link-translucent"};var ql=(0,Rr.Z)(Fl,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("a",{class:[i.$style.link,i.$style[i.iconColor]],attrs:{href:i.url},on:{click:function(s){return i.$emit("click",s)}}},[_("span",{class:[i.$style.icon,i.iconName,"icon-font-chess"]}),i._v(" "),_("span",{class:i.$style.label,domProps:{textContent:i._s(i.label)}})])}),[],!1,(function labeled_icon_link_injectStyles(i){this.$style=Hl.locals||Hl}),null,null),Vl=ql.exports,Gl={name:"UserActions",components:{IconFont:Mr.Z,IconButton:ul,IconLink:Dl,LabeledIconButton:Ul,LabeledIconLink:Vl,ChatOptionsDropdown:Il,AnalysisOptionsDropdown:Sl},props:{avatar:String,canAddFriend:Boolean,canBlockUser:Boolean,canReportUser:Boolean,canCreateChallenge:Boolean,canFollowUser:Boolean,canGiftMembership:Boolean,canRemoveFriend:Boolean,canSendMessage:Boolean,canInviteToChat:Boolean,canSendTrophy:Boolean,canUnblockUser:Boolean,canUnfollowUser:Boolean,canUseGlobalChat:Boolean,isEnabled:Boolean,hasInboundFriendRequest:Boolean,hasOutboundFriendRequest:Boolean,loggedAsAnother:Boolean,username:String,canObserveGame:{type:Boolean,default:!1},isBughousePartner:{type:Boolean,default:!1},challengeUrl:String,canCancelFriendRequest:{type:Boolean,default:!1},canDeclineFriendRequest:{type:Boolean,default:!1},canAcceptFriendRequest:{type:Boolean,default:!1},archiveUrl:String,chatOptions:{type:Array,default:()=>[]},position:{type:Object,default:()=>({})},canInviteToAnalysis:{type:Boolean,default:!1},analysisOptions:{type:Array,default:()=>[]},isConfirmVisible:{type:Boolean,default:!1},showBughousePartner:{type:Boolean,default:!1},membershipUrl:String,dynamicActions:Array},emits:["show-archive","show-gift","show-trophy","decline-friend-request","cancel-friend-request","add-friend","invite-analysis","request-chat","send-message","create-challenge","user-popover-hide","remove-friend","accept-friend-request","follow-user","unfollow-user","block-user","unblock-user","show-report","observe-user","bughouse-partner","bughouse-unpartner","all-actions-shown","start-direct-chat"],data:()=>({allActions:!1,chatDropdownTarget:null,analysisDropdownTarget:null,buttonsListStyle:null}),computed:{showGlobalChatButton(){return this.canUseGlobalChat&&!this.canInviteToChat}},methods:{getIconComponent:i=>i?Dl:ul,getIconLabeledComponent:i=>i?Vl:Ul,hidePopover(){this.$emit("user-popover-hide")},onClickChallenge(i){this.challengeUrl?this.hidePopover():(i.username=this.username,i.avatar=this.avatar,this.$emit("create-challenge",i))},onClickMessage(i){i.username=this.username,i.avatar=this.avatar,this.$emit("send-message",i)},onClickChat(i){this.chatOptions.length?this.chatDropdownTarget=i.target:this.onClickChatOption(i)},onClickChatOption(i){this.hideChatDropdown(),this.$emit("request-chat",i)},onClickAnalysis(i){this.analysisDropdownTarget=i.target},onClickAnalysisOption(i){this.hideAnalysisDropdown(),this.$emit("invite-analysis",i)},onClickAddFriend(){this.$emit("add-friend")},onClickCancelFriendRequest(){this.$emit("cancel-friend-request")},onClickDeclineFriendRequest(){this.$emit("decline-friend-request")},onClickTrophy(i){i.username=this.username,this.$emit("show-trophy",i)},onClickGift(){this.$emit("show-gift")},onClickArchive(i){this.archiveUrl?this.hidePopover():(i.username=this.username,this.$emit("show-archive",i))},onClickRemoveFriend(){this.$emit("remove-friend")},onClickAcceptFriendRequest(){this.$emit("accept-friend-request")},onClickFollowUser(){this.$emit("follow-user")},onClickUnfollowUser(){this.$emit("unfollow-user")},onClickBlockUser(){this.$emit("block-user")},onClickUnblockUser(){this.$emit("unblock-user")},onClickReport(){this.$emit("show-report")},onClickObserve(){this.$emit("observe-user")},onClickPartner(){this.$emit("bughouse-partner")},onClickUnpartner(){this.$emit("bughouse-unpartner")},showAllActions(){this.allActions=!0,this.$nextTick((()=>{const i=document.getElementsByClassName(this.$style.buttonsList)[0];if(i){const s=[...i.children],_=Math.max(...s.map((i=>i.offsetHeight)));this.buttonsListStyle={height:_*Math.round(s.length/2)+"px"}}this.$nextTick((()=>{this.$emit("all-actions-shown")}))}))},startDirectChat(){this.hidePopover(),this.$emit("start-direct-chat")},hideChatDropdown(){this.chatDropdownTarget=null},hideAnalysisDropdown(){this.analysisDropdownTarget=null}}},Zl={component:"user-actions-component","icons-list":"user-actions-icons-list",more:"user-actions-more",caret:"user-actions-caret",buttonsList:"user-actions-buttonsList"};var Wl=(0,Rr.Z)(Gl,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[i.allActions?i._e():_("div",{class:i.$style["icons-list"]},[i.canCreateChallenge?_(i.getIconComponent(i.challengeUrl),{tag:"component",attrs:{"icon-name":"chess-board-plus",label:i.$trans("Challenge"),url:i.challengeUrl},on:{click:i.onClickChallenge}}):i._e(),i._v(" "),i.showGlobalChatButton?_("icon-button",{attrs:{"icon-name":"chat",label:i.$trans("Chat")},on:{click:i.startDirectChat}}):i._e(),i._v(" "),i.loggedAsAnother?_("icon-button",{attrs:{"icon-name":"mail-plus",label:i.$trans("Message")},on:{click:i.onClickMessage}}):i._e(),i._v(" "),i.canInviteToChat?_("icon-button",{attrs:{"icon-name":"chat",label:i.$trans("Chat")},on:{click:i.onClickChat}}):i._e(),i._v(" "),i.canAddFriend?_("icon-button",{attrs:{"icon-name":"user-plus",label:i.$trans("Add Friend")},on:{click:i.onClickAddFriend}}):i._e(),i._v(" "),i.canAcceptFriendRequest?_("icon-button",{attrs:{"icon-name":"user-plus",label:i.$trans("Accept Request")},on:{click:i.onClickAcceptFriendRequest}}):i._e(),i._v(" "),i.canDeclineFriendRequest?_("icon-button",{attrs:{"btn-color":"grey","icon-name":"user-x",label:i.$trans("Decline Request")},on:{click:i.onClickDeclineFriendRequest}}):i._e(),i._v(" "),i.canCancelFriendRequest?_("icon-button",{attrs:{"btn-color":"grey","icon-name":"user-x",label:i.$trans("Cancel Request")},on:{click:i.onClickCancelFriendRequest}}):i._e(),i._v(" "),i.canRemoveFriend?_("icon-button",{attrs:{"icon-name":"user-x",label:i.$trans("Remove Friend")},on:{click:i.onClickRemoveFriend}}):i._e(),i._v(" "),i.canGiftMembership?_(i.getIconComponent(i.membershipUrl),{tag:"component",attrs:{"btn-color":"blue","icon-color":"blue","icon-name":"display-slider",label:i.$trans("Gift Membership"),url:i.membershipUrl},on:{click:i.onClickGift}}):i._e(),i._v(" "),i.canObserveGame?_("icon-button",{attrs:{"icon-name":"binoculars",label:i.$trans("Observe Game")},on:{click:i.onClickObserve}}):i._e(),i._v(" "),i.canReportUser?_("icon-button",{attrs:{"icon-name":"circle-danger",label:i.$trans("Report")},on:{click:i.onClickReport}}):i._e(),i._v(" "),i.loggedAsAnother?i._e():_(i.getIconComponent(i.archiveUrl),{tag:"component",attrs:{"icon-name":"chess-board-folder",label:i.$trans("Archive"),url:i.archiveUrl},on:{click:i.onClickArchive}}),i._v(" "),i.loggedAsAnother&&i.isEnabled?_("button",{class:i.$style.more,attrs:{type:"button"},on:{click:i.showAllActions}},[i._v("\n      "+i._s(i.$trans("More"))+"\n      "),_("icon-font",{class:i.$style.caret,attrs:{name:"caret-down",theme:"primary"}})],1):i._e()],1),i._v(" "),i.allActions&&!i.isConfirmVisible?_("div",{class:i.$style.buttonsList,style:i.buttonsListStyle},[i.canCreateChallenge?_(i.getIconLabeledComponent(i.challengeUrl),{tag:"component",attrs:{"icon-name":"chess-board-plus",label:i.$trans("Challenge"),url:i.challengeUrl},on:{click:i.onClickChallenge}}):i._e(),i._v(" "),i.showGlobalChatButton?_("labeled-icon-button",{attrs:{"icon-name":"chat",label:i.$trans("Chat")},on:{click:i.startDirectChat}}):i._e(),i._v(" "),i.loggedAsAnother?_("labeled-icon-button",{attrs:{"icon-name":"mail-plus",label:i.$trans("Message")},on:{click:i.onClickMessage}}):i._e(),i._v(" "),i.canInviteToChat?_("labeled-icon-button",{attrs:{"icon-name":"chat",label:i.$trans("Chat")},on:{click:i.onClickChat}}):i._e(),i._v(" "),i.canAddFriend?_("labeled-icon-button",{attrs:{"icon-name":"user-plus",label:i.$trans("Add Friend")},on:{click:i.onClickAddFriend}}):i._e(),i._v(" "),i.canAcceptFriendRequest?_("labeled-icon-button",{attrs:{"icon-name":"user-plus",label:i.$trans("Accept Request")},on:{click:i.onClickAcceptFriendRequest}}):i._e(),i._v(" "),i.canDeclineFriendRequest?_("labeled-icon-button",{attrs:{"btn-color":"grey","icon-name":"user-x",label:i.$trans("Decline Request")},on:{click:i.onClickDeclineFriendRequest}}):i._e(),i._v(" "),i.canCancelFriendRequest?_("labeled-icon-button",{attrs:{"btn-color":"grey","icon-name":"user-x",label:i.$trans("Cancel Request")},on:{click:i.onClickCancelFriendRequest}}):i._e(),i._v(" "),i.canRemoveFriend?_("labeled-icon-button",{attrs:{"icon-name":"user-x",label:i.$trans("Remove Friend")},on:{click:i.onClickRemoveFriend}}):i._e(),i._v(" "),i.canObserveGame?_("labeled-icon-button",{attrs:{"icon-name":"binoculars",label:i.$trans("Observe")},on:{click:i.onClickObserve}}):i._e(),i._v(" "),i.canFollowUser?_("labeled-icon-button",{attrs:{"icon-name":"follow",label:i.$trans("Follow")},on:{click:i.onClickFollowUser}}):i._e(),i._v(" "),i.canUnfollowUser?_("labeled-icon-button",{attrs:{"icon-name":"unfollow",label:i.$trans("Unfollow")},on:{click:i.onClickUnfollowUser}}):i._e(),i._v(" "),i.canGiftMembership?_("labeled-icon-button",{attrs:{"btn-color":"blue","icon-name":"display-slider",label:i.$trans("Gift Membership")},on:{click:i.onClickGift}}):i._e(),i._v(" "),i.canSendTrophy?_("labeled-icon-button",{attrs:{"icon-name":"trophy-plus",label:i.$trans("Give Award")},on:{click:i.onClickTrophy}}):i._e(),i._v(" "),i.showBughousePartner&&!i.isBughousePartner?_("labeled-icon-button",{attrs:{"icon-name":"bughouse",label:i.$trans("Partner")},on:{click:i.onClickPartner}}):i._e(),i._v(" "),i.showBughousePartner&&i.isBughousePartner?_("labeled-icon-button",{attrs:{"icon-name":"bughouse",label:i.$trans("Unpartner")},on:{click:i.onClickUnpartner}}):i._e(),i._v(" "),i.canInviteToAnalysis?_("labeled-icon-button",{attrs:{"icon-name":"chess-board-search",label:i.$trans("Analysis Board")},on:{click:i.onClickAnalysis}}):i._e(),i._v(" "),_(i.getIconLabeledComponent(i.archiveUrl),{tag:"component",attrs:{"icon-name":"chess-board-folder",label:i.$trans("Archive"),url:i.archiveUrl},on:{click:i.onClickArchive}}),i._v(" "),i.canBlockUser?_("labeled-icon-button",{attrs:{"icon-name":"circle-block",label:i.$trans("Block")},on:{click:i.onClickBlockUser}}):i._e(),i._v(" "),i.canUnblockUser?_("labeled-icon-button",{attrs:{"btn-color":"red","icon-name":"circle-block",label:i.$trans("Unblock")},on:{click:i.onClickUnblockUser}}):i._e(),i._v(" "),i.canReportUser?_("labeled-icon-button",{attrs:{"icon-name":"circle-danger",label:i.$trans("Report")},on:{click:i.onClickReport}}):i._e(),i._v(" "),i.dynamicActions?i._l(i.dynamicActions,(function(i,s){return _("labeled-icon-button",{key:s,attrs:{"icon-name":i.iconName,label:i.label},on:{click:i.handler}})})):i._e()],2):i._e(),i._v(" "),i.chatDropdownTarget?_("chat-options-dropdown",{attrs:{target:i.chatDropdownTarget,position:i.position,"chat-options":i.chatOptions},on:{"option-selected":i.onClickChatOption,hide:i.hideChatDropdown}}):i._e(),i._v(" "),i.analysisDropdownTarget?_("analysis-options-dropdown",{attrs:{target:i.analysisDropdownTarget,position:i.position,"analysis-options":i.analysisOptions},on:{"option-selected":i.onClickAnalysisOption,hide:i.hideAnalysisDropdown}}):i._e()],1)}),[],!1,(function user_actions_injectStyles(i){this.$style=Zl.locals||Zl}),null,null),Kl=Wl.exports,Yl={name:"UserFlairStatus",props:{status:{type:String,required:!0}}},Xl={component:"user-flair-status-component"};var Ql=(0,Rr.Z)(Yl,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return i.status.length?_("div",{class:i.$style.component,domProps:{textContent:i._s(i.status)}}):i._e()}),[],!1,(function user_flair_status_injectStyles(i){this.$style=Xl.locals||Xl}),null,null),Jl=Ql.exports,ec=__webpack_require__(6269),tc={name:"Flair",props:{available:{type:Boolean,default:!0},showTheNothingFlair:{type:Boolean,default:!1},code:{type:String,default:_s.Wp.code},size:{type:String}},emits:["click"],computed:{isNothing(){return this.code===_s.Wp.code}}},nc=(0,Rr.Z)(tc,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return i.showTheNothingFlair||!i.isNothing?_("span",{class:["flair-component","flair-"+i.code,"flair-"+i.size],on:{click:function(s){return i.$emit("click",s)}}}):i._e()}),[],!1,null,null,null),rc=nc.exports;const ic="web_user_settings_edit",profile_config_routes_communityGuidelines=()=>(0,jr.b)("web_policies_community"),profile_config_routes_settings=()=>(0,jr.b)(ic),ac=(ht.Z.trans("Are you sure you want to disable this account?"),ht.Z.trans("Edit status"),ht.Z.trans("Are you sure you want to enable this account?"),ht.Z.trans("Enter a status here"),ht.Z.trans("Are you sure you want to impersonate this user?"),ht.Z.trans("Error occurred"),ht.Z.trans("Are you sure you want to mute this user?"),ht.Z.trans("Are you sure you want to remove user About section?"),ht.Z.trans("Are you sure you want to remove this user's avatar?"),ht.Z.trans("Are you sure you want to remove this user's background?"),ht.Z.trans("Are you sure you want to report user for spamming?"),ht.Z.trans("Are you sure you want to reset this user's flair?"),ht.Z.trans("Save status"),ht.Z.trans("Your status must be %len% characters or less",{"%len%":50}),ht.Z.trans("Are you sure you want to stop impersonating this user?"),ht.Z.trans("Are you sure you want to unmute this user?"),ht.Z.trans("Your post seems to not fit our <a href=%url%>Community Guidelines</a>. Repeated violations may result in your account being restricted. Thank you for helping Chess.com stay a fun and friendly place for all!",{"%url%":profile_config_routes_communityGuidelines()}),(i={})=>{(0,Ui.o)({key:al.U3.SHOW_UPGRADE_MODAL,payload:i})});var sc={props:{membership:{type:Number}},computed:{flairHref(){return(({code:i,flairMembership:s,selfIsPremium:_})=>s>=_s.p0.moderator?_s._j.about():s===_s.p0.cheater||s===_s.p0.abuser?profile_config_routes_communityGuidelines():_s.yc.includes(i)?"":_?`${profile_config_routes_settings()}#flair-modal`:_s._j.membership("flair"))({code:this.standardizedFlairCodeFromMixin,flairMembership:this.membership,selfIsPremium:(0,ar.S_)("isPremium"),selfIsModerator:(0,ar.S_)("isModerator")})},flairTooltip(){return(({code:i,flairMembership:s})=>s>=_s.p0.staff?_s.Iz.staff:s>=_s.p0.moderator?_s.Iz.moderator:s<_s.p0.basic?_s.Cz[s]:_s.yc.includes(i)?_s.Cz[_s.p0.unspecifiedClosed]:_s.Iz.showYourFlair)({code:this.standardizedFlairCodeFromMixin,flairMembership:this.membership})},shouldSeeUpgradeModal:()=>!(0,ar.S_)("isPremium"),standardizedFlairCodeFromMixin(){return this.code||this.userFlair&&this.userFlair.code||_s.Wp.code}},methods:{handleFlairClick(){this.shouldSeeUpgradeModal?ac({referral:"flair",startingSlide:"flair",title:this.$trans("Want Your Own Flair?")}):this.flairHref.length&&window.open(this.flairHref,"_blank")}}},oc={name:"UserFlairIcon",components:{Flair:rc},directives:{Tooltip:Ur.Z},mixins:[sc],props:{code:{type:String},size:{type:String,default:""}}},lc={component:"user-flair-icon-component"};var cc=(0,Rr.Z)(oc,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return i.code?_("a",{class:i.$style.component,attrs:{"aria-label":i.flairTooltip,href:i.flairHref},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),i.handleFlairClick.apply(null,arguments)}}},[_("flair",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.flairTooltip,expression:"flairTooltip"}],attrs:{code:i.code,size:i.size}})],1):i._e()}),[],!1,(function user_flair_icon_injectStyles(i){this.$style=lc.locals||lc}),null,null),uc=cc.exports,dc=__webpack_require__(69685),hc={name:"UserTagline",components:{CountryFlag:Vr,UserChessTitle:ec.Z,UserFlairIcon:uc,UserUsername:dc.Z},props:{country:{type:Object,required:!1},flairCode:{type:String},isUsernameClickable:{type:Boolean,default:!0},isDarkMode:Boolean,iconAnchorIsEnabled:{type:Boolean,default:!0},membership:{type:[Number,String],default:_s.p0.basic},notClickable:{type:Boolean,default:!1},rating:{type:Number,required:!1},title:{type:String,required:!1},url:{type:String,required:!1},usernameTheme:{type:String,default:"blue"},titleUrl:{type:String,required:!1},username:{type:String,required:!0},openProfileOnNewTab:{type:Boolean,required:!1},openTitleOnNewTab:{type:Boolean,required:!1}}},pc={component:"user-tagline-component",username:"user-tagline-username","not-clickable":"user-tagline-not-clickable",rating:"user-tagline-rating",darkMode:"user-tagline-darkMode",dark:"user-tagline-dark"};var mc=(0,Rr.Z)(hc,(function(){var i,s,_=this,T=_.$createElement,S=_._self._c||T;return S("div",{class:[_.$style.component,(i={},i[_.$style.darkMode]=_.isDarkMode,i)]},[_.title?S("user-chess-title",{attrs:{"open-new-tab":_.openTitleOnNewTab,url:_.titleUrl,title:_.title}}):_._e(),_._v(" "),S("user-username",{class:[_.$style.username,(s={},s[_.$style["not-clickable"]]=_.notClickable,s)],attrs:{"is-clickable":_.isUsernameClickable,"open-new-tab":_.openProfileOnNewTab,theme:_.isDarkMode?"dark":_.usernameTheme,url:_.url,"data-test-element":"user-tagline-username",username:_.username}}),_._v(" "),_.rating?S("span",{class:[_.$style.rating,_.$style[_.usernameTheme]]},[_._v("\n    ("+_._s(_.rating)+")\n  ")]):_._e(),_._v(" "),_.country?S("country-flag",{attrs:{code:_.country.code,name:_.country.name}}):_._e(),_._v(" "),_.flairCode||_.membership?S("user-flair-icon",{attrs:{code:_.flairCode,membership:_.membership}}):_._e(),_._v(" "),_._t("default")],2)}),[],!1,(function user_tagline_injectStyles(i){this.$style=pc.locals||pc}),null,null),fc=mc.exports,gc=(0,ma.defineComponent)({name:"UserLifetimeScore",components:{UserTagline:fc},props:{opponent:Object,username:String,lifetimeScore:{type:Object,default:()=>({win:0,lose:0,draw:0})}},computed:{opponentUrl(){var i;return(null==(i=this.opponent)?void 0:i.username)?D.Z.generate("web_member_view",{username:this.opponent.username}):null},archiveUrl(){var i;return(null==(i=this.opponent)?void 0:i.username)&&this.username?D.Z.generate("web_archive_index",{username:this.opponent.username,opponent:this.username}):null},opponentTitle(){var i,s;return(null==(i=this.opponent)?void 0:i.chessTitle)?this.opponent.chessTitle:(null==(s=this.opponent)?void 0:s.title)?this.opponent.title.toUpperCase():null}}}),vc=gc,bc={component:"user-lifetime-score-component",tagline:"user-lifetime-score-tagline",win:"user-lifetime-score-win",lose:"user-lifetime-score-lose",chevron:"user-lifetime-score-chevron"};var yc=(0,Rr.Z)(vc,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("span",{class:i.$style.win,domProps:{textContent:i._s(i.lifetimeScore.win)}}),i._v(" "),_("span",{class:i.$style.divider,domProps:{textContent:i._s("/")}}),i._v(" "),_("span",{domProps:{textContent:i._s(i.lifetimeScore.draw)}}),i._v(" "),_("span",{class:i.$style.divider,domProps:{textContent:i._s("/")}}),i._v(" "),_("span",{class:i.$style.lose,domProps:{textContent:i._s(i.lifetimeScore.lose)}}),i._v(" "),_("span",{domProps:{textContent:i._s(i.$trans("vs"))}}),i._v(" "),_("user-tagline",{class:i.$style.tagline,attrs:{title:i.opponentTitle,username:i.opponent.username,url:i.opponentUrl,"is-dark-mode":!1,"username-theme":"blue","open-profile-on-new-tab":""}}),i._v(" "),_(i.archiveUrl?"a":"span",{tag:"component",class:["icon-font-chess","chevron-right",i.$style.chevron],attrs:{href:i.archiveUrl,target:"_blank"}})],1)}),[],!1,(function user_lifetime_score_injectStyles(i){this.$style=bc.locals||bc}),null,null),_c=yc.exports,wc={name:"UserRating",components:{IconFont:Mr.Z},props:{icon:{type:String,required:!0},rating:{type:Number,required:!0}}},kc={component:"user-rating-component",icon:"user-rating-icon",rating:"user-rating-rating"};var Tc=(0,Rr.Z)(wc,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("span",{class:i.$style.component},[_("icon-font",{class:i.$style.icon,attrs:{theme:"primary",name:i.icon}}),i._v(" "),_("span",{class:i.$style.rating},[i._v("\n    "+i._s(i.rating)+"\n  ")])],1)}),[],!1,(function user_rating_injectStyles(i){this.$style=kc.locals||kc}),null,null),Sc=Tc.exports,Cc=(i=>(i.MUTE="mute",i.UNMUTE="unmute",i.WARN="warn",i))(Cc||{}),xc=__webpack_require__(57463),Ec={name:"PresenceButton",components:{V5Button:Tr.V5Button},props:{username:{type:String,required:!0},userPresence:{type:Object,required:!0},isButtonSmall:{type:Boolean,default:!1},isIconsOnly:{type:Boolean,default:!1},isShowLastOnline:{type:Boolean,default:!1},isWatchOnly:{type:Boolean,default:!1},location:{type:String,default:"N/A"}},computed:{buttonData(){const{battleLink:i,eventLink:s,gameLink:_,isOnline:T,isPlaying:S,offlineSince:C}=this.userPresence;return S?{theme:this.isIconsOnly?"":"danger",text:this.isIconsOnly?"":this.$trans("Watch"),icon:"binoculars",show:!0,href:s||_||i}:T?{theme:this.isIconsOnly?"":"primary",text:this.isIconsOnly?"":this.$trans("Challenge"),icon:"chess-board-plus",show:!this.isWatchOnly,href:D.Z.generate("web_play_new",{opponent:this.username})}:this.isShowLastOnline?{lastOnline:Ar.p6.relative(new Date(C)),show:!1}:{show:!1}}},methods:{handleClick(){const i=this.userPresence.isPlaying?"watch":"challenge",s=this.location;xc.Z.logEvent("presenceUiClick",{selection:i,location:s})}}},Pc={component:"presence-button-component",placeholder:"presence-button-placeholder",visible:"presence-button-visible",hidden:"presence-button-hidden",narrow:"presence-button-narrow",watchIconOnly:"presence-button-watchIconOnly",challengeIconOnly:"presence-button-challengeIconOnly"};var Ac=(0,Rr.Z)(Ec,(function(){var i,s,_,T,S=this,C=S.$createElement,P=S._self._c||C;return P("div",{class:[S.$style.component,(i={},i[S.$style.narrow]=S.isIconsOnly,i),(s={},s[S.$style.visible]=S.buttonData.show,s),(_={},_[S.$style.hidden]=!S.buttonData.show,_)]},[S.buttonData.show?P("v5-button",{class:(T={staffGreen:"primary"===S.buttonData.theme},T[S.$style.challengeIconOnly]=S.isIconsOnly&&S.userPresence.isOnline&&!S.userPresence.isPlaying,T[S.$style.watchIconOnly]=S.isIconsOnly&&S.userPresence.isPlaying,T),attrs:{href:S.buttonData.href,size:S.isButtonSmall?"x-small":"small",theme:S.buttonData.theme},on:{click:function(i){return S.handleClick(i)}}},[P("span",{domProps:{textContent:S._s(S.buttonData.text)}}),S._v(" "),P("span",{class:["icon-font-chess ui_v5-button-icon",S.buttonData.icon]})]):S.isShowLastOnline&&S.buttonData.lastOnline?P("div",{domProps:{textContent:S._s(S.buttonData.lastOnline)}}):P("div",{class:S.$style.placeholder})],1)}),[],!1,(function presence_button_injectStyles(i){this.$style=Pc.locals||Pc}),null,null),Oc=Ac.exports,Mc={name:"UserPopover",components:{LoaderThreeBounce:sl.Z,UserAvatar:us,UserFlairStatus:Jl,UserRating:Sc,UserTagline:fc,UserActions:Kl,UserLifetimeScore:_c,AdminActions:ml,V5Button:Tr.V5Button,V5Input:Tr.V5Input,PresenceButton:Oc},directives:{Tooltip:Ur.Z,ClickOutside:ur.Z},props:{avatar:{type:String,default:""},ratings:{type:Array,required:!0},chessTitle:{type:String,required:!1},country:{type:Object,required:!1},flair:{type:Object,default:()=>({code:"",status:""})},isEnabled:{type:Boolean},isGuest:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},joinedDate:String,lastLoginDate:String,membership:{type:Number,required:!1},onlineStatus:{type:[Boolean,String],required:!1},usernameElementRef:{type:HTMLElement,required:!0},username:{type:String,required:!1},isFideVerified:{type:Boolean,default:!1},canAddFriend:Boolean,canBlockUser:Boolean,canUseGlobalChat:Boolean,canReportUser:Boolean,canCreateChallenge:Boolean,canFollowUser:Boolean,canGiftMembership:Boolean,canRemoveFriend:Boolean,canSendMessage:Boolean,canInviteToChat:Boolean,canSendTrophy:Boolean,canUnblockUser:Boolean,canUnfollowUser:Boolean,loggedAsAnother:Boolean,canMuteUser:{type:Boolean,default:!1},canObserveGame:{type:Boolean,default:!1},isBughousePartner:{type:Boolean,default:!1},shouldShowModeration:{type:Boolean,default:!1},challengeUrl:String,canCancelFriendRequest:{type:Boolean,default:!1},canDeclineFriendRequest:{type:Boolean,default:!1},canAcceptFriendRequest:{type:Boolean,default:!1},archiveUrl:String,chatOptions:{type:Array,default:()=>[]},canInviteToAnalysis:{type:Boolean,default:!1},analysisOptions:{type:Array,default:()=>[]},canModerate:{type:Boolean,default:!1},clientName:String,canWarnOnChat:Boolean,canModerateOnChat:Boolean,showBughousePartner:{type:Boolean,default:!1},openProfileOnNewTab:{type:Boolean,required:!1},membershipUrl:String,dynamicActions:Array,clubChatIdForModeratorActions:String,popoverPosition:{type:Object,default:null},presenceDetails:{type:Object,default:null},showProfileUrls:{type:Boolean,default:!0},userAlreadyMutedOnChat:Boolean,uuid:String,leagueCode:String,leagueDivision:String,leagueName:String,opponent:Object,lifetimeScore:Object},emits:["chat-kick-user","chat-mute-user","chat-warn-user","ban-user","kick-user","mute-user","warn-user","block-user","remove-friend","user-popover-hide","request-chat","invite-analysis","bughouse-unpartner","bughouse-partner","observe-user","show-trophy","show-report","unblock-user","unfollow-user","follow-user","accept-friend-request","start-direct-chat","show-archive","show-gift","decline-friend-request","cancel-friend-request","add-friend","send-message","create-challenge"],data:()=>({clubChatModeratorMessage:"",isLoggedIn:(0,ar.jl)(),offset:12,translations:_s.Iz,confirmMessage:null,confirmCallback:null,position:{x:0,y:0,top:0,left:0}}),computed:{adminActionsIsVisible(){return this.canModerate||this.canWarnOnChat||this.canModerateOnChat||this.clubChatIdForModeratorActions},formatedJoinedDate(){return(0,ar.jl)()?this.joinedDate:Ar.p6.relative(this.joinedDate)},formatedLastLoginDate(){return(0,ar.jl)()?this.presenceLastLoginDate:Ar.p6.relative(this.presenceLastLoginDate)},memberUrl(){return D.Z.generate("web_member_view",{username:this.username})},fideUrl:()=>D.Z.generate("web_verification_index"),ratingsToShow(){return this.ratings.slice(0,3)},isConfirmVisible(){return!!this.confirmMessage&&!!this.confirmCallback},isFideEnabledAndVerified(){return this.isFideVerified},isLeaguePlayer(){return this.leagueCode&&this.leagueDivision&&this.username},showOfflineText(){return this.presenceDetails&&!this.presenceDetails.isOnline},presenceLastLoginDate(){var i;return!(null==(i=this.presenceDetails)?void 0:i.offlineSince)||this.presenceDetails.isOfflineStatusUncertain?this.lastLoginDate||"":Ar.p6.relative(new Date(this.presenceDetails.offlineSince))},inlineStyles(){return setPopoverPosition(this.position)},userDivision(){return _s._j.userDivision({league:this.leagueCode,division:this.leagueDivision})}},mounted(){this.popoverPosition?this.position=this.popoverPosition:this.updatePopoverPosition()},methods:{onMouseEnter(){clearTimeout(this.hideTimeout)},onMouseLeave(){this.hideTimeout=setTimeout((()=>{this.hidePopover()}),500)},hidePopover(){this.$emit("user-popover-hide")},onConfirmYes(){this.confirmCallback&&this.confirmCallback(),this.onConfirmNo()},onConfirmNo(){this.confirmMessage=null,this.confirmCallback=null},onClickRemoveFriend(){this.confirmMessage=this.$trans("Are you sure you want to remove this friend from your list?"),this.confirmCallback=()=>this.$emit("remove-friend")},onClickBlockUser(){this.confirmMessage=this.$trans("Are you sure you want to block this user?"),this.confirmCallback=()=>this.$emit("block-user")},onClickWarn(){this.confirmMessage=this.$trans("Are you sure you want to warn this user?"),this.confirmCallback=()=>this.$emit("warn-user")},onClickMute(){this.confirmMessage=this.$trans("Are you sure you want to mute this user?"),this.confirmCallback=()=>this.$emit("mute-user")},onClickKick(){this.confirmMessage=this.$trans("Are you sure you want to kick this user?"),this.confirmCallback=()=>this.$emit("kick-user")},onClickBan(){this.confirmMessage=this.$trans("Are you sure you want to ban this user?"),this.confirmCallback=()=>this.$emit("ban-user")},onClickChatWarn(){this.confirmMessage=this.$trans("Are you sure you want to warn this user?"),this.clubChatIdForModeratorActions?this.confirmCallback=this.onClubChatAction(Cc.WARN):this.confirmCallback=()=>this.$emit("chat-warn-user")},onClickChatMute(){this.confirmMessage=this.$trans("Are you sure you want to mute this user?"),this.clubChatIdForModeratorActions?this.confirmCallback=this.onClubChatAction(Cc.MUTE):this.confirmCallback=()=>this.$emit("chat-mute-user")},onClickChatMuteRemoveMessages(){this.confirmMessage=this.$trans("Are you sure you want to mute this user?"),this.confirmCallback=this.onClubChatAction(Cc.MUTE,!0)},onClickChatUnMute(){this.confirmMessage=this.$trans("Are you sure you want to unmute this user?"),this.confirmCallback=this.onClubChatAction(Cc.UNMUTE)},onClickChatKick(){this.confirmMessage=this.$trans("Are you sure you want to kick this user?"),this.clubChatIdForModeratorActions||(this.confirmCallback=()=>this.$emit("chat-kick-user"))},onClubChatAction(i,s){const _={chatId:this.clubChatIdForModeratorActions,key:al.U3.CLUB_CHAT_MODERATOR_ACTION,type:i,userId:this.uuid};return s&&(_.hideMessages=!0),()=>{_.message=this.clubChatModeratorMessage,(0,Ui.o)(_)}},updatePopoverPosition(){if(!this.usernameElementRef||!this.$refs.userPopover)return;const i=this.usernameElementRef.getBoundingClientRect(),s=this.$refs.userPopover.offsetHeight;this.position=(0,ws.MD)(i,s)}}},zc=Mc,Ic={popover:"user-popover-popover",bottom:"user-popover-bottom",top:"user-popover-top",component:"user-popover-component","avatar-placeholder":"user-popover-avatar-placeholder",profile:"user-popover-profile",meta:"user-popover-meta",info:"user-popover-info",onlive:"user-popover-onlive",online:"user-popover-online",status:"user-popover-status",details:"user-popover-details",secondary:"user-popover-secondary",loader:"user-popover-loader",actions:"user-popover-actions",ratings:"user-popover-ratings",confirm:"user-popover-confirm","moderator-message":"user-popover-moderator-message",badge:"user-popover-badge"};var Lc=(0,Rr.Z)(zc,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:i.onMouseLeave,expression:"onMouseLeave"}],ref:"userPopover",class:[i.$style.popover,i.$style[i.position.x],i.$style[i.position.y]],style:i.inlineStyles,on:{mouseenter:i.onMouseEnter,mouseleave:i.onMouseLeave}},[_("div",{class:i.$style.component},[_("div",{class:i.$style.profile},[_("div",{class:i.$style.meta},[i.username?_("user-avatar",{attrs:{image:i.avatar,"presence-data":i.presenceDetails,url:i.showProfileUrls?i.memberUrl:null}}):i._e(),i._v(" "),i.username?i._e():_("div",{class:i.$style["avatar-placeholder"]}),i._v(" "),i.username?_("div",{class:i.$style.info},[_("user-tagline",{attrs:{"username-theme":"blue",country:i.country,"flair-code":i.flair?i.flair.code:"",membership:i.membership,"not-clickable":!i.showProfileUrls,"open-profile-on-new-tab":i.openProfileOnNewTab,title:i.chessTitle,url:i.showProfileUrls?i.memberUrl:null,username:i.username}}),i._v(" "),i.isEnabled?_("user-flair-status",{attrs:{status:i.flair?i.flair.status:""}}):i._e(),i._v(" "),_("div",{class:i.$style.ratings},i._l(i.ratingsToShow,(function(i){return _("user-rating",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.label,expression:"rating.label"}],key:i.type,attrs:{icon:i.icon,rating:i.value}})})),1)],1):i._e(),i._v(" "),i.isLeaguePlayer?_("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.$trans("%leagueName% Division",{"%leagueName%":i.leagueName}),expression:"$trans('%leagueName% Division', { '%leagueName%': leagueName })"}],class:i.$style.badge,attrs:{href:i.userDivision}},[_("img",{attrs:{src:"/bundles/web/images/leagues/badges/"+i.leagueCode+".svg",width:"38",height:"28"}})]):i._e(),i._v(" "),i.isFideEnabledAndVerified?_("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.$trans("Verified"),expression:"$trans('Verified')"}],class:i.$style.badge,attrs:{href:i.fideUrl}},[_("img",{attrs:{alt:i.$trans("Verified"),width:"30",height:"28",src:"/bundles/web/images/color-icons/verified.svg"}})]):i._e(),i._v(" "),i.username?i._e():_("div",{class:i.$style.info},[_("loader-three-bounce",{directives:[{name:"show",rawName:"v-show",value:i.isLoading,expression:"isLoading"}],class:i.$style.loader,attrs:{size:40}})],1)],1),i._v(" "),i.joinedDate&&i.username?_("div",{class:i.$style.secondary},[_("div",{domProps:{textContent:i._s(i.translations.joinedDate(i.formatedJoinedDate))}}),i._v(" "),_("div",{class:i.$style.status},[i.presenceDetails&&i.loggedAsAnother?_("presence-button",{attrs:{location:"user-popover",username:i.username,"user-presence":i.presenceDetails}}):i._e(),i._v(" "),i.presenceLastLoginDate&&i.showOfflineText?_("div",{domProps:{textContent:i._s(i.translations.lastOnline(i.formatedLastLoginDate))}}):i._e()],1)]):i._e(),i._v(" "),i.username?i._e():_("div",{class:i.$style.secondary}),i._v(" "),i.lifetimeScore&&i.opponent&&i.username?_("user-lifetime-score",{attrs:{username:i.username,opponent:i.opponent,"lifetime-score":i.lifetimeScore}}):i._e()],1),i._v(" "),i.adminActionsIsVisible?_("admin-actions",{attrs:{"can-moderate":i.canModerate,"client-name":i.clientName,"can-mute-on-chat":Boolean(i.clubChatIdForModeratorActions),"can-warn-on-chat":i.canWarnOnChat||Boolean(i.clubChatIdForModeratorActions),"can-moderate-on-chat":i.canModerateOnChat,"user-already-muted-on-chat":i.userAlreadyMutedOnChat},on:{"warn-user":i.onClickWarn,"mute-user":i.onClickMute,"kick-user":i.onClickKick,"ban-user":i.onClickBan,"chat-warn-user":i.onClickChatWarn,"chat-mute-user":i.onClickChatMute,"chat-unmute-user":i.onClickChatUnMute,"chat-mute-user-remove-messages":i.onClickChatMuteRemoveMessages,"chat-kick-user":i.onClickChatKick}}):i._e(),i._v(" "),i.isLoggedIn&&!i.isGuest?_("div",{class:i.$style.actions},[i.username?_("user-actions",{attrs:{avatar:i.avatar,"can-add-friend":i.canAddFriend,"can-block-user":i.canBlockUser,"can-create-challenge":i.canCreateChallenge,"can-follow-user":i.canFollowUser,"can-gift-membership":i.canGiftMembership,"can-remove-friend":i.canRemoveFriend,"can-report-user":i.canReportUser,"can-send-message":i.canSendMessage,"can-invite-to-chat":i.canInviteToChat,"can-send-trophy":i.canSendTrophy,"can-unblock-user":i.canUnblockUser,"can-unfollow-user":i.canUnfollowUser,"can-use-global-chat":i.canUseGlobalChat,"can-cancel-friend-request":i.canCancelFriendRequest,"can-decline-friend-request":i.canDeclineFriendRequest,"can-accept-friend-request":i.canAcceptFriendRequest,"dynamic-actions":i.dynamicActions,"logged-as-another":i.loggedAsAnother,username:i.username,"can-observe-game":i.canObserveGame,"is-bughouse-partner":i.isBughousePartner,"challenge-url":i.challengeUrl,"archive-url":i.archiveUrl,"chat-options":i.chatOptions,position:i.position,"can-invite-to-analysis":i.canInviteToAnalysis,"analysis-options":i.analysisOptions,"is-enabled":i.isEnabled,"is-confirm-visible":i.isConfirmVisible,"show-bughouse-partner":i.showBughousePartner,"membership-url":i.membershipUrl},on:{"all-actions-shown":i.updatePopoverPosition,"remove-friend":i.onClickRemoveFriend,"block-user":i.onClickBlockUser,"user-popover-hide":i.hidePopover,"create-challenge":function(s){return i.$emit("create-challenge",s)},"send-message":function(s){return i.$emit("send-message",s)},"add-friend":function(s){return i.$emit("add-friend",s)},"cancel-friend-request":function(s){return i.$emit("cancel-friend-request",s)},"decline-friend-request":function(s){return i.$emit("decline-friend-request",s)},"show-gift":function(s){return i.$emit("show-gift",s)},"show-archive":function(s){return i.$emit("show-archive",s)},"start-direct-chat":function(s){return i.$emit("start-direct-chat")},"mute-user":function(s){return i.$emit("mute-user",s)},"accept-friend-request":function(s){return i.$emit("accept-friend-request",s)},"follow-user":function(s){return i.$emit("follow-user",s)},"unfollow-user":function(s){return i.$emit("unfollow-user",s)},"unblock-user":function(s){return i.$emit("unblock-user",s)},"show-report":function(s){return i.$emit("show-report",s)},"show-trophy":function(s){return i.$emit("show-trophy",s)},"observe-user":function(s){return i.$emit("observe-user",s)},"bughouse-partner":function(s){return i.$emit("bughouse-partner",s)},"bughouse-unpartner":function(s){return i.$emit("bughouse-unpartner",s)},"request-chat":function(s){return i.$emit("request-chat",s)},"invite-analysis":function(s){return i.$emit("invite-analysis",s)}}}):i._e()],1):i._e()],1),i._v(" "),i.isConfirmVisible?_("div",{class:i.$style.confirm},[_("p",{domProps:{innerHTML:i._s(i.confirmMessage)}}),i._v(" "),i.clubChatIdForModeratorActions&&!i.userAlreadyMutedOnChat?_("p",[i._v("\n      "+i._s(i.$trans("Message to user:"))+"\n      "),_("v5-input",{class:i.$style["moderator-message"],attrs:{"force-theme":"light"},model:{value:i.clubChatModeratorMessage,callback:function(s){i.clubChatModeratorMessage=s},expression:"clubChatModeratorMessage"}})],1):i._e(),i._v(" "),_("div",[_("v5-button",{attrs:{size:"x-small",theme:"basic-light"},domProps:{textContent:i._s(i.$trans("No"))},on:{click:i.onConfirmNo}}),i._v(" "),_("v5-button",{attrs:{size:"x-small",theme:"primary"},domProps:{textContent:i._s(i.$trans("Yes"))},on:{click:i.onConfirmYes}})],1)]):i._e()])}),[],!1,(function user_popover_injectStyles(i){this.$style=Ic.locals||Ic}),null,null),Rc=Lc.exports,Nc={namespaced:!0,mutations:{newMessage:(i,s)=>{i.message=s}},state:{message:null}};const htmlEncode=i=>{if(!i)return i;const s=[60,62];let _=i.length;const T=[];for(;_--;){const S=i[_].charCodeAt();s.indexOf(S)>-1?T[_]=`&#${S};`:T[_]=i[_]}return T.join("")};var Dc={getUserTrophies:({commit:i},s)=>{const _={username:s.username,trophyType:s.trophyType};return ca.Z.get(D.Z.generate("web_member_callback_trophy_list",_)).then((s=>{if(s.data)return i("setUserTrophies",s.data),kr.Z.set("user_trophies",s.data,60),s.data})).catch((()=>{const i=Vi.V5.error;(0,Gi.el)({type:i,message:Vi.R0.badRequest})}))},getAllTrophies:({commit:i,state:s},_)=>{i("setFinishedLoading",!1);const T=Object.assign({},{type:s.trophyType},_);return ca.Z.get(D.Z.generate("web_callback_get_trophies",T)).then((s=>{s.data&&i("setAllTrophies",s.data)})).catch((()=>{const i=Vi.V5.error;(0,Gi.el)({type:i,message:Vi.R0.badRequest})}))},getTrophyShowcase:({commit:i},s)=>ca.Z.get(D.Z.generate("web_user_trophy_showcase_callback",{username:s})).then((s=>{s.data&&i("setUserShowcaseTrophies",s.data)})).catch((()=>{const i=Vi.V5.error;(0,Gi.el)({type:i,message:Vi.R0.badRequest})})),getUserTrophyCount:({commit:i},s)=>ca.Z.get(D.Z.generate("web_callback_count_user_trophies",{username:s})).then((s=>{s.data&&i("setUserTrophiesCount",s.data.count)})).catch((()=>{const i=Vi.V5.error;(0,Gi.el)({type:i,message:Vi.R0.badRequest})})),featureTrophy:({dispatch:i},{trophyId:s,featured:_,username:T})=>{const S={id:s,featured:_};return ca.Z.post(D.Z.generate("web_feature_trophy_callback",S)).then((s=>{const _=Vi.V5.success,S=(i=>{var s,_;return null!=(_=null==(s=i.data)?void 0:s.message)?_:Vi.R0.badRequest})(s);(0,Gi.el)({type:_,message:S}),i("getTrophyShowcase",T)})).catch((()=>{const i=Vi.V5.error,s=ht.Z.trans("Error featuring trophies. Please try again later.");(0,Gi.el)({type:i,message:s})}))},sendTrophyToUser:({commit:i,state:s})=>{const _={username:s.recipientUsername,trophyId:s.selectedTrophy.id,message:htmlEncode(s.message)};return"number"==typeof s.gameId&&(_[s.isLiveGame?"gameLiveId":"gameId"]=s.gameId),i("disableSendButton",!0),ca.Z.post(D.Z.generate("web_award_trophy_callback",_)).then((()=>{i("disableSendButton",!1)})).catch((s=>(i("setErrorMessage",s.response.data.message),i("disableSendButton",!1),Promise.reject(s))))}},jc={namespaced:!0,actions:Dc,mutations:{disableSendButton:(i,s)=>{i.disableSendButton=s},setUserTrophies:(i,s)=>{i.userTrophies=s},setAllTrophies:(i,s)=>{i.trophies=s.data,i.meta=s.meta,i.allTrophiesToGive=s.data,i.finishedLoadingTrophies=!0},setErrorMessage:(i,s)=>{i.errorMessage=s},setFinishedLoading:(i,s)=>{i.finishedLoadingTrophies=s},setGameId:(i,s)=>{i.gameId=s},setIsLiveGame:(i,s)=>{i.isLiveGame=s},setMessage:(i,s)=>{i.message=s},setModalState:(i,s)=>{i.modalState=s},setRecipientIsFriend:(i,s)=>{i.recipientIsFriend=s},setRecipientUsername:(i,s)=>{i.recipientUsername=s},setSelectedTrophy:(i,s)=>{i.selectedTrophy=s},setTrophyType:(i,s)=>{i.trophyType=s},setUserShowcaseTrophies:(i,s)=>{i.hideShowcase=0===s.length,i.userShowcaseTrophies=s},setUserTrophiesCount:(i,s)=>{i.userTrophyCount=s}},state:{allTrophiesToGive:[],disableSendButton:!1,errorMessage:"",finishedLoadingTrophies:!1,gameId:null,hideShowcase:!1,isLiveGame:!1,message:"",meta:{currentPage:1,morePages:!1},recipientIsFriend:!1,modalState:__webpack_require__(2468).Z.modalStates.select,recipientUsername:null,selectedTrophy:null,trophies:[],trophyType:"social",userShowcaseTrophies:[],userTrophies:[],userTrophyCount:0}},Bc=(Object.create,Object.defineProperty),$c=Object.defineProperties,Uc=(Object.getOwnPropertyDescriptor,Object.getOwnPropertyDescriptors),Fc=(Object.getOwnPropertyNames,Object.getOwnPropertySymbols),Hc=(Object.getPrototypeOf,Object.prototype.hasOwnProperty),qc=Object.prototype.propertyIsEnumerable,user_popovervue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?Bc(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,user_popovervue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))Hc.call(s,_)&&user_popovervue_type_script_lang_js_defNormalProp(i,_,s[_]);if(Fc)for(var _ of Fc(s))qc.call(s,_)&&user_popovervue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},user_popovervue_type_script_lang_js_spreadProps=(i,s)=>$c(i,Uc(s)),Vc={name:"UserPopoverWidget",components:{giftMembershipModal:()=>({component:__webpack_require__.e(614).then(__webpack_require__.bind(__webpack_require__,21422))}),UserReportModal:()=>({component:__webpack_require__.e(210).then(__webpack_require__.bind(__webpack_require__,14390))}),UserPopover:Rc,TrophyPopover:()=>({component:__webpack_require__.e(284).then(__webpack_require__.bind(__webpack_require__,32099))})},data:()=>({clubChatIdForModeratorActions:!1,clickListener:null,dynamicActions:null,isLoading:!1,showGiftMembershipModal:!1,isUserReportModalVisible:!1,isChallengePopoverVisible:!1,isTrophyPopoverVisible:!1,scrollContainer:null,elementRef:null,userAlreadyMutedOnChat:!1}),computed:user_popovervue_type_script_lang_js_spreadProps(user_popovervue_type_script_lang_js_spreadValues({},(0,dr.mapState)({currentUser:i=>i.user,currentUserIsGuest:i=>i.user.isGuest,show:i=>i.userPopover.show,user:i=>i.userPopover.user,username:i=>i.user.username,lifetimeScore:i=>i.userPopover.lifetimeScore,position:i=>i.userPopover.position,presenceDetails:i=>i.userPopover.presenceDetails})),{leagueData(){var i;const s={leagueCode:"",leagueDivision:"",leagueName:""},{isOptedIn:_,division:T}=null!=(i=this.user.userLeagueData)?i:{};return _&&T&&Object.assign(s,{leagueCode:T.league.code,leagueDivision:T.name.slice(1),leagueName:T.league.name}),s},ratings(){const{bestRating:i,bestRatingType:s,topPuzzleRushScore:_}=this.user,T=[{type:s,icon:s,value:i}];return _&&T.push({type:"puzzle",icon:"fire-puzzle",value:_}),T},canAddFriend(){return this.loggedAsAnother&&!this.user.areFriends&&!this.user.isFriendRequestFromUserExists&&!this.user.isFriendRequestExists&&this.user.isEnabled},canBlockUser(){return this.loggedAsAnother&&!this.user.areFriends&&!this.user.isBlocked&&this.user.isEnabled&&this.user.membership&&this.user.membership.level<_s.p0.moderator},canUseGlobalChat(){return this.loggedAsAnother&&this.user.isEnabled},canCreateChallenge(){return this.loggedAsAnother&&this.user.isEnabled},canFollowUser(){return this.loggedAsAnother&&!this.user.isTracked&&this.user.isEnabled},canGiftMembership(){return this.user.canReceiveGiftMembership&&this.user.isEnabled},canRemoveFriend(){return this.loggedAsAnother&&this.user.areFriends},canReportUser(){return this.loggedAsAnother&&!this.user.isModerator&&!this.user.isStaff},canSendMessage(){return this.loggedAsAnother&&this.user.isMessageable&&this.user.isEnabled},canSendTrophy(){return this.canSendMessage&&this.user.isEnabled},canUnblockUser(){return this.loggedAsAnother&&this.user.isBlocked&&this.user.isEnabled},canUnfollowUser(){return this.loggedAsAnother&&this.user.isTracked&&this.user.isEnabled},hasInboundFriendRequest(){return this.loggedAsAnother&&this.user.isFriendRequestFromUserExists},hasOutboundFriendRequest(){return this.loggedAsAnother&&this.user.isFriendRequestExists},canCancelFriendRequest(){return this.hasOutboundFriendRequest&&!this.hasInboundFriendRequest},canAcceptFriendRequest(){return this.hasInboundFriendRequest},loggedAsAnother(){return this.username&&this.username!==this.user.username},membershipNumber(){return(0,ar.yO)(this.user.membership?this.user.membership.level:null,this.user.isEnabled)},inlineStyles(){return setPopoverPosition(this.position)},areFriends(){return this.user.areFriends},isGuest(){return this.currentUserIsGuest||this.user.isGuest}}),created(){(0,qi.X)({modalMessages:Nc,trophies:jc})},mounted(){this.scrollContainer=window,O.Z.on("userPopover/show",(({actions:i,clubChatIdForModeratorActions:s,userAlreadyMutedOnChat:_,username:T},S)=>{if(this.dynamicActions=i,this.clubChatIdForModeratorActions=s,this.userAlreadyMutedOnChat=_,this.$store.dispatch("userPopover/fetchUserPopover",T).then((()=>{this.isLoading=!1})),this.$store.commit("userPopover/resetUser"),null==T)return;this.clickListener=document.addEventListener("click",(i=>{(this.user.userNotExist||this.$refs.userPopover&&i.target!==this.$refs.userPopover.$el&&!this.$refs.userPopover.$el.contains(i.target)&&!document.getElementById(_s.xL.USER_POPOVER_CONTAINER).contains(i.target))&&this.hideUserPopup()}),!0),setTimeout((()=>{this.user.username||this.user.userNotExist||(this.isLoading=!0)}),500),this.scrollContainer.addEventListener("scroll",this.hideUserPopup),this.elementRef=S;const C=(0,ws.MD)(S.getBoundingClientRect());this.$store.commit("userPopover/setPosition",C),this.$store.commit("userPopover/showUserPopover")})),O.Z.on("userPopover/hide",this.hideUserPopup)},beforeDestroy(){this.removeListeners()},methods:user_popovervue_type_script_lang_js_spreadProps(user_popovervue_type_script_lang_js_spreadValues({},(0,dr.mapMutations)({hideUserPopover:"userPopover/hideUserPopover",setRecipientIsFriend:"trophies/setRecipientIsFriend",setRecipientUsername:"trophies/setRecipientUsername"})),{onChallenge({username:i}){window.location=D.Z.generate("web_play_new",{opponent:i})},onMessage(i){this.hideUserPopup(),window.postMessage({event:"SHOW_MESSAGE_MODAL",user:{avatar_url:i.avatar,username:i.username}},window.location.origin)},onTrophy(i){this.hideUserPopup(),this.setRecipientUsername(i.username),this.isTrophyPopoverVisible=!0},acceptFriendRequest(){this.$store.dispatch("user/approveFriendRequest",this.user.userId).then(this.reload)},addFriend(){this.$store.dispatch("user/addFriend",this.user.userId).then(this.reload)},blockUser(){this.$store.dispatch("user/blockUser",this.user.username).then(this.reload)},cancelFriendRequest(){this.$store.dispatch("user/cancelFriendRequest",this.user.userId).then(this.reload)},deleteFriend(){this.$store.dispatch("user/deleteFriend",this.user.userId).then(this.reload)},hideUserPopup(){this.setRecipientIsFriend(this.areFriends),this.hideUserPopover(),this.removeListeners(),this.isLoading=!1},reload(){return this.$store.dispatch("userPopover/fetchUserPopover",this.user.username)},removeListeners(){document.removeEventListener("click",this.clickListener,!0),this.scrollContainer.removeEventListener("scroll",this.hideUserPopup)},trackUser(){this.$store.dispatch("user/trackUser",this.user.username).then(this.reload)},unblockUser(){this.$store.dispatch("user/unblockUser",this.user.username).then(this.reload)},untrackUser(){this.$store.dispatch("user/untrackUser",this.user.username).then(this.reload)},showGiftModal(){this.hideUserPopup(),this.showGiftMembershipModal=!0},hideGiftMembershipModal(){this.showGiftMembershipModal=!1},showReportModal(){this.hideUserPopup(),this.isUserReportModalVisible=!0},hideUserReportModal(){this.isUserReportModalVisible=!1},hideChallengePopover(){this.isChallengePopoverVisible=!1},hideTrophyPopover(){this.isTrophyPopoverVisible=!1},showArchive(i){window.location.href=D.Z.generate("web_archive_index",{username:i.username})},startDirectChat(){const i=al.U3.START_DIRECT_CHAT,s={avatarUrl:this.user.avatarUrl,id:this.user.uuid,username:this.user.username};window.postMessage({key:i,payload:s},window.location.origin)}})},Gc=Vc,Zc={"placeholder-popover":"user-popover-placeholder-popover",bottom:"user-popover-bottom",top:"user-popover-top","placeholder-component":"user-popover-placeholder-component","placeholder-profile":"user-popover-placeholder-profile","placeholder-avatar":"user-popover-placeholder-avatar","placeholder-info":"user-popover-placeholder-info"};var Wc=(0,Rr.Z)(Gc,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",[i.user.userNotExist?i._e():_("div",{attrs:{id:"user-popover"}},[i.show?_("user-popover",{ref:"userPopover",attrs:{"dynamic-actions":i.dynamicActions,avatar:i.user.avatarUrl,"is-fide-verified":i.user.isFideVerified,"can-add-friend":i.canAddFriend,"can-block-user":i.canBlockUser,"can-create-challenge":i.canCreateChallenge,"can-follow-user":i.canFollowUser,"can-gift-membership":i.canGiftMembership,"can-remove-friend":i.canRemoveFriend,"can-report-user":i.canReportUser,"can-send-message":i.canSendMessage,"can-send-trophy":i.canSendTrophy,"can-unblock-user":i.canUnblockUser,"can-unfollow-user":i.canUnfollowUser,"can-use-global-chat":i.canUseGlobalChat,"can-cancel-friend-request":i.canCancelFriendRequest,"can-accept-friend-request":i.canAcceptFriendRequest,"chess-title":i.user.chessTitle,country:{name:i.user.countryName,code:i.user.countryId},flair:i.user.flair,"club-chat-id-for-moderator-actions":i.clubChatIdForModeratorActions,"is-enabled":i.user.isEnabled,"is-guest":i.isGuest,"is-loading":i.isLoading,"joined-date":i.user.joinDate,"last-login-date":i.user.lastLoginDate,"logged-as-another":i.loggedAsAnother,membership:i.membershipNumber,"popover-position":i.position,"presence-details":i.presenceDetails,ratings:i.ratings,username:i.user.username,"username-element-ref":i.elementRef,"user-already-muted-on-chat":i.userAlreadyMutedOnChat,uuid:i.user.uuid,"league-code":i.leagueData.leagueCode,"league-division":i.leagueData.leagueDivision,"league-name":i.leagueData.leagueName,"lifetime-score":i.lifetimeScore,opponent:i.currentUser},on:{"accept-friend-request":i.acceptFriendRequest,"add-friend":i.addFriend,"block-user":i.blockUser,"cancel-friend-request":i.cancelFriendRequest,"create-challenge":i.onChallenge,"follow-user":i.trackUser,"remove-friend":i.deleteFriend,"send-message":i.onMessage,"show-archive":i.showArchive,"show-gift":i.showGiftModal,"show-report":i.showReportModal,"show-trophy":i.onTrophy,"start-direct-chat":i.startDirectChat,"unblock-user":i.unblockUser,"unfollow-user":i.untrackUser,"user-popover-hide":i.hideUserPopup}}):i._e(),i._v(" "),i.isUserReportModalVisible?_("user-report-modal",{attrs:{username:i.user.username},on:{"modal-did-hide":i.hideUserReportModal}}):i._e(),i._v(" "),i.showGiftMembershipModal?_("gift-membership-modal",{attrs:{"receiver-username":i.user.username,"receiver-id":i.user.userId,"sender-username":i.username},on:{"hide-modal":i.hideGiftMembershipModal}}):i._e(),i._v(" "),i.isTrophyPopoverVisible?_("trophy-popover",{on:{hide:i.hideTrophyPopover}}):i._e()],1),i._v(" "),i.user.userNotExist&&i.show?_("div",{class:[i.$style["placeholder-popover"],i.$style[i.position.x],i.$style[i.position.y]],style:i.inlineStyles},[_("div",{class:i.$style["placeholder-component"]},[_("div",{class:i.$style["placeholder-profile"]},[_("div",{class:i.$style["placeholder-avatar"]}),i._v(" "),_("div",{class:i.$style["placeholder-info"],domProps:{textContent:i._s(i.$trans("Member name does not exist"))}})])])]):i._e()])}),[],!1,(function user_user_popover_injectStyles(i){this.$style=Zc.locals||Zc}),null,null),Kc=Wc.exports;(0,qi.X)({user:Bo,userPopover:il});const Yc=(0,ir.Z)({userPopover:{component:Kc,el:"#user-popover",store:st.default}}),Xc=window;let Qc,Jc=0;const documentClickListener=i=>{const s=document.getElementById("userPopover");if(!s||i.target!==s&&!s.contains(i.target)){document.removeEventListener("click",documentClickListener,!0);const s=!Qc||i.target!==Qc&&!Qc.contains(i.target),_=null===Qc.getAttribute("href");s?Jc=0:_&&setTimeout((()=>{Jc=0}),0)}},documentScrollListener=()=>{Xc.removeEventListener("scroll",documentScrollListener),Jc=0},directiveClickListener=i=>{Qc=i.target,0===Jc&&(Jc+=1,Yc.createInstance("userPopover"),O.Z.emit("userPopover/show",i.currentTarget.userPopoverProps,i.target),i.preventDefault(),document.addEventListener("click",documentClickListener,!0),Xc.addEventListener("scroll",documentScrollListener))},normalizeProps=i=>"string"==typeof i?{username:i}:i;var eu={bind:(i,s)=>{if(!s.value)return!1;i.userPopoverProps=normalizeProps(s.value),i.addEventListener("click",directiveClickListener)},unbind:i=>{i.removeEventListener("click",directiveClickListener)},update:(i,s)=>{if(!s.value)return!1;const _=normalizeProps(s.value);i.userPopoverProps.username=_.username,_.actions&&i.userPopoverProps.actions.splice(0,_.actions.length,..._.actions)}};function create_user_popover(i,s=!1){return function multivue(i,s,_,T,S){const C=get_array_of_elements_getArrayOfElements(i),P=[];let O={};if(0===C.length)return P;for(const M of C){let i=!0;"function"==typeof _&&(O=_(M)),T&&(M.dataset[T]?i=!1:M.dataset[T]=!0);const C={el:M};if(S&&(C.store=S),i){const i=Object.assign(C,s,{propsData:O});P.push(new Dr.default(i))}}return P}(s?i:`.${i}`,{directives:{UserPopover:eu}},null,"userPopoverDirective")}var tu={name:"CommentPostBody",mixins:[po],props:{body:{type:String,required:!0},id:{type:Number,required:!0}},computed:{domId(){return`post-${this.id}`}},mounted(){initDiagramViewer(),hasUserPopover(this.body)&&create_user_popover(`#${this.domId} .${Sr.xL.USER_POPOVER}`,!0)}},nu={component:"comment-post-body-component"};var ru=(0,Rr.Z)(tu,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",[_("div",{class:i.$style.component,attrs:{id:i.domId},domProps:{innerHTML:i._s(i.body)}}),i._v(" "),i.showReactions?_("reactions",{attrs:{"content-id":i.reactionId,"content-type":i.reactionType}}):i._e()],1)}),[],!1,(function comment_post_body_injectStyles(i){this.$style=nu.locals||nu}),null,null),iu=ru.exports,au=__webpack_require__(57928),su=Object.defineProperty,ou=Object.defineProperties,lu=Object.getOwnPropertyDescriptors,cu=Object.getOwnPropertySymbols,uu=Object.prototype.hasOwnProperty,du=Object.prototype.propertyIsEnumerable,comment_postvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?su(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,hu={name:"CommentPost",components:{CommentPostActions:Lo,CommentPostBody:iu,CountryFlag:Vr,UserAvatar:us,UserChessTitle:ec.Z,UserFlairIcon:uc},directives:{UserPopover:eu},props:{approveComment:{type:Function,required:!0},deleteComment:{type:Function,required:!0},canComment:{type:Boolean,default:!1},commentCount:Number,commentId:{type:Number,required:!0},editComment:{type:Function,required:!0},isFirstComment:{type:Boolean,default:!1},isLastComment:{type:Boolean,default:!1},isQuoteable:{type:Boolean,default:!0},newCommentId:{type:Number},post:{type:Object,required:!0},quoteComment:{type:Function,required:!0},reactionsId:{type:String},scrollToForm:{type:Function,required:!0},showReactions:{type:Boolean,default:!1},userRoles:{type:Array},viewCommentId:{type:Number}},emits:["copy-comment-link"],data:()=>({approved:!1,actionVisibility:!1,chosenComment:!1,routes:Zi,voteRefs:da}),computed:((i,s)=>ou(i,lu(s)))(((i,s)=>{for(var _ in s||(s={}))uu.call(s,_)&&comment_postvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(cu)for(var _ of cu(s))du.call(s,_)&&comment_postvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i})({},(0,dr.mapState)("user",["isLoggedIn","roles","username"])),{commentHidden(){var i,s;return!(!this.showReactions||this.approved)&&(this.votesCount<=-30&&!(null==(s=null==(i=window.context)?void 0:i.user)?void 0:s.isStaff)&&!this.roles.includes("ROLE_COMMENT_MOD"))},country(){return{code:this.post.author.countryId,name:this.post.author.country}},id(){return`${Ki}${this.commentId}`},isFirstNewComment(){return null!=this.newCommentId&&this.newCommentId===this.commentCount},isViewedComment(){return this.viewCommentId===this.post.id},membership(){return(0,ar.yO)(_s.p0[this.post.author.membership],this.post.user.isEnabled)},semiTransparent(){var i,s;return!(!this.showReactions||this.approved)&&(this.votesCount<-10&&this.votesCount>-30&&!(null==(s=null==(i=window.context)?void 0:i.user)?void 0:s.isStaff))},usersPost(){var i,s;return(null==(s=null==(i=window.context)?void 0:i.user)?void 0:s.id)===this.post.author.id},uuid(){var i,s;return null==(s=null==(i=this.post.reactionsId)?void 0:i.split("_"))?void 0:s[2]},votesCount(){return multipleContentCount(this.reactionsId)}}),mounted(){this.chosenComment=(i=>{const s=parseInt(window.location.hash.replace(`#${Ki}`,""),10);if(s===i)return document.getElementById(s).scrollIntoView(),!0})(this.post.id),this.approved=0!==this.post.visibilityPolicy},methods:{approveCommentHadler(){this.approveComment(this.uuid,this.post.id),this.approved=!0},copyCommentLinkHandler(){this.$emit("copy-comment-link",`${Ki}${this.post.id}`)},deleteCommentHandler(){this.deleteComment(this.post.id)},editCommentHandler(){this.editComment(this.post)},giftMembershipHandler(){O.Z.emit(au.U3.SHOW_GIFT_MEMBERSHIP_MODAL,{userId:this.post.author.id,username:this.post.author.username})},hideActions(){this.actionVisibility=!1},quoteCommentHandler(){this.quoteComment(this.post)},showActions(){this.actionVisibility=!0}}},pu=hu,mu={component:"comment-post-component","chosen-comment":"comment-post-chosen-comment",avatar:"comment-post-avatar",meta:"comment-post-meta",username:"comment-post-username",tagline:"comment-post-tagline","semi-transparent":"comment-post-semi-transparent",body:"comment-post-body"};var fu=(0,Rr.Z)(pu,(function(){var i,s,_=this,T=_.$createElement,S=_._self._c||T;return S("div",{class:[_.$style.component,(i={},i[_.$style["chosen-comment"]]=_.chosenComment,i),_.voteRefs.VOTE_PARENT],attrs:{id:_.id,"data-test-element":"comment-post"},on:{mouseenter:_.showActions,mouseleave:_.hideActions}},[_.commentHidden?S("div",{staticClass:"vote-hidden",domProps:{textContent:_._s(_.$trans("Comment Downvoted"))}}):[_.isFirstComment?S("a",{attrs:{id:"first_comment"}}):_._e(),_._v(" "),_.isLastComment?S("a",{attrs:{id:"last_comment"}}):_._e(),_._v(" "),_.isViewedComment?S("a",{attrs:{id:"comment"}}):_._e(),_._v(" "),_.isFirstNewComment?S("a",{attrs:{id:"first_new_comment"}}):_._e(),_._v(" "),S("user-avatar",{directives:[{name:"user-popover",rawName:"v-user-popover",value:_.post.author.username,expression:"post.author.username"}],class:_.$style.avatar,attrs:{image:_.post.author.avatarUrl,url:_.routes.member(_.post.author.username)}}),_._v(" "),S("div",{class:_.$style.meta},[S("div",{class:_.$style.tagline},[_.post.author.chessTitle?S("user-chess-title",{attrs:{title:_.post.author.chessTitle}}):_._e(),_._v(" "),S("a",{directives:[{name:"user-popover",rawName:"v-user-popover",value:_.post.author.username,expression:"post.author.username"}],class:_.$style.username,attrs:{href:_.routes.member(_.post.author.username)}},[_._v("\n          "+_._s(_.post.author.username)+"\n        ")]),_._v(" "),_.country?S("country-flag",{attrs:{code:_.country.code,name:_.country.name}}):_._e(),_._v(" "),_.membership?S("user-flair-icon",{class:_.$style.icon,attrs:{code:_.post.author.flairCode,membership:_.membership}}):_._e()],1),_._v(" "),S("comment-post-actions",{attrs:{id:_.post.id,"action-visibility":_.actionVisibility,approved:Boolean(_.post.visibilityPolicy),"approve-comment":_.approveCommentHadler,"author-id":_.post.author.id,"can-delete":_.post.user.canDelete,"can-edit":_.post.user.canEdit,"can-receive-gift":_.post.user.canReceiveGift,"can-quote":_.canComment&&_.isQuoteable,"copy-comment-link":_.copyCommentLinkHandler,"delete-comment":_.deleteCommentHandler,"edit-comment":_.editCommentHandler,"gift-membership":_.giftMembershipHandler,"quote-comment":_.quoteCommentHandler,"reaction-id":_.post.reactionsId,"scroll-to-form":_.scrollToForm,"show-reactions":_.showReactions,time:_.post.createdAtRelative,"user-roles":_.userRoles,"users-post":_.usersPost,uuid:_.uuid}})],1),_._v(" "),S("comment-post-body",{class:[_.$style.body,(s={},s[_.$style["semi-transparent"]]=_.semiTransparent,s)],attrs:{id:_.post.id,body:_.post.body,"reaction-id":_.post.reactionsId,"show-reactions":_.showReactions}})]],2)}),[],!1,(function comment_post_injectStyles(i){this.$style=mu.locals||mu}),null,null),gu=fu.exports,vu=__webpack_require__(90168),bu={name:"SectionDropdown",components:{IconFont:Mr.Z},props:{isColored:Boolean,lightMode:Boolean,options:{type:Array,required:!0},selectedOption:{type:Object,required:!0}}},yu={component:"section-dropdown-component",content:"section-dropdown-content",icon:"section-dropdown-icon",colored:"section-dropdown-colored",select:"section-dropdown-select",left:"section-dropdown-left",right:"section-dropdown-right","light-mode":"section-dropdown-light-mode"};var _u=(0,Rr.Z)(bu,(function(){var i,s=this,_=s.$createElement,T=s._self._c||_;return T("div",{class:[s.$style.component,(i={},i[s.$style["light-mode"]]=s.lightMode,i[s.$style.colored]=s.isColored,i)]},[s.selectedOption.leftIcon?T("icon-font",{class:[s.$style.icon,s.$style.left],attrs:{name:s.selectedOption.leftIcon}}):s._e(),s._v(" "),T("div",{class:s.$style.content,domProps:{innerHTML:s._s(s.selectedOption.labelHTML||s.selectedOption.label)}}),s._v(" "),T("icon-font",{class:[s.$style.icon,s.$style.right],attrs:{name:"chevron-bottom"}}),s._v(" "),T("select",s._g({class:s.$style.select},s.$listeners),s._l(s.options,(function(i){return T("option",{key:i.value,domProps:{selected:s.selectedOption.value===i.value,value:i.value,textContent:s._s(i.label)}})})),0)],1)}),[],!1,(function section_dropdown_injectStyles(i){this.$style=yu.locals||yu}),null,null),wu=_u.exports,ku={name:"SectionExplanation",props:{explanation:{type:String,required:!0}}},Tu={component:"section-explanation-component"};var Su=(0,Rr.Z)(ku,(function(){var i=this,s=i.$createElement;return(i._self._c||s)("div",{class:i.$style.component},[i._v("\n  "+i._s(i.explanation)+"\n")])}),[],!1,(function section_explanation_injectStyles(i){this.$style=Tu.locals||Tu}),null,null).exports,Cu=__webpack_require__(7789),xu=__webpack_require__(88146);const Eu={allUserComments:(i,s)=>(0,jr.b)("web_member_comments",{username:i,page:s}),approvePost:(i,s)=>(0,jr.b)("web_moderation_reveal",{type:i,uuid:s}),categoryByPage:(i,s)=>(0,jr.b)("web_forum_category",{url:i,page:s},"i18n_web_forum_category"),changeContentCategory:i=>(0,jr.b)("web_forum_category",{url:i},"i18n_web_forum_category"),clubForumView:(0,jr.b)("web_club_forum_view",{},"i18n_web_club_forum_view"),clubView:(i,s)=>(0,jr.b)("web_club_forum_view",{url:i,page:s},"i18n_web_club_forum_view"),deletePost:(i,s)=>(0,jr.b)("web_forum_delete_comment",{id:i,returnUrl:s}),follow:(i,s)=>(0,jr.b)("web_track_content_callback_forum_topic",{forumTopicId:i,track:s}),hotTopics:i=>(0,jr.b)("web_forum_hot_topics",{page:i},"i18n_web_forum_hot_topics"),indexPage:(0,jr.b)("web_forum_index",{},"i18n_web_forum_index"),markAsRead:(0,jr.b)("web_forum_mark_all_read_callback"),myPostedInTopics:i=>(0,jr.b)("web_forum_my_posted_in_topics",{page:i},"i18n_web_forum_my_posted_in_topics"),myTopics:i=>(0,jr.b)("web_forum_my_topics",{page:i},"i18n_web_forum_my_topics"),myTrackedTopics:i=>(0,jr.b)("web_forum_my_tracked_topics",{page:i},"i18n_web_forum_my_tracked_topics"),newPosts:i=>(0,jr.b)("web_forum_new_posts",{page:i},"i18n_web_forum_new_posts"),search:(i,s)=>(0,jr.b)("web_forum_search",{keyword:i,page:s},"i18n_web_forum_search"),unansweredPosts:i=>(0,jr.b)("web_forum_unanswered_posts",{page:i},"i18n_web_forum_unanswered_posts"),view:(i,s,_)=>(0,jr.b)("web_forum_view",{url:i,page:s,sort:_},"i18n_web_forum_view")},Pu={approved:ht.Z.trans("Approved"),deleteAllPostsConfirm:ht.Z.trans("Are you sure you want to delete ALL COMMENTS from this user? This cannot be undone."),deletePostConfirm:ht.Z.trans("Are you sure you want to delete this comment?"),deleteTopicConfirm:ht.Z.trans("Are you sure you want to delete this topic?"),followAlert:ht.Z.trans("Great! You will be notified when someone leaves a comment."),placeholder:ht.Z.trans("Please be relevant and kind"),reportSpamConfirm:ht.Z.trans("Are you sure you mark this as spam?"),unfollowAlert:ht.Z.trans("Received! You will no longer receive alerts when someones leaves a comment.")};const approvePost=(i,s)=>ca.Z.post(Eu.approvePost(i,s),{_token:Sr._G.CSRF_TOKEN}).then((()=>{(0,Gi.el)({type:Vi.V5.success,message:Pu.approved})}));Object.create,Object.defineProperty,Object.getOwnPropertyDescriptor,Object.getOwnPropertyNames,Object.getPrototypeOf,Object.prototype.hasOwnProperty;var Au={name:"CommentsBase",components:{CommentFollow:qa,CommentFormGuest:Wa,CommentFormInactive:ms,CommentFormPost:ys,CommentPost:gu,GiftMembershipModal:()=>({component:__webpack_require__.e(614).then(__webpack_require__.bind(__webpack_require__,21422))}),LoaderThreeBounce:sl.Z,Pagination:vu.Z,SectionDropdown:wu,SectionExplanation:Su,SocialShare:Cu.Z,Tinymce:xu.Z},props:{areQuoteable:{type:Boolean,default:!0},user:Object,threads:Array,commentsCount:Number,commentsLocked:{type:Boolean,default:!1},forumPage:{type:Boolean,default:!1},getThread:{type:Function,required:!0},explanation:{type:String,default:""},hideSocial:{type:Boolean,default:!1},parentId:{type:[Number,String],required:!0},reactionsPrefix:{type:String},scrollTo:{type:String,required:!1},showPageInUrl:Boolean,showReactions:{type:Boolean,default:!1},showTitle:{type:Boolean,default:!0},startPage:Number,topicCode:{type:String,required:!0}},emits:["update-comment","unfollow-thread","follow-thread","delete-comment","create-comment","create-alert","copy-comment-link","initialize-thread","set-loading-state","set-approval"],data:()=>({activeCommentId:null,commentContent:"",initialCommentContent:"",newCommentId:null,selectedOption:na[0],status:0,translations:Wi,viewCommentId:null,showGiftMembershipModal:!1,sortOptions:na,sortOrder:null,reactionsFetched:!1,receiverUsername:null,receiverUserId:null}),computed:{componentTitle(){let i=this.translations.comments;return null!=this.commentsCount&&(i+=` (${Number(this.commentsCount)})`),i},contentClasses(){return this.forumPage?"":"v5-section-content"},posts(){return this.thread.comments},scrollToTop(){return this.scrollTo||Yi},showFollowToggle(){return!this.thread.busy&&this.user.username&&this.user.isActivated},showGuestMessage(){return!this.thread.busy&&!this.user.username},showInactiveMessage(){return[!this.thread.busy,this.user.username,!this.user.isActivated,!this.thread.user.canComment].every((i=>i))},thread(){return this.threads.find((i=>i.id===this.threadId))},threadId(){return generateThreadId(this.parentId,this.topicCode)},totalPages(){const{paginator:i}=this.thread;return i.more?i.page+1:i.page}},created(){const i=new URLSearchParams(window.location.search),s={};i.get("comment")&&(this.viewCommentId=parseInt(i.get("comment"),10),s.comment=this.viewCommentId),i.get("ncc")&&(this.newCommentId=parseInt(i.get("ncc"),10),s.ncc=this.newCommentId),i.get("page")?s.page=parseInt(i.get("page"),10):this.startPage&&this.showPageInUrl&&(s.page=this.startPage),this.$emit("initialize-thread",{parentId:this.parentId,topicCode:this.topicCode,query:s,showReactions:this.showReactions}),this.$watch((()=>[this.parentId,this.topicCode]),(()=>{this.$emit("initialize-thread",{parentId:this.parentId,topicCode:this.topicCode,query:s,showReactions:this.showReactions})})),this.showPageInUrl&&window.addEventListener("popstate",(i=>{const s=i.state&&i.state.page?i.state.page:1;if(window.location.hash){const i=window.location.hash.substr(1);if(document.querySelector(`[id="${i}"], [name="${i}"]`))return}this.setThreadPage(s,!0)}))},mounted(){scrollToElement(),O.Z.on(au.U3.SHOW_GIFT_MEMBERSHIP_MODAL,(({username:i,userId:s})=>{this.receiverUsername=i,this.receiverUserId=s,this.showGiftMembershipModal=!0})),Er.on(au.U3.HIDE_MODAL,(()=>{this.showGiftMembershipModal&&(this.showGiftMembershipModal=!1)}))},methods:{approveComment(i,s){approvePost("ForumTopic",i).then((()=>{this.$emit("set-approval",{threadId:this.threadId,commentId:s,approved:!0})}))},copyCommentLink(i){this.$emit("copy-comment-link",i)},cancelComment(){this.initialCommentContent="",this.commentContent="",this.activeCommentId=null,this.status=0;const i=window.tinymce;i&&i.activeEditor&&(i.activeEditor.setContent("<p></p>"),i.activeEditor.focus())},changeSorting(i){const s=Number(i),_={page:1,sort:ra[s]};s===ta&&(_.sort=ra[ta],_.reactionsPrefix=this.reactionsPrefix),this.sortOrder=_.sort,this.$emit("initialize-thread",{parentId:this.parentId,topicCode:this.topicCode,query:_,showReactions:this.showReactions}),this.selectedOption=this.sortOptions.find((i=>i.value===s))},createCommentHandler(){(i=>{const s=(i=>i.replace(/(<(?!img|\/?iframe)([^>]+)>)/gi,""))(i),_=(i=>i.replace(/&nbsp;/g,""))(s);return _.trim()})(this.commentContent).length?(this.$emit("create-comment",{body:this.commentContent,parentId:this.parentId,topicCode:this.topicCode}),this.cancelComment(),document.getElementById(Yi).scrollIntoView({behavior:"smooth"})):this.$emit("create-alert",{type:Vi.V5.error,message:Vi.sY.commentEmptyContent})},deleteCommentHandler(i){this.$emit("delete-comment",{commentId:i,threadId:this.threadId})},editComment({body:i,id:s}){this.initialCommentContent=(i=>{let s=stripHTMLComments(i);const _=s.match(/(<div *?id="(chess_com_diagram_([0-9]+)_([0-9]+))"[^>]*?>([\s\S]*?)<\/div>)/gm);return _&&(null==_?void 0:_.length)>0?(_.forEach((i=>{var _;const T=null==(_=i.split(" ")[1].split("_").pop())?void 0:_.replace('"',"");s=s.replace(i,`<div style="text-align: center;"><img id="chess_com_diagram_0_${T}" class="chessDiagramEditorImg mceItemNonEditable" src="/bundles/web/images/diagram-placeholder.png" name="mce_chessDiagramEditorImg" /></div><br>`)})),s):i})(i),this.activeCommentId=s,this.status=1},fetchReactions(i){if(this.showReactions&&(null==i?void 0:i.length)&&!this.reactionsFetched){get_multiple_content_reactions_getMultipleContentReactions(i.map((i=>i.reactionsId))),this.reactionsFetched=!0}},followThreadHandler(){this.$emit("follow-thread",{parentId:this.parentId,topicCode:this.topicCode})},getCommentIdOrCommentCount:({commentId:i,thread:s})=>{const _=(s.paginator.page-1)*s.paginator.perPage+s.comments.length;return i>_?_:i},quoteComment(i){var s,_;this.initialCommentContent=`\n  <div class="fquote">\n    <span class="quoted-user"> ${(s=i).author.username} wrote: </span>\n    <div class="quoted-text">\n      ${stripHTMLComments((_=s.body,_.replace(/(<div *?id="(chess_com_diagram_([0-9]+)_([0-9]+))"[^>]*?>([\s\S]*?)<\/div>)/gm,"")))}\n    </div>\n  </div>\n  <p>&nbsp;</p>\n`,this.status=2},scrollToForm(){this.$refs.form.$el.scrollIntoView()},setThreadPage(i,s){this.$emit("set-loading-state",!0);const _={sort:this.sortOrder};this.sortOrder===ra[ta]&&(_.reactionsPrefix=this.reactionsPrefix),this.getThread({page:i,topicCode:this.topicCode,parentId:this.parentId,query:_,showReactions:this.showReactions}).then((()=>{this.showPageInUrl&&!s&&this.updateUrl(i)})).finally((()=>{var i;null==(i=document.getElementById(Yi))||i.scrollIntoView({behavior:"smooth"}),setTimeout((()=>{this.$emit("set-loading-state",!1)}),500)}))},unfollowThreadHandler(){this.$emit("unfollow-thread",{parentId:this.parentId,topicCode:this.topicCode})},updateCommentHandler(){this.activeCommentId&&this.$emit("update-comment",{body:this.commentContent,commentId:this.activeCommentId,threadId:this.threadId}),this.cancelComment()},updateComment(){document.getElementById(Yi).scrollIntoView(),initDiagramViewer()},updateUrl(i){const s=window.location;let _=`${s.origin}${s.pathname}`,T=i;-1===i&&(T=this.totalPages),T>1&&(_+=`?page=${T}`),window.history.pushState({page:T},"",_)},hideGiftMembershipModal(){this.showGiftMembershipModal=!1}}},Ou=Au,Mu={component:"comments-base-component","rounded-top":"comments-base-rounded-top",content:"comments-base-content",loader:"comments-base-loader","pagination-top":"comments-base-pagination-top",pagination:"comments-base-pagination",inactive:"comments-base-inactive",explanation:"comments-base-explanation","social-share":"comments-base-social-share","locked-comments":"comments-base-locked-comments","sort-follow-wrap":"comments-base-sort-follow-wrap",label:"comments-base-label","sort-dropdown":"comments-base-sort-dropdown",item:"comments-base-item"};var zu=(0,Rr.Z)(Ou,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component,attrs:{id:"comments-component"}},[i.showTitle||!i.forumPage?[_("div",{staticClass:"v5-header v5-header-border v5-wide"},[_("span",{staticClass:"v5-header-name",domProps:{textContent:i._s(i.componentTitle)}}),i._v(" "),_("div",{class:i.$style["sort-follow-wrap"]},[i.showReactions&&i.posts.length>0?[_("span",{class:i.$style.label,domProps:{textContent:i._s(i.$trans("Sort:"))}}),i._v(" "),_("section-dropdown",{class:i.$style["sort-dropdown"],attrs:{options:i.sortOptions,"selected-option":i.selectedOption},on:{change:function(s){return i.changeSorting(s.target.value)}}})]:i._e(),i._v(" "),i.showFollowToggle?_("comment-follow",{attrs:{"follow-thread":i.followThreadHandler,"is-following":i.thread.user.isFollowing,"unfollow-thread":i.unfollowThreadHandler}}):i._e()],2)])]:i._e(),i._v(" "),i.thread.busy?_("loader-three-bounce",{class:i.$style.loader,attrs:{size:60}}):i._e(),i._v(" "),i.thread.busy?i._e():_("div",{class:i.contentClasses},[_("section-explanation",{directives:[{name:"show",rawName:"v-show",value:i.explanation,expression:"explanation"}],class:i.$style.explanation,attrs:{explanation:i.explanation}}),i._v(" "),i.totalPages>1&&i.forumPage?_("pagination",{class:i.$style["pagination-top"],attrs:{"change-page":i.setThreadPage,"current-page":i.thread.paginator.page,"total-pages":i.totalPages}}):i._e(),i._v(" "),i._l(i.posts,(function(s,T){return _("comment-post",{key:s.id,class:i.$style.item,attrs:{"approve-comment":i.approveComment,"can-comment":i.thread.user.canComment,"comment-count":T+1+(i.thread.paginator.page-1)*i.thread.paginator.perPage,"comment-id":s.id,"delete-comment":i.deleteCommentHandler,"edit-comment":i.editComment,"is-first-comment":0===T,"is-last-comment":T===i.posts.length-1,"is-quoteable":i.areQuoteable,"new-comment-id":i.getCommentIdOrCommentCount({commentId:i.newCommentId,thread:i.thread}),post:s,"quote-comment":i.quoteComment,"reactions-id":s.reactionsId,"scroll-to-form":i.scrollToForm,"show-reactions":i.showReactions,"user-roles":i.user.roles,"view-comment-id":i.viewCommentId},on:{"copy-comment-link":i.copyCommentLink}})})),i._v(" "),i.thread.comments.length>0?_("pagination",{class:i.$style.pagination,attrs:{"change-page":i.setThreadPage,"current-page":i.thread.paginator.page,"scroll-to":i.scrollToTop,"show-top-button":!i.showInactiveMessage,"total-pages":i.totalPages}}):i._e(),i._v(" "),!i.hideSocial&&i.forumPage?_("social-share",{class:i.$style["social-share"]}):i._e(),i._v(" "),i.thread.user.canComment&&!i.commentsLocked?_("comment-form-post",{ref:"form",class:i.$style.form,attrs:{"cancel-comment":i.cancelComment,"post-comment":i.createCommentHandler,status:i.status,"update-comment":i.updateCommentHandler},scopedSlots:i._u([{key:"editor",fn:function(){return[_("tinymce",{attrs:{id:"editor-"+i.threadId,"init-value":i.initialCommentContent,placeholder:i.translations.placeholder},model:{value:i.commentContent,callback:function(s){i.commentContent=s},expression:"commentContent"}})]},proxy:!0},i.showTitle||i.forumPage?{key:"follow",fn:function(){return[_("comment-follow",{attrs:{"follow-thread":i.followThreadHandler,"is-following":i.thread.user.isFollowing,"unfollow-thread":i.unfollowThreadHandler}})]},proxy:!0}:null],null,!0)},[_("a",{attrs:{id:"comment_box"}})]):i._e(),i._v(" "),i.commentsLocked&&!i.showGuestMessage?_("p",{class:i.$style["locked-comments"],domProps:{textContent:i._s(i.translations.commentsLocked)}}):i._e(),i._v(" "),i.showGuestMessage?_("comment-form-guest",{class:i.$style.guest}):i._e(),i._v(" "),i.showInactiveMessage?_("comment-form-inactive",{class:i.$style.inactive,attrs:{avatar:i.user.avatarUrl,"is-guest":i.user.isGuest}}):i._e(),i._v(" "),i.showGiftMembershipModal?_("gift-membership-modal",{attrs:{"receiver-username":i.receiverUsername,"receiver-id":i.receiverUserId,"sender-username":i.user.username},on:{"hide-modal":i.hideGiftMembershipModal}}):i._e()],2)],2)}),[],!1,(function comments_base_injectStyles(i){this.$style=Mu.locals||Mu}),null,null),Iu=zu.exports,Lu=Object.defineProperty,Ru=Object.defineProperties,Nu=Object.getOwnPropertyDescriptors,Du=Object.getOwnPropertySymbols,ju=Object.prototype.hasOwnProperty,Bu=Object.prototype.propertyIsEnumerable,commentsvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?Lu(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,commentsvue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))ju.call(s,_)&&commentsvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(Du)for(var _ of Du(s))Bu.call(s,_)&&commentsvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},commentsvue_type_script_lang_js_spreadProps=(i,s)=>Ru(i,Nu(s)),$u={name:"Comments",components:{CommentsBase:Iu},props:{areQuoteable:{type:Boolean,default:!0},commentsCount:Number,commentsLocked:{type:Boolean,default:!1},forumPage:{type:Boolean,default:!1},explanation:{type:String,default:""},hideSocial:{type:Boolean,default:!1},parentId:{type:[Number,String],required:!0},reactionsPrefix:{type:String},scrollTo:{type:String,required:!1},showPageInUrl:Boolean,showReactions:{type:Boolean,default:!1},showTitle:{type:Boolean,default:!0},startPage:Number,topicCode:{type:String,required:!0}},data:()=>({isLoading:!1}),computed:commentsvue_type_script_lang_js_spreadProps(commentsvue_type_script_lang_js_spreadValues({},(0,dr.mapState)({threads:i=>i.comments.threads})),{reactionsIdPrefix(){var i;return this.reactionsPrefix||(null==(i=this.threads[0])?void 0:i.reactionsPrefix)}}),methods:commentsvue_type_script_lang_js_spreadProps(commentsvue_type_script_lang_js_spreadValues({createAlert:Gi.el},(0,dr.mapActions)("comments",["copyCommentLink","createComment","deleteComment","followThread","getThread","initializeThread","setApproval","unfollowThread","updateComment"])),{async createCommentHandler(i){this.isLoading=!0,await this.createComment(i),this.isLoading=!1},setLoadingState(i){this.isLoading=i},updateCommentHandler(i){this.updateComment(i).then((()=>{this.$refs.comments.updateComment()}))}})},Uu=$u,Fu={loading:"comments-loading"};var Hu=(0,Rr.Z)(Uu,(function(){var i,s=this,_=s.$createElement;return(s._self._c||_)("CommentsBase",{ref:"comments",class:(i={},i[s.$style.loading]=s.isLoading,i),attrs:{"are-quoteable":s.areQuoteable,"comments-count":s.commentsCount,"comments-locked":s.commentsLocked,"forum-page":s.forumPage,explanation:s.explanation,"hide-social":s.hideSocial,"parent-id":s.parentId,"reactions-prefix":s.reactionsIdPrefix,"scroll-to":s.scrollTo,"show-page-in-url":s.showPageInUrl,"show-reactions":s.showReactions,"show-title":s.showTitle,user:s.$store.state.user,"start-page":s.startPage,threads:s.threads,"get-thread":s.getThread,"topic-code":s.topicCode},on:{"copy-comment-link":s.copyCommentLink,"create-comment":s.createCommentHandler,"create-alert":s.createAlert,"delete-comment":s.deleteComment,"follow-thread":s.followThread,"initialize-thread":s.initializeThread,"set-loading-state":s.setLoadingState,"set-approval":s.setApproval,"unfollow-thread":s.unfollowThread,"update-comment":s.updateCommentHandler}})}),[],!1,(function comments_injectStyles(i){this.$style=Fu.locals||Fu}),null,null).exports,qu=Object.defineProperty,Vu=Object.getOwnPropertySymbols,Gu=Object.prototype.hasOwnProperty,Zu=Object.prototype.propertyIsEnumerable,shared_commentsvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?qu(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,Wu={name:"PuzzleComments",components:{Comments:Hu},computed:((i,s)=>{for(var _ in s||(s={}))Gu.call(s,_)&&shared_commentsvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(Vu)for(var _ of Vu(s))Zu.call(s,_)&&shared_commentsvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i})({},(0,dr.mapState)({puzzleId:i=>i.puzzles.puzzle.id})),render(i){const s={parentId:this.puzzleId,showReactions:!0,topicCode:"tactics_problem"};return i(Hu,{props:s})}},Ku=Wu,Yu=(0,Rr.Z)(Ku,undefined,undefined,!1,null,null,null).exports,Xu=__webpack_require__(11748),Qu={name:"ModalTrialGuest",components:{ModalTrial:Xu.Z},data:()=>({gameModes:vn}),methods:{getModalStartingSlide:getModalStartingSlide,show(){this.$refs.modalTrial.show()},hide(){this.$refs.modalTrial.hide()}}},Ju=(0,Rr.Z)(Qu,(function(){var i=this,s=i.$createElement;return(i._self._c||s)("modal-trial",{ref:"modalTrial",attrs:{referral:i.getModalStartingSlide(i.gameModes.LEARNING),"starting-slide":i.getModalStartingSlide(i.gameModes.LEARNING),title:i.$trans("Sign up to keep solving puzzles!")}})}),[],!1,null,null,null).exports,ed=__webpack_require__(16374);var td={name:"LimitReachedActiveStreak",props:{highestStreak:{type:Number,required:!0},currentStreak:{type:Number,required:!0},amountNeededForHighestStreak:{type:Number,required:!0}},emits:["animation-end"],data:()=>({circleRadius:"92",strokeDashArray:"0, 20000",progressBarWidth:"11",streakValue:0,streakFire:'<svg xmlns="http://www.w3.org/2000/svg" x="40%" y="18%" width="85" height="129" fill="none"><path fill="url(#paint0_linear)" d="M84.015 87.723c-.11 7.442-2.093 14.177-5.893 20.314-3.8 6.138-8.922 11.026-15.256 14.665-6.334 3.639-13.274 5.486-20.82 5.486-7.545 0-14.484-1.847-20.873-5.54-6.389-3.694-11.511-8.745-15.256-15.1C2.17 101.193.299 94.296.299 86.854c0-7.984 1.046-14.61 3.084-19.824 2.038-5.215 5.287-10.212 9.804-14.937-.785 6.458 5.2 15.965 12.062 15.965-1.411-10.37-3.315-30.197 7.325-48.77C37.365 10.922 43.259 4.73 50.198.657c-1.762 4.073-2.644 8.092-2.644 12.166 0 5.703 1.377 10.808 4.076 15.37 2.699 4.563 6.83 10.103 12.337 16.621 4.241 4.888 7.656 9.18 10.3 12.873 2.643 3.693 4.901 7.984 6.774 12.763 1.873 4.834 2.864 10.103 2.974 15.915v1.357z" /><path stroke="url(#paint1_linear)" stroke-linejoin="round" stroke-opacity=".2" stroke-width="8.261" d="M7.23 68.533c.939-2.401 2.174-4.775 3.727-7.114.581 1.23 1.267 2.4 2.023 3.466 2.625 3.705 6.924 7.303 12.268 7.303 1.193 0 2.327-.515 3.112-1.414.784-.898 1.142-2.091.981-3.273-1.392-10.231-3.098-28.854 6.817-46.16 2.215-3.868 4.654-7.194 7.3-10.01-.022.496-.034.994-.034 1.493 0 6.403 1.556 12.241 4.651 17.473 2.868 4.85 7.166 10.59 12.737 17.184l.016.018.02.023c4.18 4.819 7.51 9.007 10.06 12.57 2.412 3.369 4.516 7.345 6.284 11.859 1.674 4.324 2.587 9.093 2.693 14.455v1.286c-.104 6.689-1.877 12.683-5.275 18.171-3.427 5.535-8.041 9.948-13.802 13.258-5.695 3.272-11.923 4.936-18.761 4.936-6.834 0-13.059-1.662-18.807-4.985-5.78-3.341-10.385-7.886-13.765-13.621-3.367-5.713-5.046-11.886-5.046-18.597 0-7.66 1.01-13.736 2.801-18.32z" /><defs><linearGradient id="paint0_linear" x1="42.157" x2="42.157" y1="128.188" y2=".657" gradientUnits="userSpaceOnUse"><stop stop-color="#FEA960" /><stop offset=".969" stop-color="#F05A2A" /></linearGradient><linearGradient id="paint1_linear" x1="42.157" x2="42.157" y1="128.188" y2=".657" gradientUnits="userSpaceOnUse"><stop stop-color="#F04E2A" /><stop offset="1" stop-color="#F48043" /><stop offset="1" stop-color="#F48043" /></linearGradient></defs></svg>'}),computed:{currentStreakPercentage(){const i=this.currentStreak===this.highestStreak?this.highestStreak+1:this.highestStreak;return parseInt(this.currentStreak/i*100,10)},maxAngle(){return parseInt(2*Math.PI*this.circleRadius,10)},reachedAngle(){return parseInt(this.currentStreakPercentage/100*this.maxAngle,10)},footerText(){return(0,j.dW)("Only %number% to go!",{"%number%":this.amountNeededForHighestStreak})},svgCircles(){return[{stroke:"#e7e6e5"},{stroke:"url(#paint0_linear)",strokeDasharray:this.strokeDashArray}]}},mounted(){this.startProgressBarAnimation()},methods:{startProgressBarAnimation(){let i=0;const s=4/360*this.maxAngle;!function animateProgressBar({timing:i,draw:s,duration:_,drawLimit:T,animationEndHandler:S}){const C=performance.now();requestAnimationFrame((function animate(P){let O=(P-C)/_;O>1&&(O=1);const M=i(O),R=s(M);O<1&&R<=T?requestAnimationFrame(animate):S&&S()}))}({duration:this.currentStreakPercentage/100*1600,timing:i=>i<.5?8*i**4:1-(-2*i+2)**4/2,draw:_=>{const T=_*i;return this.strokeDashArray=`${T}, 20000`,i+=s,this.streakValue=Math.ceil(100*_/100*this.currentStreak,10),T},drawLimit:this.reachedAngle,animationEndHandler:this.handleAnimationEnd})},handleAnimationEnd(){this.$emit("animation-end")}}},nd={component:"limit-reached-active-streak-component","progress-bar-wrapper":"limit-reached-active-streak-progress-bar-wrapper","streak-value":"limit-reached-active-streak-streak-value","footer-text":"limit-reached-active-streak-footer-text","streak-value-enter-active":"limit-reached-active-streak-streak-value-enter-active","streak-value-enter":"limit-reached-active-streak-streak-value-enter","streak-value-leave-to":"limit-reached-active-streak-streak-value-leave-to"};var rd=(0,Rr.Z)(td,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("div",{class:i.$style["progress-bar-wrapper"]},[_("svg",[i._l(i.svgCircles,(function(s,T){return _("circle",{key:T,attrs:{cx:"50%",cy:"50%","transform-origin":"50% 50%",transform:"rotate(-90)",fill:"none","stroke-linecap":"round",stroke:s.stroke,"stroke-width":i.progressBarWidth,"stroke-dasharray":s.strokeDasharray?s.strokeDasharray:"none",r:i.circleRadius}})})),i._v(" "),_("g",{domProps:{innerHTML:i._s(i.streakFire)}})],2),i._v(" "),_("transition",{attrs:{appear:"",mode:"out-in","enter-class":i.$style["streak-value-enter"],"enter-active-class":i.$style["streak-value-enter-active"],"leave-to-class":i.$style["streak-value-leave-to"]}},[_("div",{key:i.streakValue,class:i.$style["streak-value"],domProps:{textContent:i._s(i.streakValue)}})])],1),i._v(" "),_("div",{class:i.$style["footer-text"]},[_("span",{domProps:{textContent:i._s(i.footerText)}})])])}),[],!1,(function limit_reached_active_streak_injectStyles(i){this.$style=nd.locals||nd}),null,null),ad=rd.exports,sd={name:"LimitReachedNotActiveStreak",props:{dailyPuzzleLimit:{type:Number,default:5}},data:()=>({circleRadius:"92",progressBarWidth:"15",streakPuzzle:'<svg xmlns="http://www.w3.org/2000/svg" x="38%" y="20%" width="99" height="99" fill="none" viewBox="0 0 99 99"><path fill="#F48043" d="M67.563 16.102c1.649 1.648 4.287 1.648 5.825 0 .88-.88 1.32-2.089 1.21-3.298-.22-3.297.879-6.704 3.407-9.342 4.616-4.616 12.09-4.616 16.706 0s4.616 12.09 0 16.706c-2.528 2.528-5.935 3.737-9.343 3.407-1.209-.11-2.418.33-3.297 1.21-1.648 1.648-1.648 4.286 0 5.825L95.48 44.017c3.407 3.407 3.407 8.793 0 12.2L55.363 96.445c-3.407 3.407-8.792 3.407-12.2 0L3.158 56.438c-3.407-3.407-3.407-8.793 0-12.2l10.331-10.331c1.979-1.979 5.276-1.979 7.364 0l1.21 1.209c.549.55.988 1.209 1.208 1.978-.11 3.517 1.21 7.034 3.957 9.672l.11.11c5.165 5.166 13.518 5.056 18.684-.11 4.836-4.946 4.946-12.97.22-18.025-.11-.22-.33-.33-.55-.55 0 0 0-.11-.11-.11-3.077-3.077-7.253-4.286-11.21-3.736-.99-.22-1.869-.66-2.528-1.43l-.11-.109c-1.978-1.978-1.978-5.276 0-7.364l11.65-11.32c3.408-3.408 8.793-3.408 12.2 0l11.98 11.98z"/><path fill="#fff" d="M64.266 35.995c0-7.693-1.539-15.057-4.396-21.652L52.616 7.09c-.88-.879-1.978-1.318-3.188-1.318-1.209 0-2.308.44-3.187 1.318l-11.54 11.54c-.22.22-.33.55-.33.77 0 .22 0 .44.33.77l.22.22c.44 0 .989-.11 1.428-.11 4.617 0 8.903 1.758 12.2 5.055l.11.11.55.55c6.264 6.704 6.154 17.145-.22 23.74-3.297 3.407-7.694 5.276-12.42 5.276-4.616 0-8.902-1.76-12.2-5.056l-.11-.11c-3.077-3.078-4.945-7.254-5.165-11.65l-1.21-1.21c-.22-.22-.549-.33-.769-.33-.22 0-.44 0-.769.33L6.125 47.206c-1.759 1.758-1.759 4.506 0 6.265l30.444 30.444c16.486-9.562 27.697-27.477 27.697-47.92z" opacity=".15"/><linearGradient id="paint0_linear" x1="42.157" x2="42.157" y1="128.188" y2=".657" gradientUnits="userSpaceOnUse"><stop stop-color="#FEA960" /><stop offset=".969" stop-color="#F05A2A" /></linearGradient></svg>'}),computed:{maxAngle(){return parseInt(2*Math.PI*this.circleRadius,10)},reachedAngle(){return this.dailyPuzzleLimit/8*100/100*this.maxAngle+", 20000"},puzzleProgress(){return(0,j.dW)("%number% of 8",{"%number%":this.dailyPuzzleLimit})},footerText:()=>(0,j.dW)("Solve 8+ Puzzles/day to improve fast"),svgCircles(){return[{stroke:"#e7e6e5"},{stroke:"url(#paint0_linear)",strokeDasharray:this.reachedAngle}]}}},od={"progress-bar-wrapper":"limit-reached-not-active-streak-progress-bar-wrapper","footer-text":"limit-reached-not-active-streak-footer-text"};var ld=(0,Rr.Z)(sd,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",[_("div",{class:i.$style["progress-bar-wrapper"]},[_("svg",[i._l(i.svgCircles,(function(s,T){return _("circle",{key:T,attrs:{cx:"50%",cy:"50%","transform-origin":"50% 50%",transform:"rotate(-90)",fill:"none",stroke:s.stroke,"stroke-width":i.progressBarWidth,"stroke-dasharray":s.strokeDasharray?s.strokeDasharray:"none",r:i.circleRadius}})})),i._v(" "),_("g",{domProps:{innerHTML:i._s(i.streakPuzzle)}}),i._v(" "),_("text",{attrs:{"text-anchor":"middle",x:"50%",y:"80%",fill:"#262421"}},[i._v(i._s(i.puzzleProgress))])],2)]),i._v(" "),_("div",{class:i.$style["footer-text"]},[_("span",{domProps:{textContent:i._s(i.footerText)}})])])}),[],!1,(function limit_reached_not_active_streak_injectStyles(i){this.$style=od.locals||od}),null,null),cd=ld.exports;const ud="//media.chesscomfiles.com";var dd={routes:{getRewardToken:i=>D.Z.generate("web_callback_rewarded_ad_create",{premiumFeatureCode:i}),claimReward:i=>D.Z.generate("web_callback_rewarded_ad_claim",{rewardToken:i}),membership:D.Z.generate("web_membership",{c:"internal-ad"}),internalVideoAdGeneric:`${ud}/videos/mp4/Marketing_Premium_generic_v11.mp4`,internalVideoAdRewarded:`${ud}/videos/mp4/Marketing_Premium_rewarded_v7.mp4`,internalVideoAdPuzzles:`${ud}/videos/mp4/Marketing_Premium_Puzzles.mp4`},playwireConstants:{scriptSrc:"//cdn.playwire.com/bolt/js/zeus/embed.js",configSrc:"//config.playwire.com/1024308/v2/pre_content.json"},events:{VIDEO_AD_COMPLETED:"video-ad-completed"},amplitudeEvents:{VIDEO_AD_OPTION_SHOWN:"Reward Video Option Shown",VIDEO_AD_OPTION_CLICKED:"Reward Video Option Clicked",VIDEO_AD_OPTION_SHOWN_DRY_RUN:"Reward Video DRY RUN Shown",VIDEO_AD_STARTED:"Reward Video Started",VIDEO_AD_COMPLETED:"Reward Video Completed"},premiumFeatureCodes:{PUZZLES_RATED:"PuzzlesRated"},videoAdTypes:{INTERNAL:"internal",PLAYWIRE:"Playwire"}};const hd={width:690,height:690,controls:!0,playbackRates:[.75,1,1.25,1.5,2],preload:"auto",fluid:!1,html5:{nativeCaptions:!1},errorDisplay:!1,plugins:{hotkeys:{volumeStep:.1,seekStep:5,alwaysCaptureHotkeys:!0}}},pd="video-clicked",md="video-has-ended",fd="video-pause",gd="video-play",vd="video-ready",bd="video-restart",yd="video-started-playing",_d="video-time-update";__webpack_require__(91893);var wd=__webpack_require__(93633),kd={props:{lessonLocked:{type:Boolean,default:!1}}};var Td=Object.defineProperty,Sd=Object.defineProperties,Cd=Object.getOwnPropertyDescriptors,xd=Object.getOwnPropertySymbols,Ed=Object.prototype.hasOwnProperty,Pd=Object.prototype.propertyIsEnumerable,video_playervue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?Td(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,video_playervue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))Ed.call(s,_)&&video_playervue_type_script_lang_js_defNormalProp(i,_,s[_]);if(xd)for(var _ of xd(s))Pd.call(s,_)&&video_playervue_type_script_lang_js_defNormalProp(i,_,s[_]);return i};const Ad=4;let Od;var Md={name:"VideoPlayer",mixins:[((i=100)=>({data:()=>({throttledResizeHandler:null}),mounted(){this.throttledResizeHandler=pi(this.handleResizeEvent,i),window.addEventListener("resize",this.throttledResizeHandler)},destroyed(){window.removeEventListener("resize",this.throttledResizeHandler)}}))(),kd],props:{autoplay:{type:Boolean,default:!0},customPlayerConfig:{type:Object,default:()=>({})},isWideBoard:{type:Boolean,default:!1},src:{type:String},thumbnail:{type:String,default:""},type:{type:String,default:"video/mp4"},subtitles:{type:Array,default:()=>[]},id:{type:String,default:"videoElement"}},emits:["videoDuration"],data:()=>({loadedMetaData:!1,chessScreenVideo:!1}),watch:{src(){this.setupPlayer()}},mounted(){this.setupPlayer(),this.attachVideoPlayerEvents(),O.Z.on(gd,this.play),O.Z.on(fd,this.pause),O.Z.on(bd,this.restart)},beforeDestroy(){Od&&Od.dispose()},methods:{openUpgradeModal(){this.lessonLocked&&function showIsRestrictedModal(){O.Z.emit(Bi.U3.SHOW_UPGRADE_MODAL)}()},setupPlayer(){const i=video_playervue_type_script_lang_js_spreadValues(video_playervue_type_script_lang_js_spreadValues({},hd),this.customPlayerConfig);this.lessonLocked&&(i.controls=!1),Od=(0,wd.default)(this.id,((i,s)=>Sd(i,Cd(s)))(video_playervue_type_script_lang_js_spreadValues({},i),{autoplay:!this.lessonLocked&&this.autoplay,poster:this.thumbnail})),this.src&&!this.lessonLocked&&Od.src({src:this.src,type:this.type}),Od.ready((()=>{O.Z.emit(vd),Od.on("loadedmetadata",(()=>{this.$emit("videoDuration",Od.duration())})),["touchstart","click"].forEach((i=>{Od.on(i,(i=>{"VIDEO"===i.target.tagName&&O.Z.emit(pd)}))})),this.autoplay&&Od.focus(),Od.one("loadedmetadata",(()=>{const i=new URLSearchParams(window.location.search);this.loadedMetaData=!0,Od.videoWidth()%Od.videoHeight()==0&&(this.chessScreenVideo=!0),this.resize(),i.get("t")&&(Od.currentTime(parseInt(i.get("t"),10)),Od.play()),this.setupSubtitles()})),Od.on("play",(()=>{O.Z.emit(yd)})),Od.on("ended",(()=>{O.Z.emit(md)})),Od.on("timeupdate",(()=>{O.Z.emit(_d,Od.currentTime())})),Od.on("error",(()=>{Od.error().code===Ad&&O.Z.emit(md)}))}))},setupSubtitles(){if(Od){const i="en_US"===window.context.i18n.locale;if(this.subtitles.forEach((i=>{Od.addRemoteTextTrack({kind:"subtitles",label:i.language_name,src:i.url,srclang:i.language_code},!1)})),!i){const i=window.context.i18n.locale.split("_")[0],s=Od.textTracks().tracks_.find((s=>s.language===i));s&&(s.mode="showing")}Od.textTrackSettings.setValues({fontPercent:.5})}},play(){Od&&Od.play()},pause(){Od&&Od.pause()},restart(){Od&&(Od.currentTime(0),Od.play())},resize(){const i=window.innerHeight,s=this.$refs.videoContainer.clientWidth,_=Math.round(s/16*9);this.chessScreenVideo?i>s?Od.dimensions(s,s):Od.dimensions(i-75,i-75):(Od.dimensions(s,_),Od.aspectRatio("16:9"))},handleResizeEvent(){this.loadedMetaData&&this.resize()},attachVideoPlayerEvents(){var i,s;const _=null==(s=null==(i=this.$refs)?void 0:i.videoPlayer)?void 0:s.parentElement;_&&(_.addEventListener("contextmenu",(i=>{i.preventDefault()})),_.querySelector(".vjs-poster").addEventListener("mousedown",(i=>{i.preventDefault()})),_.addEventListener("click",this.openUpgradeModal))}}},zd=Md,Id=(0,Rr.Z)(zd,(function(){var i,s=this,_=s.$createElement,T=s._self._c||_;return T("div",{ref:"videoContainer",staticClass:"video-player",attrs:{id:"video-container"}},[T("video",{ref:"videoPlayer",staticClass:"video-js",class:(i={},i["wide-board"]=s.isWideBoard,i),attrs:{height:"776",width:"776",id:s.id}})])}),[],!1,null,null,null),Ld={name:"ModalVideoAd",components:{VideoPlayer:Id.exports},props:{premiumFeatureCode:{type:String,required:!0}},emits:[dd.events.VIDEO_AD_COMPLETED],data:()=>({isPlaywireAdAvailable:!0,isModalVisible:!1,isInfoTextVisible:!1,playwireVideoPlayerContainerId:"playwire-video-player"}),computed:{internalVideoAdUrl(){const{internalVideoAdGeneric:i,internalVideoAdPuzzles:s}=dd.routes;return Math.random()<.5?i:s},customVideoPlayerControls:()=>({muted:!0,controlBar:{playToggle:!1,pictureInPictureToggle:!1,fullscreenToggle:!1,progressControl:!1,playbackRateMenuButton:!1}}),infoText(){return this.$trans("Watch this video to get more puzzles!")}},mounted(){this.show(),this.initPlaywireVideoPlayer(),this.attachInternalVideoEventHandlers()},methods:{show(){this.isModalVisible=!0},hide(){this.isModalVisible=!1},pauseInternalVideo(){O.Z.emit(fd)},playInternalVideo(){O.Z.emit(gd)},closeVideoAd(){this.removeInternalVideoEventHandlers(),this.hide(),window.Bolt.removeVideo(this.playwireVideoPlayerContainerId),this.$nextTick((()=>{this.$destroy()}))},handleInternalVideoClicked(){window.open(dd.routes.membership,"_blank")},handleVideoAdCompleted(i){xc.Z.logEvent(dd.amplitudeEvents.VIDEO_AD_COMPLETED,{videoType:i,mode:this.premiumFeatureCode}),this.$emit(dd.events.VIDEO_AD_COMPLETED),this.closeVideoAd()},initPlaywireVideoPlayer(){(i=>{const s=document.createElement("script");s.src=dd.playwireConstants.scriptSrc,s.type="text/javascript",s.setAttribute("data-config",dd.playwireConstants.configSrc),s.setAttribute("data-width","100%"),s.setAttribute("data-height","100%"),s.setAttribute("data-id",i),s.setAttribute("data-autoload",!1),document.body.appendChild(s)})(this.playwireVideoPlayerContainerId),this.waitForPlayerAndAttachListeners()},waitForPlayerAndAttachListeners(){let i=0;const s=window.setInterval((()=>{if(window.Bolt){if(window.chesscom&&void 0!==window.chesscom.adBlockDetected?window.chesscom.adBlockDetected:window.PageOS&&window.PageOS.environment&&void 0!==window.PageOS.environment.adBlock?window.PageOS.environment.adBlock:window.Bolt&&window.Bolt.adBlockDetected&&window.Bolt.adBlockDetected())return(0,Gi.x2)(this.$trans("Please disable ad-blocking on your browser in order to watch this video")),window.clearInterval(s),void this.closeVideoAd();window.Bolt.on(this.playwireVideoPlayerContainerId,window.Bolt.BOLT_AD_STARTED,(()=>{this.isInfoTextVisible=!0,xc.Z.logEvent(dd.amplitudeEvents.VIDEO_AD_STARTED,{videoType:dd.videoAdTypes.PLAYWIRE,mode:this.premiumFeatureCode})})),window.Bolt.on(this.playwireVideoPlayerContainerId,window.Bolt.BOLT_AD_COMPLETE,(()=>{this.handleVideoAdCompleted(dd.videoAdTypes.PLAYWIRE),window.Bolt.removeVideo(this.playwireVideoPlayerContainerId)})),window.Bolt.on(this.playwireVideoPlayerContainerId,window.Bolt.BOLT_AD_ERROR,(()=>{this.isPlaywireAdAvailable=!1,window.Bolt.removeVideo(this.playwireVideoPlayerContainerId)})),window.Bolt.renderPlayer(this.playwireVideoPlayerContainerId),window.clearInterval(s)}else i>20&&window.clearInterval(s);i++}),100)},attachInternalVideoEventHandlers(){O.Z.on(pd,this.handleInternalVideoClicked),O.Z.once(yd,(()=>{xc.Z.logEvent(dd.amplitudeEvents.VIDEO_AD_STARTED,{videoType:dd.videoAdTypes.INTERNAL,mode:this.premiumFeatureCode}),window.addEventListener("focus",this.playInternalVideo),window.addEventListener("blur",this.pauseInternalVideo)})),O.Z.once(md,(()=>this.handleVideoAdCompleted(dd.videoAdTypes.INTERNAL)))},removeInternalVideoEventHandlers(){O.Z.off(pd),O.Z.off(yd),O.Z.off(md),window.removeEventListener("focus",this.playInternalVideo),window.removeEventListener("blur",this.pauseInternalVideo)}}},Rd=Ld,Nd={overlay:"modal-video-ad-overlay",modal:"modal-video-ad-modal",close:"modal-video-ad-close",tooltip:"modal-video-ad-tooltip"};var Dd=(0,Rr.Z)(Rd,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return i.isModalVisible?_("div",[_("div",{class:i.$style.overlay}),i._v(" "),_("div",{class:i.$style.modal},[i.isPlaywireAdAvailable?_("div",{attrs:{id:i.playwireVideoPlayerContainerId}}):_("div",[_("video-player",{attrs:{src:i.internalVideoAdUrl,"custom-player-config":i.customVideoPlayerControls},on:{"video-clicked":i.handleInternalVideoClicked}})],1),i._v(" "),_("div",{staticClass:"icon-font-chess circle-x",class:i.$style.close,on:{click:i.closeVideoAd}}),i._v(" "),i.isInfoTextVisible?_("div",{staticClass:"tooltip bottom",class:i.$style.tooltip},[_("span",{staticClass:"arrow"}),i._v(" "),_("span",{staticClass:"inner",domProps:{innerHTML:i._s(i.infoText)}})]):i._e()])]):i._e()}),[],!1,(function modal_video_ad_injectStyles(i){this.$style=Nd.locals||Nd}),null,null),jd=Dd.exports;var services_getRewardToken=i=>ca.Z.get(dd.routes.getRewardToken(i)).then((i=>({token:i.data.reward,userPropertyKey:i.data.userPropertyKey,userPropertyValue:i.data.userPropertyValue,isDryRun:i.data.isDryRun}))),services_claimReward=i=>ca.Z.post(dd.routes.claimReward(i)),Bd=__webpack_require__(97203),$d=Object.defineProperty,Ud=Object.defineProperties,Fd=Object.getOwnPropertyDescriptors,Hd=Object.getOwnPropertySymbols,qd=Object.prototype.hasOwnProperty,Vd=Object.prototype.propertyIsEnumerable,modal_trial_puzzle_streaksvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?$d(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,modal_trial_puzzle_streaksvue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))qd.call(s,_)&&modal_trial_puzzle_streaksvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(Hd)for(var _ of Hd(s))Vd.call(s,_)&&modal_trial_puzzle_streaksvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},modal_trial_puzzle_streaksvue_type_script_lang_js_spreadProps=(i,s)=>Ud(i,Fd(s)),Gd={name:"ModalTrialPuzzleStreaks",components:{Modal:Tr.Modal,OutsideClose:Tr.OutsideClose,V5Button:Tr.V5Button,LimitReachedActiveStreak:ad,LimitReachedNotActiveStreak:cd},data:()=>({isFetchingRewardToken:!1,tokenExpireTime:3e4,tokenExpireIntervalId:null,rewardToken:null,userProps:null,isDryRun:!1,shouldRewardedVideoAnimate:!1}),computed:modal_trial_puzzle_streaksvue_type_script_lang_js_spreadProps(modal_trial_puzzle_streaksvue_type_script_lang_js_spreadValues({},(0,dr.mapState)({currentUserRatingInfo:i=>i.puzzlesRated.currentUserRatingInfo,eligibleFirstTrial:i=>i.user.eligibleFirstTrial,gameplayState:i=>i.puzzles.gameplayState,puzzleMode:i=>i.puzzles.puzzleMode,ratedLimitPerDay:i=>i.puzzles.reachedLimits.ratedLimitPerDay,stats:i=>i.puzzles.stats})),{dailyPuzzleLimit(){if("inf"!==this.ratedLimitPerDay)return parseInt(this.ratedLimitPerDay,10)},streakData(){return this.gameplayState===_n.START?this.stats:this.currentUserRatingInfo},isInActiveStreak(){return this.streakData.currentStreak>0},limitReachedText:()=>(0,j.dW)("Youve hit your daily limit"),titleText(){return this.isInActiveStreak?(0,j.dW)("Continue your streak to set a new record!"):(0,j.dW)("Keep it going!")},subtitleText:()=>(0,j.dW)("Try Premium to Continue Solving Puzzles"),buttonText(){return this.eligibleFirstTrial?this.isInActiveStreak?(0,j.dW)("Continue with Free Trial"):(0,j.dW)("Try Free for 7 days"):(0,j.dW)("Go Premium to Continue")},amountNeededForHighestStreak(){const{currentStreak:i,highestStreak:s}=this.streakData;return i>=s?1:s-i+1},membershipRoute(){return D.Z.generate("web_membership",{c:getAmplitudeReferral(this.puzzleMode)})},isRewardedVideoEligible(){return this.rewardToken},hasRewardedVideoFeatureAccess:()=>(0,rr.FR)("video_puzzles_rewards"),shouldShowRewardedVideoOption(){return this.isRewardedVideoEligible&&this.hasRewardedVideoFeatureAccess&&!this.isDryRun},rewardedVideoText:()=>(0,j.dW)("OR Watch a Video to Continue"),rewardedVideoImgUrls:()=>({src:(0,Ja.n)("/bundles/web/images/rewarded-video.png"),srcSet:(0,Bd.b)("/bundles/web/images/rewarded-video.png")})}),methods:modal_trial_puzzle_streaksvue_type_script_lang_js_spreadProps(modal_trial_puzzle_streaksvue_type_script_lang_js_spreadValues({},(0,dr.mapActions)({nextPuzzle:"puzzlesRated/nextPuzzle",startResumeMode:"puzzles/startResumeMode"})),{getRewardedVideoToken(){return this.isFetchingRewardToken=!0,services_getRewardToken(dd.premiumFeatureCodes.PUZZLES_RATED).then((({token:i,userPropertyKey:s,userPropertyValue:_,isDryRun:T})=>{this.rewardToken=i,this.userProps={[s]:_},this.isDryRun=T,T||this.startTokenExpireHandler()})).catch((()=>{this.rewardToken=null})).finally((()=>{this.isFetchingRewardToken=!1}))},startTokenExpireHandler(){this.tokenExpireIntervalId=window.setTimeout((()=>{this.isFetchingRewardToken||this.getRewardedVideoToken()}),this.tokenExpireTime)},handleRewardedVideo(){this.hide(),xc.Z.logEvent(dd.amplitudeEvents.VIDEO_AD_OPTION_CLICKED,{mode:dd.premiumFeatureCodes.PUZZLES_RATED}),(({rewardToken:i,rewardClaimedHandler:s,premiumFeatureCode:_})=>{const T=document.createElement("div");document.body.appendChild(T);const S=new(Dr.default.extend(jd))({propsData:{premiumFeatureCode:_}});S.$on(dd.events.VIDEO_AD_COMPLETED,(()=>{services_claimReward(i).then((()=>{s()}))})),S.$mount(T)})({rewardToken:this.rewardToken,rewardClaimedHandler:()=>{this.$store.commit("puzzles/setReachedLimits",modal_trial_puzzle_streaksvue_type_script_lang_js_spreadProps(modal_trial_puzzle_streaksvue_type_script_lang_js_spreadValues({},this.$store.state.puzzles.reachedLimits),{[vn.RATED]:!1})),this.gameplayState===_n.START?this.startResumeMode():this.nextPuzzle()},premiumFeatureCode:dd.premiumFeatureCodes.PUZZLES_RATED}),this.rewardToken=null},handleStreakCircleAnimationEnd(){this.isRewardedVideoEligible&&this.hasRewardedVideoFeatureAccess&&this.animateRewardedVideoIcon()},handleModalDidHide(){this.hasRewardedVideoFeatureAccess&&(this.shouldRewardedVideoAnimate=!1,window.clearInterval(this.tokenExpireIntervalId))},handleModalShown(){this.$refs.modalContainer.show(),(0,ed.C)(getAmplitudeReferral(this.puzzleMode)),this.shouldShowRewardedVideoOption&&!this.isInActiveStreak&&this.$nextTick(this.animateRewardedVideoIcon),this.shouldShowRewardedVideoOption&&xc.Z.logEvent(dd.amplitudeEvents.VIDEO_AD_OPTION_SHOWN,{mode:dd.premiumFeatureCodes.PUZZLES_RATED},this.userProps),this.isDryRun&&xc.Z.logEvent(dd.amplitudeEvents.VIDEO_AD_OPTION_SHOWN_DRY_RUN,{mode:dd.premiumFeatureCodes.PUZZLES_RATED},this.userProps)},animateRewardedVideoIcon(){const i=Number(kr.Z.get("rewarded_video_animation_count"));i>=3||(this.shouldRewardedVideoAnimate=!0,kr.Z.set("rewarded_video_animation_count",i+1))},show(){this.hasRewardedVideoFeatureAccess?this.getRewardedVideoToken().finally((()=>{this.handleModalShown()})):this.handleModalShown()},hide(){this.$refs.modalContainer.hide()}})},Zd=Gd,Wd={modal:"modal-trial-puzzle-streaks-modal","limit-reached-text":"modal-trial-puzzle-streaks-limit-reached-text",title:"modal-trial-puzzle-streaks-title","large-title":"modal-trial-puzzle-streaks-large-title",subtitle:"modal-trial-puzzle-streaks-subtitle",footer:"modal-trial-puzzle-streaks-footer","footer-button":"modal-trial-puzzle-streaks-footer-button","rewarded-video-wrapper":"modal-trial-puzzle-streaks-rewarded-video-wrapper","rewarded-video-text":"modal-trial-puzzle-streaks-rewarded-video-text",shake:"modal-trial-puzzle-streaks-shake"};var Kd=(0,Rr.Z)(Zd,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("modal",{ref:"modalContainer",attrs:{corners:"rounded-lg","modal-width":"md","close-on-action":!0},on:{"modal-did-hide":i.handleModalDidHide}},[_("div",{class:i.$style.modal},[_("outside-close",{on:{click:function(s){return i.hide()}}}),i._v(" "),_("div",{class:i.$style.header},[_("h3",{class:i.$style["limit-reached-text"],domProps:{textContent:i._s(i.limitReachedText)}}),i._v(" "),_("h2",{class:[i.$style.title,!i.isInActiveStreak&&i.$style["large-title"]],domProps:{textContent:i._s(i.titleText)}}),i._v(" "),_("h3",{class:i.$style.subtitle,domProps:{textContent:i._s(i.subtitleText)}})]),i._v(" "),_("div",{class:i.$style.body},[i.isInActiveStreak?_("limit-reached-active-streak",{attrs:{"highest-streak":i.streakData.highestStreak,"current-streak":i.streakData.currentStreak,"amount-needed-for-highest-streak":i.amountNeededForHighestStreak},on:{"animation-end":i.handleStreakCircleAnimationEnd}}):_("limit-reached-not-active-streak",{attrs:{"daily-puzzle-limit":i.dailyPuzzleLimit}})],1),i._v(" "),_("div",{class:i.$style.footer},[_("v5-button",{class:i.$style["footer-button"],attrs:{"full-width":"",size:"large",href:i.membershipRoute,theme:"secondary"},domProps:{textContent:i._s(i.buttonText)},on:{click:i.hide}})],1),i._v(" "),i.shouldShowRewardedVideoOption?_("div",{class:i.$style["rewarded-video-wrapper"]},[_("img",{class:[i.shouldRewardedVideoAnimate&&i.$style.shake],attrs:{src:i.rewardedVideoImgUrls.src,alt:i.rewardedVideoText,srcset:i.rewardedVideoImgUrls.srcSet,width:"36",height:"30"},on:{click:i.handleRewardedVideo}}),i._v(" "),_("span",{class:i.$style["rewarded-video-text"],domProps:{textContent:i._s(i.rewardedVideoText)},on:{click:i.handleRewardedVideo}})]):i._e()],1)])}),[],!1,(function modal_trial_puzzle_streaks_injectStyles(i){this.$style=Wd.locals||Wd}),null,null),Yd=Kd.exports,Xd=Object.defineProperty,Qd=Object.defineProperties,Jd=Object.getOwnPropertyDescriptors,eh=Object.getOwnPropertySymbols,th=Object.prototype.hasOwnProperty,nh=Object.prototype.propertyIsEnumerable,modal_trialvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?Xd(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,rh={name:"PremiumModal",components:{ModalTrial:Xu.Z},data:()=>({referral:tr,translations:Object.freeze(er)}),computed:((i,s)=>Qd(i,Jd(s)))(((i,s)=>{for(var _ in s||(s={}))th.call(s,_)&&modal_trialvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(eh)for(var _ of eh(s))nh.call(s,_)&&modal_trialvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i})({},(0,dr.mapState)({eligibleFirstTrial:i=>i.user.eligibleFirstTrial,puzzleMode:i=>i.puzzles.puzzleMode})),{buttonText(){return this.eligibleFirstTrial?this.translations.trialButton:this.translations.upgradeButton},titleText(){let i=this.translations.trialUnlimitedPuzzlesTitle;return this.puzzleMode!==vn.RUSH&&this.puzzleMode!==vn.BATTLE||(i=this.translations.trialUnlimitedRushTitle),this.puzzleMode===vn.BATTLE&&(i=this.translations.trialUnlimitedBattlesTitle),i}}),methods:{getAmplitudeReferral:getAmplitudeReferral,getModalStartingSlide:getModalStartingSlide,show(){this.$refs.modalTrial.show()}}},ih=rh,ah=(0,Rr.Z)(ih,(function(){var i=this,s=i.$createElement;return(i._self._c||s)("modal-trial",{ref:"modalTrial",attrs:{referral:i.getAmplitudeReferral(i.puzzleMode),"starting-slide":i.getModalStartingSlide(i.puzzleMode),title:i.titleText}})}),[],!1,null,null,null).exports,sh=__webpack_require__(12344),oh=Object.defineProperty,lh=Object.defineProperties,ch=Object.getOwnPropertyDescriptors,uh=Object.getOwnPropertySymbols,dh=Object.prototype.hasOwnProperty,hh=Object.prototype.propertyIsEnumerable,settings_modalvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?oh(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,settings_modalvue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))dh.call(s,_)&&settings_modalvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(uh)for(var _ of uh(s))hh.call(s,_)&&settings_modalvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},ph={name:"SettingsModal",components:{ModalChessboardContainer:bi,ModalContent:yi.Z,SectionTitleDismissible:sh.Z,V5Select:Tr.V5Select,V5Switch:Tr.V5Switch},data:()=>({gameModes:Object.freeze(vn),showDetailsSettings:An}),computed:settings_modalvue_type_script_lang_js_spreadValues({},(0,dr.mapState)({showDetails:({puzzles:i})=>i.showDetails,showTimer:({puzzles:i})=>i.showTimer})),methods:((i,s)=>lh(i,ch(s)))(settings_modalvue_type_script_lang_js_spreadValues({},(0,dr.mapActions)({saveShowDetails:"puzzles/saveShowDetails",saveShowTimer:"puzzles/saveShowTimer"})),{hide(){this.$refs.modalContainer.hide()},show(){this.$refs.modalContainer.show()}})},mh=ph,fh={modal:"settings-modal-modal",select:"settings-modal-select",setting:"settings-modal-setting"};var gh=(0,Rr.Z)(mh,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("modal-chessboard-container",{ref:"modalContainer"},[_("modal-content",{class:i.$style.modal},[_("section-title-dismissible",{on:{close:i.hide}},[i._v("\n      "+i._s(i.$trans("Settings"))+"\n    ")]),i._v(" "),_("div",{class:i.$style.setting},[_("v5-select",{class:i.$style.select,attrs:{"force-theme":"light",options:i.showDetailsSettings,value:i.showDetails},on:{input:function(s){return i.saveShowDetails(s)}}})],1),i._v(" "),_("div",{class:i.$style.setting},[_("label",{attrs:{for:"show-timer"},domProps:{textContent:i._s(i.$trans("Show Timer"))}}),i._v(" "),i.gameModes.RATED?_("v5-switch",{attrs:{name:"show-timer",value:i.showTimer},on:{input:function(s){return i.saveShowTimer(s)}}}):i._e()],1)],1)],1)}),[],!1,(function settings_modal_injectStyles(i){this.$style=fh.locals||fh}),null,null),vh=gh.exports,bh=__webpack_require__(43898),yh=__webpack_require__(7537),_h=Object.defineProperty,wh=Object.defineProperties,kh=Object.getOwnPropertyDescriptors,Th=Object.getOwnPropertySymbols,Sh=Object.prototype.hasOwnProperty,Ch=Object.prototype.propertyIsEnumerable,share_menu_containervue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?_h(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,share_menu_containervue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))Sh.call(s,_)&&share_menu_containervue_type_script_lang_js_defNormalProp(i,_,s[_]);if(Th)for(var _ of Th(s))Ch.call(s,_)&&share_menu_containervue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},xh={name:"ShareMenuDialogContainer",components:{ShareMenu:yh.Z},data:()=>({excludedTabs:[bh.eA.GIF.key,bh.eA.EMBED.key],initialDiagramOptions:{isPuzzle:!1,nodeLimit:{}},shareUrl:null}),computed:((i,s)=>wh(i,kh(s)))(share_menu_containervue_type_script_lang_js_spreadValues(share_menu_containervue_type_script_lang_js_spreadValues({},(0,dr.mapGetters)({loggedIn:"user/isLoggedIn",fen:"game/getCurrentFen"})),(0,dr.mapState)({boardOptions:i=>i.board.boardOptions,boardSettings:i=>i.board.settings,game:i=>i.game,pgn:({puzzles:i})=>i.puzzle.pgn})),{tcn(){return this.game.tcn}}),methods:{show(){this.$refs.shareMenu.show()},selectTab(i){this.$refs.shareMenu.activeTab=i}}},Eh=xh,Ph=(0,Rr.Z)(Eh,(function(){var i=this,s=i.$createElement;return(i._self._c||s)("share-menu",{ref:"shareMenu",attrs:{"board-options":i.boardOptions,"board-settings":i.boardSettings,"excluded-tabs":i.excludedTabs,pgn:i.pgn,fen:i.fen,tcn:i.tcn,variant:i.game.variant,"initial-diagram-options":i.initialDiagramOptions,"is-logged-in":i.loggedIn,"share-url":i.shareUrl}})}),[],!1,null,null,null).exports;const Ah="playwire",Oh="top",Mh="no-ads",zh="sidebar_tall",Ih=[{selectorId:"top-leaderboard",type:"leaderboard_atf"},{selectorId:"bottom-leaderboard",type:"leaderboard_btf"},{selectorId:"sky-atf",type:"sky_atf"},{selectorId:"modal-med-rect",type:"med_rect_atf"},{selectorId:"top-med-rect",type:"med_rect_atf"},{selectorId:"bottom-med-rect",type:"med_rect_btf"}],Lh=["article","articles","blog","blogs","computer-chess-championship","4-player-chess","daily","forum","home","live","news","play","puzzles","today","tournaments","tv","votechess"];var Rh=__webpack_require__(9975);var Nh=new class playwire_PlaywireHelper{constructor(){window.tyche={mode:"tyche",config:"https://config.playwire.com/1024308/v2/websites/72720/banner.json",passiveMode:!0,onReady:()=>{this.loadUnits(this.getPath())}}}init(){Rh.Z.insert("//cdn.intergient.com/pageos/pageos.js",{id:"tyche"})}displayUnits(){window.tyche.addUnits(Ih).then((()=>{window.tyche.displayUnits()})).catch((()=>{window.tyche.displayUnits()}))}loadUnits(i){try{i&&window.tyche.setPath(i),this.displayUnits()}catch(s){}}reloadUnits(){try{window.tyche.destroyUnits("all"),this.displayUnits()}catch(i){}}getPath(){const i=window.location.pathname.split("/");return window.Config.adCustomPath?window.Config.adCustomPath:(2===i[1].length&&i.splice(1,1),"computer"!==i[2]?Lh.includes(i[1])?i[1]:"ROS":void 0)}};const Dh=new class AdHelperClass{constructor(){this.providers={},this.counter=0,window.loadEventFired?this.onWindowLoad():window.addEventListener("load",this.onWindowLoad.bind(this))}registerAdSlot(i,s){i in this.providers||(this.providers[i]=[]),-1===this.providers[i].indexOf(s)&&this.providers[i].push(s)}onWindowLoad(){window.loadEventFired=!0,window.removeEventListener("load",this.onWindowLoad),Object.keys(this.providers).length>0&&Nh.init()}};var jh={name:"IframeAd",props:{provider:{type:String,default:"tms"},slotId:{type:String,required:!0},sticky:{type:Boolean,default:!1}},computed:{adCssClass(){let i="";return"tms"===this.provider&&(i=this.sticky?"tmsads tmsads-sticky":"tmsads"),i}},mounted(){Dh.registerAdSlot(this.provider,this.slotId)}},Bh=(0,Rr.Z)(jh,(function(){var i=this,s=i.$createElement;return(i._self._c||s)("div",{class:i.adCssClass,attrs:{id:i.slotId}})}),[],!1,null,null,null).exports,$h={name:"PlaceholderAd",props:{goPremiumLink:{type:String,required:!0}},data(){return{labels:{hideAds:this.$trans("Remove Ads")}}},methods:{handleClick(){ac({referral:"no-ads",startingSlide:"no-ads",title:this.$trans("Want To Remove Ads?")})}}},Uh=(0,Rr.Z)($h,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{staticClass:"placeholder-ad-upgrade"},[_("a",{staticClass:"placeholder-ad-link",attrs:{target:"_blank",href:i.goPremiumLink},on:{click:function(s){return s.preventDefault(),i.handleClick.apply(null,arguments)}}},[i._v("\n    "+i._s(i.labels.hideAds)+"\n  ")])])}),[],!1,null,null,null),Fh={components:{PlaceholderAd:Uh.exports,iframeAd:Bh},props:{position:{type:String,required:!1,default:Oh},provider:{type:String,default:Ah},slotId:{type:String,required:!1},goPremiumLink:{type:String,default:D.Z.generate("web_membership",{c:Mh})}}},Hh=(0,ma.defineComponent)({el:"#sidebar-ad",name:"TallSidebarAd",mixins:[Fh],computed:{enable:()=>!(i=>{const s=window.Config["ad.noAds"]||!1,_=window.Config["ad.disabledAds"]||[];return!!(null!==window.navigator.userAgent.match(/PTST\/SpeedCurve/i)||(0,ar.jl)()&&-1!==["SmokeTestDiamond","NightwatchTest"].indexOf((0,ar.gK)("getUsername")))||!!(0,rr.FR)("hide_ads_in_some_countries")||s||-1!==_.indexOf(i)})(zh),adUnitId:()=>"sky-atf"}}),qh={component:"tall-sidebar-ad-component",iframe:"tall-sidebar-ad-iframe"};var Vh=(0,Rr.Z)(Hh,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return i.enable?_("div",{class:i.$style.component},[_("iframe-ad",{class:i.$style.iframe,attrs:{provider:i.provider,"slot-id":i.adUnitId,"go-premium-link":i.goPremiumLink}}),i._v(" "),_("placeholder-ad",{attrs:{"go-premium-link":i.goPremiumLink}})],1):i._e()}),[],!1,(function tall_sidebar_ad_injectStyles(i){this.$style=qh.locals||qh}),null,null),Gh={name:"SidebarAd",components:{TallSidebarAd:Vh.exports}},Zh=(0,Rr.Z)(Gh,(function(){var i=this.$createElement;return(this._self._c||i)("tall-sidebar-ad",{attrs:{"slot-id":"div-gpt-ad-1555437239121-0"}})}),[],!1,null,null,null).exports;const millisecondsToMinutes=i=>Math.round(i/60/1e3),millisecondsToSeconds=i=>Math.round(i/1e3),secondsToMinutesAndSecondsObject=({padSeconds:i=!1,seconds:s})=>{const _=Math.ceil(s),T=Math.floor(_/60);let S=_%60;return i&&(S=`0${S}`,S=S.substring(S.length-2)),{mins:T,secs:S}},secondsToMinutesAndSecondsString=i=>{const{mins:s,secs:_}=secondsToMinutesAndSecondsObject({padSeconds:!0,seconds:i});return`${s}:${_}`};var Wh=Object.defineProperty,Kh=Object.getOwnPropertySymbols,Yh=Object.prototype.hasOwnProperty,Xh=Object.prototype.propertyIsEnumerable,handle_rush_archive_route_defNormalProp=(i,s,_)=>s in i?Wh(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_;const handleRushArchiveRoute=({router:i,isInitialPagePayload:s})=>{if(i.currentRoute.name===Hn.RUSH_ARCHIVE){if(s)st.default.commit("puzzlesRush/setIsResolvingToArchiveState",!0);else if(!st.default.state.puzzlesRush.isResolvingToArchiveState)return;const{params:_}=i.currentRoute,T=_.uuid||(()=>{const i=document.getElementById(jn);return JSON.parse(i.getAttribute("data-rush-id"))})();st.default.commit("puzzlesRush/assignArchivedPuzzleChallenge",((i,s)=>{for(var _ in s||(s={}))Yh.call(s,_)&&handle_rush_archive_route_defNormalProp(i,_,s[_]);if(Kh)for(var _ of Kh(s))Xh.call(s,_)&&handle_rush_archive_route_defNormalProp(i,_,s[_]);return i})({challengeId:T},_)),loadPuzzleChallenge(T)}};var Qh=__webpack_require__(70528);const createRequestWithRetries=(i,{backoffActions:s,backoffLimit:_=10,failOnStatusCodes:T=[403]}={})=>{const S=s&&[...s];return()=>new Promise(((i,s)=>{requestWithRetries(i,s)}));async function requestWithRetries(s,C,P=_){var O;try{s(await i())}catch(M){if(T.includes(null==(O=null==M?void 0:M.response)?void 0:O.status))return void C(M);S?function retryWithProvidedAction(i,s,_){const{action:T,retryTimeout:C}=(null==S?void 0:S.shift())||{};if(null==T||T(),void 0===C)return void s(_);setTimeout((()=>{requestWithRetries(i,s)}),C)}(s,C,M):function retryForever(i,s,_){_>0?requestWithRetries(i,s,_-1):setTimeout((()=>{requestWithRetries(i,s,0)}),3e3)}(s,C,P)}}},Jh="please-wait",ep="cannot-connect",tp={pleaseWait:()=>Qh.Z.add({id:Jh,icon:"circle-danger",content:(0,j.dW)("Please wait, it's taking longer than usual to connect.")}),connectionFailed:()=>Qh.Z.add({id:ep,icon:"circle-danger",content:(0,j.dW)("Connection failed.")})},np=[{retryTimeout:0},{retryTimeout:250},{retryTimeout:750},{retryTimeout:2e3},{retryTimeout:2e3,action:tp.pleaseWait},{retryTimeout:5e3},{retryTimeout:5e3},{retryTimeout:5e3},{retryTimeout:5e3},{retryTimeout:5e3},{action:tp.connectionFailed}],loadPuzzleChallenge=i=>(st.default.commit("puzzles/setGameplayState",_n.FINISHED),st.default.commit("puzzlesRush/setSidebarView",rn),dn.loadPuzzleChallenge=(i=>ca.Z.get(Vt.viewChallenge(i)))(i).then((({data:i})=>{if(!st.default.state.puzzlesRush.isResolvingToArchiveState)return;const{duration:s,problems:_,challengeRanks:T}=i;if(Array.isArray(_)){const i=(({duration:i,problems:s})=>{const _=1e3*Math.round(i/s.length);return s.map((i=>({duration:_,id:i.problemId,initialFen:i.initialFen,label:i.rating,rating:i.rating,solved:i.isComplete?i.isPassed:null,flipBoard:i.userColor===qt})))})({duration:s,problems:_});st.default.commit("puzzlesRush/setRoundResults",i)}delete i.problems,st.default.commit("puzzlesRush/setChallengeRanks",T),st.default.commit("puzzlesRush/assignArchivedPuzzleChallenge",i),st.default.commit("puzzles/setTimeConstraint",Tn[i.type],{root:!0}),O.Z.emit(Lt),st.default.commit("puzzlesRush/setIsResolvingToArchiveState",!1)})),dn.loadPuzzleChallenge),helpers_formatTimer=({finishTime:i,startTime:s,totalTime:_})=>{const T=Math.ceil((i-s)/1e3);let S=Math.floor(T/60),C=`0${Math.ceil(T%60)}`;C=C.substr(C.length-2);const P=millisecondsToMinutes(_);return S>=P&&(S=P,C="00"),{minutes:S,seconds:C}},formatFinalSessionTime=({sessionEnd:i,sessionStart:s,totalTime:_})=>(({finishTime:i,totalTime:s,startTime:_})=>{let{minutes:T,seconds:S}=helpers_formatTimer({finishTime:i,totalTime:s,startTime:_});return T=Math.max(millisecondsToMinutes(s)-T,0),parseInt(S,10)>0&&(T-=1),S=60-Number(S),S=60===S?0:S,S=`0${S}`,S=S.substr(S.length-2),{minutes:T,seconds:S}})({finishTime:i,totalTime:_,startTime:s});var rp=Object.defineProperty,ip=Object.defineProperties,ap=Object.getOwnPropertyDescriptors,sp=Object.getOwnPropertySymbols,op=Object.prototype.hasOwnProperty,lp=Object.prototype.propertyIsEnumerable,sidebarvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?rp(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,cp={name:"PuzzleSidebar",watch:{$route({name:i}){this.showModalIntro(i),handleRushArchiveRoute({isInitialPagePayload:!0,router:this.$router}),this.handleBack(i)}},mounted(){const i=this.$router.currentRoute.name;handleRushArchiveRoute({isInitialPagePayload:!0,router:this.$router}),this.showModalIntro(i)},methods:((i,s)=>ip(i,ap(s)))(((i,s)=>{for(var _ in s||(s={}))op.call(s,_)&&sidebarvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(sp)for(var _ of sp(s))lp.call(s,_)&&sidebarvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i})({},(0,dr.mapActions)({resetGame:"game/resetGame"})),{handleBack(i){i||(O.Z.emit(re),O.Z.emit(Mt),this.resetGame())},showModalIntro(i){const s=`puzzles-welcome-modal-${i}`;i&&![Hn.BATTLE,Hn.LEARNING,Hn.RATED,Hn.RUSH].includes(i)||null!==window.localStorage.getItem(s)?O.Z.emit(pn):(O.Z.emit(gn),window.localStorage.setItem(s,!0))}})},up=cp,dp={component:"sidebar-component",view:"sidebar-view"};var hp=(0,Rr.Z)(up,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("section",{staticClass:"v5-section",class:i.$style.component},[_("router-view",{class:i.$style.view})],1)}),[],!1,(function sidebar_injectStyles(i){this.$style=dp.locals||dp}),null,null),pp=hp.exports;const relativeBase=({base:i,urlPath:s})=>{const _=s.indexOf(i);return-1===_?i:s.substr(0,_+i.length)};function extend(i,s){for(var _ in s)i[_]=s[_];return i}var mp=/[!'()*]/g,encodeReserveReplacer=function(i){return"%"+i.charCodeAt(0).toString(16)},fp=/%2C/g,encode=function(i){return encodeURIComponent(i).replace(mp,encodeReserveReplacer).replace(fp,",")};function decode(i){try{return decodeURIComponent(i)}catch(s){0}return i}var castQueryParamValue=function(i){return null==i||"object"==typeof i?i:String(i)};function parseQuery(i){var s={};return(i=i.trim().replace(/^(\?|#|&)/,""))?(i.split("&").forEach((function(i){var _=i.replace(/\+/g," ").split("="),T=decode(_.shift()),S=_.length>0?decode(_.join("=")):null;void 0===s[T]?s[T]=S:Array.isArray(s[T])?s[T].push(S):s[T]=[s[T],S]})),s):s}function stringifyQuery(i){var s=i?Object.keys(i).map((function(s){var _=i[s];if(void 0===_)return"";if(null===_)return encode(s);if(Array.isArray(_)){var T=[];return _.forEach((function(i){void 0!==i&&(null===i?T.push(encode(s)):T.push(encode(s)+"="+encode(i)))})),T.join("&")}return encode(s)+"="+encode(_)})).filter((function(i){return i.length>0})).join("&"):null;return s?"?"+s:""}var vp=/\/?$/;function createRoute(i,s,_,T){var S=T&&T.options.stringifyQuery,C=s.query||{};try{C=clone(C)}catch(O){}var P={name:s.name||i&&i.name,meta:i&&i.meta||{},path:s.path||"/",hash:s.hash||"",query:C,params:s.params||{},fullPath:getFullPath(s,S),matched:i?formatMatch(i):[]};return _&&(P.redirectedFrom=getFullPath(_,S)),Object.freeze(P)}function clone(i){if(Array.isArray(i))return i.map(clone);if(i&&"object"==typeof i){var s={};for(var _ in i)s[_]=clone(i[_]);return s}return i}var bp=createRoute(null,{path:"/"});function formatMatch(i){for(var s=[];i;)s.unshift(i),i=i.parent;return s}function getFullPath(i,s){var _=i.path,T=i.query;void 0===T&&(T={});var S=i.hash;return void 0===S&&(S=""),(_||"/")+(s||stringifyQuery)(T)+S}function isSameRoute(i,s,_){return s===bp?i===s:!!s&&(i.path&&s.path?i.path.replace(vp,"")===s.path.replace(vp,"")&&(_||i.hash===s.hash&&isObjectEqual(i.query,s.query)):!(!i.name||!s.name)&&(i.name===s.name&&(_||i.hash===s.hash&&isObjectEqual(i.query,s.query)&&isObjectEqual(i.params,s.params))))}function isObjectEqual(i,s){if(void 0===i&&(i={}),void 0===s&&(s={}),!i||!s)return i===s;var _=Object.keys(i).sort(),T=Object.keys(s).sort();return _.length===T.length&&_.every((function(_,S){var C=i[_];if(T[S]!==_)return!1;var P=s[_];return null==C||null==P?C===P:"object"==typeof C&&"object"==typeof P?isObjectEqual(C,P):String(C)===String(P)}))}function handleRouteEntered(i){for(var s=0;s<i.matched.length;s++){var _=i.matched[s];for(var T in _.instances){var S=_.instances[T],C=_.enteredCbs[T];if(S&&C){delete _.enteredCbs[T];for(var P=0;P<C.length;P++)S._isBeingDestroyed||C[P](S)}}}}var yp={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function render(i,s){var _=s.props,T=s.children,S=s.parent,C=s.data;C.routerView=!0;for(var P=S.$createElement,O=_.name,M=S.$route,R=S._routerViewCache||(S._routerViewCache={}),D=0,j=!1;S&&S._routerRoot!==S;){var $=S.$vnode?S.$vnode.data:{};$.routerView&&D++,$.keepAlive&&S._directInactive&&S._inactive&&(j=!0),S=S.$parent}if(C.routerViewDepth=D,j){var U=R[O],V=U&&U.component;return V?(U.configProps&&fillPropsinData(V,C,U.route,U.configProps),P(V,C,T)):P()}var Z=M.matched[D],Y=Z&&Z.components[O];if(!Z||!Y)return R[O]=null,P();R[O]={component:Y},C.registerRouteInstance=function(i,s){var _=Z.instances[O];(s&&_!==i||!s&&_===i)&&(Z.instances[O]=s)},(C.hook||(C.hook={})).prepatch=function(i,s){Z.instances[O]=s.componentInstance},C.hook.init=function(i){i.data.keepAlive&&i.componentInstance&&i.componentInstance!==Z.instances[O]&&(Z.instances[O]=i.componentInstance),handleRouteEntered(M)};var X=Z.props&&Z.props[O];return X&&(extend(R[O],{route:M,configProps:X}),fillPropsinData(Y,C,M,X)),P(Y,C,T)}};function fillPropsinData(i,s,_,T){var S=s.props=function resolveProps(i,s){switch(typeof s){case"undefined":return;case"object":return s;case"function":return s(i);case"boolean":return s?i.params:void 0}}(_,T);if(S){S=s.props=extend({},S);var C=s.attrs=s.attrs||{};for(var P in S)i.props&&P in i.props||(C[P]=S[P],delete S[P])}}function resolvePath(i,s,_){var T=i.charAt(0);if("/"===T)return i;if("?"===T||"#"===T)return s+i;var S=s.split("/");_&&S[S.length-1]||S.pop();for(var C=i.replace(/^\//,"").split("/"),P=0;P<C.length;P++){var O=C[P];".."===O?S.pop():"."!==O&&S.push(O)}return""!==S[0]&&S.unshift(""),S.join("/")}function cleanPath(i){return i.replace(/\/\//g,"/")}var _p=Array.isArray||function(i){return"[object Array]"==Object.prototype.toString.call(i)},wp=pathToRegexp,kp=parse,Tp=function compile(i,s){return tokensToFunction(parse(i,s),s)},Sp=tokensToFunction,Cp=tokensToRegExp,xp=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function parse(i,s){for(var _,T=[],S=0,C=0,P="",O=s&&s.delimiter||"/";null!=(_=xp.exec(i));){var M=_[0],R=_[1],D=_.index;if(P+=i.slice(C,D),C=D+M.length,R)P+=R[1];else{var j=i[C],$=_[2],U=_[3],V=_[4],Z=_[5],Y=_[6],X=_[7];P&&(T.push(P),P="");var Q=null!=$&&null!=j&&j!==$,ee="+"===Y||"*"===Y,te="?"===Y||"*"===Y,ne=_[2]||O,re=V||Z;T.push({name:U||S++,prefix:$||"",delimiter:ne,optional:te,repeat:ee,partial:Q,asterisk:!!X,pattern:re?escapeGroup(re):X?".*":"[^"+escapeString(ne)+"]+?"})}}return C<i.length&&(P+=i.substr(C)),P&&T.push(P),T}function encodeURIComponentPretty(i){return encodeURI(i).replace(/[\/?#]/g,(function(i){return"%"+i.charCodeAt(0).toString(16).toUpperCase()}))}function tokensToFunction(i,s){for(var _=new Array(i.length),T=0;T<i.length;T++)"object"==typeof i[T]&&(_[T]=new RegExp("^(?:"+i[T].pattern+")$",flags(s)));return function(s,T){for(var S="",C=s||{},P=(T||{}).pretty?encodeURIComponentPretty:encodeURIComponent,O=0;O<i.length;O++){var M=i[O];if("string"!=typeof M){var R,D=C[M.name];if(null==D){if(M.optional){M.partial&&(S+=M.prefix);continue}throw new TypeError('Expected "'+M.name+'" to be defined')}if(_p(D)){if(!M.repeat)throw new TypeError('Expected "'+M.name+'" to not repeat, but received `'+JSON.stringify(D)+"`");if(0===D.length){if(M.optional)continue;throw new TypeError('Expected "'+M.name+'" to not be empty')}for(var j=0;j<D.length;j++){if(R=P(D[j]),!_[O].test(R))throw new TypeError('Expected all "'+M.name+'" to match "'+M.pattern+'", but received `'+JSON.stringify(R)+"`");S+=(0===j?M.prefix:M.delimiter)+R}}else{if(R=M.asterisk?encodeURI(D).replace(/[?#]/g,(function(i){return"%"+i.charCodeAt(0).toString(16).toUpperCase()})):P(D),!_[O].test(R))throw new TypeError('Expected "'+M.name+'" to match "'+M.pattern+'", but received "'+R+'"');S+=M.prefix+R}}else S+=M}return S}}function escapeString(i){return i.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function escapeGroup(i){return i.replace(/([=!:$\/()])/g,"\\$1")}function attachKeys(i,s){return i.keys=s,i}function flags(i){return i&&i.sensitive?"":"i"}function tokensToRegExp(i,s,_){_p(s)||(_=s||_,s=[]);for(var T=(_=_||{}).strict,S=!1!==_.end,C="",P=0;P<i.length;P++){var O=i[P];if("string"==typeof O)C+=escapeString(O);else{var M=escapeString(O.prefix),R="(?:"+O.pattern+")";s.push(O),O.repeat&&(R+="(?:"+M+R+")*"),C+=R=O.optional?O.partial?M+"("+R+")?":"(?:"+M+"("+R+"))?":M+"("+R+")"}}var D=escapeString(_.delimiter||"/"),j=C.slice(-D.length)===D;return T||(C=(j?C.slice(0,-D.length):C)+"(?:"+D+"(?=$))?"),C+=S?"$":T&&j?"":"(?="+D+"|$)",attachKeys(new RegExp("^"+C,flags(_)),s)}function pathToRegexp(i,s,_){return _p(s)||(_=s||_,s=[]),_=_||{},i instanceof RegExp?function regexpToRegexp(i,s){var _=i.source.match(/\((?!\?)/g);if(_)for(var T=0;T<_.length;T++)s.push({name:T,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return attachKeys(i,s)}(i,s):_p(i)?function arrayToRegexp(i,s,_){for(var T=[],S=0;S<i.length;S++)T.push(pathToRegexp(i[S],s,_).source);return attachKeys(new RegExp("(?:"+T.join("|")+")",flags(_)),s)}(i,s,_):function stringToRegexp(i,s,_){return tokensToRegExp(parse(i,_),s,_)}(i,s,_)}wp.parse=kp,wp.compile=Tp,wp.tokensToFunction=Sp,wp.tokensToRegExp=Cp;var Ep=Object.create(null);function fillParams(i,s,_){s=s||{};try{var T=Ep[i]||(Ep[i]=wp.compile(i));return"string"==typeof s.pathMatch&&(s[0]=s.pathMatch),T(s,{pretty:!0})}catch(S){return""}finally{delete s[0]}}function normalizeLocation(i,s,_,T){var S="string"==typeof i?{path:i}:i;if(S._normalized)return S;if(S.name){var C=(S=extend({},i)).params;return C&&"object"==typeof C&&(S.params=extend({},C)),S}if(!S.path&&S.params&&s){(S=extend({},S))._normalized=!0;var P=extend(extend({},s.params),S.params);if(s.name)S.name=s.name,S.params=P;else if(s.matched.length){var O=s.matched[s.matched.length-1].path;S.path=fillParams(O,P,s.path)}else 0;return S}var M=function parsePath(i){var s="",_="",T=i.indexOf("#");T>=0&&(s=i.slice(T),i=i.slice(0,T));var S=i.indexOf("?");return S>=0&&(_=i.slice(S+1),i=i.slice(0,S)),{path:i,query:_,hash:s}}(S.path||""),R=s&&s.path||"/",D=M.path?resolvePath(M.path,R,_||S.append):R,j=function resolveQuery(i,s,_){void 0===s&&(s={});var T,S=_||parseQuery;try{T=S(i||"")}catch(O){T={}}for(var C in s){var P=s[C];T[C]=Array.isArray(P)?P.map(castQueryParamValue):castQueryParamValue(P)}return T}(M.query,S.query,T&&T.options.parseQuery),$=S.hash||M.hash;return $&&"#"!==$.charAt(0)&&($="#"+$),{_normalized:!0,path:D,query:j,hash:$}}var Pp,noop=function(){},Ap={name:"RouterLink",props:{to:{type:[String,Object],required:!0},tag:{type:String,default:"a"},custom:Boolean,exact:Boolean,exactPath:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:{type:String,default:"page"},event:{type:[String,Array],default:"click"}},render:function render(i){var s=this,_=this.$router,T=this.$route,S=_.resolve(this.to,T,this.append),C=S.location,P=S.route,O=S.href,M={},R=_.options.linkActiveClass,D=_.options.linkExactActiveClass,j=null==R?"router-link-active":R,$=null==D?"router-link-exact-active":D,U=null==this.activeClass?j:this.activeClass,V=null==this.exactActiveClass?$:this.exactActiveClass,Z=P.redirectedFrom?createRoute(null,normalizeLocation(P.redirectedFrom),null,_):P;M[V]=isSameRoute(T,Z,this.exactPath),M[U]=this.exact||this.exactPath?M[V]:function isIncludedRoute(i,s){return 0===i.path.replace(vp,"/").indexOf(s.path.replace(vp,"/"))&&(!s.hash||i.hash===s.hash)&&function queryIncludes(i,s){for(var _ in s)if(!(_ in i))return!1;return!0}(i.query,s.query)}(T,Z);var Y=M[V]?this.ariaCurrentValue:null,handler=function(i){guardEvent(i)&&(s.replace?_.replace(C,noop):_.push(C,noop))},X={click:guardEvent};Array.isArray(this.event)?this.event.forEach((function(i){X[i]=handler})):X[this.event]=handler;var Q={class:M},ee=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:O,route:P,navigate:handler,isActive:M[U],isExactActive:M[V]});if(ee){if(1===ee.length)return ee[0];if(ee.length>1||!ee.length)return 0===ee.length?i():i("span",{},ee)}if("a"===this.tag)Q.on=X,Q.attrs={href:O,"aria-current":Y};else{var te=findAnchor(this.$slots.default);if(te){te.isStatic=!1;var ne=te.data=extend({},te.data);for(var re in ne.on=ne.on||{},ne.on){var ie=ne.on[re];re in X&&(ne.on[re]=Array.isArray(ie)?ie:[ie])}for(var ae in X)ae in ne.on?ne.on[ae].push(X[ae]):ne.on[ae]=handler;var se=te.data.attrs=extend({},te.data.attrs);se.href=O,se["aria-current"]=Y}else Q.on=X}return i(this.tag,Q,this.$slots.default)}};function guardEvent(i){if(!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey||i.defaultPrevented||void 0!==i.button&&0!==i.button)){if(i.currentTarget&&i.currentTarget.getAttribute){var s=i.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(s))return}return i.preventDefault&&i.preventDefault(),!0}}function findAnchor(i){if(i)for(var s,_=0;_<i.length;_++){if("a"===(s=i[_]).tag)return s;if(s.children&&(s=findAnchor(s.children)))return s}}var Op="undefined"!=typeof window;function createRouteMap(i,s,_,T,S){var C=s||[],P=_||Object.create(null),O=T||Object.create(null);i.forEach((function(i){addRouteRecord(C,P,O,i,S)}));for(var M=0,R=C.length;M<R;M++)"*"===C[M]&&(C.push(C.splice(M,1)[0]),R--,M--);return{pathList:C,pathMap:P,nameMap:O}}function addRouteRecord(i,s,_,T,S,C){var P=T.path,O=T.name;var M=T.pathToRegexpOptions||{},R=function normalizePath(i,s,_){_||(i=i.replace(/\/$/,""));if("/"===i[0])return i;if(null==s)return i;return cleanPath(s.path+"/"+i)}(P,S,M.strict);"boolean"==typeof T.caseSensitive&&(M.sensitive=T.caseSensitive);var D={path:R,regex:compileRouteRegex(R,M),components:T.components||{default:T.component},alias:T.alias?"string"==typeof T.alias?[T.alias]:T.alias:[],instances:{},enteredCbs:{},name:O,parent:S,matchAs:C,redirect:T.redirect,beforeEnter:T.beforeEnter,meta:T.meta||{},props:null==T.props?{}:T.components?T.props:{default:T.props}};if(T.children&&T.children.forEach((function(T){var S=C?cleanPath(C+"/"+T.path):void 0;addRouteRecord(i,s,_,T,D,S)})),s[D.path]||(i.push(D.path),s[D.path]=D),void 0!==T.alias)for(var j=Array.isArray(T.alias)?T.alias:[T.alias],$=0;$<j.length;++$){0;var U={path:j[$],children:T.children};addRouteRecord(i,s,_,U,S,D.path||"/")}O&&(_[O]||(_[O]=D))}function compileRouteRegex(i,s){return wp(i,[],s)}function createMatcher(i,s){var _=createRouteMap(i),T=_.pathList,S=_.pathMap,C=_.nameMap;function match(i,_,P){var O=normalizeLocation(i,_,!1,s),M=O.name;if(M){var R=C[M];if(!R)return _createRoute(null,O);var D=R.regex.keys.filter((function(i){return!i.optional})).map((function(i){return i.name}));if("object"!=typeof O.params&&(O.params={}),_&&"object"==typeof _.params)for(var j in _.params)!(j in O.params)&&D.indexOf(j)>-1&&(O.params[j]=_.params[j]);return O.path=fillParams(R.path,O.params),_createRoute(R,O,P)}if(O.path){O.params={};for(var $=0;$<T.length;$++){var U=T[$],V=S[U];if(matchRoute(V.regex,O.path,O.params))return _createRoute(V,O,P)}}return _createRoute(null,O)}function redirect(i,_){var T=i.redirect,S="function"==typeof T?T(createRoute(i,_,null,s)):T;if("string"==typeof S&&(S={path:S}),!S||"object"!=typeof S)return _createRoute(null,_);var P=S,O=P.name,M=P.path,R=_.query,D=_.hash,j=_.params;if(R=P.hasOwnProperty("query")?P.query:R,D=P.hasOwnProperty("hash")?P.hash:D,j=P.hasOwnProperty("params")?P.params:j,O){C[O];return match({_normalized:!0,name:O,query:R,hash:D,params:j},void 0,_)}if(M){var $=function resolveRecordPath(i,s){return resolvePath(i,s.parent?s.parent.path:"/",!0)}(M,i);return match({_normalized:!0,path:fillParams($,j),query:R,hash:D},void 0,_)}return _createRoute(null,_)}function _createRoute(i,_,T){return i&&i.redirect?redirect(i,T||_):i&&i.matchAs?function alias(i,s,_){var T=match({_normalized:!0,path:fillParams(_,s.params)});if(T){var S=T.matched,C=S[S.length-1];return s.params=T.params,_createRoute(C,s)}return _createRoute(null,s)}(0,_,i.matchAs):createRoute(i,_,T,s)}return{match:match,addRoute:function addRoute(i,s){var _="object"!=typeof i?C[i]:void 0;createRouteMap([s||i],T,S,C,_),_&&createRouteMap(_.alias.map((function(i){return{path:i,children:[s]}})),T,S,C,_)},getRoutes:function getRoutes(){return T.map((function(i){return S[i]}))},addRoutes:function addRoutes(i){createRouteMap(i,T,S,C)}}}function matchRoute(i,s,_){var T=s.match(i);if(!T)return!1;if(!_)return!0;for(var S=1,C=T.length;S<C;++S){var P=i.keys[S-1];P&&(_[P.name||"pathMatch"]="string"==typeof T[S]?decode(T[S]):T[S])}return!0}var Mp=Op&&window.performance&&window.performance.now?window.performance:Date;function genStateKey(){return Mp.now().toFixed(3)}var zp=genStateKey();function getStateKey(){return zp}function setStateKey(i){return zp=i}var Ip=Object.create(null);function setupScroll(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");var i=window.location.protocol+"//"+window.location.host,s=window.location.href.replace(i,""),_=extend({},window.history.state);return _.key=getStateKey(),window.history.replaceState(_,"",s),window.addEventListener("popstate",vue_router_esm_handlePopState),function(){window.removeEventListener("popstate",vue_router_esm_handlePopState)}}function handleScroll(i,s,_,T){if(i.app){var S=i.options.scrollBehavior;S&&i.app.$nextTick((function(){var C=function getScrollPosition(){var i=getStateKey();if(i)return Ip[i]}(),P=S.call(i,s,_,T?C:null);P&&("function"==typeof P.then?P.then((function(i){scrollToPosition(i,C)})).catch((function(i){0})):scrollToPosition(P,C))}))}}function saveScrollPosition(){var i=getStateKey();i&&(Ip[i]={x:window.pageXOffset,y:window.pageYOffset})}function vue_router_esm_handlePopState(i){saveScrollPosition(),i.state&&i.state.key&&setStateKey(i.state.key)}function isValidPosition(i){return isNumber(i.x)||isNumber(i.y)}function normalizePosition(i){return{x:isNumber(i.x)?i.x:window.pageXOffset,y:isNumber(i.y)?i.y:window.pageYOffset}}function isNumber(i){return"number"==typeof i}var Lp=/^#\d/;function scrollToPosition(i,s){var _="object"==typeof i;if(_&&"string"==typeof i.selector){var T=Lp.test(i.selector)?document.getElementById(i.selector.slice(1)):document.querySelector(i.selector);if(T){var S=i.offset&&"object"==typeof i.offset?i.offset:{};s=function getElementPosition(i,s){var _=document.documentElement.getBoundingClientRect(),T=i.getBoundingClientRect();return{x:T.left-_.left-s.x,y:T.top-_.top-s.y}}(T,S=function normalizeOffset(i){return{x:isNumber(i.x)?i.x:0,y:isNumber(i.y)?i.y:0}}(S))}else isValidPosition(i)&&(s=normalizePosition(i))}else _&&isValidPosition(i)&&(s=normalizePosition(i));s&&("scrollBehavior"in document.documentElement.style?window.scrollTo({left:s.x,top:s.y,behavior:i.behavior}):window.scrollTo(s.x,s.y))}var Rp,Np=Op&&((-1===(Rp=window.navigator.userAgent).indexOf("Android 2.")&&-1===Rp.indexOf("Android 4.0")||-1===Rp.indexOf("Mobile Safari")||-1!==Rp.indexOf("Chrome")||-1!==Rp.indexOf("Windows Phone"))&&window.history&&"function"==typeof window.history.pushState);function pushState(i,s){saveScrollPosition();var _=window.history;try{if(s){var T=extend({},_.state);T.key=getStateKey(),_.replaceState(T,"",i)}else _.pushState({key:setStateKey(genStateKey())},"",i)}catch(S){window.location[s?"replace":"assign"](i)}}function replaceState(i){pushState(i,!0)}function runQueue(i,s,_){var step=function(T){T>=i.length?_():i[T]?s(i[T],(function(){step(T+1)})):step(T+1)};step(0)}var Dp={redirected:2,aborted:4,cancelled:8,duplicated:16};function createNavigationRedirectedError(i,s){return createRouterError(i,s,Dp.redirected,'Redirected when going from "'+i.fullPath+'" to "'+function stringifyRoute(i){if("string"==typeof i)return i;if("path"in i)return i.path;var s={};return jp.forEach((function(_){_ in i&&(s[_]=i[_])})),JSON.stringify(s,null,2)}(s)+'" via a navigation guard.')}function createNavigationCancelledError(i,s){return createRouterError(i,s,Dp.cancelled,'Navigation cancelled from "'+i.fullPath+'" to "'+s.fullPath+'" with a new navigation.')}function createRouterError(i,s,_,T){var S=new Error(T);return S._isRouter=!0,S.from=i,S.to=s,S.type=_,S}var jp=["params","query","hash"];function isError(i){return Object.prototype.toString.call(i).indexOf("Error")>-1}function isNavigationFailure(i,s){return isError(i)&&i._isRouter&&(null==s||i.type===s)}function resolveAsyncComponents(i){return function(s,_,T){var S=!1,C=0,P=null;flatMapComponents(i,(function(i,s,_,O){if("function"==typeof i&&void 0===i.cid){S=!0,C++;var M,R=once((function(s){(function isESModule(i){return i.__esModule||Bp&&"Module"===i[Symbol.toStringTag]})(s)&&(s=s.default),i.resolved="function"==typeof s?s:Pp.extend(s),_.components[O]=s,--C<=0&&T()})),D=once((function(i){var s="Failed to resolve async component "+O+": "+i;P||(P=isError(i)?i:new Error(s),T(P))}));try{M=i(R,D)}catch($){D($)}if(M)if("function"==typeof M.then)M.then(R,D);else{var j=M.component;j&&"function"==typeof j.then&&j.then(R,D)}}})),S||T()}}function flatMapComponents(i,s){return flatten(i.map((function(i){return Object.keys(i.components).map((function(_){return s(i.components[_],i.instances[_],i,_)}))})))}function flatten(i){return Array.prototype.concat.apply([],i)}var Bp="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;function once(i){var s=!1;return function(){for(var _=[],T=arguments.length;T--;)_[T]=arguments[T];if(!s)return s=!0,i.apply(this,_)}}var $p=function History(i,s){this.router=i,this.base=function normalizeBase(i){if(!i)if(Op){var s=document.querySelector("base");i=(i=s&&s.getAttribute("href")||"/").replace(/^https?:\/\/[^\/]+/,"")}else i="/";"/"!==i.charAt(0)&&(i="/"+i);return i.replace(/\/$/,"")}(s),this.current=bp,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[],this.listeners=[]};function extractGuards(i,s,_,T){var S=flatMapComponents(i,(function(i,T,S,C){var P=function extractGuard(i,s){"function"!=typeof i&&(i=Pp.extend(i));return i.options[s]}(i,s);if(P)return Array.isArray(P)?P.map((function(i){return _(i,T,S,C)})):_(P,T,S,C)}));return flatten(T?S.reverse():S)}function bindGuard(i,s){if(s)return function boundRouteGuard(){return i.apply(s,arguments)}}$p.prototype.listen=function listen(i){this.cb=i},$p.prototype.onReady=function onReady(i,s){this.ready?i():(this.readyCbs.push(i),s&&this.readyErrorCbs.push(s))},$p.prototype.onError=function onError(i){this.errorCbs.push(i)},$p.prototype.transitionTo=function transitionTo(i,s,_){var T,S=this;try{T=this.router.match(i,this.current)}catch(P){throw this.errorCbs.forEach((function(i){i(P)})),P}var C=this.current;this.confirmTransition(T,(function(){S.updateRoute(T),s&&s(T),S.ensureURL(),S.router.afterHooks.forEach((function(i){i&&i(T,C)})),S.ready||(S.ready=!0,S.readyCbs.forEach((function(i){i(T)})))}),(function(i){_&&_(i),i&&!S.ready&&(isNavigationFailure(i,Dp.redirected)&&C===bp||(S.ready=!0,S.readyErrorCbs.forEach((function(s){s(i)}))))}))},$p.prototype.confirmTransition=function confirmTransition(i,s,_){var T=this,S=this.current;this.pending=i;var abort=function(i){!isNavigationFailure(i)&&isError(i)&&(T.errorCbs.length?T.errorCbs.forEach((function(s){s(i)})):console.error(i)),_&&_(i)},C=i.matched.length-1,P=S.matched.length-1;if(isSameRoute(i,S)&&C===P&&i.matched[C]===S.matched[P])return this.ensureURL(),abort(function createNavigationDuplicatedError(i,s){var _=createRouterError(i,s,Dp.duplicated,'Avoided redundant navigation to current location: "'+i.fullPath+'".');return _.name="NavigationDuplicated",_}(S,i));var O=function resolveQueue(i,s){var _,T=Math.max(i.length,s.length);for(_=0;_<T&&i[_]===s[_];_++);return{updated:s.slice(0,_),activated:s.slice(_),deactivated:i.slice(_)}}(this.current.matched,i.matched),M=O.updated,R=O.deactivated,D=O.activated,j=[].concat(function extractLeaveGuards(i){return extractGuards(i,"beforeRouteLeave",bindGuard,!0)}(R),this.router.beforeHooks,function extractUpdateHooks(i){return extractGuards(i,"beforeRouteUpdate",bindGuard)}(M),D.map((function(i){return i.beforeEnter})),resolveAsyncComponents(D)),iterator=function(s,_){if(T.pending!==i)return abort(createNavigationCancelledError(S,i));try{s(i,S,(function(s){!1===s?(T.ensureURL(!0),abort(function createNavigationAbortedError(i,s){return createRouterError(i,s,Dp.aborted,'Navigation aborted from "'+i.fullPath+'" to "'+s.fullPath+'" via a navigation guard.')}(S,i))):isError(s)?(T.ensureURL(!0),abort(s)):"string"==typeof s||"object"==typeof s&&("string"==typeof s.path||"string"==typeof s.name)?(abort(createNavigationRedirectedError(S,i)),"object"==typeof s&&s.replace?T.replace(s):T.push(s)):_(s)}))}catch(C){abort(C)}};runQueue(j,iterator,(function(){var _=function extractEnterGuards(i){return extractGuards(i,"beforeRouteEnter",(function(i,s,_,T){return function bindEnterGuard(i,s,_){return function routeEnterGuard(T,S,C){return i(T,S,(function(i){"function"==typeof i&&(s.enteredCbs[_]||(s.enteredCbs[_]=[]),s.enteredCbs[_].push(i)),C(i)}))}}(i,_,T)}))}(D);runQueue(_.concat(T.router.resolveHooks),iterator,(function(){if(T.pending!==i)return abort(createNavigationCancelledError(S,i));T.pending=null,s(i),T.router.app&&T.router.app.$nextTick((function(){handleRouteEntered(i)}))}))}))},$p.prototype.updateRoute=function updateRoute(i){this.current=i,this.cb&&this.cb(i)},$p.prototype.setupListeners=function setupListeners(){},$p.prototype.teardown=function teardown(){this.listeners.forEach((function(i){i()})),this.listeners=[],this.current=bp,this.pending=null};var Up=function(i){function HTML5History(s,_){i.call(this,s,_),this._startLocation=getLocation(this.base)}return i&&(HTML5History.__proto__=i),HTML5History.prototype=Object.create(i&&i.prototype),HTML5History.prototype.constructor=HTML5History,HTML5History.prototype.setupListeners=function setupListeners(){var i=this;if(!(this.listeners.length>0)){var s=this.router,_=s.options.scrollBehavior,T=Np&&_;T&&this.listeners.push(setupScroll());var handleRoutingEvent=function(){var _=i.current,S=getLocation(i.base);i.current===bp&&S===i._startLocation||i.transitionTo(S,(function(i){T&&handleScroll(s,i,_,!0)}))};window.addEventListener("popstate",handleRoutingEvent),this.listeners.push((function(){window.removeEventListener("popstate",handleRoutingEvent)}))}},HTML5History.prototype.go=function go(i){window.history.go(i)},HTML5History.prototype.push=function push(i,s,_){var T=this,S=this.current;this.transitionTo(i,(function(i){pushState(cleanPath(T.base+i.fullPath)),handleScroll(T.router,i,S,!1),s&&s(i)}),_)},HTML5History.prototype.replace=function replace(i,s,_){var T=this,S=this.current;this.transitionTo(i,(function(i){replaceState(cleanPath(T.base+i.fullPath)),handleScroll(T.router,i,S,!1),s&&s(i)}),_)},HTML5History.prototype.ensureURL=function ensureURL(i){if(getLocation(this.base)!==this.current.fullPath){var s=cleanPath(this.base+this.current.fullPath);i?pushState(s):replaceState(s)}},HTML5History.prototype.getCurrentLocation=function getCurrentLocation(){return getLocation(this.base)},HTML5History}($p);function getLocation(i){var s=window.location.pathname;return i&&0===s.toLowerCase().indexOf(i.toLowerCase())&&(s=s.slice(i.length)),(s||"/")+window.location.search+window.location.hash}var Fp=function(i){function HashHistory(s,_,T){i.call(this,s,_),T&&function checkFallback(i){var s=getLocation(i);if(!/^\/#/.test(s))return window.location.replace(cleanPath(i+"/#"+s)),!0}(this.base)||ensureSlash()}return i&&(HashHistory.__proto__=i),HashHistory.prototype=Object.create(i&&i.prototype),HashHistory.prototype.constructor=HashHistory,HashHistory.prototype.setupListeners=function setupListeners(){var i=this;if(!(this.listeners.length>0)){var s=this.router.options.scrollBehavior,_=Np&&s;_&&this.listeners.push(setupScroll());var handleRoutingEvent=function(){var s=i.current;ensureSlash()&&i.transitionTo(getHash(),(function(T){_&&handleScroll(i.router,T,s,!0),Np||replaceHash(T.fullPath)}))},T=Np?"popstate":"hashchange";window.addEventListener(T,handleRoutingEvent),this.listeners.push((function(){window.removeEventListener(T,handleRoutingEvent)}))}},HashHistory.prototype.push=function push(i,s,_){var T=this,S=this.current;this.transitionTo(i,(function(i){pushHash(i.fullPath),handleScroll(T.router,i,S,!1),s&&s(i)}),_)},HashHistory.prototype.replace=function replace(i,s,_){var T=this,S=this.current;this.transitionTo(i,(function(i){replaceHash(i.fullPath),handleScroll(T.router,i,S,!1),s&&s(i)}),_)},HashHistory.prototype.go=function go(i){window.history.go(i)},HashHistory.prototype.ensureURL=function ensureURL(i){var s=this.current.fullPath;getHash()!==s&&(i?pushHash(s):replaceHash(s))},HashHistory.prototype.getCurrentLocation=function getCurrentLocation(){return getHash()},HashHistory}($p);function ensureSlash(){var i=getHash();return"/"===i.charAt(0)||(replaceHash("/"+i),!1)}function getHash(){var i=window.location.href,s=i.indexOf("#");return s<0?"":i=i.slice(s+1)}function getUrl(i){var s=window.location.href,_=s.indexOf("#");return(_>=0?s.slice(0,_):s)+"#"+i}function pushHash(i){Np?pushState(getUrl(i)):window.location.hash=i}function replaceHash(i){Np?replaceState(getUrl(i)):window.location.replace(getUrl(i))}var Hp=function(i){function AbstractHistory(s,_){i.call(this,s,_),this.stack=[],this.index=-1}return i&&(AbstractHistory.__proto__=i),AbstractHistory.prototype=Object.create(i&&i.prototype),AbstractHistory.prototype.constructor=AbstractHistory,AbstractHistory.prototype.push=function push(i,s,_){var T=this;this.transitionTo(i,(function(i){T.stack=T.stack.slice(0,T.index+1).concat(i),T.index++,s&&s(i)}),_)},AbstractHistory.prototype.replace=function replace(i,s,_){var T=this;this.transitionTo(i,(function(i){T.stack=T.stack.slice(0,T.index).concat(i),s&&s(i)}),_)},AbstractHistory.prototype.go=function go(i){var s=this,_=this.index+i;if(!(_<0||_>=this.stack.length)){var T=this.stack[_];this.confirmTransition(T,(function(){var i=s.current;s.index=_,s.updateRoute(T),s.router.afterHooks.forEach((function(s){s&&s(T,i)}))}),(function(i){isNavigationFailure(i,Dp.duplicated)&&(s.index=_)}))}},AbstractHistory.prototype.getCurrentLocation=function getCurrentLocation(){var i=this.stack[this.stack.length-1];return i?i.fullPath:"/"},AbstractHistory.prototype.ensureURL=function ensureURL(){},AbstractHistory}($p),qp=function VueRouter(i){void 0===i&&(i={}),this.app=null,this.apps=[],this.options=i,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=createMatcher(i.routes||[],this);var s=i.mode||"hash";switch(this.fallback="history"===s&&!Np&&!1!==i.fallback,this.fallback&&(s="hash"),Op||(s="abstract"),this.mode=s,s){case"history":this.history=new Up(this,i.base);break;case"hash":this.history=new Fp(this,i.base,this.fallback);break;case"abstract":this.history=new Hp(this,i.base)}},Vp={currentRoute:{configurable:!0}};function registerHook(i,s){return i.push(s),function(){var _=i.indexOf(s);_>-1&&i.splice(_,1)}}qp.prototype.match=function match(i,s,_){return this.matcher.match(i,s,_)},Vp.currentRoute.get=function(){return this.history&&this.history.current},qp.prototype.init=function init(i){var s=this;if(this.apps.push(i),i.$once("hook:destroyed",(function(){var _=s.apps.indexOf(i);_>-1&&s.apps.splice(_,1),s.app===i&&(s.app=s.apps[0]||null),s.app||s.history.teardown()})),!this.app){this.app=i;var _=this.history;if(_ instanceof Up||_ instanceof Fp){var setupListeners=function(i){_.setupListeners(),function(i){var T=_.current,S=s.options.scrollBehavior;Np&&S&&"fullPath"in i&&handleScroll(s,i,T,!1)}(i)};_.transitionTo(_.getCurrentLocation(),setupListeners,setupListeners)}_.listen((function(i){s.apps.forEach((function(s){s._route=i}))}))}},qp.prototype.beforeEach=function beforeEach(i){return registerHook(this.beforeHooks,i)},qp.prototype.beforeResolve=function beforeResolve(i){return registerHook(this.resolveHooks,i)},qp.prototype.afterEach=function afterEach(i){return registerHook(this.afterHooks,i)},qp.prototype.onReady=function onReady(i,s){this.history.onReady(i,s)},qp.prototype.onError=function onError(i){this.history.onError(i)},qp.prototype.push=function push(i,s,_){var T=this;if(!s&&!_&&"undefined"!=typeof Promise)return new Promise((function(s,_){T.history.push(i,s,_)}));this.history.push(i,s,_)},qp.prototype.replace=function replace(i,s,_){var T=this;if(!s&&!_&&"undefined"!=typeof Promise)return new Promise((function(s,_){T.history.replace(i,s,_)}));this.history.replace(i,s,_)},qp.prototype.go=function go(i){this.history.go(i)},qp.prototype.back=function back(){this.go(-1)},qp.prototype.forward=function forward(){this.go(1)},qp.prototype.getMatchedComponents=function getMatchedComponents(i){var s=i?i.matched?i:this.resolve(i).route:this.currentRoute;return s?[].concat.apply([],s.matched.map((function(i){return Object.keys(i.components).map((function(s){return i.components[s]}))}))):[]},qp.prototype.resolve=function resolve(i,s,_){var T=normalizeLocation(i,s=s||this.history.current,_,this),S=this.match(T,s),C=S.redirectedFrom||S.fullPath,P=function createHref(i,s,_){var T="hash"===_?"#"+s:s;return i?cleanPath(i+"/"+T):T}(this.history.base,C,this.mode);return{location:T,route:S,href:P,normalizedTo:T,resolved:S}},qp.prototype.getRoutes=function getRoutes(){return this.matcher.getRoutes()},qp.prototype.addRoute=function addRoute(i,s){this.matcher.addRoute(i,s),this.history.current!==bp&&this.history.transitionTo(this.history.getCurrentLocation())},qp.prototype.addRoutes=function addRoutes(i){this.matcher.addRoutes(i),this.history.current!==bp&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(qp.prototype,Vp),qp.install=function install(i){if(!install.installed||Pp!==i){install.installed=!0,Pp=i;var isDef=function(i){return void 0!==i},registerInstance=function(i,s){var _=i.$options._parentVnode;isDef(_)&&isDef(_=_.data)&&isDef(_=_.registerRouteInstance)&&_(i,s)};i.mixin({beforeCreate:function beforeCreate(){isDef(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),i.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,registerInstance(this,this)},destroyed:function destroyed(){registerInstance(this)}}),Object.defineProperty(i.prototype,"$router",{get:function get(){return this._routerRoot._router}}),Object.defineProperty(i.prototype,"$route",{get:function get(){return this._routerRoot._route}}),i.component("RouterView",yp),i.component("RouterLink",Ap);var s=i.config.optionMergeStrategies;s.beforeRouteEnter=s.beforeRouteLeave=s.beforeRouteUpdate=s.created}},qp.version="3.5.1",qp.isNavigationFailure=isNavigationFailure,qp.NavigationFailureType=Dp,qp.START_LOCATION=bp,Op&&window.Vue&&window.Vue.use(qp);var Gp=qp;const Zp={timeout:null,toasterId:null};var Wp=Object.defineProperty,Kp=Object.defineProperties,Yp=Object.getOwnPropertyDescriptors,Xp=Object.getOwnPropertySymbols,Qp=Object.prototype.hasOwnProperty,Jp=Object.prototype.propertyIsEnumerable,battle_consolevue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?Wp(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,battle_consolevue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))Qp.call(s,_)&&battle_consolevue_type_script_lang_js_defNormalProp(i,_,s[_]);if(Xp)for(var _ of Xp(s))Jp.call(s,_)&&battle_consolevue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},battle_consolevue_type_script_lang_js_spreadProps=(i,s)=>Kp(i,Yp(s)),em={name:"BattleConsole",components:{V5Input:Tr.V5Input},data:()=>({text:""}),computed:battle_consolevue_type_script_lang_js_spreadProps(battle_consolevue_type_script_lang_js_spreadValues({},(0,dr.mapState)({roles:({user:i})=>i.roles})),{isEventManager(){return this.roles.includes("ROLE_EVENT_MANAGER")}}),methods:battle_consolevue_type_script_lang_js_spreadProps(battle_consolevue_type_script_lang_js_spreadValues({},(0,dr.mapActions)("puzzlesBattle",["handleConsoleInput"])),{handleEnter(i){i.stopPropagation(),this.handleConsoleInput(this.text),this.text=""}})},tm=em,nm={component:"battle-console-component",input:"battle-console-input"};var im=(0,Rr.Z)(tm,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return i.isEventManager?_("div",{class:i.$style.component},[_("v5-input",{class:i.$style.input,attrs:{placeholder:"/command params"},on:{keydown:function(s){return!s.type.indexOf("key")&&i._k(s.keyCode,"enter",13,s.key,"Enter")?null:i.handleEnter.apply(null,arguments)}},model:{value:i.text,callback:function(s){i.text=s},expression:"text"}})],1):i._e()}),[],!1,(function battle_console_injectStyles(i){this.$style=nm.locals||nm}),null,null),am=im.exports,sm=__webpack_require__(19818),om={name:"SidebarStatusSquare",props:{isWhite:{type:Boolean,default:!0}}},lm={"sidebar-square":"sidebar-status-square-sidebar-square",black:"sidebar-status-square-black"};var cm=(0,Rr.Z)(om,(function(){var i,s=this,_=s.$createElement;return(s._self._c||_)("div",{class:[s.$style["sidebar-square"],(i={},i[s.$style.black]=!s.isWhite,i)]})}),[],!1,(function sidebar_status_square_injectStyles(i){this.$style=lm.locals||lm}),null,null).exports,um={name:"SectionHeading",props:{size:{type:String,default:"normal"},theme:{type:String,required:!0},title:{type:String}}},dm={component:"section-heading-component",black:"section-heading-black",blackTransparent:"section-heading-blackTransparent",grey:"section-heading-grey",lightGrey:"section-heading-lightGrey",green:"section-heading-green",red:"section-heading-red",white:"section-heading-white",dark:"section-heading-dark",title:"section-heading-title",normal:"section-heading-normal",large:"section-heading-large"};var hm=(0,Rr.Z)(um,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:[i.$style.component,i.$style[i.theme]]},[i._t("default"),i._v(" "),_("span",{class:[i.$style.title,i.$style[i.size]],domProps:{textContent:i._s(i.title)}})],2)}),[],!1,(function section_heading_injectStyles(i){this.$style=dm.locals||dm}),null,null),pm={name:"PuzzlesSectionHeading",components:{SectionHeading:hm.exports},props:{theme:{type:String,required:!0},title:{type:String}}},mm={component:"section-heading-component"};var fm=(0,Rr.Z)(pm,(function(){var i=this,s=i.$createElement;return(i._self._c||s)("section-heading",i._b({class:i.$style.component},"section-heading",i.$props,!1),[i._t("default")],2)}),[],!1,(function shared_section_heading_injectStyles(i){this.$style=mm.locals||mm}),null,null).exports,gm=Object.defineProperty,vm=Object.defineProperties,bm=Object.getOwnPropertyDescriptors,ym=Object.getOwnPropertySymbols,_m=Object.prototype.hasOwnProperty,wm=Object.prototype.propertyIsEnumerable,peripheral_view_mixin_defNormalProp=(i,s,_)=>s in i?gm(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,peripheral_view_mixin_spreadValues=(i,s)=>{for(var _ in s||(s={}))_m.call(s,_)&&peripheral_view_mixin_defNormalProp(i,_,s[_]);if(ym)for(var _ of ym(s))wm.call(s,_)&&peripheral_view_mixin_defNormalProp(i,_,s[_]);return i};const km={components:{SectionHeading:fm,SidebarStatusSquare:cm},data:()=>({gameplayStates:Object.freeze(_n)}),computed:((i,s)=>vm(i,bm(s)))(peripheral_view_mixin_spreadValues(peripheral_view_mixin_spreadValues({},(0,dr.mapState)({gameplayState:i=>i.puzzles.gameplayState,puzzleMode:i=>i.puzzles.puzzleMode})),(0,dr.mapGetters)("puzzles",["userColor"])),{isUserWhite(){return this.userColor===sm._l.WHITE},peripheralState(){const i=bn[this.puzzleMode];return peripheral_view_mixin_spreadValues({headingClick:null},null==i?void 0:i({isUserWhite:this.isUserWhite})[this.gameplayState])}}),methods:{onHeaderClick(){this.peripheralState.headingClick&&this.peripheralState.headingClick()}}};var Tm=km,Sm=Object.defineProperty,Cm=Object.defineProperties,xm=Object.getOwnPropertyDescriptors,Em=Object.getOwnPropertySymbols,Pm=Object.prototype.hasOwnProperty,Am=Object.prototype.propertyIsEnumerable,back_linkvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?Sm(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,Om={name:"BackLink",props:{goToRoot:{type:Boolean,default:!0}},emits:["click"],methods:((i,s)=>Cm(i,xm(s)))(((i,s)=>{for(var _ in s||(s={}))Pm.call(s,_)&&back_linkvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(Em)for(var _ of Em(s))Am.call(s,_)&&back_linkvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i})({},(0,dr.mapMutations)({setSidebarView:"puzzlesRush/setSidebarView"})),{onClick(){this.$emit("click"),this.goToRoot&&(this.$router.push("/"),this.setSidebarView(sn))}})},Mm=Om,zm={component:"back-link-component",icon:"back-link-icon"};var Im=(0,Rr.Z)(Mm,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("button",{class:i.$style.component,attrs:{type:"button","aria-label":i.$trans("Back")},on:{click:i.onClick}},[_("span",{staticClass:"icon-font-chess arrow-left",class:i.$style.icon})])}),[],!1,(function back_link_injectStyles(i){this.$style=zm.locals||zm}),null,null),Lm=Im.exports,Rm=Object.defineProperty,Nm=Object.defineProperties,Dm=Object.getOwnPropertyDescriptors,jm=Object.getOwnPropertySymbols,Bm=Object.prototype.hasOwnProperty,$m=Object.prototype.propertyIsEnumerable,battle_peripheral_viewvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?Rm(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,battle_peripheral_viewvue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))Bm.call(s,_)&&battle_peripheral_viewvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(jm)for(var _ of jm(s))$m.call(s,_)&&battle_peripheral_viewvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},Um={name:"PeripheralView",components:{backLink:Lm},mixins:[Tm],data:()=>({MAXIMUM_STRIKES_ALLOWED:3}),computed:((i,s)=>Nm(i,Dm(s)))(battle_peripheral_viewvue_type_script_lang_js_spreadValues(battle_peripheral_viewvue_type_script_lang_js_spreadValues({},(0,dr.mapGetters)("puzzlesBattle",["primaryPlayerUuid"])),(0,dr.mapState)({puzzle:({puzzlesBattle:i})=>i.puzzle,strikes:({puzzlesBattle:i})=>i.strikes})),{isUserWhite(){return(this.puzzle[this.primaryPlayerUuid]||{}).colorOfUser===sm._l.WHITE},numberOfStrikes(){const i=this.strikes[this.primaryPlayerUuid];return i?i.length:0}})},Fm=Um,Hm={component:"battle-peripheral-view-component",icon:"battle-peripheral-view-icon","icon-red-faded":"battle-peripheral-view-icon-red-faded","icon-strike":"battle-peripheral-view-icon-strike","icon-correct":"battle-peripheral-view-icon-correct",backLink:"battle-peripheral-view-backLink"};var qm=(0,Rr.Z)(Fm,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("section-heading",{class:i.$style.component,attrs:{theme:i.peripheralState.headingTheme,title:i.peripheralState.headingTitle}},[[i.gameplayStates.FINISHED,i.gameplayStates.FINISHED_LOST].includes(i.gameplayState)?_("backLink",{class:i.$style.backLink}):i._e(),i._v(" "),[i.gameplayStates.COUNT_DOWN,i.gameplayStates.FINISHED,i.gameplayStates.FINISHED_LOST,i.gameplayStates.OBSERVE,i.gameplayStates.SEEKING,i.gameplayStates.START].includes(i.gameplayState)?[_("div",{staticClass:"icon-font-chess battle",class:i.$style.icon})]:i._e(),i._v(" "),i.gameplayState===i.gameplayStates.MOVE_CORRECT?[_("div",{staticClass:"icon-font-chess checkmark",class:i.$style["icon-correct"]})]:i._e(),i._v(" "),[i.gameplayStates.MOVE_INCORRECT].includes(i.gameplayState)?i._l(i.MAXIMUM_STRIKES_ALLOWED,(function(s){var T;return _("div",{key:s,staticClass:"icon-font-chess square-x",class:[i.$style["icon-strike"],(T={},T[i.$style["icon-red-faded"]]=s>i.numberOfStrikes,T)]})})):i._e(),i._v(" "),[i.gameplayStates.USER_MOVE].includes(i.gameplayState)?[_("sidebar-status-square",{attrs:{"is-white":i.isUserWhite}})]:i._e()],2)}),[],!1,(function battle_peripheral_view_injectStyles(i){this.$style=Hm.locals||Hm}),null,null),Vm=qm.exports;const getPlayerFooterDetails=({rankingResult:i,playerInfo:s={ranking:{points:0}}})=>({seasonRank:s.seasonRank,initialPoints:i?i.initialPoints:s.ranking.points,pointsDelta:i?i.pointsDelta:0});var Gm={spinner:"seeking-spinner-spinner",rotate:"seeking-spinner-rotate"};var Zm=(0,Rr.Z)({},(function(){var i=this,s=i.$createElement;return(i._self._c||s)("div",{staticClass:"icon-font-chess magnifying-glass",class:i.$style.spinner})}),[],!1,(function seeking_spinner_injectStyles(i){this.$style=Gm.locals||Gm}),null,null).exports,Wm={name:"BattleOverRematchButton",components:{V5Button:Tr.V5Button,SeekingSpinner:Zm},props:{outgoingRematch:{type:Object},pendingOutgoingRematch:{type:Boolean}},emits:["rematch","cancel-rematch"]},Km={button:"battle-over-rematch-button-button",seeking:"battle-over-rematch-button-seeking",x:"battle-over-rematch-button-x",spinner:"battle-over-rematch-button-spinner"};var Ym=(0,Rr.Z)(Wm,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return i.pendingOutgoingRematch||i.outgoingRematch?_("v5-button",{class:[i.$style.button,i.$style.seeking],attrs:{theme:"basic"},on:{click:function(s){return i.$emit("cancel-rematch",s)}}},[_("seeking-spinner",{class:i.$style.spinner}),i._v(" "),_("div",{staticClass:"icon-font-chess x",class:i.$style.x})],1):_("v5-button",{class:i.$style.button,attrs:{theme:"primary"},on:{click:function(s){return i.$emit("rematch",s)}}},[_("span",{staticClass:"icon-font-chess ui_v5-button-icon undo"}),i._v(" "),_("span",{domProps:{textContent:i._s(i.$trans("Rematch"))}})])}),[],!1,(function battle_over_rematch_button_injectStyles(i){this.$style=Km.locals||Km}),null,null),Xm=Ym.exports;let Qm;var Jm={},ef={component:"action-tray-component"};var tf=(0,Rr.Z)(Jm,(function(){var i=this,s=i.$createElement;return(i._self._c||s)("div",{class:i.$style.component},[i._t("default")],2)}),[],!1,(function action_tray_injectStyles(i){this.$style=ef.locals||ef}),null,null).exports,nf=Object.defineProperty,rf=Object.defineProperties,af=Object.getOwnPropertyDescriptors,sf=Object.getOwnPropertySymbols,of=Object.prototype.hasOwnProperty,lf=Object.prototype.propertyIsEnumerable,prev_next_arrowsvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?nf(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,cf={emits:["moveForward","moveBackward"],computed:((i,s)=>rf(i,af(s)))(((i,s)=>{for(var _ in s||(s={}))of.call(s,_)&&prev_next_arrowsvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(sf)for(var _ of sf(s))lf.call(s,_)&&prev_next_arrowsvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i})({},(0,dr.mapState)(["game"])),{canMoveBackward(){return Boolean(this.game.selectedNode)},canMoveForward(){return!this.game.isAtEndOfLine}})},uf=cf,df={component:"prev-next-arrows-component",button:"prev-next-arrows-button","button-icon":"prev-next-arrows-button-icon"};var hf=(0,Rr.Z)(uf,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("button",{class:i.$style.button,attrs:{name:"chevron-left",type:"button","aria-label":i.$trans("Previous Move"),disabled:!i.canMoveBackward},on:{click:function(s){return i.$emit("moveBackward")}}},[_("span",{staticClass:"icon-font-chess chevron-left",class:i.$style["button-icon"]})]),i._v(" "),_("button",{class:i.$style.button,attrs:{name:"chevron-right",type:"button","aria-label":i.$trans("Next Move"),disabled:!i.canMoveForward},on:{click:function(s){return i.$emit("moveForward")}}},[_("span",{staticClass:"icon-font-chess chevron-right",class:i.$style["button-icon"]})])])}),[],!1,(function prev_next_arrows_injectStyles(i){this.$style=df.locals||df}),null,null),pf=hf.exports,mf=Object.defineProperty,ff=Object.getOwnPropertySymbols,gf=Object.prototype.hasOwnProperty,vf=Object.prototype.propertyIsEnumerable,shared_prev_next_arrowsvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?mf(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,bf={components:{PrevNextArrows:pf},methods:((i,s)=>{for(var _ in s||(s={}))gf.call(s,_)&&shared_prev_next_arrowsvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(ff)for(var _ of ff(s))vf.call(s,_)&&shared_prev_next_arrowsvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i})({},(0,dr.mapActions)("puzzles",["moveBackward","moveForward"]))},yf=bf,_f=(0,Rr.Z)(yf,(function(){var i=this,s=i.$createElement;return(i._self._c||s)("prev-next-arrows",{on:{moveBackward:i.moveBackward,moveForward:i.moveForward}})}),[],!1,null,null,null).exports,wf=__webpack_require__(93189),kf=__webpack_require__(16974),Tf=__webpack_require__(2101),Sf=Object.defineProperty,Cf=Object.defineProperties,xf=Object.getOwnPropertyDescriptors,Ef=Object.getOwnPropertySymbols,Pf=Object.prototype.hasOwnProperty,Af=Object.prototype.propertyIsEnumerable,share_menu_share_menu_containervue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?Sf(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,share_menu_share_menu_containervue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))Pf.call(s,_)&&share_menu_share_menu_containervue_type_script_lang_js_defNormalProp(i,_,s[_]);if(Ef)for(var _ of Ef(s))Af.call(s,_)&&share_menu_share_menu_containervue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},share_menu_share_menu_containervue_type_script_lang_js_spreadProps=(i,s)=>Cf(i,xf(s)),Of={name:"ShareMenuDialogContainer",components:{ShareMenu:yh.Z},props:{isNewBoard:{type:Boolean,default:!1}},setup:()=>({checkboxModel:Tf._$,setCheckboxUi:Tf.sY}),data:()=>({imageSize:void 0,imageUrl:null,shareUrl:null}),computed:share_menu_share_menu_containervue_type_script_lang_js_spreadProps(share_menu_share_menu_containervue_type_script_lang_js_spreadValues(share_menu_share_menu_containervue_type_script_lang_js_spreadValues({},(0,dr.mapGetters)({loggedIn:"user/isLoggedIn",multiPgnString:"analysis/getMultiPgnString"})),(0,dr.mapState)({analyzedPgn:({analysis:i={}})=>(i.gameAnalysis||{}).annotatedPgn,boardOptions:({board:i})=>i.boardOptions,boardSettings:({board:i})=>i.settings,game:({game:i})=>i,isPuzzle:({diagramEditor:i={}})=>i.isPuzzle||!1,nodeLimit:({diagramEditor:i={}})=>i.nodeLimit||{},multiSelfAnalysisMode:({analysis:i={}})=>Boolean(i.multiSelfAnalysisMode)})),{hasTimestamps(){let{mainLine:i}=this.game;if(!this.isNewBoard){const{lines:s}=this.game.tree&&this.game.tree.lines?this.game.tree:wf.Z.state;i=s[0]||[]}return i.length>0&&Boolean(i[0].time)},fen(){var i,s;if(this.isNewBoard){const{historyFENs:i}=this.game;return i[i.length-1]}return(null==(i=this.game.setup)?void 0:i.fen)||(null==(s=this.game.historyFENs)?void 0:s[this.game.historyFENs.length-1])},tcn(){return this.isNewBoard?this.game.tcn:kf.j.getTcn(this.game)},initialDiagramOptions(){return{isPuzzle:this.isPuzzle,nodeLimit:this.nodeLimit}},copyablePgnString(){return this.multiSelfAnalysisMode?this.multiPgnString:this.game.pgn}}),watch:{checkboxModel:{deep:!0,handler:function updatePgn(){this.getPgn((0,Tf.nj)(this.checkboxModel))}}},methods:share_menu_share_menu_containervue_type_script_lang_js_spreadProps(share_menu_share_menu_containervue_type_script_lang_js_spreadValues({},(0,dr.mapActions)({getPgn:"game/getPgn"})),{show(){this.$refs.shareMenu.show()},selectTab(i){this.$refs.shareMenu.activeTab=i}})},Mf=Of,zf=(0,Rr.Z)(Mf,(function(){var i=this,s=i.$createElement;return(i._self._c||s)("share-menu",{ref:"shareMenu",attrs:{"analyzed-pgn":i.analyzedPgn,"board-options":i.boardOptions,"board-settings":i.boardSettings,"image-size":i.imageSize,"image-url":i.imageUrl,"initial-diagram-option":i.initialDiagramOptions,"is-logged-in":i.loggedIn,"pgn-headers":i.game.pgnHeaders,pgn:i.copyablePgnString,fen:i.fen,tcn:i.tcn,variant:i.game.variant,"has-timestamps":i.hasTimestamps,"share-url":i.shareUrl}})}),[],!1,null,null,null).exports;var If=Object.defineProperty,Lf=Object.defineProperties,Rf=Object.getOwnPropertyDescriptors,Nf=Object.getOwnPropertySymbols,Df=Object.prototype.hasOwnProperty,jf=Object.prototype.propertyIsEnumerable,play_action_trayvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?If(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_;const{initShareModal:Bf,showShareModal:$f}=function shareModal(){let i=null,s=null;return{initShareModal:(_=!0)=>{null==i&&(s=(0,ir.Z)({shareMenu:{component:zf,el:"#share-menu",store:st.default,propsData:{isNewBoard:_}}}))},showShareModal:_=>{const{activeTab:T=bh.eA.PGN.key,shareUrl:S,injectModal:C=!1,imageUrl:P,imageSize:O}=_||{};i||(C&&injectModalMounts(["shareMenu"]),i=s.createInstance("shareMenu").$children[0]),Object.assign(i,{shareUrl:S,imageUrl:P,imageSize:O}),i.selectTab(T),i.show()}}}();var Uf={name:"PlayActionTray",components:{ActionTray:tf,PrevNextArrows:_f},directives:{tooltip:Ur.Z},data:()=>({tabs:Object.freeze(bh.eA)}),computed:((i,s)=>Lf(i,Rf(s)))(((i,s)=>{for(var _ in s||(s={}))Df.call(s,_)&&play_action_trayvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(Nf)for(var _ of Nf(s))jf.call(s,_)&&play_action_trayvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i})({},(0,dr.mapState)({gameplayState:i=>i.puzzles.gameplayState,puzzleMode:i=>i.puzzles.puzzleMode,showDetails:i=>i.puzzles.showDetails,fen:i=>i.game.selectedNode.fen,color:i=>i.puzzles.puzzle.colorOfUser,isGameOver:i=>i.game.isGameOver,id:i=>i.puzzles.puzzle.id})),{showControls(){return this.puzzleMode===vn.RATED||[vn.PUZZLE_PROBLEM,vn.LEARNING].includes(this.puzzleMode)},showSharables(){return!(this.puzzleMode!==vn.RATED||![_n.SOLVED,_n.SOLVED_WITH_HINT].includes(this.gameplayState))||(vn.PUZZLE_PROBLEM===this.puzzleMode||this.puzzleMode===vn.LEARNING&&this.gameplayState!==_n.USER_MOVE)},isBattleOver(){return[_n.FINISHED,_n.FINISHED_LOST].includes(this.gameplayState)&&this.puzzleMode===vn.BATTLE},practiceUrl(){return D.Z.generate("web_practice_custom",{fen:this.fen,color:this.color})}}),mounted(){Bf()},methods:{showSettingsModal:()=>{Qm||(injectModalMounts([Un.MODE_SETTINGS]),Qm=tL.createInstance(Un.MODE_SETTINGS)),Qm.$children[0].show()},togglePuzzleComments:togglePuzzleComments,showShareModal(i){const s=`${window.location.origin}${Gn.individualPuzzle(this.id)}`;$f({activeTab:i,shareUrl:s})}}},Ff=Uf,Hf={left:"play-action-tray-left",btn:"play-action-tray-btn",icon:"play-action-tray-icon"};var qf=(0,Rr.Z)(Ff,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("action-tray",{class:i.$style.component},[_("div",{class:i.$style.left},[i.showControls?_("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.$trans("Settings"),expression:"$trans('Settings')"}],class:i.$style.btn,attrs:{type:"button","aria-label":i.$trans("Settings")},on:{click:i.showSettingsModal}},[_("span",{staticClass:"icon-font-chess circle-gearwheel",class:i.$style.icon})]):i._e(),i._v(" "),i.showSharables?_("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.$trans("Comments"),expression:"$trans('Comments')"}],class:i.$style.btn,attrs:{type:"button","aria-label":i.$trans("Comments")},on:{click:i.togglePuzzleComments}},[_("span",{staticClass:"icon-font-chess chat-alt",class:i.$style.icon})]):i._e(),i._v(" "),i.showSharables?_("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.$trans("Download"),expression:"$trans('Download')"}],class:i.$style.btn,attrs:{type:"button","aria-label":i.$trans("Download")},on:{click:function(s){return i.showShareModal(i.tabs.PGN.key)}}},[_("span",{staticClass:"icon-font-chess download",class:i.$style.icon})]):i._e(),i._v(" "),i.showSharables||i.isBattleOver?_("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.$trans("Share"),expression:"$trans('Share')"}],class:i.$style.btn,attrs:{"aria-label":i.$trans("Share")},on:{click:function(s){return i.showShareModal(i.tabs.IMAGE.key)}}},[_("span",{staticClass:"icon-font-chess share",class:i.$style.icon})]):i._e(),i._v(" "),i.showSharables&&!i.isGameOver?_("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.$trans("Practice vs Computer"),expression:"$trans('Practice vs Computer')"}],staticClass:"icon-font-chess practice",class:i.$style.icon,attrs:{"aria-label":i.$trans("Practice vs Computer"),href:i.practiceUrl,target:"_blank"}}):i._e()]),i._v(" "),i.showControls||i.isBattleOver?_("prev-next-arrows"):i._e()],1)}),[],!1,(function play_action_tray_injectStyles(i){this.$style=Hf.locals||Hf}),null,null),Vf=qf.exports,Gf=Object.defineProperty,Zf=Object.defineProperties,Wf=Object.getOwnPropertyDescriptors,Kf=Object.getOwnPropertySymbols,Yf=Object.prototype.hasOwnProperty,Xf=Object.prototype.propertyIsEnumerable,battle_over_buttonsvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?Gf(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,Qf={name:"BattleOverButtons",components:{BattleOverRematchButton:Xm,LoaderThreeBounce:sl.Z,V5Button:Tr.V5Button,PlayActionTray:Vf},directives:{Tooltip:Ur.Z},props:{buttonTheme:{type:String,default:"basic"},isConnected:{type:Boolean,default:!0},isPlayer:{type:Boolean,default:!1},incomingRematch:{type:Object},outgoingRematch:{type:Object},hasAcceptedIncomingRematch:{type:Boolean},isGameOver:{type:Boolean,default:!1},opponentUsername:{type:String,default:null},pendingOutgoingRematch:{type:Boolean}},emits:["observe-opponent","cancel-rematch","decline-rematch","accept-rematch"],methods:((i,s)=>Zf(i,Wf(s)))(((i,s)=>{for(var _ in s||(s={}))Yf.call(s,_)&&battle_over_buttonsvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(Kf)for(var _ of Kf(s))Xf.call(s,_)&&battle_over_buttonsvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i})({},(0,dr.mapActions)({resetToStartView:"puzzlesBattle/resetToStartView"})),{emitWhenConnected(i,s){this.isConnected?this.$emit(i,s):alert(nt.DISCONNECTED_MESSAGE)},goBack(){this.resetToStartView()}})},Jf=Qf,eg={component:"battle-over-buttons-component",buttons:"battle-over-buttons-buttons",button:"battle-over-buttons-button",message:"battle-over-buttons-message",loader:"battle-over-buttons-loader","watch-btn":"battle-over-buttons-watch-btn",actionTray:"battle-over-buttons-actionTray"};var tg=(0,Rr.Z)(Jf,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[i.incomingRematch?_("span",{class:i.$style.message,domProps:{textContent:i._s(i.$trans("%user% wants a rematch",{"%user%":i.incomingRematch.from.username}))}}):i._e(),i._v(" "),_("div",{class:i.$style.buttons},[i.hasAcceptedIncomingRematch&&!i.incomingRematch?_("div",{class:i.$style.loader},[_("loader-three-bounce",{class:i.$style.loader,attrs:{"is-circle":!0,size:50}})],1):i.incomingRematch?[_("v5-button",{class:i.$style.button,attrs:{theme:"primary"},on:{click:function(s){return i.$emit("accept-rematch",s)}}},[_("span",{staticClass:"icon-font-chess ui_v5-button-icon checkmark"})]),i._v(" "),_("v5-button",{class:i.$style.button,attrs:{theme:"basic-light"},on:{click:function(s){return i.$emit("decline-rematch",s)}}},[_("span",{staticClass:"icon-font-chess ui_v5-button-icon x"})])]:[i.isPlayer?_("battle-over-rematch-button",{attrs:{"button-theme":i.buttonTheme,"outgoing-rematch":i.outgoingRematch,"pending-outgoing-rematch":i.pendingOutgoingRematch},on:{rematch:function(s){return i.emitWhenConnected("rematch",s)},"cancel-rematch":function(s){return i.$emit("cancel-rematch",s)}}}):_("v5-button",{class:i.$style.button,attrs:{theme:"basic"},domProps:{textContent:i._s(i.$trans("Top Battle"))},on:{click:function(s){return i.emitWhenConnected("next-battle",s)}}}),i._v(" "),_("v5-button",{class:i.$style.button,attrs:{theme:"basic"},on:{click:i.goBack}},[_("span",{staticClass:"icon-font-chess ui_v5-button-icon plus"}),i._v(" "),_("span",{domProps:{textContent:i._s(i.$trans("New Battle"))}})])]],2),i._v(" "),i.isConnected&&i.isPlayer&&!i.isGameOver&&i.opponentUsername?_("v5-button",{class:i.$style["watch-btn"],attrs:{theme:i.buttonTheme},domProps:{textContent:i._s(i.$trans("Watch %username%",{"%username%":i.opponentUsername}))},on:{click:function(s){return i.$emit("observe-opponent",s)}}}):i._e(),i._v(" "),_("play-action-tray",{class:[i.$style.actionTray,i.$style["mobile-order-5"]]})],1)}),[],!1,(function battle_over_buttons_injectStyles(i){this.$style=eg.locals||eg}),null,null),ng=tg.exports;var rg={props:{formatLanguage:{type:String}},computed:{formatter(){if(this.formatLanguage)return new Intl.NumberFormat(this.formatLanguage)}},methods:{formatNumber(i){return this.formatter?this.formatter.format(i):i}}},ig={mixins:[rg],props:{delay:{type:Number,default:1e3},duration:{type:Number,default:1e3},from:{type:Number,required:!0},to:{type:Number,required:!0}},emits:["complete"],data(){return{endTimestamp:null,number:this.from,startTimestamp:null}},watch:{to(){this.number=this.from,setTimeout(this.animate,this.delay)}},mounted(){null!==this.delay&&setTimeout(this.animate,this.delay)},methods:{animate(){this.startTimestamp=Date.now(),this.endTimestamp=this.startTimestamp+this.duration,requestAnimationFrame(this.animationFrame)},animationFrame(){const i=Date.now();if(i>=this.endTimestamp)return this.number=this.to,void this.$emit("complete");const s=(({currentPosition:i,end:s,start:_})=>(i-_)/(s-_))({currentPosition:i,end:this.endTimestamp,start:this.startTimestamp}),_=this.to-this.from,T=Math.floor(_*s);this.number=this.from+T,requestAnimationFrame(this.animationFrame)}}},ag=ig,sg={component:"animated-number-component"};var og=(0,Rr.Z)(ag,(function(){var i,s=this,_=s.$createElement;return(s._self._c||_)("span",{class:(i={},i[s.$style.component]=!s.formatLanguage,i),domProps:{textContent:s._s(s.formatNumber(s.number))}})}),[],!1,(function animated_number_injectStyles(i){this.$style=sg.locals||sg}),null,null).exports,lg={components:{AnimatedNumber:og},props:{formatLanguage:{type:String},primaryPlayerDetails:{type:Object,required:!0},opponentDetails:{type:Object,required:!0}},data:()=>({timeoutDurations:Object.freeze(tt)})},cg={component:"battle-season-points-footer-component",center:"battle-season-points-footer-center",label:"battle-season-points-footer-label",icon:"battle-season-points-footer-icon",player:"battle-season-points-footer-player",points:"battle-season-points-footer-points",rank:"battle-season-points-footer-rank"};var ug=(0,Rr.Z)(lg,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("div",{class:i.$style.player},[i.primaryPlayerDetails.seasonRank?_("span",{class:i.$style.rank,domProps:{textContent:i._s("#"+i.primaryPlayerDetails.seasonRank)}}):i._e(),i._v(" "),_("animated-number",{class:i.$style.points,attrs:{delay:i.timeoutDurations.SEASON_POINTS_FOOTER_ANIMATION_DELAY,duration:i.timeoutDurations.SEASON_POINTS_FOOTER_ANIMATION_DURATION,"format-language":i.formatLanguage,from:i.primaryPlayerDetails.initialPoints,to:i.primaryPlayerDetails.initialPoints+i.primaryPlayerDetails.pointsDelta}})],1),i._v(" "),_("div",{class:i.$style.center},[_("span",{class:i.$style.label,domProps:{textContent:i._s(i.$trans("Season Points"))}}),i._v(" "),_("span",{staticClass:"icon-font-chess battle",class:i.$style.icon})]),i._v(" "),_("div",{class:i.$style.player},[i.opponentDetails.seasonRank?_("span",{class:i.$style.rank,domProps:{textContent:i._s("#"+i.opponentDetails.seasonRank)}}):i._e(),i._v(" "),_("animated-number",{class:i.$style.points,attrs:{delay:i.timeoutDurations.SEASON_POINTS_FOOTER_ANIMATION_DELAY,duration:i.timeoutDurations.SEASON_POINTS_FOOTER_ANIMATION_DURATION,"format-language":i.formatLanguage,from:i.opponentDetails.initialPoints,to:i.opponentDetails.initialPoints+i.opponentDetails.pointsDelta}})],1)])}),[],!1,(function battle_season_points_footer_injectStyles(i){this.$style=cg.locals||cg}),null,null),dg=ug.exports,hg=Object.defineProperty,pg=Object.defineProperties,mg=Object.getOwnPropertyDescriptors,fg=Object.getOwnPropertySymbols,gg=Object.prototype.hasOwnProperty,vg=Object.prototype.propertyIsEnumerable,battle_sidebar_footervue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?hg(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,battle_sidebar_footervue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))gg.call(s,_)&&battle_sidebar_footervue_type_script_lang_js_defNormalProp(i,_,s[_]);if(fg)for(var _ of fg(s))vg.call(s,_)&&battle_sidebar_footervue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},battle_sidebar_footervue_type_script_lang_js_spreadProps=(i,s)=>pg(i,mg(s)),bg={components:{BattleOverButtons:ng,BattleSeasonPointsFooter:dg,V5Button:Tr.V5Button},props:{backgroundTransparent:{type:Boolean,default:!1}},computed:battle_sidebar_footervue_type_script_lang_js_spreadProps(battle_sidebar_footervue_type_script_lang_js_spreadValues(battle_sidebar_footervue_type_script_lang_js_spreadValues(battle_sidebar_footervue_type_script_lang_js_spreadValues({},(0,dr.mapGetters)("user",["hyphenatedLanguage"])),(0,dr.mapGetters)("puzzlesBattle",["canClaimWin","hasAcceptedIncomingRematch","hasOpenChallenges","isBattleTypeStandard","isConnected","isGameOver","isObserving","incomingRematch","primaryPlayerStruckOut","opponentStruckOut","outgoingRematch","primaryPlayerUuid","opponentUuid"])),(0,dr.mapState)({battleIsConfirmed:({puzzlesBattle:i})=>i.battleIsConfirmed,battleOverModalVisible:({puzzlesBattle:i})=>i.battleOverModalVisible,pendingOutgoingRematch:({puzzlesBattle:i})=>i.pendingOutgoingRematch,hasTwoBoards:({puzzlesBattle:i})=>i.hasTwoBoards,isSeeking:({puzzles:i})=>i.gameplayState===_n.SEEKING,playerInfo:({puzzlesBattle:i})=>i.playerInfo,rankingResult:({puzzlesBattle:i})=>i.rankingResult})),{primaryPlayerDetails(){return getPlayerFooterDetails({rankingResult:this.rankingResult[this.primaryPlayerUuid],playerInfo:this.playerInfo[this.primaryPlayerUuid]})},opponentDetails(){return getPlayerFooterDetails({rankingResult:this.rankingResult[this.opponentUuid],playerInfo:this.playerInfo[this.opponentUuid]})},showBattleOverButtons(){return(({hasTwoBoards:i,isGameOver:s,isObserving:_,opponentStruckOut:T,primaryPlayerStruckOut:S})=>(S||_&&T||s)&&!i)({hasTwoBoards:this.hasTwoBoards,isGameOver:this.isGameOver,isObserving:this.isObserving,opponentStruckOut:this.opponentStruckOut,primaryPlayerStruckOut:this.primaryPlayerStruckOut})}}),methods:battle_sidebar_footervue_type_script_lang_js_spreadProps(battle_sidebar_footervue_type_script_lang_js_spreadValues(battle_sidebar_footervue_type_script_lang_js_spreadValues({},(0,dr.mapActions)("puzzlesBattle",["cancelSeek","cancelChallenge","claimWin","observePlayer","observeNextBattle","findNewBattle","rematch","resetToStartView","acceptRematch","cancelRematch","declineRematch","rematch"])),(0,dr.mapActions)({startSession:"puzzles/startSession"})),{playAgain(){this.startSession(vn.BATTLE)}})},yg={component:"battle-sidebar-footer-component",transparent:"battle-sidebar-footer-transparent",row:"battle-sidebar-footer-row",hiddenRow:"battle-sidebar-footer-hiddenRow",button:"battle-sidebar-footer-button",spacer:"battle-sidebar-footer-spacer","stat-icon":"battle-sidebar-footer-stat-icon",arrows:"battle-sidebar-footer-arrows","battle-over-buttons":"battle-sidebar-footer-battle-over-buttons","fade-enter-active":"battle-sidebar-footer-fade-enter-active","fade-leave-active":"battle-sidebar-footer-fade-leave-active","fade-enter":"battle-sidebar-footer-fade-enter","fade-leave-to":"battle-sidebar-footer-fade-leave-to"};var _g=(0,Rr.Z)(bg,(function(){var i,s=this,_=s.$createElement,T=s._self._c||_;return T("div",{class:[s.$style.component,(i={},i[s.$style.transparent]=s.backgroundTransparent,i)]},[s.battleIsConfirmed?s._e():[T("transition",{attrs:{mode:"out-in","enter-class":s.$style["fade-enter"],"enter-active-class":s.$style["fade-enter-active"],"leave-to-class":s.$style["fade-leave-to"],"leave-active-class":s.$style["fade-leave-active"]}},[s.canClaimWin?T("v5-button",{class:s.$style.button,attrs:{theme:"basic"},domProps:{textContent:s._s(s.$trans("Claim Win"))},on:{click:s.claimWin}}):s.isSeeking?T("v5-button",{attrs:{size:"small",theme:"basic"},on:{click:function(i){s.hasOpenChallenges?s.cancelChallenge():s.cancelSeek()}}},[T("span",{staticClass:"icon-font-chess ui_v5-button-icon x"}),s._v(" "),T("span",{domProps:{textContent:s._s(s.$trans("Cancel"))}})]):s.showBattleOverButtons?T("battle-over-buttons",{class:s.$style["battle-over-buttons"],attrs:{theme:"basic","is-connected":s.isConnected,"is-game-over":s.isGameOver,"is-player":!s.hasTwoBoards,"incoming-rematch":s.incomingRematch,"outgoing-rematch":s.outgoingRematch,"has-accepted-incoming-rematch":s.hasAcceptedIncomingRematch,"pending-outgoing-rematch":s.pendingOutgoingRematch},on:{"next-battle":s.observeNextBattle,"new-battle":s.findNewBattle,rematch:s.rematch,"cancel-rematch":s.cancelRematch,"accept-rematch":s.acceptRematch,"decline-rematch":s.declineRematch,"reset-to-start-view":s.resetToStartView}}):s.isBattleTypeStandard?T("battle-season-points-footer",{attrs:{"format-language":s.hyphenatedLanguage,"primary-player-details":s.primaryPlayerDetails,"opponent-details":s.opponentDetails}}):s._e()],1)]],2)}),[],!1,(function battle_sidebar_footer_injectStyles(i){this.$style=yg.locals||yg}),null,null),wg=_g.exports,kg={name:"SeekingAnimation"},Tg={component:"seeking-animation-component"};var Sg=(0,Rr.Z)(kg,(function(){var i=this,s=i.$createElement;return(i._self._c||s)("div",{class:i.$style.component})}),[],!1,(function seeking_animation_injectStyles(i){this.$style=Tg.locals||Tg}),null,null).exports,Cg=(0,Rr.Z)({},(function(){var i=this.$createElement,s=this._self._c||i;return s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20"}},[s("path",{attrs:{d:"M5.48,9a.93.93,0,0,0-.3.71v.58a.94.94,0,0,0,.3.71,1,1,0,0,0,.71.3h4.58a1,1,0,0,0,.71-.3.94.94,0,0,0,.29-.71V9.7A.92.92,0,0,0,11.48,9a1,1,0,0,0-.71-.27H6.19A1,1,0,0,0,5.48,9Z"}}),s("path",{attrs:{d:"M19.22,6.1a9.9,9.9,0,0,0-2.14-3.18A10.23,10.23,0,0,0,13.9.78,9.76,9.76,0,0,0,10,0,9.86,9.86,0,0,0,6.1.78,10,10,0,0,0,.78,6.1,9.81,9.81,0,0,0,0,10a9.81,9.81,0,0,0,.78,3.9A10,10,0,0,0,6.1,19.22,9.86,9.86,0,0,0,10,20a9.76,9.76,0,0,0,3.89-.78,10.23,10.23,0,0,0,3.18-2.14,9.9,9.9,0,0,0,2.14-3.18A9.81,9.81,0,0,0,20,10,9.81,9.81,0,0,0,19.22,6.1ZM17.07,13a7.65,7.65,0,0,1-1.65,2.42A7.81,7.81,0,0,1,13,17.06a7.46,7.46,0,0,1-3,.6,7.51,7.51,0,0,1-3-.6,7.74,7.74,0,0,1-2.43-1.65A8,8,0,0,1,2.94,13a7.46,7.46,0,0,1-.6-3,7.46,7.46,0,0,1,.6-3A8,8,0,0,1,4.58,4.59,7.74,7.74,0,0,1,7,2.94a7.51,7.51,0,0,1,3-.6,7.45,7.45,0,0,1,3,.6,7.74,7.74,0,0,1,2.43,1.65A7.65,7.65,0,0,1,17.07,7a7.46,7.46,0,0,1,.6,3A7.46,7.46,0,0,1,17.07,13Z"}})])}),[],!1,null,null,null),xg={name:"TickerIcon",components:{Timer:Cg.exports},data:()=>({rotate:0}),computed:{style(){return{transform:`rotate(${this.rotate}deg)`}}},methods:{tick(){this.rotate+=90}}},Eg={component:"ticker-icon-component"};var Pg=(0,Rr.Z)(xg,(function(){var i=this,s=i.$createElement;return(i._self._c||s)("timer",{class:i.$style.component,style:i.style})}),[],!1,(function ticker_icon_injectStyles(i){this.$style=Eg.locals||Eg}),null,null).exports,Ag={name:"TimerLabel",props:{time:{required:!0,type:Number}},computed:{timeLabel(){return secondsToMinutesAndSecondsString(this.time)}}},Og={component:"timer-label-component"};var Mg=(0,Rr.Z)(Ag,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("div",{domProps:{textContent:i._s(i.timeLabel)}})])}),[],!1,(function timer_label_injectStyles(i){this.$style=Og.locals||Og}),null,null),zg=Mg.exports;const Ig={TimerTypes:{FIRE_ICON:"fire-icon",LIGHTNING_ICON:"lightning",LIVE:"live",TICKER:"ticker"},ClockTypes:{INCREASING:"increasing",DECREASING:"decreasing"}};var Lg={name:"Timer",components:{IconFont:Mr.Z,TickerIcon:Pg,TimerComponent:zg},props:{clockType:{type:String,default:Ig.ClockTypes.DECREASING},iconType:{type:String,default:Ig.TimerTypes.FIRE_ICON},showFinishTime:{type:Boolean,default:!1},initialTime:{type:Number,default:300},isVertical:{type:Boolean,default:!1},runningOutOfTimeSeconds:{type:Number,default:30}},emits:["timer-stopped"],data(){return{isActive:!1,now:0,finishTime:this.showFinishTime?this.initialTime:0,startTime:0,tickInterval:null}},computed:{clockClasses(){const i={};return i[this.$style.danger]=this.runningOutOfTime,i[this.$style.active]=this.isActive,i[this.$style.column]=this.isVertical,i},showIconFont(){return[Ig.TimerTypes.FIRE_ICON,Ig.TimerTypes.LIGHTNING_ICON,Ig.TimerTypes.LIVE].includes(this.iconType)},timerSeconds(){return this.finishTime&&this.now>=this.finishTime?0:this.isActive||this.showFinishTime?this.clockType===Ig.ClockTypes.DECREASING?this.finishTime-this.now:this.now-this.startTime:this.initialTime},runningOutOfTime(){return!(!this.isActive||this.clockType===Ig.ClockTypes.INCREASING)&&(({finishTime:i,startTime:s,secondsToCount:_})=>i-s<=_)({startTime:this.now,finishTime:this.finishTime,secondsToCount:this.runningOutOfTimeSeconds})}},watch:{runningOutOfTime(i){i&&playSoundEffect(xt.TIME_WARNING)}},beforeDestroy(){clearInterval(this.tickInterval)},methods:{start(){this.tickInterval=setInterval(this.tick.bind(this),200),this.now=Math.round(new Date/1e3),this.startTime=this.now,this.finishTime=this.initialTime?this.now+this.initialTime:0,this.isActive=!0},stop(){clearInterval(this.tickInterval),this.isActive=!1,this.$emit("timer-stopped")},reset(){this.now=0,this.finishTime=0,this.startTime=0,this.isActive=!1},tick(){const i=Math.round(new Date/1e3);this.iconType===Ig.TimerTypes.TICKER&&i!==this.now&&this.$refs.tickerIcon.tick(),this.now=i,this.clockType===Ig.ClockTypes.DECREASING&&this.finishTime===this.now&&this.stop()}}},Rg={component:"timer-component",column:"timer-column","icon-font":"timer-icon-font","timer-label":"timer-timer-label",danger:"timer-danger",icon:"timer-icon",active:"timer-active"};var Ng=(0,Rr.Z)(Lg,(function(){var i,s=this,_=s.$createElement,T=s._self._c||_;return T("div",{class:[s.$style.component,s.clockClasses]},[s.showIconFont?T("icon-font",{class:s.$style["icon-font"],attrs:{name:s.iconType}}):s._e(),s._v(" "),s.showIconFont?s._e():T("ticker-icon",{ref:"tickerIcon",class:s.$style.icon}),s._v(" "),T("timer-component",{class:(i={},i[s.$style["timer-label"]]=!0,i[s.$style.danger]=s.runningOutOfTime,i),attrs:{time:s.timerSeconds}})],1)}),[],!1,(function timer_injectStyles(i){this.$style=Rg.locals||Rg}),null,null),Dg=Ng.exports,jg={components:{UserAvatar:us},props:{challenge:{type:Object,required:!0}},emits:["cancel-challenge"]},Bg={component:"battle-challenge-component",avatar:"battle-challenge-avatar",username:"battle-challenge-username",icon:"battle-challenge-icon"};var $g=(0,Rr.Z)(jg,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("user-avatar",{class:i.$style.avatar,attrs:{image:i.challenge.user.avatar_url,"is-online":Boolean(i.challenge.user.is_online)}}),i._v(" "),_("span",{class:i.$style.username,domProps:{textContent:i._s(i.challenge.user.username)}}),i._v(" "),_("a",{staticClass:"icon-font-chess x",class:i.$style.icon,on:{click:function(s){return i.$emit("cancel-challenge")}}})],1)}),[],!1,(function battle_challenge_injectStyles(i){this.$style=Bg.locals||Bg}),null,null),Ug={components:{BattleChallenge:$g.exports,LoaderThreeBounce:sl.Z},props:{challenges:{type:Object,required:!0}},emits:["cancel-challenge"]},Fg={component:"battle-challenge-list-component",loader:"battle-challenge-list-loader","waiting-text":"battle-challenge-list-waiting-text"};var Hg=(0,Rr.Z)(Ug,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("loader-three-bounce",{class:i.$style.loader,attrs:{"is-circle":"",size:50}}),i._v(" "),_("span",{class:i.$style["waiting-text"],domProps:{textContent:i._s(i.$trans("Waiting for challenge to be accepted ..."))}}),i._v(" "),i._l(i.challenges,(function(s){return _("battle-challenge",{key:s.id,attrs:{challenge:s},on:{"cancel-challenge":function(_){return i.$emit("cancel-challenge",s)}}})}))],2)}),[],!1,(function battle_challenge_list_injectStyles(i){this.$style=Fg.locals||Fg}),null,null),qg=Hg.exports,Vg={name:"PuzzleStreakIcon",props:{icon:{type:String,required:!0,validator:i=>["square-checkmark","square-minus","square-x","square-x-gray","square-empty"].includes(i)},size:{type:String,default:"medium",validator:i=>["medium","large"].includes(i)},animated:{type:Boolean,default:!1}},emits:["click"]},Gg={component:"streak-icon-component",animated:"streak-icon-animated","bounce-in":"streak-icon-bounce-in",medium:"streak-icon-medium",large:"streak-icon-large","square-x":"streak-icon-square-x","square-minus":"streak-icon-square-minus","square-checkmark":"streak-icon-square-checkmark","square-empty":"streak-icon-square-empty","square-x-gray":"streak-icon-square-x-gray"};var Zg=(0,Rr.Z)(Vg,(function(){var i,s=this,_=s.$createElement;return(s._self._c||_)("span",{class:[s.$style.component,s.$style[s.icon],s.$style[s.size],(i={},i[s.$style.animated]=s.animated,i)],on:{click:function(i){return s.$emit("click",i)}}})}),[],!1,(function streak_icon_injectStyles(i){this.$style=Gg.locals||Gg}),null,null).exports;const Wg="square-checkmark",Kg="square-minus",Yg="square-x";const Xg={default:["#B58863","#F0D9B5",null,".png","#ffff33"],"8_bit":["#6a9b41","#f3f3f4","8_bit",".png","#ffff33"],bases:["#c26b38","#efcca1","bases",".jpg","#f5cc2a"],blue:["#4D6D92","#ECECD7","blue",".png","#00a5ff"],brown:["#B58863","#F0D9B5","brown",".png","#ffff33"],bubblegum:["#f9cdd3","#fff3f3","bubblegum",".png","#de5d6f"],burled_wood:["#895132","#d9b088","burled_wood",".jpg","#ee9016"],dark_wood:["#8d675e","#e7cdb2","dark_wood",".jpg","#cc9122"],dash:["#6b3a27","#bd9257","dash",".jpg","#eca722"],glass:["#282f3f","#667188","glass",".png","#5b91b3"],graffiti:["#b96f18","#aeaeae","graffiti",".jpg","#f39011"],green:["#779952","#edeed1","green",".png","#ffff33"],icy_sea:["#7a9db2","#c5d5dc","icy_sea",".jpg","#5ed7f1"],light:["#aaaaaa","#dcdcdc","light",".png","#a4b8c4"],lolz:["#909898","#e0e9e9","lolz",".jpg","#a3becd"],marble:["#706b66","#c7bdaa","marble",".jpg","#f0db86"],metal:["#6e6e6e","#c9c9c9","metal",".jpg","#a3becd"],nature:["#8c976e","#c3d1a4","translucent",".png","#eef396"],neon:["#636363","#b9b9b9","neon",".png","#6d90a6"],newspaper:["#5a5956","#5a5956","newspaper",".jpg","#99976e"],orange:["#D08B18","#FCE4B2","orange",".png","#ffff33"],overlay:["#789ebd","#4878a0","overlay",".png","#0d9acf"],parchment:["#B58863","#F0D9B5","parchment",".jpg","#d8cc66"],purple:["#8877B7","#EFEFEF","purple",".png","#7dacc9"],red:["#BA5546","#F0D8BF","red",".png","#f8f893"],sand:["#b8a590","#e5d3c4","sand",".jpg","#e2bc87"],sky:["#c2d7e2","#efefef","sky",".png","#65daf7"],stone:["#666463","#c8c3bd","stone",".jpg","#36525f"],tan:["#D08B18","#FCE4B2","tan",".png","#f7d84a"],tournament:["#316549","#ebece8","tournament",".jpg","#a4c25b"],translucent:["#667188","#282f3f","translucent",".png","#5b91b3"],walnut:["#835f42","#c0a684","walnut",".jpg","#d1a52d"],wood:["#8d675e","#e7cdb2","dark_wood",".jpg","#cc9122"],grey:["#aaaaaa","#dcdcdc","light",".png","#a4b8c4"],pink:["#f9cdd3","#fff3f3","bubblegum",".png","#de5d6f"],natural:["#D08B18","#FCE4B2","tan",".png","#f0e464"],winboard:["#316549","#ebece8","tournament",".jpg","#a4c25b"],blackwhite:["#667188","#282f3f","translucent",".png","#5b91b3"],marbleblue:["#c2d7e2","#efefef","marbleblue",".jpg","#65daf7"],marblebrown:["#b96f18","#aeaeae","graffiti",".jpg","#f39011"],marblegreen:["#706b66","#c7bdaa","marblegreen",".jpg","#f0db86"],wooddark:["#895132","#d9b088","burled_wood",".jpg","#ee9016"],woodlight:["#B58863","#F0D9B5","parchment",".jpg","#d8cc66"],woodmid:["#8d675e","#e7cdb2","dark_wood",".jpg","#cc9122"],woodolive:["#6e6e6e","#c9c9c9","woodolive",".jpg","#a3becd"]},Qg={modern2:{imgPath:"modern",imgFormat:".png"},lines:{imgPath:"alpha",imgFormat:".png"},"3dwood":{imgPath:"3d_wood",imgFormat:".png"},"3dplastic":{imgPath:"3d_plastic",imgFormat:".png"},"3dchesskid":{imgPath:"3d_chesskid",imgFormat:".png"}},getPieceScheme=i=>Qg[i]?Qg[i]:{imgPath:i,imgFormat:".png"};new Array(76).join().split(",").map(((i,s)=>2*s)).slice(22);const Jg=(new class Configuration{constructor(){const i=Object.assign({},window.Config);i.MainDomain||(i.MainDomain=i["domain.main"]),i.StaticDomain||(i.StaticDomain=i["domain.static"]),i.FilesDomain||(i.FilesDomain=i["domain.files"]),i.LiveDomain||(i.LiveDomain=i["domain.live"]),i.LiveWebSocketDomain||(i.LiveWebSocketDomain=i["domain.livews"]),i.LiveSecureWebSocketDomain||(i.LiveSecureWebSocketDomain=i["domain.livewss"]),i.VoiceDomain||(i.VoiceDomain=i["domain.voice"]),i.CssJsDomain||(i.CssJsDomain=i["domain.cssjs"]),i.ImagesDomain||(i.ImagesDomain=i["domain.images"]),i.AvatarsDomain||(i.AvatarsDomain=i["domain.avatars"]),i.ChessBoardAssetsDomain||(i.ChessBoardAssetsDomain="//images.chesscomfiles.com/chess-themes"),i.ChessBoardLocalAssetsDomain||(i.ChessBoardLocalAssetsDomain="bundles/web/images/chess-themes/pieces"),i.AppVersion||(i.AppVersion=i["application.version"]),i.AppVersion||(i.AppVersion=Math.floor(1e4*Math.random())+1e4),i.DocumentRoot||(i.DocumentRoot=""),void 0===i.oldThemes&&(i.oldThemes=!0),i.GfxUrl||(i.GfxUrl=i.ChessBoardAssetsDomain),i.GfxLocalUrl||(i.GfxLocalUrl=i.ChessBoardLocalAssetsDomain),i.ChessBoardPiecesPath||(i.ChessBoardPiecesPath="/pieces"),i.ChessBoardBackgroundsPath||(i.ChessBoardBackgroundsPath="/boards"),i.ChessBoardArrowsPath||(i.ChessBoardArrowsPath="/arrows"),i.AudioSet||(i.AudioSet="default"),i.AudioUrl||(i.AudioUrl=`${i.ChessBoardAssetsDomain}/sounds/`),i.DiagramGetPostUrl||(i.DiagramGetPostUrl="/api/get_diagram"),i.DailyPuzzleGetUrl||(i.DailyPuzzleGetUrl="/api/get_puzzle"),this.config=i}}).config;var ev={name:"GamePreview",props:{autoResize:{type:Boolean},colorScheme:{type:String,default:"green"},fen:{type:String},flipBoard:{type:Boolean},highlightColor:{type:String},highlightSquares:{type:String},is960Board:{type:Boolean},is960Title:{type:Boolean},isBoardPopover:{type:Boolean},pieceStyle:{type:String,default:"neo"},size:{type:[String,Number]},staticBoard:{type:[Boolean,String]},hideHandPieces:{type:Boolean}},data:()=>({squares:[],squareWidth:12.5,isRetina:window.devicePixelRatio>1,backgroundImage:null,board:null,pieces:[]}),computed:{isThreeD:()=>!1,loadStaticBoard(){return"boolean"!=typeof this.staticBoard?"true"===this.staticBoard:this.staticBoard},watchedProps(){return this.fen,this.size,this.flipBoard,this.autoResize,this.isBoardPopover,this.colorScheme,this.pieceStyle,this.highlightColor,this.highlightSquares,Date.now()},gamePreviewScheme(){return`game-preview-${this.colorScheme}`}},watch:{watchedProps(){this.updatePreview()}},created(){this.updatePreview()},methods:{updatePreview(){this.staticBoard||(this.board=this.getBoard()),this.pieces=this.getPieces(),this.squares=this.getHighlightedSquares()},getHighlightedSquares(){const i=[],s={a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7},_=this.squareWidth,T=this.highlightSquares,S=this.flipBoard||!1,C=this.colorScheme||"green",P=Xg[C]||Xg.default,O=this.highlightColor||P[4];if(P[2]||(P[2]=C),"string"==typeof T)for(let M=0;M<T.length;M+=2){let C=s[T.substr(M,1)],P=8-Number(T.substr(M+1,1));S&&(C=7-C,P=7-P);const R=7*_-P*_,D=C*_;if(isNaN(R)||isNaN(D))break;i.push({backgroundColor:O,bottom:`${R}%`,height:`${this.squareWidth}%`,key:`${C}${P}${this.highlightSquares}`,left:`${D}%`,opacity:".5",position:"absolute",right:100-D-_+"%",top:100-R-_+"%",width:`${this.squareWidth}%`})}return i},getBoardUrl(){const i=Jg.GfxUrl+Jg.ChessBoardBackgroundsPath;let s=Math.max(20,Number(this.size||0));const _=this.colorScheme||"green",T=Xg[_]||Xg.green;this.isRetina&&(s*=2);let S=T[2];"overlay"===S&&(S="translucent");return`${i}/${S}/${s}${T[3]}`},getBoard(){const i=Math.max(10,Number(this.size||0));let s=8*i,_="none",T="0";return this.autoResize&&(_="100%",s=0,T="100%"),{width:`${8*i}px`,height:`${s}px`,maxWidth:_,paddingBottom:T,backgroundImage:`url(${this.getBoardUrl()})`}},getPieces(){return this.fen?this.parseFEN():[]},parsePiece(i,s){let _=i;const T=this.flipBoard,S=Math.max(20,Number(this.size||0));let C=0,P="";for(;_>=8;)C+=1,_-=8;return/[A-Z]/.test(s)?P="w":/[a-z]/.test(s)&&(P="b"),T&&(_=7-_,C=7-C),{bottom:7*this.squareWidth-C*this.squareWidth,left:_*this.squareWidth,size:S,type:s.toLowerCase(),color:P}},getPieceUrl(i,s){let _=Jg.GfxUrl+Jg.ChessBoardPiecesPath,T=Math.max(30,Number(this.size||0)),S=this.pieceStyle||"preview";const C=window.location.href.indexOf(D.Z.generate("web_user_settings_themes")),P=window.location.href.indexOf(D.Z.generate("web_user_settings_board"));return"real3d"===S&&-1!==C||"real3d"===S&&-1!==P?_=Jg.GfxLocalUrl:S="real3d"===S?"3d_wood":getPieceScheme(S).imgPath,this.isRetina&&(T*=2),_===Jg.GfxLocalUrl?(0,Ja.n)(`${_}/${S}/${T}/${i}${s}.png`):`${_}/${S}/${T}/${i}${s}.png`},parseFEN(){const i=[],s=this.fen.split(/\s/g)[0];let _=0;for(let T=0;T<s.length;T+=1){const S=s.substr(T,1);if(S.match(/[A-Z]/i)){const s=this.parsePiece(_,S);let T="";S===S.toLowerCase()?T+="b":T+="w",T+=S.toLowerCase(),_+=1,(!this.hideHandPieces||s.bottom>=0)&&i.push({url:this.getPieceUrl(s.color,s.type),bottom:`${s.bottom}%`,left:`${s.left}%`,size:s.size,code:T})}S.match(/[0-8]/)&&(_+=S/1)}return i},pieceClass(i){let s=this.pieceStyle;"modern2"===s?s="modern":"real3d"===s?s="3d_wood":/3d[^_]/.test(s)&&(s=`3d_${s.substr(2)}`);let _=`sprite-piece sprite-piece-60 sprite-piece-${s}`;return this.isThreeD?_+=` sprite-3d-piece sprite-3d-piece-${i.code}`:_+=` sprite-piece-${i.code}`,_}}},tv=ev,nv={component:"game-preview-component",piece:"game-preview-piece","icon-wrapper":"game-preview-icon-wrapper",icon:"game-preview-icon","chess960-title":"game-preview-chess960-title"};var rv=(0,Rr.Z)(tv,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return i.loadStaticBoard?_("div",{class:i.$style.component},[_("div",{staticClass:"game-preview-board",class:i.gamePreviewScheme}),i._v(" "),i._l(i.squares,(function(i){return _("div",{key:i.key,staticClass:"highlight-square",style:i})})),i._v(" "),i._l(i.pieces,(function(s,T){return _("div",{key:T,class:i.pieceClass(s),style:{bottom:s.bottom,left:s.left}})}))],2):_("div",{class:i.$style.component,style:i.board},[i.is960Board?_("div",{class:i.$style["icon-wrapper"]},[_("span",{staticClass:"icon-font-chess chess960",class:i.$style.icon})]):i._e(),i._v(" "),i.is960Title?_("div",{class:i.$style["chess960-title"],domProps:{textContent:i._s("Chess960")}}):i._e(),i._v(" "),i._l(i.squares,(function(i){return _("div",{key:i.key,style:i})})),i._v(" "),i._l(i.pieces,(function(s,T){return _("img",{key:T,class:i.$style.piece,style:{width:i.squareWidth+"%",height:i.squareWidth+"%",bottom:s.bottom,left:s.left},attrs:{alt:s.pieceCode,src:s.url,width:"20",height:"20"}})}))],2)}),[],!1,(function game_preview_injectStyles(i){this.$style=nv.locals||nv}),null,null),iv={name:"GamePreview",extends:rv.exports,computed:{isThreeD(){return this.$store.user.isThreeD}}},av=(0,Rr.Z)(iv,undefined,undefined,!1,null,null,null).exports,sv=Object.defineProperty,ov=Object.defineProperties,lv=Object.getOwnPropertyDescriptors,cv=Object.getOwnPropertySymbols,uv=Object.prototype.hasOwnProperty,dv=Object.prototype.propertyIsEnumerable,board_popover_defNormalProp=(i,s,_)=>s in i?sv(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,hv={name:"board-popover",components:{GamePreview:av},data:()=>({data:null,defaultSide:"right",flipBoard:!1,popoverSquareSize:20,position:{},referenceElement:null,scrollElement:null,visible:!1}),computed:((i,s)=>ov(i,lv(s)))(((i,s)=>{for(var _ in s||(s={}))uv.call(s,_)&&board_popover_defNormalProp(i,_,s[_]);if(cv)for(var _ of cv(s))dv.call(s,_)&&board_popover_defNormalProp(i,_,s[_]);return i})({},(0,dr.mapState)(["boardOptions"])),{classes(){return{[this.$style.component]:!0,[this.$style[this.position.placement]]:this.position.placement}},popoverStyles(){const i=this.position,s={left:`${i.left||0}px`,top:`${i.top||0}px`};return(0,Or.t)()&&(s.left=`${window.innerWidth-i.left-10||0}px`),s}}),watch:{visible(i){i?(this.referenceElement.addEventListener("mouseout",this.hide),this.scrollElement.addEventListener("scroll",this.hide)):(this.referenceElement.removeEventListener("mouseout",this.hide),this.scrollElement.removeEventListener("scroll",this.hide))}},methods:{hide(){this.visible=!1},initializeAndShow(i,s){i&&i.fen&&(this.data=i,this.defaultSide=i.modifier||this.defaultSide,this.referenceElement=s,this.flipBoard=i.flipBoard||this.boardOptions.flipBoard,this.scrollElement=window,this.show())},show(){this.visible=!0,this.$nextTick((()=>{this.position=(0,ws.bt)(this.referenceElement,this.$refs.popover,this.defaultSide,15)}))}}},pv={mixins:[hv],mounted(){O.Z.on("boardPopover/show",this.initializeAndShow),O.Z.on("boardPopover/hide",this.hide)}},mv={component:"board-popover-component",right:"board-popover-right",left:"board-popover-left",top:"board-popover-top",bottom:"board-popover-bottom"};var fv=(0,Rr.Z)(pv,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return i.visible?_("div",{ref:"popover",class:i.classes,style:i.popoverStyles},[_("game-preview",{attrs:{"color-scheme":i.boardOptions.boardStyle,fen:i.data.fen,"flip-board":i.flipBoard,"is-board-popover":!0,"highlight-squares":i.data.highlightedSquares,"piece-style":i.boardOptions.pieceStyle,size:i.popoverSquareSize}}),i._v(" "),i.data.component?_(i.data.component,{tag:"component",attrs:{data:i.data}}):i._e()],1):i._e()}),[],!1,(function board_popover_injectStyles(i){this.$style=mv.locals||mv}),null,null),gv=fv.exports,vv=__webpack_require__(94573),bv=__webpack_require__(82e3),yv=__webpack_require__(66524);const _v=vv.Z.getDefaultOptions(),wv={allowMarkings:!0,captureKeyStrokes:!0,enabled:!0,fadeSetup:0,fetched:!1,flipBoard:!1,flipped:!1,highlightColor:null,highlightOpacity:_v.highlightOpacity};var kv={namespaced:!0,state:(0,yv.Z)(_v,{highlightMovesUI:!0,maxWidth:0},bv.Z.board.boardOptions,wv)},Tv=__webpack_require__(32349);var Sv=Object.defineProperty,Cv=Object.defineProperties,xv=Object.getOwnPropertyDescriptors,Ev=Object.getOwnPropertySymbols,Pv=Object.prototype.hasOwnProperty,Av=Object.prototype.propertyIsEnumerable,directives_board_popover_defNormalProp=(i,s,_)=>s in i?Sv(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_;(0,qi.X)({boardOptions:kv});const Ov={},Mv=(0,ir.Z)({boardPopover:{component:gv,el:"#board-popover",store:st.default}}),showBoardPopover=({currentTarget:i})=>{Mv.createInstance("boardPopover"),O.Z.emit("boardPopover/show",Ov[i.dataset.boardPopover],i)};var zv={bind:(i,s)=>{const _=Object.keys(s.modifiers).length?Object.keys(s.modifiers)[0]:null,T=Math.random().toString(36).substring(2,15),S=s.value,{element:C}=S,P=((i,s)=>{var _={};for(var T in i)Pv.call(i,T)&&s.indexOf(T)<0&&(_[T]=i[T]);if(null!=i&&Ev)for(var T of Ev(i))s.indexOf(T)<0&&Av.call(i,T)&&(_[T]=i[T]);return _})(S,["element"]);i.dataset.boardPopover=T,Ov[T]=((i,s)=>Cv(i,xv(s)))(((i,s)=>{for(var _ in s||(s={}))Pv.call(s,_)&&directives_board_popover_defNormalProp(i,_,s[_]);if(Ev)for(var _ of Ev(s))Av.call(s,_)&&directives_board_popover_defNormalProp(i,_,s[_]);return i})({},(0,Tv.Z)(P)),{element:C,modifier:_}),i.addEventListener("mouseover",showBoardPopover)},componentUpdated:(i,s)=>{Object.assign(Ov[i.dataset.boardPopover],s.value)},unbind:i=>{delete Ov[i.dataset.boardPopover],i.removeEventListener("mouseover",showBoardPopover)}},Iv=__webpack_require__(22766);const addTcnToFen=(i,s)=>{if(!s)return i;const _=Iv.Z.createGame({fen:i,moves:[...Iv.Z.decodeTCN(s)]});return _?_.fen():i};var Lv=Object.defineProperty,Rv=Object.defineProperties,Nv=Object.getOwnPropertyDescriptors,Dv=Object.getOwnPropertySymbols,jv=Object.prototype.hasOwnProperty,Bv=Object.prototype.propertyIsEnumerable,vertical_streak_indicatorvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?Lv(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,$v={name:"StreakIndicator",components:{StreakIcon:Zg},directives:{BoardPopover:zv},props:{isEnabled:{type:Boolean,default:!1},rounds:{type:Array,required:!0}},emits:["click"],data:()=>({columnWidth:18,numberPerColumn:10}),computed:{componentStyles(){return{width:this.columnNumber*this.columnWidth+"px"}},columnNumber(){const i=this.rounds.length/this.numberPerColumn;return this.rounds.length%this.numberPerColumn==0?i+1:Math.ceil(i)},emptyIconsNumber(){return this.columnNumber*this.numberPerColumn-this.rounds.length}},methods:{getIcon(i){switch(i){case!0:return Wg;case!1:return Yg;default:return Kg}},onClick(i,s){this.isEnabled&&(i.round=s,this.$emit("click",i))},popoverDetails:i=>((i,s)=>Rv(i,Nv(s)))(((i,s)=>{for(var _ in s||(s={}))jv.call(s,_)&&vertical_streak_indicatorvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(Dv)for(var _ of Dv(s))Bv.call(s,_)&&vertical_streak_indicatorvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i})({},i),{fen:addTcnToFen(i.initialFen,i.firstMove)})}},Uv=$v,Fv={component:"vertical-streak-indicator-component",empty:"vertical-streak-indicator-empty",icon:"vertical-streak-indicator-icon",link:"vertical-streak-indicator-link"};var Hv=(0,Rr.Z)(Uv,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component,style:i.componentStyles},[i._l(i.rounds,(function(s,T){var S;return _("streak-icon",{directives:[{name:"board-popover",rawName:"v-board-popover",value:i.popoverDetails(s),expression:"popoverDetails(round)"}],key:T,class:[i.$style.icon,(S={},S[i.$style.link]=i.isEnabled,S)],attrs:{icon:i.getIcon(s.solved)},on:{click:function(_){return i.onClick(_,s)}}})})),i._v(" "),i._l(i.emptyIconsNumber,(function(s){return _("div",{key:"empty-icon-"+s,class:[i.$style.empty,i.$style.icon]})}))],2)}),[],!1,(function vertical_streak_indicator_injectStyles(i){this.$style=Fv.locals||Fv}),null,null),qv=Hv.exports,Vv={name:"Avatar",props:{alt:{type:String,default:""},src:{type:String,default:""},width:{type:[Number,String],default:"50"},height:{type:[Number,String],default:"50"}},emits:["click"],data:()=>({failed:!1,failedSrcSet:!1,defaultAvatar:(0,Ja.n)("bundles/web/images/user-image.svg")}),computed:{avatarSrcset(){return this.failedSrcSet?null:(0,Bd.b)(this.avatarUrl)},avatarUrl(){return this.failed||!this.src?this.defaultAvatar:this.src}},watch:{src(i,s){i!==s&&(this.failed=!1,this.failedSrcSet=!1)}},methods:{onError(){this.avatarSrcset?this.failedSrcSet=!0:this.failed=!0}}},Gv={component:"avatar-component"};var Zv=(0,Rr.Z)(Vv,(function(){var i=this,s=i.$createElement;return(i._self._c||s)("img",{class:i.$style.component,attrs:{alt:i.alt,src:i.avatarUrl,srcset:i.avatarSrcset,width:i.width,height:i.height},on:{error:i.onError,click:function(s){return i.$emit("click",s)}}})}),[],!1,(function avatar_injectStyles(i){this.$style=Gv.locals||Gv}),null,null).exports;const createUserPopoverProps=({id:i,username:s,followingUser:_,followUser:T,unfollowUser:S})=>{const C=Boolean(_)&&_.id===i;return{username:s,actions:[{label:C?nt.UNFOLLOW:nt.FOLLOW,iconName:"battle",handler:()=>{C?S({id:i,username:s}):T({id:i,username:s})}}]}};var Wv=Object.defineProperty,Kv=Object.defineProperties,Yv=Object.getOwnPropertyDescriptors,Xv=Object.getOwnPropertySymbols,Qv=Object.prototype.hasOwnProperty,Jv=Object.prototype.propertyIsEnumerable,battle_playervue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?Wv(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,battle_playervue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))Qv.call(s,_)&&battle_playervue_type_script_lang_js_defNormalProp(i,_,s[_]);if(Xv)for(var _ of Xv(s))Jv.call(s,_)&&battle_playervue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},battle_playervue_type_script_lang_js_spreadProps=(i,s)=>Kv(i,Yv(s)),eb={components:{Avatar:Zv,CountryFlag:Vr,UserChessTitle:ec.Z,UserFlairIcon:uc},directives:{UserPopover:eu},props:{isObservable:{type:Boolean,default:!1},player:{type:Object,default:()=>{}}},computed:battle_playervue_type_script_lang_js_spreadProps(battle_playervue_type_script_lang_js_spreadValues({},(0,dr.mapState)({followingUser:({puzzlesBattle:i})=>i.followingUser,observedPlayerUuid:({puzzlesBattle:i})=>i.observedPlayerUuid,userUuid:({user:i})=>i.uuid})),{avatarUrl(){return this.player.avatarUrl||window.Config.noAvatar},isBeingObserved(){return this.isObservable&&this.observedPlayerUuid===this.player.id},userPopoverProps(){return createUserPopoverProps({id:this.player.id,username:this.player.username,followingUser:this.followingUser,followUser:this.followUser,unfollowUser:this.unfollowUser})}}),methods:battle_playervue_type_script_lang_js_spreadProps(battle_playervue_type_script_lang_js_spreadValues({},(0,dr.mapActions)("puzzlesBattle",["followUser","unfollowUser","observePlayer","stopObserving"])),{observe(){this.isObservable&&(this.player.id===this.userUuid?this.stopObserving():this.observePlayer(this.player.id))}})},tb=eb,nb={component:"battle-player-component",username:"battle-player-username",avatar:"battle-player-avatar",ranking:"battle-player-ranking","is-being-observed":"battle-player-is-being-observed","is-observable":"battle-player-is-observable",flag:"battle-player-flag",title:"battle-player-title",opponent:"battle-player-opponent","user-details":"battle-player-user-details",row:"battle-player-row",flair:"battle-player-flair"};var rb=(0,Rr.Z)(tb,(function(){var i,s=this,_=s.$createElement,T=s._self._c||_;return T("div",{class:s.$style.component},[T("div",{class:s.$style["user-details"]},[T("div",{class:s.$style.row},[s.player.chessTitle?T("user-chess-title",{class:s.$style.title,attrs:{title:s.player.chessTitle}}):s._e(),s._v(" "),s.player.username?T("span",{directives:[{name:"user-popover",rawName:"v-user-popover",value:s.userPopoverProps,expression:"userPopoverProps"}],class:s.$style.username,domProps:{textContent:s._s(s.player.username)}}):T("span",{class:[s.$style.username,s.$style.opponent],domProps:{textContent:s._s(s.$trans("opponent"))}})],1),s._v(" "),T("div",{class:s.$style.row},[s.player.ranking?T("span",{class:s.$style.ranking},[s._v("("+s._s(s.player.ranking.rating)+")")]):T("span",[s._v("-")]),s._v(" "),s.player.countryId||s.player.flag?T("country-flag",{class:s.$style.flag,attrs:{code:s.player.countryId||s.player.flag,name:s.player.countryName||s.player.country}}):s._e(),s._v(" "),s.player.flairCode?T("user-flair-icon",{class:s.$style.flair,attrs:{code:s.player.flairCode}}):s._e()],1)]),s._v(" "),T("div",{class:(i={},i[s.$style["is-being-observed"]]=s.isBeingObserved,i[s.$style["is-observable"]]=s.isObservable,i),on:{click:s.observe}},[T("avatar",{class:s.$style.avatar,attrs:{alt:s.player.username,src:s.avatarUrl}})],1)])}),[],!1,(function battle_player_injectStyles(i){this.$style=nb.locals||nb}),null,null),ib=rb.exports,ab=Object.defineProperty,sb=Object.defineProperties,ob=Object.getOwnPropertyDescriptors,lb=Object.getOwnPropertySymbols,cb=Object.prototype.hasOwnProperty,ub=Object.prototype.propertyIsEnumerable,battle_player_statsvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?ab(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,db={components:{BattlePlayer:ib,StreakIcon:Zg,VerticalStreakIndicator:qv},directives:{BoardPopover:zv},props:{battleId:{type:String},isObservable:{type:Boolean,default:!1},player:{type:Object,default:()=>{}},roundResults:{type:Array,default:()=>[]},score:{type:Number,default:0},showStats:{type:Boolean,default:!0},puzzleLinksEnabled:{type:Boolean,default:!0},strikes:{type:Array,default:()=>[]}},emits:["view-puzzle"],computed:{formattedScore(){return 0===this.roundResults.length?"--":this.score},remainingStrikes(){return 3-this.strikes.length}},methods:{popoverDetails:i=>((i,s)=>sb(i,ob(s)))(((i,s)=>{for(var _ in s||(s={}))cb.call(s,_)&&battle_player_statsvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(lb)for(var _ of lb(s))ub.call(s,_)&&battle_player_statsvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i})({},i),{fen:addTcnToFen(i.initialFen,i.firstMove)})}},hb=db,pb={component:"battle-player-stats-component","fade-enter-active":"battle-player-stats-fade-enter-active","fade-leave-active":"battle-player-stats-fade-leave-active","fade-enter":"battle-player-stats-fade-enter",icon:"battle-player-stats-icon",player:"battle-player-stats-player",strikes:"battle-player-stats-strikes",strike:"battle-player-stats-strike",score:"battle-player-stats-score",link:"battle-player-stats-link",results:"battle-player-stats-results"};var mb=(0,Rr.Z)(hb,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("transition",{attrs:{mode:"out-in","enter-class":i.$style["fade-enter"],"enter-active-class":i.$style["fade-enter-active"]}},[_("battle-player",{key:i.player.username,class:i.$style.player,attrs:{"is-observable":i.isObservable,player:i.player}})],1),i._v(" "),_("transition",{attrs:{"enter-class":i.$style["fade-enter"],"enter-active-class":i.$style["fade-enter-active"]}},[_("div",{directives:[{name:"show",rawName:"v-show",value:i.showStats&&i.strikes&&i.player.username,expression:"showStats && strikes && player.username"}],class:i.$style.strikes},[i._l(i.strikes,(function(s){var T;return _("streak-icon",{directives:[{name:"board-popover",rawName:"v-board-popover",value:i.popoverDetails(s),expression:"popoverDetails(round)"}],key:i.player.username+"-"+s.index,class:[i.$style.strike,(T={},T[i.$style.link]=i.puzzleLinksEnabled,T)],attrs:{icon:"square-x"},on:{click:function(_){return _.stopPropagation(),i.$emit("view-puzzle",{round:s})}}})})),i._v(" "),i._l(i.remainingStrikes,(function(s){return _("streak-icon",{key:i.player.username+"-empty-"+s,class:i.$style.strike,attrs:{icon:"square-x-gray"}})}))],2)]),i._v(" "),_("transition",{attrs:{"enter-class":i.$style["fade-enter"],"enter-active-class":i.$style["fade-enter-active"]}},[_("span",{directives:[{name:"show",rawName:"v-show",value:i.showStats,expression:"showStats"}],class:i.$style.score,domProps:{textContent:i._s(i.formattedScore)}})]),i._v(" "),_("transition",{attrs:{"enter-class":i.$style["fade-enter"],"enter-active-class":i.$style["fade-enter-active"]}},[_("div",{directives:[{name:"show",rawName:"v-show",value:i.showStats,expression:"showStats"}],class:i.$style.results},[_("vertical-streak-indicator",{attrs:{"is-enabled":i.puzzleLinksEnabled,rounds:i.roundResults},on:{click:function(s){return s.stopPropagation(),i.$emit("view-puzzle",s)}}})],1)])],1)}),[],!1,(function battle_player_stats_injectStyles(i){this.$style=pb.locals||pb}),null,null),fb=mb.exports,gb=Object.defineProperty,vb=Object.defineProperties,bb=Object.getOwnPropertyDescriptors,yb=Object.getOwnPropertySymbols,_b=Object.prototype.hasOwnProperty,wb=Object.prototype.propertyIsEnumerable,battle_sidebar_playvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?gb(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,battle_sidebar_playvue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))_b.call(s,_)&&battle_sidebar_playvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(yb)for(var _ of yb(s))wb.call(s,_)&&battle_sidebar_playvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},battle_sidebar_playvue_type_script_lang_js_spreadProps=(i,s)=>vb(i,bb(s)),kb={components:{BattleChallengeList:qg,BattlePlayerStats:fb,SeekingAnimation:Sg,Timer:Dg},props:{isObservable:{type:Boolean,default:!1}},computed:battle_sidebar_playvue_type_script_lang_js_spreadProps(battle_sidebar_playvue_type_script_lang_js_spreadValues(battle_sidebar_playvue_type_script_lang_js_spreadValues({},(0,dr.mapGetters)("puzzlesBattle",["canAnalyze","hasOpenChallenges","isConnected","isGameOver","isObserving","opponentUuid","primaryPlayerStruckOut","primaryPlayerUuid","score"])),(0,dr.mapState)({battleId:({puzzlesBattle:i})=>i.battle.id,battleTimeConstraint:({puzzles:i})=>i.timeConstraints.battle,hasTwoBoards:({puzzlesBattle:i})=>i.hasTwoBoards,isSeeking:({puzzles:i})=>i.gameplayState===_n.SEEKING,challenges:({puzzlesBattle:i})=>i.challenges,isCountDown:({puzzles:i})=>i.gameplayState===_n.COUNT_DOWN,playDuration:({puzzlesBattle:i})=>i.playDuration,playerInfo:({puzzlesBattle:i})=>i.playerInfo,roundResults:({puzzlesBattle:i})=>i.roundResults,strikes:({puzzlesBattle:i})=>i.strikes,user:({user:i,puzzlesBattle:s})=>({avatarUrl:i.avatarLargeUrl,chessTitle:i.chessTitle,countryId:i.flag,flairCode:(0,rr.FR)("puzzle_battle_flair_code")?i.flairCode:null,ranking:{rating:s.userInfo.rating},username:i.username})})),{opponent(){return this.isSeeking?{}:this.playerInfo[this.opponentUuid]},primaryPlayer(){return this.hasTwoBoards?this.playerInfo[this.primaryPlayerUuid]||{}:this.playerInfo[this.primaryPlayerUuid]||this.user},timerSeconds(){return this.isSeeking?millisecondsToSeconds(this.battleTimeConstraint):this.playDuration}}),watch:{isGameOver(i){i&&this.$refs.timer&&this.$refs.timer.stop()}},mounted(){O.Z.on(ae,(()=>{this.$refs.timer&&this.$refs.timer.start()})),O.Z.on(se,(()=>{this.$refs.timer&&this.$refs.timer.stop()}))},methods:battle_sidebar_playvue_type_script_lang_js_spreadProps(battle_sidebar_playvue_type_script_lang_js_spreadValues(battle_sidebar_playvue_type_script_lang_js_spreadValues({},(0,dr.mapMutations)("puzzlesBattle",["setGameTimeExpired"])),(0,dr.mapActions)("puzzlesBattle",["analyzePuzzleResult","cancelChallenge","endSession"])),{timerStopped(){this.isConnected||(this.setGameTimeExpired(!0),this.endSession())},viewPuzzle({puzzle:i,uuid:s}){(0,rr.FR)("puzzle_battle_analysis")?this.canAnalyze&&this.analyzePuzzleResult({puzzle:i,uuid:s}):window.open(Gn.individualPuzzle(i.id),"_blank")}})},Tb=kb,Sb={component:"battle-sidebar-play-component",clock:"battle-sidebar-play-clock","fade-leave":"battle-sidebar-play-fade-leave",players:"battle-sidebar-play-players",player:"battle-sidebar-play-player","challenge-animation":"battle-sidebar-play-challenge-animation","seeking-animation":"battle-sidebar-play-seeking-animation","seek-text":"battle-sidebar-play-seek-text"};var Cb=(0,Rr.Z)(Tb,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("div",{class:i.$style.players},[_("battle-player-stats",{class:i.$style.player,attrs:{"battle-id":i.battleId,"is-observable":i.isObservable,player:i.primaryPlayer,"round-results":i.roundResults[i.primaryPlayerUuid],score:i.score[i.primaryPlayerUuid],strikes:i.strikes[i.primaryPlayerUuid],"show-stats":!i.isSeeking,"puzzle-links-enabled":i.canAnalyze},on:{"view-puzzle":function(s){return i.viewPuzzle({puzzle:s.round,uuid:i.primaryPlayerUuid})}}}),i._v(" "),_("timer",{key:i.playDuration,ref:"timer",class:i.$style.clock,attrs:{"icon-type":"lightning","is-vertical":"","show-finish-time":!i.isSeeking&&!i.isCountDown,"initial-time":i.timerSeconds},on:{"timer-stopped":i.timerStopped}}),i._v(" "),_("battle-player-stats",{class:i.$style.player,attrs:{"battle-id":i.battleId,"is-observable":i.isObservable,player:i.opponent||{},"round-results":i.roundResults[i.opponentUuid],score:i.score[i.opponentUuid],strikes:i.strikes[i.opponentUuid],"show-stats":!i.isSeeking,"puzzle-links-enabled":i.canAnalyze},on:{"view-puzzle":function(s){return i.viewPuzzle({puzzle:s.round,uuid:i.opponentUuid})}}})],1),i._v(" "),_("transition",{attrs:{"leave-active-class":i.$style["fade-leave"]}},[i.isSeeking?_("div",{class:i.hasOpenChallenges?i.$style["challenge-animation"]:i.$style["seeking-animation"]},[i.hasOpenChallenges?_("battle-challenge-list",{attrs:{challenges:i.challenges},on:{"cancel-challenge":i.cancelChallenge}}):[_("span",{class:i.$style["seek-text"],domProps:{textContent:i._s(i.$trans("Searching for opponent ..."))}}),i._v(" "),_("seeking-animation")]],2):i._e()])],1)}),[],!1,(function battle_sidebar_play_injectStyles(i){this.$style=Sb.locals||Sb}),null,null),xb=Cb.exports,Eb=(0,ma.defineComponent)({name:"SectionTabsV5",directives:{tooltip:Ur.Z},props:{forceLightMode:Boolean,selectedValue:{type:[String,Number]},showLabels:{type:Boolean,default:!0},tabs:{type:Array,required:!0}},emits:["select"],setup:(i,{emit:s})=>({onClick:function onClick(_){_.disabled||i.selectedValue===_.value||s("select",_.value)}})}),Pb={tabsContainer:"section-tabs-v5-tabsContainer",lightMode:"section-tabs-v5-lightMode",tab:"section-tabs-v5-tab",active:"section-tabs-v5-active",disabled:"section-tabs-v5-disabled",icon:"section-tabs-v5-icon",label:"section-tabs-v5-label",badge:"section-tabs-v5-badge"};var Ab=(0,Rr.Z)(Eb,(function(){var i,s=this,_=s.$createElement,T=s._self._c||_;return T("div",{class:[s.$style.tabsContainer,(i={},i[s.$style.lightMode]=s.forceLightMode,i)],attrs:{role:"tablist","aria-label":"Section Tabs"}},s._l(s.tabs,(function(i){var _,S;return T("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.tooltip,expression:"tab.tooltip"}],key:i.value,class:[s.$style.tab,(_={},_[s.$style.active]=s.selectedValue===i.value,_),(S={},S[s.$style.disabled]=i.disabled,S)],attrs:{id:"tab-"+i.value,type:"button","data-tab":i.value,"aria-selected":s.selectedValue===i.value?"true":"false",role:"tab"},on:{click:function(_){return s.onClick(i)}}},[T("span",{directives:[{name:"show",rawName:"v-show",value:s.showLabels,expression:"showLabels"}],class:s.$style.label,domProps:{textContent:s._s(i.label)}}),s._v(" "),i.badge||Number.isInteger(i.badge)?T("div",{class:s.$style.badge,domProps:{textContent:s._s(i.badge)}}):s._e()])})),0)}),[],!1,(function section_tabs_v5_injectStyles(i){this.$style=Pb.locals||Pb}),null,null),Ob=Ab.exports;const tabpanel=i=>({role:"tabpanel","aria-labelledby":`tab-${i}`});const Mb="points",zb="rating",Ib=[{label:(0,j.dW)("Points"),value:Mb},{label:(0,j.dW)("Rating"),value:zb}],Lb="all",Rb="month",Nb="day",Db="hour",jb=[{label:(0,j.dW)("Global"),value:At.GLOBAL},{label:(0,j.dW)("Friends"),value:At.FRIENDS}],Bb=[{label:(0,j.dW)("Season"),value:Rb},{label:(0,j.dW)("daily_leaderboard",{},"mobile"),value:Nb},{label:(0,j.dW)("Hourly"),value:Db}],getDefaultLeaderboardsState=()=>({[Mb]:{[At.GLOBAL]:{[kn.THREE_MINUTES]:{[Rb]:{currentUser:{rank:null,score:null},empty:!0,leaderboard:[]},[Nb]:{currentUser:{rank:null,score:null},empty:!0,leaderboard:[]},[Db]:{currentUser:{rank:null,score:null},empty:!0,leaderboard:[]}}},[At.FRIENDS]:{[kn.THREE_MINUTES]:{[Rb]:{currentUser:{rank:null,score:null},empty:!0,leaderboard:[]},[Nb]:{currentUser:{rank:null,score:null},empty:!0,leaderboard:[]},[Db]:{currentUser:{rank:null,score:null},empty:!0,leaderboard:[]}}}},[zb]:{[At.GLOBAL]:{[kn.THREE_MINUTES]:{[Lb]:{currentUser:{rank:null,score:null},empty:!0,leaderboard:[]}}},[At.FRIENDS]:{[kn.THREE_MINUTES]:{[Lb]:{currentUser:{rank:null,score:null},empty:!0,leaderboard:[]}}}}});var $b={props:{options:{type:Array,required:!0},value:{type:String,required:!0}},emits:["input"],computed:{selectedOption(){return this.options.find((i=>i.value===this.value))}},methods:{selectFilter(i){this.$emit("input",i.target.value)}}},Ub=$b,Fb={component:"puzzle-leaderboard-filter-component",type:"puzzle-leaderboard-filter-type",icon:"puzzle-leaderboard-filter-icon",select:"puzzle-leaderboard-filter-select"};var Hb=(0,Rr.Z)(Ub,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("div",{class:i.$style.type},[_("span",{domProps:{textContent:i._s(i.selectedOption.label)}}),i._v(" "),_("span",{staticClass:"icon-font-chess chevron-bottom",class:i.$style.icon}),i._v(" "),_("select",{class:i.$style.select,on:{blur:i.selectFilter,change:i.selectFilter}},i._l(i.options,(function(s){return _("option",{key:s.value,domProps:{selected:i.selectedOption.value===s.value,value:s.value,textContent:i._s(s.label)}})})),0)])])}),[],!1,(function puzzle_leaderboard_filter_injectStyles(i){this.$style=Fb.locals||Fb}),null,null),qb=Hb.exports;D.Z.generate("web_coaches"),D.Z.generate("web_member_search"),D.Z.generate("web_streamers"),D.Z.generate("web_member_titled_players");const members_config_routes_viewMember=i=>D.Z.generate("web_member_view",{username:i});ht.Z.trans("All Ratings"),ht.Z.trans("Blitz"),ht.Z.trans("Bullet"),ht.Z.trans("Rapid"),ht.Z.trans("daily",{},"mobile"),ht.Z.trans("Daily 960"),ht.Z.trans("Lessons");var Vb=(i=>(i[i.GOLD=1]="GOLD",i[i.SILVER=2]="SILVER",i[i.BRONZE=3]="BRONZE",i))(Vb||{}),Gb={components:{UserTagline:fc},directives:{UserPopover:eu},props:{avatarUrl:{type:String,requried:!0},chessTitle:{type:String},countryCode:{type:Number,default:_s.Fb},flairCode:{type:String,default:""},membership:{type:String},score:{type:[Number,String],required:!0},rank:{type:Number,required:!0},username:{type:String,required:!0}},data:()=>({leaderboardRanks:Object.freeze(Vb)}),computed:{avatarSrcset(){return(0,Bd.b)(this.avatarUrl)},membershipCode(){return _s.p0[this.membership]},memberUrl(){return members_config_routes_viewMember(this.username)}}},Zb={component:"leaderboard-item-component",rank:"leaderboard-item-rank",gold:"leaderboard-item-gold",silver:"leaderboard-item-silver",bronze:"leaderboard-item-bronze",avatar:"leaderboard-item-avatar",tagline:"leaderboard-item-tagline",score:"leaderboard-item-score"};var Wb=(0,Rr.Z)(Gb,(function(){var i,s=this,_=s.$createElement,T=s._self._c||_;return T("div",{class:s.$style.component},[T("div",{class:[s.$style.rank,(i={},i[s.$style.gold]=s.rank===s.leaderboardRanks.GOLD,i[s.$style.silver]=s.rank===s.leaderboardRanks.SILVER,i[s.$style.bronze]=s.rank===s.leaderboardRanks.BRONZE,i)],domProps:{textContent:s._s("#"+s.rank)}}),s._v(" "),T("img",{class:s.$style.avatar,attrs:{alt:s.username,src:s.avatarUrl,srcset:s.avatarSrcset,width:"30",height:"30"}}),s._v(" "),T("user-tagline",{directives:[{name:"user-popover",rawName:"v-user-popover",value:s.username,expression:"username"}],class:s.$style.tagline,attrs:{country:{code:s.countryCode},"flair-code":s.flairCode,membership:s.membershipCode,title:s.chessTitle,url:s.memberUrl,username:s.username,"username-theme":"blue-with-dark-mode"}}),s._v(" "),T("div",{class:s.$style.score,domProps:{textContent:s._s(s.score)}})],1)}),[],!1,(function leaderboard_item_injectStyles(i){this.$style=Zb.locals||Zb}),null,null),Kb=Wb.exports;var Yb={name:"PuzzlePersonalLeaderboardItem",props:{archiveRouteName:{type:String,required:!0},rank:{type:Number,required:!0},score:{type:Number,required:!0},shortUuid:{type:String,required:!0},timeFilter:{type:String,default:Pt.ALL},timestamp:{type:Number,required:!0},username:{type:String,required:!0},uuid:{type:String,required:!0}},data:()=>({leaderboardRanks:Object.freeze(Vb)}),computed:{dateString(){return this.timeFilter===Pt.HOURLY?Ar.p6.relative(this.timestamp):Ar.p6.long(this.timestamp)}}},Xb={component:"puzzle-personal-leaderboard-item-component",rank:"puzzle-personal-leaderboard-item-rank",gold:"puzzle-personal-leaderboard-item-gold",silver:"puzzle-personal-leaderboard-item-silver",bronze:"puzzle-personal-leaderboard-item-bronze",date:"puzzle-personal-leaderboard-item-date",score:"puzzle-personal-leaderboard-item-score"};var Qb=(0,Rr.Z)(Yb,(function(){var i,s=this,_=s.$createElement,T=s._self._c||_;return T("div",{class:s.$style.component},[T("div",{class:[s.$style.rank,(i={},i[s.$style.gold]=s.rank===s.leaderboardRanks.GOLD,i[s.$style.silver]=s.rank===s.leaderboardRanks.SILVER,i[s.$style.bronze]=s.rank===s.leaderboardRanks.BRONZE,i)],domProps:{textContent:s._s("#"+s.rank)}}),s._v(" "),T("div",{class:s.$style.date},[T("router-link",{attrs:{to:{name:s.archiveRouteName,params:{shortUuid:s.shortUuid,username:s.username,uuid:s.uuid}}},domProps:{textContent:s._s(s.dateString)}})],1),s._v(" "),T("div",{class:s.$style.score,domProps:{textContent:s._s(s.score)}})])}),[],!1,(function puzzle_personal_leaderboard_item_injectStyles(i){this.$style=Xb.locals||Xb}),null,null),Jb={name:"PuzzleLeaderboard",components:{LeaderboardItem:Kb,PuzzlePersonalLeaderboardItem:Qb.exports},mixins:[rg],props:{archiveRouteName:{type:String,required:!0},currentLeaderboard:{type:Object,required:!0},currentLeaderboardType:{type:String,required:!0},historyRoute:{type:String},archiveRoute:{type:String},timeFilter:{type:String,default:Pt.ALL},user:{type:Object,required:!0}},data:()=>({leaderboardTypes:At}),computed:{showUserRanking(){return(({currentLeaderboard:i,currentLeaderboardType:s})=>{if(!i.currentUser)return!1;if(s===At.FRIENDS){const{rank:s}=i.currentUser;if(s&&s<=50)return!1}return Boolean(i.currentUser.rank)})({currentLeaderboard:this.currentLeaderboard,currentLeaderboardType:this.currentLeaderboardType})}}},ey={component:"puzzle-leaderboard-component",user:"puzzle-leaderboard-user",item:"puzzle-leaderboard-item",link:"puzzle-leaderboard-link",leaderboard:"puzzle-leaderboard-leaderboard"};var ty=(0,Rr.Z)(Jb,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[i.user.membership&&i.showUserRanking?_("leaderboard-item",{class:i.$style.user,attrs:{"avatar-url":i.user.avatarUrl,"chess-title":i.user.chessTitle,"country-code":i.user.countryCode,"flair-code":i.user.flairCode,membership:i.user.membership,score:i.formatNumber(i.currentLeaderboard.currentUser.score),rank:i.currentLeaderboard.currentUser.rank,username:i.user.username}}):i._e(),i._v(" "),_("div",{class:i.$style.leaderboard},[i.currentLeaderboardType!==i.leaderboardTypes.PERSONAL?i._l(i.currentLeaderboard.leaderboard,(function(s){return _("leaderboard-item",{key:s.user.username,class:i.$style.item,attrs:{"avatar-url":s.user.avatar_url,"chess-title":s.user.chess_title,"country-code":s.user.country_id,"flair-code":s.user.flair_code,membership:s.user.membership_code,score:i.formatNumber(s.score),rank:s.rank,username:s.user.username}})})):[i._l(i.currentLeaderboard.leaderboard,(function(s,T){return _("puzzle-personal-leaderboard-item",{key:T,class:i.$style.item,attrs:{"archive-route-name":i.archiveRouteName,rank:T+1,score:i.formatNumber(s.score),"short-uuid":s.short_uuid,"time-filter":i.timeFilter,timestamp:1e3*s.create_timestamp,uuid:s.id,username:i.user.username}})})),i._v(" "),_("div",{class:i.$style.item},[i.historyRoute?_("a",{class:i.$style.link,attrs:{href:i.historyRoute},domProps:{textContent:i._s(i.$trans("Full History"))}}):i._e()])]],2)],1)}),[],!1,(function puzzle_leaderboard_injectStyles(i){this.$style=ey.locals||ey}),null,null),ny=ty.exports,ry=Object.defineProperty,iy=Object.defineProperties,ay=Object.getOwnPropertyDescriptors,sy=Object.getOwnPropertySymbols,oy=Object.prototype.hasOwnProperty,ly=Object.prototype.propertyIsEnumerable,battle_leaderboardvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?ry(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,battle_leaderboardvue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))oy.call(s,_)&&battle_leaderboardvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(sy)for(var _ of sy(s))ly.call(s,_)&&battle_leaderboardvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},cy={components:{PuzzleLeaderboard:ny,PuzzleLeaderboardFilter:qb},data:()=>({archiveRouteName:Hn.BATTLE_ARCHIVE,scoreTypeFilterOptions:Object.freeze(Ib),timeRangeFilterOptions:Object.freeze(Bb),userRangeFilterOptions:Object.freeze(jb)}),computed:((i,s)=>iy(i,ay(s)))(battle_leaderboardvue_type_script_lang_js_spreadValues(battle_leaderboardvue_type_script_lang_js_spreadValues({},(0,dr.mapGetters)({currentLeaderboard:"puzzlesBattle/currentLeaderboard",hyphenatedLanguage:"user/hyphenatedLanguage"})),(0,dr.mapState)({user:({user:i})=>({avatarUrl:i.avatarLargeUrl,chessTitle:i.chessTitle,countryCode:i.flag,flairCode:i.flairCode,isLoggedIn:i.isLoggedIn,language:i.language,membership:i.membership,username:i.username})})),{isPointsScoreFilter(){return Mb===this.scoreTypeFilter},scoreTypeFilter:{get(){return this.$store.state.puzzlesBattle.scoreTypeFilter},set(i){this.setScoreTypeFilter(i)}},timeRangeFilter:{get(){const{timeRangeFilter:i,scoreTypeFilter:s}=this.$store.state.puzzlesBattle;return i[s]},set(i){this.setTimeRangeFilter(i)}},userRangeFilter:{get(){return this.$store.state.puzzlesBattle.userRangeFilter},set(i){this.setUserRangeFilter(i)}},formatLanguage(){return this.isPointsScoreFilter&&this.hyphenatedLanguage?this.hyphenatedLanguage:""}}),methods:battle_leaderboardvue_type_script_lang_js_spreadValues(battle_leaderboardvue_type_script_lang_js_spreadValues({},(0,dr.mapActions)("puzzlesBattle",["getLeaderboard"])),(0,dr.mapMutations)("puzzlesBattle",["setScoreTypeFilter","setTimeRangeFilter","setUserRangeFilter"]))},uy=cy,dy={component:"battle-leaderboard-component",filters:"battle-leaderboard-filters"};var hy=(0,Rr.Z)(uy,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("div",{class:i.$style.filters},[_("puzzle-leaderboard-filter",{attrs:{options:i.scoreTypeFilterOptions},on:{input:i.getLeaderboard},model:{value:i.scoreTypeFilter,callback:function(s){i.scoreTypeFilter=s},expression:"scoreTypeFilter"}}),i._v(" "),_("puzzle-leaderboard-filter",{attrs:{options:i.userRangeFilterOptions},on:{input:i.getLeaderboard},model:{value:i.userRangeFilter,callback:function(s){i.userRangeFilter=s},expression:"userRangeFilter"}}),i._v(" "),i.isPointsScoreFilter?_("puzzle-leaderboard-filter",{attrs:{options:i.timeRangeFilterOptions},on:{input:i.getLeaderboard},model:{value:i.timeRangeFilter,callback:function(s){i.timeRangeFilter=s},expression:"timeRangeFilter"}}):i._e()],1),i._v(" "),i.currentLeaderboard?_("puzzle-leaderboard",{attrs:{"archive-route-name":i.archiveRouteName,"current-leaderboard":i.currentLeaderboard,"current-leaderboard-type":i.userRangeFilter,"format-language":i.formatLanguage,"time-filter":i.timeRangeFilter,user:i.user}}):i._e()],1)}),[],!1,(function battle_leaderboard_injectStyles(i){this.$style=dy.locals||dy}),null,null),py=hy.exports;const my={width:0};let fy;const gy=pi((i=>{if(fy||(fy=document.querySelector(i)),!fy)return;const{width:s}=fy.getBoundingClientRect();my.width=s}),200),getSidebarDimensions=(i="#board-layout-sidebar")=>(my.width||(gy(i),window.addEventListener("resize",gy.bind(null,i))),my);var vy=new class Polling{constructor(){this.polls=[]}start(i){this._get(i.id)||(i.defaultDuration=i.duration,this.polls.push(i),this._exec(i))}restart(i,s={force:!1}){const _=this._get(i);_&&(_.duration=_.defaultDuration,(_.timeoutId||!0===s.force)&&(window.clearTimeout(_.timeoutId),this._exec(_)))}stop(i){const s=this._get(i);s&&(s.timeoutId&&window.clearTimeout(s.timeoutId),this.polls.splice(this.polls.findIndex((s=>s.id===i)),1))}schedule(i){const s=this._get(i);s&&(s.timeoutId=window.setTimeout((async()=>{s.timeoutId=null,s.backoff&&s.duration+s.backoff<s.backoffMax&&(s.duration+=s.backoff),await s.callback(),this.schedule(i)}),s.duration))}async _exec(i){!0===i.autoStart&&await i.callback(),this.schedule(i.id)}_get(i){return this.polls.find((s=>s.id===i))}};const by="observable-game-list",yy={[by]:{autoStart:!0,id:by,duration:1e4,callback:()=>st.default.dispatch("puzzlesBattle/getObservableGames")}},_y={schedule(i){vy.schedule(yy[i].id)},start(i){vy.start(yy[i])},stop(i){vy.stop(yy[i].id)}};var wy=Object.defineProperty,ky=Object.getOwnPropertySymbols,Ty=Object.prototype.hasOwnProperty,Sy=Object.prototype.propertyIsEnumerable,battle_observable_game_list_itemvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?wy(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,Cy={components:{Avatar:Zv,UserTagline:fc},props:{game:{type:Object,required:!0},showAvatar:{type:Boolean,default:!0}},methods:((i,s)=>{for(var _ in s||(s={}))Ty.call(s,_)&&battle_observable_game_list_itemvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(ky)for(var _ of ky(s))Sy.call(s,_)&&battle_observable_game_list_itemvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i})({},(0,dr.mapActions)("puzzlesBattle",["observeBattle"]))},xy=Cy,Ey={component:"battle-observable-game-list-item-component",avatar:"battle-observable-game-list-item-avatar",left:"battle-observable-game-list-item-left",flag:"battle-observable-game-list-item-flag",player:"battle-observable-game-list-item-player",username:"battle-observable-game-list-item-username","season-info":"battle-observable-game-list-item-season-info",rank:"battle-observable-game-list-item-rank",rating:"battle-observable-game-list-item-rating","season-points":"battle-observable-game-list-item-season-points","player-info":"battle-observable-game-list-item-player-info","no-avatar":"battle-observable-game-list-item-no-avatar"};var Py=(0,Rr.Z)(xy,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("a",{class:i.$style.component,on:{click:function(s){return i.observeBattle(i.game.id)}}},i._l(i.game.players,(function(s,T){var S,C;return _("div",{key:s.username,class:[[i.$style.player],(S={},S[i.$style.left]=0===T,S)]},[_("avatar",{directives:[{name:"show",rawName:"v-show",value:i.showAvatar,expression:"showAvatar"}],class:i.$style.avatar,attrs:{alt:s.username,src:s.avatarUrl}}),i._v(" "),_("div",{class:[i.$style["player-info"],(C={},C[i.$style["no-avatar"]]=!i.showAvatar,C)]},[_("user-tagline",{class:i.$style.username,attrs:{country:{code:s.countryId},membership:s.membership,title:s.chessTitle,username:s.username,"username-theme":"blue-with-dark-mode"}}),i._v(" "),_("div",{class:i.$style["season-info"]},[s.seasonRank?_("strong",{class:i.$style.rank,domProps:{textContent:i._s("#"+s.seasonRank)}}):i._e(),i._v(" "),_("span",{class:i.$style["season-points"],domProps:{textContent:i._s(s.points)}}),i._v(" "),_("span",{class:i.$style.rating,domProps:{textContent:i._s("("+s.rating+")")}})])],1)],1)})),0)}),[],!1,(function battle_observable_game_list_item_injectStyles(i){this.$style=Ey.locals||Ey}),null,null),Ay=Py.exports,Oy=Object.defineProperty,My=Object.defineProperties,zy=Object.getOwnPropertyDescriptors,Iy=Object.getOwnPropertySymbols,Ly=Object.prototype.hasOwnProperty,Ry=Object.prototype.propertyIsEnumerable,battle_observable_game_listvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?Oy(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,Ny={components:{BattleObservableGameListItem:Ay,V5Input:Tr.V5Input},props:{games:{type:Array,required:!0}},data:()=>({sidebar:getSidebarDimensions()}),computed:{observableGames(){return this.usernameFilter?(({games:i,username:s})=>i.filter((i=>i.players.find((i=>i.username.includes(s))))))({games:this.games,username:this.usernameFilter}):this.games},showAvatar(){return this.sidebar.width>400},usernameFilter:{get(){return this.$store.state.puzzlesBattle.usernameFilter},set(i){this.setUsernameFilter(i)}}},created(){_y.start(by)},beforeDestroy(){_y.stop(by)},methods:((i,s)=>My(i,zy(s)))(((i,s)=>{for(var _ in s||(s={}))Ly.call(s,_)&&battle_observable_game_listvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(Iy)for(var _ of Iy(s))Ry.call(s,_)&&battle_observable_game_listvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i})({},(0,dr.mapMutations)("puzzlesBattle",["setUsernameFilter"])),{clearSearch(){this.setUsernameFilter("")}})},Dy=Ny,jy={component:"battle-observable-game-list-component",list:"battle-observable-game-list-list","search-form":"battle-observable-game-list-search-form","clear-search":"battle-observable-game-list-clear-search",icon:"battle-observable-game-list-icon","search-input":"battle-observable-game-list-search-input","with-button":"battle-observable-game-list-with-button"};var By=(0,Rr.Z)(Dy,(function(){var i,s=this,_=s.$createElement,T=s._self._c||_;return T("div",{class:s.$style.component},[T("form",{class:s.$style["search-form"]},[T("v5-input",{class:[s.$style["search-input"],(i={},i[s.$style["with-button"]]=s.usernameFilter,i)],attrs:{"icon-left":"magnifying-glass","aria-label":s.$trans("Username"),placeholder:s.$trans("Username")+"..."},model:{value:s.usernameFilter,callback:function(i){s.usernameFilter=i},expression:"usernameFilter"}}),s._v(" "),s.usernameFilter?T("button",{class:s.$style["clear-search"],attrs:{"aria-label":s.$trans("Clear")},on:{click:s.clearSearch}},[T("span",{staticClass:"icon-font-chess x",class:s.$style.icon})]):s._e()],1),s._v(" "),T("div",{class:s.$style.list},s._l(s.observableGames,(function(i){return T("battle-observable-game-list-item",{key:i.id,attrs:{game:i,"show-avatar":s.showAvatar}})})),1)])}),[],!1,(function battle_observable_game_list_injectStyles(i){this.$style=jy.locals||jy}),null,null),$y=By.exports,Uy=__webpack_require__(69947),Fy={name:"FormInput",components:{IconFont:Mr.Z},directives:{tooltip:Ur.Z},mixins:[Uy.Z],props:{ariaLabel:String,autocomplete:String,autofocus:Boolean,disabled:{type:Boolean,default:!1,required:!1},iconLeft:{type:String,required:!1},iconLeftTooltip:{type:String,default:""},iconRight:{type:String,required:!1},iconRightTooltip:{type:String,default:""},id:String,maxlength:Number,name:String,placeholder:{type:String,required:!1},readonly:{type:Boolean,default:!1,required:!1},size:{type:String,required:!1},type:{type:String,default:"text"},value:{type:[String,Number],required:!1}},emits:["input","enter","keyup","focus","blur"],computed:{inputClasses(){const{$style:i,iconLeft:s,iconRight:_,lightMode:T,size:S}=this;return[i.input,i[S],{[i.left]:s,[i.right]:_,"light-mode":T}]}},methods:{blurEvent(i){this.$emit("blur",i)},focusEvent(i){this.$emit("focus",i)},keyupEvent(i){this.$emit("keyup",i)},keyupEnterEvent(i){this.$emit("enter",i)},onIconClick(i){this.$emit(`icon-click-${i}`)},updateValue(i){this.$emit("input",i)}}},Hy={component:"form-input-component",wrapper:"form-input-wrapper",icon:"form-input-icon",left:"form-input-left",right:"form-input-right",input:"form-input-input",large:"form-input-large","x-large":"form-input-x-large"};var qy=(0,Rr.Z)(Fy,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:[i.$style.component,i.themeClasses]},[i.iconLeft?_("icon-font",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.iconLeftTooltip,expression:"iconLeftTooltip"}],class:[i.$style.icon,i.$style.left],attrs:{name:i.iconLeft,theme:"primary"},on:{click:function(s){return i.onIconClick("left")}}}):i._e(),i._v(" "),_("input",{class:i.inputClasses,attrs:{id:i.id,"aria-label":i.ariaLabel,autocomplete:i.autocomplete,autofocus:i.autofocus,disabled:i.disabled,maxlength:i.maxlength,name:i.name,placeholder:i.placeholder,readonly:i.readonly,type:i.type},domProps:{value:i.value},on:{blur:function(s){return i.blurEvent(s)},focus:function(s){return i.focusEvent(s)},input:function(s){return i.updateValue(s.target.value)},keyup:[function(s){return i.keyupEvent(s)},function(s){return!s.type.indexOf("key")&&i._k(s.keyCode,"enter",13,s.key,"Enter")?null:i.keyupEnterEvent(s)}]}}),i._v(" "),i.iconRight?_("icon-font",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.iconRightTooltip,expression:"iconRightTooltip"}],class:[i.$style.icon,i.$style.right],attrs:{name:i.iconRight},on:{click:function(s){return i.onIconClick("right")}}}):i._e()],1)}),[],!1,(function form_input_injectStyles(i){this.$style=Hy.locals||Hy}),null,null),Vy=qy.exports,Gy={name:"LoaderCircle"},Zy={component:"loader-circle-component",dot:"loader-circle-dot",animate:"loader-circle-animate",circle2:"loader-circle-circle2",circle3:"loader-circle-circle3",circle4:"loader-circle-circle4",circle5:"loader-circle-circle5",circle6:"loader-circle-circle6",circle7:"loader-circle-circle7",circle8:"loader-circle-circle8",circle9:"loader-circle-circle9",circle10:"loader-circle-circle10",circle11:"loader-circle-circle11",circle12:"loader-circle-circle12"};var Wy=(0,Rr.Z)(Gy,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("div",{class:[i.$style.dot,i.$style.circle1]}),i._v(" "),_("div",{class:[i.$style.dot,i.$style.circle2]}),i._v(" "),_("div",{class:[i.$style.dot,i.$style.circle3]}),i._v(" "),_("div",{class:[i.$style.dot,i.$style.circle4]}),i._v(" "),_("div",{class:[i.$style.dot,i.$style.circle5]}),i._v(" "),_("div",{class:[i.$style.dot,i.$style.circle6]}),i._v(" "),_("div",{class:[i.$style.dot,i.$style.circle7]}),i._v(" "),_("div",{class:[i.$style.dot,i.$style.circle8]}),i._v(" "),_("div",{class:[i.$style.dot,i.$style.circle9]}),i._v(" "),_("div",{class:[i.$style.dot,i.$style.circle10]}),i._v(" "),_("div",{class:[i.$style.dot,i.$style.circle11]}),i._v(" "),_("div",{class:[i.$style.dot,i.$style.circle12]})])}),[],!1,(function loader_circle_injectStyles(i){this.$style=Zy.locals||Zy}),null,null),Ky=Wy.exports,Yy=di,Xy={name:"FormAutocomplete",components:{FormInput:Vy,LoaderCircle:Ky},props:{additionalOptions:{type:Array,required:!1},ariaLabel:{type:String,required:!1},autofocus:{type:Boolean,default:!1},disabled:{type:Boolean},dropdownOptions:{type:Array,required:!0},dontClearInput:{type:Boolean,default:!1},debounceWait:{type:Number,default:250},exceptionMessage:{type:String,required:!1},inputAutocomplete:{type:String},inputId:{type:String},inputName:{type:String},initialInputValue:{type:String},inputPlaceholder:{type:String},isDarkMode:{type:Boolean,required:!1,default:!1},lightMode:{type:Boolean},isSearching:{type:Boolean,required:!0,default:!1},labelKey:{type:String},leftIcon:{type:String,default:"magnifying-glass"},popover:{type:Boolean,default:!0},popoverClass:{type:String},rightIcon:{type:String,default:"x"},size:{type:String},showInitialOptions:{type:Boolean,default:!1}},emits:["clear-input","selected","blur","keyup","enter"],data(){return{debounceFunc:Yy(this.handleInput,this.debounceWait,{maxWait:1e3}),searchCriteria:"",selectedOption:{},isFocused:!1}},computed:{clearIcon(){return this.disabled||""===(this.searchCriteria&&this.rightIcon)?"":this.rightIcon},hasInitialValue(){return void 0!==this.initialInputValue&&null!==this.initialInputValue},isOpen(){var i;return!!(this.showInitialOptions&&this.dropdownOptions.length&&this.isFocused&&this.searchCriteria===(null!=(i=this.initialInputValue)?i:""))||(this.dontClearInput?this.searchCriteria!==this.initialInputValue&&this.selectedOption[this.labelKey]!==this.searchCriteria&&(!this.showInitialOptions||this.isFocused)&&this.dropdownOptions.length>0||this.exceptionMessage||this.isSearching:this.hasInitialValue?this.searchCriteria!==this.initialInputValue&&this.selectedOption[this.labelKey]!==this.searchCriteria:""!==this.searchCriteria&&this.selectedOption[this.labelKey]!==this.searchCriteria)}},mounted(){this.handleBlur(),this.autofocus&&this.focus()},created(){O.Z.on(_s.U3.AUTOCOMPLETE_CLEAR_SELECTED,(()=>{this.clearInput()}))},methods:{focus(){const i=this.$el.querySelector("input");i&&i.focus()},handleEnter(i){this.debounceFunc.flush(),this.$nextTick((()=>{this.$emit("enter",i)}))},handleInput(){this.$emit("keyup",this.searchCriteria)},handleBlur(){if(this.isFocused=!1,this.hasInitialValue&&Object.keys(this.selectedOption).length)this.searchCriteria=this.selectedOption[this.labelKey]!==this.initialInputValue?this.selectedOption[this.labelKey]:this.initialInputValue;else if(Object.keys(this.selectedOption).length)this.searchCriteria=this.selectedOption[this.labelKey];else if(this.initialInputValue)this.searchCriteria=this.initialInputValue;else{if(this.dontClearInput)return!1;this.searchCriteria=""}this.$emit("blur")},handleFocus(){this.isFocused=!0},setSelectedOption(i){this.debounceFunc.cancel(),this.selectedOption=i,this.searchCriteria=i[this.labelKey]||"",this.$nextTick((()=>{this.$emit("selected",i)}))},clearInput(){this.searchCriteria="",this.handleInput(),this.setSelectedOption({}),this.$emit("clear-input")},setToInitialValue(){this.searchCriteria=this.initialInputValue}}},Qy=Xy,Jy={component:"form-autocomplete-component",input:"form-autocomplete-input",loader:"form-autocomplete-loader",dropdown:"form-autocomplete-dropdown",popover:"form-autocomplete-popover","popover-x-large":"form-autocomplete-popover-x-large","not-empty":"form-autocomplete-not-empty",item:"form-autocomplete-item","exception-message":"form-autocomplete-exception-message",icon:"form-autocomplete-icon"};var e_=(0,Rr.Z)(Qy,(function(){var i,s=this,_=s.$createElement,T=s._self._c||_;return T("div",{class:s.$style.component},[T("form-input",{class:s.$style.input,attrs:{id:s.inputId,autocomplete:s.inputAutocomplete,"aria-label":s.ariaLabel,disabled:s.disabled,"icon-left":"none"==s.leftIcon?"":s.leftIcon,"icon-right":s.clearIcon,"light-mode":s.lightMode,name:s.inputName,"is-dark-mode":s.isDarkMode,placeholder:s.inputPlaceholder,size:s.size},on:{enter:s.handleEnter,focus:s.handleFocus,blur:s.handleBlur,input:function(i){return s.debounceFunc()},"icon-click-right":s.clearInput},model:{value:s.searchCriteria,callback:function(i){s.searchCriteria=i},expression:"searchCriteria"}}),s._v(" "),T("ul",{directives:[{name:"show",rawName:"v-show",value:s.isOpen,expression:"isOpen"}],class:[s.$style.dropdown,(i={},i[s.$style.popover]=s.popover,i[s.$style["popover-x-large"]]="x-large"===s.size,i[s.popoverClass]=s.popoverClass,i[s.$style["not-empty"]]=s.dropdownOptions.length>0,i)]},[s.isSearching?T("loader-circle",{class:s.$style.loader}):s._l(s.dropdownOptions,(function(i,_){return T("li",{key:_},[T("div",{class:s.$style.item,on:{mousedown:function(_){return s.setSelectedOption(i)}}},[s._t("default",(function(){return[s._v("\n          "+s._s(i[s.labelKey])+"\n        ")]}),{option:i})],2)])})),s._v(" "),s._l(s.additionalOptions,(function(i,_){return T("li",{key:"additionalOption_"+_},[T("div",{class:s.$style.item},[s._t("additionalOption",null,{additionalOption:i,searchCriteria:s.searchCriteria,action:s.setSelectedOption})],2)])})),s._v(" "),s.exceptionMessage?T("li",[T("div",{class:s.$style.item},[T("div",{class:s.$style["exception-message"]},[s._v("\n          "+s._s(s.exceptionMessage)+"\n        ")])])]):s._e()],2)],1)}),[],!1,(function form_autocomplete_injectStyles(i){this.$style=Jy.locals||Jy}),null,null),t_=e_.exports,n_=__webpack_require__(68033),r_={name:"UsernameSearchAutocomplete",components:{FormAutocomplete:t_,UserFlairIcon:uc},props:{additionalOptions:{type:Array,required:!1},ariaLabel:{type:String,required:!1},autofocus:{default:!1,type:Boolean},customFilter:{type:Function},disableIcons:{type:Boolean,default:!1},enableNewUserInvitation:{type:Boolean,default:!1},inputAutocomplete:{type:String},inputId:{type:String},inputName:{type:String},initialInputValue:{type:String},lightMode:{type:Boolean},popover:{type:Boolean,default:!0},popoverClass:{type:String},placeholder:{type:String},size:{type:String},userService:{type:Function,default:Do.Z.searchUsername},additionalQueryParams:{type:Object,default:()=>({})},allowEmail:{type:Boolean,default:!1}},emits:["selected-user","search-query"],data:()=>({userSearchResults:[],searchExceptionMessage:"",inviteNewMember:[{}],isSearching:!1,showInviteNewMember:!1}),computed:{searchPlaceholder(){return this.placeholder||this.$trans("Search Members")}},methods:{clearInput(){this.$refs.input.clearInput()},doUsernameSearch(i){this.handleClearResults(),this.searchExceptionMessage="",i.length>=3&&(this.allowEmail||!i.includes("@"))?(this.$emit("search-query",i),this.userService(i,this.additionalQueryParams).then((s=>{var _,T;(null==(_=s.data)?void 0:_.length)>0?this.handleSearchResults(s.data):0===(null==(T=s.data)?void 0:T.length)&&(this.enableNewUserInvitation&&i.includes("@")?this.showInviteNewMember=!0:this.searchExceptionMessage=Sr.Iz.noResult),this.isSearching=!1})).catch((i=>{(0,n_.Z)(i),this.handleClearResults(),this.isSearching=!1}))):this.enableNewUserInvitation&&i.includes("@")?this.showInviteNewMember=!0:this.searchExceptionMessage=Sr.Iz.pleaseEnter(3)},handleSelectedUser(i){this.handleClearResults(),this.$emit("selected-user",i)},handleSearchResults(i){this.userSearchResults=this.customFilter?i.filter((i=>this.customFilter({user:i}))):i},handleClearResults(){this.userSearchResults=[],this.showInviteNewMember=!1},setToInitialValue(){this.$refs.input.setToInitialValue()}}},i_=r_,a_={field:"username-search-autocomplete-field","invite-option":"username-search-autocomplete-invite-option",avatar:"username-search-autocomplete-avatar",username:"username-search-autocomplete-username"};var s_=(0,Rr.Z)(i_,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("form-autocomplete",{ref:"input",attrs:{"label-key":"username","additional-options":i.additionalOptions,"aria-label":i.ariaLabel,autofocus:i.autofocus,"dropdown-options":i.userSearchResults,"exception-message":i.searchExceptionMessage,"input-autocomplete":i.inputAutocomplete,"input-id":i.inputId,"input-name":i.inputName,"initial-input-value":i.initialInputValue,"input-placeholder":i.searchPlaceholder,"left-icon":i.disableIcons?"none":"magnifying-glass","is-searching":i.isSearching,"light-mode":i.lightMode,popover:i.popover,"popover-class":i.popoverClass,size:i.size},on:{"clear-input":i.handleClearResults,blur:i.handleClearResults,keyup:i.doUsernameSearch,selected:i.handleSelectedUser},scopedSlots:i._u([{key:"default",fn:function(s){return[_("div",{class:i.$style.field},[_("img",{class:i.$style.avatar,attrs:{alt:s.option.username,src:s.option.avatar_url}}),i._v(" "),_("span",{class:i.$style.username,domProps:{textContent:i._s(s.option.username)}}),i._v(" "),s.option.flair_code?_("user-flair-icon",{attrs:{code:s.option.flair_code,membership:s.option.membership_level}}):i._e()],1)]}},{key:"additionalOption",fn:function(s){return[i.showInviteNewMember?_("div",{class:[i.$style.field,i.$style["invite-option"]],on:{mousedown:function(i){return s.action({username:s.searchCriteria})}}},[i._v("\n      "+i._s(i.$trans("Invite"))+": "+i._s(s.searchCriteria)+"\n    ")]):i._e()]}}])})}),[],!1,(function username_search_autocomplete_injectStyles(i){this.$style=a_.locals||a_}),null,null),o_=s_.exports,l_={components:{UserAvatar:us},directives:{ClickOutside:ur.Z},props:{friends:{type:Array},onlineFriendsCount:Number},emits:["select-all","select"],data:()=>({listVisible:!1}),methods:{showList(){this.listVisible=!0},hideList(){this.listVisible=!1},select(i){this.$emit("select",i),this.hideList()},selectAll(){this.$emit("select-all"),this.hideList()}}},c_={component:"battle-friends-select-component",popover:"battle-friends-select-popover",btn:"battle-friends-select-btn",avatar:"battle-friends-select-avatar",list:"battle-friends-select-list","select-link":"battle-friends-select-select-link","select-all-link":"battle-friends-select-select-all-link",username:"battle-friends-select-username",rating:"battle-friends-select-rating",icon:"battle-friends-select-icon"};var u_=(0,Rr.Z)(l_,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("button",{class:i.$style.btn,attrs:{type:"button"},on:{click:i.showList}},[i._v("\n    "+i._s(i.$transChoice("{0} 0 Friends Online|{1} 1 Friend Online|]1,Inf] %num% Friends Online",i.onlineFriendsCount,{"%num%":i.onlineFriendsCount}))+"\n    "),_("span",{staticClass:"icon-font-chess chevron-bottom"})]),i._v(" "),i.listVisible?_("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:i.hideList,expression:"hideList"}],class:i.$style.popover},[_("ul",{class:i.$style.list},i._l(i.friends,(function(s){return _("li",{key:s.uuid},[i._t("default"),i._v(" "),_("button",{class:i.$style["select-link"],attrs:{type:"button"},on:{click:function(_){return i.select(s)}}},[_("user-avatar",{class:i.$style.avatar,attrs:{image:s.avatar_url,"is-online":Boolean(s.is_online)}}),i._v(" "),_("span",{class:i.$style.username,domProps:{textContent:i._s(s.username+" ("+s.rating+")")}})],1)],2)})),0),i._v(" "),_("button",{class:i.$style["select-all-link"],attrs:{type:"button"},domProps:{textContent:i._s(i.$trans("Invite All"))},on:{click:i.selectAll}})]):i._e()])}),[],!1,(function battle_friends_select_injectStyles(i){this.$style=c_.locals||c_}),null,null),d_=u_.exports,h_=Object.defineProperty,p_=Object.defineProperties,m_=Object.getOwnPropertyDescriptors,f_=Object.getOwnPropertySymbols,g_=Object.prototype.hasOwnProperty,v_=Object.prototype.propertyIsEnumerable,battle_play_menuvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?h_(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,battle_play_menuvue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))g_.call(s,_)&&battle_play_menuvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(f_)for(var _ of f_(s))v_.call(s,_)&&battle_play_menuvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},battle_play_menuvue_type_script_lang_js_spreadProps=(i,s)=>p_(i,m_(s)),b_={name:"BattleChallengeForm",components:{BattleFriendsSelect:d_,UserSearch:o_},emits:["user-picked"],computed:battle_play_menuvue_type_script_lang_js_spreadProps(battle_play_menuvue_type_script_lang_js_spreadValues({},(0,dr.mapState)({friends:({user:i})=>i.friends,isLoggedIn:({user:i})=>i.isLoggedIn})),{formattedFriends(){return this.friends.slice(0,10).map((i=>battle_play_menuvue_type_script_lang_js_spreadProps(battle_play_menuvue_type_script_lang_js_spreadValues({},i),{rating:i.best_rating,uuid:i.user_uuid})))},onlineFriendsCount(){return this.friends.filter((i=>i.is_online)).length}}),created(){this.isLoggedIn&&this.getFriends()},methods:battle_play_menuvue_type_script_lang_js_spreadProps(battle_play_menuvue_type_script_lang_js_spreadValues(battle_play_menuvue_type_script_lang_js_spreadValues({},(0,dr.mapActions)({createChallenge:"puzzlesBattle/createChallenge",createChallenges:"puzzlesBattle/createChallenges",getFriends:"user/getFriends"})),(0,dr.mapActions)("puzzlesBattle",["findNewBattle"])),{chooseUser(i){i.username&&(this.$emit("user-picked",i),this.$refs.input.clearInput())}})},y_=b_,w_={component:"battle-play-menu-component",field:"battle-play-menu-field"};var k_=(0,Rr.Z)(y_,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("user-search",{ref:"input",class:i.$style.field,attrs:{placeholder:" ","disable-icons":!0,size:"x-large"},on:{"selected-user":i.chooseUser}}),i._v(" "),_("battle-friends-select",{attrs:{friends:i.formattedFriends,"online-friends-count":i.onlineFriendsCount},on:{select:i.chooseUser,"select-all":function(s){return i.createChallenges(i.formattedFriends)}}})],1)}),[],!1,(function battle_play_menu_injectStyles(i){this.$style=w_.locals||w_}),null,null),T_=k_.exports,S_={name:"SidebarHeader",components:{BackLink:Lm},props:{isBackLinkVisible:{type:Boolean,default:!0},title:{type:String,required:!0}}},C_={component:"sidebar-header-component",backLink:"sidebar-header-backLink"};var x_=(0,Rr.Z)(S_,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[i.isBackLinkVisible?_("back-link",{class:i.$style.backLink}):i._e(),i._v(" "),_("h1",{domProps:{textContent:i._s(i.title)}}),i._v(" "),i._t("default")],2)}),[],!1,(function sidebar_header_injectStyles(i){this.$style=C_.locals||C_}),null,null),E_=x_.exports,P_=Object.defineProperty,A_=Object.defineProperties,O_=Object.getOwnPropertyDescriptors,M_=Object.getOwnPropertySymbols,z_=Object.prototype.hasOwnProperty,I_=Object.prototype.propertyIsEnumerable,battle_sidebar_startvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?P_(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,battle_sidebar_startvue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))z_.call(s,_)&&battle_sidebar_startvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(M_)for(var _ of M_(s))I_.call(s,_)&&battle_sidebar_startvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},battle_sidebar_startvue_type_script_lang_js_spreadProps=(i,s)=>A_(i,O_(s)),L_={name:"BattleSidebar",components:{BattleLeaderboard:py,BattleObservableGameList:$y,BattlePlay:T_,SectionTabs:Ob,SidebarHeader:E_,V5Button:Tr.V5Button},data:()=>({gameplayStates:Object.freeze(_n),routes:getRoutes(),selectedTab:On.PLAY,sidebarSectionTabs:Object.freeze(On),sidebarSectionTabsOptions:Object.freeze(zn),user:{},tabpanel:tabpanel}),computed:battle_sidebar_startvue_type_script_lang_js_spreadProps(battle_sidebar_startvue_type_script_lang_js_spreadValues(battle_sidebar_startvue_type_script_lang_js_spreadValues(battle_sidebar_startvue_type_script_lang_js_spreadValues({},(0,dr.mapGetters)("puzzlesBattle",["hasOpenChallenges"])),(0,dr.mapState)(["puzzlesBattle"])),(0,dr.mapState)({observableGameList:({puzzlesBattle:i})=>i.observableGameList,isLoggedIn:({user:i})=>i.isLoggedIn,reachedLimits:i=>i.puzzles.reachedLimits,battleStats(){const{seasonPoints:i,rating:s}=this.userInfo,_=this.hyphenatedLanguage&&this.seasonPoints?i.toLocaleString(this.hyphenatedLanguage):i;return{[ee]:_,[Q]:s}},gameplayState:({puzzles:i})=>i.gameplayState})),{userInfo:({puzzlesBattle:i})=>i.userInfo,limitReached(){return isLimitReached({puzzleMode:vn.BATTLE,reachedLimits:this.reachedLimits})}}),created(){this.resetLeaderboard(),this.getLeaderboard()},methods:battle_sidebar_startvue_type_script_lang_js_spreadProps(battle_sidebar_startvue_type_script_lang_js_spreadValues(battle_sidebar_startvue_type_script_lang_js_spreadValues({},(0,dr.mapActions)("puzzlesBattle",["createChallenge","findNewBattle","getLeaderboard","selectPuzzleMode"])),(0,dr.mapMutations)("puzzlesBattle",["resetLeaderboard"])),{startGame(){this.user.username?this.createChallenge(this.user):this.findNewBattle()},trialModal(){showTrialModal()},onTabSelect(i){this.selectedTab=i},userPicked(i){this.user=i}})},R_=L_,N_={cap:"battle-sidebar-start-cap","mobile-order-1":"battle-sidebar-start-mobile-order-1","mobile-order-2":"battle-sidebar-start-mobile-order-2","mobile-order-3":"battle-sidebar-start-mobile-order-3","mobile-order-4":"battle-sidebar-start-mobile-order-4","mobile-order-5":"battle-sidebar-start-mobile-order-5",component:"battle-sidebar-start-component",formWrapper:"battle-sidebar-start-formWrapper",center:"battle-sidebar-start-center",playbtn:"battle-sidebar-start-playbtn",formText:"battle-sidebar-start-formText",formTextInner:"battle-sidebar-start-formTextInner",iconsm:"battle-sidebar-start-iconsm",bold:"battle-sidebar-start-bold",stat:"battle-sidebar-start-stat",middleText:"battle-sidebar-start-middleText",number:"battle-sidebar-start-number",statRow:"battle-sidebar-start-statRow","battle-icon":"battle-sidebar-start-battle-icon",content:"battle-sidebar-start-content"};var D_=(0,Rr.Z)(R_,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("sidebar-header",{attrs:{title:i.$trans("Puzzle Battle")}},[_("div",{class:i.$style.statRow},[_("div",{class:i.$style.stat},[_("div",{staticClass:"icon-font-chess battle",class:i.$style.iconsm}),i._v(" "),_("div",{class:i.$style.middleText},[i._v("\n          "+i._s(i.$trans("%currentSeason% Points",{"%currentSeason%":i.userInfo.currentSeason}))+"\n        ")]),i._v(" "),_("div",{class:i.$style.number},[i._v("\n          "+i._s(i.userInfo.seasonPoints||"--")+"\n        ")])]),i._v(" "),_("div",{directives:[{name:"show",rawName:"v-show",value:i.gameplayState!==i.gameplayStates.OBSERVE,expression:"gameplayState !== gameplayStates.OBSERVE"}],class:i.$style["battle-icon"]}),i._v(" "),_("div",{class:i.$style.stat},[_("div",{staticClass:"icon-font-chess blitz",class:i.$style.iconsm}),i._v(" "),_("div",{class:i.$style.middleText},[i._v("\n          "+i._s(i.$trans("Rating"))+"\n        ")]),i._v(" "),_("div",{class:i.$style.number},[i._v("\n          "+i._s(i.battleStats.rating||"--")+"\n        ")])])])]),i._v(" "),_("section-tabs",{attrs:{"selected-value":i.selectedTab,tabs:i.sidebarSectionTabsOptions},on:{select:i.onTabSelect}}),i._v(" "),i.selectedTab===i.sidebarSectionTabs.PLAY?_("div",i._b({class:i.$style.content},"div",i.tabpanel(i.sidebarSectionTabs.PLAY),!1),[_("div",{class:i.$style.formWrapper},[_("div",{class:i.$style.center},[_("div",[_("battle-play",{class:i.$style.battlePlay,on:{"user-picked":i.userPicked}})],1)]),i._v(" "),_("div",{class:i.$style.center},[_("div",{class:i.$style.formText},[_("div",{class:i.$style.formTextInner},[i._v("\n            vs "),_("span",[i._v(" "+i._s(i.user.username||i.$trans("Random"))+" ")])]),i._v(" "),_("div",{staticClass:"icon-font-chess magnifying-glass",class:i.$style.iconsm})])]),i._v(" "),i.isLoggedIn?i.limitReached?_("v5-button",{class:i.$style.playbtn,attrs:{size:"large",theme:"primary","full-width":""},domProps:{textContent:i._s(i.$trans("Play"))},on:{click:i.trialModal}}):_("v5-button",{class:i.$style.playbtn,attrs:{size:"large",theme:"primary","full-width":""},domProps:{textContent:i._s(i.$trans("Play!"))},on:{click:i.startGame}}):_("v5-button",{class:i.$style.playbtn,attrs:{size:"large",theme:"primary",href:i.routes.register,"full-width":""},domProps:{textContent:i._s(i.$trans("Sign Up to Play"))}})],1)]):i._e(),i._v(" "),i.selectedTab===i.sidebarSectionTabs.LEADERBOARD?_("battle-leaderboard",i._b({},"battle-leaderboard",i.tabpanel(i.sidebarSectionTabs.LEADERBOARD),!1)):i._e(),i._v(" "),i.selectedTab===i.sidebarSectionTabs.OBSERVE?_("battle-observable-game-list",i._b({attrs:{games:i.observableGameList}},"battle-observable-game-list",i.tabpanel(i.sidebarSectionTabs.OBSERVE),!1)):i._e()],1)}),[],!1,(function battle_sidebar_start_injectStyles(i){this.$style=N_.locals||N_}),null,null),j_=D_.exports,B_=__webpack_require__(98576),$_=Object.defineProperty,U_=Object.defineProperties,F_=Object.getOwnPropertyDescriptors,H_=Object.getOwnPropertySymbols,q_=Object.prototype.hasOwnProperty,V_=Object.prototype.propertyIsEnumerable,battle_two_board_controlsvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?$_(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,battle_two_board_controlsvue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))q_.call(s,_)&&battle_two_board_controlsvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(H_)for(var _ of H_(s))V_.call(s,_)&&battle_two_board_controlsvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},battle_two_board_controlsvue_type_script_lang_js_spreadProps=(i,s)=>U_(i,F_(s)),G_={data:()=>({followingTopBattle:!1,followTopBattleTimeOut:null,keyBindings:new B_.G}),computed:battle_two_board_controlsvue_type_script_lang_js_spreadProps(battle_two_board_controlsvue_type_script_lang_js_spreadValues(battle_two_board_controlsvue_type_script_lang_js_spreadValues({},(0,dr.mapGetters)("puzzlesBattle",["primaryPlayerUuid","opponentUuid","isGameOver"])),(0,dr.mapState)({battleOverModalVisible:({puzzlesBattle:i})=>i.battleOverModalVisible,followingUser:({puzzlesBattle:i})=>i.followingUser,playerInfo:({puzzlesBattle:i})=>i.playerInfo})),{observingLabel(){return this.followingUser||this.followingTopBattle?this.$trans("Observing:"):this.$trans("Continue Observing:")},observing(){return this.followingUser?this.followingUser.username:this.$trans("Next Top Battle")},opponentInfo(){return{id:this.opponentUuid,username:(this.playerInfo[this.opponentUuid]||{}).username}},primaryPlayerInfo(){return{id:this.primaryPlayerUuid,username:(this.playerInfo[this.primaryPlayerUuid]||{}).username}}}),watch:{isGameOver(i){i&&this.followingTopBattle&&(this.followTopBattleTimeOut=setTimeout((()=>{this.observeNextBattle()}),tt.FOLLOW_TOP_BATTLE_DELAY))}},mounted(){this.keyBindings.register({target:window,keys:{Escape:()=>this.resetToStart()}})},beforeDestroy(){this.keyBindings.unregister(),clearTimeout(this.followTopBattleTimeOut)},methods:battle_two_board_controlsvue_type_script_lang_js_spreadProps(battle_two_board_controlsvue_type_script_lang_js_spreadValues({},(0,dr.mapActions)("puzzlesBattle",["resetToStartView","observeNextBattle","followUser","unfollowUser"])),{followTopBattle(){this.followingTopBattle=!0},nextTopBattle(){this.followingTopBattle&&this.observeNextBattle()},resetToStart(){this.battleOverModalVisible||this.resetToStartView()},stopObserving(){this.followingUser&&this.unfollowUser(this.followingUser),this.followingTopBattle=!1}})},Z_={component:"battle-two-board-controls-component",close:"battle-two-board-controls-close",label:"battle-two-board-controls-label",action:"battle-two-board-controls-action",disabled:"battle-two-board-controls-disabled","observing-icon":"battle-two-board-controls-observing-icon",icon:"battle-two-board-controls-icon"};var W_=(0,Rr.Z)(G_,(function(){var i,s=this,_=s.$createElement,T=s._self._c||_;return T("div",{class:s.$style.component},[T("span",{class:s.$style.label,domProps:{textContent:s._s(s.observingLabel)}}),s._v(" "),s.followingUser||s.followingTopBattle?[T("a",{class:[s.$style.action,(i={},i[s.$style.disabled]=!s.followingTopBattle,i)],domProps:{textContent:s._s(s.observing)},on:{click:s.nextTopBattle}}),s._v(" "),T("a",{on:{click:s.stopObserving}},[T("span",{staticClass:"icon-font-chess circle-x",class:s.$style["observing-icon"]})])]:[T("a",{class:s.$style.action,domProps:{textContent:s._s(s.primaryPlayerInfo.username)},on:{click:function(i){return s.followUser(s.primaryPlayerInfo)}}}),s._v("\n\n    |\n\n    "),T("a",{class:s.$style.action,domProps:{textContent:s._s(s.opponentInfo.username)},on:{click:function(i){return s.followUser(s.opponentInfo)}}}),s._v("\n\n    |\n\n    "),T("a",{class:s.$style.action,domProps:{textContent:s._s(s.$trans("Top Battle"))},on:{click:s.followTopBattle}})],s._v(" "),T("a",{class:s.$style.close,on:{click:s.resetToStartView}},[T("span",{staticClass:"icon-font-chess x",class:s.$style.icon})])],2)}),[],!1,(function battle_two_board_controls_injectStyles(i){this.$style=Z_.locals||Z_}),null,null),K_=W_.exports;const acceptRematch=async({commit:i,dispatch:s,getters:_})=>{_.incomingRematch&&(i("setPendingAcceptedRematchBattleId",_.incomingRematch.rematchBattleId),await s("acceptChallenge",_.incomingRematch.id),i("setPendingAcceptedRematchBattleId",null),i("setIncomingRematch",null))},cancelSeek=i=>ca.Z.post(config_routes_cancelSeek(),i),cancelChallenge=i=>ca.Z.delete(config_routes_cancelChallenge(i)),declineChallenge=i=>ca.Z.post(config_routes_declineChallenge(i)),service_getFriendsLeaderboard=i=>ca.Z.post(config_routes_getFriendsLeaderboard(),i),service_getGlobalLeaderboard=i=>ca.Z.post(config_routes_getGlobalLeaderboard(),i);function isLimitReachedError(i){var s;return 401===(null==(s=i.response)?void 0:s.status)}let Y_=!1;const accept_challenge_acceptChallenge=async({commit:i,dispatch:s,state:_},T)=>{if(Y_)return;Y_=!0;const{accept:S}=hashParamsToObject(rI.history.current.hash);S&&S===T&&rI.replace({hash:""}),_.hasTwoBoards&&s("resetToStartView");try{i("setAcceptedChallengeId",T),await(i=>ca.Z.post(config_routes_acceptChallenge(i)))(T)}catch(C){isLimitReachedError(C)?(s("puzzles/limitReached",{limit:vn.BATTLE},{root:!0}),await declineChallenge(T)):C.response&&404===C.response.status&&(0,Gi.el)({type:Vi.V5.info,message:nt.CHALLENGE_CANCELED})}Y_=!1},addBoardEffects=({commit:i,dispatch:s,getters:_,rootState:T},{classification:S,playerId:C})=>{var P;const O=_.gameStore[C],M=_.boardStore[C],R=null==(P=T[O])?void 0:P.selectedNode;R&&(s(`${M}/updateBoardEffect`,{classification:S,node:R,gameStore:O},{root:!0}),i(`${M}/setOption`,{option:"highlightColor",value:S.color},{root:!0}))};var X_=new class RequestQueue{constructor(){this.lockPromise=null}async add(i){return await this.lockPromise,this.lockPromise?this.add(i):this.handleRequest(i)}async handleRequest(i){this.lockPromise=i();const s=await this.lockPromise;return this.lockPromise=null,s}};const getUserUuid=()=>(0,ar.gK)("uuid"),getBattleId=i=>i.id,getPlayers=i=>i.players,getPlayer=(i,s)=>getPlayers(i)[s],isPlayer=(i,s)=>Boolean(getPlayer(i,s)),getPlayerPuzzles=(i,s)=>getPlayer(i,s).puzzles||[],getCurrentPlayerPuzzleIndex=(i,s)=>{const _=getPlayerPuzzles(i,s);return _.length>0?_.length-1:0},getPlayerPuzzleByIndex=(i,s,_)=>getPlayerPuzzles(i,s)[_],getCurrentPlayerPuzzle=(i,s)=>{const _=getCurrentPlayerPuzzleIndex(i,s);return getPlayerPuzzleByIndex(i,s,_)},isBattleAborted=i=>Boolean(i)&&i.state===De,isBattleConfirmed=i=>Boolean(i)&&i.state===Be,isBattleTimedOut=i=>Boolean(i)&&i.state===Fe,isBattleFinished=i=>(i=>Boolean(i)&&i.state===je)(i)||isBattleTimedOut(i)||isBattleAborted(i),isBattlePlayingOrFinished=i=>(i=>Boolean(i)&&i.state===Ue)(i)||isBattleFinished(i),isPlayerFinished=(i,s)=>[Ne.ABORTED,Ne.CLAIMED_WIN,Ne.COMPLETED,Ne.STRUCK_OUT,Ne.TIMED_OUT].includes(getPlayer(i,s).state),canObserve=(i,s)=>{const _=isPlayer(i,s);return!_||_&&isPlayerFinished(i,s)};var Q_=Object.defineProperty,J_=Object.defineProperties,ew=Object.getOwnPropertyDescriptors,tw=Object.getOwnPropertySymbols,nw=Object.prototype.hasOwnProperty,rw=Object.prototype.propertyIsEnumerable,formatters_defNormalProp=(i,s,_)=>s in i?Q_(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,formatters_spreadValues=(i,s)=>{for(var _ in s||(s={}))nw.call(s,_)&&formatters_defNormalProp(i,_,s[_]);if(tw)for(var _ of tw(s))rw.call(s,_)&&formatters_defNormalProp(i,_,s[_]);return i},formatters_spreadProps=(i,s)=>J_(i,ew(s));const formatPuzzle=(i,s,_)=>i?{id:i.id,index:_,colorOfUser:i.colorOfUser,firstMove:i.firstMove,initialFen:i.initialFen,playedMoves:(s.moves||[]).reduce(((i,s)=>`${i}${s.move}${s.counter||""}`),"")}:null,formatPlayer=(i,s)=>{const _=getPlayer(i,s),T=getCurrentPlayerPuzzle(i,s),S=getCurrentPlayerPuzzleIndex(i,s);return{currentPuzzle:formatPuzzle(i.puzzles[S],T,S),playerId:s,puzzles:(_.puzzles||[]).map(((s,_)=>({state:s.state,id:i.puzzles[_].id}))),result:_.result,state:_.state}},formatBattle=i=>{const s={};for(const _ in getPlayers(i))s[_]=formatPlayer(i,_);return formatters_spreadProps(formatters_spreadValues({},i.timer&&{secondsLeft:millisecondsToSeconds(i.timer.remainingMillis)}),{id:i.id,players:s,state:i.state})},createBattleCreatedEvent=({id:i,puzzles:s})=>({id:i,puzzles:s}),createNextPuzzleEvent=(i,{playerId:s,oldPuzzleIndex:_,newPuzzleIndex:T})=>{const S=getPlayer(i,s).puzzles[_],C=i.puzzles[T],P=getPlayerPuzzleByIndex(i,s,T);return{playerId:s,currentPuzzle:S?(O=S,M=_,formatters_spreadProps(formatters_spreadValues({},O),{index:M})):null,nextPuzzle:formatPuzzle(C,P,T)};var O,M},createLoadBattleEvent=i=>formatBattle(i),createPlayerFinishedEvent=(i,{playerId:s})=>formatPlayer(i,s),createUpdatePlayerResultEvent=(i,{playerId:s})=>formatPlayer(i,s),createObservedPlayerMove=(i,s)=>s;const iw=new class Bus{constructor(){this.subscriptions=[]}on(i,s){this.subscriptions.push({eventName:i,handler:s})}off(i,s){this.subscriptions=this.subscriptions.filter((_=>_.eventName!==i||_.handler!==s))}emit(i,s){this.subscriptions.filter((s=>s.eventName===i)).forEach((i=>i.handler(s)))}};var aw=Object.defineProperty,sw=Object.getOwnPropertySymbols,ow=Object.prototype.hasOwnProperty,lw=Object.prototype.propertyIsEnumerable,http_defNormalProp=(i,s,_)=>s in i?aw(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_;const cw=ca.Z.create({headers:{accept:"application/json"},withCredentials:!0});"dev"===window.context.environment&&cw.interceptors.request.use((i=>{var s,_;return i.params=((i,s)=>{for(var _ in s||(s={}))ow.call(s,_)&&http_defNormalProp(i,_,s[_]);if(sw)for(var _ of sw(s))lw.call(s,_)&&http_defNormalProp(i,_,s[_]);return i})({uid:null==(_=null==(s=window.context)?void 0:s.user)?void 0:_.uuid},i.params),i}));const uw={battle:null,userUuid:getUserUuid(),seekTimeout:null,followingUserId:null},emitEvent=(i,{name:s,params:_})=>{iw.emit(s,((i,s,_)=>({[ue]:createBattleCreatedEvent,[fe]:createNextPuzzleEvent,[pe]:createLoadBattleEvent,[ce]:createLoadBattleEvent,[ge]:createPlayerFinishedEvent,[me]:createObservedPlayerMove,[be]:createUpdatePlayerResultEvent}[s](i,_)))(i,s,_))},mergePlayer=(i,s,_)=>{const T=[],S=i.players[_],C=s.players[_],P=isPlayerFinished(s,_)&&!isPlayerFinished(i,_),O=canObserve(i,uw.userUuid);if(P&&Boolean(C.puzzles)&&C.puzzles.length<S.puzzles.length&&((i,s)=>{i.length=s.length;const _=i.length-1;i[_].moves&&s[_].moves&&(i[_].moves.length=s[_].moves.length)})(S.puzzles,C.puzzles),S.state=C.state,C.claimWinPossible&&(i=>{iw.emit(ke,i)})(_),C.result&&(S.result||(S.result={}),T.push(...((i,s,_)=>{const T=[],S=i.players[_].result,C=s.players[_].result;return(S.verdict!==C.verdict||S.newRanking&&S.newRanking.points!==C.newRanking.points)&&T.push({name:be,params:{playerId:_}}),S.verdict=C.verdict,S.ranking=C.ranking,S.newRanking=C.newRanking,T})(i,s,_))),S.puzzles||(S.puzzles=[]),S.state===Ne.PLAYING||O&&P){const i=S.puzzles.length-1,s=C.puzzles.length-1,P=i>=0&&s>i;if(O&&C.puzzles[i]){const{moves:s}=C.puzzles[i],{moves:P}=S.puzzles[i];if(s&&(!P||s.length>P.length)){const{move:i,counter:S}=s[s.length-1];T.push({name:me,params:{counter:S,move:i,playerId:_}})}}P&&T.push({name:fe,params:{playerId:_,oldPuzzleIndex:i,newPuzzleIndex:s}})}return P&&T.push({name:ge,params:{playerId:_}}),C.puzzles&&C.puzzles.forEach(((i,s)=>{S.puzzles[s]||(S.puzzles[s]={}),T.push(...((i,s)=>(i.state=s.state,s.moves&&(i.moves||(i.moves=[]),s.moves.forEach(((s,_)=>{if(i.moves[_]){if(s.move!==i.moves[_].move)throw new Error("Different moves");i.moves[_]=s}else i.moves[_]=s}))),[]))(S.puzzles[s],i))})),T},mergeBattle=(i,s)=>{const _=[],T=isBattleAborted(s)&&!isBattleAborted(i);i.id=s.id,i.state=s.state,i.timer=s.timer,i.players||(i.players={});for(const S in s.players)i.players[S]?_.push(...mergePlayer(i,s,S)):i.players[S]=s.players[S];return T&&_.push({name:ce}),_},makeMove=({battleId:i,playerId:s,puzzleIndex:_,moveIndex:T,move:S})=>{const C=uw.battle;if(!C||!C.puzzles||i!==getBattleId(C))return null;((i,s,_,T)=>{const S=getPlayer(i,s);if(S.state!==Ne.PLAYING)throw new Error(`Invalid player state: ${S.state}`);if(getCurrentPlayerPuzzleIndex(i,s)!==_)throw new Error("Invalid puzzle index");const C=getPlayerPuzzleByIndex(i,s,_);if(!C||C.state!==Je)throw new Error("Invalid puzzle");if((C.moves||[]).length!==T)throw new Error("Invalid move index")})(C,s,_,T);const P=getPlayer(C,s),O=getPlayerPuzzleByIndex(C,s,_),M=O.moves||[],R=getPlayerPuzzles(C,s),D=C.puzzles[_],j=D.secureMoves[T].move===S,$=T===D.secureMoves.length-1,U=j?D.secureMoves[T].counter:"";if(M.push({move:S,counter:U}),O.moves=M,$&&j&&(O.state=Xe),!j){O.state=Qe;R.filter((i=>i.state===Qe)).length>=3&&(P.state=Ne.STRUCK_OUT,emitEvent(C,{name:ge,params:{playerId:s}}))}if(P.state===Ne.PLAYING&&O.state!==Je){C.puzzles[_+1]?(R.push({state:Je}),emitEvent(C,{name:fe,params:{playerId:s,oldPuzzleIndex:R.length-2,newPuzzleIndex:R.length-1}})):(P.state=Ne.COMPLETED,emitEvent(C,{name:ge,params:{playerId:s}}))}const V={moves:[{move:S,moveIndex:T,puzzleIndex:_}]};return X_.add(createRequestWithRetries((()=>cw.put(config_routes_submitMoves(i,s),V)))),O},fetchBattle=i=>cw.get(config_routes_getBattle(i)).then((i=>i.data)),openBattle=i=>fetchBattle(i).then((i=>(iw.emit(ye,i),i))),closeBattle=i=>{iw.emit(_e,i)},findOngoingBattle=()=>cw.get(config_routes_getBattles(getUserUuid())).then((i=>i.data.games)).then((i=>i.find((i=>!isBattleFinished(i)&&getPlayer(i,getUserUuid())&&!isPlayerFinished(i,getUserUuid()))))),createSeekOrOpenOngoingBattle=async()=>{const i=await findOngoingBattle();if(!i){const i=await ca.Z.post(config_routes_createSeek(),s);return iw.emit(Te,{seek:i}),i}var s;openBattle(i.id)},service_cancelSeek=async i=>(iw.emit(Se),cancelSeek(i)),observeBattle=i=>{uw.battle&&((i,s)=>!isBattleFinished(i)&&getPlayer(i,s)&&!isPlayerFinished(i,s))(uw.battle,uw.userUuid)||iw.emit(Ee,i)},service_createChallenge=async i=>{const s=await(i=>ca.Z.post(config_routes_createChallenge(),i))(i);return iw.emit(Pe),s};var dw={props:{data:{type:Object,required:!0}},data:()=>({translations:Object.freeze(kt)}),computed:{formattedDelta(){if(this.data.results)return this.data.results.ratingDelta>=0?`+${this.data.results.ratingDelta}`:this.data.results.ratingDelta},ratingText(){return this.data.isRatingProvisionalOrPreprovisional?kt.pending:this.data.rating},score(){if(this.data.results)return`${kt.score} (${kt.numberOfSecs(this.data.results.totalTime)} / ${this.data.results.score.toFixed(0)}%)`}}},hw={results:"result-data-results",rating:"result-data-rating",delta:"result-data-delta",solved:"result-data-solved"};var pw=(0,Rr.Z)(dw,(function(){var i,s=this,_=s.$createElement,T=s._self._c||_;return T("div",{class:s.$style.results},[T("div",[T("span",{domProps:{textContent:s._s(s.translations.rating+" (#"+s.data.id+")")}}),s._v(" "),T("span",{class:s.$style.rating,domProps:{textContent:s._s(s.ratingText)}})]),s._v(" "),s.score?T("div",[T("span",{domProps:{textContent:s._s(s.score)}}),s._v(" "),T("span",{class:(i={},i[s.$style.delta]=!0,i[s.$style.solved]=s.data.results.ratingDelta>=0,i),domProps:{textContent:s._s(s.formattedDelta)}})]):s._e()])}),[],!1,(function result_data_injectStyles(i){this.$style=hw.locals||hw}),null,null),mw=pw.exports;const getPuzzlePopoverDetails=({puzzleIndex:i,battle:s})=>{const _=s.puzzles?s.puzzles[i]:(T=s.id,S=i,uw.battle&&uw.battle.puzzles&&T===getBattleId(uw.battle)?uw.battle.puzzles[S]:null);var T,S;const{colorOfUser:C,firstMove:P,id:O,initialFen:M,rating:R}=_,{from:D,to:j}=Iv.Z.decodeTCN(P)[0];return{component:mw,colorOfUser:C,fen:M,firstMove:P,flipBoard:"black"===C,highlightedSquares:`${D}${j}`,id:O,initialFen:M,rating:R}};var fw=Object.defineProperty,gw=Object.defineProperties,vw=Object.getOwnPropertyDescriptors,bw=Object.getOwnPropertySymbols,yw=Object.prototype.hasOwnProperty,_w=Object.prototype.propertyIsEnumerable,add_round_result_defNormalProp=(i,s,_)=>s in i?fw(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,add_round_result_spreadValues=(i,s)=>{for(var _ in s||(s={}))yw.call(s,_)&&add_round_result_defNormalProp(i,_,s[_]);if(bw)for(var _ of bw(s))_w.call(s,_)&&add_round_result_defNormalProp(i,_,s[_]);return i},add_round_result_spreadProps=(i,s)=>gw(i,vw(s));const addRoundResult=({commit:i,dispatch:s,getters:_,rootState:T,state:S},{playerId:C,puzzle:P})=>{const O=P.state!==Qe,M=C===_.primaryPlayerUuid,{battle:D,hasTwoBoards:j}=S,$=add_round_result_spreadValues(add_round_result_spreadValues({},P),getPuzzlePopoverDetails({battle:D,puzzleIndex:P.index}));if(O||i("addStrike",{uuid:C,strike:$}),M){i("puzzles/setGameplayState",O?_n.MOVE_CORRECT:_n.MOVE_INCORRECT,{root:!0})}if(((M||j)&&!S.analysisBoard||(M||j)&&S.analysisBoard.boardNamespace!==_.boardStore[C])&&s("addBoardEffects",{classification:O?R.xt.CORRECT:R.xt.INCORRECT,playerId:C}),T.board.boardOptions.playSounds){const{opponentStruckOut:i,isGameOver:s}=_,T=(({hasTwoBoards:i,isGameOver:s,isSolved:_,isPrimaryPlayer:T,opponentStruckOut:S})=>{if(!s)return i||T?_?xt.CORRECT:xt.INCORRECT:S?xt.OPPONENT_FAIL:_?xt.OPPONENT_CORRECT:xt.OPPONENT_INCORRECT})({hasTwoBoards:j,isGameOver:s,isPrimaryPlayer:M,isSolved:O,opponentStruckOut:i});T&&setTimeout((()=>{playSoundEffect(T)}),tt.PUZZLE_OVER_SOUND_DELAY)}i("addRoundResult",{uuid:C,result:add_round_result_spreadProps(add_round_result_spreadValues({},$),{solved:O})})};var ww=Object.defineProperty,kw=Object.getOwnPropertySymbols,Tw=Object.prototype.hasOwnProperty,Sw=Object.prototype.propertyIsEnumerable,analyze_puzzle_result_defNormalProp=(i,s,_)=>s in i?ww(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,analyze_puzzle_result_spreadValues=(i,s)=>{for(var _ in s||(s={}))Tw.call(s,_)&&analyze_puzzle_result_defNormalProp(i,_,s[_]);if(kw)for(var _ of kw(s))Sw.call(s,_)&&analyze_puzzle_result_defNormalProp(i,_,s[_]);return i};const analyzePuzzleResult=({dispatch:i,getters:s,state:_},{puzzle:T,uuid:S})=>{!s.hasTwoBoards&&s.canAnalyze&&O.Z.emit(re);let C=s.boardStore[S],P=s.gameStore[S];const{analysisBoard:M}=_;if((({analysisBoard:i,puzzle:s})=>i&&i.puzzle&&i.puzzle.id===s.id)({analysisBoard:M,puzzle:T})&&isSameBoard({analysisBoard:M,gameNamespace:P}))window.open(Gn.individualPuzzle(T.id),"_blank");else if(!M||isSameBoard({analysisBoard:M,gameNamespace:P}))i("initializePuzzle",{puzzle:T,uuid:S}),i("enterAnalysisBoard",{boardNamespace:C,gameNamespace:P,puzzle:analyze_puzzle_result_spreadValues({},T)});else{const _=s.playerUuids.find((i=>i!==S));C=s.boardStore[_],P=s.gameStore[_],i("exitAnalysisBoard",{boardNamespace:C,gameNamespace:P})}},battleAborted=({commit:i},s)=>{i("setBattleState",s.state)},battleCreated=async({commit:i,dispatch:s,getters:_,state:T},{id:S,puzzles:C})=>{s("cancelChallenge"),s("declineRematch"),s("cancelRematch"),O.Z.emit(se),O.Z.emit(pn),s("resetRoundState",S),await s("getBattleInfo",S);const{shortUuid:P}=T.battle;rI.replace({name:Hn.BATTLE_ID,params:{battleId:P}});const M=_.primaryPlayerUuid;s("initializePuzzle",{isFirstPuzzle:!0,puzzle:C[0],uuid:M}),i("puzzles/setGameplayState",_n.COUNT_DOWN,{root:!0}),i("setBattleIsConfirmed",!1),O.Z.emit(ie)},battleTimedOut=({commit:i,dispatch:s,rootState:_,state:T})=>{_n.SEEKING===_.puzzles.gameplayState&&s("findNewBattle"),T.pendingAcceptedRematchBattleId&&i("setPendingAcceptedRematchBattleId",null)},boardMakeMove=async({dispatch:i,getters:s,rootGetters:_,rootState:T,state:S},{gameNamespace:C="game"})=>{if(!_[`${C}/atFinalMoveNode`]&&!S.analysisBoard)return void i(`${C}/selectLineEnd`,void 0,{root:!0});if(T.puzzles.gameplayState!==_n.USER_MOVE||S.analysisBoard)return;const P=(O=_[`${C}/selectedNode`].moveNumber,Math.floor((O-1)/2));var O;const M=s.primaryPlayerUuid,{battle:R,puzzle:D}=S,j=T.game.tcn.substring(T.game.tcn.length-2),{moves:$}=makeMove({battleId:R.id,playerId:M,puzzleIndex:D[M].index,moveIndex:P,move:j}),{counter:U}=$[P];U&&i("puzzles/makeComputerMove",{isFirstMove:!1,move:U},{root:!0})},cancel_battle_cancelBattle=({getters:i,state:s})=>{var _,T;_=s.battle.id,T=i.primaryPlayerUuid,cw.put(config_routes_cancelBattle(_,T),{state:Ne.CANCELLED})},cancel_challenge_cancelChallenge=({dispatch:i,getters:s,state:_},T)=>{if(!s.hasOpenChallenges)return;(T?[T]:Object.values(_.challenges)).forEach((s=>{cancelChallenge(s.id),i("removeChallenge",s.user.uuid)}))},cancelRematch=({commit:i,getters:s})=>{s.outgoingRematch&&(cancelChallenge(s.outgoingRematch.id),i("setOutgoingRematch",null))},cancel_seek_cancelSeek=({commit:i,dispatch:s,state:_,rootState:T})=>{_.battle.id?openBattle(_.battle.id).then((s=>{const _=millisecondsToSeconds(s.timer.remainingMillis);_>0&&(i("setPlayDuration",_),setTimeout((()=>{O.Z.emit(ae)}))),i("puzzles/setGameplayState",_n.FINISHED,{root:!0}),O.Z.emit(ne)})).catch((()=>{s("resetToStartView")})):s("resetToStartView"),service_cancelSeek({timeControl:millisecondsToSeconds(T.puzzles.timeConstraints.battle)})},challengeUserFromUrl=async({dispatch:i},s)=>{if(!s)return;rI.replace({hash:""});const{data:_}=await(T=s,ca.Z.get(config_routes_getUserByUsername(T)));var T;_&&i("createChallenge",_)},claim_win_claimWin=({commit:i,getters:s,state:_})=>{var T,S;T=_.battle.id,S=s.primaryPlayerUuid,cw.put(config_routes_updatePlayerState(T,S),{state:Ne.CLAIMED_WIN}),i("puzzles/setGameplayState",_n.FINISHED,{root:!0})},claimWinPossible=({getters:i,commit:s},_)=>{i.isObserving||i.primaryPlayerUuid!==_||s("setClaimWinPossible",!0)};var Cw=Object.defineProperty,xw=Object.defineProperties,Ew=Object.getOwnPropertyDescriptors,Pw=Object.getOwnPropertySymbols,Aw=Object.prototype.hasOwnProperty,Ow=Object.prototype.propertyIsEnumerable,create_challenge_defNormalProp=(i,s,_)=>s in i?Cw(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_;const create_challenge_createChallenge=async({commit:i,dispatch:s,state:_},T)=>{if(_.challenges[T.uuid])return;let S;try{S=await service_createChallenge({toUserId:T.uuid})}catch(C){isLimitReachedError(C)&&s("puzzles/limitReached",{limit:vn.BATTLE},{root:!0})}S&&S.data&&(S.data.error?(0,Gi.el)({type:Vi.V5.info,message:nt.NOT_ACCEPTING_CHALLENGES}):S.data.challenge&&(i("addChallenge",((i,s)=>xw(i,Ew(s)))(((i,s)=>{for(var _ in s||(s={}))Aw.call(s,_)&&create_challenge_defNormalProp(i,_,s[_]);if(Pw)for(var _ of Pw(s))Ow.call(s,_)&&create_challenge_defNormalProp(i,_,s[_]);return i})({},S.data.challenge),{user:T})),i("puzzles/setGameplayState",_n.SEEKING,{root:!0})))},createChallenges=({dispatch:i},s)=>{s.forEach((s=>{i("createChallenge",s)}))},create_match_createMatch=async({commit:i,dispatch:s,state:_},{username1:T,username2:S})=>{const C=await(P={username1:T,username2:S},ca.Z.post(config_routes_createMatch(),P));var P;const{id:O}=C.data;_.hasTwoBoards&&(s("resetToStartView"),i("clearBattle")),s("initPlayerOrObserver",O)},declineRematch=({commit:i,dispatch:s,getters:_})=>{_.incomingRematch&&(s("declineChallenge",_.incomingRematch.id),i("setIncomingRematch",null))},decline_challenge_declineChallenge=(i,s)=>{declineChallenge(s)},cancelSeekOnUnload=()=>{cancelSeek({timeControl:millisecondsToSeconds(st.default.state.puzzles.timeConstraints.battle)})},client_event_actions_battleCreated=i=>{st.default.dispatch("puzzlesBattle/battleCreated",i)},battleConfirmed=()=>{st.default.commit("puzzlesBattle/setBattleIsConfirmed",!0)},loadBattle=i=>{it.loadBattle=st.default.dispatch("puzzlesBattle/loadBattle",i)},loadNextPuzzle=i=>{st.default.dispatch("puzzlesBattle/loadNextPuzzle",i)},playerFinished=i=>{st.default.dispatch("puzzlesBattle/playerFinished",i)},observedPlayerMove=i=>{st.default.dispatch("puzzlesBattle/observedPlayerMove",i)},updateChallenge=i=>{st.default.dispatch("puzzlesBattle/updateChallenge",i)},updatePlayerResult=i=>{st.default.dispatch("puzzlesBattle/updatePlayerResult",i)},client_event_actions_battleTimedOut=()=>{st.default.dispatch("puzzlesBattle/battleTimedOut")},client_event_actions_battleAborted=i=>{st.default.dispatch("puzzlesBattle/battleAborted",i)},updateConnectionQuality=i=>{st.default.commit("puzzlesBattle/updateConnectionQuality",i),i===le&&st.default.commit("incrementDisconnectedCount")},client_event_actions_claimWinPossible=i=>{st.default.dispatch("puzzlesBattle/claimWinPossible",i)},client_event_actions_acceptChallenge=({challenge:i})=>{st.default.dispatch("puzzlesBattle/acceptChallenge",i.id)},client_event_actions_declineChallenge=({challenge:i})=>{st.default.dispatch("puzzlesBattle/declineChallenge",i.id)},client_event_actions_observeBattle=i=>{st.default.dispatch("puzzlesBattle/observeBattle",i)},unfollowedUser=({id:i})=>{st.default.dispatch("puzzlesBattle/unfollowUser",{id:i})};var Mw=__webpack_require__(27427),zw=__webpack_require__(48370),Iw=__webpack_require__.n(zw),Lw=__webpack_require__(74959),Rw=__webpack_require__(53502),Nw=__webpack_require__(97032);const Dw={createBoundObject:i=>(Object.keys(i).forEach((s=>{Nw.Z.isFunction(i[s])&&(i[s]=i[s].bind(i))})),i),createState(i){const s=Object.create(null);return Object.defineProperty(s,"reset",{writable:!1,enumerable:!1,configurable:!1,value:()=>Object.assign(s,i())}),s.reset(),s},createClient(i){return this.createBoundObject(i)},createService(i){const s=this.createBoundObject(i);return Iw()(s),s},createUtils(i){return this.createBoundObject(i)},createDisposable:()=>{const i=[],s=[],_=[];return{on(s,_,T){if(!s.on||!s.off)throw new Error("invalid event emitter");s.on(_,T),i.push([s,_,T])},off(s,_,T){if(!s.on||!s.off)throw new Error("invalid event emitter");s.off(_,T),Lw.Z.remove(i,(i=>i[0]===s&&i[1]===_&&i[2]===T))},once(s,_,T){if(!s.once||!s.off)throw new Error("invalid event emitter");s.once(_,T),i.push([s,_,T])},setTimeout(i,_,...T){const S=Rw.Z.setTimeout((()=>{i(...T),Lw.Z.remove(s,S)}),_);return s.push(S),S},clearTimeout(i){Rw.Z.clearTimeout(i),Lw.Z.remove(s,i)},setInterval(i,s,...T){const S=Rw.Z.setInterval(i,s,...T);return _.push(S),S},clearInterval(i){Rw.Z.clearInterval(i),Lw.Z.remove(_,i)},dispose(){for(;i.length;){const s=i.shift();s[0].off(s[1],s[2])}for(;s.length;)Rw.Z.clearTimeout(s.shift());for(;_.length;)Rw.Z.clearInterval(_.shift())}}}};var jw=Dw;const getUserChannel=()=>`battle/users/${getUserUuid()}`,Bw="register_challenge_toaster_handler",$w="unregister_challenge_toaster_handler";var Uw=__webpack_require__(63930);const getUserChallengesChannel=()=>`battle/challenges/${getUserUuid()}`;var Fw=window.PubSub;const Hw=jw.createClient({subscription:null,init(){var i;i={filter:this.challengeToasterFilter,accept:this.challengeToasterAccept,decline:this.challengeToasterDecline},window.chesscom=Object.assign(window.chesscom||{},{puzzleBattleChallengeHandler:i}),window.postMessage({event:Bw},window.location.origin),Fw.isAttached()?this.subscribe():Fw.on(Mw.z.CONNECT,this.subscribe),Fw.on(`${Mw.z.MESSAGE}:${getUserChallengesChannel()}`,this.onMessage)},subscribe(){this.subscription=Fw.subscribe(getUserChallengesChannel())},onMessage({message:{event:i,challenge:s}}){iw.emit(we,{action:i,challenge:(0,Uw.CR)(s)})},challengeToasterFilter:i=>!uw.battle||(!i.rematchBattleId||uw.battle.id!==i.rematchBattleId)&&isBattleFinished(uw.battle),challengeToasterAccept(i){iw.emit(Ce,{challenge:i})},challengeToasterDecline(i){iw.emit(xe,{challenge:i})},close(){window.chesscom&&window.chesscom.puzzleBattleChallengeHandler&&(window.chesscom.puzzleBattleChallengeHandler=null),window.postMessage({event:$w},window.location.origin),Fw.off(`${Mw.z.MESSAGE}:${getUserChallengesChannel()}`,this.onMessage),this.subscription&&this.subscription.close()}}),qw=4e4,getUserPresenceChannel=i=>`presence/users/${i}`,Vw=jw.createClient({subscription:null,init(){Fw.isAttached()?this.onPubsubConnect():Fw.on(Mw.z.CONNECT,this.onPubsubConnect),iw.on(Oe,this.followUser),iw.on(Me,this.unfollowUser),iw.on(Te,this.onCreateSeek),iw.on(pe,this.onLoadBattle)},onPubsubConnect(){uw.followingUserId&&this.subscribe()},onPresenceMessage({message:i}){this.onPresenceUpdate(i)},onPresenceUpdate({activity:i,activityContext:s}){var _;"playing"===i&&(null==(_=null==s?void 0:s.battles)?void 0:_.length)>0&&observeBattle(s.battles[0].id)},onCreateSeek(){this.stopFollowing()},onLoadBattle(i){isPlayer(i,uw.userUuid)&&!isBattleFinished(i)&&this.stopFollowing()},followUser(i){uw.followingUserId&&uw.followingUserId===i||(this.stopFollowing(),uw.followingUserId=i,this.subscribe(),(i=>cw.get(config_routes_getPresenceData(i)).then((i=>i.data)))(i).then((i=>this.onPresenceUpdate(i))))},unfollowUser(i){uw.followingUserId===i&&(this.unsubscribe(),uw.followingUserId=null,iw.emit(Ae,{id:i}))},stopFollowing(){uw.followingUserId&&this.unfollowUser(uw.followingUserId)},subscribe(){if(!uw.followingUserId)return;const i=getUserPresenceChannel(uw.followingUserId);this.subscription=Fw.subscribe(i),Fw.on(`${Mw.z.MESSAGE}:${i}`,this.onPresenceMessage)},unsubscribe(){if(uw.followingUserId){const i=getUserPresenceChannel(uw.followingUserId);Fw.off(`${Mw.z.MESSAGE}:${i}`,this.onPresenceMessage)}this.subscription&&this.subscription.close()},close(){this.unsubscribe(),iw.off(Oe,this.followUser),iw.off(Me,this.unfollowUser),iw.off(Te,this.onCreateSeek),iw.off(ye,this.onOpenBattle)}});
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017 Joachim Wester
 * MIT license
 */
var Gw,Zw=(Gw=function(i,s){return Gw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var _ in s)s.hasOwnProperty(_)&&(i[_]=s[_])},Gw(i,s)},function(i,s){function __(){this.constructor=i}Gw(i,s),i.prototype=null===s?Object.create(s):(__.prototype=s.prototype,new __)}),Ww=Object.prototype.hasOwnProperty;function helpers_hasOwnProperty(i,s){return Ww.call(i,s)}function _objectKeys(i){if(Array.isArray(i)){for(var s=new Array(i.length),_=0;_<s.length;_++)s[_]=""+_;return s}if(Object.keys)return Object.keys(i);s=[];for(var T in i)helpers_hasOwnProperty(i,T)&&s.push(T);return s}function _deepClone(i){switch(typeof i){case"object":return JSON.parse(JSON.stringify(i));case"undefined":return null;default:return i}}function isInteger(i){for(var s,_=0,T=i.length;_<T;){if(!((s=i.charCodeAt(_))>=48&&s<=57))return!1;_++}return!0}function escapePathComponent(i){return-1===i.indexOf("/")&&-1===i.indexOf("~")?i:i.replace(/~/g,"~0").replace(/\//g,"~1")}function unescapePathComponent(i){return i.replace(/~1/g,"/").replace(/~0/g,"~")}function hasUndefined(i){if(void 0===i)return!0;if(i)if(Array.isArray(i)){for(var s=0,_=i.length;s<_;s++)if(hasUndefined(i[s]))return!0}else if("object"==typeof i){var T=_objectKeys(i),S=T.length;for(s=0;s<S;s++)if(hasUndefined(i[T[s]]))return!0}return!1}function patchErrorMessageFormatter(i,s){var _=[i];for(var T in s){var S="object"==typeof s[T]?JSON.stringify(s[T],null,2):s[T];void 0!==S&&_.push(T+": "+S)}return _.join("\n")}var Kw=function(i){function PatchError(s,_,T,S,C){var P=this.constructor,O=i.call(this,patchErrorMessageFormatter(s,{name:_,index:T,operation:S,tree:C}))||this;return O.name=_,O.index=T,O.operation=S,O.tree=C,Object.setPrototypeOf(O,P.prototype),O.message=patchErrorMessageFormatter(s,{name:_,index:T,operation:S,tree:C}),O}return Zw(PatchError,i),PatchError}(Error),Yw=Kw,Xw=_deepClone,Qw={add:function(i,s,_){return i[s]=this.value,{newDocument:_}},remove:function(i,s,_){var T=i[s];return delete i[s],{newDocument:_,removed:T}},replace:function(i,s,_){var T=i[s];return i[s]=this.value,{newDocument:_,removed:T}},move:function(i,s,_){var T=getValueByPointer(_,this.path);T&&(T=_deepClone(T));var S=applyOperation(_,{op:"remove",path:this.from}).removed;return applyOperation(_,{op:"add",path:this.path,value:S}),{newDocument:_,removed:T}},copy:function(i,s,_){var T=getValueByPointer(_,this.from);return applyOperation(_,{op:"add",path:this.path,value:_deepClone(T)}),{newDocument:_}},test:function(i,s,_){return{newDocument:_,test:_areEquals(i[s],this.value)}},_get:function(i,s,_){return this.value=i[s],{newDocument:_}}},Jw={add:function(i,s,_){return isInteger(s)?i.splice(s,0,this.value):i[s]=this.value,{newDocument:_,index:s}},remove:function(i,s,_){return{newDocument:_,removed:i.splice(s,1)[0]}},replace:function(i,s,_){var T=i[s];return i[s]=this.value,{newDocument:_,removed:T}},move:Qw.move,copy:Qw.copy,test:Qw.test,_get:Qw._get};function getValueByPointer(i,s){if(""==s)return i;var _={op:"_get",path:s};return applyOperation(i,_),_.value}function applyOperation(i,s,_,T,S,C){if(void 0===_&&(_=!1),void 0===T&&(T=!0),void 0===S&&(S=!0),void 0===C&&(C=0),_&&("function"==typeof _?_(s,0,i,s.path):validator(s,0)),""===s.path){var P={newDocument:i};if("add"===s.op)return P.newDocument=s.value,P;if("replace"===s.op)return P.newDocument=s.value,P.removed=i,P;if("move"===s.op||"copy"===s.op)return P.newDocument=getValueByPointer(i,s.from),"move"===s.op&&(P.removed=i),P;if("test"===s.op){if(P.test=_areEquals(i,s.value),!1===P.test)throw new Yw("Test operation failed","TEST_OPERATION_FAILED",C,s,i);return P.newDocument=i,P}if("remove"===s.op)return P.removed=i,P.newDocument=null,P;if("_get"===s.op)return s.value=i,P;if(_)throw new Yw("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",C,s,i);return P}T||(i=_deepClone(i));var O=(s.path||"").split("/"),M=i,R=1,D=O.length,j=void 0,$=void 0,U=void 0;for(U="function"==typeof _?_:validator;;){if($=O[R],S&&"__proto__"==$)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(_&&void 0===j&&(void 0===M[$]?j=O.slice(0,R).join("/"):R==D-1&&(j=s.path),void 0!==j&&U(s,0,i,j)),R++,Array.isArray(M)){if("-"===$)$=M.length;else{if(_&&!isInteger($))throw new Yw("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",C,s,i);isInteger($)&&($=~~$)}if(R>=D){if(_&&"add"===s.op&&$>M.length)throw new Yw("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",C,s,i);if(!1===(P=Jw[s.op].call(s,M,$,i)).test)throw new Yw("Test operation failed","TEST_OPERATION_FAILED",C,s,i);return P}}else if($&&-1!=$.indexOf("~")&&($=unescapePathComponent($)),R>=D){if(!1===(P=Qw[s.op].call(s,M,$,i)).test)throw new Yw("Test operation failed","TEST_OPERATION_FAILED",C,s,i);return P}M=M[$]}}function applyPatch(i,s,_,T,S){if(void 0===T&&(T=!0),void 0===S&&(S=!0),_&&!Array.isArray(s))throw new Yw("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");T||(i=_deepClone(i));for(var C=new Array(s.length),P=0,O=s.length;P<O;P++)C[P]=applyOperation(i,s[P],_,!0,S,P),i=C[P].newDocument;return C.newDocument=i,C}function applyReducer(i,s,_){var T=applyOperation(i,s);if(!1===T.test)throw new Yw("Test operation failed","TEST_OPERATION_FAILED",_,s,i);return T.newDocument}function validator(i,s,_,T){if("object"!=typeof i||null===i||Array.isArray(i))throw new Yw("Operation is not an object","OPERATION_NOT_AN_OBJECT",s,i,_);if(!Qw[i.op])throw new Yw("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,i,_);if("string"!=typeof i.path)throw new Yw("Operation `path` property is not a string","OPERATION_PATH_INVALID",s,i,_);if(0!==i.path.indexOf("/")&&i.path.length>0)throw new Yw('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",s,i,_);if(("move"===i.op||"copy"===i.op)&&"string"!=typeof i.from)throw new Yw("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",s,i,_);if(("add"===i.op||"replace"===i.op||"test"===i.op)&&void 0===i.value)throw new Yw("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",s,i,_);if(("add"===i.op||"replace"===i.op||"test"===i.op)&&hasUndefined(i.value))throw new Yw("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",s,i,_);if(_)if("add"==i.op){var S=i.path.split("/").length,C=T.split("/").length;if(S!==C+1&&S!==C)throw new Yw("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",s,i,_)}else if("replace"===i.op||"remove"===i.op||"_get"===i.op){if(i.path!==T)throw new Yw("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",s,i,_)}else if("move"===i.op||"copy"===i.op){var P=validate([{op:"_get",path:i.from,value:void 0}],_);if(P&&"OPERATION_PATH_UNRESOLVABLE"===P.name)throw new Yw("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",s,i,_)}}function validate(i,s,_){try{if(!Array.isArray(i))throw new Yw("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(s)applyPatch(_deepClone(s),_deepClone(i),_||!0);else{_=_||validator;for(var T=0;T<i.length;T++)_(i[T],T,s,void 0)}}catch(S){if(S instanceof Yw)return S;throw S}}function _areEquals(i,s){if(i===s)return!0;if(i&&s&&"object"==typeof i&&"object"==typeof s){var _,T,S,C=Array.isArray(i),P=Array.isArray(s);if(C&&P){if((T=i.length)!=s.length)return!1;for(_=T;0!=_--;)if(!_areEquals(i[_],s[_]))return!1;return!0}if(C!=P)return!1;var O=Object.keys(i);if((T=O.length)!==Object.keys(s).length)return!1;for(_=T;0!=_--;)if(!s.hasOwnProperty(O[_]))return!1;for(_=T;0!=_--;)if(!_areEquals(i[S=O[_]],s[S]))return!1;return!0}return i!=i&&s!=s}
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017 Joachim Wester
 * MIT license
 */
var ek=new WeakMap,tk=function tk(i){this.observers=new Map,this.obj=i},nk=function nk(i,s){this.callback=i,this.observer=s};function unobserve(i,s){s.unobserve()}function observe(i,s){var _,T=function getMirror(i){return ek.get(i)}(i);if(T){var S=function getObserverFromMirror(i,s){return i.observers.get(s)}(T,s);_=S&&S.observer}else T=new tk(i),ek.set(i,T);if(_)return _;if(_={},T.value=_deepClone(i),s){_.callback=s,_.next=null;var dirtyCheck=function(){generate(_)},fastCheck=function(){clearTimeout(_.next),_.next=setTimeout(dirtyCheck)};"undefined"!=typeof window&&(window.addEventListener("mouseup",fastCheck),window.addEventListener("keyup",fastCheck),window.addEventListener("mousedown",fastCheck),window.addEventListener("keydown",fastCheck),window.addEventListener("change",fastCheck))}return _.patches=[],_.object=i,_.unobserve=function(){generate(_),clearTimeout(_.next),function removeObserverFromMirror(i,s){i.observers.delete(s.callback)}(T,_),"undefined"!=typeof window&&(window.removeEventListener("mouseup",fastCheck),window.removeEventListener("keyup",fastCheck),window.removeEventListener("mousedown",fastCheck),window.removeEventListener("keydown",fastCheck),window.removeEventListener("change",fastCheck))},T.observers.set(s,new nk(s,_)),_}function generate(i,s){void 0===s&&(s=!1);var _=ek.get(i.object);_generate(_.value,i.object,i.patches,"",s),i.patches.length&&applyPatch(_.value,i.patches);var T=i.patches;return T.length>0&&(i.patches=[],i.callback&&i.callback(T)),T}function _generate(i,s,_,T,S){if(s!==i){"function"==typeof s.toJSON&&(s=s.toJSON());for(var C=_objectKeys(s),P=_objectKeys(i),O=!1,M=P.length-1;M>=0;M--){var R=i[j=P[M]];if(!helpers_hasOwnProperty(s,j)||void 0===s[j]&&void 0!==R&&!1===Array.isArray(s))Array.isArray(i)===Array.isArray(s)?(S&&_.push({op:"test",path:T+"/"+escapePathComponent(j),value:_deepClone(R)}),_.push({op:"remove",path:T+"/"+escapePathComponent(j)}),O=!0):(S&&_.push({op:"test",path:T,value:i}),_.push({op:"replace",path:T,value:s}),!0);else{var D=s[j];"object"==typeof R&&null!=R&&"object"==typeof D&&null!=D?_generate(R,D,_,T+"/"+escapePathComponent(j),S):R!==D&&(!0,S&&_.push({op:"test",path:T+"/"+escapePathComponent(j),value:_deepClone(R)}),_.push({op:"replace",path:T+"/"+escapePathComponent(j),value:_deepClone(D)}))}}if(O||C.length!=P.length)for(M=0;M<C.length;M++){var j;helpers_hasOwnProperty(i,j=C[M])||void 0===s[j]||_.push({op:"add",path:T+"/"+escapePathComponent(j),value:_deepClone(s[j])})}}}function compare(i,s,_){void 0===_&&(_=!1);var T=[];return _generate(i,s,T,"",_),T}Object.assign({},i,s,{JsonPatchError:Kw,deepClone:_deepClone,escapePathComponent:escapePathComponent,unescapePathComponent:unescapePathComponent});const rk="init",ik="reloading",ak="running",isNewerThan=(i,s)=>Date.parse(i)>Date.parse(s),createDiffChannelClient=()=>jw.createBoundObject({channel:null,battle:null,subscription:null,onUpdate:null,state:rk,messageQueue:[],init({battle:i,channel:s,onReady:_,onUpdate:T}){this.battle=(0,Tv.Z)(i),this.channel=s,this.onReady=_,this.onUpdate=T,this.subscription=Fw.subscribe(this.channel),Fw.on(`${Mw.z.MESSAGE}:${this.channel}`,this.onMessage),Fw.on(`${Mw.z.SUBSCRIBE}:${this.channel}`,this.onSubscribe)},onMessage({message:i}){const s=this.battle.updatedAt===i.previousUpdatedAt;this.state!==ak&&this.messageQueue.push(i),this.state!==ak||s?s&&(this.applyPatch(i.patch),this.updateBattle()):this.reload()},async onSubscribe(){const i=await fetchBattle(this.battle.id);i.updatedAt!==this.battle.updatedAt&&isNewerThan(i.updatedAt,this.battle.updatedAt)&&(this.battle=i),this.flushMessageQueue()?(this.updateBattle(),this.state===rk&&(this.state=ak,this.onReady())):this.reload()},flushMessageQueue(){if(0===this.messageQueue.length)return!0;const i=this.messageQueue.find((i=>!(i.previousUpdatedAt===this.battle.updatedAt||!isNewerThan(i.previousUpdatedAt,this.battle.updatedAt))||(i.previousUpdatedAt===this.battle.updatedAt&&this.applyPatch(i.patch),!1)));return this.messageQueue.length=0,!i},async reload(){if(this.state===ik)return;this.state=ik;const i=await fetchBattle(this.battle.id);this.flushMessageQueue(),i.updatedAt!==this.battle.updatedAt&&isNewerThan(i.updatedAt,this.battle.updatedAt)&&(this.battle=i,this.updateBattle())},applyPatch(i){delete this.battle.timer;try{applyPatch(this.battle,i)}catch(s){console.error(s),this.reload()}},updateBattle(){try{this.onUpdate((0,Tv.Z)(this.battle))}catch(i){console.error(i)}},close(){Fw.off(`${Mw.z.MESSAGE}:${this.channel}`,this.onMessage),Fw.off(`${Mw.z.SUBSCRIBE}:${this.channel}`,this.onSubscribe),this.subscription&&this.subscription.close()}}),createBattleClient=i=>jw.createBoundObject({battleId:i,channel:null,subscription:null,hasSubscribed:!1,diffChannelClient:null,state:Ze,init(i){this.channel=isPlayer(i,uw.userUuid)&&!canObserve(i,uw.userUuid)?((i,s=!1)=>`battle${s?"/diff":""}/games/${i}/players`)(this.battleId,(0,rr.FR)("puzzle_battle_pubsub_diff_channels")):((i,s=!1)=>`battle${s?"/diff":""}/games/${i}/observers`)(this.battleId,(0,rr.FR)("puzzle_battle_pubsub_diff_channels")),(0,rr.FR)("puzzle_battle_pubsub_diff_channels")?(this.diffChannelClient=createDiffChannelClient(),this.diffChannelClient.init({battle:i,channel:this.channel,onUpdate:this.onBattleUpdate,onReady:this.onDiffClientReady})):(this.subscription=Fw.subscribe(this.channel),Fw.on(`${Mw.z.MESSAGE}:${this.channel}`,this.onBattleMessage),Fw.on(`${Mw.z.SUBSCRIBE}:${this.channel}`,this.onSubscribe)),this.onBattleMessage({message:i}),(i=>cw.get(config_routes_getBattlePuzzles(i,getUserUuid())))(this.battleId).then((i=>{uw.battle&&(uw.battle.puzzles=i.data.puzzles,this.onPuzzlesLoaded())}))},onBattleMessage({message:i}){try{this.onBattleUpdate(i)}catch(s){console.error(s)}},onBattleUpdate(i){this.state===We&&isBattleTimedOut(i)?(i=>{iw.emit(he,i)})(i.id):(this.updateState(i),this.state===We&&isBattleConfirmed(i)&&(this.state=Ke,(i=>{emitEvent(i,{name:ue})})(uw.battle)),this.state===Ke&&isBattlePlayingOrFinished(i)&&this.run())},clientReady(){isBattlePlayingOrFinished(uw.battle)?this.run():(i=>Boolean(i)&&i.state===$e)(uw.battle)?this.state=We:isBattleConfirmed(uw.battle)&&(this.state=Ke),isPlayer(uw.battle,uw.userUuid)&&getPlayer(uw.battle,uw.userUuid).state===Ne.CONFIRMING&&(((i,s)=>{cw.put(config_routes_updatePlayerState(i,s),{state:Ne.CONFIRMED})})(this.battleId,uw.userUuid),(i=>{iw.emit(de,i.id)})(this.battleId))},onPuzzlesLoaded(){this.state===Ze&&(this.hasSubscribed||isBattleFinished(uw.battle))&&this.clientReady()},onSubscribe(){this.state===Ze&&fetchBattle(this.battleId).then((i=>{this.hasSubscribed=!0,this.onBattleUpdate(i),this.onSubscribedAndFetched()}))},onSubscribedAndFetched(){this.state===Ze&&uw.battle.puzzles&&uw.battle.puzzles.length>0&&this.clientReady()},onDiffClientReady(){this.hasSubscribed=!0,this.onSubscribedAndFetched()},run(){this.state=Ye,(i=>{emitEvent(i,{name:pe})})(uw.battle)},updateState(i){uw.battle||(uw.battle={}),this.state===Ye?((i,s)=>{mergeBattle(i,s).forEach((i=>{emitEvent(uw.battle,i)}))})(uw.battle,i):mergeBattle(uw.battle,i)},close(){uw.battle&&uw.battle.id===this.battleId&&(uw.battle=null),Fw.off(`${Mw.z.MESSAGE}:${this.channel}`,this.onBattleMessage),Fw.off(`${Mw.z.SUBSCRIBE}:${this.channel}`,this.onSubscribe),this.subscription&&(this.subscription.close(),uw.battle=null),this.diffChannelClient&&this.diffChannelClient.close()}}),sk=jw.createClient({battleClient:null,currentBattleId:null,subscription:null,connectionQualityListener:null,async init(){Fw.isAttached()?this.subscribe():Fw.on(`${Mw.z.CONNECT}`,this.subscribe),Fw.on(`${Mw.z.MESSAGE}:${getUserChannel()}`,this.onBattleMessage),iw.on(ye,this.openBattle),iw.on(_e,this.closeBattle),iw.on(he,this.onBattleTimedOut),iw.on(Te,this.onCreateSeek),iw.on(Se,this.onCancelSeek),uw.userUuid&&(Hw.init(),Vw.init());const i=await findOngoingBattle();i&&this.openBattle(i),this.connectionQualityListener=Fw.client.addQualityListener((i=>{iw.emit(ve,i)}))},subscribe(){uw.userUuid&&(this.subscription=Fw.subscribe(getUserChannel()))},onBattleMessage({message:i}){try{this.openBattle(i)}catch(s){console.error(s)}},closeBattle(i){this.currentBattleId===i&&(this.battleClient.close(),this.battleClient=null,this.currentBattleId=null)},onBattleTimedOut(i){this.closeBattle(i)},openBattle(i){const s=getBattleId(i);this.currentBattleId&&this.currentBattleId!==s&&this.closeBattle(this.currentBattleId),this.battleClient||(this.currentBattleId=s,this.battleClient=createBattleClient(s),this.battleClient.init(i)),clearTimeout(uw.seekTimeout)},onCreateSeek(){uw.seekTimeout=setTimeout((()=>this.recreateSeek()),qw)},onCancelSeek(){this.currentBattleId&&this.closeBattle(this.currentBattleId),clearTimeout(uw.seekTimeout)},recreateSeek:async()=>(await service_cancelSeek({timeControl:te}),createSeekOrOpenOngoingBattle()),close(){iw.off(ye,this.openBattle),iw.off(_e,this.closeBattle),iw.off(he,this.onBattleTimedOut),iw.off(Te,this.onCreateSeek),iw.off(Se,this.onCancelSeek),this.onCancelSeek(),Fw.off(`${Mw.z.MESSAGE}:${getUserChannel()}`,this.onBattleMessage),this.subscription&&this.subscription.close(),this.currentBattleId&&this.closeBattle(this.currentBattleId),Hw.close(),Vw.close(),this.connectionQualityListener.close()}}),destroyBattlesClient=({rootState:i})=>{iw.off(ue,client_event_actions_battleCreated),iw.off(de,battleConfirmed),iw.off(pe,loadBattle),iw.off(fe,loadNextPuzzle),iw.off(ge,playerFinished),iw.off(me,observedPlayerMove),iw.off(ve,updateConnectionQuality),iw.off(be,updatePlayerResult),iw.off(we,updateChallenge),iw.off(he,client_event_actions_battleTimedOut),iw.off(ke,client_event_actions_claimWinPossible),iw.off(Ce,client_event_actions_acceptChallenge),iw.off(xe,client_event_actions_declineChallenge),iw.off(Ee,client_event_actions_observeBattle),iw.off(Ae,unfollowedUser),iw.off(ce,client_event_actions_battleAborted),window.removeEventListener("unload",cancelSeekOnUnload),cancelSeek({timeControl:millisecondsToSeconds(i.puzzles.timeConstraints.battle)}),sk.close()};window.chesscom=Object.assign(window.chesscom||{},{isLongDelay:!1});const toggleNavDropdownDelay=(i=!window.chesscom.isLongDelay)=>{window.chesscom.isLongDelay=i},endSession=({commit:i,dispatch:s,getters:_,rootState:T,state:S},C)=>{S.hasTwoBoards||i("clearObservedPlayerUuid");const P=C?_.gameStore[C]:"game";s(`${C?_.boardStore[C]:"board"}/updateOption`,{option:"enabled",value:Boolean(S.analysisBoard&&S.analysisBoard.gameNamespace===P)},{root:!0}),_n.SEEKING!==T.puzzles.gameplayState&&setTimeout((()=>{O.Z.emit(ne)})),toggleNavDropdownDelay(!1)},enterAnalysisBoard=({commit:i,dispatch:s},{boardNamespace:_,gameNamespace:T,puzzle:S})=>{i("setAnalysisBoard",{boardNamespace:_,gameNamespace:T,puzzle:S}),s(`${T}/changeSettings`,{analysis:!0,variations:!0},{root:!0}),i(`${_}/setOptions`,{overlayInAnalysisMode:!0,enabled:!0},{root:!0}),s(`${_}/updateOption`,{option:"enabled",value:!0},{root:!0})},exitAnalysisBoard=({commit:i,dispatch:s,getters:_,state:T},{boardNamespace:S,gameNamespace:C})=>{T.hasTwoBoards||O.Z.emit(ne),i("setAnalysisBoard",null),s(`${C}/changeSettings`,{analysis:!1},{root:!0}),i(`${S}/setOptions`,{overlayInAnalysisMode:!1},{root:!0}),s(`${S}/updateOption`,{option:"enabled",value:!1},{root:!0});const P=Object.keys(_.boardStore).find((i=>_.boardStore[i]===S));s("initializePuzzle",{puzzle:T.puzzle[P],uuid:P})},findNewBattle=async({commit:i,dispatch:s,rootState:_,state:T})=>{T.hasTwoBoards&&(s("resetToStartView"),i("clearBattle")),s("cancelChallenge"),s("declineRematch"),s("cancelRematch"),i("puzzles/setGameplayState",_n.SEEKING,{root:!0}),i("setPlayDuration",millisecondsToSeconds(_.puzzles.timeConstraints.battle)),O.Z.emit(se);try{await createSeekOrOpenOngoingBattle()}catch(S){isLimitReachedError(S)&&s("puzzles/limitReached",{limit:vn.BATTLE},{root:!0})}},follow_user_followUser=({commit:i,getters:s,state:_},{id:T,username:S})=>{var C;s.isObserving&&s.playerUuids.includes(T)&&_.observedPlayerUuid!==T&&(closeBattle(_.battle.id),openBattle(_.battle.id)),i("setFollowingUser",{id:T,username:S}),C=T,iw.emit(Oe,C),kr.Z.set(rt,{id:T,username:S})},getLeaderboard=({commit:i,state:s,getters:_,rootGetters:T})=>{const{scoreTypeFilter:S,timeRangeFilter:C,userRangeFilter:P}=s,O=Sn[T["puzzles/timeConstraint"]];if(!0!==_.currentLeaderboard.empty)return;return(0,{[At.FRIENDS]:service_getFriendsLeaderboard,[At.GLOBAL]:service_getGlobalLeaderboard}[P])({type:C[S],scoreType:S}).then((({data:s})=>{i("setLeaderboard",{data:s,durationCode:O})}))},getBattleInfo=({commit:i},s)=>{return(_={id:s},ca.Z.get(config_routes_getBattleViewInfo(_))).then((({data:s})=>{i("setBattle",s);for(const _ in s.players)i("setPlayerInfo",s.players[_])}));var _},get_user_info_getUserInfo=({commit:i})=>{ca.Z.get(config_routes_getUserInfo()).then((({data:s})=>{i("setUserInfo",s)}))},get_observable_games_getObservableGames=({commit:i})=>ca.Z.get(config_routes_getObservableGameList()).then((({data:s})=>{i("setObservableGameList",s.battles)})),showMessage=(i,s)=>{(0,Gi.el)({type:Vi.V5.info,message:s})},handleAbort=({state:i})=>{var s;i.battle.id&&(s=i.battle.id,ca.Z.post(config_routes_abortBattle(s)))},handleConsoleInput=async(i,s="")=>{const _=s.split(" "),T=_.shift();switch(T){case"/match":(({dispatch:i},s,_)=>{i("createMatch",{username1:s,username2:_})})(i,..._);break;case"/follow":(async({dispatch:i,state:s},_)=>{if(!_)return void(s.followingUser?showMessage(0,`You are following: ${s.followingUser.username}`):showMessage(0,"You aren't following anyone"));let T;try{T=await Do.Z.getUser(_)}catch(S){return void showMessage(0,`User not found: ${_}`)}i("followUser",{username:_,id:T.data.uuid}),showMessage(0,`You are now following ${_}`)})(i,..._);break;case"/unfollow":(({dispatch:i,state:s})=>{s.followingUser?(showMessage(0,`You are no longer following ${s.followingUser.username}`),i("unfollowUser",s.followingUser)):showMessage(0,"You aren't following anyone")})(i,..._);break;case"/abort":handleAbort(i,..._);break;default:showMessage(i.dispatch,`Unknown command: ${T}`)}},initBattlesClient=()=>{sk.init(),iw.on(ue,client_event_actions_battleCreated),iw.on(de,battleConfirmed),iw.on(pe,loadBattle),iw.on(fe,loadNextPuzzle),iw.on(ge,playerFinished),iw.on(me,observedPlayerMove),iw.on(ve,updateConnectionQuality),iw.on(be,updatePlayerResult),iw.on(we,updateChallenge),iw.on(he,client_event_actions_battleTimedOut),iw.on(ke,client_event_actions_claimWinPossible),iw.on(Ce,client_event_actions_acceptChallenge),iw.on(xe,client_event_actions_declineChallenge),iw.on(Ee,client_event_actions_observeBattle),iw.on(Ae,unfollowedUser),iw.on(ce,client_event_actions_battleAborted),window.addEventListener("unload",cancelSeekOnUnload)},getSolvedOrFailed=({state:i})=>i===Xe||i!==Qe&&null;var ok=Object.defineProperty,lk=Object.defineProperties,ck=Object.getOwnPropertyDescriptors,uk=Object.getOwnPropertySymbols,dk=Object.prototype.hasOwnProperty,hk=Object.prototype.propertyIsEnumerable,format_and_sort_results_defNormalProp=(i,s,_)=>s in i?ok(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,format_and_sort_results_spreadValues=(i,s)=>{for(var _ in s||(s={}))dk.call(s,_)&&format_and_sort_results_defNormalProp(i,_,s[_]);if(uk)for(var _ of uk(s))hk.call(s,_)&&format_and_sort_results_defNormalProp(i,_,s[_]);return i};const formatAndSortResults=({battle:i,puzzles:s})=>{const _=[],T=[];return s.forEach(((s,S)=>{if(s.state===Je)return;const C=((i,s)=>lk(i,ck(s)))(format_and_sort_results_spreadValues(format_and_sort_results_spreadValues({},s),getPuzzlePopoverDetails({battle:i,puzzleIndex:S})),{index:S,solved:getSolvedOrFailed(s)});s.state===Qe&&T.push(C),_.push(C)})),{results:_,strikes:T}},formatRankingResult=({newRanking:i,ranking:s,verdict:_})=>({initialPoints:s.points,initialRating:s.rating,pointsDelta:i.points-s.points,ratingDelta:i.rating-s.rating,streak:i.streak,verdict:_}),initializeRoundState=({commit:i,dispatch:s,getters:_,state:T},{players:S})=>{for(const C in S){const{currentPuzzle:P,puzzles:M,result:R}=S[C];R&&i("setRankingResult",{result:formatRankingResult(R),uuid:C}),i("setPuzzle",{uuid:C,puzzle:P});const{results:D,strikes:j}=formatAndSortResults({battle:T.battle,puzzles:M});i("setRoundResults",{uuid:C,results:D}),i("setStrikes",{uuid:C,strikes:j});const{analysisBoard:$,hasTwoBoards:U}=T,{primaryPlayerUuid:V,primaryPlayerStruckOut:Z,isGameOver:Y}=_;(!U&&Z||Y)&&setTimeout((()=>{O.Z.emit(ne)})),$&&$.gameNamespace===_.gameStore[C]||V!==C&&!U||s("initializePuzzle",{puzzle:P,uuid:C})}},initializePuzzle=({dispatch:i,getters:s},{isFirstPuzzle:_,puzzle:T,uuid:S})=>{const{colorOfUser:C,firstMove:P,initialFen:O,playedMoves:M}=T,R=s.gameStore[S],D=s.boardStore[S];i(`${D}/updateOption`,{option:"enabled",value:!s.isObserving},{root:!0}),i(`${R}/init`,{fen:O,tcn:M?P+M:""},{root:!0});const j=sm.lB[C.toUpperCase()];i(`${R}/setPlayingAs`,j,{root:!0}),i("puzzles/setBoardPosition",{boardStore:D,colorAsInteger:j},{root:!0}),M||setTimeout((()=>{i("puzzles/makeComputerMove",{boardStore:D,gameStore:R,isFirstMove:!0,move:P},{root:!0})}),_?Xn.SERVER_COUNTDOWN:0)};var pk={name:"BoardOverlayText",components:{ModalChessboardContainer:bi,ModalContent:yi.Z},data:()=>({easeTransition:!0,text:""}),methods:{hide(){this.$refs.modal.hide()},show(){this.$refs.modal.show()}}},mk={content:"board-overlay-text-content"};var fk=(0,Rr.Z)(pk,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("modal-chessboard-container",{ref:"modal",attrs:{"close-on-background-click":!1,"ease-transition":i.easeTransition}},[_("modal-content",{class:i.$style.content,domProps:{textContent:i._s(i.text)}})],1)}),[],!1,(function board_overlay_text_injectStyles(i){this.$style=mk.locals||mk}),null,null),gk=fk.exports;const vk={MODAL_COUNTDOWN:"puzzle-modal-countdown",MODAL_COUNTDOWN_2:"puzzle-modal-countdown-2"},bk=(0,ir.Z)({[vk.MODAL_COUNTDOWN]:{component:gk,el:`#${vk.MODAL_COUNTDOWN}`,store:st.default},[vk.MODAL_COUNTDOWN_2]:{component:gk,el:`#${vk.MODAL_COUNTDOWN_2}`,store:st.default}}),showModal=(i,s=0)=>{const _=mountBoardModal({identifier:i,lazyVueLoader:bk,$element:(0,nr.f)(s)});_.easeTransition=!1,_.show(),(i=>{const s=["3","2","1",Jn.go];return playSoundEffect(xt.COUNTDOWN),s.map((s=>()=>new Promise((_=>{i.text=s,setTimeout(_,Xn.START_COUNTDOWN_DECREMENT)})))).reduce(((i,s)=>i.then(s)),Promise.resolve())})(_).then((()=>{_.easeTransition=!0,_.hide()}))},showModalCountdown=()=>{document.body.classList.contains("double-board")?Object.values(vk).forEach(showModal):showModal(vk.MODAL_COUNTDOWN)};var yk={name:"ModalGameOverHeader",components:{IconFont:Mr.Z},props:{showClose:{type:Boolean,default:!0},subtitle:{type:String},theme:{type:String,required:!0},title:{type:String,required:!0}},emits:["close"],data:()=>({showTitles:!1}),methods:{animate(){this.showTitles=!0}}},_k={component:"modal-game-over-header-component",large:"modal-game-over-header-large",green:"modal-game-over-header-green",grey:"modal-game-over-header-grey",title:"modal-game-over-header-title","show-title":"modal-game-over-header-show-title",subtitle:"modal-game-over-header-subtitle","show-subtitle":"modal-game-over-header-show-subtitle",icon:"modal-game-over-header-icon"};var wk=(0,Rr.Z)(yk,(function(){var i,s,_,T=this,S=T.$createElement,C=T._self._c||S;return C("div",{class:[T.$style.component,T.$style[T.theme],(i={},i[T.$style.large]=!T.subtitle,i)]},[C("div",{class:[T.$style.title,(s={},s[T.$style["show-title"]]=T.showTitles,s)],domProps:{textContent:T._s(T.title)}}),T._v(" "),T.subtitle?C("div",{class:[T.$style.subtitle,(_={},_[T.$style["show-subtitle"]]=T.showTitles,_)],domProps:{textContent:T._s(T.subtitle)}}):T._e(),T._v(" "),T.showClose?C("icon-font",{class:T.$style.icon,attrs:{name:"x"},on:{click:function(i){return T.$emit("close")}}}):T._e()],1)}),[],!1,(function modal_game_over_header_injectStyles(i){this.$style=_k.locals||_k}),null,null),kk=wk.exports,Tk={props:{playerBlack:{type:Object,required:!0},playerWhite:{type:Object,required:!0},score:{type:String},showPoints:{type:Boolean,default:!1}}},Sk={name:"ModalGameOverUser",components:{Avatar:Zv,IconFont:Mr.Z},directives:{UserPopover:eu},props:{avatarUrl:{type:String,required:!0},isDraw:{type:Boolean,default:!1},isWinner:{type:Boolean,default:!1},points:{type:String},showPoints:{type:Boolean,default:!1},showUserPopover:{type:Boolean,default:!0},username:{type:String,required:!0},userPopover:{type:Object}},data:()=>({showWinner:!1}),computed:{userPopoverProps(){return this.showUserPopover?this.userPopover||this.username:null}},methods:{animate(){this.isWinner&&(this.showWinner=!0)}}},Ck={component:"modal-game-over-user-component","avatar-container":"modal-game-over-user-avatar-container",avatar:"modal-game-over-user-avatar",draw:"modal-game-over-user-draw",winner:"modal-game-over-user-winner","winner-active":"modal-game-over-user-winner-active",crown:"modal-game-over-user-crown","crown-active":"modal-game-over-user-crown-active",icon:"modal-game-over-user-icon",username:"modal-game-over-user-username",points:"modal-game-over-user-points",dots:"modal-game-over-user-dots"};var xk=(0,Rr.Z)(Sk,(function(){var i,s,_=this,T=_.$createElement,S=_._self._c||T;return S("div",{class:_.$style.component},[S("div",{class:_.$style["avatar-container"]},[S("div",{class:[_.$style.avatar,(i={},i[_.$style.draw]=_.isDraw,i[_.$style.winner]=_.isWinner,i[_.$style["winner-active"]]=_.isWinner&&_.showWinner,i)]},[S("avatar",{directives:[{name:"user-popover",rawName:"v-user-popover",value:_.userPopoverProps,expression:"userPopoverProps"}],attrs:{alt:_.username,src:_.avatarUrl}}),_._v(" "),_.isWinner?S("div",{class:[_.$style.crown,(s={},s[_.$style["crown-active"]]=_.showWinner,s)]},[S("icon-font",{class:_.$style.icon,attrs:{name:"chess-crown-alt"}})],1):_._e()],1)]),_._v(" "),S("div",{directives:[{name:"user-popover",rawName:"v-user-popover",value:_.userPopoverProps,expression:"userPopoverProps"}],class:_.$style.username,domProps:{textContent:_._s(_.username)}}),_._v(" "),_.showPoints?[_.points?S("div",{class:_.$style.points,domProps:{textContent:_._s(_.points)}}):S("icon-font",{class:_.$style.dots,attrs:{name:"circle-3-dots"}})]:_._e()],2)}),[],!1,(function modal_game_over_user_injectStyles(i){this.$style=Ck.locals||Ck}),null,null),Ek=xk.exports,Pk={name:"ModalGameOverUsers",components:{IconFont:Mr.Z,ModalGameOverUser:Ek},mixins:[Tk],methods:{animate(){this.$refs.playerWhite&&this.$refs.playerBlack&&(this.$refs.playerWhite.animate(),this.$refs.playerBlack.animate())}}},Ak={component:"modal-game-over-users-component",player:"modal-game-over-users-player",score:"modal-game-over-users-score",dots:"modal-game-over-users-dots"};var Ok=(0,Rr.Z)(Pk,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("modal-game-over-user",i._b({ref:"playerWhite",class:i.$style.player,attrs:{"avatar-url":i.playerWhite.avatarUrl||"","is-draw":i.playerBlack.isDraw,"is-winner":i.playerWhite.isWinner,points:i.playerWhite.points,"show-points":i.showPoints,username:i.playerWhite.username,"user-popover":i.playerWhite.userPopover}},"modal-game-over-user",i.$attrs,!1)),i._v(" "),i.score?_("p",{class:i.$style.score,domProps:{innerHTML:i._s(i.score)}}):_("icon-font",{class:[i.$style.dots,i.$style.score],attrs:{name:"circle-3-dots"}}),i._v(" "),_("modal-game-over-user",i._b({ref:"playerBlack",class:i.$style.player,attrs:{"avatar-url":i.playerBlack.avatarUrl||"","is-draw":i.playerBlack.isDraw,"is-winner":i.playerBlack.isWinner,points:i.playerBlack.points,"show-points":i.showPoints,username:i.playerBlack.username,"user-popover":i.playerBlack.userPopover}},"modal-game-over-user",i.$attrs,!1))],1)}),[],!1,(function modal_game_over_users_injectStyles(i){this.$style=Ak.locals||Ak}),null,null),Mk=Ok.exports;const zk="green",Ik="grey",Lk={acceptFriendRequest:(0,j.dW)("Accept Friend Request"),addFriend:(0,j.dW)("Add Friend"),blackWon:(0,j.dW)("Black Won"),byAgreement:(0,j.dW)("%gameOutcome% by agreement",{"%gameOutcome%":""}),byCheckmate:(0,j.dW)("%gameOutcome% by checkmate",{"%gameOutcome%":""}),byResignation:(0,j.dW)("%gameOutcome% by resignation",{"%gameOutcome%":""}),cancelFriendRequest:(0,j.dW)("Cancel Friend Request"),draw:(0,j.dW)("Draw"),gameOver:(0,j.dW)("Game Over"),insufficientMaterial:(0,j.dW)("%gameOutcome% insufficient material",{"%gameOutcome%":""}),removeFriend:(0,j.dW)("Remove Friend"),youWon:(0,j.dW)("You Won!"),waiting:(0,j.dW)("Waiting..."),whiteWon:(0,j.dW)("White Won")},Rk="abandoned",Nk="aborted",Dk="adjudicated",jk="agreed",Bk="bughousepartnerlose",$k="checkmated",Uk="doubleforfeit",Fk="50move",Hk="insufficient",qk="kingofthehill",Vk="repetition",Gk="resigned",Zk="stalemate",Wk="threecheck",Kk="timeout",Yk="timevsinsufficient";(0,j.dW)("You won by checkmate."),(0,j.dW)("You won by resignation."),(0,j.dW)("You won on time."),(0,j.dW)("You lost by checkmate."),(0,j.dW)("You lost by resignation."),(0,j.dW)("You lost on time."),(0,j.dW)("Your partner won by checkmate."),(0,j.dW)("Your partner won by resignation."),(0,j.dW)("Your partner won on time."),(0,j.dW)("Your partner lost by checkmate."),(0,j.dW)("Your partner lost by resignation."),(0,j.dW)("Your partner lost on time."),(0,j.dW)("Your partner and their opponent agreed to a draw."),(0,j.dW)("Your partner drew by threefold repetition."),(0,j.dW)("game abandoned"),(0,j.dW)("game aborted"),(0,j.dW)("by adjudication"),(0,j.dW)("by agreement"),(0,j.dW)("with their bughouse partner"),(0,j.dW)("by checkmate"),(0,j.dW)("Double forfeit"),(0,j.dW)("by 50-move rule"),(0,j.dW)("by insufficient material"),(0,j.dW)("by the king reaching the hill"),(0,j.dW)("by repetition"),(0,j.dW)("by resignation"),(0,j.dW)("by stalemate"),(0,j.dW)("by checking the opponent king for the 3rd time"),(0,j.dW)("on time"),(0,j.dW)("by timeout vs insufficient material");(0,j.dW)("%winner% won - game abandoned"),(0,j.dW)("Game aborted"),(0,j.dW)("Game drawn by agreement"),(0,j.dW)("with their bughouse partner"),(0,j.dW)("%winner% won by checkmate"),(0,j.dW)("Double forfeit"),(0,j.dW)("Game drawn by 50-move rule"),(0,j.dW)("Game drawn - insufficient material"),(0,j.dW)("%winner% got their king to the middle"),(0,j.dW)("Game drawn by repetition"),(0,j.dW)("%winner% won by resignation"),(0,j.dW)("Game drawn by stalemate"),(0,j.dW)("%winner% gave three checks"),(0,j.dW)("%winner% won on time"),(0,j.dW)("Game drawn - timeout vs insufficient material");const Xk="&frac12;-&frac12;",Qk="1-0",Jk="0-1";ht.Z.trans("Standard"),ht.Z.trans("Normal rules of chess."),ht.Z.trans("Chess960"),ht.Z.trans("Normal rules, but starting position is random."),ht.Z.trans("Book Opening"),ht.Z.trans("Custom FEN"),ht.Z.trans("3 Check"),ht.Z.trans("First to check the other king 3 times wins."),ht.Z.trans("King of the Hill"),ht.Z.trans("First to get king to middle 4 squares wins."),ht.Z.trans("Crazyhouse"),ht.Z.trans("When you capture a piece, you can drop it on your turn!"),ht.Z.trans("Bughouse"),ht.Z.trans("Team up with another player and you can drop the pieces that they capture.");var eT=Object.defineProperty,tT=Object.defineProperties,nT=Object.getOwnPropertyDescriptors,rT=Object.getOwnPropertySymbols,iT=Object.prototype.hasOwnProperty,aT=Object.prototype.propertyIsEnumerable,get_battle_over_info_defNormalProp=(i,s,_)=>s in i?eT(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_;const getBattleOverInfo=({hasTwoBoards:i,isAborted:s,isConnected:_,isDraw:T,isWaiting:S,playerWon:C})=>{const P=(({isDraw:i,isWaiting:s,playerWon:_})=>s?{theme:Ik,title:Lk.waiting,result:""}:i?{theme:Ik,title:Lk.draw,result:Xk}:_?{theme:zk,title:Lk.youWon,result:Qk}:{theme:Ik,title:Lk.gameOver,result:Jk})({isDraw:T,isWaiting:S,playerWon:C});return s?{theme:Ik,title:nt.ABORTED,result:""}:i||!_?((i,s)=>tT(i,nT(s)))(((i,s)=>{for(var _ in s||(s={}))iT.call(s,_)&&get_battle_over_info_defNormalProp(i,_,s[_]);if(rT)for(var _ of rT(s))aT.call(s,_)&&get_battle_over_info_defNormalProp(i,_,s[_]);return i})({},P),{theme:_?zk:Ik,title:nt.BATTLE_OVER}):P};var sT={name:"BattleFire",props:{streak:{type:Number,required:!0}},data:()=>({animated:!1}),methods:{animate(){this.animated=!0}}},oT={component:"battle-fire-component",animated:"battle-fire-animated",icon:"battle-fire-icon",increase:"battle-fire-increase"};var lT=(0,Rr.Z)(sT,(function(){var i,s=this,_=s.$createElement,T=s._self._c||_;return T("div",{class:[s.$style.component,(i={},i[s.$style.animated]=s.animated,i)]},[T("div",{staticClass:"icon-font-chess fire-alt",class:s.$style.icon}),s._v(" "),T("div",{class:s.$style.increase,domProps:{textContent:s._s("x"+s.streak)}})])}),[],!1,(function battle_fire_injectStyles(i){this.$style=oT.locals||oT}),null,null),cT=lT.exports;function signedNumber(i){if("number"==typeof i&&isNaN(i))return"0";return`${parseFloat(i.toString())>=0?"+":""}${i}`}var uT={name:"UserRatingAnimated",components:{AnimatedNumber:og},props:{classes:{type:Object,default:()=>({})},formatLanguage:{type:String},initialRating:{type:Number,required:!0},ratingAnimationDelay:{type:Number,default:_s.Eq},ratingAnimationDuration:{type:Number,default:_s.iq},ratingDelta:{type:Number,default:0}},data:()=>({showDelta:!1}),computed:{signedDelta(){return signedNumber(this.ratingDelta)}},methods:{animate(){this.showDelta=!0,setTimeout(this.$refs.rating.animate,this.ratingAnimationDelay)}}},dT={component:"user-rating-animated-component",rating:"user-rating-animated-rating",delta:"user-rating-animated-delta",green:"user-rating-animated-green",red:"user-rating-animated-red",animate:"user-rating-animated-animate"};var hT=(0,Rr.Z)(uT,(function(){var i,s=this,_=s.$createElement,T=s._self._c||_;return T("div",{class:s.$style.component},[T("animated-number",{ref:"rating",class:[s.$style.rating,s.classes.rating],attrs:{delay:null,duration:s.ratingAnimationDuration,"format-language":s.formatLanguage,from:s.initialRating,to:s.initialRating+s.ratingDelta}}),s._v(" "),T("div",{class:[s.$style.delta,(i={},i[s.$style.green]=s.ratingDelta>0,i[s.$style.red]=s.ratingDelta<0,i[s.$style.animate]=s.showDelta,i),s.classes.delta],domProps:{textContent:s._s(s.signedDelta)}})],1)}),[],!1,(function user_rating_animated_injectStyles(i){this.$style=dT.locals||dT}),null,null),pT=hT.exports,mT={name:"ModalGameOverRating",components:{UserRatingAnimated:pT},props:{formatLanguage:{type:String},initialRating:{type:Number,required:!0},ratingDelta:{type:Number,required:!0},size:{type:String,default:"normal"}},methods:{animate(){this.$refs.rating&&this.$refs.rating.animate()}}},fT={component:"modal-game-over-rating-component",rating:"modal-game-over-rating-rating",normal:"modal-game-over-rating-normal",small:"modal-game-over-rating-small",delta:"modal-game-over-rating-delta"};var gT=(0,Rr.Z)(mT,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:[i.$style.component,i.$style[i.size]]},[_("user-rating-animated",{ref:"rating",attrs:{classes:{delta:i.$style.delta,rating:i.$style.rating},"format-language":i.formatLanguage,"initial-rating":i.initialRating,"rating-delta":i.ratingDelta}})],1)}),[],!1,(function modal_game_over_rating_injectStyles(i){this.$style=fT.locals||fT}),null,null),vT=gT.exports,bT={name:"PuzzleLabel"},yT={component:"label-component"};var _T=(0,Rr.Z)(bT,(function(){var i=this,s=i.$createElement;return(i._self._c||s)("div",{class:i.$style.component},[i._t("default")],2)}),[],!1,(function label_injectStyles(i){this.$style=yT.locals||yT}),null,null).exports,wT={name:"BattleOverRatingDetails",components:{ModalGameOverRating:vT,PuzzleLabel:_T},props:{formatLanguage:{type:String},hasTwoBoards:{type:Boolean,default:!1},primaryPlayerResult:{type:Object,required:!0},opponentResult:{type:Object},showPoints:{type:Boolean,default:!1}},data:()=>({animated:!1,animateTimeout:null}),beforeDestroy(){clearTimeout(this.animateTimeout)},methods:{animate(){this.animated=!0,this.animateTimeout=setTimeout((()=>{Object.keys(this.$refs).forEach((i=>{this.$refs[i].animate()}))}),800)},formattedRatingText:({initialRating:i,ratingDelta:s})=>`${i+s} (${signedNumber(s)})`}},kT={component:"battle-over-rating-details-component",label:"battle-over-rating-details-label",animated:"battle-over-rating-details-animated",grow:"battle-over-rating-details-grow",rating:"battle-over-rating-details-rating"};var TT=(0,Rr.Z)(wT,(function(){var i,s=this,_=s.$createElement,T=s._self._c||_;return T("div",{class:[s.$style.component,(i={},i[s.$style.animated]=s.animated,i)]},[T("div",{class:s.$style.grow},[s.showPoints?T("puzzle-label",{class:s.$style.label,domProps:{textContent:s._s(s.$trans("Season Points"))}}):s._e(),s._v(" "),s.showPoints?T("modal-game-over-rating",{ref:"seasonPoints",class:s.$style.rating,attrs:{"format-language":s.formatLanguage,"initial-rating":s.primaryPlayerResult.initialPoints,"rating-delta":s.primaryPlayerResult.pointsDelta}}):s._e(),s._v(" "),T("puzzle-label",{class:s.$style.label},[s.hasTwoBoards?s._e():T("span",{domProps:{textContent:s._s(s.$trans("New Rating"))}}),s._v("\n\n      "+s._s(s.formattedRatingText({initialRating:s.primaryPlayerResult.initialRating,ratingDelta:s.primaryPlayerResult.ratingDelta}))+"\n    ")])],1),s._v(" "),s.hasTwoBoards&&s.opponentResult?T("div",{class:s.$style.grow},[s.showPoints?T("puzzle-label",{class:s.$style.label,domProps:{textContent:s._s(s.$trans("Season Points"))}}):s._e(),s._v(" "),s.showPoints?T("modal-game-over-rating",{ref:"seasonPoints2",class:s.$style.rating,attrs:{"format-language":s.formatLanguage,"initial-rating":s.opponentResult.initialPoints,"rating-delta":s.opponentResult.pointsDelta}}):s._e(),s._v(" "),T("puzzle-label",{class:s.$style.label,domProps:{textContent:s._s(s.formattedRatingText({initialRating:s.opponentResult.initialRating,ratingDelta:s.opponentResult.ratingDelta}))}})],1):s._e()])}),[],!1,(function battle_over_rating_details_injectStyles(i){this.$style=kT.locals||kT}),null,null),ST=TT.exports,CT=Object.defineProperty,xT=Object.defineProperties,ET=Object.getOwnPropertyDescriptors,PT=Object.getOwnPropertySymbols,AT=Object.prototype.hasOwnProperty,OT=Object.prototype.propertyIsEnumerable,battle_over_modalvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?CT(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,battle_over_modalvue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))AT.call(s,_)&&battle_over_modalvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(PT)for(var _ of PT(s))OT.call(s,_)&&battle_over_modalvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},battle_over_modalvue_type_script_lang_js_spreadProps=(i,s)=>xT(i,ET(s)),MT={name:"BattleOverModal",components:{BattleFire:cT,BattleOverRatingDetails:ST,ModalChessboardContainer:bi,ModalContent:yi.Z,ModalGameOverHeader:kk,ModalGameOverUsers:Mk,V5Button:Tr.V5Button},data(){return{hasDisconnected:!1,modalTransition:{enter:this.$style["modal-enter"],leave:this.$style["modal-leave"]},routes:getRoutes(),translations:Object.freeze(nt),showAd:getShowAd()}},computed:battle_over_modalvue_type_script_lang_js_spreadProps(battle_over_modalvue_type_script_lang_js_spreadValues(battle_over_modalvue_type_script_lang_js_spreadValues(battle_over_modalvue_type_script_lang_js_spreadValues({},(0,dr.mapGetters)("user",["hyphenatedLanguage"])),(0,dr.mapGetters)("puzzlesBattle",["hasAcceptedIncomingRematch","isConnected","incomingRematch","isBattleTypeStandard","isDraw","isGameOver","isWinning","opponentUuid","outgoingRematch","primaryPlayerUuid","score"])),(0,dr.mapState)({battle:({puzzlesBattle:i})=>i.battle,battleOverModalVisible:({puzzlesBattle:i})=>i.battleOverModalVisible,gameplayState:({puzzles:i})=>i.gameplayState,hasTwoBoards:({puzzlesBattle:i})=>i.hasTwoBoards,isLoggedIn:i=>i.user.isLoggedIn,isBasic:i=>i.user.isBasic,isGuest:i=>i.user.isGuest,pendingOutgoingRematch:({puzzlesBattle:i})=>i.pendingOutgoingRematch,playerInfo:({puzzlesBattle:i})=>i.playerInfo,rankingResult:({puzzlesBattle:i})=>i.rankingResult,roundResults:({puzzlesBattle:i})=>i.roundResults,followingUser:({puzzlesBattle:i})=>i.followingUser})),{streak(){return(({hasTwoBoards:i,opponentResult:s,primaryPlayerResult:_})=>i&&s&&_?_.streak||s.streak:_&&_.streak)({hasTwoBoards:this.hasTwoBoards,opponentResult:this.rankingResult[this.opponentUuid],primaryPlayerResult:this.rankingResult[this.primaryPlayerUuid]})},isWaiting(){return!this.isGameOver&&!this.rankingResult[this.primaryPlayerUuid]},isAborted(){return isBattleAborted(this.battle)},themeAndTitle(){return getBattleOverInfo({isAborted:this.isAborted,isConnected:this.isConnected,hasTwoBoards:this.hasTwoBoards,isDraw:this.isDraw,isWaiting:this.isWaiting,playerWon:this.isWinning})},blackResult(){return battle_over_modalvue_type_script_lang_js_spreadProps(battle_over_modalvue_type_script_lang_js_spreadValues({},this.playerResult(this.opponentUuid,this.primaryPlayerUuid)),{userPopover:this.getUserPopoverProps(this.opponentUuid)})},whiteResult(){return battle_over_modalvue_type_script_lang_js_spreadProps(battle_over_modalvue_type_script_lang_js_spreadValues({},this.playerResult(this.primaryPlayerUuid,this.opponentUuid)),{userPopover:this.getUserPopoverProps(this.primaryPlayerUuid)})}}),watch:{isWaiting(i){i||this.applyAnimations({isTransitioning:!0})},isConnected(i){i&&this.battleOverModalVisible&&this.applyAnimations({isTransitioning:!0}),i&&this.isGameOver&&(this.hasDisconnected=!0,this.getBattleInfo(this.battle.id).then((()=>{this.loadArchivedBattle()})))}},mounted(){O.Z.on(re,this.hideModal)},beforeDestroy(){O.Z.off(re,this.hideModal)},methods:battle_over_modalvue_type_script_lang_js_spreadProps(battle_over_modalvue_type_script_lang_js_spreadValues(battle_over_modalvue_type_script_lang_js_spreadValues({},(0,dr.mapMutations)("puzzlesBattle",["setBattleOverModalVisible"])),(0,dr.mapActions)("puzzlesBattle",["getBattleInfo","loadArchivedBattle","observePlayer","observeNextBattle","findNewBattle","resetToStartView","rematch","acceptRematch","cancelRematch","declineRematch","followUser","unfollowUser"])),{applyAnimations({isTransitioning:i}={}){const s=(({isTransitioning:i,isWaiting:s,playerWon:_})=>{const T=(({isTransitioning:i})=>{const s=i?0:600;return{lost:[{refs:["header","users","ratingDetails"],delay:s}],waiting:[{refs:["header"],delay:s}],won:[{refs:["header","users","ratingDetails"],delay:s},{refs:["battleFire"],delay:500}]}})({isTransitioning:i});return s?T.waiting:_?T.won:T.lost})({isTransitioning:i,isWaiting:this.isWaiting,playerWon:this.isWinning||this.hasTwoBoards});(({$refs:i,steps:s})=>{s.map((s=>()=>new Promise((_=>{setTimeout((()=>{s.refs.forEach((s=>{i[s]&&i[s].animate()})),_()}),s.delay)})))).reduce(((i,s)=>i.then(s)),Promise.resolve())})({$refs:this.$refs,steps:s})},hideModal(){this.battleOverModalVisible&&(this.hasDisconnected=!1,this.$refs.modal.hide(),B_.Z.unregister(),this.setBattleOverModalVisible(!1))},resetToStart(){this.hideModal(),this.resetToStartView()},nextBattle(){this.observeNextBattle(),this.hideModal()},newBattle(){this.hideModal(),this.gameplayState!==_n.SEEKING&&this.findNewBattle()},observeOpponent(){this.observePlayer(this.opponentUuid),this.hideModal()},playerResult(i,s){return(({isAborted:i,isGameOver:s,isPrimaryPlayer:_,playerInfo:T,score:S,uuid:C,uuid2:P})=>{if(!T[C]||!T[P])return;let O;const M=S[C]>S[P]&&!i;return s||_?O=`${S[C]}`:M&&(O=`${S[C]}`),{avatarUrl:T[C].avatarUrl,username:T[C].username,points:O,isWinner:M}})({isAborted:this.isAborted,isGameOver:this.isGameOver,isPrimaryPlayer:i===this.primaryPlayerUuid,score:this.score,playerInfo:this.playerInfo,uuid:i,uuid2:s})},showModal(){!this.isConnected&&this.isGameOver&&(this.hasDisconnected=!0),this.$refs.modal.show(),this.applyAnimations(),setTimeout((()=>{playSoundEffect(xt.OVER_OK)}),tt.BATTLE_OVER_SOUND_DELAY),B_.Z.register({keys:{Enter:()=>this.newBattle(),Escape:()=>this.hideModal()}}),this.setBattleOverModalVisible(!0)},getUserPopoverProps(i){if(!this.playerInfo[i])return null;const{username:s}=this.playerInfo[i];return createUserPopoverProps({id:i,username:s,followingUser:this.followingUser,followUser:this.followUser,unfollowUser:this.unfollowUser})}})},zT=MT,IT={"two-boards":"battle-over-modal-two-boards","with-ad":"battle-over-modal-with-ad","modal-enter":"battle-over-modal-modal-enter","modal-leave":"battle-over-modal-modal-leave",component:"battle-over-modal-component",close:"battle-over-modal-close",users:"battle-over-modal-users",bottom:"battle-over-modal-bottom",details:"battle-over-modal-details",register:"battle-over-modal-register",disconnected:"battle-over-modal-disconnected","rounded-green":"battle-over-modal-rounded-green","rounded-grey":"battle-over-modal-rounded-grey"};var LT=(0,Rr.Z)(zT,(function(){var i,s,_=this,T=_.$createElement,S=_._self._c||T;return _.playerInfo[_.primaryPlayerUuid]?S("modal-chessboard-container",{ref:"modal",class:(i={},i[_.$style["two-boards"]]=_.hasTwoBoards,i[_.$style["with-ad"]]=_.hasTwoBoards&&_.showAd,i),attrs:{transition:_.modalTransition,"close-on-background-click":!1}},[S("modal-content",{class:[_.$style.component,(s={},s[_.$style["rounded-green"]]="green"===_.themeAndTitle.theme,s[_.$style["rounded-grey"]]="grey"===_.themeAndTitle.theme,s)]},[S("div",{staticClass:"icon-font-chess x",class:_.$style.close,on:{click:_.hideModal}}),_._v(" "),S("modal-game-over-header",{ref:"header",attrs:{"show-close":!1,theme:_.themeAndTitle.theme,title:_.themeAndTitle.title,"is-v5":!0}}),_._v(" "),S("modal-game-over-users",{ref:"users",class:_.$style.users,attrs:{"player-black":_.blackResult,"player-white":_.whiteResult,score:_.themeAndTitle.result,"show-points":!_.isAborted}}),_._v(" "),S("div",{class:_.$style.bottom},[!_.isLoggedIn||_.isConnected&&!_.hasDisconnected?_._e():[S("div",{class:_.$style.disconnected},[S("h4",{domProps:{textContent:_._s(_.translations.DISCONNECTED)}}),_._v(" "),S("p",{domProps:{textContent:_._s(_.translations.DISCONNECTED_MESSAGE)}})])],_._v(" "),_.streak>1&&_.isBattleTypeStandard?S("battle-fire",{ref:"battleFire",attrs:{streak:_.streak}}):_._e(),_._v(" "),_.isWaiting||!_.rankingResult[_.primaryPlayerUuid]||_.isAborted?_._e():S("battle-over-rating-details",{ref:"ratingDetails",class:_.$style.details,attrs:{"format-language":_.hyphenatedLanguage,"has-two-boards":_.hasTwoBoards,"primary-player-result":_.rankingResult[_.primaryPlayerUuid],"opponent-result":_.rankingResult[_.opponentUuid],"show-points":_.isBattleTypeStandard}}),_._v(" "),_.isLoggedIn?_._e():S("v5-button",{class:_.$style.register,attrs:{"full-width":"",size:"large",theme:"primary",href:_.routes.register},domProps:{textContent:_._s(_.$trans("Sign Up to Play"))}})],2)],1)],1):_._e()}),[],!1,(function battle_over_modal_injectStyles(i){this.$style=IT.locals||IT}),null,null),RT=LT.exports;var NT=(0,ir.Z)({[Re]:{component:RT,el:`#${Re}`,store:st.default}});const initPuzzleBattle=({dispatch:i,rootState:s})=>{s.user.isLoggedIn&&i("getUserInfo"),i("initBattlesClient");const _=(()=>{const i=document.getElementById(jn);return JSON.parse(i.getAttribute("data-battle-id"))})();_&&i("initPlayerOrObserver",_),kr.Z.get(rt)&&i("followUser",kr.Z.get(rt)),O.Z.on(ne,(()=>{mountBoardModal({identifier:Re,lazyVueLoader:NT}).showModal()})),O.Z.on(ie,(()=>{setTimeout(showModalCountdown,tt.START_COUNTDOWN_DELAY)}))},initPlayerOrObserver=({dispatch:i,getters:s,state:_},T)=>{i("getBattleInfo",T).then((()=>{s.isCurrentUserPlayer&&!isBattleFinished(_.battle)?openBattle(T).catch((()=>{})):i("observeBattle",T)}))};function toggleDoubleBoard(i){(0,Fi.y)(Hi.I.BodyClass.DoubleBoard,i)}var DT=__webpack_require__(28590),jT=__webpack_require__(77403);const initTwoBoards=({commit:i,dispatch:s,rootState:_})=>{i("setHasTwoBoards",!0),toggleDoubleBoard(!0);const T=(0,Tv.Z)(DT.Z);(0,qi.X)({game2:(0,Tv.Z)(jT.Z),board2:T}),i("game2/setGameStoreNamespace","game2",{root:!0}),i("board2/setOptions",T.state.boardOptions,{root:!0}),!1===_.board.boardOptions.fetched&&s("board2/loadOptions",void 0,{root:!0}),tL.createInstance([Ln])},loadArchivedBattle=({dispatch:i,state:s})=>{if(!s.battle.id)return;i("loadBattle",formatBattle(s.battle))},load_battle_loadBattle=async({commit:i,dispatch:s,getters:_,state:T},S)=>{const{battle:C,hasTwoBoards:P,playDuration:M}=T,{id:R,players:D,secondsLeft:j}=S;s("resetRoundState",R),C.id!==R&&await s("getBattleInfo",R);const{playerUuids:$}=_;P?i("setObservedPlayerUuid",$[0]):toggleNavDropdownDelay(!0),s("initializeRoundState",{players:D}),i("setPlayDuration",j||M),i("puzzles/setGameplayState",_n.COUNT_DOWN,{root:!0}),setTimeout((()=>{O.Z.emit(isBattleFinished(S)?ne:ae),i("puzzles/setGameplayState",isBattleFinished(S)?_n.FINISHED:_n.USER_MOVE,{root:!0})})),rI.replace({name:Hn.BATTLE_ID,params:{battleId:T.battle.shortUuid}}),O.Z.emit("boardPopover/hide"),O.Z.emit(pn)},getBoardFadeSetup=i=>{const{BOARD_FADE_DURATION:s}=Xn;let _=s[R.zI.DEFAULT];[R.zI.NONE,R.zI.SLOW].includes(i)&&(_=s[i]);return _/1e3},load_next_puzzle_loadNextPuzzle=async({commit:i,dispatch:s,getters:_,rootState:T,state:S},{currentPuzzle:C,nextPuzzle:P,playerId:O})=>{await it.loadBattle,s("addRoundResult",{puzzle:C,playerId:O});const M=_.boardStore[O];if(!S.hasTwoBoards&&O!==_.primaryPlayerUuid||S.analysisBoard&&S.analysisBoard.boardNamespace===M)return void i("setPuzzle",{puzzle:P,uuid:O});s(`${M}/updateOption`,{option:"enabled",value:!1},{root:!0});const{animationType:D}=T[M].boardOptions;et.ADVANCE_TO_NEXT_PUZZLE_TIMEOUT[O]=setTimeout((()=>{const _=getBoardFadeSetup(D);i(`${M}/setOption`,{option:"fadeSetup",value:_},{root:!0}),i("setPuzzle",{puzzle:P,uuid:O}),i("puzzles/setGameplayState",_n.USER_MOVE,{root:!0}),s("initializePuzzle",{puzzle:P,uuid:O}),i(`${M}/setOption`,{option:"fadeSetup",value:0},{root:!0})}),(i=>{var s;const{ADVANCE_TO_NEXT_PUZZLE_DELAY:_}=tt;return null!=(s=_[i])?s:_[R.zI.DEFAULT]})(D))},observe_battle_observeBattle=({commit:i,dispatch:s,getters:_,state:T},S)=>{T.hasTwoBoards||(s("initTwoBoards"),i("puzzles/setGameplayState",_n.OBSERVE,{root:!0})),_.playerUuids.length>0&&i("setObservedPlayerUuid",_.playerUuids[0]),openBattle(S).catch((()=>{s("loadArchivedBattle")})),s("board/updateOption",{option:"enabled",value:!1},{root:!0}),setTimeout((()=>{O.Z.emit(fn)}))},observeNextBattle=({dispatch:i,state:s})=>i("getObservableGames").then((()=>{const _=s.observableGameList.find((i=>i.id!==s.battle.id));_&&(O.Z.emit(re),i("observeBattle",_.id))})),observePlayer=({commit:i,dispatch:s,state:_},T)=>{if(i("setObservedPlayerUuid",T),_.hasTwoBoards)s("initializePuzzle",{puzzle:_.puzzle[T],uuid:T});else{const{id:i}=_.battle;closeBattle(i),openBattle(i)}};var BT=Object.defineProperty,$T=Object.getOwnPropertySymbols,UT=Object.prototype.hasOwnProperty,FT=Object.prototype.propertyIsEnumerable,observed_player_move_defNormalProp=(i,s,_)=>s in i?BT(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_;const HT={},observed_player_move_observedPlayerMove=async({commit:i,dispatch:s,getters:_,state:T},{playerId:S,move:C,counter:P})=>{if(!T.observedPlayerUuid)return;await it.loadBattle;const O=_.gameStore[S],M=_.boardStore[S];if(T.analysisBoard&&T.analysisBoard.boardNamespace===M){const s=Object.keys(_.boardStore).find((i=>_.boardStore[i]===M)),S=((i,s)=>{for(var _ in s||(s={}))UT.call(s,_)&&observed_player_move_defNormalProp(i,_,s[_]);if($T)for(var _ of $T(s))FT.call(s,_)&&observed_player_move_defNormalProp(i,_,s[_]);return i})({},T.puzzle[s]);return S.playedMoves||(S.playedMoves=""),S.playedMoves+=C,P&&(S.playedMoves+=P),void i("setPuzzle",{puzzle:S,uuid:s})}"function"==typeof HT[O]&&(clearTimeout(Qn.makeComputerMove[`computerMove${O}`]),await HT[O]()),s(`${O}/makeTcnMove`,C,{root:!0}),P&&(HT[O]=()=>(HT[O]=null,s("puzzles/makeComputerMove",{boardStore:M,gameStore:O,isFirstMove:!1,move:P},{root:!0})),Qn.makeComputerMove[`computerMove${O}`]=setTimeout(HT[O],tt.OBSERVED_COUNTER_MOVE_DELAY))},player_finished_playerFinished=({commit:i,dispatch:s,getters:_,state:T},S)=>{const{playerId:C,state:P}=S;clearTimeout(et.ADVANCE_TO_NEXT_PUZZLE_TIMEOUT[C]),setTimeout((()=>{s("initializeRoundState",{players:{[C]:S}}),T.gameTimeExpired||(P===Ne.CLAIMED_WIN&&(i("setClaimedWin",!0),s("endSession",C)),P===Ne.TIMED_OUT&&(i("setGameTimeExpired",!0),i("setPlayDuration",0),s("endSession",C)),(!T.hasTwoBoards&&C===_.primaryPlayerUuid||_.isGameOver)&&s("endSession",C))}))},rematch=async({commit:i,dispatch:s,getters:_,rootState:T,state:S})=>{var C;let P;i("setPendingOutgoingRematch",!0);try{P=await service_createChallenge({toUserId:_.playerUuids.find((i=>i!==T.user.uuid)),rematchBattleId:S.battle.id})}catch(O){isLimitReachedError(O)&&s("puzzles/limitReached",{limit:vn.BATTLE},{root:!0})}(null==(C=null==P?void 0:P.data)?void 0:C.challenge)&&i("setOutgoingRematch",P.data.challenge),i("setPendingOutgoingRematch",!1)},removeChallenge=({commit:i,getters:s,rootState:_},T)=>{i("removeChallenge",T),s.hasOpenChallenges||_.puzzles.gameplayState!==_n.SEEKING||i("puzzles/setGameplayState",_n.START,{root:!0})},resetRoundState=({commit:i,rootState:s,state:_},T)=>{_.battle.id!==T&&(i("clearDisconnectedCount"),i("clearPlayerInfo"),i("clearObservedPlayerUuid"),i("setGameTimeExpired",!1),i("setClaimWinPossible",!1),i("setClaimedWin",!1),i("setHasLoggedToAmplitude",!1),i("setPlayDuration",millisecondsToSeconds(s.puzzles.timeConstraints.battle))),i("clearRankingResult"),i("clearRoundResults"),i("clearStrikes"),i("clearPuzzle")},resetToStartView=async({commit:i,dispatch:s,state:_})=>{O.Z.emit(re),_.battle.id&&(closeBattle(_.battle.id),i("clearBattle")),_.analysisBoard&&s("exitAnalysisBoard",_.analysisBoard),_.hasTwoBoards&&(toggleDoubleBoard(!1),i("setHasTwoBoards",!1)),Object.keys(Qn.makeComputerMove).forEach((i=>clearTimeout(Qn.makeComputerMove[i]))),Object.keys(et.ADVANCE_TO_NEXT_PUZZLE_TIMEOUT).forEach((i=>clearTimeout(et.ADVANCE_TO_NEXT_PUZZLE_TIMEOUT[i]))),s("resetRoundState"),s("game/init",{},{root:!0}),i("puzzles/setGameplayState",_n.START,{root:!0}),rI.push({name:Hn.BATTLE})},startSession=async({commit:i,dispatch:s})=>{i("puzzles/setGameplayState",_n.SEEKING,{root:!0});try{await createSeekOrOpenOngoingBattle()}catch(_){isLimitReachedError(_)&&s("puzzles/limitReached",{limit:vn.BATTLE},{root:!0})}},stopObserving=({commit:i,dispatch:s,getters:_,state:T})=>{i("clearObservedPlayerUuid");const S=_.primaryPlayerUuid;s("initializePuzzle",{puzzle:T.puzzle[S],uuid:S}),s("endSession")},toggleBattleAnalysisBoard=({dispatch:i,getters:s,state:_},{boardNamespace:T,gameNamespace:S,puzzle:C={}})=>{if(!s.canAnalyze)return;const{analysisBoard:P}=_;!P||C.id&&isSameBoard({analysisBoard:P,gameNamespace:S})?i("enterAnalysisBoard",{boardNamespace:T,gameNamespace:S,puzzle:C}):i("exitAnalysisBoard",{boardNamespace:T,gameNamespace:S})},unfollow_user_unfollowUser=({commit:i,state:s,getters:_},{username:T})=>{if(!s.followingUser||s.followingUser.username!==T)return;const{id:S}=s.followingUser;var C;_.isObserving&&_.playerUuids.includes(S)&&s.observedPlayerUuid!==S&&(closeBattle(s.battle.id),openBattle(s.battle.id)),C=S,iw.emit(Me,C),i("setFollowingUser",null),kr.Z.remove(rt)},updateBattle=({commit:i},s)=>{i("setBattle",s)},update_challenge_updateChallenge=({commit:i,dispatch:s,getters:_},{action:T,challenge:S})=>{switch(T){case ze:i("setIncomingRematch",S);break;case Ie:i("setAcceptedChallengeId",null),i("setIncomingRematch",null);break;case Le:_.outgoingRematch&&_.outgoingRematch.id===S.id&&i("setOutgoingRematch",null),s("removeChallenge",S.to.id)}},update_player_result_updatePlayerResult=({commit:i,getters:s,rootState:_},{playerId:T,result:S})=>{i("setRankingResult",{result:formatRankingResult(S),uuid:T}),i("updatePlayerInfoRating",{rating:S.newRanking.rating,uuid:T}),T===_.user.uuid&&i("updateUserInfoRating",S.newRanking.rating),T!==s.primaryPlayerUuid||_.puzzles.gameplayState===_n.SEEKING||s.canClaimWin||i("puzzles/setGameplayState",S.verdict!==Ve?_n.FINISHED:_n.FINISHED_LOST,{root:!0})},updatePuzzle=({commit:i},{puzzle:s})=>{i("setPuzzle",s)};var qT={isConnected:({connectionQuality:i})=>i>le,canClaimWin:({claimWinPossible:i},{isGameOver:s})=>i&&!s,canAnalyze:(i,{isGameOver:s,isObserving:_,primaryPlayerStruckOut:T})=>s||_||T,isDraw:({rankingResult:i},{primaryPlayerUuid:s})=>(i[s]||{}).verdict===qe,isGameOver:({battle:i,claimedWin:s,gameTimeExpired:_},{primaryPlayerStruckOut:T,opponentStruckOut:S})=>isBattleFinished(i)||T&&S||_||s,primaryPlayerStruckOut:({strikes:i},{primaryPlayerUuid:s})=>3===(i[s]||[]).length,opponentStruckOut:({strikes:i},{opponentUuid:s})=>3===(i[s]||[]).length,isObserving:({observedPlayerUuid:i})=>Boolean(i),isWinning:({rankingResult:i},{primaryPlayerUuid:s})=>(i[s]||{}).verdict===Ge,opponentUuid:(i,{playerUuids:s,primaryPlayerUuid:_})=>s.find((i=>i!==_)),primaryPlayerUuid:({followingUser:i,observedPlayerUuid:s},{isObserving:_,playerUuids:T},{user:S})=>_&&i&&T.includes(i.id)?i.id:s||S.uuid,playerUuids:i=>Object.keys(i.playerInfo)||[],score:({roundResults:i,strikes:s},{isGameOver:_,opponentUuid:T,primaryPlayerUuid:S})=>{const C=i[T]||[],P=i[S]||[];return _?{[T]:C.filter(getSolvedOrFailed).length,[S]:P.filter(getSolvedOrFailed).length}:{[T]:C.length-(s[T]||[]).length,[S]:P.length-(s[S]||[]).length}},gameStore:(i,{primaryPlayerUuid:s,opponentUuid:_})=>({[s]:"game",[_]:i.hasTwoBoards?"game2":"game"}),boardStore:(i,{primaryPlayerUuid:s,opponentUuid:_})=>({[s]:"board",[_]:i.hasTwoBoards?"board2":"board"}),currentLeaderboard:(i,s,_,T)=>{const{leaderboard:S,scoreTypeFilter:C,timeRangeFilter:P,userRangeFilter:O}=i,M=Sn[T["puzzles/timeConstraint"]];return S[C][O][M]?S[C][O][M][P[C]]:{}},outgoingRematch:i=>{if(i.outgoingRematch&&i.battle&&i.outgoingRematch.rematchBattleId===i.battle.id)return i.outgoingRematch},incomingRematch:i=>{if(i.incomingRematch&&i.battle&&i.incomingRematch.rematchBattleId===i.battle.id)return i.incomingRematch},hasAcceptedIncomingRematch:i=>Boolean(i.pendingAcceptedRematchBattleId&&i.battle&&i.pendingAcceptedRematchBattleId===i.battle.id),hasOpenChallenges:({challenges:i})=>Object.keys(i).length>0,isBattleTypeStandard:({battle:i})=>Boolean(i)&&i.type===He,isCurrentUserPlayer:(i,{playerUuids:s},_)=>s.find((i=>i===_.user.uuid))},VT=Object.defineProperty,GT=Object.defineProperties,ZT=Object.getOwnPropertyDescriptors,WT=Object.getOwnPropertySymbols,KT=Object.prototype.hasOwnProperty,YT=Object.prototype.propertyIsEnumerable,mutations_defNormalProp=(i,s,_)=>s in i?VT(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,XT={addChallenge(i,s){Dr.default.set(i.challenges,s.user.uuid,s)},removeChallenge(i,s){Dr.default.delete(i.challenges,s)},setAnalysisBoard(i,s){i.analysisBoard=s},setClaimWinPossible(i,s){i.claimWinPossible=s},clearBattle(i){i.battle={id:null,players:{},timer:{},state:null}},clearObservedPlayerUuid(i){i.observedPlayerUuid=null},clearPlayerInfo(i){i.playerInfo={}},clearPuzzle(i){i.puzzle={}},clearRankingResult(i){i.rankingResult={}},clearRoundResults(i){i.roundResults={}},clearStrikes(i){i.strikes={}},resetLeaderboard(i){i.leaderboard=getDefaultLeaderboardsState()},setClaimedWin(i,s){i.claimedWin=s},setLeaderboard(i,{data:s,durationCode:_}){const{scoreTypeFilter:T,timeRangeFilter:S,userRangeFilter:C}=i;i.leaderboard[T][C][_][S[T]]=s},setHasTwoBoards(i,s){i.hasTwoBoards=s},setObservableGameList(i,s){i.observableGameList=s},setObservedPlayerUuid(i,s){i.observedPlayerUuid=s},setScoreTypeFilter(i,s){i.scoreTypeFilter=s},setUserRangeFilter(i,s){i.userRangeFilter=s},setUsernameFilter(i,s){i.usernameFilter=s},setTimeRangeFilter({timeRangeFilter:i,scoreTypeFilter:s},_){i[s]=_},setBattle(i,s){i.battle=s},setBattleState(i,s){i.battle.state=s},setRoundResults(i,{results:s,uuid:_}){Dr.default.set(i.roundResults,_,s)},setStrikes(i,{strikes:s,uuid:_}){Dr.default.set(i.strikes,_,s)},addStrike(i,{strike:s,uuid:_}){i.strikes[_].push(s)},addRoundResult(i,{result:s,uuid:_}){i.roundResults[_].push(s)},setPuzzle(i,{puzzle:s,uuid:_}){Dr.default.set(i.puzzle,_,s)},setPlayDuration(i,s){i.playDuration=s},setPlayerInfo(i,{details:s,result:{ranking:_,newRanking:T}}){Dr.default.set(i.playerInfo,s.id,((i,s)=>GT(i,ZT(s)))(((i,s)=>{for(var _ in s||(s={}))KT.call(s,_)&&mutations_defNormalProp(i,_,s[_]);if(WT)for(var _ of WT(s))YT.call(s,_)&&mutations_defNormalProp(i,_,s[_]);return i})({},s),{ranking:T||_}))},updatePlayerInfoRating(i,{rating:s,uuid:_}){i.playerInfo[_].ranking.rating=s},setRankingResult(i,{result:s,uuid:_}){Dr.default.set(i.rankingResult,_,s)},setGameTimeExpired(i,s){i.gameTimeExpired=s},setUserInfo(i,s){i.userInfo=s},updateUserInfoRating(i,s){i.userInfo.rating=s},setOutgoingRematch(i,s){i.outgoingRematch=s},setIncomingRematch(i,s){i.incomingRematch=s},setPendingOutgoingRematch(i,s){i.pendingOutgoingRematch=Boolean(s)},setHasLoggedToAmplitude(i,s){i.hasLoggedToAmplitude=s},setPendingAcceptedRematchBattleId(i,s){i.pendingAcceptedRematchBattleId=s},setBattleOverModalVisible(i,s){i.battleOverModalVisible=s},updateConnectionQuality(i,s){i.connectionQuality=s},incrementDisconnectedCount(i){i.disconnectedCount+=1},clearDisconnectedCount(i){i.disconnectedCount=0},setBattleIsConfirmed(i,s){i.battleIsConfirmed=s},setAcceptedChallengeId(i,s){i.acceptedChallengeId=s},setFollowingUser(i,s){i.followingUser=s}},QT={namespaced:!0,actions:_,getters:qT,mutations:XT,state:{analysisBoard:null,challenges:{},claimWinPossible:!1,claimedWin:!1,connectionQuality:oe,disconnectedCount:0,gameTimeExpired:!1,followingUser:null,leaderboard:getDefaultLeaderboardsState(),hasTwoBoards:!1,hasLoggedToAmplitude:!1,observableGameList:[],observedPlayerUuid:null,playDuration:te,playerInfo:{},rankingResult:{},roundResults:{},strikes:{},scoreTypeFilter:Mb,userRangeFilter:At.GLOBAL,usernameFilter:"",timeRangeFilter:{[Mb]:Rb,[zb]:Lb},battle:{id:null,players:{},timer:{},state:null},puzzle:{},userInfo:{currentSeason:null,rating:null,seasonPoints:null},incomingRematch:null,outgoingRematch:null,pendingOutgoingRematch:!1,pendingAcceptedRematchBattleId:!1,battleOverModalVisible:!1,battleIsConfirmed:!1,acceptedChallengeId:null}},JT=Object.defineProperty,eS=Object.defineProperties,tS=Object.getOwnPropertyDescriptors,nS=Object.getOwnPropertySymbols,rS=Object.prototype.hasOwnProperty,iS=Object.prototype.propertyIsEnumerable,battle_sidebarvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?JT(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,battle_sidebarvue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))rS.call(s,_)&&battle_sidebarvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(nS)for(var _ of nS(s))iS.call(s,_)&&battle_sidebarvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},battle_sidebarvue_type_script_lang_js_spreadProps=(i,s)=>eS(i,tS(s));let aS;var sS={name:"BattleSidebar",components:{BattleConsole:am,BattlePeripheralView:Vm,BattleSidebarFooter:wg,BattleSidebarPlay:xb,BattleSidebarStart:j_,BattleTwoBoardControls:K_},data:()=>({gameplayStates:Object.freeze(_n),sidebarHeight:null,windowWidth:null}),computed:battle_sidebarvue_type_script_lang_js_spreadProps(battle_sidebarvue_type_script_lang_js_spreadValues(battle_sidebarvue_type_script_lang_js_spreadValues(battle_sidebarvue_type_script_lang_js_spreadValues({},(0,dr.mapGetters)("puzzlesBattle",["isConnected","isObserving","hasOpenChallenges"])),(0,dr.mapState)(["puzzlesBattle"])),(0,dr.mapState)({isLoggedIn:({user:i})=>i.isLoggedIn,gameplayState:({puzzles:i})=>i.gameplayState,hasTwoBoards:({puzzlesBattle:i})=>i.hasTwoBoards})),{isObservingOnSingleBoard(){return this.isObserving&&!this.showTwoBoards},showSidebarFooter(){return this.gameplayState!==_n.START},showTwoBoards(){return this.hasTwoBoards&&this.windowWidth>=960}}),watch:{isConnected:i=>{i?(clearTimeout(Zp.timeout),window.toaster.remove(Zp.toasterId),Zp.toasterId=null,Zp.timeout=null):Zp.timeout=setTimeout((()=>{Zp.toasterId=window.toaster.add({content:nt.CONNECTION_INTERRUPTED,icon:"circle-danger",iconBackgroundColor:"#b33430"})}),tt.BATTLE_DISCONNECT_TOAST_DELAY)},"puzzlesBattle.hasTwoBoards":{handler(i){i?(window.addEventListener("resize",this.resizeHandler),aS=!aS&&document.querySelector("#board-layout-main")):window.removeEventListener("resize",this.resizeHandler)},immediate:!0}},created(){this.initPuzzleBattle()},beforeCreate(){(0,qi.X)({puzzlesBattle:QT})},beforeDestroy(){this.isLoggedIn&&this.destroyBattlesClient()},methods:battle_sidebarvue_type_script_lang_js_spreadProps(battle_sidebarvue_type_script_lang_js_spreadValues({},(0,dr.mapActions)("puzzlesBattle",["selectPuzzleMode","destroyBattlesClient","initPuzzleBattle"])),{resizeHandler(){this.windowWidth=window.innerWidth,this.sidebarHeight=Math.max(aS.offsetWidth,480)}})},oS=sS,lS={cap:"battle-sidebar-cap","mobile-order-1":"battle-sidebar-mobile-order-1","mobile-order-2":"battle-sidebar-mobile-order-2","mobile-order-3":"battle-sidebar-mobile-order-3","mobile-order-4":"battle-sidebar-mobile-order-4","mobile-order-5":"battle-sidebar-mobile-order-5",component:"battle-sidebar-component",content:"battle-sidebar-content",footer:"battle-sidebar-footer"};var cS=(0,Rr.Z)(oS,(function(){var i,s=this,_=s.$createElement,T=s._self._c||_;return T("div",{class:[s.$style.component,(i={},i["dark-mode"]=s.showTwoBoards,i)],style:s.showTwoBoards&&{height:s.sidebarHeight+"px"}},[s.gameplayState===s.gameplayStates.START?T("battle-sidebar-start",{class:s.$style.content}):s.showTwoBoards?s._e():T("battle-peripheral-view"),s._v(" "),s.gameplayState!=s.gameplayStates.START?T("battle-sidebar-play",{class:s.$style.content,attrs:{"is-observable":s.isObservingOnSingleBoard}}):s._e(),s._v(" "),s.showSidebarFooter?T("battle-sidebar-footer",{class:s.$style.footer,attrs:{"background-transparent":s.showTwoBoards}}):s._e(),s._v(" "),s.hasTwoBoards?T("battle-two-board-controls"):s._e(),s._v(" "),T("battle-console")],1)}),[],!1,(function battle_sidebar_injectStyles(i){this.$style=lS.locals||lS}),null,null),uS=cS.exports,dS={name:"DirectMenuHeader",props:{img:String,text:String}},hS={component:"direct-menu-header-component",title:"direct-menu-header-title",img:"direct-menu-header-img",learn:"direct-menu-header-learn",play:"direct-menu-header-play",puzzles:"direct-menu-header-puzzles"};var pS=(0,Rr.Z)(dS,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("h1",{class:i.$style.title,domProps:{textContent:i._s(i.text)}}),i._v(" "),_("div",{class:[i.$style.img,i.$style[i.img]]})])}),[],!1,(function direct_menu_header_injectStyles(i){this.$style=hS.locals||hS}),null,null),mS=pS.exports,fS={name:"DirectMenuImage",props:{img:String},emits:["click"]},gS={img:"direct-menu-image-img",analysis:"direct-menu-image-analysis",battle:"direct-menu-image-battle",blitz:"direct-menu-image-blitz",classroom:"direct-menu-image-classroom",computer:"direct-menu-image-computer",daily:"direct-menu-image-daily",endgames:"direct-menu-image-endgames",friend:"direct-menu-image-friend",insights:"direct-menu-image-insights",lessons:"direct-menu-image-lessons",openings:"direct-menu-image-openings",practice:"direct-menu-image-practice",rated:"direct-menu-image-rated",rush:"direct-menu-image-rush",tournaments:"direct-menu-image-tournaments",training:"direct-menu-image-training",variants:"direct-menu-image-variants"};var vS={name:"DirectMenuItem",components:{DirectMenuImage:(0,Rr.Z)(fS,(function(){var i=this,s=i.$createElement;return(i._self._c||s)("div",{class:[i.$style.img,i.$style[i.img]]})}),[],!1,(function direct_menu_image_injectStyles(i){this.$style=gS.locals||gS}),null,null).exports},props:{header:String,href:String,img:String,text:String},emits:["click"]},bS={component:"direct-menu-item-component",text:"direct-menu-item-text",label:"direct-menu-item-label",img:"direct-menu-item-img"};var yS=(0,Rr.Z)(vS,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("a",{class:i.$style.component,attrs:{href:i.href},on:{click:function(s){return i.$emit("click",s)}}},[_("direct-menu-image",{class:i.$style.img,attrs:{img:i.img}}),i._v(" "),_("div",{class:i.$style.text},[_("h2",{domProps:{textContent:i._s(i.header)}}),i._v(" "),_("div",{class:i.$style.label,domProps:{textContent:i._s(i.text)}})])],1)}),[],!1,(function direct_menu_item_injectStyles(i){this.$style=bS.locals||bS}),null,null),_S=yS.exports,wS=Object.defineProperty,kS=Object.defineProperties,TS=Object.getOwnPropertyDescriptors,SS=Object.getOwnPropertySymbols,CS=Object.prototype.hasOwnProperty,xS=Object.prototype.propertyIsEnumerable,home_sidebarvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?wS(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,home_sidebarvue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))CS.call(s,_)&&home_sidebarvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(SS)for(var _ of SS(s))xS.call(s,_)&&home_sidebarvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},ES={name:"HomeSidebar",components:{DirectMenuHeader:mS,DirectMenuItem:_S},data:()=>({dailyPuzzleRoute:window.chesscom.puzzles.dailyPuzzleRoute}),computed:home_sidebarvue_type_script_lang_js_spreadValues({},(0,dr.mapState)({isLoggedIn:i=>i.user.isLoggedIn,totalAttempted:i=>i.puzzles.stats.totalAttempted})),methods:((i,s)=>kS(i,TS(s)))(home_sidebarvue_type_script_lang_js_spreadValues(home_sidebarvue_type_script_lang_js_spreadValues({},(0,dr.mapActions)({getNextPuzzle:"puzzlesRated/getNextPuzzle",selectPuzzleMode:"puzzles/selectPuzzleMode",startResumeMode:"puzzles/startResumeMode"})),(0,dr.mapMutations)("puzzles",["setPuzzleMode"])),{async startRated(){this.isLoggedIn&&this.totalAttempted>0||window.chesscom.features.includes("puzzles_logged_out_rated_start_link")?(this.setPuzzleMode("rated"),await this.getNextPuzzle(),this.$router.push({name:"rated"})):this.selectPuzzleMode({type:"rated"})}})},PS=ES,AS={component:"home-sidebar-component","items-wrap":"home-sidebar-items-wrap",items:"home-sidebar-items",item:"home-sidebar-item"};var OS=(0,Rr.Z)(PS,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("direct-menu-header",{attrs:{img:"puzzles",text:i.$trans("Chess Puzzles")}}),i._v(" "),_("div",{class:i.$style["items-wrap"]},[_("div",{class:i.$style.items},[_("direct-menu-item",{class:i.$style.item,attrs:{img:"rated",header:i.$trans("Puzzles"),text:i.$trans("Train with more than %1$s% puzzles",{"%1$s%":"500,000"})},on:{click:i.startRated}}),i._v(" "),_("direct-menu-item",{class:i.$style.item,attrs:{img:"rush",header:i.$trans("Puzzle Rush"),text:i.$trans("Race against the clock. 3 strikes and you're out!")},on:{click:function(s){return i.selectPuzzleMode({type:"rush"})}}}),i._v(" "),_("direct-menu-item",{class:i.$style.item,attrs:{img:"battle",header:i.$trans("Puzzle Battle"),text:i.$trans("Rush against another player to win")},on:{click:function(s){return i.selectPuzzleMode({type:"battle"})}}}),i._v(" "),_("direct-menu-item",{class:i.$style.item,attrs:{img:"daily",header:i.$trans("Daily Puzzle"),href:i.dailyPuzzleRoute,text:i.$trans("Can you solve todays puzzle?")}}),i._v(" "),_("direct-menu-item",{class:i.$style.item,attrs:{img:"training",header:i.$trans("custom.puzzle"),text:i.$trans("Choose puzzles by theme and rating")},on:{click:function(s){return i.selectPuzzleMode({type:"learning"})}}})],1)])],1)}),[],!1,(function home_sidebar_injectStyles(i){this.$style=AS.locals||AS}),null,null),MS=OS.exports;const allThemesSelected=({selectedThemes:i,themes:s})=>!i.length||s.length===i.length,formatNextPuzzleRequest=({puzzles:i,puzzlesLearning:s})=>{const _={allProblems:s.settings.allProblems,isSolvedWithHint:!1},{maxRating:T,minRating:S}=s.settings;return S<T&&(_.maxRating=T,_.minRating=S),allThemesSelected({selectedThemes:s.selectedThemes,themes:i.puzzleThemes.tags})||(_.tagIds=s.selectedThemes.map((i=>i.id)).join(",")),_};var time_diff=()=>{let i;return{setTime:s=>{i=s},differenceFrom:s=>{const _=i.getTime()-s.getTime();return Math.abs(_)},differenceInSecondsFrom:s=>{const _=i.getTime()-s.getTime();return Math.ceil(Math.abs(_/1e3))}}};const getCrownCount=({gameplayState:i,hintCount:s,retryCount:_})=>{if(-1!==[_n.SOLUTION,_n.MOVE_INCORRECT].indexOf(i))return 0;const T=_+s;return Math.max(3-T,1)},getIdsFromUrl=(i=new URLSearchParams(window.location.search).get("themes"))=>i?i.split(",").map((i=>parseInt(i,10))):[],isThemeSelected=({selectedThemes:i,theme:s})=>Boolean(i.find((i=>i.id===s.id))),sanitizeRating=i=>{const s=parseInt(i,10);if("number"==typeof s&&s>=0)return s};var zS=Object.defineProperty,IS=Object.defineProperties,LS=Object.getOwnPropertyDescriptors,RS=Object.getOwnPropertySymbols,NS=Object.prototype.hasOwnProperty,DS=Object.prototype.propertyIsEnumerable,filtersvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?zS(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,filtersvue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))NS.call(s,_)&&filtersvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(RS)for(var _ of RS(s))DS.call(s,_)&&filtersvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},filtersvue_type_script_lang_js_spreadProps=(i,s)=>IS(i,LS(s)),jS={name:"LearningFilters",components:{V5Input:Tr.V5Input,V5Select:Tr.V5Select},data:()=>({puzzleTypes:[ct.all,ct.failed],maxRating:null,minRating:null}),computed:filtersvue_type_script_lang_js_spreadProps(filtersvue_type_script_lang_js_spreadValues({},(0,dr.mapState)("puzzlesLearning",["settings"])),{puzzleType:{get(){return this.settings.allProblems},set(i){this.setAllProblems(parseInt(i,10))}}}),watch:{settings:{handler:"initializeRatings",deep:!0}},mounted(){this.initializeRatings(this.settings)},methods:filtersvue_type_script_lang_js_spreadProps(filtersvue_type_script_lang_js_spreadValues({},(0,dr.mapMutations)("puzzlesLearning",["setMaxRating","setMinRating","setAllProblems"])),{blurMaxRating(){const i=sanitizeRating(this.maxRating);i&&this.setMaxRating(i),this.maxRating=this.settings.maxRating},blurMinRating(){const i=sanitizeRating(this.minRating);"number"==typeof i&&this.setMinRating(i),this.minRating=this.settings.minRating},initializeRatings(i){null===this.maxRating&&(this.maxRating=i.maxRating,this.minRating=i.minRating)}})},BS=jS,$S={label:"filters-label",component:"filters-component",include:"filters-include",rating:"filters-rating",input:"filters-input",to:"filters-to",range:"filters-range"};var US=(0,Rr.Z)(BS,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("div",{class:i.$style.include},[_("label",{class:i.$style.label,attrs:{for:"puzzle-type-"+i._uid},domProps:{textContent:i._s(i.$trans("Include"))}}),i._v(" "),_("v5-select",{attrs:{id:"puzzle-type-"+i._uid,options:i.puzzleTypes},model:{value:i.puzzleType,callback:function(s){i.puzzleType=s},expression:"puzzleType"}})],1),i._v(" "),_("div",{class:i.$style.rating},[_("label",{class:i.$style.label,attrs:{for:"min-rating-"+i._uid},domProps:{textContent:i._s(i.$trans("Rating Range"))}}),i._v(" "),_("div",{class:i.$style.range},[_("v5-input",{class:i.$style.input,attrs:{id:"min-rating-"+i._uid,type:"number"},on:{input:i.blurMinRating},model:{value:i.minRating,callback:function(s){i.minRating=s},expression:"minRating"}}),i._v(" "),_("span",{class:i.$style.to,domProps:{textContent:i._s("")}}),i._v(" "),_("v5-input",{class:i.$style.input,attrs:{type:"number"},on:{input:i.blurMaxRating},model:{value:i.maxRating,callback:function(s){i.maxRating=s},expression:"maxRating"}})],1)])])}),[],!1,(function filters_injectStyles(i){this.$style=$S.locals||$S}),null,null),FS=US.exports,HS=Object.defineProperty,qS=Object.defineProperties,VS=Object.getOwnPropertyDescriptors,GS=Object.getOwnPropertySymbols,ZS=Object.prototype.hasOwnProperty,WS=Object.prototype.propertyIsEnumerable,learning_peripheral_viewvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?HS(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,learning_peripheral_viewvue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))ZS.call(s,_)&&learning_peripheral_viewvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(GS)for(var _ of GS(s))WS.call(s,_)&&learning_peripheral_viewvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},KS={name:"PeripheralView",components:{backLink:Lm},mixins:[Tm],data:()=>({MAXIMUM_CROWNS_ALLOWED:3}),computed:learning_peripheral_viewvue_type_script_lang_js_spreadValues({},(0,dr.mapState)({crowns:({puzzles:i,puzzlesLearning:s})=>getCrownCount({gameplayState:i.gameplayState,hintCount:s.hintCount,retryCount:s.currentPuzzleFailCount}),gameplayState:({puzzles:i})=>i.gameplayState})),methods:((i,s)=>qS(i,VS(s)))(learning_peripheral_viewvue_type_script_lang_js_spreadValues(learning_peripheral_viewvue_type_script_lang_js_spreadValues({},(0,dr.mapActions)({resetGame:"game/resetGame"})),(0,dr.mapMutations)({setSidebarView:"puzzlesRush/setSidebarView",setGameplayState:"puzzles/setGameplayState"})),{goBack(){this.resetGame(),this.$router.push({name:Hn.LEARNING}),this.setSidebarView(sn),this.setGameplayState(_n.START)}})},YS=KS,XS={pointer:"learning-peripheral-view-pointer",container:"learning-peripheral-view-container","icon-start":"learning-peripheral-view-icon-start",backLink:"learning-peripheral-view-backLink",lightGrey:"learning-peripheral-view-lightGrey","icon-green-faded":"learning-peripheral-view-icon-green-faded","icon-grey-faded":"learning-peripheral-view-icon-grey-faded","icon-crown":"learning-peripheral-view-icon-crown","icon-correct":"learning-peripheral-view-icon-correct","icon-solution":"learning-peripheral-view-icon-solution"};var QS=(0,Rr.Z)(YS,(function(){var i,s=this,_=s.$createElement,T=s._self._c||_;return T("section-heading",{class:[(i={},i[s.$style.pointer]=s.peripheralState.headingClick,i),s.$style.container],attrs:{theme:s.peripheralState.headingTheme,title:s.peripheralState.headingTitle},on:{click:s.onHeaderClick}},[s.gameplayState===s.gameplayStates.START?[T("div",{staticClass:"icon-font-chess crown-learning",class:s.$style["icon-start"]})]:s._e(),s._v(" "),T("backLink",{class:[s.$style.backLink,s.$style[s.peripheralState.headingTheme]],attrs:{"go-to-root":!1},on:{click:s.goBack}}),s._v(" "),s.gameplayState===s.gameplayStates.MOVE_CORRECT?[T("div",{staticClass:"icon-font-chess checkmark",class:s.$style["icon-correct"]})]:s._e(),s._v(" "),s.gameplayState===s.gameplayStates.MOVE_INCORRECT?[T("div",{staticClass:"icon-font-chess undo",class:s.$style["icon-correct"]})]:s._e(),s._v(" "),s.gameplayState===s.gameplayStates.SOLUTION?s._l(s.MAXIMUM_CROWNS_ALLOWED,(function(i){return T("div",{key:i,staticClass:"icon-font-chess crown-learning",class:[s.$style["icon-crown"],s.$style["icon-grey-faded"]]})})):s._e(),s._v(" "),s.gameplayState===s.gameplayStates.SOLVED?s._l(s.MAXIMUM_CROWNS_ALLOWED,(function(i){var _;return T("div",{key:i,staticClass:"icon-font-chess crown-learning",class:[s.$style["icon-crown"],(_={},_[s.$style["icon-green-faded"]]=i>s.crowns,_)]})})):s._e(),s._v(" "),s.gameplayState===s.gameplayStates.USER_MOVE?[T("sidebar-status-square",{attrs:{"is-white":s.isUserWhite}})]:s._e()],2)}),[],!1,(function learning_peripheral_view_injectStyles(i){this.$style=XS.locals||XS}),null,null),JS=QS.exports,eC={name:"LearningStreakIndicator",components:{StreakIcon:Zg},directives:{BoardPopover:zv},props:{results:{type:Array,required:!0}},data:()=>({routes:Object.freeze(Gn)}),computed:{currentStreak(){return(i=>{let s=0;for(let _=i.length-1;_>=0&&i[_].solved;_--)s++;return s})(this.results)}},methods:{getIcon(i){switch(i){case!0:return Zn;case!1:return Kn;default:return Wn}},popoverDetails:i=>({fen:addTcnToFen(i.initialFen,i.initialTcn),flipBoard:i.flipBoard,highlightedSquares:i.initialMove})}},tC={component:"learning-streak-indicator-component",result:"learning-streak-indicator-result",count:"learning-streak-indicator-count","empty-rod":"learning-streak-indicator-empty-rod","no-streak":"learning-streak-indicator-no-streak",fire:"learning-streak-indicator-fire"};var nC=(0,Rr.Z)(eC,(function(){var i,s=this,_=s.$createElement,T=s._self._c||_;return T("div",{class:s.$style.component},[T("div",{class:[s.$style.count,(i={},i[s.$style["no-streak"]]=0===s.currentStreak,i)]},[T("span",{staticClass:"icon-font-chess fire-alt",class:s.$style.fire}),s._v(" "),T("span",{domProps:{textContent:s._s(s.currentStreak||"--")}})]),s._v(" "),s.results.length>0?T("div",{class:s.$style.results},s._l(s.results,(function(i,_){return T("a",{key:""+i.id+_,attrs:{target:"_blank",href:s.routes.individualPuzzle(i.id)}},[T("streak-icon",{directives:[{name:"board-popover",rawName:"v-board-popover",value:s.popoverDetails(i),expression:"popoverDetails(result)"}],class:s.$style.result,attrs:{icon:s.getIcon(i.solved)}})],1)})),0):T("div",{class:s.$style["empty-rod"]})])}),[],!1,(function learning_streak_indicator_injectStyles(i){this.$style=tC.locals||tC}),null,null),rC=nC.exports,iC=Object.defineProperty,aC=Object.defineProperties,sC=Object.getOwnPropertyDescriptors,oC=Object.getOwnPropertySymbols,lC=Object.prototype.hasOwnProperty,cC=Object.prototype.propertyIsEnumerable,learning_themes_displayvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?iC(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,learning_themes_displayvue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))lC.call(s,_)&&learning_themes_displayvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(oC)for(var _ of oC(s))cC.call(s,_)&&learning_themes_displayvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},uC={name:"LearningThemesDisplay",computed:((i,s)=>aC(i,sC(s)))(learning_themes_displayvue_type_script_lang_js_spreadValues({},(0,dr.mapState)({selectedThemes:i=>i.puzzlesLearning.selectedThemes,settings:i=>i.puzzlesLearning.settings})),{label(){return(({allProblems:i,themes:s})=>{let _="";if(0===i&&(_=`${ct.failed.label}: `),0===s.length)_+=`${dt.allThemes}`;else{const i=(T=s,[...T].sort(((i,s)=>i.name<s.name?-1:i.name>s.name?1:0))),S=i.map((({name:i})=>i));_+=`(${S.length}) ${S.join(", ")}`}var T;return _})({allProblems:this.settings.allProblems,themes:this.selectedThemes})}}),methods:learning_themes_displayvue_type_script_lang_js_spreadValues({},(0,dr.mapActions)("puzzlesLearning",["quitPuzzle"]))},dC=uC,hC={component:"learning-themes-display-component",icon:"learning-themes-display-icon",settings:"learning-themes-display-settings",left:"learning-themes-display-left",content:"learning-themes-display-content",right:"learning-themes-display-right"};var pC=(0,Rr.Z)(dC,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("button",{class:i.$style.component,attrs:{type:"button",title:i.label},on:{click:i.quitPuzzle}},[_("span",{staticClass:"icon-font-chess switches",class:[i.$style.icon,i.$style.settings]}),i._v(" "),_("div",{class:i.$style.content,domProps:{textContent:i._s(i.label)}}),i._v(" "),_("div",{staticClass:"icon-font-chess chevron-right",class:[i.$style.icon,i.$style.right]})])}),[],!1,(function learning_themes_display_injectStyles(i){this.$style=hC.locals||hC}),null,null),mC=pC.exports,fC={name:"FlyoutModal"},gC={component:"modal-flyout-component"};var vC={name:"SelectTheme",components:{FlyoutModal:(0,Rr.Z)(fC,(function(){var i=this,s=i.$createElement;return(i._self._c||s)("div",{class:i.$style.component},[i._t("default")],2)}),[],!1,(function modal_flyout_injectStyles(i){this.$style=gC.locals||gC}),null,null).exports},props:{attempts:{type:Number,required:!0},failed:{type:Number,required:!0},name:{type:String,required:!0},score:{type:Number,required:!0},passed:{type:Number,required:!0},selected:{type:Boolean,default:!1}},emits:["click"],data:()=>({hovering:!1}),computed:{percentage(){return`${Math.round(this.score)}%`}},methods:{showFlyout(){window.innerWidth<=al.kg.MOBILE_WIDTH||(this.hovering=!0,this.$nextTick((()=>{(0,ws._O)(this.$el,this.$refs.flyoutModal.$el,"right")})))},hideFlyout(){this.hovering=!1}}},bC={component:"select-theme-component",selected:"select-theme-selected",checkbox:"select-theme-checkbox",name:"select-theme-name",percentage:"select-theme-percentage",modal:"select-theme-modal",row:"select-theme-row"};var yC=(0,Rr.Z)(vC,(function(){var i,s=this,_=s.$createElement,T=s._self._c||_;return T("div",{class:[s.$style.component,(i={},i[s.$style.selected]=s.selected,i)],on:{mouseenter:function(i){return s.showFlyout()},mouseleave:function(i){return s.hideFlyout()},click:function(i){return s.$emit("click",i)}}},[T("div",{class:s.$style.row},[T("input",{class:s.$style.checkbox,attrs:{type:"checkbox"},domProps:{checked:s.selected}}),s._v(" "),T("span",{class:s.$style.name,domProps:{textContent:s._s(s.name)}})]),s._v(" "),T("div",{class:s.$style.percentage,domProps:{textContent:s._s(s.percentage)}}),s._v(" "),s.hovering?T("flyout-modal",{ref:"flyoutModal",class:s.$style.modal},[T("div",[T("b",{domProps:{textContent:s._s(s.$trans("Rated Attempts"))}}),s._v(":"+s._s(s.attempts)+" ")]),s._v(" "),T("div",[s._v(s._s(s.$trans("Passed"))+":"+s._s(s.passed))]),s._v(" "),T("div",[s._v(s._s(s.$trans("Failed"))+":"+s._s(s.failed))]),s._v(" "),T("div",[s._v(s._s(s.$trans("Avg Score"))+":"+s._s(s.score.toFixed(2)))])]):s._e()],1)}),[],!1,(function select_theme_injectStyles(i){this.$style=bC.locals||bC}),null,null),_C=yC.exports,wC=Object.defineProperty,kC=Object.defineProperties,TC=Object.getOwnPropertyDescriptors,SC=Object.getOwnPropertySymbols,CC=Object.prototype.hasOwnProperty,xC=Object.prototype.propertyIsEnumerable,select_themes_containervue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?wC(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,select_themes_containervue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))CC.call(s,_)&&select_themes_containervue_type_script_lang_js_defNormalProp(i,_,s[_]);if(SC)for(var _ of SC(s))xC.call(s,_)&&select_themes_containervue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},select_themes_containervue_type_script_lang_js_spreadProps=(i,s)=>kC(i,TC(s)),EC={name:"SelectThemesContainer",components:{SelectTheme:_C},computed:select_themes_containervue_type_script_lang_js_spreadProps(select_themes_containervue_type_script_lang_js_spreadValues({},(0,dr.mapState)({allThemesStats:i=>i.puzzles.puzzleThemes.all,selectedThemes:i=>i.puzzlesLearning.selectedThemes,themes:i=>i.puzzles.puzzleThemes.tags})),{allThemesSelected(){return allThemesSelected({selectedThemes:this.selectedThemes,themes:this.themes})}}),methods:select_themes_containervue_type_script_lang_js_spreadProps(select_themes_containervue_type_script_lang_js_spreadValues(select_themes_containervue_type_script_lang_js_spreadValues({},(0,dr.mapActions)({handleThemeClick:"puzzlesLearning/handleThemeClick"})),(0,dr.mapMutations)({setSelectedThemes:"puzzlesLearning/setSelectedThemes"})),{isThemeSelected(i){return isThemeSelected({theme:i,selectedThemes:this.selectedThemes})}})},PC=EC,AC={component:"select-themes-container-component"};var OC=(0,Rr.Z)(PC,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[i.themes.length>0?_("select-theme",{attrs:{attempts:i.allThemesStats.attempts,failed:i.allThemesStats.failed,name:i.$trans("All Themes"),passed:i.allThemesStats.passed,score:i.allThemesStats.passed_rate,selected:i.allThemesSelected},on:{click:function(s){return i.setSelectedThemes([])}}}):i._e(),i._v(" "),i._l(i.themes,(function(s){return _("select-theme",{key:s.name,attrs:{attempts:s.attempts,failed:s.failed,name:s.name,passed:s.passed,score:s.passed_rate,selected:i.isThemeSelected(s)},on:{click:function(_){return i.handleThemeClick(s)}}})}))],2)}),[],!1,(function select_themes_container_injectStyles(i){this.$style=AC.locals||AC}),null,null),MC=OC.exports,zC={name:"SelectThemesHeader",directives:{Tooltip:Ur.Z},data:()=>({routes:Gn})},IC={component:"select-themes-header-component",label:"select-themes-header-label",icon:"select-themes-header-icon"};var LC=(0,Rr.Z)(zC,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("div",{class:i.$style.label},[_("div",{domProps:{textContent:i._s(i.$trans("Select Theme(s)"))}}),i._v(" "),_("a",{attrs:{target:"_blank",href:i.routes.tacticsDefinitions}},[_("span",{staticClass:"icon-font-chess circle-question",class:i.$style.icon})])]),i._v(" "),_("div",{class:i.$style.label},[_("div",{domProps:{textContent:i._s(i.$trans("My Score"))}}),i._v(" "),_("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{position:"left",content:i.$trans("Score from Rated Puzzles")},expression:"{ position: 'left', content: $trans('Score from Rated Puzzles') }"}],staticClass:"icon-font-chess circle-question",class:i.$style.icon})])])}),[],!1,(function select_themes_header_injectStyles(i){this.$style=IC.locals||IC}),null,null),RC=LC.exports,NC=Object.defineProperty,DC=Object.defineProperties,jC=Object.getOwnPropertyDescriptors,BC=Object.getOwnPropertySymbols,$C=Object.prototype.hasOwnProperty,UC=Object.prototype.propertyIsEnumerable,puzzle_theme_controlsvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?NC(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,puzzle_theme_controlsvue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))$C.call(s,_)&&puzzle_theme_controlsvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(BC)for(var _ of BC(s))UC.call(s,_)&&puzzle_theme_controlsvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},FC={name:"PuzzleThemeControls",directives:{Tooltip:Ur.Z},props:{additionalRows:{type:Array,default:()=>[]}},data:()=>({themeVoteOptions:Object.freeze(Vn)}),computed:puzzle_theme_controlsvue_type_script_lang_js_spreadValues({},(0,dr.mapState)({suggestedThemes:i=>i.puzzles.currentPuzzleThemes.suggestedTags,themes:i=>i.puzzles.currentPuzzleThemes.labeledTags})),created(){this.fetchPuzzleThemes()},methods:((i,s)=>DC(i,jC(s)))(puzzle_theme_controlsvue_type_script_lang_js_spreadValues({},(0,dr.mapActions)("puzzles",["castThemeVote","fetchPuzzleThemes","suggestTheme"])),{onThemeSuggestion(i){const s=Number(i.target.value);this.suggestTheme(s)},showModalReportPuzzle:()=>{ji||(injectModalMounts([Un.REPORT_PUZZLE]),ji=Di.createInstance(Un.REPORT_PUZZLE)),ji.$children[0].show()},themeHelp(){window.open(Gn.tacticsDefinitions,"_blank")}})},HC=FC,qC={component:"puzzle-theme-controls-component",row:"puzzle-theme-controls-row",flex:"puzzle-theme-controls-flex",button:"puzzle-theme-controls-button",theme:"puzzle-theme-controls-theme",icon:"puzzle-theme-controls-icon","no-hover":"puzzle-theme-controls-no-hover",caret:"puzzle-theme-controls-caret","suggest-themes":"puzzle-theme-controls-suggest-themes",suggestions:"puzzle-theme-controls-suggestions",link:"puzzle-theme-controls-link",disable:"puzzle-theme-controls-disable"};var VC=(0,Rr.Z)(HC,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[i._l(i.themes,(function(s,T){var S;return _("div",{key:T,class:i.$style.row},[_("div",{class:i.$style.theme},[i._v("\n      "+i._s(i.$trans("Theme"))+":\n\n      "),_("a",{class:[i.$style.link,(S={},S[i.$style.disable]=!s.lessonLink,S)],attrs:{target:"_blank",href:s.lessonLink},domProps:{textContent:i._s(s.text)}})]),i._v(" "),_("div",{class:i.$style.flex},[s.voted?_("div",{staticClass:"icon-font-chess checkmark",class:[i.$style.icon,i.$style["no-hover"]]}):[_("div",{staticClass:"icon-font-chess thumbs-up",class:i.$style.icon,on:{click:function(_){return i.castThemeVote({theme:s,vote:i.themeVoteOptions.UP})}}}),i._v(" "),_("div",{staticClass:"icon-font-chess thumbs-down",class:i.$style.icon,on:{click:function(_){return i.castThemeVote({theme:s,vote:i.themeVoteOptions.DOWN})}}})]],2)])})),i._v(" "),_("div",{class:i.$style.row},[_("div",{class:[i.$style.flex,i.$style["suggest-themes"]]},[i._v("\n      "+i._s(i.$trans("Suggest Theme"))+"\n\n      "),_("div",{staticClass:"icon-font-chess caret-down",class:i.$style.caret}),i._v(" "),_("select",{class:i.$style.suggestions,on:{input:i.onThemeSuggestion}},[_("option",{attrs:{selected:"",value:""},domProps:{textContent:i._s("-- "+i.$trans("Select")+" --")}}),i._v(" "),i._l(i.suggestedThemes,(function(s){return _("option",{key:s.id,domProps:{value:s.id,textContent:i._s(s.text)}})}))],2)]),i._v(" "),_("div",{class:i.$style.flex},[_("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.$trans("Help"),expression:"$trans('Help')"}],class:i.$style.button,attrs:{"aria-label":i.$trans("Help")},on:{click:i.themeHelp}},[_("span",{staticClass:"icon-font-chess circle-question",class:i.$style.icon})]),i._v(" "),_("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.$trans("Report"),expression:"$trans('Report')"}],class:i.$style.button,attrs:{"aria-label":i.$trans("Report")},on:{click:i.showModalReportPuzzle}},[_("span",{staticClass:"icon-font-chess circle-danger",class:i.$style.icon})])])])],2)}),[],!1,(function puzzle_theme_controls_injectStyles(i){this.$style=qC.locals||qC}),null,null),GC=VC.exports,ZC=Object.defineProperty,WC=Object.getOwnPropertySymbols,KC=Object.prototype.hasOwnProperty,YC=Object.prototype.propertyIsEnumerable,end_puzzle_statsvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?ZC(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,XC={name:"EndPuzzleStats",components:{PuzzleThemeControls:GC},directives:{Tooltip:Ur.Z},props:{additionalRows:{type:Array,default:()=>[]}},computed:((i,s)=>{for(var _ in s||(s={}))KC.call(s,_)&&end_puzzle_statsvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(WC)for(var _ of WC(s))YC.call(s,_)&&end_puzzle_statsvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i})({},(0,dr.mapState)({isLoggedIn:i=>i.user.isLoggedIn,puzzle:i=>i.puzzles.puzzle}))},QC=XC,JC={component:"end-puzzle-stats-component",row:"end-puzzle-stats-row"};var ex=(0,Rr.Z)(QC,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("div",{class:i.$style.row},[_("div",{domProps:{textContent:i._s(i.$trans("Puzzle Rating")+" (#"+i.puzzle.id+")")}}),i._v(" "),_("strong",{domProps:{textContent:i._s(i.puzzle.rating)}})]),i._v(" "),i.additionalRows.length>0?i._l(i.additionalRows,(function(s){return _("div",{key:s.label,class:i.$style.row},[_("div",{domProps:{textContent:i._s(s.label)}}),i._v(" "),_("strong",{domProps:{textContent:i._s(s.value)}})])})):i._e(),i._v(" "),i.isLoggedIn?_("puzzle-theme-controls"):i._e()],2)}),[],!1,(function end_puzzle_stats_injectStyles(i){this.$style=JC.locals||JC}),null,null),tx=ex.exports,nx=Object.defineProperty,rx=Object.defineProperties,ix=Object.getOwnPropertyDescriptors,ax=Object.getOwnPropertySymbols,sx=Object.prototype.hasOwnProperty,ox=Object.prototype.propertyIsEnumerable,primary_control_buttonsvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?nx(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,primary_control_buttonsvue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))sx.call(s,_)&&primary_control_buttonsvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(ax)for(var _ of ax(s))ox.call(s,_)&&primary_control_buttonsvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},lx={name:"PrimaryControlButtons",components:{V5Button:Tr.V5Button},directives:{tooltip:Ur.Z},props:{disableNextPuzzle:{type:Boolean,default:!1},nextPuzzle:{type:Function,required:!0},restartPuzzle:{type:Function,required:!0},retryPuzzle:{type:Function,required:!0}},data:()=>({disableShowHint:!1,gameplayStates:Object.freeze(_n)}),computed:((i,s)=>rx(i,ix(s)))(primary_control_buttonsvue_type_script_lang_js_spreadValues({},(0,dr.mapState)({gameplayState:i=>i.puzzles.gameplayState,nextMoveIndex:i=>i.puzzles.tcn.nextMoveIndex,positionHintCount:i=>i.puzzles.positionHintCount,puzzleMode:i=>i.puzzles.puzzleMode,showDetails:i=>i.puzzles.showDetails})),{shouldScheduleNextTactic(){return shouldScheduleNextTactic({playerMoveCorrect:this.gameplayState===_n.SOLVED,puzzleMode:this.puzzleMode,showDetails:this.showDetails})},hintButtonData(){return this.positionHintCount>0?{text:this.$trans("Move"),icon:"circle-question"}:{text:this.$trans("Hint"),icon:"lightbulb"}}}),watch:{nextMoveIndex(i){0===i&&(this.disableShowHint=!0,setTimeout((()=>{this.disableShowHint=!1}),3e3))}},methods:primary_control_buttonsvue_type_script_lang_js_spreadValues({},(0,dr.mapActions)("puzzles",["openInAnalysis","showMoveHint","showSolution"]))},cx=lx,ux={component:"primary-control-buttons-component",button:"primary-control-buttons-button",fourth:"primary-control-buttons-fourth",half:"primary-control-buttons-half",first:"primary-control-buttons-first"};var dx=(0,Rr.Z)(cx,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return i.gameplayState===i.gameplayStates.MOVE_INCORRECT?_("div",{class:i.$style.component},[_("v5-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.$trans("Retry Puzzle"),expression:"$trans('Retry Puzzle')"}],class:[i.$style.button,i.$style.first,i.$style.fourth],attrs:{theme:"danger",disabled:i.shouldScheduleNextTactic},on:{click:i.retryPuzzle}},[_("span",{staticClass:"icon-font-chess undo ui_v5-button-icon"})]),i._v(" "),_("v5-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.$trans("Show Solution"),expression:"$trans('Show Solution')"}],class:[i.$style.button,i.$style.fourth],attrs:{theme:"basic",disabled:i.shouldScheduleNextTactic},on:{click:i.showSolution}},[_("span",{staticClass:"icon-font-chess magnifying-glass-done ui_v5-button-icon"})]),i._v(" "),_("v5-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.$trans("Analysis"),expression:"$trans('Analysis')"}],class:[i.$style.button,i.$style.fourth],attrs:{theme:"basic"},on:{click:i.openInAnalysis}},[_("span",{staticClass:"icon-font-chess chess-board-search ui_v5-button-icon"})]),i._v(" "),_("v5-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.$trans("Next Puzzle"),expression:"$trans('Next Puzzle')"}],class:[i.$style.button,i.$style.fourth],attrs:{theme:"basic",disabled:i.disableNextPuzzle},on:{click:i.nextPuzzle}},[_("span",{staticClass:"icon-font-chess arrow-right ui_v5-button-icon"})])],1):i.gameplayState===i.gameplayStates.USER_MOVE?_("div",{class:i.$style.component},[_("v5-button",{class:[i.$style.button,i.$style.gray],attrs:{theme:"basic",disabled:i.disableShowHint,"full-width":!0},on:{click:i.showMoveHint}},[_("span",{staticClass:"icon-font-chess ui_v5-button-icon",class:i.hintButtonData.icon}),i._v(" "),_("span",{domProps:{textContent:i._s(i.hintButtonData.text)}})])],1):[i.gameplayStates.SOLUTION,i.gameplayStates.SOLVED,i.gameplayStates.SOLVED_WITH_HINT].includes(i.gameplayState)?_("div",{class:i.$style.component},[_("v5-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.$trans("Restart Puzzle"),expression:"$trans('Restart Puzzle')"}],class:[i.$style.button,i.$style.gray,i.$style.first,i.$style.fourth],attrs:{theme:"basic","full-width":!0},on:{click:i.restartPuzzle}},[_("span",{staticClass:"icon-font-chess undo ui_v5-button-icon"})]),i._v(" "),_("v5-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.$trans("Analysis"),expression:"$trans('Analysis')"}],class:[i.$style.button,i.$style.gray,i.$style.fourth],attrs:{theme:"basic","full-width":!0},on:{click:i.openInAnalysis}},[_("span",{staticClass:"icon-font-chess chess-board-search ui_v5-button-icon"})]),i._v(" "),_("v5-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.$trans("Next Puzzle"),expression:"$trans('Next Puzzle')"}],class:[i.$style.button,i.$style.half],attrs:{theme:"primary",disabled:i.disableNextPuzzle,"full-width":!0},on:{click:i.nextPuzzle}},[_("span",{staticClass:"icon-font-chess arrow-right ui_v5-button-icon"})])],1):i._e()}),[],!1,(function primary_control_buttons_injectStyles(i){this.$style=ux.locals||ux}),null,null),hx=dx.exports;const add_round_result_addRoundResult=({commit:i,rootState:s,rootGetters:_},{solved:T})=>{const{puzzle:S,tcn:C}=s.puzzles,P=_["puzzles/userColorAsInteger"]===sm.lB.BLACK,O=Iv.Z.decodeTCN(C.moveList[0])[0];i("addRoundResult",{flipBoard:P,id:S.id,initialFen:S.initialFen,initialTcn:C.moveList[0],initialMove:`${O.from}${O.to}`,solved:T})};var px=Object.defineProperty,mx=Object.getOwnPropertySymbols,fx=Object.prototype.hasOwnProperty,gx=Object.prototype.propertyIsEnumerable,fetch_initial_puzzle_defNormalProp=(i,s,_)=>s in i?px(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_;const fetchInitialPuzzle=({commit:i,dispatch:s,rootState:_})=>{return(T=formatNextPuzzleRequest(_),ca.Z.post(ut.tacticsThemeTraining,T)).then((({data:s})=>{const _=((i,s)=>{for(var _ in s||(s={}))fx.call(s,_)&&fetch_initial_puzzle_defNormalProp(i,_,s[_]);if(mx)for(var _ of mx(s))gx.call(s,_)&&fetch_initial_puzzle_defNormalProp(i,_,s[_]);return i})({tag:s.tag},s.nextTacticProblem);i("puzzles/setPuzzle",_,{root:!0})})).catch((i=>{if(function isNotFoundError(i){var s;return 404===(null==(s=i.response)?void 0:s.status)}(i))throw new Error("No puzzles found.");isLimitReachedError(i)&&s("puzzles/limitReached",{limit:vn.LEARNING},{root:!0})}));var T},handle_theme_click_handleThemeClick=({commit:i,rootState:s,state:_},T)=>{const{selectedThemes:S}=(({allThemes:i,clickedTheme:s,selectedThemes:_})=>{const T={selectedThemes:[..._]};return isThemeSelected({selectedThemes:_,theme:s})?T.selectedThemes=_.filter((i=>i.id!==s.id)):T.selectedThemes.push(s),T.selectedThemes.length===i.length&&(T.selectedThemes=[]),T})({allThemes:s.puzzles.puzzleThemes.tags,clickedTheme:T,selectedThemes:_.selectedThemes});i("setSelectedThemes",S)},initializeRatingRange=({commit:i,rootState:s,state:_})=>{if(null!=_.settings.maxRating)return;const{maxRating:T,minRating:S}=(i=>{let s=i+200,_=i-400;return s=100*Math.round(s/100),_=100*Math.round(_/100),_=Math.max(0,_),{maxRating:s,minRating:_}})(s.puzzles.stats.rating);i("setMaxRating",T),i("setMinRating",S)},nextPuzzle=({commit:i,dispatch:s,rootState:_,state:T})=>{clearTimeout(Qn.segueToNextPuzzle),isLimitReached({puzzleMode:_.puzzles.puzzleMode,reachedLimits:_.puzzles.reachedLimits})?showTrialModal():(i("puzzles/setResetPuzzle",!1,{root:!0}),s("submitMoves").then((()=>{if(i("puzzles/setHasLoggedAmplitude",!1,{root:!0}),T.isLibraryExhausted)return void s("showNoPuzzlesFoundModal");if(isLimitReached({puzzleMode:_.puzzles.puzzleMode,reachedLimits:_.puzzles.reachedLimits}))return void showTrialModal();rI.history.current.name===Hn.PUZZLE_PROBLEM_PRACTICE&&rI.replace({name:Hn.LEARNING}),i("puzzles/setPuzzle",T.nextPuzzleProblem,{root:!0}),i("setNextPuzzleProblem",{}),i("setPuzzleStartTimestamp",null),i("resetCurrentPuzzleFailCount"),i("setHintCount",0),s("puzzles/startCurrentPuzzle",void 0,{root:!0})})))},playerMoveIncorrect=({commit:i,dispatch:s,state:_})=>{0===_.currentPuzzleFailCount&&s("addRoundResult",{solved:!1}),i("incrementCurrentPuzzleFailCount")},puzzleSolved=({commit:i,dispatch:s,rootState:_,state:T})=>{i("puzzles/setGameplayState",_n.SOLVED,{root:!0}),s("submitMoves"),T.currentPuzzleFailCount>0?i("solvedPrevRoundResult"):(({roundResults:i,id:s})=>Boolean(i.find((i=>i.id===s))))({roundResults:T.roundResults,id:_.puzzles.puzzle.id})||s("addRoundResult",{solved:!0})};var vx={name:"ConfirmPopover",components:{ModalContainer:zr.Z,ModalContent:yi.Z,V5Button:Tr.V5Button},data:()=>({labels:{messageLabel:"",yesBtnLabel:ht.Z.trans("OK")},onDismiss:()=>{}}),methods:{hide(){this.$refs.modalContainer.hide()},show(){this.$refs.modalContainer.show()}}},bx={modal:"alert-popover-modal",messageLabel:"alert-popover-messageLabel",buttons:"alert-popover-buttons",regular:"alert-popover-regular"};var yx=(0,Rr.Z)(vx,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("modal-container",{ref:"modalContainer",on:{"modal-did-hide":i.onDismiss}},[_("modal-content",{ref:"modal",class:i.$style.modal},[_("div",{class:i.$style.messageLabel,domProps:{textContent:i._s(i.labels.messageLabel)}}),i._v(" "),_("v5-button",{class:i.$style.button,attrs:{"min-width":"",theme:"primary",size:"small"},domProps:{textContent:i._s(i.labels.yesBtnLabel)},on:{click:i.hide}})],1)],1)}),[],!1,(function alert_popover_injectStyles(i){this.$style=bx.locals||bx}),null,null),_x=yx.exports;const wx="alert-popover";injectMounts(document.body,[wx]);const kx=(0,ir.Z)({alertPopover:{component:_x,el:`#${wx}`}}),showNoPuzzlesFoundModal=()=>{const i=kx.createInstance("alertPopover").$children[0];i.labels.messageLabel=dt.noPuzzlesFound,i.show()},startLearnIfTagsInUrl=({commit:i,dispatch:s,rootState:_},T=getIdsFromUrl())=>{const S=_.puzzles.puzzleThemes.tags.filter((i=>T.includes(i.id)));if(S.length)return s("initializeRatingRange").then((()=>{s("puzzles/selectPuzzleMode",{type:vn.LEARNING},{root:!0}),i("setSelectedThemes",S),s("puzzles/startSession",vn.LEARNING,{root:!0})}))};let Tx=!1;const start_session_startSession=({commit:i,dispatch:s})=>{if(!Tx)return Tx=!0,i("setIsLibraryExhausted",!1),s("fetchInitialPuzzle").then((()=>{s("puzzles/startCurrentPuzzle",void 0,{root:!0})})).catch((()=>{s("showNoPuzzlesFoundModal")})).finally((()=>{Tx=!1}))};var Sx=Object.defineProperty,Cx=Object.getOwnPropertySymbols,xx=Object.prototype.hasOwnProperty,Ex=Object.prototype.propertyIsEnumerable,submit_moves_defNormalProp=(i,s,_)=>s in i?Sx(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_;let Px=null;const submitMoves=({commit:i,dispatch:s,state:_,rootGetters:T,rootState:S})=>{if(_.puzzleIsSubmitting||!(0,Uw.z)(_.nextPuzzleProblem))return Px;if(isLimitReached({puzzleMode:S.puzzles.puzzleMode,reachedLimits:S.puzzles.reachedLimits}))return;i("setPuzzleIsSubmitting",!0);const C=(({hint:i,moveList:s,outcome:_,rootState:T})=>{const S=formatNextPuzzleRequest(T),C=time_diff();return C.setTime(new Date(T.puzzlesLearning.puzzleStartTimestamp)),S.totalTime=C.differenceInSecondsFrom(new Date),S.moves=s,S.tacticsProblemId=T.puzzles.puzzle.id,S.outcome=_,i.wasRequested&&(S.hintOnMove=i.forMove,S.hintOnSeconds=C.differenceInSecondsFrom(new Date(i.dateShown)),S.isSolvedWithHint=!0),S})({hint:S.puzzles.hint,moveList:T["game/getMoveList"],outcome:getCrownCount({gameplayState:S.puzzles.gameplayState,hintCount:_.hintCount,retryCount:_.currentPuzzleFailCount}),rootState:S});return Px=(i=>ca.Z.post(ut.tacticsThemeTrainingSubmitMoves,i))(C).then((({data:s})=>{i("setPuzzleIsSubmitting",!1);const _=((i,s)=>{for(var _ in s||(s={}))xx.call(s,_)&&submit_moves_defNormalProp(i,_,s[_]);if(Cx)for(var _ of Cx(s))Ex.call(s,_)&&submit_moves_defNormalProp(i,_,s[_]);return i})({tag:s.tag},s.nextTacticProblem);i("setNextPuzzleProblem",_)})).catch((_=>{isLimitReachedError(_)?s("puzzles/limitReached",{limit:vn.LEARNING},{root:!0}):i("setIsLibraryExhausted",!0)})),Px},quitPuzzle=({commit:i,dispatch:s})=>{s("board/updateOption",{option:"enabled",value:!1},{root:!0}),s("game/clearMarkings",[],{root:!0}),i("setNextPuzzleProblem",{}),i("puzzles/setGameplayState",_n.START,{root:!0})};var Ax={addRoundResult(i,s){i.roundResults.push(s)},incrementCurrentPuzzleFailCount(i){i.currentPuzzleFailCount++},resetCurrentPuzzleFailCount(i){i.currentPuzzleFailCount=0},setAllProblems(i,s){i.settings.allProblems=s,kr.Z.set(ot,i.settings)},setHintCount(i,s){i.hintCount=s},setIsLibraryExhausted(i,s){i.isLibraryExhausted=s},setMaxRating(i,s){i.settings.maxRating=s,kr.Z.set(ot,i.settings)},setMinRating(i,s){i.settings.minRating=s,kr.Z.set(ot,i.settings)},setNextPuzzleProblem(i,s){i.nextPuzzleProblem=s},setPuzzleIsSubmitting(i,s){i.puzzleIsSubmitting=s},setPuzzleStartTimestamp(i,s){i.puzzleStartTimestamp=s},setSelectedThemes(i,s){i.selectedThemes=s,kr.Z.set(lt,s)},solvedPrevRoundResult(i){i.roundResults[i.roundResults.length-1].solved=!0}},Ox={actions:T,mutations:Ax,namespaced:!0,state:{currentPuzzleFailCount:0,hintCount:0,isLibraryExhausted:!1,nextPuzzleProblem:{},puzzleIsSubmitting:!1,puzzleStartTimestamp:null,roundResults:[],selectedThemes:kr.Z.get(lt,[]),settings:kr.Z.get(ot,{allProblems:ct.all.value,maxRating:null,minRating:null})}},Mx=Object.defineProperty,zx=Object.defineProperties,Ix=Object.getOwnPropertyDescriptors,Lx=Object.getOwnPropertySymbols,Rx=Object.prototype.hasOwnProperty,Nx=Object.prototype.propertyIsEnumerable,learning_sidebarvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?Mx(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,learning_sidebarvue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))Rx.call(s,_)&&learning_sidebarvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(Lx)for(var _ of Lx(s))Nx.call(s,_)&&learning_sidebarvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},Dx={name:"LearningSidebar",components:{EndPuzzleStats:tx,LearningFilters:FS,SidebarHeader:E_,LearningPeripheralView:JS,LearningThemesDisplay:mC,PlayActionTray:Vf,PrimaryControlButtons:hx,SelectThemesContainer:MC,SelectThemesHeader:RC,StreakIndicator:rC,V5Button:Tr.V5Button},data:()=>({gameplayStates:Object.freeze(_n),routes:getRoutes(),routeNames:Object.freeze(Hn)}),computed:((i,s)=>zx(i,Ix(s)))(learning_sidebarvue_type_script_lang_js_spreadValues({},(0,dr.mapState)({gameplayState:i=>i.puzzles.gameplayState,isLoggedIn:i=>i.user.isLoggedIn,puzzleIsSubmitting:i=>i.puzzlesLearning.puzzleIsSubmitting,roundResults:i=>i.puzzlesLearning.roundResults,showDetails:i=>i.puzzles.showDetails})),{shouldScheduleNextTactic(){return shouldScheduleNextTactic({playerMoveCorrect:this.gameplayState===_n.SOLVED,puzzleMode:vn.LEARNING,showDetails:this.showDetails})},showStats(){return!this.shouldScheduleNextTactic&&[_n.SOLUTION,_n.SOLVED].includes(this.gameplayState)}}),created(){(0,qi.X)({puzzlesLearning:Ox}),this.isLoggedIn&&(this.fetchAllPuzzleThemes(),this.initializeRatingRange())},methods:learning_sidebarvue_type_script_lang_js_spreadValues({},(0,dr.mapActions)({fetchAllPuzzleThemes:"puzzles/fetchAllPuzzleThemes",initializeRatingRange:"puzzlesLearning/initializeRatingRange",nextPuzzle:"puzzlesLearning/nextPuzzle",retryPuzzle:"puzzles/retryPuzzle",restartPuzzle:"puzzles/startCurrentPuzzle",startResumeMode:"puzzles/startResumeMode"}))},jx=Dx,Bx={cap:"sidebar-cap","mobile-order-1":"sidebar-mobile-order-1","mobile-order-2":"sidebar-mobile-order-2","mobile-order-3":"sidebar-mobile-order-3","mobile-order-4":"sidebar-mobile-order-4","mobile-order-5":"sidebar-mobile-order-5",streaks:"sidebar-streaks",footer:"sidebar-footer",button:"sidebar-button",headerImg:"sidebar-headerImg","cta-section":"sidebar-cta-section",playActionTray:"sidebar-playActionTray"};var $x=(0,Rr.Z)(jx,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",[i.gameplayState!==i.gameplayStates.START?_("learning-peripheral-view",{class:i.$style.cap}):_("SidebarHeader",{attrs:{"is-back-link-visible":!0,title:i.$trans("Themes")}},[_("div",{class:i.$style.headerImg})]),i._v(" "),i.gameplayState===i.gameplayStates.START?[_("learning-filters"),i._v(" "),_("select-themes-header"),i._v(" "),_("select-themes-container"),i._v(" "),_("div",{class:i.$style["cta-section"]},[i.isLoggedIn?_("v5-button",{class:i.$style.button,attrs:{size:"large",theme:"primary",title:i.$trans("Start!"),"full-width":""},domProps:{textContent:i._s(i.$trans("Start!"))},on:{click:function(s){return i.startResumeMode()}}}):_("v5-button",{class:i.$style.button,attrs:{href:i.routes.register,size:"large",theme:"primary","full-width":""},domProps:{textContent:i._s(i.$trans("Sign Up to Play"))}})],1)]:[i.$router.currentRoute.name===i.routeNames.LEARNING?_("learning-themes-display",{class:i.$style["mobile-order-1"]}):i._e(),i._v(" "),_("streak-indicator",{class:[i.$style.streaks,i.$style["mobile-order-3"]],attrs:{results:i.roundResults}}),i._v(" "),i.showStats?_("end-puzzle-stats",{class:i.$style["mobile-order-4"]}):i._e(),i._v(" "),_("primary-control-buttons",{class:[i.$style.footer,i.$style["mobile-order-2"]],attrs:{"disable-next-puzzle":i.puzzleIsSubmitting,"next-puzzle":i.nextPuzzle,"restart-puzzle":i.restartPuzzle,"retry-puzzle":i.retryPuzzle}}),i._v(" "),_("play-action-tray",{class:[i.$style.playActionTray,i.$style["mobile-order-5"]]})]],2)}),[],!1,(function learning_sidebar_injectStyles(i){this.$style=Bx.locals||Bx}),null,null),Ux=$x.exports;var Fx={name:"ProblemPeripheralView",mixins:[Tm]},Hx=(0,Rr.Z)(Fx,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("section-heading",{attrs:{theme:i.peripheralState.headingTheme,title:i.peripheralState.headingTitle}},[_("sidebar-status-square",{attrs:{"is-white":i.isUserWhite}})],1)}),[],!1,null,null,null),qx=Hx.exports,Vx={name:"SectionContent"},Gx={component:"section-content-component"};var Zx=(0,Rr.Z)(Vx,(function(){var i=this,s=i.$createElement;return(i._self._c||s)("div",{class:i.$style.component},[i._t("default")],2)}),[],!1,(function section_content_injectStyles(i){this.$style=Gx.locals||Gx}),null,null).exports;const actions_add_round_result_addRoundResult=({commit:i,rootGetters:s,rootState:_,state:T},{hint:S,solved:C,totalTime:P})=>{const{currentUserRatingInfo:O}=T,{puzzle:M,tcn:R}=_.puzzles,D=s["puzzles/userColorAsInteger"]===sm.lB.BLACK,j=Iv.Z.decodeTCN(R.moveList[0])[0];i("addRoundResult",{hint:S,puzzle:{flipBoard:D,id:M.id,initialFen:M.initialFen,initialTcn:R.moveList[0],initialMove:`${j.from}${j.to}`,isRatingProvisionalOrPreprovisional:M.isRatingProvisionalOrPreprovisional,rating:M.rating},results:{ratingDelta:O.user.change,rating:O.user.new,score:O.score,totalTime:P},solved:C})};function logPuzzlePathDebugData(i,s){var _;(0,rr.FR)("puzzle_path_debug_endpoints")&&console.log(`puzzlePathDebug data from ${i}:`,null==(_=s.data)?void 0:_.puzzlePathDebug)}const service_submitPuzzle=async i=>{const s=St.submitMoves,_=await ca.Z.post(s,i);return logPuzzlePathDebugData(s,_),_},guestSubmitPuzzle=i=>ca.Z.post(St.guestSubmitMoves,i),fetchRatingOverTime=({commit:i,rootState:s},_)=>(async(i,s)=>{const _=St.getRatingOverTime({username:i,daysAgo:s}),T=await ca.Z.get(_);return logPuzzlePathDebugData(_,T),T})({username:s.user.username,daysAgo:_}).then((({data:s})=>{i("setRatingOverTime",s)})),get_next_puzzle_getNextPuzzle=({commit:i,dispatch:s})=>ca.Z.get(St.nextProblem).then((({data:_})=>{i("puzzles/setPuzzle",_,{root:!0}),i("resetCurrentPuzzleRetryCount"),i("setPuzzleStartTimestamp",null),i("setCurrentUserRatingInfo",{}),s("startPuzzle")})).catch((i=>{isLimitReachedError(i)?s("puzzles/limitReached",{limit:vn.RATED},{root:!0}):(0,n_.Z)(i)}));let Wx=!1;const next_puzzle_nextPuzzle=({commit:i,dispatch:s,rootState:_,state:T})=>{if(Wx)return;if(isLimitReached({puzzleMode:_.puzzles.puzzleMode,reachedLimits:_.puzzles.reachedLimits}))return void(_.puzzles.reachedLimits.ratedLimitPerDay<8?showTrialPuzzleStreaksModal():showTrialModal());clearTimeout(Qn.segueToNextPuzzle),Wx=!0;const S=T.puzzleIsSubmitting?s("submitMoves"):Promise.resolve();return i("puzzles/setResetPuzzle",!1,{root:!0}),S.then((()=>(i("puzzles/setHasLoggedAmplitude",!1,{root:!0}),Wx=!1,s("getNextPuzzle"))))},player_move_incorrect_playerMoveIncorrect=({dispatch:i,state:s})=>{0===s.currentPuzzleRetryCount&&i("submitMoves")},puzzle_solved_puzzleSolved=({commit:i,dispatch:s,state:_,rootState:T})=>{i("puzzles/setGameplayState",T.puzzles.hint.wasRequested?_n.SOLVED_WITH_HINT:_n.SOLVED,{root:!0}),0===_.currentPuzzleRetryCount&&s("submitMoves")},restartPuzzle=({commit:i,dispatch:s})=>{i("incrementCurrentPuzzleRetryCount"),s("puzzles/startCurrentPuzzle",void 0,{root:!0})},retryPuzzle=({commit:i,dispatch:s})=>{i("incrementCurrentPuzzleRetryCount"),s("puzzles/retryPuzzle",void 0,{root:!0})},startNextPuzzleFromCache=({commit:i,dispatch:s})=>{const _=kr.Z.get("nextPuzzleData");kr.Z.remove("nextPuzzleData"),i("puzzles/setPuzzle",_,{root:!0}),i("resetCurrentPuzzleRetryCount"),i("setPuzzleStartTimestamp",null),i("setCurrentUserRatingInfo",{}),s("startPuzzle")},startPuzzle=({dispatch:i})=>i("puzzles/startCurrentPuzzle",void 0,{root:!0}).then((()=>{O.Z.emit(bt)}));let Kx=!1;const actions_start_session_startSession=({dispatch:i})=>{var s;if(!Kx)return Kx=!0,(null==(s=kr.Z.get("nextPuzzleData"))?void 0:s.id)?i("startNextPuzzleFromCache"):i("getNextPuzzle").finally((()=>{Kx=!1}))};var Yx=Object.defineProperty,Xx=Object.defineProperties,Qx=Object.getOwnPropertyDescriptors,Jx=Object.getOwnPropertySymbols,eE=Object.prototype.hasOwnProperty,tE=Object.prototype.propertyIsEnumerable,helpers_defNormalProp=(i,s,_)=>s in i?Yx(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,helpers_spreadValues=(i,s)=>{for(var _ in s||(s={}))eE.call(s,_)&&helpers_defNormalProp(i,_,s[_]);if(Jx)for(var _ of Jx(s))tE.call(s,_)&&helpers_defNormalProp(i,_,s[_]);return i};const nE=(0,ir.Z)({[_t]:{component:gv,el:`#${_t}`,store:st.default}}),rE=Yy((i=>{nE.createInstance(_t);const{puzzle:s,graphic:_}=i.target;if(!s||!_)return;const T=((i,s)=>Xx(i,Qx(s)))(helpers_spreadValues(helpers_spreadValues({},s),s.puzzle),{component:mw,fen:addTcnToFen(s.puzzle.initialFen,s.puzzle.initialTcn),puzzle:s.puzzle});delete T.puzzle,O.Z.emit(vt,T,_.element)}),ft),iE=Yy((()=>{O.Z.emit(gt)}),ft),aE={background:"var(--globalSecondaryBackground)",border:"var(--globalBorder)",darkGray:"var(--globalColorThemeMid)",fill:"var(--globalGray)",gray:"var(--globalBorder)",green:"#8DA75C",mediumGray:"#8a8886",red:"#B8413C"},sE={chart:{borderColor:aE.border,borderWidth:1},credits:{enabled:!1},legend:{enabled:!1},subtitle:{text:""},title:{text:""},tooltip:{enabled:!1},xAxis:{labels:{enabled:!1},lineWidth:0,lineColor:"transparent",minorGridLineWidth:0,minorTickLength:0,tickLength:0,title:"",visible:!1},yAxis:{endOnTick:!1,gridLineWidth:0,labels:{enabled:!1},showFirstLabel:!1,startOnTick:!1,title:""}},getOptions=(i,s)=>(0,yv.Z)(JSON.parse(JSON.stringify(sE)),i,s),oE={chart:{backgroundColor:aE.background,height:150,margin:[30,20,30,50],type:"area"},plotOptions:{series:{cursor:"pointer",point:{events:{click:i=>{const{id:s}=i.point.puzzle.puzzle;window.open(Gn.individualPuzzle(s),"_blank")},mouseOut:iE,mouseOver:rE}},stickyTracking:!1,threshold:Number}},series:[{color:aE.gray,data:Array}],xAxis:{max:19,min:0},yAxis:{max:Number,min:Number,plotLines:Array}},getPlotLine=({yAxisValue:i})=>({color:aE.gray,dashStyle:"solid",label:{align:"left",style:{color:aE.darkGray,fontSize:"12px"},text:i,x:-40,y:5},value:i,width:1}),getChartMarkingColor=({hint:i,solved:s})=>s?i?aE.mediumGray:aE.green:aE.red,getStreakColor=i=>{switch(i){case 2:return"#f7c045";case 3:return"#e58f2a";case 4:return"#f05a2a";default:return"#ca3431"}},getEncouragementPhrase=(i,s,_)=>{switch(!0){case i===s-1:return(0,j.dW)("%number% more to beat your record!",{"%number%":2});case Boolean(i===s&&_):return(0,j.dW)("A new personal best!!!");case i===s:return(0,j.dW)("%number% more to beat your record!",{"%number%":1});case 2===i:return(0,j.dW)("Good start!");case 3===i:return(0,j.dW)("Doing great!");case 4===i:return(0,j.dW)("Keep going!");case 5===i:return(0,j.dW)("Excellent streak!");case 6===i:return(0,j.dW)("Fantastic!");case 7===i:return(0,j.dW)("Amazing job!");case 8===i:return(0,j.dW)("Incredible!");case 9===i:return(0,j.dW)("You're unstoppable!");default:return(0,j.dW)("Brilliant solving!")}};var lE=Object.defineProperty,cE=Object.defineProperties,uE=Object.getOwnPropertyDescriptors,dE=Object.getOwnPropertySymbols,hE=Object.prototype.hasOwnProperty,pE=Object.prototype.propertyIsEnumerable,actions_submit_moves_defNormalProp=(i,s,_)=>s in i?lE(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_;let mE=null;const submit_moves_submitMoves=({commit:i,dispatch:s,rootGetters:_,rootState:T,state:S})=>{if(S.puzzleIsSubmitting||S.currentPuzzleRetryCount>0)return mE;i("setPuzzleIsSubmitting",!0);const C=(({moveList:i,rootState:s})=>{const{hint:_}=s.puzzles,T=time_diff(),S={isSolvedWithHint:!1};return T.setTime(new Date(s.puzzlesRated.puzzleStartTimestamp)),S.totalTime=T.differenceInSecondsFrom(new Date),S.moves=i,S.tacticsProblemId=s.puzzles.puzzle.id,_.wasRequested&&(S.hintOnMove=_.forMove,S.hintOnSeconds=T.differenceInSecondsFrom(new Date(_.dateShown)),S.isSolvedWithHint=!0),S})({moveList:_["game/getMoveList"],rootState:T});O.Z.emit(yt,{totalTime:C.totalTime});const{isLoggedIn:P}=T.user;return mE=(P?service_submitPuzzle:guestSubmitPuzzle)(C).then((({data:_})=>{if(_.tacticProblem&&i("setCurrentProblemInfo",_.tacticProblem),!P)return;_.newRatingInfo&&(i("setCurrentUserRatingInfo",_.newRatingInfo),i("puzzles/setUserPuzzleStats",((i,s)=>cE(i,uE(s)))(((i,s)=>{for(var _ in s||(s={}))hE.call(s,_)&&actions_submit_moves_defNormalProp(i,_,s[_]);if(dE)for(var _ of dE(s))pE.call(s,_)&&actions_submit_moves_defNormalProp(i,_,s[_]);return i})({},T.puzzles.stats),{rating:_.newRatingInfo.user.new}),{root:!0}));const{hint:S,result:O}=_;return s("addRoundResult",{hint:S,solved:O===Tt,totalTime:C.totalTime})})).finally((()=>{i("setPuzzleIsSubmitting",!1)})),mE};var fE={addRoundResult(i,s){i.roundResults.push(s)},clearRoundResults(i){i.roundResults=[]},incrementCurrentPuzzleRetryCount(i){i.currentPuzzleRetryCount++},resetCurrentPuzzleRetryCount(i){i.currentPuzzleRetryCount=0},setCurrentProblemInfo(i,s){i.currentProblemInfo=s},setCurrentUserRatingInfo(i,s){i.currentUserRatingInfo=s},setPuzzleIsSubmitting(i,s){i.puzzleIsSubmitting=s},setPuzzleStartTimestamp(i,s){i.puzzleStartTimestamp=s},setRatingOverTime(i,s){i.ratingOverTime=s}},gE={namespaced:!0,actions:S,mutations:fE,state:{currentProblemInfo:{},currentPuzzleRetryCount:0,currentUserRatingInfo:{},puzzleIsSubmitting:!1,ratingOverTime:{},puzzleStartTimestamp:null,roundResults:[]}},vE=Object.defineProperty,bE=Object.defineProperties,yE=Object.getOwnPropertyDescriptors,_E=Object.getOwnPropertySymbols,wE=Object.prototype.hasOwnProperty,kE=Object.prototype.propertyIsEnumerable,sidebar_action_controlsvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?vE(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,sidebar_action_controlsvue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))wE.call(s,_)&&sidebar_action_controlsvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(_E)for(var _ of _E(s))kE.call(s,_)&&sidebar_action_controlsvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},TE={name:"ProblemSidebarActionControls",components:{SectionContent:Zx,V5Button:Tr.V5Button},directives:{tooltip:Ur.Z},props:{hasRestrictedAccess:{type:Boolean,required:!0}},computed:sidebar_action_controlsvue_type_script_lang_js_spreadValues({},(0,dr.mapState)({puzzle:({puzzles:i})=>i.puzzle})),methods:((i,s)=>bE(i,yE(s)))(sidebar_action_controlsvue_type_script_lang_js_spreadValues({},(0,dr.mapActions)("puzzles",["openInAnalysis","showSolution","selectPuzzleMode","startSession"])),{openAnalysis(){this.openInAnalysis()},practicePuzzle(){rI.push(problem_config_routes_practicePuzzle({id:this.puzzle.id}).replace(rI.options.base,""))},startDemo(){(0,qi.X)({puzzlesRated:gE}),this.selectPuzzleMode({type:vn.RATED}),this.startSession(vn.RATED)}})},SE=TE,CE={row:"sidebar-action-controls-row",button:"sidebar-action-controls-button"};var xE=(0,Rr.Z)(SE,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[i.hasRestrictedAccess?_("section-content",{class:i.$style.row},[_("v5-button",{class:i.$style.button,attrs:{theme:"primary"},domProps:{textContent:i._s(i.$trans("Solve Puzzles"))},on:{click:i.startDemo}})],1):_("section-content",{class:i.$style.row},[_("v5-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.$trans("Play Problem"),expression:"$trans('Play Problem')"}],class:i.$style.button,attrs:{theme:"basic"},on:{click:i.practicePuzzle}},[_("span",{staticClass:"icon-font-chess ui_v5-button-icon chess-move"})]),i._v(" "),_("v5-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.$trans("Show Solution"),expression:"$trans('Show Solution')"}],class:i.$style.button,attrs:{theme:"basic"},on:{click:i.showSolution}},[_("span",{staticClass:"icon-font-chess ui_v5-button-icon circle-question"})]),i._v(" "),_("v5-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.$trans("Analysis"),expression:"$trans('Analysis')"}],class:i.$style.button,attrs:{theme:"basic"},on:{click:i.openAnalysis}},[_("span",{staticClass:"icon-font-chess ui_v5-button-icon chess-board-search"})])],1)],1)}),[],!1,(function sidebar_action_controls_injectStyles(i){this.$style=CE.locals||CE}),null,null),PE=xE.exports,AE=Object.defineProperty,OE=Object.defineProperties,ME=Object.getOwnPropertyDescriptors,zE=Object.getOwnPropertySymbols,IE=Object.prototype.hasOwnProperty,LE=Object.prototype.propertyIsEnumerable,problem_sidebarvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?AE(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,RE={name:"ProblemSidebar",components:{EndPuzzleStats:tx,PlayActionTray:Vf,ProblemPeripheralView:qx,SidebarActionControls:PE},computed:((i,s)=>OE(i,ME(s)))(((i,s)=>{for(var _ in s||(s={}))IE.call(s,_)&&problem_sidebarvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(zE)for(var _ of zE(s))LE.call(s,_)&&problem_sidebarvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i})({},(0,dr.mapState)({puzzle:({puzzles:i})=>i.puzzle})),{rowData(){return(({attemptCount:i,passRate:s})=>[{label:pt.PASS_RATE,value:`${s.toFixed()}%`},{label:pt.ATTEMPTS,value:i}])({attemptCount:this.puzzle.attemptCount,passRate:this.puzzle.passRate})},hasRestrictedAccess(){return!(0,Uw.$n)(this.puzzle,"pgn")}}),created(){(async({hasRestrictedAccess:i,puzzle:s,store:_=st.default})=>{await(0,M.m)(hn),i?_.dispatch("game/loadFromFen",s.initialFen):(_.dispatch("puzzles/fetchPuzzleThemes"),_.dispatch("game/loadFromPgn",{diff:-parseTcnMoveList(s.tcnMoveList).length,pgn:s.pgn}),_.dispatch("game/moveToStart")),_.commit("puzzles/setGameplayState",_n.START),_.dispatch("puzzles/setBoardPosition"),_.commit("board/setOption",{option:"enabled",value:!1})})({hasRestrictedAccess:this.hasRestrictedAccess,puzzle:this.puzzle})}},NE=RE,DE={cap:"sidebar-cap","mobile-order-1":"sidebar-mobile-order-1","mobile-order-2":"sidebar-mobile-order-2","mobile-order-3":"sidebar-mobile-order-3","mobile-order-4":"sidebar-mobile-order-4","mobile-order-5":"sidebar-mobile-order-5",footer:"sidebar-footer",scrollable:"sidebar-scrollable",playActionTray:"sidebar-playActionTray"};var jE=(0,Rr.Z)(NE,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("problem-peripheral-view",{class:i.$style.cap}),i._v(" "),_("div",{class:[i.$style.scrollable,i.$style["mobile-order-2"]]},[_("end-puzzle-stats",{attrs:{"additional-rows":i.rowData}})],1),i._v(" "),_("sidebar-action-controls",{class:[i.$style.footer,i.$style["mobile-order-1"]],attrs:{"has-restricted-access":i.hasRestrictedAccess}}),i._v(" "),_("play-action-tray",{class:[i.$style.playActionTray,i.$style["mobile-order-3"]]})],1)}),[],!1,(function problem_sidebar_injectStyles(i){this.$style=DE.locals||DE}),null,null),BE=jE.exports;const $E={chart:{backgroundColor:"var(--globalSecondaryBackground)",height:100,margin:[0,1,0,0],type:"areaspline"},plotOptions:{areaspline:{marker:{enabled:!1}}},series:[{data:Array}],xAxis:{min:0,max:29},yAxis:{max:Number,min:Number}},UE="#62b0d677",FE="#62b0d6";var HE=__webpack_require__(78840),qE=__webpack_require__.n(HE),VE={name:"HighchartsChart",props:{autoUpdate:{type:Boolean,default:!0},constructorType:{type:String,default:"chart",validator:i=>["chart","mapChart","stockChart"].includes(i)},options:{type:Object,required:!0},loading:{type:Boolean,default:!1},onLoad:{type:Function},updateArgs:{type:Array,default:()=>[!0,!0,{duration:1e3}]},updateCallback:{type:Function}},computed:{hasOptionsAndAcceptableConstructor(){return this.options&&qE()[this.constructorType]}},watch:{loading(i){var s,_;i?null==(s=this.chart)||s.showLoading():null==(_=this.chart)||_.hideLoading()},options:{handler(){this.autoUpdate&&this.update()},deep:!0}},mounted(){this.hasOptionsAndAcceptableConstructor&&this.createChart()},beforeDestroy(){var i;return null==(i=this.chart)?void 0:i.destroy()},methods:{createChart(){var i;this.chart=qE()[this.constructorType](this.$refs.chart,this.options,this.onLoad),this.loading&&(null==(i=this.chart)||i.showLoading())},update(){var i;null==(i=this.chart)||i.update(this.options,...this.updateArgs),this.updateCallback&&this.chart&&this.updateCallback(this.chart)}}},GE=VE,ZE=(0,Rr.Z)(GE,(function(){var i=this.$createElement;return(this._self._c||i)("div",{ref:"chart"})}),[],!1,null,null,null).exports,WE=Object.defineProperty,KE=Object.getOwnPropertySymbols,YE=Object.prototype.hasOwnProperty,XE=Object.prototype.propertyIsEnumerable,recent_attempts_chartvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?WE(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,QE={components:{Chart:ZE,SectionContent:Zx},props:{data:{default:()=>[],type:Array,required:!0},startingRating:{type:Number,required:!0}},data(){return{componentRefs:Object.freeze(mt),max:this.startingRating,min:this.startingRating,seriesData:[{color:aE.mediumGray,y:this.startingRating}]}},computed:{formattedDeviation(){return(({max:i,min:s,startingRating:_})=>{const T=(({max:i,min:s,startingRating:_})=>{const T=_-s,S=i-_;return T>S?T:S})({max:i,min:s,startingRating:_}),S=(({number:i,paddingPercent:s})=>i/(1-s))({number:T,paddingPercent:.2}),C=10*Math.ceil(S/10);return Math.max(C,40)})({max:this.max,min:this.min,startingRating:this.startingRating})},lowerLimit(){return this.roundedStartingRating-this.formattedDeviation},options(){return((i,s)=>{for(var _ in s||(s={}))YE.call(s,_)&&recent_attempts_chartvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(KE)for(var _ of KE(s))XE.call(s,_)&&recent_attempts_chartvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i})({},getOptions(oE,{plotOptions:{series:{threshold:this.roundedStartingRating}},series:[{data:this.recentSeriesData,color:aE.fill}],yAxis:{max:this.upperLimit,min:this.lowerLimit,plotLines:this.plotLines}}))},plotLines(){return[getPlotLine({yAxisValue:this.roundedStartingRating}),getPlotLine({yAxisValue:this.upperLimit}),getPlotLine({yAxisValue:this.lowerLimit})]},recentSeriesData(){return this.seriesData.slice(Math.max(this.seriesData.length-20,0))},roundedStartingRating(){return 10*Math.round(this.startingRating/10)},upperLimit(){return this.roundedStartingRating+this.formattedDeviation}},watch:{data(i){const s=i[i.length-1];this.updateMaxMinValues(s),this.addNewItemToSeriesData(s),this.updateChart()}},created(){this.data.forEach((i=>{this.updateMaxMinValues(i),this.addNewItemToSeriesData(i)}))},methods:{addNewItemToSeriesData(i){this.seriesData.push({color:getChartMarkingColor(i),y:i.results.rating,puzzle:i})},updateMaxMinValues(i){this.max=Math.max(this.max,i.results.rating),this.min=Math.min(this.min,i.results.rating)},updateChart(){this.$nextTick(this.$refs[this.componentRefs.CHART_WRAPPER].update)}}},JE=QE,eP={chart:"recent-attempts-chart-chart"};var tP=(0,Rr.Z)(JE,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("section-content",[_("chart",{ref:i.componentRefs.CHART_WRAPPER,class:i.$style.chart,attrs:{"auto-update":!1,options:i.options}})],1)}),[],!1,(function recent_attempts_chart_injectStyles(i){this.$style=eP.locals||eP}),null,null),nP=tP.exports,rP=Object.defineProperty,iP=Object.defineProperties,aP=Object.getOwnPropertyDescriptors,sP=Object.getOwnPropertySymbols,oP=Object.prototype.hasOwnProperty,lP=Object.prototype.propertyIsEnumerable,rated_end_puzzle_statsvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?rP(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,cP={name:"RatedEndPuzzleStats",components:{PuzzleThemeControls:GC},directives:{Tooltip:Ur.Z},computed:((i,s)=>iP(i,aP(s)))(((i,s)=>{for(var _ in s||(s={}))oP.call(s,_)&&rated_end_puzzle_statsvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(sP)for(var _ of sP(s))lP.call(s,_)&&rated_end_puzzle_statsvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i})({},(0,dr.mapState)({gameplayState:i=>i.puzzles.gameplayState,isLoggedIn:i=>i.user.isLoggedIn,problemInfo:i=>i.puzzlesRated.currentProblemInfo,puzzle:i=>i.puzzles.puzzle,userRatingInfo:i=>i.puzzlesRated.currentUserRatingInfo})),{puzzleWasSolved(){return[_n.SOLVED,_n.SOLVED_WITH_HINT].includes(this.gameplayState)},targetTime(){return this.problemInfo.targetSeconds&&secondsToMinutesAndSecondsString(this.problemInfo.targetSeconds)}})},uP=cP,dP={component:"rated-end-puzzle-stats-component",row:"rated-end-puzzle-stats-row",flex:"rated-end-puzzle-stats-flex",icon:"rated-end-puzzle-stats-icon"};var hP=(0,Rr.Z)(uP,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("div",{class:i.$style.row},[_("div",{domProps:{textContent:i._s(i.$trans("Puzzle Rating")+" (#"+i.puzzle.id+")")}}),i._v(" "),_("div",{class:i.$style.flex},[i.puzzle.isRatingProvisionalOrPreprovisional?[_("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:i.$trans("%number%% of Puzzles are not yet rated. This allows us to add new puzzles and rate them. They cannot affect your rating negatively.",{"%number%":5}),position:"left"},expression:"{\n            content: $trans('%number%% of Puzzles are not yet rated. This allows us to add new puzzles and rate them. They cannot affect your rating negatively.', { '%number%': 5 }),\n            position: 'left',\n          }"}],staticClass:"icon-font-chess circle-question",class:i.$style.icon}),i._v(" "),_("strong",{domProps:{textContent:i._s(i.$trans("Pending"))}})]:_("strong",{domProps:{textContent:i._s(i.puzzle.rating)}})],2)]),i._v(" "),_("div",{class:i.$style.row},[_("div",{class:i.$style.flex},[i._v("\n      "+i._s(i.$trans("Target Time"))+"\n\n      "),_("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.$trans("Think fast! A player at your rating must solve in this time or less to score 100%."),expression:"$trans('Think fast! A player at your rating must solve in this time or less to score 100%.')"}],staticClass:"icon-font-chess circle-question",class:i.$style.icon})]),i._v(" "),_("strong",{domProps:{textContent:i._s(i.targetTime)}})]),i._v(" "),i.isLoggedIn?[i.puzzleWasSolved?_("div",{class:i.$style.row},[_("div",{domProps:{textContent:i._s(i.$trans("Speed Bonus"))}}),i._v(" "),isNaN(i.userRatingInfo.score)?i._e():_("strong",{domProps:{textContent:i._s(i.userRatingInfo.score.toFixed()+"%")}})]):i._e(),i._v(" "),_("div",{class:i.$style.row},[_("div",{domProps:{textContent:i._s(i.$trans("Pass Rate"))}}),i._v(" "),isNaN(i.problemInfo.passRate)?i._e():_("strong",{domProps:{textContent:i._s(i.problemInfo.passRate.toFixed(1)+"%")}})]),i._v(" "),i.puzzleWasSolved?[_("div",{class:i.$style.row},[_("div",{domProps:{textContent:i._s(i.$trans("Attempts"))}}),i._v(" "),_("strong",{domProps:{textContent:i._s(i.problemInfo.attemptCount)}})]),i._v(" "),_("puzzle-theme-controls")]:i._e()]:i._e()],2)}),[],!1,(function rated_end_puzzle_stats_injectStyles(i){this.$style=dP.locals||dP}),null,null),pP=hP.exports,mP={name:"RatedPeripheralView",components:{backLink:Lm},mixins:[Tm]},fP={container:"rated-peripheral-view-container","icon-correct":"rated-peripheral-view-icon-correct",backLink:"rated-peripheral-view-backLink",lightGrey:"rated-peripheral-view-lightGrey","icon-incorrect":"rated-peripheral-view-icon-incorrect","icon-solution":"rated-peripheral-view-icon-solution","icon-start":"rated-peripheral-view-icon-start"};var gP=(0,Rr.Z)(mP,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("section-heading",{class:i.$style.container,attrs:{theme:i.peripheralState.headingTheme,title:i.peripheralState.headingTitle}},[i.gameplayState===i.gameplayStates.START?[_("div",{staticClass:"icon-font-chess stats-arrow-up",class:i.$style["icon-start"]})]:i._e(),i._v(" "),_("backLink",{class:[i.$style.backLink,i.$style[i.peripheralState.headingTheme]]}),i._v(" "),i.gameplayState===i.gameplayStates.MOVE_INCORRECT?[_("div",{staticClass:"icon-font-chess x",class:i.$style["icon-incorrect"]})]:i._e(),i._v(" "),[i.gameplayStates.SOLVED,i.gameplayStates.SOLVED_WITH_HINT].includes(i.gameplayState)?[_("div",{staticClass:"icon-font-chess checkmark",class:i.$style["icon-correct"]})]:i._e(),i._v(" "),i.gameplayState===i.gameplayStates.SOLUTION?[_("div",{staticClass:"icon-font-chess magnifying-glass-done",class:i.$style["icon-solution"]})]:i._e(),i._v(" "),i.gameplayState===i.gameplayStates.USER_MOVE?[_("sidebar-status-square",{attrs:{"is-white":i.isUserWhite}})]:i._e()],2)}),[],!1,(function rated_peripheral_view_injectStyles(i){this.$style=fP.locals||fP}),null,null),vP=gP.exports;var bP=Object.defineProperty,yP=Object.getOwnPropertySymbols,_P=Object.prototype.hasOwnProperty,wP=Object.prototype.propertyIsEnumerable,rating_over_time_chartvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?bP(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,kP={components:{Chart:ZE,SectionContent:Zx},props:{data:{type:Array,required:!0},username:{type:String,required:!0}},data:()=>({chartTimePeriod:30,routes:Object.freeze(St)}),computed:{minRating(){return Math.min(...this.data)},maxRating(){return Math.max(...this.data)},options(){return((i,s)=>{for(var _ in s||(s={}))_P.call(s,_)&&rating_over_time_chartvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(yP)for(var _ of yP(s))wP.call(s,_)&&rating_over_time_chartvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i})({},getOptions($E,{series:[{data:this.data,color:UE,lineColor:FE}],yAxis:{min:this.minRating-this.ratingPadding,max:this.maxRating+this.ratingPadding}}))},ratingPadding(){return this.maxRating-this.minRating}}},TP=kP,SP={component:"rating-over-time-chart-component",labels:"rating-over-time-chart-labels"};var CP=(0,Rr.Z)(TP,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return i.data.length?_("section-content",{class:i.$style.component},[_("a",{attrs:{target:"_blank",href:i.routes.userStats(i.username)}},[_("div",{class:i.$style.labels},[_("strong",{domProps:{textContent:i._s(i.$transChoice("{0} 0 days|{1} 1 day|]1,Inf] %1$s% days",i.chartTimePeriod,{"%1$s%":i.chartTimePeriod}))}})]),i._v(" "),_("chart",{attrs:{options:i.options}})],1)]):i._e()}),[],!1,(function rating_over_time_chart_injectStyles(i){this.$style=SP.locals||SP}),null,null),xP=CP.exports,EP=Object.defineProperty,PP=Object.defineProperties,AP=Object.getOwnPropertyDescriptors,OP=Object.getOwnPropertySymbols,MP=Object.prototype.hasOwnProperty,zP=Object.prototype.propertyIsEnumerable,start_action_trayvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?EP(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,IP={name:"StartActionTray",components:{ActionTray:tf},directives:{Tooltip:Ur.Z},data:()=>({routes:Object.freeze(Gn)}),computed:((i,s)=>PP(i,AP(s)))(((i,s)=>{for(var _ in s||(s={}))MP.call(s,_)&&start_action_trayvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(OP)for(var _ of OP(s))zP.call(s,_)&&start_action_trayvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i})({},(0,dr.mapState)("user",["username","isLoggedIn"])),{statsUrl(){return Gn.stats({username:this.username})}})},LP=IP,RP={component:"start-action-tray-component",icon:"start-action-tray-icon"};var NP=(0,Rr.Z)(LP,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("action-tray",{class:i.$style.component},[_("a",{attrs:{href:i.routes.leaderboard}},[_("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.$trans("Leaderboard"),expression:"$trans('Leaderboard')"}],staticClass:"icon-font-chess trophy-podium",class:i.$style.icon})]),i._v(" "),i.isLoggedIn?_("a",{attrs:{href:i.statsUrl}},[_("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.$trans("Stats"),expression:"$trans('Stats')"}],staticClass:"icon-font-chess stats",class:i.$style.icon})]):i._e(),i._v(" "),_("a",{attrs:{href:i.routes.problems}},[_("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.$trans("Problems"),expression:"$trans('Problems')"}],staticClass:"icon-font-chess list",class:i.$style.icon})])])}),[],!1,(function start_action_tray_injectStyles(i){this.$style=RP.locals||RP}),null,null),DP=NP.exports,jP={name:"RatedLabel",components:{PuzzleLabel:_T},props:{label:{type:String,required:!0},value:{type:[String,Number],required:!0}}},BP={component:"rated-label-component",label:"rated-label-label",value:"rated-label-value"};var $P=(0,Rr.Z)(jP,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:[i.$style.component]},[_("puzzle-label",{class:i.$style.label,domProps:{textContent:i._s(i.label)}}),i._v(" "),_("div",{class:i.$style.value,domProps:{textContent:i._s(i.value)}})],1)}),[],!1,(function rated_label_injectStyles(i){this.$style=BP.locals||BP}),null,null),UP=$P.exports,FP=Object.defineProperty,HP=Object.getOwnPropertySymbols,qP=Object.prototype.hasOwnProperty,VP=Object.prototype.propertyIsEnumerable,start_statsvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?FP(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,GP={name:"StartStats",components:{RatedLabel:UP,PuzzleLabel:_T},data:()=>({routes:Object.freeze(St)}),computed:((i,s)=>{for(var _ in s||(s={}))qP.call(s,_)&&start_statsvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(HP)for(var _ of HP(s))VP.call(s,_)&&start_statsvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i})({},(0,dr.mapState)({user:({user:i,puzzles:s})=>({avatarUrl:i.avatarLargeUrl,username:i.username,rating:s.stats.rating}),stats:({puzzles:i})=>i.stats}))},ZP=GP,WP={stats:"start-stats-stats",stat:"start-stats-stat",column:"start-stats-column","rating-label":"start-stats-rating-label",rating:"start-stats-rating"};var KP=(0,Rr.Z)(ZP,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.stats},[_("div",{class:i.$style.stat},[_("rated-label",{attrs:{label:i.$trans("Highest"),value:i.stats.highestRating}})],1),i._v(" "),_("div",{class:[i.$style.stat,i.$style.column]},[_("puzzle-label",{class:i.$style["rating-label"],domProps:{textContent:i._s(i.$trans("Rating"))}}),i._v(" "),_("a",{class:i.$style.rating,attrs:{target:"_blank",href:i.routes.userStats(i.user.username)},domProps:{textContent:i._s(i.user.rating)}})],1),i._v(" "),_("div",{class:i.$style.stat},[_("rated-label",{attrs:{label:i.$trans("Attempts"),value:i.stats.totalAttempted}})],1)])}),[],!1,(function start_stats_injectStyles(i){this.$style=WP.locals||WP}),null,null),YP=KP.exports,XP=Object.defineProperty,QP=Object.defineProperties,JP=Object.getOwnPropertyDescriptors,eA=Object.getOwnPropertySymbols,tA=Object.prototype.hasOwnProperty,nA=Object.prototype.propertyIsEnumerable,rated_sidebar_startvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?XP(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,rated_sidebar_startvue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))tA.call(s,_)&&rated_sidebar_startvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(eA)for(var _ of eA(s))nA.call(s,_)&&rated_sidebar_startvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},rA={name:"RatedSidebarStart",components:{RatingOverTimeChart:xP,StartStats:YP,StartActionTray:DP,SidebarHeader:E_,V5Button:Tr.V5Button},computed:((i,s)=>QP(i,JP(s)))(rated_sidebar_startvue_type_script_lang_js_spreadValues(rated_sidebar_startvue_type_script_lang_js_spreadValues({},(0,dr.mapGetters)({timeConstraint:"puzzles/timeConstraint"})),(0,dr.mapState)({user:({user:i,puzzles:s})=>({avatarUrl:i.avatarLargeUrl,username:i.username,rating:s.stats.rating}),isGuest:i=>i.user.isGuest,reachedLimits:i=>i.puzzles.reachedLimits,ratingOverTime:({puzzlesRated:i})=>i.ratingOverTime})),{chartData(){return i=this.ratingOverTime,(0,Uw.z)(i)?[]:i.ratings.map((i=>i.rating));var i}}),methods:rated_sidebar_startvue_type_script_lang_js_spreadValues({},(0,dr.mapActions)("puzzles",["selectPuzzleMode","startResumeMode","startSession"]))},iA=rA,aA={component:"rated-sidebar-start-component","header-img":"rated-sidebar-start-header-img",stats:"rated-sidebar-start-stats",chart:"rated-sidebar-start-chart",actions:"rated-sidebar-start-actions","start-button-wrapper":"rated-sidebar-start-start-button-wrapper","action-tray":"rated-sidebar-start-action-tray"};var sA=(0,Rr.Z)(iA,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("div",{class:i.$style.content},[_("sidebar-header",{attrs:{title:i.$trans("Puzzles")}},[_("div",{class:i.$style["header-img"]})]),i._v(" "),_("start-stats",{class:i.$style.stats}),i._v(" "),i.user.username?_("rating-over-time-chart",{class:i.$style.chart,attrs:{data:i.chartData,username:i.user.username}}):i._e()],1),i._v(" "),_("div",{class:i.$style.actions},[_("div",{class:i.$style["start-button-wrapper"]},[_("v5-button",{attrs:{size:"large",theme:"primary","full-width":""},domProps:{textContent:i._s(i.$trans("Start"))},on:{click:function(s){return i.startResumeMode()}}})],1),i._v(" "),_("start-action-tray",{class:i.$style["action-tray"]})],1)])}),[],!1,(function rated_sidebar_start_injectStyles(i){this.$style=aA.locals||aA}),null,null),oA=sA.exports,lA={name:"RatedStreakInfo",props:{currentStreak:{type:Number,required:!0},highestStreak:{type:Number,required:!0},isNewHighestStreak:{type:Boolean,required:!0}},computed:{streakColor(){return{color:this.streakData.color}},streakData(){return((i,s,_)=>{if(!(i<2))return{color:getStreakColor(i),currentStreakPhrase:(0,j.dW)("%number% in a row!",{"%number%":i}),encouragementPhrase:getEncouragementPhrase(i,s,_)}})(this.currentStreak,this.highestStreak,this.isNewHighestStreak)}}},cA=lA,uA={component:"rated-streak-info-component",icon:"rated-streak-info-icon",current:"rated-streak-info-current",remaining:"rated-streak-info-remaining",text:"rated-streak-info-text"};var dA=(0,Rr.Z)(cA,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return i.streakData?_("div",{class:i.$style.component},[_("div",{class:i.$style.icon,style:i.streakColor},[_("span",{staticClass:"icon-font-chess fire-alt"})]),i._v(" "),_("div",[_("div",{class:i.$style.current,style:i.streakColor},[_("span",{class:i.$style.text,domProps:{textContent:i._s(i.streakData.currentStreakPhrase)}})]),i._v(" "),_("div",{class:i.$style.remaining},[_("span",{class:i.$style.text,domProps:{textContent:i._s(i.streakData.encouragementPhrase)}})])])]):i._e()}),[],!1,(function rated_streak_info_injectStyles(i){this.$style=uA.locals||uA}),null,null),hA=dA.exports,pA=Object.defineProperty,mA=Object.defineProperties,fA=Object.getOwnPropertyDescriptors,gA=Object.getOwnPropertySymbols,vA=Object.prototype.hasOwnProperty,bA=Object.prototype.propertyIsEnumerable,clockvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?pA(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,yA={name:"Clock",props:{size:{type:Number,default:16},timeElapsed:{type:Number,required:!0}},computed:((i,s)=>mA(i,fA(s)))(((i,s)=>{for(var _ in s||(s={}))vA.call(s,_)&&clockvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(gA)for(var _ of gA(s))bA.call(s,_)&&clockvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i})({},(0,dr.mapState)({targetSeconds:i=>i.puzzles.puzzle.targetSeconds})),{targetMilliseconds(){return 1e3*(this.targetSeconds||0)},degree(){return this.timeElapsed/this.targetMilliseconds*360<360?this.timeElapsed/this.targetMilliseconds*360:360},radius(){return this.size/2},fillRadius(){return this.size/2-this.size/8},d(){const i=this.degree/180*Math.PI,s=Math.sin(i)*this.fillRadius,_=Math.cos(i)*-this.fillRadius,T=this.degree>180?1:0;return`M 0 0 v -${this.fillRadius} A ${this.fillRadius} ${this.fillRadius} 1 ${T} 1 ${s} ${_} z`}})},_A=yA,wA={border:"clock-border",inner:"clock-inner"};var kA=(0,Rr.Z)(_A,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("svg",{attrs:{width:i.size,height:i.size,viewbox:"0 0 "+i.size+" "+i.size}},[_("circle",{class:i.$style.border,attrs:{cx:i.radius,cy:i.radius,r:i.radius-i.radius/8,"stroke-width":i.radius/4,fill:"none"}}),i._v(" "),360!==i.degree?_("path",{class:i.$style.inner,attrs:{transform:"translate("+i.radius+" "+i.radius+")",d:i.d}}):_("circle",{class:i.$style.inner,attrs:{stroke:"none",cx:i.radius,cy:i.radius,r:i.fillRadius}})])}),[],!1,(function clock_injectStyles(i){this.$style=wA.locals||wA}),null,null),TA=kA.exports,SA={name:"PuzzlesTimer",props:{minutes:{required:!0,type:Number},seconds:{required:!0,type:String}}},CA={component:"timer-component"};var xA=(0,Rr.Z)(SA,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("div",{class:i.$style.minutes,domProps:{textContent:i._s(i.minutes)}}),i._v(" "),_("span",{domProps:{textContent:i._s(":")}}),i._v(" "),_("div",{class:i.$style.seconds,domProps:{textContent:i._s(i.seconds)}})])}),[],!1,(function shared_timer_injectStyles(i){this.$style=CA.locals||CA}),null,null),EA=xA.exports,PA=Object.defineProperty,AA=Object.defineProperties,OA=Object.getOwnPropertyDescriptors,MA=Object.getOwnPropertySymbols,zA=Object.prototype.hasOwnProperty,IA=Object.prototype.propertyIsEnumerable,rated_timervue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?PA(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,rated_timervue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))zA.call(s,_)&&rated_timervue_type_script_lang_js_defNormalProp(i,_,s[_]);if(MA)for(var _ of MA(s))IA.call(s,_)&&rated_timervue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},LA={name:"RatedTimer",components:{Clock:TA,Timer:EA},directives:{tooltip:Ur.Z},props:{isUnrated:Boolean},data:()=>({sidebar:getSidebarDimensions(),tickInterval:null,timeElapsed:0,timer:{minutes:0,seconds:"00"}}),computed:((i,s)=>AA(i,OA(s)))(rated_timervue_type_script_lang_js_spreadValues(rated_timervue_type_script_lang_js_spreadValues({},(0,dr.mapState)("puzzlesRated",["puzzleStartTimestamp"])),(0,dr.mapState)({gameplayState:({puzzles:i})=>i.gameplayState,isLoggedIn:i=>i.user.isLoggedIn,userRatingInfo:i=>i.puzzlesRated.currentUserRatingInfo})),{isSpeedBonusVisible(){return!this.isUnrated&&this.puzzleWasSolved&&this.isLoggedIn&&!isNaN(this.userRatingInfo.score)},puzzleWasSolved(){return[_n.SOLVED,_n.SOLVED_WITH_HINT].includes(this.gameplayState)}}),mounted(){O.Z.on(bt,this.start),O.Z.on(yt,this.end)},beforeDestroy(){O.Z.off([bt,yt]),this.end()},methods:{start(){clearInterval(this.tickInterval),this.timeElapsed=0,this.tickInterval=setInterval(this.updateTimer,wt.CLOCK_INTERVAL)},end({totalTime:i=null}={}){if(clearInterval(this.tickInterval),i){const{mins:s,secs:_}=secondsToMinutesAndSecondsObject({padSeconds:!0,seconds:i});this.timer={minutes:s,seconds:_}}},updateTimer(i=Date.now()){this.timer=formatTimer({startTime:this.puzzleStartTimestamp,finishTime:i}),this.timer.seconds!==formatTimer({startTime:this.puzzleStartTimestamp,finishTime:i+wt.CLOCK_INTERVAL}).seconds&&(this.timeElapsed=i-this.puzzleStartTimestamp)}}},RA=LA,NA={component:"rated-timer-component","speed-bonus":"rated-timer-speed-bonus",timer:"rated-timer-timer",clock:"rated-timer-clock"};var DA=(0,Rr.Z)(RA,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return i.sidebar.width>330?_("div",{class:i.$style.component},[i.sidebar.width>400?[i.isSpeedBonusVisible?_("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.$trans("Speed Bonus"),expression:"$trans('Speed Bonus')"}],class:i.$style["speed-bonus"],domProps:{textContent:i._s(i.userRatingInfo.score.toFixed()+"%")}}):i._e(),i._v(" "),_("clock",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.timer.minutes+":"+i.timer.seconds,expression:"`${timer.minutes}:${timer.seconds}`"}],ref:"clock",class:i.$style.clock,attrs:{"time-elapsed":i.timeElapsed}})]:i._e(),i._v(" "),_("timer",{class:i.$style.timer,attrs:{minutes:i.timer.minutes,seconds:i.timer.seconds}})],2):i._e()}),[],!1,(function rated_timer_injectStyles(i){this.$style=NA.locals||NA}),null,null),jA=DA.exports,BA=Object.defineProperty,$A=Object.defineProperties,UA=Object.getOwnPropertyDescriptors,FA=Object.getOwnPropertySymbols,HA=Object.prototype.hasOwnProperty,qA=Object.prototype.propertyIsEnumerable,rated_topvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?BA(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,VA={name:"RatedTop",components:{Avatar:Zv,RatedTimer:jA,RatedStreakInfo:hA,UserRatingAnimated:pT},data:()=>({timeoutDurations:Object.freeze(wt)}),computed:((i,s)=>$A(i,UA(s)))(((i,s)=>{for(var _ in s||(s={}))HA.call(s,_)&&rated_topvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(FA)for(var _ of FA(s))qA.call(s,_)&&rated_topvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i})({},(0,dr.mapState)({currentPuzzleRetryCount:({puzzlesRated:i})=>i.currentPuzzleRetryCount,gameplayState:({puzzles:i})=>i.gameplayState,isLoggedIn:i=>i.user.isLoggedIn,puzzleId:({puzzles:i})=>i.puzzle.id,puzzleIsSubmiting:({puzzlesRated:i})=>i.puzzleIsSubmiting,roundResults:({puzzlesRated:i})=>i.roundResults,showTimer:({puzzles:i})=>i.showTimer,userRatingInfo:i=>i.puzzlesRated.currentUserRatingInfo,user:({user:i,puzzles:s})=>({avatarUrl:i.avatarLargeUrl,isLoggedIn:i.isLoggedIn,rating:s.stats.rating,username:i.username})})),{delta(){return(({puzzleId:i,roundResults:s})=>{if(!s.length)return;const _=s.find((({puzzle:s})=>s.id===i));return _?_.results.ratingDelta:void 0})({puzzleId:this.puzzleId,roundResults:this.roundResults})},isUnrated(){return!this.user.isLoggedIn||(({currentPuzzleRetryCount:i})=>i>0)({currentPuzzleRetryCount:this.currentPuzzleRetryCount})},showDelta(){return void 0!==this.delta&&[_n.MOVE_INCORRECT,_n.SOLVED,_n.SOLVED_WITH_HINT].includes(this.gameplayState)},showStreakInfo(){return Boolean(this.user.isLoggedIn&&void 0!==this.userRatingInfo.currentStreak&&void 0!==this.userRatingInfo.highestStreak&&this.userRatingInfo.currentStreak>1&&this.gameplayState===_n.SOLVED)},unratedText(){return this.user.isLoggedIn?kt.unrated:kt.guest}}),watch:{showDelta(i){i&&setTimeout((()=>{this.$refs.rating&&this.$refs.rating.animate()}))}}},GA=VA,ZA={component:"rated-top-component",avatar:"rated-top-avatar",info:"rated-top-info",unrated:"rated-top-unrated",rating:"rated-top-rating",timer:"rated-top-timer"};var WA=(0,Rr.Z)(GA,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("avatar",{class:i.$style.avatar,attrs:{alt:i.user.username,src:i.user.avatarUrl}}),i._v(" "),_("div",{class:i.$style.info},[i.isUnrated?_("div",{class:i.$style.unrated,domProps:{textContent:i._s(i.unratedText)}}):i.showDelta?_("user-rating-animated",{ref:"rating",attrs:{"initial-rating":i.user.rating-i.delta,"rating-delta":i.delta,classes:i.$style}}):_("div",{class:i.$style.rating,domProps:{textContent:i._s(i.user.rating)}}),i._v(" "),_("rated-timer",{directives:[{name:"show",rawName:"v-show",value:i.showTimer,expression:"showTimer"}],class:i.$style.timer,attrs:{"is-unrated":i.isUnrated}}),i._v(" "),i.showStreakInfo?_("rated-streak-info",{attrs:{"current-streak":i.userRatingInfo.currentStreak,"highest-streak":i.userRatingInfo.highestStreak,"is-new-highest-streak":i.userRatingInfo.isNewHighestStreak}}):i._e()],1)],1)}),[],!1,(function rated_top_injectStyles(i){this.$style=ZA.locals||ZA}),null,null),KA=WA.exports,YA=Object.defineProperty,XA=Object.defineProperties,QA=Object.getOwnPropertyDescriptors,JA=Object.getOwnPropertySymbols,eO=Object.prototype.hasOwnProperty,tO=Object.prototype.propertyIsEnumerable,rated_sidebarvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?YA(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,rated_sidebarvue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))eO.call(s,_)&&rated_sidebarvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(JA)for(var _ of JA(s))tO.call(s,_)&&rated_sidebarvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},nO={name:"RatedSidebar",components:{EndPuzzleStats:pP,PlayActionTray:Vf,PrimaryControlButtons:hx,RatedPeripheralView:vP,RatedTop:KA,RecentAttemptsChart:nP,SidebarStart:oA},data:()=>({gameplayStates:Object.freeze(_n)}),computed:((i,s)=>XA(i,QA(s)))(rated_sidebarvue_type_script_lang_js_spreadValues({},(0,dr.mapState)({gameplayState:({puzzles:i})=>i.gameplayState,hasReachedLimit:({puzzles:i})=>i.reachedLimits.rated,initialRating:({puzzles:i})=>i.stats.initialRating,roundResults:i=>i.puzzlesRated.roundResults,username:({user:i})=>i.username})),{loggedIn:()=>(0,$i.j)(),stateIsEndGame(){return[_n.MOVE_INCORRECT,_n.SOLUTION,_n.SOLVED,_n.SOLVED_WITH_HINT].includes(this.gameplayState)}}),created(){(0,qi.X)({puzzlesRated:gE}),this.username&&this.fetchRatingOverTime(30)},methods:rated_sidebarvue_type_script_lang_js_spreadValues({},(0,dr.mapActions)({fetchRatingOverTime:"puzzlesRated/fetchRatingOverTime",nextPuzzle:"puzzlesRated/nextPuzzle",restartPuzzle:"puzzlesRated/restartPuzzle",retryPuzzle:"puzzlesRated/retryPuzzle"}))},rO=nO,iO={cap:"rated-sidebar-cap","mobile-order-1":"rated-sidebar-mobile-order-1","mobile-order-2":"rated-sidebar-mobile-order-2","mobile-order-3":"rated-sidebar-mobile-order-3","mobile-order-4":"rated-sidebar-mobile-order-4","mobile-order-5":"rated-sidebar-mobile-order-5",buttons:"rated-sidebar-buttons",header:"rated-sidebar-header",footer:"rated-sidebar-footer","primary-control-wrapper":"rated-sidebar-primary-control-wrapper"};var aO=(0,Rr.Z)(rO,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",[i.hasReachedLimit?_("sidebar-start",{class:i.$style["mobile-order-1"]}):i.gameplayState!==i.gameplayStates.START?[_("rated-peripheral-view",{class:i.$style.cap}),i._v(" "),_("rated-top",{class:[i.$style.header,i.$style["mobile-order-1"]]})]:i._e(),i._v(" "),i.initialRating?[_("recent-attempts-chart",{directives:[{name:"show",rawName:"v-show",value:i.stateIsEndGame,expression:"stateIsEndGame"}],class:i.$style["mobile-order-3"],attrs:{data:i.roundResults,"starting-rating":i.initialRating}})]:i._e(),i._v(" "),i.stateIsEndGame?_("end-puzzle-stats",{class:i.$style["mobile-order-4"]}):i._e(),i._v(" "),i.gameplayState!==i.gameplayStates.START?[_("div",{class:i.$style.footer},[_("div",{class:i.$style["primary-control-wrapper"]},[_("primary-control-buttons",{class:[i.$style["mobile-order-2"]],attrs:{"disable-next-puzzle":!1,"next-puzzle":i.nextPuzzle,"restart-puzzle":i.restartPuzzle,"retry-puzzle":i.retryPuzzle}})],1),i._v(" "),_("play-action-tray",{class:i.$style["mobile-order-5"]})],1)]:i._e()],2)}),[],!1,(function rated_sidebar_injectStyles(i){this.$style=iO.locals||iO}),null,null),sO=aO.exports,oO=Object.defineProperty,lO=Object.defineProperties,cO=Object.getOwnPropertyDescriptors,uO=Object.getOwnPropertySymbols,dO=Object.prototype.hasOwnProperty,hO=Object.prototype.propertyIsEnumerable,modal_rush_over_capvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?oO(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,modal_rush_over_capvue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))dO.call(s,_)&&modal_rush_over_capvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(uO)for(var _ of uO(s))hO.call(s,_)&&modal_rush_over_capvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},pO={name:"ModalRushOverCap",data:()=>({seed:Math.random()}),computed:((i,s)=>lO(i,cO(s)))(modal_rush_over_capvue_type_script_lang_js_spreadValues(modal_rush_over_capvue_type_script_lang_js_spreadValues({},(0,dr.mapGetters)({solvedRounds:"puzzlesRush/solvedRounds"})),(0,dr.mapState)({archivedPuzzleChallenge:i=>i.puzzlesRush.archivedPuzzleChallenge,bestScores:i=>i.puzzlesRush.userStats.previousBestScores,fetchingStats:i=>i.puzzlesRush.fetchingStats,username:i=>i.user.username})),{tierCap(){if(this.username===this.archivedPuzzleChallenge.username&&this.bestScores.global){const i=(({bestScores:i,solvedRounds:s})=>{if([0,null].includes(i.global))return s>0?en:Xt;const _=s/i.global;return _>1?en:s>i.week?nn:s>i.day?tn:_>=.8&&_<=1?Jt:_>=.5&&_<.8?Qt:_<.5?Xt:void 0})({bestScores:this.bestScores,solvedRounds:this.solvedRounds});return cn[i]}return cn[Yt]},title(){if(this.fetchingStats)return"";const i=Math.floor(this.seed*this.tierCap.titles.length);return this.tierCap.titles[i]},fontSizeForTitle(){return this.title.length>20?"normal":"large"}}),created(){O.Z.once(zt,this.playRushOverSound)},methods:{playRushOverSound(){this.tierCap.soundCode&&playSoundEffect(this.tierCap.soundCode)}}},mO=pO,fO={component:"modal-rush-over-cap-component",grey:"modal-rush-over-cap-grey",animate:"modal-rush-over-cap-animate"};var gO=(0,Rr.Z)(mO,(function(){var i,s=this,_=s.$createElement,T=s._self._c||_;return T("div",{class:[s.$style.component,s.$style[s.tierCap.theme]]},[T("h1",{class:(i={},i[s.$style.animate]=s.title,i),domProps:{textContent:s._s(s.title)}}),s._v(" "),s._t("default")],2)}),[],!1,(function modal_rush_over_cap_injectStyles(i){this.$style=fO.locals||fO}),null,null),vO=gO.exports,bO={name:"PuzzleStat",components:{LoaderThreeBounce:sl.Z},props:{icon:{type:String,required:!0},label:{type:String,required:!0},fetching:{type:Boolean,default:!1},showLoader:{type:Boolean,default:!1},showPound:{type:Boolean,default:!1},stat:{type:Number,default:null}}},yO={component:"puzzle-stat-component",loader:"puzzle-stat-loader",stat:"puzzle-stat-stat","has-pound":"puzzle-stat-has-pound",icon:"puzzle-stat-icon",label:"puzzle-stat-label"};var _O=(0,Rr.Z)(bO,(function(){var i,s=this,_=s.$createElement,T=s._self._c||_;return T("div",{class:s.$style.component},[T("div",{staticClass:"icon-font-chess",class:[s.$style.icon,s.icon]}),s._v(" "),T("div",{class:s.$style.label,domProps:{textContent:s._s(s.label)}}),s._v(" "),s.fetching?s._e():T("div",{class:[s.$style.stat,(i={},i[s.$style["has-pound"]]=s.showPound,i)]},[s.showPound?T("span",{domProps:{textContent:s._s("#")}}):s._e(),s._v("\n\n    "+s._s(s.stat||"--")+"\n  ")]),s._v(" "),s.showLoader?T("div",{class:s.$style.stat},[T("loader-three-bounce",{class:s.$style.loader,attrs:{size:50}})],1):s._e()])}),[],!1,(function puzzle_stat_injectStyles(i){this.$style=yO.locals||yO}),null,null),wO=_O.exports,kO=Object.defineProperty,TO=Object.getOwnPropertySymbols,SO=Object.prototype.hasOwnProperty,CO=Object.prototype.propertyIsEnumerable,session_rank_statsvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?kO(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,xO={name:"SessionRankStats",components:{PuzzleStat:wO},props:{animations:{type:Object,require:!0}},data:()=>({rushRankOptions:Kt}),computed:((i,s)=>{for(var _ in s||(s={}))SO.call(s,_)&&session_rank_statsvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(TO)for(var _ of TO(s))CO.call(s,_)&&session_rank_statsvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i})({},(0,dr.mapState)({fetchingStats:({puzzlesRush:i})=>i.fetchingStats,stat:({puzzlesRush:i})=>i.archivedPuzzleChallenge.rank,challengeRanks:({puzzlesRush:i})=>i.challengeRanks}))},EO=xO,PO={component:"session-rank-stats-component",stat:"session-rank-stats-stat",animate:"session-rank-stats-animate"};var AO=(0,Rr.Z)(EO,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},i._l(i.rushRankOptions,(function(s){var T;return _("puzzle-stat",{key:s.key,class:[i.$style.stat,(T={},T[i.$style.animate]=i.animations[s.key],T)],attrs:{icon:s.icon,label:s.label,"show-loader":!1,"show-pound":!0,stat:i.fetchingStats?0:i.challengeRanks[s.key]}})})),1)}),[],!1,(function session_rank_stats_injectStyles(i){this.$style=PO.locals||PO}),null,null),OO=AO.exports,MO={name:"PuzzleScoreDisplay",components:{Avatar:Zv},directives:{UserPopover:eu},props:{avatarUrl:{type:String,default:null},isCollapsed:{type:Boolean,default:!1},score:{type:Number,required:!0},showUsername:{type:Boolean,default:!1},size:{type:String,default:"medium"},username:{type:String,default:""}},data:()=>({rtlClass:rtlClass}),computed:{scoreContent(){if(this.username)return 0===this.score?"--":this.score}}},zO={component:"puzzle-score-display-component",collapsed:"puzzle-score-display-collapsed",avatar:"puzzle-score-display-avatar","right-to-left":"puzzle-score-display-right-to-left",details:"puzzle-score-display-details",username:"puzzle-score-display-username",record:"puzzle-score-display-record",medium:"puzzle-score-display-medium",large:"puzzle-score-display-large"};var IO=(0,Rr.Z)(MO,(function(){var i,s,_=this,T=_.$createElement,S=_._self._c||T;return S("div",{class:[_.$style.component,(i={},i[_.$style.collapsed]=_.isCollapsed,i)]},[S("avatar",{class:[_.$style.avatar,_.$style[_.size],_.rtlClass(_.$style)],attrs:{alt:_.username,src:_.avatarUrl}}),_._v(" "),S("div",{class:_.$style.details},[_.showUsername?S("span",{directives:[{name:"user-popover",rawName:"v-user-popover",value:_.username,expression:"username"}],class:_.$style.username,domProps:{textContent:_._s(_.username)}}):_._e(),_._v(" "),S("span",{class:(s={},s[_.$style.record]=_.showUsername,s),domProps:{textContent:_._s(_.scoreContent)}})])],1)}),[],!1,(function puzzle_score_display_injectStyles(i){this.$style=zO.locals||zO}),null,null),LO=IO.exports,RO=Object.defineProperty,NO=Object.defineProperties,DO=Object.getOwnPropertyDescriptors,jO=Object.getOwnPropertySymbols,BO=Object.prototype.hasOwnProperty,$O=Object.prototype.propertyIsEnumerable,modal_rush_overvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?RO(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,modal_rush_overvue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))BO.call(s,_)&&modal_rush_overvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(jO)for(var _ of jO(s))$O.call(s,_)&&modal_rush_overvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},modal_rush_overvue_type_script_lang_js_spreadProps=(i,s)=>NO(i,DO(s)),UO={name:"ModalRushOver",components:{ModalChessboardContainer:bi,ModalContent:yi.Z,ModalRushOverCap:vO,PuzzleScoreDisplay:LO,SessionRankStats:OO},data:({$style:i})=>({animations:{cap:!1,score:!1,day:!1,week:!1,global:!1},routes:getRoutes(),transitionClasses:{enter:i["modal-enter"],leave:i["modal-leave"],modal:i["modal-modal"]}}),computed:modal_rush_overvue_type_script_lang_js_spreadProps(modal_rush_overvue_type_script_lang_js_spreadValues(modal_rush_overvue_type_script_lang_js_spreadValues({},(0,dr.mapGetters)("puzzlesRush",["solvedRounds"])),(0,dr.mapState)({durationCode:({puzzlesRush:i})=>i.archivedPuzzleChallenge.type,roundResults:({puzzlesRush:i})=>i.roundResults,user({puzzlesRush:i}){const{avatarUrl:s,username:_}=i.archivedPuzzleChallenge;return{avatarUrl:s,username:_}},userIsLoggedIn:i=>i.user.isLoggedIn})),{averageTime(){return(i=>{if(i.length<1)return(0,Ar.mr)(0);const s=i.reduce(((i,{duration:s})=>i+s),0),_=Math.floor(s/i.length);return(0,Ar.mr)(_)})(this.roundResults.slice(0,this.roundResults.length-1))},highestSolvedRating(){return(i=>{let s=i.reduce(((i,s)=>s.solved&&s.rating>i.rating?s:i),{rating:0});return 0===s.rating&&(s=null),s})(this.roundResults)},longestStreak(){return(i=>{const s=i.reduce(((i,s)=>(s.solved&&i[i.length-1]++,!1===s.solved&&0!==i[i.length-1]&&i.push(0),i)),[0]);return Math.max(...s)})(this.roundResults)},newGameText(){return i=this.durationCode,{[kn.FIVE_MINUTES]:(0,j.dW)("New %num% min",{"%num%":5}),[kn.THREE_MINUTES]:(0,j.dW)("New %num% min",{"%num%":3}),[kn.SURVIVAL]:(0,j.dW)("New Survival")}[i];var i},tacticView(){if(this.highestSolvedRating)return Vt.tacticView(this.highestSolvedRating.id)}}),mounted(){O.Z.on(Mt,this.closeModal)},methods:modal_rush_overvue_type_script_lang_js_spreadProps(modal_rush_overvue_type_script_lang_js_spreadValues({},(0,dr.mapActions)({startSession:"puzzles/startSession"})),{applyAnimations(){[{keys:["day"],delay:0},{keys:["week"],delay:120},{keys:["global","score"],delay:120},{keys:["cap"],delay:100}].map((i=>()=>new Promise((s=>{setTimeout((()=>{i.keys.forEach((i=>{this.animations[i]=!0})),s()}),i.delay)})))).reduce(((i,s)=>i.then(s)),Promise.resolve())},closeModal(){this.$refs.modal.hide(),Object.keys(this.animations).forEach((i=>{this.animations[i]=!1})),B_.Z.unregister()},playAgain(){this.startSession(vn.RUSH)},showModal(){this.$refs.modal.show(),setTimeout(this.applyAnimations,600),B_.Z.register({keys:{Enter:()=>this.playAgain(),Escape:()=>this.closeModal()}})},showShareModal(){O.Z.emit(Rt)}})},FO=UO,HO={"modal-enter":"modal-rush-over-modal-enter","modal-leave":"modal-rush-over-modal-leave",component:"modal-rush-over-component",rounded:"modal-rush-over-rounded",cap:"modal-rush-over-cap","cap-is-active":"modal-rush-over-cap-is-active",score:"modal-rush-over-score","score-is-active":"modal-rush-over-score-is-active",close:"modal-rush-over-close",rankings:"modal-rush-over-rankings",stats:"modal-rush-over-stats",stat:"modal-rush-over-stat","stat-icon":"modal-rush-over-stat-icon","stat-row":"modal-rush-over-stat-row",border:"modal-rush-over-border","stat-value":"modal-rush-over-stat-value",footer:"modal-rush-over-footer",buttons:"modal-rush-over-buttons",new:"modal-rush-over-new",play:"modal-rush-over-play",share:"modal-rush-over-share"};var qO=(0,Rr.Z)(FO,(function(){var i,s,_=this,T=_.$createElement,S=_._self._c||T;return S("modal-chessboard-container",{ref:"modal",attrs:{"close-on-background-click":!1,transition:_.transitionClasses}},[S("modal-content",{class:_.$style.rounded},[S("div",{class:_.$style.component},[S("div",{staticClass:"icon-font-chess x",class:_.$style.close,on:{click:_.closeModal}}),_._v(" "),S("modal-rush-over-cap",{class:[_.$style.cap,(i={},i[_.$style["cap-is-active"]]=_.animations.cap,i)]}),_._v(" "),S("puzzle-score-display",{class:[_.$style.score,(s={},s[_.$style["score-is-active"]]=_.animations.score,s)],attrs:{size:"large","avatar-url":_.user.avatarUrl,"is-collapsed":!0,score:_.solvedRounds,username:_.user.username}}),_._v(" "),S("session-rank-stats",{class:_.$style.rankings,attrs:{animations:_.animations}}),_._v(" "),S("div",{class:_.$style.stats},[S("div",{class:_.$style.stat},[S("div",{staticClass:"icon-font-chess fire-alt",class:_.$style["stat-icon"]}),_._v(" "),S("div",{class:[_.$style["stat-row"],_.$style.border]},[S("div",{class:_.$style["stat-label"],domProps:{textContent:_._s(_.$trans("Longest Streak"))}}),_._v(" "),S("div",{class:_.$style["stat-value"],domProps:{textContent:_._s(_.longestStreak)}})])]),_._v(" "),S("div",{class:_.$style.stat},[S("div",{staticClass:"icon-font-chess square-checkmark",class:_.$style["stat-icon"]}),_._v(" "),S("div",{class:[_.$style["stat-row"],_.$style.border]},[S("div",{class:_.$style["stat-label"]},[_._v("\n              "+_._s(_.$trans("Highest Solved"))+"\n\n              "),_.highestSolvedRating?S("span",[_._v("\n                ("),S("a",{attrs:{rel:"noopener",target:"_blank",href:_.tacticView}},[_._v("#"+_._s(_.highestSolvedRating.id))]),_._v(")\n              ")]):_._e()]),_._v(" "),S("div",{class:_.$style["stat-value"],domProps:{textContent:_._s(_.highestSolvedRating?_.highestSolvedRating.rating:"--")}})])]),_._v(" "),S("div",{class:_.$style.stat},[S("div",{staticClass:"icon-font-chess circle-clock",class:_.$style["stat-icon"]}),_._v(" "),S("div",{class:_.$style["stat-row"]},[S("div",{class:_.$style["stat-label"],domProps:{textContent:_._s(_.$trans("Avg Time per Puzzle"))}}),_._v(" "),S("div",{class:_.$style["stat-value"],domProps:{textContent:_._s(_.averageTime)}})])])])],1)])],1)}),[],!1,(function modal_rush_over_injectStyles(i){this.$style=HO.locals||HO}),null,null),VO=qO.exports,GO={name:"ModalSocialShare",components:{SocialShare:Cu.Z},props:{imgUrl:{type:String,required:!0},isOpenGraphFormat:{type:Boolean,default:!1},link:{type:String},title:{type:String}},emits:["show-modal","hide-modal"],data:()=>({clickEventListenerRef:null}),mounted(){this.clickEventListenerRef=this.clickEventListener.bind(this),this.showModal()},beforeDestroy(){this.removeClickListener()},methods:{addClickListener(){document.addEventListener("click",this.clickEventListenerRef)},clickEventListener(i){var s;const _=null==(s=this.$refs.content)?void 0:s.$el,T=i.target;_===T||_.contains(T)||this.hideModal()},hideModal(){this.$emit("hide-modal"),this.removeClickListener()},removeClickListener(){document.removeEventListener("click",this.clickEventListenerRef)},showModal(){this.$emit("show-modal"),setTimeout(this.addClickListener)}}},ZO=GO,WO={component:"modal-share-content-component",title:"modal-share-content-title","image-wrapper":"modal-share-content-image-wrapper",image:"modal-share-content-image","open-graph":"modal-share-content-open-graph",share:"modal-share-content-share"};var KO=(0,Rr.Z)(ZO,(function(){var i,s=this,_=s.$createElement,T=s._self._c||_;return T("div",{ref:"content",staticClass:"v5-section-content",class:s.$style.component},[s.link&&s.title?T("h3",{class:s.$style.title},[T("a",{attrs:{href:s.link},domProps:{textContent:s._s(s.title)}})]):s._e(),s._v(" "),!s.link&&s.title?T("h3",{class:s.$style.title,domProps:{textContent:s._s(s.title)}}):s._e(),s._v(" "),T("div",{class:s.$style["image-wrapper"]},[s.imgUrl?T("img",{class:[s.$style.image,(i={},i[s.$style["open-graph"]]=s.isOpenGraphFormat,i)],attrs:{width:"612",alt:s.title,height:[s.isOpenGraphFormat?321:344],src:s.imgUrl}}):s._e()]),s._v(" "),T("social-share",{class:s.$style.share})],1)}),[],!1,(function modal_share_content_injectStyles(i){this.$style=WO.locals||WO}),null,null),YO=KO.exports,XO=Object.defineProperty,QO=Object.defineProperties,JO=Object.getOwnPropertyDescriptors,eM=Object.getOwnPropertySymbols,tM=Object.prototype.hasOwnProperty,nM=Object.prototype.propertyIsEnumerable,modal_rush_sharevue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?XO(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,rM={name:"ModalRushShare",components:{Modal:Tr.Modal,ModalShareContent:YO,OutsideClose:Tr.OutsideClose},computed:((i,s)=>QO(i,JO(s)))(((i,s)=>{for(var _ in s||(s={}))tM.call(s,_)&&modal_rush_sharevue_type_script_lang_js_defNormalProp(i,_,s[_]);if(eM)for(var _ of eM(s))nM.call(s,_)&&modal_rush_sharevue_type_script_lang_js_defNormalProp(i,_,s[_]);return i})({},(0,dr.mapState)({challengeId:({puzzlesRush:i})=>i.archivedPuzzleChallenge.challengeId,archivedPuzzleChallenge:({puzzlesRush:i})=>i.archivedPuzzleChallenge})),{imgUrl(){return this.archivedPuzzleChallenge?Vt.shareNewImage(this.archivedPuzzleChallenge):this.challengeId?Vt.shareImage(this.challengeId):""}}),methods:{hideModal(){this.$refs.modal.hide()},showModal(){this.$refs.modal.show()}}},iM=rM,aM=(0,Rr.Z)(iM,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("Modal",{ref:"modal",attrs:{corners:"rounded-lg"}},[_("outside-close",{on:{click:i.hideModal}}),i._v(" "),_("modal-share-content",{attrs:{"img-url":i.imgUrl,"is-open-graph-format":!0},on:{"hide-modal":i.hideModal,"show-modal":i.showModal}})],1)}),[],!1,null,null,null),sM=aM.exports;var oM=(0,ir.Z)({[Ut]:{component:gk,el:`#${Ut}`,store:st.default},[Ft]:{component:VO,el:`#${Ft}`,store:st.default},[Ht]:{component:sM,el:`#${Ht}`,store:st.default}}),lM=Object.defineProperty,cM=Object.getOwnPropertySymbols,uM=Object.prototype.hasOwnProperty,dM=Object.prototype.propertyIsEnumerable,rush_peripheral_viewvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?lM(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,hM={name:"PeripheralView",mixins:[Tm],data:()=>({MAXIMUM_STRIKES_ALLOWED:3}),computed:((i,s)=>{for(var _ in s||(s={}))uM.call(s,_)&&rush_peripheral_viewvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(cM)for(var _ of cM(s))dM.call(s,_)&&rush_peripheral_viewvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i})({},(0,dr.mapGetters)("puzzlesRush",["strikes"]))},pM=hM,mM={"icon-start":"rush-peripheral-view-icon-start","icon-red-faded":"rush-peripheral-view-icon-red-faded","icon-strike":"rush-peripheral-view-icon-strike","icon-correct":"rush-peripheral-view-icon-correct",loader:"rush-peripheral-view-loader"};var fM=(0,Rr.Z)(pM,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("section-heading",{attrs:{theme:i.peripheralState.headingTheme,title:i.peripheralState.headingTitle}},[[i.gameplayStates.START,i.gameplayStates.FINISHED].includes(i.gameplayState)?[_("div",{staticClass:"icon-font-chess fire-puzzle",class:i.$style["icon-start"]})]:i._e(),i._v(" "),i.gameplayState===i.gameplayStates.MOVE_CORRECT?[_("div",{staticClass:"icon-font-chess checkmark",class:i.$style["icon-correct"]})]:i._e(),i._v(" "),i.gameplayState===i.gameplayStates.MOVE_INCORRECT?i._l(i.MAXIMUM_STRIKES_ALLOWED,(function(s){var T;return _("div",{key:s,staticClass:"icon-font-chess square-x",class:[i.$style["icon-strike"],(T={},T[i.$style["icon-red-faded"]]=s>i.strikes,T)]})})):i._e(),i._v(" "),i.gameplayState===i.gameplayStates.USER_MOVE?[_("sidebar-status-square",{attrs:{"is-white":i.isUserWhite}})]:i._e()],2)}),[],!1,(function rush_peripheral_view_injectStyles(i){this.$style=mM.locals||mM}),null,null),gM=fM.exports,vM={name:"StreakIndicator",components:{StreakIcon:Zg},directives:{BoardPopover:zv},props:{rounds:{type:Array,required:!0},isEnabled:{type:Boolean,default:!1},centered:{type:Boolean,default:!1},roundLength:{type:Number},iconSize:{type:String,default:"medium",validator:i=>["medium","large"].includes(i)},animated:{type:Boolean,default:!1}},emits:["click"],computed:{emptyRounds(){return this.roundLength?this.roundLength-this.rounds.length:0}},methods:{getIcon(i){switch(i){case!0:return Wg;case!1:return Yg;default:return Kg}},onClick(i){this.isEnabled&&this.$emit("click",i)},popoverDetails:i=>({fen:addTcnToFen(i.initialFen,i.initialTcn),flipBoard:i.flipBoard,highlightedSquares:i.initialMove})}},bM={component:"streak-indicator-component",center:"streak-indicator-center",large:"streak-indicator-large",streak:"streak-indicator-streak",link:"streak-indicator-link",icon:"streak-indicator-icon",correct:"streak-indicator-correct",incorrect:"streak-indicator-incorrect",void:"streak-indicator-void"};var yM=(0,Rr.Z)(vM,(function(){var i,s=this,_=s.$createElement,T=s._self._c||_;return T("div",{class:[s.$style.component,(i={},i[s.$style.center]=s.centered,i),s.$style[s.iconSize]]},[s._l(s.rounds,(function(i,_){var S;return T("div",{key:_,class:[s.$style.streak,(S={},S[s.$style.correct]=!0===i.solved,S[s.$style.incorrect]=!1===i.solved,S[s.$style.link]=s.isEnabled,S[s.$style.void]=null===i.solved,S)],on:{click:function(_){return s.onClick(i)}}},[s.isEnabled?T("streak-icon",{directives:[{name:"board-popover",rawName:"v-board-popover",value:s.popoverDetails(i),expression:"popoverDetails(round)"}],class:s.$style.icon,attrs:{animated:s.animated,size:s.iconSize,icon:s.getIcon(i.solved)}}):T("streak-icon",{class:s.$style.icon,attrs:{animated:s.animated,size:s.iconSize,icon:s.getIcon(i.solved)}}),s._v("\n\n    "+s._s(i.label)+"\n  ")],1)})),s._v(" "),s.roundLength?s._l(s.emptyRounds,(function(i,_){return T("div",{key:"empty-"+_,class:s.$style.streak},[T("streak-icon",{class:s.$style.icon,attrs:{icon:"square-empty",size:s.iconSize}})],1)})):s._e()],2)}),[],!1,(function streak_indicator_injectStyles(i){this.$style=bM.locals||bM}),null,null),_M=yM.exports,wM=Object.defineProperty,kM=Object.defineProperties,TM=Object.getOwnPropertyDescriptors,SM=Object.getOwnPropertySymbols,CM=Object.prototype.hasOwnProperty,xM=Object.prototype.propertyIsEnumerable,show_timer_mixin_defNormalProp=(i,s,_)=>s in i?wM(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,EM={computed:((i,s)=>kM(i,TM(s)))(((i,s)=>{for(var _ in s||(s={}))CM.call(s,_)&&show_timer_mixin_defNormalProp(i,_,s[_]);if(SM)for(var _ of SM(s))xM.call(s,_)&&show_timer_mixin_defNormalProp(i,_,s[_]);return i})({},(0,dr.mapGetters)({isArchivedPuzzleChallenge:"puzzlesRush/isArchivedPuzzleChallenge",timeConstraint:"puzzles/timeConstraint"})),{showTimer(){return this.isArchivedPuzzleChallenge?this.archivedPuzzleChallenge.type!==kn.SURVIVAL:this.timeConstraint!==wn.SURVIVAL}})},PM={name:"PuzzleAction",props:{disabled:{type:Boolean,default:!1}},emits:["click"]},AM={component:"puzzle-action-component",disabled:"puzzle-action-disabled",icon:"puzzle-action-icon",label:"puzzle-action-label"};var OM=(0,Rr.Z)(PM,(function(){var i,s=this,_=s.$createElement,T=s._self._c||_;return T("div",{class:[s.$style.component,(i={},i[s.$style.disabled]=s.disabled,i)],on:{click:function(i){return s.$emit("click",i)}}},[T("div",{class:s.$style.icon},[s._t("icon")],2),s._v(" "),T("div",{class:s.$style.label},[s._t("label")],2)])}),[],!1,(function puzzle_action_injectStyles(i){this.$style=AM.locals||AM}),null,null),MM=OM.exports,zM=Object.defineProperty,IM=Object.defineProperties,LM=Object.getOwnPropertyDescriptors,RM=Object.getOwnPropertySymbols,NM=Object.prototype.hasOwnProperty,DM=Object.prototype.propertyIsEnumerable,rush_play_action_trayvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?zM(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,rush_play_action_trayvue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))NM.call(s,_)&&rush_play_action_trayvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(RM)for(var _ of RM(s))DM.call(s,_)&&rush_play_action_trayvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},jM={components:{ActionTray:tf,PrevNextArrows:_f,PuzzleAction:MM,V5Button:Tr.V5Button},data:()=>({gameplayStates:_n}),computed:rush_play_action_trayvue_type_script_lang_js_spreadValues({},(0,dr.mapState)({gameplayState:i=>i.puzzles.gameplayState,sessionIsInProgress:i=>i.puzzlesRush.sessionIsInProgress})),methods:((i,s)=>IM(i,LM(s)))(rush_play_action_trayvue_type_script_lang_js_spreadValues(rush_play_action_trayvue_type_script_lang_js_spreadValues({},(0,dr.mapActions)({endSession:"puzzlesRush/endSession",resetGame:"game/resetGame",startSession:"puzzles/startSession"})),(0,dr.mapMutations)({setSidebarView:"puzzlesRush/setSidebarView",setGameplayState:"puzzles/setGameplayState"})),{quit(){this.sessionIsInProgress&&this.endSession()},showShareModal(){O.Z.emit(Rt)},playAgain(){this.startSession(vn.RUSH)},goHome(){this.resetGame(),this.$router.push({name:Hn.RUSH}),this.setSidebarView(sn),this.setGameplayState(_n.START),O.Z.emit(Mt)}})},BM=jM,$M={row:"play-action-tray-row",hiddenRow:"play-action-tray-hiddenRow",button:"play-action-tray-button","stat-icon":"play-action-tray-stat-icon",mainButtons:"play-action-tray-mainButtons",actions:"play-action-tray-actions",finished:"play-action-tray-finished"};var UM=(0,Rr.Z)(BM,(function(){var i,s=this,_=s.$createElement,T=s._self._c||_;return T("div",[s.gameplayState===s.gameplayStates.FINISHED?T("action-tray",{class:[s.$style.hiddenRow,s.$style.mainButtons]},[T("v5-button",{class:s.$style.button,attrs:{"full-width":"",theme:"primary",title:s.$trans("Play Again")},on:{click:function(i){return s.playAgain()}}},[T("span",{staticClass:"icon-font-chess ui_v5-button-icon redo"}),s._v(" "),T("span",[s._v(s._s(s.$trans("Play Again")))])]),s._v(" "),T("v5-button",{class:s.$style.button,attrs:{"full-width":"",title:s.$trans("New Rush")},on:{click:function(i){return s.goHome()}}},[T("span",{staticClass:"icon-font-chess ui_v5-button-icon plus"}),s._v(" "),T("span",[s._v(s._s(s.$trans("New Rush")))])])],1):s._e(),s._v(" "),T("action-tray",{class:[s.$style.actions,(i={},i[s.$style.finished]=s.gameplayState===s.gameplayStates.FINISHED,i)]},[T("div",{class:s.$style.row},[s.gameplayState!=s.gameplayStates.FINISHED?T("puzzle-action",{attrs:{disabled:!s.sessionIsInProgress},on:{click:s.quit},scopedSlots:s._u([{key:"icon",fn:function(){return[T("div",{staticClass:"icon-font-chess flag"})]},proxy:!0},{key:"label",fn:function(){return[T("div",{domProps:{textContent:s._s(s.$trans("Quit"))}})]},proxy:!0}],null,!1,2889875907)}):T("div",{staticClass:"icon-font-chess share",class:s.$style["stat-icon"],on:{click:function(i){return s.showShareModal()}}}),s._v(" "),T("prev-next-arrows")],1)])],1)}),[],!1,(function rush_play_action_tray_injectStyles(i){this.$style=$M.locals||$M}),null,null),FM=UM.exports,HM=Object.defineProperty,qM=Object.defineProperties,VM=Object.getOwnPropertyDescriptors,GM=Object.getOwnPropertySymbols,ZM=Object.prototype.hasOwnProperty,WM=Object.prototype.propertyIsEnumerable,timervue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?HM(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,timervue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))ZM.call(s,_)&&timervue_type_script_lang_js_defNormalProp(i,_,s[_]);if(GM)for(var _ of GM(s))WM.call(s,_)&&timervue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},KM={name:"RushTimer",components:{PuzzlesTimer:EA},data:()=>({now:+new Date,tickInterval:null}),computed:((i,s)=>qM(i,VM(s)))(timervue_type_script_lang_js_spreadValues(timervue_type_script_lang_js_spreadValues({},(0,dr.mapGetters)({timeConstraint:"puzzles/timeConstraint"})),(0,dr.mapState)({archivedPuzzleChallenge:i=>i.puzzlesRush.archivedPuzzleChallenge,finishTime:({puzzlesRush:i})=>i.finishTime,sessionIsInProgress:({puzzlesRush:i})=>i.sessionIsInProgress})),{getTimerIcon(){switch(this.timeConstraint){case 3e5:return"rapid";case 18e4:return"blitz";default:return"survival"}},timer(){return this.finishTime&&this.now>=this.finishTime?{minutes:0,seconds:"00"}:this.sessionIsInProgress?helpers_formatTimer({finishTime:this.finishTime,startTime:this.now,totalTime:this.timeConstraint}):this.archivedPuzzleChallenge.date?this.finalTime():{minutes:millisecondsToMinutes(this.timeConstraint),seconds:"00"}},runningOutOfTime(){return!!this.sessionIsInProgress&&(({finishTime:i,startTime:s})=>Math.ceil((i-s)/1e3)<=30)({startTime:this.now,finishTime:this.finishTime})}}),watch:{runningOutOfTime(i){i&&playSoundEffect(xt.TIME_WARNING)},sessionIsInProgress(i){!0===i&&this.start()}},beforeDestroy(){clearInterval(this.tickInterval)},methods:{finalTime(){const i=1e3*this.archivedPuzzleChallenge.date,s=i+1e3*this.archivedPuzzleChallenge.duration;return formatFinalSessionTime({sessionStart:i,sessionEnd:s,totalTime:Tn[this.archivedPuzzleChallenge.type]})},start(){this.tickInterval=setInterval((()=>{this.now=+new Date}),200),this.now=+new Date}}},YM=KM,XM={component:"timer-component",danger:"timer-danger",normal:"timer-normal",hidden:"timer-hidden","fire-icon":"timer-fire-icon"};var QM=(0,Rr.Z)(YM,(function(){var i,s,_=this,T=_.$createElement,S=_._self._c||T;return S("div",{class:[_.$style.component,_.$style.timer,(i={},i[_.$style.danger]=_.runningOutOfTime,i[_.$style.normal]=!_.runningOutOfTime,i)]},[S("div",{class:["icon-font-chess",_.getTimerIcon,_.$style["fire-icon"]]}),_._v(" "),S("puzzles-timer",{class:(s={},s[_.$style.danger]=_.runningOutOfTime,s[_.$style.normal]=!_.runningOutOfTime,s),attrs:{minutes:_.timer.minutes,seconds:_.timer.seconds}}),_._v(" "),S("div",{class:["icon-font-chess",_.getTimerIcon,_.$style.hidden]})],1)}),[],!1,(function rush_timer_injectStyles(i){this.$style=XM.locals||XM}),null,null),JM=QM.exports,ez=Object.defineProperty,tz=Object.defineProperties,nz=Object.getOwnPropertyDescriptors,rz=Object.getOwnPropertySymbols,iz=Object.prototype.hasOwnProperty,az=Object.prototype.propertyIsEnumerable,sidebar_playvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?ez(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,sidebar_playvue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))iz.call(s,_)&&sidebar_playvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(rz)for(var _ of rz(s))az.call(s,_)&&sidebar_playvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},sz={components:{PlayActionTray:FM,RushTimer:JM,backLink:Lm,StreakIndicator:_M,Avatar:Zv,RushPeripheralView:gM},mixins:[EM],data:()=>({rtlClass:rtlClass,gameplayStates:_n}),computed:sidebar_playvue_type_script_lang_js_spreadValues(sidebar_playvue_type_script_lang_js_spreadValues({},(0,dr.mapGetters)({solvedRounds:"puzzlesRush/solvedRounds"})),(0,dr.mapState)({archivedPuzzleChallenge:i=>i.puzzlesRush.archivedPuzzleChallenge,roundResults:i=>i.puzzlesRush.roundResults,user:({user:i})=>({avatarUrl:i.avatarLargeUrl,username:i.username}),gameplayState:i=>i.puzzles.gameplayState})),methods:((i,s)=>tz(i,nz(s)))(sidebar_playvue_type_script_lang_js_spreadValues({},(0,dr.mapActions)({viewTactic:"puzzlesRush/viewTactic"})),{onStreakClick(i){this.viewTactic(i)}})},oz=sz,lz={component:"sidebar-play-component",content:"sidebar-play-content",avatar:"sidebar-play-avatar",solved:"sidebar-play-solved",backLink:"sidebar-play-backLink",streak:"sidebar-play-streak",tray:"sidebar-play-tray",header:"sidebar-play-header",full:"sidebar-play-full"};var cz=(0,Rr.Z)(oz,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("div",{class:i.$style.header},[_("RushPeripheralView",{class:i.$style.full}),i._v(" "),i.gameplayState===i.gameplayStates.FINISHED?_("backLink",{class:i.$style.backLink}):i._e()],1),i._v(" "),_("div",{class:i.$style.content},[_("avatar",{class:[i.$style.avatar,i.rtlClass(i.$style)],attrs:{src:i.user.avatarUrl}}),i._v(" "),_("div",{class:i.$style.solved},[i._v("\n      "+i._s(i.solvedRounds||"--")+"\n    ")]),i._v(" "),i.showTimer?_("rush-timer"):i._e(),i._v(" "),_("streak-indicator",{class:i.$style.streak,attrs:{"is-enabled":!0,rounds:i.roundResults,animated:""},on:{click:i.onStreakClick}})],1),i._v(" "),_("play-action-tray",{class:i.$style.tray})],1)}),[],!1,(function sidebar_play_injectStyles(i){this.$style=lz.locals||lz}),null,null),uz=cz.exports,dz={props:{options:{type:Array,required:!0},selectedFilter:{type:String,required:!0}},emits:["select"],computed:{selectedOption(){return this.options.find((i=>i.value===this.selectedFilter))}}},hz=dz,pz={component:"labeled-form-select-component",icon:"labeled-form-select-icon",select:"labeled-form-select-select"};var mz=(0,Rr.Z)(hz,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("span",{domProps:{textContent:i._s(i.selectedOption.label)}}),i._v(" "),_("span",{staticClass:"icon-font-chess chevron-bottom",class:i.$style.icon}),i._v(" "),_("select",{class:i.$style.select,on:{blur:function(s){return i.$emit("select",s)},change:function(s){return i.$emit("select",s)}}},i._l(i.options,(function(s){return _("option",{key:s.value,domProps:{selected:i.selectedOption.value===s.value,value:s.value,textContent:i._s(s.label)}})})),0)])}),[],!1,(function labeled_form_select_injectStyles(i){this.$style=pz.locals||pz}),null,null),fz={name:"RushLeaderboardOptions",components:{LabeledFormSelect:mz.exports},props:{options:{type:Array,required:!0},selectedFilter:{type:String,required:!0}},emits:["select"]},gz={component:"rush-leaderboard-options-component"};var vz=(0,Rr.Z)(fz,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("span",{domProps:{textContent:i._s(i.$trans("Leaderboard"))}}),i._v(" "),_("labeled-form-select",{attrs:{options:i.options,"selected-filter":i.selectedFilter},on:{select:function(s){return i.$emit("select",s)}}})],1)}),[],!1,(function rush_leaderboard_options_injectStyles(i){this.$style=gz.locals||gz}),null,null),bz=vz.exports,yz=Object.defineProperty,_z=Object.defineProperties,wz=Object.getOwnPropertyDescriptors,kz=Object.getOwnPropertySymbols,Tz=Object.prototype.hasOwnProperty,Sz=Object.prototype.propertyIsEnumerable,rush_leaderboardvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?yz(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,rush_leaderboardvue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))Tz.call(s,_)&&rush_leaderboardvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(kz)for(var _ of kz(s))Sz.call(s,_)&&rush_leaderboardvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},rush_leaderboardvue_type_script_lang_js_spreadProps=(i,s)=>_z(i,wz(s)),Cz={name:"RushLeaderboard",components:{PuzzleLeaderboard:ny,RushLeaderboardOptions:bz,SectionTabs:Ob},data:i=>({archiveRouteName:Hn.RUSH_ARCHIVE,leaderboardActionsMap:{[At.FRIENDS]:{getLeaderboard:i.getFriendsLeaderboard,setFilter:i.setFriendsLeaderboardsFilter},[At.GLOBAL]:{getLeaderboard:i.getGlobalLeaderboard,setFilter:i.setGlobalLeaderboardsFilter},[At.PERSONAL]:{getLeaderboard:i.getPersonalLeaderboard,setFilter:i.setPersonalLeaderboardsFilter}},leaderboardFilterOptions:Object.freeze($t),leaderboardTypeOptions:Object.freeze(Nt),leaderboardTypes:Object.freeze(At),routes:Object.freeze(Vt),sidebar:getSidebarDimensions(),tabpanel:tabpanel}),computed:rush_leaderboardvue_type_script_lang_js_spreadProps(rush_leaderboardvue_type_script_lang_js_spreadValues(rush_leaderboardvue_type_script_lang_js_spreadValues({},(0,dr.mapState)({currentLeaderboardType:i=>i.puzzlesRush.currentLeaderboardType,friendsLeaderboards:i=>i.puzzlesRush.friendsLeaderboards,globalLeaderboards:i=>i.puzzlesRush.globalLeaderboards,personalLeaderboards:i=>i.puzzlesRush.personalLeaderboards,user:({user:i})=>({avatarUrl:i.avatarLargeUrl,chessTitle:i.chessTitle,countryCode:i.flag,flairCode:i.flairCode,isLoggedIn:i.isLoggedIn,membership:i.membership,username:i.username})})),(0,dr.mapGetters)({durationCode:"puzzles/durationCode"})),{leaderboardsOfCurrentType(){return{[At.FRIENDS]:this.friendsLeaderboards,[At.GLOBAL]:this.globalLeaderboards,[At.PERSONAL]:this.personalLeaderboards}[this.currentLeaderboardType]},currentLeaderboard(){return this.leaderboardsOfCurrentType[this.durationCode][this.leaderboardsOfCurrentType.currentFilter]}}),created(){this.loadCurrentLeaderboard()},methods:rush_leaderboardvue_type_script_lang_js_spreadProps(rush_leaderboardvue_type_script_lang_js_spreadValues(rush_leaderboardvue_type_script_lang_js_spreadValues({},(0,dr.mapActions)("puzzlesRush",["getFriendsLeaderboard","getGlobalLeaderboard","getPersonalLeaderboard"])),(0,dr.mapMutations)("puzzlesRush",["setFriendsLeaderboardsFilter","setGlobalLeaderboardsFilter","setPersonalLeaderboardsFilter","setLeaderboardType"])),{loadCurrentLeaderboard(){if(this.currentLeaderboard.empty){(0,this.leaderboardActionsMap[this.currentLeaderboardType].getLeaderboard)(this.leaderboardsOfCurrentType.currentFilter)}},onLeaderboardTypeOption(i){const{value:s}=i.target,_=this.leaderboardActionsMap[this.currentLeaderboardType].setFilter;if(!0===this.leaderboardsOfCurrentType[this.durationCode][s].empty){(0,this.leaderboardActionsMap[this.currentLeaderboardType].getLeaderboard)(s).then((()=>{_(s)}))}else _(s)},onTabSelect(i){this.setLeaderboardType(i),this.loadCurrentLeaderboard()}})},xz=Cz,Ez={component:"rush-leaderboard-component",tabpanel:"rush-leaderboard-tabpanel"};var Pz=(0,Rr.Z)(xz,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[i.user.isLoggedIn?_("section-tabs",{ref:"sectionTabs",attrs:{"selected-value":i.currentLeaderboardType,tabs:i.leaderboardTypeOptions},on:{select:i.onTabSelect}}):i._e(),i._v(" "),_("div",i._b({class:i.$style.tabpanel},"div",i.tabpanel(i.currentLeaderboardType),!1),[_("rush-leaderboard-options",{attrs:{options:i.leaderboardFilterOptions,"selected-filter":i.leaderboardsOfCurrentType.currentFilter},on:{select:i.onLeaderboardTypeOption}}),i._v(" "),_("puzzle-leaderboard",{attrs:{"archive-route-name":i.archiveRouteName,"current-leaderboard":i.currentLeaderboard,"current-leaderboard-type":i.currentLeaderboardType,"history-route":i.routes.userRushArchive,"time-filter":i.personalLeaderboards.currentFilter,user:i.user}})],1)],1)}),[],!1,(function rush_leaderboard_injectStyles(i){this.$style=Ez.locals||Ez}),null,null),Az=Pz.exports,Oz={name:"RadioCard",props:{type:Object,selected:Boolean},emits:["click"],methods:{getIcon(i){switch(i){case"rapid":return"rapid";case"survival":return"survival";default:return"blitz"}}}},Mz=Oz,zz={component:"rush-radio-card-component",selected:"rush-radio-card-selected",label:"rush-radio-card-label","graphic-wrap":"rush-radio-card-graphic-wrap",checkmark:"rush-radio-card-checkmark",iconsm:"rush-radio-card-iconsm"};var Iz=(0,Rr.Z)(Mz,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("button",{class:[i.$style.component,i.selected?i.$style.selected:""],attrs:{type:"button"},on:{click:function(s){return i.$emit("click",s)}}},[_("div",{class:[i.$style["graphic-wrap"],i.$style[i.type.icon],i.selected?i.$style.selected:""]},[i.selected?_("span",{staticClass:"icon-font-chess checkmark",class:i.$style.checkmark}):i._e(),i._v(" "),_("span",{class:["icon-font-chess",i.getIcon(i.type.icon),i.$style.iconsm,i.selected?i.$style.selected:""]}),i._v(" "),_("div",{class:i.$style.label,domProps:{textContent:i._s(i.type.label)}})])])}),[],!1,(function rush_radio_card_injectStyles(i){this.$style=zz.locals||zz}),null,null),Lz=Iz.exports,Rz=Object.defineProperty,Nz=Object.defineProperties,Dz=Object.getOwnPropertyDescriptors,jz=Object.getOwnPropertySymbols,Bz=Object.prototype.hasOwnProperty,$z=Object.prototype.propertyIsEnumerable,sidebar_startvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?Rz(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,sidebar_startvue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))Bz.call(s,_)&&sidebar_startvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(jz)for(var _ of jz(s))$z.call(s,_)&&sidebar_startvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},sidebar_startvue_type_script_lang_js_spreadProps=(i,s)=>Nz(i,Dz(s)),Uz={components:{RushLeaderboard:Az,SectionTabs:Ob,RadioCard:Lz,V5Button:Tr.V5Button,SidebarHeader:E_},data:()=>({routes:getRoutes(),options:Mn,rushModes:"",selectedTab:Mn[0].value,playcards:"",selected:"",tabpanel:tabpanel}),computed:sidebar_startvue_type_script_lang_js_spreadProps(sidebar_startvue_type_script_lang_js_spreadValues(sidebar_startvue_type_script_lang_js_spreadValues({},(0,dr.mapGetters)({durationCode:"puzzles/durationCode"})),(0,dr.mapState)({bestScores:({puzzlesRush:i})=>i.userStats.bestScores,fetchingStats:({puzzlesRush:i})=>i.fetchingStats,isLoggedIn:({user:i})=>i.isLoggedIn,reachedLimits:i=>i.puzzles.reachedLimits,timeConstraints:i=>i.puzzles.timeConstraints})),{rushRankOptions(){if(null===this.bestScores.global)return[];const i=[];return null!==this.bestScores.day?i.push(Gt):null!==this.bestScores.week&&i.push(Wt),i.push(Zt),Kt.filter((s=>i.includes(s.key)))},limitReached(){return isLimitReached({puzzleMode:vn.RUSH,reachedLimits:this.reachedLimits})},showGoodLuckMessage(){return 0===this.rushRankOptions.length&&!this.fetchingStats}}),watch:{durationCode(){this.getPlayerStats()}},mounted(){this.rushModes=(()=>{const i=[{icon:"live-standard",label:(0,j.dW)("%num% min",{"%num%":3}),timeConstraint:wn.THREE_MINUTES,type:vn.BATTLE},{icon:"user",label:(0,j.dW)("Challenge"),showChallengeForm:!0}],s=[{icon:"live-standard",label:Cn[kn.THREE_MINUTES],timeConstraint:wn.THREE_MINUTES,type:vn.RUSH},{icon:"rapid",label:Cn[kn.FIVE_MINUTES],timeConstraint:wn.FIVE_MINUTES,type:vn.RUSH},{icon:"survival",label:Cn[kn.SURVIVAL],timeConstraint:wn.SURVIVAL,type:vn.RUSH}];return[{defaultType:vn.RATED,icon:vn.RATED,label:(0,j.dW)("Training"),modes:[{icon:"stats-arrow-up",label:(0,j.dW)("Rated"),type:vn.RATED},{icon:"crown-learning",label:(0,j.dW)("Learning"),type:vn.LEARNING}]},{defaultType:vn.RUSH,icon:vn.RUSH,label:(0,j.dW)("Rush"),modes:s},{defaultType:vn.BATTLE,icon:vn.BATTLE,label:(0,j.dW)("Battle"),modes:i}]})()[1].modes,this.playcards=this.rushModes,this.selectPlay(this.timeConstraints[vn.RUSH])},methods:sidebar_startvue_type_script_lang_js_spreadProps(sidebar_startvue_type_script_lang_js_spreadValues(sidebar_startvue_type_script_lang_js_spreadValues({},(0,dr.mapActions)("puzzlesRush",["getPlayerStats"])),(0,dr.mapActions)("puzzles",["selectPuzzleMode","startSession"])),{onTabSelect(i){this.selectedTab=i},selectPlay(i){this.selected=i,this.selectPuzzleMode({type:vn.RUSH,timeConstraint:this.selected})},play(){this.startSession(vn.RUSH)}})},Fz=Uz,Hz={cap:"sidebar-start-cap","mobile-order-1":"sidebar-start-mobile-order-1","mobile-order-2":"sidebar-start-mobile-order-2","mobile-order-3":"sidebar-start-mobile-order-3","mobile-order-4":"sidebar-start-mobile-order-4","mobile-order-5":"sidebar-start-mobile-order-5",content:"sidebar-start-content",cardContainer:"sidebar-start-cardContainer",card:"sidebar-start-card",playBtnContainer:"sidebar-start-playBtnContainer",component:"sidebar-start-component",iconsm:"sidebar-start-iconsm","puzzle-icon":"sidebar-start-puzzle-icon",stat:"sidebar-start-stat",middleText:"sidebar-start-middleText",number:"sidebar-start-number",statRow:"sidebar-start-statRow"};var qz=(0,Rr.Z)(Fz,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",[_("SidebarHeader",{attrs:{title:i.$trans("Puzzle Rush")}},[_("div",{class:i.$style.statRow},[_("div",{class:i.$style.stat},[_("div",{staticClass:"icon-font-chess daily",class:i.$style.iconsm}),i._v(" "),_("div",{class:i.$style.middleText},[i._v("\n          "+i._s(i.$trans("Best Today"))+"\n        ")]),i._v(" "),_("div",{class:i.$style.number},[i._v("\n          "+i._s(i.bestScores.day||"--")+"\n        ")])]),i._v(" "),_("div",{class:i.$style["puzzle-icon"]}),i._v(" "),_("div",{class:i.$style.stat},[_("div",{staticClass:"icon-font-chess cycle",class:i.$style.iconsm}),i._v(" "),_("div",{class:i.$style.middleText},[i._v("\n          "+i._s(i.$trans("Top Score"))+"\n        ")]),i._v(" "),_("div",{class:i.$style.number},[i._v("\n          "+i._s(i.bestScores.global||"--")+"\n        ")])])])]),i._v(" "),_("section-tabs",{ref:"sectionTabs",attrs:{"selected-value":i.selectedTab,tabs:i.options},on:{select:i.onTabSelect}}),i._v(" "),i.selectedTab===i.options[0].value?[_("div",i._b({class:i.$style.content},"div",i.tabpanel("play"),!1),[_("div",{class:i.$style.cardContainer},i._l(i.playcards,(function(s){return _("RadioCard",{key:s.timeConstraint,class:i.$style.card,attrs:{type:s,selected:i.selected===s.timeConstraint},on:{click:function(_){return i.selectPlay(s.timeConstraint)}}})})),1)]),i._v(" "),_("div",{class:i.$style.playBtnContainer},[i.limitReached||i.isLoggedIn?_("v5-button",{attrs:{size:"large",theme:"primary","full-width":""},domProps:{textContent:i._s(i.$trans("Play"))},on:{click:i.play}}):_("v5-button",{attrs:{size:"large",theme:"primary","full-width":"",href:i.routes.register},domProps:{textContent:i._s(i.$trans("Sign Up to Play"))}})],1)]:i._e(),i._v(" "),i.selectedTab===i.options[1].value?_("rush-leaderboard",i._b({},"rush-leaderboard",i.tabpanel("leaderboard"),!1)):i._e()],2)}),[],!1,(function sidebar_start_injectStyles(i){this.$style=Hz.locals||Hz}),null,null),Vz=qz.exports,Gz=Object.defineProperty,Zz=Object.defineProperties,Wz=Object.getOwnPropertyDescriptors,Kz=Object.getOwnPropertySymbols,Yz=Object.prototype.hasOwnProperty,Xz=Object.prototype.propertyIsEnumerable,rush_sidebarvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?Gz(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,rush_sidebarvue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))Yz.call(s,_)&&rush_sidebarvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(Kz)for(var _ of Kz(s))Xz.call(s,_)&&rush_sidebarvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},Qz={name:"RushSidebar",components:{RushPeripheralView:gM},computed:((i,s)=>Zz(i,Wz(s)))(rush_sidebarvue_type_script_lang_js_spreadValues({},(0,dr.mapState)({isLoggedIn:i=>i.user.isLoggedIn,puzzleMode:i=>i.puzzles.puzzleMode,reachedLimits:i=>i.puzzles.reachedLimits,sidebarView:i=>i.puzzlesRush.sidebarView})),{sidebarComponent(){return{[rn]:uz,[an]:uz,[sn]:Vz}[this.sidebarView]}}),created(){this.setOngoingChallenges(kr.Z.get(Ot)),this.isLoggedIn&&this.getPlayerStats(),this.getGlobalLeaderboard(),(({puzzleMode:i,reachedLimits:s})=>{isLimitReached({puzzleMode:i,reachedLimits:s})&&((0,ar.nJ)()?showGuestModal({slide:Bi._G.GUEST_MODAL_SLIDES.puzzles}):showTrialModal())})({puzzleMode:this.puzzleMode,reachedLimits:this.reachedLimits}),O.Z.on(Lt,(()=>{mountBoardModal({identifier:Ft,lazyVueLoader:oM}).showModal()})),O.Z.on(Rt,(()=>{mountBoardModal({identifier:Ht,lazyVueLoader:oM}).showModal()})),O.Z.on(It,showModalCountdown)},methods:rush_sidebarvue_type_script_lang_js_spreadValues(rush_sidebarvue_type_script_lang_js_spreadValues({},(0,dr.mapMutations)("puzzlesRush",["setOngoingChallenges"])),(0,dr.mapActions)("puzzlesRush",["getGlobalLeaderboard","getPlayerStats"]))},Jz=Qz,eI={cap:"sidebar-cap","mobile-order-1":"sidebar-mobile-order-1","mobile-order-2":"sidebar-mobile-order-2","mobile-order-3":"sidebar-mobile-order-3","mobile-order-4":"sidebar-mobile-order-4","mobile-order-5":"sidebar-mobile-order-5",component:"sidebar-component"};var tI=(0,Rr.Z)(Jz,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",[_(i.sidebarComponent,{tag:"component",class:i.$style.component})],1)}),[],!1,(function rush_sidebar_injectStyles(i){this.$style=eI.locals||eI}),null,null),nI=tI.exports;var rI=(({htmlTitles:i})=>{Dr.default.use(Gp);const s={base:relativeBase({base:"/puzzles",urlPath:window.location.pathname}),mode:"history",routes:[{path:"/",component:MS},{component:uS,name:Hn.BATTLE,path:`/${Hn.BATTLE}`,beforeEnter(i,s,_){handleBattleChallengeRoute(i),_()}},{component:uS,name:Hn.BATTLE_ID,path:`/${Hn.BATTLE}/:battleId`},{component:sO,name:Hn.RATED,path:`/${Hn.RATED}`},{component:Ux,name:Hn.LEARNING,path:`/${Hn.LEARNING}`},{beforeEnter:(i,s,_)=>{st.default.dispatch("puzzles/startCurrentPuzzle"),_()},component:Ux,name:Hn.PUZZLE_PROBLEM_PRACTICE,path:"/problem/:problemId/practice"},{beforeEnter(i,s,_){(({next:i,to:s,togglePuzzleComments:_})=>{s.params.problemId?(s.hash&&_(),i()):i("/")})({next:_,to:i,togglePuzzleComments:togglePuzzleComments})},component:BE,name:Hn.PUZZLE_PROBLEM,path:"/problem/:problemId?"},{component:nI,name:Hn.RUSH,path:`/${Hn.RUSH}`,children:[{name:Hn.RUSH_ARCHIVE,path:":username/:shortUuid"}]},{path:"*",redirect:"/"}],scrollBehavior(i){handleBattleChallengeRoute(i)}},_=new Gp(s);return _.afterEach((s=>{const _=(i=>{let s=i.name;return Array.isArray(i.matched)&&i.matched[0]&&(s=i.matched[0].name),s})(s),T=qn[_];st.default.commit("puzzles/setPuzzleMode",T),i&&i[T]&&(document.title=i[T]),function toggleMobileBoardHidden(i){(0,Fi.y)(Hi.I.BodyClass.MobileBoardHidden,i)}(!s.name)})),_})({htmlTitles:(()=>{const i=document.getElementById(jn),s=JSON.parse(i.getAttribute("data-html-titles"));if(s)return Object.keys(s).forEach((i=>{s[i]=(i=>`${i} - Chess.com`)(s[i])})),s})()}),iI={name:"BoardControls",components:{IconFont:Mr.Z},directives:{tooltip:Ur.Z},props:{flip:{type:Function,required:!0},hideActions:{type:Object,default:()=>({})},settings:{type:Function,required:!0}},data:()=>({tooltips:{flip:{content:ht.Z.trans("Flip Board"),delay:50,position:"right"},settings:{content:ht.Z.trans("Settings"),delay:50,position:"right"}}})},aI={component:"board-controls-component",flip:"board-controls-flip",icon:"board-controls-icon"};var sI=(0,Rr.Z)(iI,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("div",{class:i.$style.component},[_("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.tooltips.settings,expression:"tooltips.settings"}],on:{click:function(s){return i.settings()}}},[_("icon-font",{class:i.$style.icon,attrs:{family:"chess",name:"circle-gearwheel"}})],1),i._v(" "),i.hideActions.FLIP?i._e():_("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.tooltips.flip,expression:"tooltips.flip"}],class:i.$style.flip,on:{click:function(s){return i.flip()}}},[_("icon-font",{class:i.$style.icon,attrs:{family:"chess",name:"repeat"}})],1)])}),[],!1,(function board_controls_injectStyles(i){this.$style=aI.locals||aI}),null,null),oI=sI.exports,lI=Object.defineProperty,cI=Object.defineProperties,uI=Object.getOwnPropertyDescriptors,dI=Object.getOwnPropertySymbols,hI=Object.prototype.hasOwnProperty,pI=Object.prototype.propertyIsEnumerable,controls_mixin_defNormalProp=(i,s,_)=>s in i?lI(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,controls_mixin_spreadValues=(i,s)=>{for(var _ in s||(s={}))hI.call(s,_)&&controls_mixin_defNormalProp(i,_,s[_]);if(dI)for(var _ of dI(s))pI.call(s,_)&&controls_mixin_defNormalProp(i,_,s[_]);return i};const mI={name:"widget-board-controls",components:{BoardControls:oI},props:{boardSelector:{type:String,default:R.VD.board},hideActions:{type:Object,default:()=>({})}},data:()=>({board:null,difference:null,start:null,width:null}),computed:controls_mixin_spreadValues({},(0,dr.mapState)({boardOptions:i=>i.board.boardOptions})),mounted(){this.board=document.querySelector(this.boardSelector)},methods:((i,s)=>cI(i,uI(s)))(controls_mixin_spreadValues({},(0,dr.mapMutations)("board",["setOption","setStyle"])),{boardDidReachMaxWidth(){if(this.board.children[0].offsetHeight===this.board.offsetHeight-this.board.offsetHeight%8)return!0;return document.querySelector(R.VD.sidebar).offsetWidth===R.PN.minSidebarWidth&&this.board.offsetLeft-R.PN.boardPaddingLeft===this.board.parentNode.offsetLeft},flipBoard(){this.setOption({option:"flipBoard",value:!this.boardOptions.flipBoard})},toggleBoardSettings(){O.Z.emit("showBoardSettingsModal")}})};var fI={name:"WidgetBoardControls",mixins:[mI]},gI={};var vI=(0,Rr.Z)(fI,(function(){var i=this,s=i.$createElement;return(i._self._c||s)("board-controls",{attrs:{"hide-actions":i.hideActions,flip:i.flipBoard,settings:i.toggleBoardSettings}})}),[],!1,(function controls_injectStyles(i){this.$style=gI.locals||gI}),null,null).exports,bI=__webpack_require__(33468),yI=__webpack_require__(99079),_I=__webpack_require__(94952),wI=__webpack_require__(58558),kI=__webpack_require__(10942);const TI={settings:ht.Z.trans("Settings"),piecesStyle:ht.Z.trans("Pieces"),pieceWarning:ht.Z.trans("Reload the page to see changes"),boardColors:ht.Z.trans("Board"),sounds:ht.Z.trans("Sounds"),coordinates:ht.Z.trans("Coordinates"),pieceNotation:ht.Z.trans("Piece Notation"),animationType:ht.Z.trans("Animation Type"),highlightMoves:ht.Z.trans("Highlight Moves"),playSounds:ht.Z.trans("Play Sounds"),showLegalMoves:ht.Z.trans("Show Legal Moves")};var SI={name:"BoardSettings",components:{V5Select:Tr.V5Select,V5Switch:Tr.V5Switch},props:{boardOptions:{type:Object,required:!0},boardStyles:{type:Object,required:!0},changeSetting:{type:Function,required:!0}},data:()=>({labels:Object.freeze(TI),showEvaluationBarSetting:(0,kI.F)("wdl_eval_bar_option")}),computed:{currentCoordinateKey(){return this.boardStyles.coordinateOptions.find((i=>i.value===this.boardOptions.coordinates)).key}},methods:{updateSetting(i,s){this.changeSetting(i,s)}}},CI={component:"board-settings-options-component",select:"board-settings-options-select",setting:"board-settings-options-setting",label:"board-settings-options-label"};var xI=(0,Rr.Z)(SI,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("ul",{class:i.$style.component},[_("li",{class:i.$style.setting},[_("label",{class:i.$style.label,attrs:{for:"pieces-style"}},[i._v("\n      "+i._s(i.labels.piecesStyle)+"\n    ")]),i._v(" "),_("div",{class:i.$style.select},[_("v5-select",{attrs:{id:"pieces-style","force-theme":"light","label-key":"name","value-key":"code",options:i.boardStyles.pieceStyles,value:i.boardOptions.pieceStyle},on:{input:function(s){return i.updateSetting("pieceStyle",s)}}})],1)]),i._v(" "),_("li",{class:i.$style.setting},[_("label",{class:i.$style.label,attrs:{for:"board-colors"}},[i._v("\n      "+i._s(i.labels.boardColors)+"\n    ")]),i._v(" "),_("div",{class:i.$style.select},[_("v5-select",{attrs:{id:"board-colors","force-theme":"light","label-key":"name","value-key":"code",options:i.boardStyles.boardColors,value:i.boardOptions.boardStyle},on:{input:function(s){return i.updateSetting("boardStyle",s)}}})],1)]),i._v(" "),_("li",{class:i.$style.setting},[_("label",{class:i.$style.label,attrs:{for:"coordinate"}},[i._v("\n      "+i._s(i.labels.coordinates)+"\n    ")]),i._v(" "),_("div",{class:i.$style.select},[_("v5-select",{attrs:{id:"coordinate","force-theme":"light","label-key":"label","value-key":"key",options:i.boardStyles.coordinateOptions,value:i.currentCoordinateKey},on:{input:function(s){return i.updateSetting("coordinates",s)}}})],1)]),i._v(" "),_("li",{class:i.$style.setting},[_("label",{class:i.$style.label,attrs:{for:"piece-notation"}},[i._v("\n      "+i._s(i.labels.pieceNotation)+"\n    ")]),i._v(" "),_("div",{class:i.$style.select},[_("v5-select",{attrs:{id:"piece-notation","force-theme":"light","label-key":"name","value-key":"code",options:i.boardStyles.moveListDisplayTypes,value:i.boardOptions.moveListDisplayType},on:{input:function(s){return i.updateSetting("moveListDisplayType",s)}}})],1)]),i._v(" "),_("li",{class:i.$style.setting},[_("label",{class:i.$style.label,attrs:{for:"animation-type"}},[i._v("\n      "+i._s(i.labels.animationType)+"\n    ")]),i._v(" "),_("div",{class:i.$style.select},[_("v5-select",{attrs:{id:"animation-type","force-theme":"light","label-key":"name","value-key":"code",options:i.boardStyles.animationTypes,value:i.boardOptions.animationType},on:{input:function(s){return i.updateSetting("animationType",s)}}})],1)]),i._v(" "),_("li",{class:i.$style.setting},[_("label",{attrs:{for:"highlightMoves"}},[i._v("\n      "+i._s(i.labels.highlightMoves)+"\n    ")]),i._v(" "),_("v5-switch",{attrs:{name:"highlightMoves",value:i.boardOptions.highlightMoves},on:{input:function(s){return i.updateSetting("highlightMoves",s)}}})],1),i._v(" "),_("li",{class:i.$style.setting},[_("label",{class:i.$style.label,attrs:{for:"playSounds"}},[i._v("\n      "+i._s(i.labels.playSounds)+"\n    ")]),i._v(" "),_("v5-switch",{attrs:{name:"playSounds",value:i.boardOptions.playSounds},on:{input:function(s){return i.updateSetting("playSounds",s)}}})],1),i._v(" "),i.boardOptions.playSounds?_("li",{class:i.$style.setting},[_("label",{class:i.$style.label,attrs:{for:"sounds"},domProps:{textContent:i._s(i.labels.sounds)}}),i._v(" "),_("div",{class:i.$style.select},[_("v5-select",{attrs:{id:"sounds","force-theme":"light","label-key":"name","value-key":"code",options:i.boardStyles.sounds,value:i.boardOptions.soundTheme},on:{input:function(s){return i.updateSetting("soundTheme",s)}}})],1)]):i._e(),i._v(" "),_("li",{class:i.$style.setting},[_("label",{class:i.$style.label,attrs:{for:"highlightLegalMoves"}},[i._v("\n      "+i._s(i.labels.showLegalMoves)+"\n    ")]),i._v(" "),_("v5-switch",{attrs:{name:"highlightLegalMoves",value:i.boardOptions.highlightLegalMoves},on:{input:function(s){return i.updateSetting("highlightLegalMoves",s)}}})],1)])}),[],!1,(function board_settings_options_injectStyles(i){this.$style=CI.locals||CI}),null,null),EI=xI.exports,PI=Object.defineProperty,AI=Object.defineProperties,OI=Object.getOwnPropertyDescriptors,MI=Object.getOwnPropertySymbols,zI=Object.prototype.hasOwnProperty,II=Object.prototype.propertyIsEnumerable,board_settingsvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?PI(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,LI={name:"BoardSettings",components:{ModalChessboardContainer:bi,ModalContent:yi.Z,SectionTitleDismissible:sh.Z,V5Select:Tr.V5Select,V5Switch:Tr.V5Switch},props:{boardClass:{type:String},boardOptions:{type:Object,required:!0},boardStyles:{type:Object,required:!0},changeSetting:{type:Function,required:!0}},data:()=>({labels:{autoAnalysis:ht.Z.trans("Post-Game Analysis"),darkMode:ht.Z.trans("Dark Mode"),settings:ht.Z.trans("Settings"),piecesStyle:ht.Z.trans("Pieces"),pieceWarning:ht.Z.trans("Reload the page to see changes"),boardColors:ht.Z.trans("Board"),sounds:ht.Z.trans("Sounds"),coordinates:ht.Z.trans("Coordinates"),pieceNotation:ht.Z.trans("Piece Notation"),animationType:ht.Z.trans("Animation Type"),highlightMoves:ht.Z.trans("Highlight Moves"),playSounds:ht.Z.trans("Play Sounds"),showLegalMoves:ht.Z.trans("Show Legal Moves")}}),computed:((i,s)=>AI(i,OI(s)))(((i,s)=>{for(var _ in s||(s={}))zI.call(s,_)&&board_settingsvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(MI)for(var _ of MI(s))II.call(s,_)&&board_settingsvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i})({},(0,dr.mapState)({isStaff:i=>i.user&&i.user.isStaff,user:i=>i.user})),{currentCoordinateKey(){return this.boardStyles.coordinateOptions.find((i=>i.value===this.boardOptions.coordinates)).key}}),mounted(){O.Z.on("showBoardSettingsModal",this.show)},methods:{show(){this.$refs.modalContainer.toggle(this.boardClass)},hide(){this.$refs.modalContainer.hide()},updateSetting(i,s){this.changeSetting(i,s)}}},RI=LI,NI={modal:"board-settings-modal",select:"board-settings-select",settings:"board-settings-settings",setting:"board-settings-setting",label:"board-settings-label"};var DI=(0,Rr.Z)(RI,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return _("modal-chessboard-container",{ref:"modalContainer",attrs:{"board-class":i.boardClass}},[_("modal-content",{class:i.$style.modal},[_("section-title-dismissible",{on:{close:i.hide}},[i._v("\n      "+i._s(i.labels.settings)+"\n    ")]),i._v(" "),_("ul",{class:i.$style.settings},[_("li",{class:i.$style.setting},[_("label",{class:i.$style.label,attrs:{for:"pieces-style"}},[i._v("\n          "+i._s(i.labels.piecesStyle)+"\n        ")]),i._v(" "),_("div",{class:i.$style.select},[_("v5-select",{attrs:{id:"pieces-style","force-theme":"light","label-key":"name","value-key":"code",options:i.boardStyles.pieceStyles,value:i.boardOptions.pieceStyle},on:{input:function(s){return i.updateSetting("pieceStyle",s)}}})],1)]),i._v(" "),_("li",{class:i.$style.setting},[_("label",{class:i.$style.label,attrs:{for:"board-colors"}},[i._v("\n          "+i._s(i.labels.boardColors)+"\n        ")]),i._v(" "),_("div",{class:i.$style.select},[_("v5-select",{attrs:{id:"board-colors","force-theme":"light","label-key":"name","value-key":"code",options:i.boardStyles.boardColors,value:i.boardOptions.boardStyle},on:{input:function(s){return i.updateSetting("boardStyle",s)}}})],1)]),i._v(" "),_("li",{class:i.$style.setting},[_("label",{class:i.$style.label,attrs:{for:"coordinate"}},[i._v("\n          "+i._s(i.labels.coordinates)+"\n        ")]),i._v(" "),_("div",{class:i.$style.select},[_("v5-select",{attrs:{id:"coordinate","force-theme":"light","label-key":"label","value-key":"key",options:i.boardStyles.coordinateOptions,value:i.currentCoordinateKey},on:{input:function(s){return i.updateSetting("coordinates",s)}}})],1)]),i._v(" "),_("li",{class:i.$style.setting},[_("label",{class:i.$style.label,attrs:{for:"piece-notation"}},[i._v("\n          "+i._s(i.labels.pieceNotation)+"\n        ")]),i._v(" "),_("div",{class:i.$style.select},[_("v5-select",{attrs:{id:"piece-notation","force-theme":"light","label-key":"name","value-key":"code",options:i.boardStyles.moveListDisplayTypes,value:i.boardOptions.moveListDisplayType},on:{input:function(s){return i.updateSetting("moveListDisplayType",s)}}})],1)]),i._v(" "),_("li",{class:i.$style.setting},[_("label",{class:i.$style.label,attrs:{for:"animation-type"}},[i._v("\n          "+i._s(i.labels.animationType)+"\n        ")]),i._v(" "),_("div",{class:i.$style.select},[_("v5-select",{attrs:{id:"animation-type","force-theme":"light","label-key":"name","value-key":"code",options:i.boardStyles.animationTypes,value:i.boardOptions.animationType},on:{input:function(s){return i.updateSetting("animationType",s)}}})],1)]),i._v(" "),_("li",{class:i.$style.setting},[_("label",{attrs:{for:"highlightMoves"}},[i._v("\n          "+i._s(i.labels.highlightMoves)+"\n        ")]),i._v(" "),_("v5-switch",{attrs:{name:"highlightMoves",value:i.boardOptions.highlightMoves},on:{input:function(s){return i.updateSetting("highlightMoves",s)}}})],1),i._v(" "),_("li",{class:i.$style.setting},[_("label",{class:i.$style.label,attrs:{for:"playSounds"}},[i._v("\n          "+i._s(i.labels.playSounds)+"\n        ")]),i._v(" "),_("v5-switch",{attrs:{name:"playSounds",value:i.boardOptions.playSounds},on:{input:function(s){return i.updateSetting("playSounds",s)}}})],1),i._v(" "),i.boardOptions.playSounds?_("li",{class:i.$style.setting},[_("label",{class:i.$style.label,attrs:{for:"sounds"}},[i._v("\n          "+i._s(i.labels.sounds)+"\n        ")]),i._v(" "),_("div",{class:i.$style.select},[_("v5-select",{attrs:{id:"sounds","force-theme":"light","label-key":"name","value-key":"code",options:i.boardStyles.sounds,value:i.boardOptions.soundTheme},on:{input:function(s){return i.updateSetting("soundTheme",s)}}})],1)]):i._e(),i._v(" "),_("li",{class:i.$style.setting},[_("label",{class:i.$style.label,attrs:{for:"highlightLegalMoves"}},[i._v("\n          "+i._s(i.labels.showLegalMoves)+"\n        ")]),i._v(" "),_("v5-switch",{attrs:{name:"highlightLegalMoves",value:i.boardOptions.highlightLegalMoves},on:{input:function(s){return i.updateSetting("highlightLegalMoves",s)}}})],1)])],1)],1)}),[],!1,(function board_settings_injectStyles(i){this.$style=NI.locals||NI}),null,null),jI=DI.exports;const BI={lastSave:"lastSavedRelease",state:"chessComAppState"},$I=["UI"],UI=1504891089,FI={board:{},daily:{}},HI={maxWait:500,wait:200};var qI=__webpack_require__(70125);const filterModules=(i,s)=>Object.keys(s).reduce(((_,T)=>{const S=(0,qI.Q)(kr.Z.get(BI.state));return i[T]?_[T]=Object.assign({},i[T]):S&&S[T]&&(_[T]=Object.assign({},S[T])),$I.concat(s[T].excluded||[]).forEach((i=>{"object"==typeof _[T]&&delete _[T][i]})),_}),{}),invalidateCacheOlderThan=i=>{const s=parseInt(kr.Z.get(BI.lastSave),10);(!s||i>s)&&(kr.Z.remove(BI.state),kr.Z.set(BI.lastSave,i))};invalidateCacheOlderThan(UI);const VI=Yy((i=>{if(i.user&&i.user.isImpersonating)return;const s=filterModules(i,FI);kr.Z.set(BI.state,JSON.stringify(s))}),HI.wait,{maxWait:HI.maxWait});var GI=Object.defineProperty,ZI=Object.defineProperties,WI=Object.getOwnPropertyDescriptors,KI=Object.getOwnPropertySymbols,YI=Object.prototype.hasOwnProperty,XI=Object.prototype.propertyIsEnumerable,settingsvue_type_script_lang_js_defNormalProp=(i,s,_)=>s in i?GI(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,settingsvue_type_script_lang_js_spreadValues=(i,s)=>{for(var _ in s||(s={}))YI.call(s,_)&&settingsvue_type_script_lang_js_defNormalProp(i,_,s[_]);if(KI)for(var _ of KI(s))XI.call(s,_)&&settingsvue_type_script_lang_js_defNormalProp(i,_,s[_]);return i},settingsvue_type_script_lang_js_spreadProps=(i,s)=>ZI(i,WI(s)),QI={name:"BoardSettingsContainer",components:{BoardSettings:jI,BoardSettingsOptions:EI},props:{boardClass:{type:String},optionsOnly:{type:Boolean,default:!1}},computed:settingsvue_type_script_lang_js_spreadProps(settingsvue_type_script_lang_js_spreadValues({},(0,dr.mapState)("board",["boardOptions","styles"])),{boardStyles(){return settingsvue_type_script_lang_js_spreadProps(settingsvue_type_script_lang_js_spreadValues({},this.styles),{animationTypes:yI.Z.getAnimationTypes(this.styles.animationTypes,this.boardOptions.pieceStyle),coordinateOptions:R.lu})}}),created(){this.$store.dispatch("board/loadStyles")},methods:{saveSetting(i,s){const _="pieceStyle"===i&&s.startsWith("3d");(0,wI.j)(_);const T="pieceStyle"===i&&(0,bI.FK)(s,this.boardOptions.pieceStyle)||"animationType"===i&&(0,bI.Bw)(s,this.boardOptions.animationType);"coordinates"===i&&(0,_I.a)(R.lu[s].value===R.Tg.OUTSIDE),this.$store.dispatch("board/updateOption",{option:i,value:s}).then((()=>{T&&(VI.flush(),window.location.reload())}))}}},JI=(0,Rr.Z)(QI,(function(){var i=this,s=i.$createElement,_=i._self._c||s;return i.optionsOnly?_("board-settings-options",{attrs:{"board-class":i.boardClass,"board-options":i.boardOptions,"board-styles":i.boardStyles,"change-setting":i.saveSetting}}):_("board-settings",{attrs:{"board-options":i.boardOptions,"board-styles":i.boardStyles,"change-setting":i.saveSetting}})}),[],!1,null,null,null),eL=JI.exports;(0,rr.zt)(document.getElementById(jn));var tL=(0,ir.Z)({[Un.BOARD_SETTINGS]:{component:eL,el:`#${Un.BOARD_SETTINGS}`,store:st.default},[In]:{component:Ua,el:`#${In}`,store:st.default},[Ln]:{component:Ua,el:`#${Ln}`,propsData:{boardNamespace:"board2",gameNamespace:"game2"},store:st.default},[Nn]:{component:Yu,el:`#${Nn}`,store:st.default},[Rn]:{component:vI,el:`#${Rn}`,store:st.default},[Un.MODE_SETTINGS]:{component:vh,el:`#${Un.MODE_SETTINGS}`,store:st.default},[Un.SHARE_MENU]:{component:Ph,el:`#${Un.SHARE_MENU}`,store:st.default},[Bn]:{component:pp,el:`#${Bn}`,router:rI,store:st.default},[$n]:{component:Zh,el:`#${$n}`},[Un.TRIAL]:{component:(0,ar.jl)()?ah:Ju,el:`#${Un.TRIAL}`,store:st.default},[Un.TRIAL_PUZZLE_STREAKS]:{component:(0,ar.jl)()?Yd:Ju,el:`#${Un.TRIAL_PUZZLE_STREAKS}`,store:st.default}});const nL=document.getElementById($n);var add_dom_listeners=()=>{(()=>{const onDOMContentLoaded=()=>{tL.createInstances([In,Bn]),nL&&tL.createInstance($n),document.removeEventListener("DOMContentLoaded",onDOMContentLoaded)};document.addEventListener("DOMContentLoaded",onDOMContentLoaded)})(),injectModalMounts([Un.BOARD_SETTINGS]),tL.createInstances([Rn,Un.BOARD_SETTINGS])},rL=Object.defineProperty,iL=Object.defineProperties,aL=Object.getOwnPropertyDescriptors,sL=Object.getOwnPropertySymbols,oL=Object.prototype.hasOwnProperty,lL=Object.prototype.propertyIsEnumerable,actions_add_round_result_defNormalProp=(i,s,_)=>s in i?rL(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,actions_add_round_result_spreadValues=(i,s)=>{for(var _ in s||(s={}))oL.call(s,_)&&actions_add_round_result_defNormalProp(i,_,s[_]);if(sL)for(var _ of sL(s))lL.call(s,_)&&actions_add_round_result_defNormalProp(i,_,s[_]);return i},actions_add_round_result_spreadProps=(i,s)=>iL(i,aL(s));const rush_actions_add_round_result_addRoundResult=({commit:i,dispatch:s,rootGetters:_,rootState:T,state:S},{id:C,rating:P,solved:O})=>{const M=Date.now(),{puzzle:R,tcn:D}=T.puzzles,j=_["puzzles/userColorAsInteger"]===sm.lB.BLACK,$=Iv.Z.decodeTCN(D.moveList[0])[0],U={duration:M-S.roundStartTimestamp,flipBoard:j,id:C,initialFen:R.initialFen,initialTcn:D.moveList[0],initialMove:`${$.from}${$.to}`,rating:P,label:P,solved:O,serverData:{challengeId:S.challengeId,isRetry:!1,hintOnMove:!1,hintOnSeconds:!1,moves:null===O?"":_["game/getMoveList"],solvedWithHint:!1,tacticsProblemId:C,totalTime:(M-S.roundStartTimestamp)/1e3}};i("addRoundResult",U),i("setRoundStartTimestamp",null);const V=_["puzzles/durationCode"],Z=S.ongoingChallenges[V];s("updateOngoingChallengeCache",{durationCode:V,challengeToCache:actions_add_round_result_spreadProps(actions_add_round_result_spreadValues({},Z),{results:[...Z.results||[],U]})})},beginChallenge=async({dispatch:i,rootGetters:s})=>{var _;let T;i("removeCachedOngoingChallenge");try{T=await ca.Z.post(Vt.beginChallenge,{typeCode:s["puzzles/durationCode"]})}catch(S){isLimitReachedError(S)?i("puzzles/limitReached",{limit:vn.RUSH},{root:!0}):(0,n_.Z)(S)}return null==(_=null==T?void 0:T.data)?void 0:_.challengeId},clearUnselectedLeaderboards=({commit:i,rootGetters:s,state:_})=>{const T=_.currentLeaderboardType,S=_.friendsLeaderboards.currentFilter,C=_.globalLeaderboards.currentFilter,P=_.personalLeaderboards.currentFilter,O=s["puzzles/durationCode"];Object.values(Pt).forEach((s=>{Object.values(kn).forEach((_=>{T===At.FRIENDS&&s===S&&O===_||i("setFriendsLeaderboard",{filter:s,leaderboard:{currentUser:{rank:null,score:null},empty:!0,leaderboard:[]},durationCode:_}),T===At.GLOBAL&&s===C&&O===_||i("setGlobalLeaderboard",{filter:s,leaderboard:{currentUser:{rank:null,score:null},empty:!0,leaderboard:[]},durationCode:_}),T===At.PERSONAL&&s===P&&O===_||i("setPersonalLeaderboard",{filter:s,leaderboard:{currentUser:{rank:null,score:null},empty:!0,leaderboard:[]},durationCode:_})}))}))};const cL=new class Timer{constructor(){this.finishTime=null,this.interval=null}run({duration:i}){return this.duration=i,this.finishTime=Date.now()+this.duration,new Promise((i=>{this.interval=setInterval((()=>{Date.now()>=this.finishTime&&(i(),this.cancel())}),200)}))}cancel(){clearInterval(this.interval)}},end_session_endSession=({commit:i,dispatch:s,rootGetters:_,rootState:T,state:S})=>{i("setIsResolvingToArchiveState",!0);const{roundResults:C}=S,P=Sn[_["puzzles/timeConstraint"]];if(0===C.length||C[C.length-1].id!==T.puzzles.puzzle.id){const{id:i,rating:_}=T.puzzles.puzzle;s("addRoundResult",{id:i,rating:_,solved:null})}i("puzzles/setGameplayState",_n.FINISHED,{root:!0}),i("setSidebarView",rn),i("setSessionIsInProgress",!1),i("setFetchingStats",!0),i("assignArchivedPuzzleChallenge",{avatarUrl:T.user.settingsAvatarUrl,challengeId:S.challengeId,date:Math.round(+new Date/1e3),duration:Math.round((+new Date-S.sessionStartTimestamp)/1e3),type:P,username:T.user.username}),s("endChallenge").then((()=>{S.isResolvingToArchiveState&&(rI.replace({name:Hn.RUSH_ARCHIVE,params:{shortUuid:S.shortChallengeId,username:T.user.username,uuid:S.challengeId}}),s("getPlayerStats").then((()=>{O.Z.emit(zt)})),s("clearUnselectedLeaderboards"),S.currentLeaderboardType===At.GLOBAL?s("getGlobalLeaderboard",S.globalLeaderboards.currentFilter):S.currentLeaderboardType===At.FRIENDS?s("getFriendsLeaderboard",S.friendsLeaderboards.currentFilter):S.currentLeaderboardType===At.PERSONAL&&s("getPersonalLeaderboard",S.personalLeaderboards.currentFilter))})),cL.cancel(),i("setSessionEndTimestamp",Date.now()),O.Z.emit(Lt),s("removeCachedOngoingChallenge")};let uL=!1;const end_challenge_endChallenge=async({commit:i,state:s})=>{if(uL)return;let _;uL=!0;try{_=await(T={challengeId:s.challengeId,puzzles:(0,Tv.Z)(s.roundResults.filter((i=>i.serverData)).map((i=>i.serverData)))},createRequestWithRetries((()=>ca.Z.post(Vt.endChallenge,T)),{backoffActions:np})())}catch(S){(0,n_.Z)(S)}var T;Qh.Z.remove(Jh),uL=!1,i("setShortChallengeId",_.data.shortUuid)};let dL;const getPuzzleBatch=async({commit:i,dispatch:s,state:_},{challengeId:T})=>{var S;if(dL)return;let C;dL=!0;try{C=await ca.Z.post(Vt.getPuzzleBatch,{batchSize:16,challengeId:T,step:_.puzzles.length+1})}catch(O){return 404===(null==(S=O.response)?void 0:S.status)?s("removeCachedOngoingChallenge"):(0,n_.Z)(O),dL=!1,!1}dL=!1;const{data:{puzzles:P}}=C;return i("setPuzzles",[..._.puzzles,...P]),!0},get_friends_leaderboard_getFriendsLeaderboard=({commit:i,rootGetters:s},_=Pt.DAILY)=>{const T=s["puzzles/durationCode"];return(i=>ca.Z.get(Vt.friendsLeaderboard(i)))({type:_,typeCode:T}).then((({data:s})=>{const S=Object.freeze(s);i("setFriendsLeaderboard",{filter:_,leaderboard:S,durationCode:T})}))},get_global_leaderboard_getGlobalLeaderboard=({commit:i,rootGetters:s},_=Pt.HOURLY)=>{const T=s["puzzles/durationCode"];return(i=>ca.Z.get(Vt.globalLeaderboard(i)))({type:_,typeCode:T}).then((({data:s})=>{const S=Object.freeze(s);i("setGlobalLeaderboard",{durationCode:T,filter:_,leaderboard:S})}))},get_personal_leaderboard_getPersonalLeaderboard=({commit:i,rootGetters:s},_=Pt.ALL)=>{const T=s["puzzles/durationCode"];return(i=>ca.Z.get(Vt.personalLeaderboard(i)))({type:_,typeCode:T}).then((({data:s})=>{const S=Object.freeze({currentUser:{score:!1},leaderboard:s});i("setPersonalLeaderboard",{filter:_,leaderboard:S,durationCode:T})}))};var hL=Object.defineProperty,pL=Object.defineProperties,mL=Object.getOwnPropertyDescriptors,fL=Object.getOwnPropertySymbols,gL=Object.prototype.hasOwnProperty,vL=Object.prototype.propertyIsEnumerable,get_player_stats_defNormalProp=(i,s,_)=>s in i?hL(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,get_player_stats_spreadValues=(i,s)=>{for(var _ in s||(s={}))gL.call(s,_)&&get_player_stats_defNormalProp(i,_,s[_]);if(fL)for(var _ of fL(s))vL.call(s,_)&&get_player_stats_defNormalProp(i,_,s[_]);return i},get_player_stats_spreadProps=(i,s)=>pL(i,mL(s));const get_player_stats_getPlayerStats=({commit:i,rootGetters:s,state:_})=>{return i("setFetchingStats",!0),(T={typeCode:s["puzzles/durationCode"]},ca.Z.get(Vt.userStats(T))).then((({data:s})=>{let T={};const S=get_player_stats_spreadValues({},_.userStats.bestScores);T=Array.isArray(s)&&0===s.length||Array.isArray(s.bestScores)?get_player_stats_spreadProps(get_player_stats_spreadValues({},{bestScores:{day:null,global:null,week:null},previousBestScores:{day:0,global:0,week:0}}),{previousBestScores:S}):get_player_stats_spreadProps(get_player_stats_spreadValues({},s),{previousBestScores:S}),i("setUserStats",T),i("setFetchingStats",!1)}));var T};var bL=Object.defineProperty,yL=Object.defineProperties,_L=Object.getOwnPropertyDescriptors,wL=Object.getOwnPropertySymbols,kL=Object.prototype.hasOwnProperty,TL=Object.prototype.propertyIsEnumerable,load_next_puzzle_defNormalProp=(i,s,_)=>s in i?bL(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,load_next_puzzle_spreadValues=(i,s)=>{for(var _ in s||(s={}))kL.call(s,_)&&load_next_puzzle_defNormalProp(i,_,s[_]);if(wL)for(var _ of wL(s))TL.call(s,_)&&load_next_puzzle_defNormalProp(i,_,s[_]);return i},load_next_puzzle_spreadProps=(i,s)=>yL(i,_L(s));const actions_load_next_puzzle_loadNextPuzzle=({commit:i,dispatch:s,rootGetters:_,rootState:T,state:S})=>{let{puzzleIndex:C}=S;C+=1,i("setPuzzleIndex",C),C>S.puzzles.length-8&&s("getPuzzleBatch",{challengeId:S.challengeId});const P=_["puzzles/durationCode"];s("updateOngoingChallengeCache",{durationCode:P,challengeToCache:load_next_puzzle_spreadProps(load_next_puzzle_spreadValues({},S.ongoingChallenges[P]),{nextTacticProblem:S.puzzles[C]})}),setTimeout((()=>{s("moveToNextRound",{nextTacticProblem:S.puzzles[C]})}),(i=>{var s;const{ADVANCE_TO_NEXT_PUZZLE:_}=un;return null!=(s=_[i])?s:_[R.zI.DEFAULT]})(T.board.boardOptions.animationType))};var SL=__webpack_require__(30869);const moveToNextRound=({commit:i,dispatch:s},_)=>{(0,SL.$)({puzzleRush:_}),i("puzzles/setPuzzle",_.nextTacticProblem,{root:!0}),s("startRound")},actions_player_move_incorrect_playerMoveIncorrect=async({dispatch:i,getters:s,rootState:_})=>{await i("addRoundResult",{id:_.puzzles.puzzle.id,rating:_.puzzles.puzzle.rating,solved:!1}),s.strikes>=3?i("puzzles/endSession",vn.RUSH,{root:!0}):(i("loadNextPuzzle"),_.board.boardOptions.playSounds&&setTimeout((()=>{playSoundEffect(xt.INCORRECT)}),un.PUZZLE_OVER_SOUND_DELAY))},actions_puzzle_solved_puzzleSolved=({dispatch:i,rootState:s})=>{s.board.boardOptions.playSounds&&setTimeout((()=>{playSoundEffect(xt.CORRECT)}),un.PUZZLE_OVER_SOUND_DELAY),i("board/updateOption",{option:"enabled",value:!1},{root:!0}),i("addRoundResult",{id:s.puzzles.puzzle.id,rating:s.puzzles.puzzle.rating,solved:!0}),i("loadNextPuzzle")},removeCachedOngoingChallenge=({commit:i,rootGetters:s,state:_})=>{const{ongoingChallenges:T}=_;delete T[s["puzzles/durationCode"]],i("setOngoingChallenges",Object.assign({},T)),kr.Z.set(Ot,T)},startRound=({commit:i,dispatch:s,rootState:_},T={})=>{const{makeComputerMove:S=!0}=T,{animationType:C}=_.board.boardOptions;i("board/setOption",{option:"fadeSetup",value:getBoardFadeSetup(C)},{root:!0}),i("setRoundStartTimestamp",Date.now()),s("puzzles/initializePuzzle",{},{root:!0}),s("board/updateOption",{option:"enabled",value:!0},{root:!0}),i("board/setOption",{option:"fadeSetup",value:0},{root:!0}),i("puzzles/setGameplayState",_n.USER_MOVE,{root:!0}),S&&s("puzzles/makeComputerMove",{},{root:!0})};let CL=!1;const rush_actions_start_session_startSession=async({commit:i,dispatch:s,rootGetters:_,state:T})=>{if(CL)return;CL=!0,i("setIsResolvingToArchiveState",!1),await dn.loadPuzzleChallenge;const S=_["puzzles/durationCode"];i("puzzles/setTimeConstraint",Tn[S],{root:!0});const C=T.ongoingChallenges[S],P=(({ongoingChallenge:i,durationCode:s})=>Boolean(i)&&Boolean(i.results)&&(i.finishDateTime>Date.now()||i.results.length>0&&s===kn.SURVIVAL))({durationCode:S,ongoingChallenge:C}),M=P?C.challengeId:await s("beginChallenge");if(!M)return CL=!1,!1;i("setChallengeId",M),i("clearPuzzles");let R=0;if(P){const{nextTacticProblem:s,results:_}=C;i("setPuzzles",s?[..._,s]:[..._]),R=_.length}const D=await s("getPuzzleBatch",{challengeId:M});if(CL=!1,!D)return;i("setPuzzleIndex",R),i("puzzles/setPuzzle",T.puzzles[R],{root:!0}),rI.push({name:vn.RUSH}),O.Z.emit(Mt),i("setShortChallengeId",""),i("clearRoundResults"),i("assignArchivedPuzzleChallenge",null),i("setFinishTime",null),i("setSidebarView",an),s("startRound",{makeComputerMove:!1});let j=Xn.SERVER_COUNTDOWN,$=Date.now()+j,U=$+Tn[S];P?(U=C.finishDateTime,$=C.startDateTime,j=0,i("setRoundResults",[...C.results])):O.Z.emit(It),setTimeout((()=>{if(i("setSessionStartTimestamp",$),i("setFinishTime",U),i("setRoundStartTimestamp",$),i("setSessionIsInProgress",!0),s("puzzles/makeComputerMove",{},{root:!0}),_["puzzles/timeConstraint"]!==wn.SURVIVAL){const i=Date.now()-$;cL.run({duration:_["puzzles/timeConstraint"]-i}).then((()=>{s("puzzles/endSession",vn.RUSH,{root:!0})}))}}),j),s("updateOngoingChallengeCache",{durationCode:S,challengeToCache:{challengeId:M,startDateTime:$,finishDateTime:U,results:P?[...C.results]:[],nextTacticProblem:P?C.nextTacticProblem:null}})};var xL=Object.defineProperty,EL=Object.defineProperties,PL=Object.getOwnPropertyDescriptors,AL=Object.getOwnPropertySymbols,OL=Object.prototype.hasOwnProperty,ML=Object.prototype.propertyIsEnumerable,update_ongoing_challenge_cache_defNormalProp=(i,s,_)=>s in i?xL(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_;const updateOngoingChallengeCache=({commit:i,state:s},{durationCode:_,challengeToCache:T})=>{const S=((i,s)=>EL(i,PL(s)))(((i,s)=>{for(var _ in s||(s={}))OL.call(s,_)&&update_ongoing_challenge_cache_defNormalProp(i,_,s[_]);if(AL)for(var _ of AL(s))ML.call(s,_)&&update_ongoing_challenge_cache_defNormalProp(i,_,s[_]);return i})({},s.ongoingChallenges),{[_]:T});i("setOngoingChallenges",S),kr.Z.set(Ot,S)},viewTactic=({rootState:i},s)=>{if(i.puzzles.gameplayState===_n.FINISHED){const i=Vt.tacticView(s.id);window.open(i,"_blank")}};var zL={hasOngoingChallenge:({ongoingChallenges:i},s,_,T)=>{const S=i[T["puzzles/durationCode"]];return!(S&&!S.results)&&(Boolean(S)&&(T["puzzles/durationCode"]===kn.SURVIVAL||Date.now()<S.finishDateTime))},isArchivedPuzzleChallenge:i=>!(0,Uw.z)(i.archivedPuzzleChallenge),solvedRounds:i=>i.roundResults.filter((i=>!0===i.solved)).length,strikes:i=>i.roundResults.filter((i=>!1===i.solved)).length},IL=Object.defineProperty,LL=Object.getOwnPropertySymbols,RL=Object.prototype.hasOwnProperty,NL=Object.prototype.propertyIsEnumerable,rush_mutations_defNormalProp=(i,s,_)=>s in i?IL(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,rush_mutations_spreadValues=(i,s)=>{for(var _ in s||(s={}))RL.call(s,_)&&rush_mutations_defNormalProp(i,_,s[_]);if(LL)for(var _ of LL(s))NL.call(s,_)&&rush_mutations_defNormalProp(i,_,s[_]);return i},DL={clearPuzzles(i){i.puzzles=[]},setPuzzles(i,s){i.puzzles=s},setPuzzleIndex(i,s){i.puzzleIndex=s},setOngoingChallenges(i,s){i.ongoingChallenges=s||{}},setChallengeRanks(i,s){i.challengeRanks=s},addRoundResult(i,s){i.roundResults.push(s)},assignArchivedPuzzleChallenge(i,s){i.archivedPuzzleChallenge=null===s?{}:rush_mutations_spreadValues(rush_mutations_spreadValues({},i.archivedPuzzleChallenge),s)},clearRoundResults(i){i.roundResults=[]},setChallengeId(i,s){i.challengeId=s},setFetchingStats(i,s){i.fetchingStats=s},setFinishTime(i,s){i.finishTime=s},setFriendsLeaderboard(i,{durationCode:s,filter:_,leaderboard:T}){i.friendsLeaderboards[s][_]=T},setFriendsLeaderboardsFilter(i,s){i.friendsLeaderboards.currentFilter=s},setGlobalLeaderboard(i,{durationCode:s,filter:_,leaderboard:T}){i.globalLeaderboards[s][_]=T},setGlobalLeaderboardsFilter(i,s){i.globalLeaderboards.currentFilter=s},setLeaderboardType(i,s){i.currentLeaderboardType=s},setIsResolvingToArchiveState(i,s){i.isResolvingToArchiveState=s},setPersonalLeaderboard(i,{durationCode:s,filter:_,leaderboard:T}){i.personalLeaderboards[s][_]=T},setPersonalLeaderboardsFilter(i,s){i.personalLeaderboards.currentFilter=s},setRoundResults(i,s){i.roundResults=s},setRoundStartTimestamp(i,s){i.roundStartTimestamp=s},setSessionIsInProgress(i,s){i.sessionIsInProgress=s},setSessionStartTimestamp(i,s){i.sessionStartTimestamp=s},setSessionEndTimestamp(i,s){i.sessionEndTimestamp=s},setShortChallengeId(i,s){i.shortChallengeId=s},setSidebarView(i,s){i.sidebarView=s},setUserStats(i,s){i.userStats=s}},jL={namespaced:!0,actions:C,getters:zL,mutations:DL,state:{puzzles:[],puzzleIndex:0,ongoingChallenges:{},challengeRanks:{},archivedPuzzleChallenge:{},challengeId:"",currentLeaderboardType:At.GLOBAL,fetchingStats:!1,finishTime:0,friendsLeaderboards:defaultLeaderboardsState(Pt.DAILY),globalLeaderboards:defaultLeaderboardsState(Pt.HOURLY),isResolvingToArchiveState:!1,personalLeaderboards:defaultLeaderboardsState(Pt.ALL),roundResults:[],roundStartTimestamp:null,sessionEndTimestamp:null,sessionIsInProgress:!1,sessionStartTimestamp:null,shortChallengeId:"",sidebarView:sn,userStats:{bestScores:{day:null,global:null,week:null},previousBestScores:{day:0,global:0,week:0}}}},BL=__webpack_require__(3510);const getUserStats=({commit:i})=>ca.Z.get(Gn.userPuzzleStats).then((({data:s})=>{i("setUserPuzzleStats",s)})),moveBackward=({commit:i,dispatch:s,state:_},{boardNamespace:T="board",gameNamespace:S="game"}={boardNamespace:"board",gameNamespace:"game"})=>{_.gameplayState===_n.MOVE_INCORRECT?_.puzzleMode===vn.RATED?s("puzzlesRated/retryPuzzle",null,{root:!0}):_.puzzleMode===vn.LEARNING&&s("retryPuzzle"):(i(`${T}/setOption`,{option:"highlightColor",value:null},{root:!0}),s(`${S}/moveBackward`,1,{root:!0}))},moveForward=({commit:i,dispatch:s,rootGetters:_},{boardNamespace:T="board",gameNamespace:S="game"}={boardNamespace:"board",gameNamespace:"game"})=>{_[`${S}/canMoveForward`]&&(i(`${T}/setOption`,{option:"highlightColor",value:null},{root:!0}),s(`${S}/moveForward`,1,{root:!0}))},$L={[vn.BATTLE]:"puzzlesBattle",[vn.LEARNING]:"puzzlesLearning",[vn.RATED]:"puzzlesRated",[vn.RUSH]:"puzzlesRush"},board_make_move_boardMakeMove=async({commit:i,dispatch:s,rootGetters:_,rootState:T,state:S})=>{if(!_["game/atFinalMoveNode"])return void s("game/selectLineEnd",void 0,{root:!0});if(S.gameplayState!==_n.USER_MOVE)return;i("setPositionHintCount",0);const C=$L[S.puzzleMode];((i,s)=>{const _=s.moveList[s.nextMoveIndex];return i.tcn.substring(i.tcn.length-2)===_})(T.game,S.tcn)?s("playerMoveCorrect"):(s("scheduleAutoMove",{playerMoveCorrect:!1}),s("playerMoveIncorrect"),s(`${C}/playerMoveIncorrect`,{},{root:!0}))},castThemeVote=({commit:i,state:s},{theme:_,vote:T})=>{const S={id:s.puzzle.id,tagId:_.id,upOrDown:T};return(C=S,ca.Z.post(Gn.puzzleVoteTheme(C))).then((()=>{i("markThemeAsVoted",_)}));var C},actions_end_session_endSession=({dispatch:i},s)=>{i(`${$L[s]}/endSession`,{},{root:!0})};let UL;const fetchAllPuzzleThemes=({commit:i})=>UL||(UL=ca.Z.get(Gn.allPuzzleThemes).then((({data:s})=>{const{all:_,tags:T}=s;i("setPuzzleThemes",{all:formatPuzzleThemes([_]).pop(),tags:formatPuzzleThemes(T)})})),UL);var FL=Object.defineProperty,HL=Object.defineProperties,qL=Object.getOwnPropertyDescriptors,VL=Object.getOwnPropertySymbols,GL=Object.prototype.hasOwnProperty,ZL=Object.prototype.propertyIsEnumerable,fetch_puzzle_themes_defNormalProp=(i,s,_)=>s in i?FL(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_;const fetchPuzzleThemes=({commit:i,state:s})=>{const _=s.puzzle.id;return(T=_,ca.Z.get(Gn.puzzleThemes(T))).then((({data:s})=>{s.labeledTags.map((i=>((i,s)=>HL(i,qL(s)))(((i,s)=>{for(var _ in s||(s={}))GL.call(s,_)&&fetch_puzzle_themes_defNormalProp(i,_,s[_]);if(VL)for(var _ of VL(s))ZL.call(s,_)&&fetch_puzzle_themes_defNormalProp(i,_,s[_]);return i})({},i),{lessonLink:getLessonLinkFromPuzzleThemeId(i.id)}))),i("setCurrentPuzzleThemes",s)}));var T},actions_initialize_puzzle_initializePuzzle=({commit:i,dispatch:s,getters:_,state:T})=>{hideComments();const{puzzle:S}=T;s("game/init",{fen:S.initialFen,tcn:""},{root:!0}),s("board/updateOption",{option:"enabled",value:!0},{root:!0}),i("setPositionHintCount",0),i("setHintState",{dateShown:null,forMove:null,wasRequested:!1}),i("setRoundDurationInSeconds",0),s("game/setPlayingAs",_.userColorAsInteger,{root:!0}),s("parseTcnMoveList",S.tcnMoveList),s("setBoardPosition"),i("setTcnMoveListLength",T.tcn.moveList.length),i("setTcnNextMoveIndex",0),i("setCurrentPuzzleThemes",{canVote:!0,labeledTags:[],suggestedTags:[]})};var WL=Object.defineProperty,KL=Object.defineProperties,YL=Object.getOwnPropertyDescriptors,XL=Object.getOwnPropertySymbols,QL=Object.prototype.hasOwnProperty,JL=Object.prototype.propertyIsEnumerable,limit_reached_defNormalProp=(i,s,_)=>s in i?WL(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_;const limitReached=({commit:i,rootState:s},{limit:_})=>{i("setReachedLimits",((i,s)=>KL(i,YL(s)))(((i,s)=>{for(var _ in s||(s={}))QL.call(s,_)&&limit_reached_defNormalProp(i,_,s[_]);if(XL)for(var _ of XL(s))JL.call(s,_)&&limit_reached_defNormalProp(i,_,s[_]);return i})({},s.puzzles.reachedLimits),{[_]:!0}));const T=s.puzzles.puzzleMode===vn.RATED&&s.puzzles.reachedLimits.ratedLimitPerDay<8;(0,ar.nJ)()?showGuestModal({slide:Bi._G.GUEST_MODAL_SLIDES.puzzles}):T?showTrialPuzzleStreaksModal():showTrialModal()},makeComputerMove=({commit:i,dispatch:s,rootGetters:_,rootState:T,state:S},{boardStore:C,gameStore:P,isFirstMove:O,move:M}={})=>{if(!M&&!hasMoreMoves(S.tcn))return;const D=C||"board",j=P||"game",makeMove=async()=>{if(await(0,cr.cF)().animationComplete("Move"),await((i=0)=>new Promise((s=>{setTimeout(s,i)})))(Xn.COMPUTER_MOVE_DELAY[T[D].boardOptions.animationType]),!_[`${j}/isUserTurn`]&&(i(`${D}/setOption`,{option:"highlightColor",value:null},{root:!0}),S.gameplayState!==_n.FINISHED)){const _=M||S.tcn.moveList[S.tcn.nextMoveIndex];M||i("setTcnNextMoveIndex",S.tcn.nextMoveIndex+1),s(`${j}/makeOpponentTcnMove`,_,{root:!0})}};if(O||void 0===O&&0===S.tcn.nextMoveIndex){const i=(i=>{const{COMPUTER_MOVE_DELAY_INTRO:s}=Xn;return[R.zI.NONE,R.zI.SLOW].includes(i)?s[i]:s[R.zI.DEFAULT]})(T[D].boardOptions.animationType);Qn.makeComputerMove[j]=setTimeout(makeMove,i)}else{const i=T[j].selectedNode;i&&s(`${D}/updateBoardEffect`,{classification:R.xt.CORRECT,node:i,persist:!0,gameStore:j},{root:!0}),Qn.makeComputerMove[j]=setTimeout(makeMove),setTimeout((()=>{s(`${j}/markEffect`,{effect:null,persist:!0},{root:!0})}),Xn.HIDE_FEEDBACK_DELAY)}},OpenInAnalysisEditor=i=>{const s=(i=>{let s="";const _=document.createElement("form"),T=document.createElement("textarea"),S={},C=i||{tab:"computerAnalysis"};if(C.target=i.target||"_blank",_.method="post",i.pgn&&(s=i.pgn),C.hide&&(S.hide=C.hide),C.ne&&(S.ne=C.ne),C.fen&&(S.fen=C.fen),C.tab&&(S.tab=C.tab),void 0!==C.flip&&(S.flip=C.flip),void 0!==C.computer&&Number(C.computer)&&(S.tab="computerAnalysis"),C.gameId){const i=document.createElement("textarea");i.name="gameId",i.value=C.gameId,_.appendChild(i)}if(C.analysisPgn){const i=document.createElement("textarea");i.name="analysisPgn",i.value=C.analysisPgn,_.appendChild(i)}return C.diagramType&&(S.diagramType=C.diagramType),_.action=D.Z.generate("web_analysis_board_editor",S),_.target=C.target,T.name="pgn",T.value=s,_.appendChild(T),_})(i);document.body.appendChild(s),s.submit(),document.body.removeChild(s)},open_in_analysis_openInAnalysis=({rootState:i,state:s})=>{xc.Z.logEvent("Tactics - Analysis");const _=i.game.tcn,T=(({pgn:i,userTcn:s})=>{const _=_r().createGame({analysis:!0});return _.loadPgn(i),_.resetToMainLine(),_.loadMoves(s,{method:"merge"}),_.pgn()})({pgn:s.puzzle.pgn.replace(/\n\s*\n/g,"\n"),userTcn:_});OpenInAnalysisEditor({fen:s.puzzle.initialFen,flip:i.board.boardOptions.flipBoard,pgn:T})},parse_tcn_move_list_parseTcnMoveList=({commit:i},s)=>{i("setTcnMoveList",parseTcnMoveList(s))},playerMoveCorrect=({commit:i,dispatch:s,rootState:_,state:T})=>{const{tcn:S}=T,C=_.game.selectedNode;s("board/updateBoardEffect",{classification:R.xt.CORRECT,node:C},{root:!0}),i("board/setOption",{option:"highlightColor",value:R.xt.CORRECT.color},{root:!0}),hasMoreMoves(T.tcn)?(i("setTcnNextMoveIndex",S.nextMoveIndex+1),s("makeComputerMove")):S.nextMoveIndex===S.moveListLength-1&&(i("setGameplayState",_n.MOVE_CORRECT),s("puzzleSolved"),s("scheduleAutoMove",{playerMoveCorrect:!0}))},shared_actions_player_move_incorrect_playerMoveIncorrect=({commit:i,dispatch:s,rootState:_})=>{const T=_.game.selectedNode;s("board/updateBoardEffect",{classification:R.xt.INCORRECT,node:T},{root:!0}),i("board/setOption",{option:"highlightColor",value:R.xt.INCORRECT.color},{root:!0}),i("setGameplayState",_n.MOVE_INCORRECT)},shared_actions_puzzle_solved_puzzleSolved=({dispatch:i,state:s})=>{i(`${$L[s.puzzleMode]}/puzzleSolved`,{},{root:!0})},reportCurrentPuzzle=({state:i})=>{const s=i.puzzle.id;return(_=s,ca.Z.get(Gn.tacticsReportProblem(_))).then((()=>{(0,Gi.el)({message:Jn.problemReported,type:Vi.V5.success})})).finally((()=>{O.Z.emit(mn)}));var _},retry_puzzle_retryPuzzle=({commit:i,dispatch:s,rootGetters:_,state:T})=>{const{puzzle:S,tcn:C}=T,P=Math.max(C.nextMoveIndex-1,0),O=C.moveList.slice(0,P);i("puzzles/setResetPuzzle",!1,{root:!0}),i("puzzles/setTcnNextMoveIndex",P,{root:!0}),s("game/init",{fen:S.initialFen,tcn:O.join("")},{root:!0}),i("puzzles/setGameplayState",_n.USER_MOVE,{root:!0}),setTimeout((()=>{s("game/setPlayingAs",_["puzzles/userColorAsInteger"],{root:!0}),s("puzzles/makeComputerMove",{},{root:!0})}))},save_show_details_saveShowDetails=({commit:i},s)=>(i("setShowDetails",s),(async({showDetails:i})=>(await(0,BL.z)({"puzzles.show_details":i}),ca.Z.post(Gn.saveShowDetails({showDetails:i}))))({showDetails:s})),save_show_timer_saveShowTimer=({commit:i},s)=>(i("setShowTimer",s),(async({showTimer:i})=>(await(0,BL.z)({"puzzles.show_timer":i}),ca.Z.post(Gn.saveShowTimer({showTimer:Number(i)}))))({showTimer:s})),setBoardPosition=({commit:i,getters:s,rootState:_},{colorAsInteger:T,boardStore:S}={})=>{const C=S||"board";i(`${C}/setOptions`,{flipBoard:(T||s.userColorAsInteger)===sm.lB.BLACK&&!_[C].boardOptions.isWhiteOnBottom},{root:!0})},scheduleAutoMove=({dispatch:i,state:s},{playerMoveCorrect:_})=>{shouldScheduleNextTactic({playerMoveCorrect:_,puzzleMode:s.puzzleMode,showDetails:s.showDetails})&&(Qn.segueToNextPuzzle=setTimeout((()=>{if(Qn.segueToNextPuzzle=null,s.reachedLimits[s.puzzleMode])return;const _=$L[s.puzzleMode];i(`${_}/nextPuzzle`,void 0,{root:!0})}),Xn.ADVANCE_TO_NEXT_PUZZLE_DELAY))},selectPuzzleMode=({commit:i,state:s},{showChallengeForm:_,type:T,timeConstraint:S})=>{T!==s.puzzleMode&&(rI.push({name:T}),i("setGameplayState",_n.START)),Number.isInteger(S)&&i("setTimeConstraint",S),hideComments(),_?i("setShowChallengeForm",!0):s.showChallengeForm&&i("setShowChallengeForm",!1)},showMoveHint=({commit:i,dispatch:s,rootState:_,state:T})=>{const S=$L[T.puzzleMode],C=T.tcn.moveList[T.tcn.nextMoveIndex],{from:P,to:O}=Iv.Z.decodeTCN(C)[0];if(!T.hint.wasRequested){i("setHintState",{dateShown:Date.now(),forMove:C,wasRequested:!0})}vn.LEARNING===T.puzzleMode&&i(`${S}/setHintCount`,_[S].hintCount+1,{root:!0}),0===T.positionHintCount?s("game/markSquare",{square:P,opacity:.5,color:R.O9.RETRY_HINT_COLOR_IN_HEX},{root:!0}):s("game/markArrow",{fromMove:P,toMove:O},{root:!0}),i("setPositionHintCount",T.positionHintCount+1)},showSolution=({commit:i,dispatch:s,rootGetters:_,state:T})=>{if(Qn.playSolution)return;i("board/setOption",{option:"highlightColor",value:null},{root:!0});const{puzzle:S,tcn:C}=T,P=C.moveListLength||parseTcnMoveList(S.tcnMoveList).length;return s("game/loadFromPgn",{diff:-P,pgn:S.pgn},{root:!0}).then((()=>{s("game/moveToStart",void 0,{root:!0}),i("setGameplayState",_n.SOLUTION);const T=S.id,playNextMove=()=>{const i=_["game/canMoveForward"];T===S.id&&i?(s("moveForward"),Qn.playSolution=setTimeout(playNextMove,Xn.PLAY_SOLUTION_DELAY)):Qn.playSolution=null};Qn.playSolution=setTimeout(playNextMove,Xn.PLAY_SOLUTION_DELAY)}))},startCurrentPuzzle=async({commit:i,dispatch:s,state:_})=>(await(0,M.m)(hn),i("board/setOption",{option:"fadeSetup",value:at.mx},{root:!0}),i("setGameplayState",_n.USER_MOVE),Dr.default.nextTick().then((()=>{s("initializePuzzle"),i("board/setOption",{option:"fadeSetup",value:0},{root:!0}),i(`${$L[_.puzzleMode]}/setPuzzleStartTimestamp`,Date.now(),{root:!0}),s("makeComputerMove")}))),startResumeMode=({dispatch:i,getters:s,rootState:_,state:T})=>{if(T.currentMode===vn.BATTLE&&_.user.isGuest||!(0,ar.jl)()&&T.puzzleMode===vn.LEARNING)return void showGuestModal();const S=T.puzzleMode===vn.RATED&&T.reachedLimits.ratedLimitPerDay<8;isLimitReached({puzzleMode:T.puzzleMode,reachedLimits:T.reachedLimits})?_.user.isGuest?showGuestModal({slide:Bi._G.GUEST_MODAL_SLIDES.puzzles}):S?showTrialPuzzleStreaksModal():showTrialModal():(i("selectPuzzleMode",{type:T.puzzleMode,timeConstraint:s.timeConstraint}),setTimeout((()=>{i("startSession",T.puzzleMode)})))},shared_actions_start_session_startSession=({dispatch:i},s)=>{i(`${$L[s]}/startSession`,{},{root:!0}),O.Z.emit(fn)};var eR=Object.defineProperty,tR=Object.defineProperties,nR=Object.getOwnPropertyDescriptors,rR=Object.getOwnPropertySymbols,iR=Object.prototype.hasOwnProperty,aR=Object.prototype.propertyIsEnumerable,suggest_theme_defNormalProp=(i,s,_)=>s in i?eR(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_;const suggestTheme=({commit:i,dispatch:s,state:_},T)=>{const S=_.currentPuzzleThemes.suggestedTags.findIndex((({id:i})=>i===T));if(-1===S)return;const C=((i,s)=>tR(i,nR(s)))(((i,s)=>{for(var _ in s||(s={}))iR.call(s,_)&&suggest_theme_defNormalProp(i,_,s[_]);if(rR)for(var _ of rR(s))aR.call(s,_)&&suggest_theme_defNormalProp(i,_,s[_]);return i})({},_.currentPuzzleThemes.suggestedTags[S]),{lessonLink:getLessonLinkFromPuzzleThemeId(T),voted:!0});return i("addSuggestedTheme",{suggestedTagIndex:S,theme:C}),s("castThemeVote",{theme:C,vote:Vn.UP})};var sR={computerColor:i=>""===i.puzzle.colorOfUser?"":i.puzzle.colorOfUser===sm._l.WHITE?sm._l.BLACK:sm._l.WHITE,timeConstraint:i=>i.timeConstraints[i.puzzleMode],durationCode:i=>Sn[i.timeConstraints[i.puzzleMode]],userColor:i=>i.puzzle.colorOfUser,userColorAsInteger:i=>sm.lB[i.puzzle.colorOfUser.toUpperCase()]};var oR=__webpack_require__(57428),lR=Object.defineProperty,cR=Object.defineProperties,uR=Object.getOwnPropertyDescriptors,dR=Object.getOwnPropertySymbols,hR=Object.prototype.hasOwnProperty,pR=Object.prototype.propertyIsEnumerable,shared_mutations_defNormalProp=(i,s,_)=>s in i?lR(i,s,{enumerable:!0,configurable:!0,writable:!0,value:_}):i[s]=_,mR={addSuggestedTheme(i,{suggestedTagIndex:s,theme:_}){i.currentPuzzleThemes.labeledTags.push(_),i.currentPuzzleThemes.suggestedTags.splice(s,1)},markThemeAsVoted(i,s){const _=i.currentPuzzleThemes.labeledTags.findIndex((({id:i})=>i===s.id));_>-1&&(i.currentPuzzleThemes.labeledTags[_].voted=!0)},setCurrentPuzzleThemes(i,s){i.currentPuzzleThemes=s},setGameplayState(i,s){i.gameplayState=s},setHasLoggedAmplitude(i,s){i.hasLoggedAmplitude=s},setHintState(i,s){i.hint=s},setPositionHintCount(i,s){i.positionHintCount=s},setPuzzle(i,s){(0,oR.Nu)({key:"puzzleId",value:s.id}),i.puzzle=s},setPuzzleFen3(i,s){i.puzzle.fen3=s},setPuzzleMode(i,s){i.puzzleMode=s},setPuzzleInternalNote(i,s){i.puzzle.internalNote=s},setPuzzlePgn(i,s){i.puzzle.pgn=s},setPuzzleRating(i,s){i.puzzle.rating=s},setPuzzleThemes(i,s){var _,T;s.tags=(_=s.tags,T="name",[..._].sort(((i,s)=>i[T]>s[T]?1:-1))),i.puzzleThemes=s},setReachedLimits(i,s){i.reachedLimits=s},setResetPuzzle(i,s){i.resetPuzzle=s},setRoundDurationInSeconds(i,s){i.roundDurationInSeconds=s},setShowChallengeForm(i,s){i.showChallengeForm=s},setShowDetails(i,s){i.showDetails=s},setShowTimer(i,s){i.showTimer=s},setTcnMoveList(i,s){i.tcn.moveList=s},setTcnMoveListLength(i,s){i.tcn.moveListLength=s},setTcnNextMoveIndex(i,s){i.tcn.nextMoveIndex=s},setTimeConstraint(i,s){s!==i.timeConstraints[i.puzzleMode]&&(i.timeConstraints[i.puzzleMode]=s,kr.Z.set(Yn,i.timeConstraints))},setUserPuzzleStats(i,s){i.stats=((i,s)=>cR(i,uR(s)))(((i,s)=>{for(var _ in s||(s={}))hR.call(s,_)&&shared_mutations_defNormalProp(i,_,s[_]);if(dR)for(var _ of dR(s))pR.call(s,_)&&shared_mutations_defNormalProp(i,_,s[_]);return i})({},s),{highestRating:Math.max(s.highestRating,s.rating),initialRating:i.stats.initialRating||s.rating})}},fR={currentPuzzleThemes:{canVote:!0,labeledTags:[],suggestedTags:[]},gameplayState:_n.START,hasLoggedAmplitude:!1,hint:{dateShown:null,forMove:null,wasRequested:!1},positionHintCount:0,puzzle:{colorOfUser:""},puzzleMode:vn.RUSH,puzzleThemes:{all:[],tags:[]},reachedLimits:{[vn.LEARNING]:!1,[vn.RATED]:!1,[vn.RUSH]:!1},resetPuzzle:!1,roundDurationInSeconds:0,showChallengeForm:!1,showDetails:"",showTimer:!0,stats:{highestRating:0,initialRating:0,percentCorrect:0,rating:0,todayAttempted:0,totalAttempted:0},tcn:{moveList:[],moveListLength:0,nextMoveIndex:0},timeConstraints:(()=>{const i={[vn.RUSH]:wn.FIVE_MINUTES,[vn.BATTLE]:wn.THREE_MINUTES},s=kr.Z.get(Yn);return s||i})()},gR={namespaced:!0,actions:P,getters:sR,mutations:mR,state:fR},set_store_data=()=>{st.default.commit("puzzles/setReachedLimits",(()=>{const i=document.getElementById(jn);return JSON.parse(i.getAttribute("data-reached-limits"))})()),st.default.commit("puzzles/setShowDetails",document.getElementById(jn).getAttribute("data-show-details")),st.default.commit("puzzles/setShowTimer",(()=>{const i=document.getElementById(jn);return string_numeral_to_boolean(i.getAttribute("data-show-timer"))})());const i=(()=>{const i=document.getElementById(jn);return JSON.parse(i.getAttribute("data-puzzle"))})();i&&st.default.commit("puzzles/setPuzzle",i)},vR=__webpack_require__(7504),bR=__webpack_require__(18137);Object.create,Object.defineProperty,Object.getOwnPropertyDescriptor,Object.getOwnPropertyNames,Object.getPrototypeOf,Object.prototype.hasOwnProperty;const yR=(0,vR.eI)({init(){kr.Z.get(bR.J.getStorageKey())||__webpack_require__.e(174).then(__webpack_require__.bind(__webpack_require__,51174)).then((i=>{(0,vR.DP)([i.default])}))}}),_R=(0,vR.ko)({context:bR.J,clients:[yR]});var wR={props:{icon:String}},kR={"puzzle-icon":"modal-seo-icon-puzzle-icon","battle-icon":"modal-seo-icon-battle-icon","rated-icon":"modal-seo-icon-rated-icon","rush-icon":"modal-seo-icon-rush-icon","learning-icon":"modal-seo-icon-learning-icon"};var TR=(0,Rr.Z)(wR,(function(){var i=this,s=i.$createElement;return(i._self._c||s)("div",{class:i.$style[i.icon]})}),[],!1,(function modal_seo_icon_injectStyles(i){this.$style=kR.locals||kR}),null,null).exports;const icon=i=>({render:s=>s(TR,{props:{icon:i}})}),SR={[vn.START]:{bullets:[{icon:"checkmark",text:(0,j.dW)("Solve puzzles to improve your chess tactics")},{icon:"chess-move-alt",text:(0,j.dW)("Improve pattern recognition and awareness")},{icon:"chess-board-puzzle",text:(0,j.dW)("Have fun learning as you solve 150K+ puzzles")}],buttonText:(0,j.dW)("Ok"),icon:icon("puzzle-icon"),subtitleBottom:(0,j.dW)("Learn from interactive lessons created by chess masters."),title:(0,j.dW)("Chess Puzzles")},[vn.BATTLE]:{bullets:[{icon:"fire-puzzle",text:(0,j.dW)("Play puzzle rush against another player")},{icon:"cup",text:(0,j.dW)("Outscore your opponents to win")},{icon:"fire-alt",text:(0,j.dW)("Win streaks multiply season points")}],buttonText:(0,j.dW)("Ok"),icon:icon("battle-icon"),subtitleTop:(0,j.dW)("How to Play"),title:(0,j.dW)("Puzzle Battle")},[vn.RATED]:{bullets:[{icon:"chess-board-puzzle",text:(0,j.dW)("Solve puzzles to improve your rating")},{icon:"stats-arrow-up",text:(0,j.dW)("Puzzles get more difficult as you get better")},{icon:"circle-timer",text:(0,j.dW)("Solve quickly for maximum time bonus")}],buttonText:(0,j.dW)("Start"),icon:icon("rated-icon"),subtitleBottom:(0,j.dW)("Train with chess puzzles to improve your tactical play"),title:(0,j.dW)("Puzzles")},[vn.RUSH]:{bullets:[{icon:"chip",text:(0,j.dW)("Solve as many chess puzzles as you can")},{icon:"select",text:(0,j.dW)("Puzzles start easy and get harder")},{icon:"user",text:(0,j.dW)("Miss three puzzles and your Rush is over")}],buttonText:(0,j.dW)("Ok"),icon:icon("rush-icon"),subtitleTop:(0,j.dW)("Puzzle Rush"),title:(0,j.dW)("How to Play")},[vn.LEARNING]:{bullets:[{icon:"checkbox",text:(0,j.dW)("Choose the type of puzzles to solve")},{icon:"select",text:(0,j.dW)("Select the difficulty of chess puzzles")},{icon:"redo",text:(0,j.dW)("Retry puzzles you've missed before")}],buttonText:(0,j.dW)("Ok"),icon:icon("learning-icon"),subtitleBottom:(0,j.dW)("Customize your Puzzle training and practice without time pressure."),title:(0,j.dW)("Learning Puzzles")}};(0,M.q)(hn),(0,qi.X)({board:DT.Z,game:jT.Z,puzzles:gR,puzzlesRated:gE,puzzlesRush:jL}),(async()=>{await(0,M.m)(hn),st.default.dispatch("board/loadOptions");const i=rI.currentRoute.name===Hn.RATED&&st.default.state.puzzles.gameplayState===_n.START;st.default.dispatch("game/init",{fen:i?"8/8/8/8/8/8/8/8":void 0}),st.default.dispatch("user/refreshUserRoles"),st.default.getters["user/isLoggedIn"]&&(await st.default.dispatch("puzzles/getUserStats"),getIdsFromUrl().length>0&&((0,qi.X)({puzzlesLearning:Ox}),await st.default.dispatch("puzzles/fetchAllPuzzleThemes"),st.default.dispatch("puzzlesLearning/startLearnIfTagsInUrl"))),i&&st.default.dispatch("puzzles/startResumeMode")})(),set_store_data(),add_dom_listeners(),window.addEventListener("popstate",(()=>(i=>{var s;O.Z.emit(re),O.Z.emit(Mt),(null==(s=st.default.state.puzzlesBattle)?void 0:s.hasTwoBoards)&&st.default.dispatch("puzzlesBattle/resetToStartView"),st.default.commit("puzzles/setGameplayState",_n.START),i.replace("/")})(rI))),window.chesscom.features.includes("video_puzzles_rewards")&&window.chesscom&&(window.chesscom.adBlockDetected=!1,detectAdBlockByDiv(),detectAdBlockByImg()),O.Z.on(gn,(function createWelcomeModal(){SR[fR.puzzleMode]&&(0,vR.QB)({extensions:[_R({getStorageKey:()=>`puzzles-${fR.puzzleMode}-welcome-modal`,getContent:()=>SR[fR.puzzleMode]})]})}))}()}();